"use strict";(self.webpackChunkangular_document_scanner=self.webpackChunkangular_document_scanner||[]).push([[179],{676:()=>{function vn(e){return"function"==typeof e}function Us(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const du=Us(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,h)=>`${h+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Gs(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Lr{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const d of n)d.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(vn(r))try{r()}catch(d){t=d instanceof du?d.errors:[d]}const{_finalizers:h}=this;if(h){this._finalizers=null;for(const d of h)try{Ip(d)}catch(s){t=t??[],s instanceof du?t=[...t,...s.errors]:t.push(s)}}if(t)throw new du(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ip(t);else{if(t instanceof Lr){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Gs(n,t)}remove(t){const{_finalizers:n}=this;n&&Gs(n,t),t instanceof Lr&&t._removeParent(this)}}Lr.EMPTY=(()=>{const e=new Lr;return e.closed=!0,e})();const vp=Lr.EMPTY;function yp(e){return e instanceof Lr||e&&"closed"in e&&vn(e.remove)&&vn(e.add)&&vn(e.unsubscribe)}function Ip(e){vn(e)?e():e.unsubscribe()}const co={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fu={setTimeout(e,t,...n){const{delegate:r}=fu;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=fu;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function bp(e){fu.setTimeout(()=>{const{onUnhandledError:t}=co;if(!t)throw e;t(e)})}function wp(){}const Lw=pc("C",void 0,void 0);function pc(e,t,n){return{kind:e,value:t,error:n}}let fo=null;function hu(e){if(co.useDeprecatedSynchronousErrorHandling){const t=!fo;if(t&&(fo={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=fo;if(fo=null,n)throw r}}else e()}class gc extends Lr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,yp(t)&&t.add(this)):this.destination=Gw}static create(t,n,r){return new pu(t,n,r)}next(t){this.isStopped?_c(function Bw(e){return pc("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?_c(function Nw(e){return pc("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_c(Lw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ww=Function.prototype.bind;function mc(e,t){return Ww.call(e,t)}class Vw{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){gu(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){gu(r)}else gu(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){gu(n)}}}class pu extends gc{constructor(t,n,r){let h;if(super(),vn(t)||!t)h={next:t??void 0,error:n??void 0,complete:r??void 0};else{let d;this&&co.useDeprecatedNextContext?(d=Object.create(t),d.unsubscribe=()=>this.unsubscribe(),h={next:t.next&&mc(t.next,d),error:t.error&&mc(t.error,d),complete:t.complete&&mc(t.complete,d)}):h=t}this.destination=new Vw(h)}}function gu(e){co.useDeprecatedSynchronousErrorHandling?function kw(e){co.useDeprecatedSynchronousErrorHandling&&fo&&(fo.errorThrown=!0,fo.error=e)}(e):bp(e)}function _c(e,t){const{onStoppedNotification:n}=co;n&&fu.setTimeout(()=>n(e,t))}const Gw={closed:!0,next:wp,error:function Uw(e){throw e},complete:wp},vc="function"==typeof Symbol&&Symbol.observable||"@@observable";function ho(e){return e}let Vn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,h){const d=function Hw(e){return e&&e instanceof gc||function jw(e){return e&&vn(e.next)&&vn(e.error)&&vn(e.complete)}(e)&&yp(e)}(n)?n:new pu(n,r,h);return hu(()=>{const{operator:s,source:i}=this;d.add(s?s.call(d,i):i?this._subscribe(d):this._trySubscribe(d))}),d}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Tp(r))((h,d)=>{const s=new pu({next:i=>{try{n(i)}catch(u){d(u),s.unsubscribe()}},error:d,complete:h});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[vc](){return this}pipe(...n){return function Cp(e){return 0===e.length?ho:1===e.length?e[0]:function(n){return e.reduce((r,h)=>h(r),n)}}(n)(this)}toPromise(n){return new(n=Tp(n))((r,h)=>{let d;this.subscribe(s=>d=s,s=>h(s),()=>r(d))})}}return e.create=t=>new e(t),e})();function Tp(e){var t;return null!==(t=e??co.Promise)&&void 0!==t?t:Promise}const zw=Us(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ai=(()=>{class e extends Vn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ep(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zw}next(n){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:h,observers:d}=this;return r||h?vp:(this.currentObservers=null,d.push(n),new Lr(()=>{this.currentObservers=null,Gs(d,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:h,isStopped:d}=this;r?n.error(h):d&&n.complete()}asObservable(){const n=new Vn;return n.source=this,n}}return e.create=(t,n)=>new Ep(t,n),e})();class Ep extends ai{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:vp}}function Sp(e){return vn(e?.lift)}function Jn(e){return t=>{if(Sp(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xn(e,t,n,r,h){return new Qw(e,t,n,r,h)}class Qw extends gc{constructor(t,n,r,h,d,s){super(t),this.onFinalize=d,this.shouldUnsubscribe=s,this._next=n?function(i){try{n(i)}catch(u){t.error(u)}}:super._next,this._error=h?function(i){try{h(i)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(i){t.error(i)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function bn(e,t){return Jn((n,r)=>{let h=0;n.subscribe(Xn(r,d=>{r.next(e.call(t,d,h++))}))})}function po(e){return this instanceof po?(this.v=e,this):new po(e)}function Jw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,r=n.apply(e,t||[]),d=[];return h={},s("next"),s("throw"),s("return"),h[Symbol.asyncIterator]=function(){return this},h;function s(c){r[c]&&(h[c]=function(l){return new Promise(function(m,I){d.push([c,l,m,I])>1||i(c,l)})})}function i(c,l){try{!function u(c){c.value instanceof po?Promise.resolve(c.value.v).then(f,a):o(d[0][2],c)}(r[c](l))}catch(m){o(d[0][3],m)}}function f(c){i("next",c)}function a(c){i("throw",c)}function o(c,l){c(l),d.shift(),d.length&&i(d[0][0],d[0][1])}}function Xw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Mp(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(d){n[d]=e[d]&&function(s){return new Promise(function(i,u){!function h(d,s,i,u){Promise.resolve(u).then(function(f){d({value:f,done:i})},s)}(i,u,(s=e[d](s)).done,s.value)})}}}const Pp=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Rp(e){return vn(e?.then)}function xp(e){return vn(e[vc])}function Op(e){return Symbol.asyncIterator&&vn(e?.[Symbol.asyncIterator])}function Fp(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lp=function $w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Np(e){return vn(e?.[Lp])}function Bp(e){return Jw(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:h}=yield po(n.read());if(h)return yield po(void 0);yield yield po(r)}}finally{n.releaseLock()}})}function kp(e){return vn(e?.getReader)}function wi(e){if(e instanceof Vn)return e;if(null!=e){if(xp(e))return function qw(e){return new Vn(t=>{const n=e[vc]();if(vn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Pp(e))return function eC(e){return new Vn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Rp(e))return function tC(e){return new Vn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,bp)})}(e);if(Op(e))return Wp(e);if(Np(e))return function nC(e){return new Vn(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(kp(e))return function rC(e){return Wp(Bp(e))}(e)}throw Fp(e)}function Wp(e){return new Vn(t=>{(function iC(e,t){var n,r,h,d;return function Yw(e,t,n,r){return new(n||(n=Promise))(function(d,s){function i(a){try{f(r.next(a))}catch(o){s(o)}}function u(a){try{f(r.throw(a))}catch(o){s(o)}}function f(a){a.done?d(a.value):function h(d){return d instanceof n?d:new n(function(s){s(d)})}(a.value).then(i,u)}f((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Xw(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){h={error:s}}finally{try{r&&!r.done&&(d=n.return)&&(yield d.call(n))}finally{if(h)throw h.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ci(e,t,n,r=0,h=!1){const d=t.schedule(function(){n(),h?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(d),!h)return d}function Zn(e,t,n=1/0){return vn(t)?Zn((r,h)=>bn((d,s)=>t(r,d,h,s))(wi(e(r,h))),n):("number"==typeof t&&(n=t),Jn((r,h)=>function oC(e,t,n,r,h,d,s,i){const u=[];let f=0,a=0,o=!1;const c=()=>{o&&!u.length&&!f&&t.complete()},l=I=>f<r?m(I):u.push(I),m=I=>{d&&t.next(I),f++;let p=!1;wi(n(I,a++)).subscribe(Xn(t,g=>{h?.(g),d?l(g):t.next(g)},()=>{p=!0},void 0,()=>{if(p)try{for(f--;u.length&&f<r;){const g=u.shift();s?Ci(t,s,()=>m(g)):m(g)}c()}catch(g){t.error(g)}}))};return e.subscribe(Xn(t,l,()=>{o=!0,c()})),()=>{i?.()}}(r,h,e,n)))}function Wo(e=1/0){return Zn(ho,e)}const Ti=new Vn(e=>e.complete());function Ic(e){return e[e.length-1]}function js(e){return function aC(e){return e&&vn(e.schedule)}(Ic(e))?e.pop():void 0}function Vp(e,t=0){return Jn((n,r)=>{n.subscribe(Xn(r,h=>Ci(r,e,()=>r.next(h),t),()=>Ci(r,e,()=>r.complete(),t),h=>Ci(r,e,()=>r.error(h),t)))})}function Up(e,t=0){return Jn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Gp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Vn(n=>{Ci(n,t,()=>{const r=e[Symbol.asyncIterator]();Ci(n,t,()=>{r.next().then(h=>{h.done?n.complete():n.next(h.value)})},0,!0)})})}function zn(e,t){return t?function gC(e,t){if(null!=e){if(xp(e))return function cC(e,t){return wi(e).pipe(Up(t),Vp(t))}(e,t);if(Pp(e))return function fC(e,t){return new Vn(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Rp(e))return function dC(e,t){return wi(e).pipe(Up(t),Vp(t))}(e,t);if(Op(e))return Gp(e,t);if(Np(e))return function hC(e,t){return new Vn(n=>{let r;return Ci(n,t,()=>{r=e[Lp](),Ci(n,t,()=>{let h,d;try{({value:h,done:d}=r.next())}catch(s){return void n.error(s)}d?n.complete():n.next(h)},0,!0)}),()=>vn(r?.return)&&r.return()})}(e,t);if(kp(e))return function pC(e,t){return Gp(Bp(e),t)}(e,t)}throw Fp(e)}(e,t):wi(e)}function Hs(e){return e<=0?()=>Ti:Jn((t,n)=>{let r=0;t.subscribe(Xn(n,h=>{++r<=e&&(n.next(h),e<=r&&n.complete())}))})}function bc(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(Hs(1)).subscribe(()=>e())}function hn(e){for(let t in e)if(e[t]===hn)return t;throw Error("Could not find renamed property on target object.")}function pn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(pn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Cc(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const vC=hn({__forward_ref__:hn});function Tc(e){return e.__forward_ref__=Tc,e.toString=function(){return pn(this())},e}function Vt(e){return function Ec(e){return"function"==typeof e&&e.hasOwnProperty(vC)&&e.__forward_ref__===Tc}(e)?e():e}class en extends Error{constructor(t,n){super(function mu(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function un(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function Ht(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function _u(e,t){throw new en(-201,!1)}function Tr(e,t){null==e&&function cn(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function tn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Hi(e){return{providers:e.providers||[],imports:e.imports||[]}}function Sc(e){return jp(e,vu)||jp(e,zp)}function jp(e,t){return e.hasOwnProperty(t)?e[t]:null}function Hp(e){return e&&(e.hasOwnProperty(Ac)||e.hasOwnProperty(SC))?e[Ac]:null}const vu=hn({\u0275prov:hn}),Ac=hn({\u0275inj:hn}),zp=hn({ngInjectableDef:hn}),SC=hn({ngInjectorDef:hn});var kt=(()=>((kt=kt||{})[kt.Default=0]="Default",kt[kt.Host=1]="Host",kt[kt.Self=2]="Self",kt[kt.SkipSelf=4]="SkipSelf",kt[kt.Optional=8]="Optional",kt))();let Dc;function ui(e){const t=Dc;return Dc=e,t}function Qp(e,t,n){const r=Sc(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&kt.Optional?null:void 0!==t?t:void _u(pn(e))}function zi(e){return{toString:e}.toString()}var zr=(()=>((zr=zr||{})[zr.OnPush=0]="OnPush",zr[zr.Default=1]="Default",zr))(),li=(()=>{return(e=li||(li={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",li;var e})();const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vo={},ln=[],yu=hn({\u0275cmp:hn}),Mc=hn({\u0275dir:hn}),Pc=hn({\u0275pipe:hn}),Yp=hn({\u0275mod:hn}),Si=hn({\u0275fac:hn}),zs=hn({__NG_ELEMENT_ID__:hn});let DC=0;function Qs(e){return zi(()=>{const n=!0===e.standalone,r={},h={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===zr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||ln,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||li.Emulated,id:"c"+DC++,styles:e.styles||ln,_:null,setInput:null,schemas:e.schemas||null,tView:null},d=e.dependencies,s=e.features;return h.inputs=Xp(e.inputs,r),h.outputs=Xp(e.outputs),s&&s.forEach(i=>i(h)),h.directiveDefs=d?()=>("function"==typeof d?d():d).map(Kp).filter(Jp):null,h.pipeDefs=d?()=>("function"==typeof d?d():d).map(lr).filter(Jp):null,h})}function Kp(e){return gn(e)||ur(e)}function Jp(e){return null!==e}const PC={};function go(e){return zi(()=>{const t={type:e.type,bootstrap:e.bootstrap||ln,declarations:e.declarations||ln,imports:e.imports||ln,exports:e.exports||ln,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(PC[e.id]=e.type),t})}function Xp(e,t){if(null==e)return Vo;const n={};for(const r in e)if(e.hasOwnProperty(r)){let h=e[r],d=h;Array.isArray(h)&&(d=h[1],h=h[0]),n[h]=r,t&&(t[h]=d)}return n}const nr=Qs;function gn(e){return e[yu]||null}function ur(e){return e[Mc]||null}function lr(e){return e[Pc]||null}function Er(e,t){const n=e[Yp]||null;if(!n&&!0===t)throw new Error(`Type ${pn(e)} does not have '\u0275mod' property.`);return n}function yr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Yr(e){return Array.isArray(e)&&!0===e[1]}function Oc(e){return 0!=(8&e.flags)}function Cu(e){return 2==(2&e.flags)}function Tu(e){return 1==(1&e.flags)}function Kr(e){return null!==e.template}function LC(e){return 0!=(256&e[2])}function Io(e,t){return e.hasOwnProperty(Si)?e[Si]:null}class kC{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function qp(e){return e.type.prototype.ngOnChanges&&(e.setInput=VC),WC}function WC(){const e=tg(this),t=e?.current;if(t){const n=e.previous;if(n===Vo)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function VC(e,t,n,r){const h=tg(e)||function UC(e,t){return e[eg]=t}(e,{previous:Vo,current:null}),d=h.current||(h.current={}),s=h.previous,i=this.declaredInputs[n],u=s[i];d[i]=new kC(u&&u.currentValue,t,s===Vo),e[r]=t}const eg="__ngSimpleChanges__";function tg(e){return e[eg]||null}let kc;function Mn(e){return!!e.listen}const ng={createRenderer:(e,t)=>function Wc(){return void 0!==kc?kc:typeof document<"u"?document:void 0}()};function Fn(e){for(;Array.isArray(e);)e=e[0];return e}function kr(e,t){return Fn(t[e.index])}function Ar(e,t){const n=t[e];return yr(n)?n:n[0]}function Uc(e){return 64==(64&e[2])}function Qi(e,t){return null==t?null:e[t]}function ig(e){e[18]=0}function Gc(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Gt={lFrame:hg(null),bindingsEnabled:!0};function sg(){return Gt.bindingsEnabled}function vt(){return Gt.lFrame.lView}function an(){return Gt.lFrame.tView}function Un(){let e=ag();for(;null!==e&&64===e.type;)e=e.parent;return e}function ag(){return Gt.lFrame.currentTNode}function ci(e,t){const n=Gt.lFrame;n.currentTNode=e,n.isParent=t}function jc(){return Gt.lFrame.isParent}function sT(e,t){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=e,zc(t)}function zc(e){Gt.lFrame.currentDirectiveIndex=e}function Yc(e){Gt.lFrame.currentQueryIndex=e}function uT(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function dg(e,t,n){if(n&kt.SkipSelf){let h=t,d=e;for(;!(h=h.parent,null!==h||n&kt.Host||(h=uT(d),null===h||(d=d[15],10&h.type))););if(null===h)return!1;t=h,e=d}const r=Gt.lFrame=fg();return r.currentTNode=t,r.lView=e,!0}function Au(e){const t=fg(),n=e[1];Gt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function fg(){const e=Gt.lFrame,t=null===e?null:e.child;return null===t?hg(e):t}function hg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function pg(){const e=Gt.lFrame;return Gt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const gg=pg;function Du(){const e=pg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Yi(e){Gt.lFrame.selectedIndex=e}function Mu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const d=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:i,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:a}=d;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),f&&((e.viewHooks||(e.viewHooks=[])).push(n,f),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,f)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Pu(e,t,n){mg(e,t,3,n)}function Ru(e,t,n,r){(3&e[2])===n&&mg(e,t,n,r)}function Kc(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function mg(e,t,n,r){const d=r??-1,s=t.length-1;let i=0;for(let u=void 0!==r?65535&e[18]:0;u<s;u++)if("number"==typeof t[u+1]){if(i=t[u],null!=r&&i>=r)break}else t[u]<0&&(e[18]+=65536),(i<d||-1==d)&&(_T(e,n,t,u),e[18]=(4294901760&e[18])+u+2),u++}function _T(e,t,n,r){const h=n[r]<0,d=n[r+1],i=e[h?-n[r]:n[r]];if(h){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{d.call(i)}finally{}}}else try{d.call(i)}finally{}}class Zs{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function xu(e,t,n){const r=Mn(e);let h=0;for(;h<n.length;){const d=n[h];if("number"==typeof d){if(0!==d)break;h++;const s=n[h++],i=n[h++],u=n[h++];r?e.setAttribute(t,i,u,s):t.setAttributeNS(s,i,u)}else{const s=d,i=n[++h];Xc(s)?r&&e.setProperty(t,s,i):r?e.setAttribute(t,s,i):t.setAttribute(s,i),h++}}return h}function _g(e){return 3===e||4===e||6===e}function Xc(e){return 64===e.charCodeAt(0)}function Ou(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const h=t[r];"number"==typeof h?n=h:0===n||vg(e,n,h,null,-1===n||2===n?t[++r]:null)}}return e}function vg(e,t,n,r,h){let d=0,s=e.length;if(-1===t)s=-1;else for(;d<e.length;){const i=e[d++];if("number"==typeof i){if(i===t){s=-1;break}if(i>t){s=d-1;break}}}for(;d<e.length;){const i=e[d];if("number"==typeof i)break;if(i===n){if(null===r)return void(null!==h&&(e[d+1]=h));if(r===e[d+1])return void(e[d+2]=h)}d++,null!==r&&d++,null!==h&&d++}-1!==s&&(e.splice(s,0,t),d=s+1),e.splice(d++,0,n),null!==r&&e.splice(d++,0,r),null!==h&&e.splice(d++,0,h)}function yg(e){return-1!==e}function Yo(e){return 32767&e}function Ko(e,t){let n=function wT(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Zc=!0;function Fu(e){const t=Zc;return Zc=e,t}let CT=0;const di={};function qs(e,t){const n=qc(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,$c(r.data,e),$c(t,null),$c(r.blueprint,null));const h=Lu(e,t),d=e.injectorIndex;if(yg(h)){const s=Yo(h),i=Ko(h,t),u=i[1].data;for(let f=0;f<8;f++)t[d+f]=i[s+f]|u[s+f]}return t[d+8]=h,d}function $c(e,t){e.push(0,0,0,0,0,0,0,0,t)}function qc(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Lu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,h=t;for(;null!==h;){if(r=Dg(h),null===r)return-1;if(n++,h=h[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Nu(e,t,n){!function TT(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(zs)&&(r=n[zs]),null==r&&(r=n[zs]=CT++);const h=255&r;t.data[e+(h>>5)]|=1<<h}(e,t,n)}function wg(e,t,n){if(n&kt.Optional)return e;_u()}function Cg(e,t,n,r){if(n&kt.Optional&&void 0===r&&(r=null),0==(n&(kt.Self|kt.Host))){const h=e[9],d=ui(void 0);try{return h?h.get(t,r,n&kt.Optional):Qp(t,r,n&kt.Optional)}finally{ui(d)}}return wg(r,0,n)}function Tg(e,t,n,r=kt.Default,h){if(null!==e){if(1024&t[2]){const s=function PT(e,t,n,r,h){let d=e,s=t;for(;null!==d&&null!==s&&1024&s[2]&&!(256&s[2]);){const i=Eg(d,s,n,r|kt.Self,di);if(i!==di)return i;let u=d.parent;if(!u){const f=s[21];if(f){const a=f.get(n,di,r);if(a!==di)return a}u=Dg(s),s=s[15]}d=u}return h}(e,t,n,r,di);if(s!==di)return s}const d=Eg(e,t,n,r,di);if(d!==di)return d}return Cg(t,n,r,h)}function Eg(e,t,n,r,h){const d=function AT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(zs)?e[zs]:void 0;return"number"==typeof t?t>=0?255&t:DT:t}(n);if("function"==typeof d){if(!dg(t,e,r))return r&kt.Host?wg(h,0,r):Cg(t,n,r,h);try{const s=d(r);if(null!=s||r&kt.Optional)return s;_u()}finally{gg()}}else if("number"==typeof d){let s=null,i=qc(e,t),u=-1,f=r&kt.Host?t[16][6]:null;for((-1===i||r&kt.SkipSelf)&&(u=-1===i?Lu(e,t):t[i+8],-1!==u&&Ag(r,!1)?(s=t[1],i=Yo(u),t=Ko(u,t)):i=-1);-1!==i;){const a=t[1];if(Sg(d,i,a.data)){const o=ST(i,t,n,s,r,f);if(o!==di)return o}u=t[i+8],-1!==u&&Ag(r,t[1].data[i+8]===f)&&Sg(d,i,t)?(s=a,i=Yo(u),t=Ko(u,t)):i=-1}}return h}function ST(e,t,n,r,h,d){const s=t[1],i=s.data[e+8],a=function Bu(e,t,n,r,h){const d=e.providerIndexes,s=t.data,i=1048575&d,u=e.directiveStart,a=d>>20,c=h?i+a:e.directiveEnd;for(let l=r?i:i+a;l<c;l++){const m=s[l];if(l<u&&n===m||l>=u&&m.type===n)return l}if(h){const l=s[u];if(l&&Kr(l)&&l.type===n)return u}return null}(i,s,n,null==r?Cu(i)&&Zc:r!=s&&0!=(3&i.type),h&kt.Host&&d===i);return null!==a?ea(t,s,a,i):di}function ea(e,t,n,r){let h=e[n];const d=t.data;if(function vT(e){return e instanceof Zs}(h)){const s=h;s.resolving&&function yC(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new en(-200,`Circular dependency in DI detected for ${e}${n}`)}(un(d[n]));const i=Fu(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?ui(s.injectImpl):null;dg(e,r,kt.Default);try{h=e[n]=s.factory(void 0,d,e,r),t.firstCreatePass&&n>=r.directiveStart&&function mT(e,t,n){const{ngOnChanges:r,ngOnInit:h,ngDoCheck:d}=t.type.prototype;if(r){const s=qp(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}h&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,h),d&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,d),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,d))}(n,d[n],t)}finally{null!==u&&ui(u),Fu(i),s.resolving=!1,gg()}}return h}function Sg(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Ag(e,t){return!(e&kt.Self||e&kt.Host&&t)}class Jo{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Tg(this._tNode,this._lView,t,r,n)}}function DT(){return new Jo(Un(),vt())}function Dg(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const Zo="__parameters__";function qo(e,t,n){return zi(()=>{const r=function td(e){return function(...n){if(e){const r=e(...n);for(const h in r)this[h]=r[h]}}}(t);function h(...d){if(this instanceof h)return r.apply(this,d),this;const s=new h(...d);return i.annotation=s,i;function i(u,f,a){const o=u.hasOwnProperty(Zo)?u[Zo]:Object.defineProperty(u,Zo,{value:[]})[Zo];for(;o.length<=a;)o.push(null);return(o[a]=o[a]||[]).push(s),u}}return n&&(h.prototype=Object.create(n.prototype)),h.prototype.ngMetadataName=e,h.annotationCls=h,h})}class $t{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=tn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xT=new $t("AnalyzeForEntryComponents");function Mi(e,t){e.forEach(n=>Array.isArray(n)?Mi(n,t):t(n))}function Pg(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ku(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const oa={},od="__NG_DI_FLAG__",Vu="ngTempTokenPath",jT=/\n/gm,Fg="__source";let sa;function Uu(e){const t=sa;return sa=e,t}function zT(e,t=kt.Default){if(void 0===sa)throw new en(-203,"");return null===sa?Qp(e,void 0,t):sa.get(e,t&kt.Optional?null:void 0,t)}function Ot(e,t=kt.Default){return(function AC(){return Dc}()||zT)(Vt(e),t)}function sd(e){const t=[];for(let n=0;n<e.length;n++){const r=Vt(e[n]);if(Array.isArray(r)){if(0===r.length)throw new en(900,"");let h,d=kt.Default;for(let s=0;s<r.length;s++){const i=r[s],u=YT(i);"number"==typeof u?-1===u?h=i.token:d|=u:h=i}t.push(Ot(h,d))}else t.push(Ot(r))}return t}function aa(e,t){return e[od]=t,e.prototype[od]=t,e}function YT(e){return e[od]}const Gu=aa(qo("Inject",e=>({token:e})),-1),Pi=aa(qo("Optional"),8),ua=aa(qo("SkipSelf"),4);function gd(e){return e.ngOriginalError}class rs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&gd(t);for(;n&&gd(n);)n=gd(n);return n||null}}const md=new Map;let V0=0;const vd="__ngContext__";function or(e,t){yr(t)?(e[vd]=t[20],function G0(e){md.set(e[20],e)}(t)):e[vd]=t}function pa(e){const t=e[vd];return"number"==typeof t?function nm(e){return md.get(e)||null}(t):t||null}function yd(e){const t=pa(e);return t?yr(t)?t:t.lView:null}const Z0=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(dn))();function Ri(e){return e instanceof Function?e():e}var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();function bd(e,t){return undefined(e,t)}function ga(e){const t=e[3];return Yr(t)?t[3]:t}function wd(e){return dm(e[13])}function Cd(e){return dm(e[4])}function dm(e){for(;null!==e&&!Yr(e);)e=e[4];return e}function os(e,t,n,r,h){if(null!=r){let d,s=!1;Yr(r)?d=r:yr(r)&&(s=!0,r=r[0]);const i=Fn(r);0===e&&null!==n?null==h?_m(t,n,i):wo(t,n,i,h||null,!0):1===e&&null!==n?wo(t,n,i,h||null,!0):2===e?function Em(e,t,n){const r=Ju(e,t);r&&function fE(e,t,n,r){Mn(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,i,s):3===e&&t.destroyNode(i),null!=d&&function gE(e,t,n,r,h){const d=n[7];d!==Fn(n)&&os(t,e,r,d,h);for(let i=10;i<n.length;i++){const u=n[i];ma(u[1],u,e,t,r,d)}}(t,e,d,n,h)}}function Ed(e,t,n){if(Mn(e))return e.createElement(t,n);{const r=null!==n?function zC(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function hm(e,t){const n=e[9],r=n.indexOf(t),h=t[3];512&t[2]&&(t[2]&=-513,Gc(h,-1)),n.splice(r,1)}function Sd(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const h=r[17];null!==h&&h!==e&&hm(h,r),t>0&&(e[n-1][4]=r[4]);const d=ku(e,10+t);!function iE(e,t){ma(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=d[19];null!==s&&s.detachView(d[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function pm(e,t){if(!(128&t[2])){const n=t[11];Mn(n)&&n.destroyNode&&ma(e,t,n,3,null,null),function aE(e){let t=e[13];if(!t)return Ad(e[1],e);for(;t;){let n=null;if(yr(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)yr(t)&&Ad(t[1],t),t=t[3];null===t&&(t=e),yr(t)&&Ad(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ad(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function dE(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const h=t[n[r]];if(!(h instanceof Zs)){const d=n[r+1];if(Array.isArray(d))for(let s=0;s<d.length;s+=2){const i=h[d[s]],u=d[s+1];try{u.call(i)}finally{}}else try{d.call(h)}finally{}}}}(e,t),function cE(e,t){const n=e.cleanup,r=t[7];let h=-1;if(null!==n)for(let d=0;d<n.length-1;d+=2)if("string"==typeof n[d]){const s=n[d+1],i="function"==typeof s?s(t):Fn(t[s]),u=r[h=n[d+2]],f=n[d+3];"boolean"==typeof f?i.removeEventListener(n[d],u,f):f>=0?r[h=f]():r[h=-f].unsubscribe(),d+=2}else{const s=r[h=n[d+1]];n[d].call(s)}if(null!==r){for(let d=h+1;d<r.length;d++)r[d]();t[7]=null}}(e,t),1===t[1].type&&Mn(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Yr(t[3])){n!==t[3]&&hm(n,t);const r=t[19];null!==r&&r.detachView(e)}!function j0(e){md.delete(e[20])}(t)}}function gm(e,t,n){return function mm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const h=e.data[r.directiveStart].encapsulation;if(h===li.None||h===li.Emulated)return null}return kr(r,n)}(e,t.parent,n)}function wo(e,t,n,r,h){Mn(e)?e.insertBefore(t,n,r,h):(ym(t)?t.content:t).insertBefore(n,r,h)}function _m(e,t,n){Mn(e)?e.appendChild(t,n):(ym(t)?t.content:t).appendChild(n)}function vm(e,t,n,r,h){null!==r?wo(e,t,n,r,h):_m(e,t,n)}function ym(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function Ju(e,t){return Mn(e)?e.parentNode(t):t.parentNode}let wm=function bm(e,t,n){return 40&e.type?kr(e,n):null};function Xu(e,t,n,r){const h=gm(e,r,t),d=t[11],i=function Im(e,t,n){return wm(e,t,n)}(r.parent||t[6],r,t);if(null!=h)if(Array.isArray(n))for(let u=0;u<n.length;u++)vm(d,h,n[u],i,!1);else vm(d,h,n,i,!1)}function Zu(e,t){if(null!==t){const n=t.type;if(3&n)return kr(t,e);if(4&n)return Md(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Zu(e,r);{const h=e[t.index];return Yr(h)?Md(-1,h):Fn(h)}}if(32&n)return bd(t,e)()||Fn(e[t.index]);{const r=Tm(e,t);return null!==r?Array.isArray(r)?r[0]:Zu(ga(e[16]),r):Zu(e,t.next)}}return null}function Tm(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Md(e,t){const n=10+e+1;if(n<t.length){const r=t[n],h=r[1].firstChild;if(null!==h)return Zu(r,h)}return t[7]}function Pd(e,t,n,r,h,d,s){for(;null!=n;){const i=r[n.index],u=n.type;if(s&&0===t&&(i&&or(Fn(i),r),n.flags|=4),64!=(64&n.flags))if(8&u)Pd(e,t,n.child,r,h,d,!1),os(t,e,h,i,d);else if(32&u){const f=bd(n,r);let a;for(;a=f();)os(t,e,h,a,d);os(t,e,h,i,d)}else 16&u?Sm(e,t,r,n,h,d):os(t,e,h,i,d);n=s?n.projectionNext:n.next}}function ma(e,t,n,r,h,d){Pd(n,r,e.firstChild,t,h,d,!1)}function Sm(e,t,n,r,h,d){const s=n[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++)os(t,e,h,u[f],d);else Pd(e,t,u,s[3],h,d,!0)}function Am(e,t,n){Mn(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Rd(e,t,n){Mn(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Dm(e,t,n){let r=e.length;for(;;){const h=e.indexOf(t,n);if(-1===h)return h;if(0===h||e.charCodeAt(h-1)<=32){const d=t.length;if(h+d===r||e.charCodeAt(h+d)<=32)return h}n=h+1}}const Mm="ng-template";function _E(e,t,n){let r=0;for(;r<e.length;){let h=e[r++];if(n&&"class"===h){if(h=e[r],-1!==Dm(h.toLowerCase(),t,0))return!0}else if(1===h){for(;r<e.length&&"string"==typeof(h=e[r++]);)if(h.toLowerCase()===t)return!0;return!1}}return!1}function Pm(e){return 4===e.type&&e.value!==Mm}function vE(e,t,n){return t===(4!==e.type||n?e.value:Mm)}function yE(e,t,n){let r=4;const h=e.attrs||[],d=function wE(e){for(let t=0;t<e.length;t++)if(_g(e[t]))return t;return e.length}(h);let s=!1;for(let i=0;i<t.length;i++){const u=t[i];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!vE(e,u,n)||""===u&&1===t.length){if(Jr(r))return!1;s=!0}}else{const f=8&r?u:t[++i];if(8&r&&null!==e.attrs){if(!_E(e.attrs,f,n)){if(Jr(r))return!1;s=!0}continue}const o=IE(8&r?"class":u,h,Pm(e),n);if(-1===o){if(Jr(r))return!1;s=!0;continue}if(""!==f){let c;c=o>d?"":h[o+1].toLowerCase();const l=8&r?c:null;if(l&&-1!==Dm(l,f,0)||2&r&&f!==c){if(Jr(r))return!1;s=!0}}}}else{if(!s&&!Jr(r)&&!Jr(u))return!1;if(s&&Jr(u))continue;s=!1,r=u|1&r}}return Jr(r)||s}function Jr(e){return 0==(1&e)}function IE(e,t,n,r){if(null===t)return-1;let h=0;if(r||!n){let d=!1;for(;h<t.length;){const s=t[h];if(s===e)return h;if(3===s||6===s)d=!0;else{if(1===s||2===s){let i=t[++h];for(;"string"==typeof i;)i=t[++h];continue}if(4===s)break;if(0===s){h+=4;continue}}h+=d?1:2}return-1}return function CE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Rm(e,t,n=!1){for(let r=0;r<t.length;r++)if(yE(e,t[r],n))return!0;return!1}function xm(e,t){return e?":not("+t.trim()+")":t}function EE(e){let t=e[0],n=1,r=2,h="",d=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const i=e[++n];h+="["+s+(i.length>0?'="'+i+'"':"")+"]"}else 8&r?h+="."+s:4&r&&(h+=" "+s);else""!==h&&!Jr(s)&&(t+=xm(d,h),h=""),r=s,d=d||!Jr(r);n++}return""!==h&&(t+=xm(d,h)),t}const zt={};const Bm=new $t("ENVIRONMENT_INITIALIZER"),km=new $t("INJECTOR_DEF_TYPES");function FE(...e){return{\u0275providers:Wm(0,e)}}function Wm(e,...t){const n=[],r=new Set;let h;return Mi(t,d=>{const s=d;xd(s,n,[],r)&&(h||(h=[]),h.push(s))}),void 0!==h&&Vm(h,n),n}function Vm(e,t){for(let n=0;n<e.length;n++){const{providers:h}=e[n];Mi(h,d=>{t.push(d)})}}function xd(e,t,n,r){if(!(e=Vt(e)))return!1;let h=null,d=Hp(e);const s=!d&&gn(e);if(d||s){if(s&&!s.standalone)return!1;h=e}else{const u=e.ngModule;if(d=Hp(u),!d)return!1;h=u}const i=r.has(h);if(s){if(i)return!1;if(r.add(h),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const f of u)xd(f,t,n,r)}}else{if(!d)return!1;{if(null!=d.imports&&!i){let f;r.add(h);try{Mi(d.imports,a=>{xd(a,t,n,r)&&(f||(f=[]),f.push(a))})}finally{}void 0!==f&&Vm(f,t)}if(!i){const f=Io(h)||(()=>new h);t.push({provide:h,useFactory:f,deps:ln},{provide:km,useValue:h,multi:!0},{provide:Bm,useValue:()=>Ot(h),multi:!0})}const u=d.providers;null==u||i||Mi(u,a=>{t.push(a)})}}return h!==e&&void 0!==e.providers}const LE=hn({provide:String,useValue:hn});function Od(e){return null!==e&&"object"==typeof e&&LE in e}function Co(e){return"function"==typeof e}const Fd=new $t("INJECTOR",-1);class jm{get(t,n=oa){if(n===oa){const r=new Error(`NullInjectorError: No provider for ${pn(t)}!`);throw r.name="NullInjectorError",r}return n}}const Ld=new $t("Set Injector scope."),$u={},BE={};let Nd;function Bd(){return void 0===Nd&&(Nd=new jm),Nd}class To{}class Hm extends To{constructor(t,n,r,h){super(),this.parent=n,this.source=r,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wd(t,s=>this.processProvider(s)),this.records.set(Fd,ss(void 0,this)),h.has("environment")&&this.records.set(To,ss(void 0,this));const d=this.records.get(Ld);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(km.multi,ln,kt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}get(t,n=oa,r=kt.Default){this.assertNotDestroyed();const h=Uu(this),d=ui(void 0);try{if(!(r&kt.SkipSelf)){let i=this.records.get(t);if(void 0===i){const u=function GE(e){return"function"==typeof e||"object"==typeof e&&e instanceof $t}(t)&&Sc(t);i=u&&this.injectableDefInScope(u)?ss(kd(t),$u):null,this.records.set(t,i)}if(null!=i)return this.hydrate(t,i)}return(r&kt.Self?Bd():this.parent).get(t,n=r&kt.Optional&&n===oa?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Vu]=s[Vu]||[]).unshift(pn(t)),h)throw s;return function KT(e,t,n,r){const h=e[Vu];throw t[Fg]&&h.unshift(t[Fg]),e.message=function JT(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let h=pn(t);if(Array.isArray(t))h=t.map(pn).join(" -> ");else if("object"==typeof t){let d=[];for(let s in t)if(t.hasOwnProperty(s)){let i=t[s];d.push(s+":"+("string"==typeof i?JSON.stringify(i):pn(i)))}h=`{${d.join(", ")}}`}return`${n}${r?"("+r+")":""}[${h}]: ${e.replace(jT,"\n  ")}`}("\n"+e.message,h,n,r),e.ngTokenPath=h,e[Vu]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{ui(d),Uu(h)}}resolveInjectorInitializers(){const t=Uu(this),n=ui(void 0);try{const r=this.get(Bm.multi,ln,kt.Self);for(const h of r)h()}finally{Uu(t),ui(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(pn(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new en(205,!1)}processProvider(t){let n=Co(t=Vt(t))?t:Vt(t&&t.provide);const r=function WE(e){return Od(e)?ss(void 0,e.useValue):ss(function zm(e,t,n){let r;if(Co(e)){const h=Vt(e);return Io(h)||kd(h)}if(Od(e))r=()=>Vt(e.useValue);else if(function Gm(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...sd(e.deps||[]));else if(function Um(e){return!(!e||!e.useExisting)}(e))r=()=>Ot(Vt(e.useExisting));else{const h=Vt(e&&(e.useClass||e.provide));if(!function VE(e){return!!e.deps}(e))return Io(h)||kd(h);r=()=>new h(...sd(e.deps))}return r}(e),$u)}(t);if(Co(t)||!0!==t.multi)this.records.get(n);else{let h=this.records.get(n);h||(h=ss(void 0,$u,!0),h.factory=()=>sd(h.multi),this.records.set(n,h)),n=t,h.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===$u&&(n.value=BE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function UE(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Vt(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function kd(e){const t=Sc(e),n=null!==t?t.factory:Io(e);if(null!==n)return n;if(e instanceof $t)throw new en(204,!1);if(e instanceof Function)return function kE(e){const t=e.length;if(t>0)throw function ia(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new en(204,!1);const n=function TC(e){const t=e&&(e[vu]||e[zp]);if(t){const n=function EC(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new en(204,!1)}function ss(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function jE(e){return!!e.\u0275providers}function Wd(e,t){for(const n of e)Array.isArray(n)?Wd(n,t):jE(n)?Wd(n.\u0275providers,t):t(n)}function Qm(e,t=null,n=null,r){const h=Ym(e,t,n,r);return h.resolveInjectorInitializers(),h}function Ym(e,t=null,n=null,r,h=new Set){const d=[n||ln,FE(e)];return r=r||("object"==typeof e?void 0:pn(e)),new Hm(d,t||Bd(),r||null,h)}let Rr=(()=>{class e{static create(n,r){if(Array.isArray(n))return Qm({name:""},r,n,"");{const h=n.name??"";return Qm({name:h},n.parent,n.providers,h)}}}return e.THROW_IF_NOT_FOUND=oa,e.NULL=new jm,e.\u0275prov=tn({token:e,providedIn:"any",factory:()=>Ot(Fd)}),e.__NG_ELEMENT_ID__=-1,e})();function Ft(e,t=kt.Default){const n=vt();return null===n?Ot(e,t):Tg(Un(),n,Vt(e),t)}function Hd(){throw new Error("invalid")}function h_(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const h=n[r],d=n[r+1];if(-1!==d){const s=e.data[d];Yc(h),s.contentQueries(2,t[d],d)}}}function _a(e,t,n,r,h,d,s,i,u,f,a){const o=t.blueprint.slice();return o[0]=h,o[2]=76|r,(null!==a||e&&1024&e[2])&&(o[2]|=1024),ig(o),o[3]=o[15]=e,o[8]=n,o[10]=s||e&&e[10],o[11]=i||e&&e[11],o[12]=u||e&&e[12]||null,o[9]=f||e&&e[9]||null,o[6]=d,o[20]=function U0(){return V0++}(),o[21]=a,o[16]=2==t.type?e[16]:o,o}function us(e,t,n,r,h){let d=e.data[t];if(null===d)d=function sf(e,t,n,r,h){const d=ag(),s=jc(),u=e.data[t]=function bS(e,t,n,r,h,d){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?d:d&&d.parent,n,t,r,h);return null===e.firstChild&&(e.firstChild=u),null!==d&&(s?null==d.child&&null!==u.parent&&(d.child=u):null===d.next&&(d.next=u)),u}(e,t,n,r,h),function oT(){return Gt.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=n,d.value=r,d.attrs=h;const s=function Xs(){const e=Gt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();d.injectorIndex=null===s?-1:s.injectorIndex}return ci(d,!0),d}function ls(e,t,n,r){if(0===n)return-1;const h=t.length;for(let d=0;d<n;d++)t.push(r),e.blueprint.push(r),e.data.push(null);return h}function va(e,t,n){Au(t);try{const r=e.viewQuery;null!==r&&gf(1,r,n);const h=e.template;null!==h&&p_(e,t,h,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&h_(e,t),e.staticViewQueries&&gf(2,e.viewQuery,n);const d=e.components;null!==d&&function vS(e,t){for(let n=0;n<t.length;n++)WS(e,t[n])}(t,d)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Du()}}function cs(e,t,n,r){const h=t[2];if(128!=(128&h)){Au(t);try{ig(t),function ug(e){return Gt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&p_(e,t,n,2,r);const s=3==(3&h);if(s){const f=e.preOrderCheckHooks;null!==f&&Pu(t,f,null)}else{const f=e.preOrderHooks;null!==f&&Ru(t,f,0,null),Kc(t,0)}if(function BS(e){for(let t=wd(e);null!==t;t=Cd(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const h=n[r],d=h[3];0==(512&h[2])&&Gc(d,1),h[2]|=512}}}(t),function NS(e){for(let t=wd(e);null!==t;t=Cd(t))for(let n=10;n<t.length;n++){const r=t[n],h=r[1];Uc(r)&&cs(h,r,h.template,r[8])}}(t),null!==e.contentQueries&&h_(e,t),s){const f=e.contentCheckHooks;null!==f&&Pu(t,f)}else{const f=e.contentHooks;null!==f&&Ru(t,f,1),Kc(t,1)}!function mS(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const h=n[r];if(h<0)Yi(~h);else{const d=h,s=n[++r],i=n[++r];sT(s,d),i(2,t[d])}}}finally{Yi(-1)}}(e,t);const i=e.components;null!==i&&function _S(e,t){for(let n=0;n<t.length;n++)kS(e,t[n])}(t,i);const u=e.viewQuery;if(null!==u&&gf(2,u,r),s){const f=e.viewCheckHooks;null!==f&&Pu(t,f)}else{const f=e.viewHooks;null!==f&&Ru(t,f,2),Kc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Gc(t[3],-1))}finally{Du()}}}function yS(e,t,n,r){const h=t[10],s=function rg(e){return 4==(4&e[2])}(t);try{!s&&h.begin&&h.begin(),s&&va(e,t,r),cs(e,t,n,r)}finally{!s&&h.end&&h.end()}}function p_(e,t,n,r,h){const d=function dr(){return Gt.lFrame.selectedIndex}(),s=2&r;try{Yi(-1),s&&t.length>22&&function Om(e,t,n,r){if(!r)if(3==(3&t[2])){const d=e.preOrderCheckHooks;null!==d&&Pu(t,d,n)}else{const d=e.preOrderHooks;null!==d&&Ru(t,d,0,n)}Yi(n)}(e,t,22,!1),n(r,h)}finally{Yi(d)}}function m_(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=rl(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function rl(e,t,n,r,h,d,s,i,u,f){const a=22+r,o=a+h,c=function IS(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:zt);return n}(a,o),l="function"==typeof f?f():f;return c[1]={type:e,blueprint:c,template:n,queries:null,viewQuery:i,declTNode:t,data:c.slice().fill(null,a),bindingStartIndex:a,expandoStartIndex:o,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:l,incompleteFirstPass:!1}}function I_(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const h=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,h):n[r]=[t,h]}return n}function b_(e,t,n,r,h,d){const s=d.hostBindings;if(s){let i=e.hostBindingOpCodes;null===i&&(i=e.hostBindingOpCodes=[]);const u=~t.index;(function AS(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(i)!=u&&i.push(u),i.push(r,h,s)}}function w_(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function C_(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function xS(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Kr(t)&&(n[""]=e)}}function T_(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function E_(e,t,n,r,h){e.data[r]=h;const d=h.factory||(h.factory=Io(h.type)),s=new Zs(d,Kr(h),Ft);e.blueprint[r]=s,n[r]=s,b_(e,t,0,r,ls(e,n,h.hostVars,zt),h)}function OS(e,t,n){const r=kr(t,e),h=m_(n),d=e[10],s=il(e,_a(e,h,null,n.onPush?32:16,r,t,d,d.createRenderer(r,n),null,null,null));e[t.index]=s}function FS(e,t,n,r,h,d){const s=d[t];if(null!==s){const i=r.setInput;for(let u=0;u<s.length;){const f=s[u++],a=s[u++],o=s[u++];null!==i?r.setInput(n,o,f,a):n[a]=o}}}function LS(e,t){let n=null,r=0;for(;r<t.length;){const h=t[r];if(0!==h)if(5!==h){if("number"==typeof h)break;e.hasOwnProperty(h)&&(null===n&&(n=[]),n.push(h,e[h],t[r+1])),r+=2}else r+=2;else r+=4}return n}function kS(e,t){const n=Ar(t,e);if(Uc(n)){const r=n[1];48&n[2]?cs(r,n,r.template,n[8]):n[5]>0&&df(n)}}function df(e){for(let r=wd(e);null!==r;r=Cd(r))for(let h=10;h<r.length;h++){const d=r[h];if(512&d[2]){const s=d[1];cs(s,d,s.template,d[8])}else d[5]>0&&df(d)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const h=Ar(n[r],e);Uc(h)&&h[5]>0&&df(h)}}function WS(e,t){const n=Ar(t,e),r=n[1];(function VS(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),va(r,n,n[8])}function il(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function ff(e){for(;e;){e[2]|=32;const t=ga(e);if(LC(e)&&!t)return e;e=t}return null}function A_(e){!function hf(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=yd(n);if(null!==r){const h=r[1];yS(h,r,h.template,n)}}}(e[8])}function gf(e,t,n){Yc(0),t(e,n)}const GS=(()=>Promise.resolve(null))();function D_(e){return e[7]||(e[7]=[])}function M_(e){return e.cleanup||(e.cleanup=[])}function R_(e,t){const n=e[9],r=n?n.get(rs,null):null;r&&r.handleError(t)}function ol(e,t,n){let r=n?e.styles:null,h=n?e.classes:null,d=0;if(null!==t)for(let s=0;s<t.length;s++){const i=t[s];"number"==typeof i?d=i:1==d?h=Cc(h,i):2==d&&(r=Cc(r,i+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=h:e.classesWithoutHost=h}function qS(){const e=Un();Mu(vt()[1],e)}function If(e,t,n,r,h){const s=h?"class":"style";!function x_(e,t,n,r,h){for(let d=0;d<n.length;){const s=n[d++],i=n[d++],u=t[s],f=e.data[s];null!==f.setInput?f.setInput(u,h,r,i):u[i]=h}}(e,n,t.inputs[s],s,r)}function ba(e,t,n,r){const h=vt(),d=an(),s=22+e,i=h[11],u=h[s]=Ed(i,t,function gT(){return Gt.lFrame.currentNamespace}()),f=d.firstCreatePass?function pA(e,t,n,r,h,d,s){const i=t.consts,f=us(t,e,2,h,Qi(i,d));return function lf(e,t,n,r){let h=!1;if(sg()){const d=function PS(e,t,n){const r=e.directiveRegistry;let h=null;if(r)for(let d=0;d<r.length;d++){const s=r[d];Rm(n,s.selectors,!1)&&(h||(h=[]),Nu(qs(n,t),e,s.type),Kr(s)?(C_(e,n),h.unshift(s)):h.push(s))}return h}(e,t,n),s=null===r?null:{"":-1};if(null!==d){h=!0,T_(n,e.data.length,d.length);for(let a=0;a<d.length;a++){const o=d[a];o.providersResolver&&o.providersResolver(o)}let i=!1,u=!1,f=ls(e,t,d.length,null);for(let a=0;a<d.length;a++){const o=d[a];n.mergedAttrs=Ou(n.mergedAttrs,o.hostAttrs),E_(e,n,t,f,o),xS(f,o,s),null!==o.contentQueries&&(n.flags|=8),(null!==o.hostBindings||null!==o.hostAttrs||0!==o.hostVars)&&(n.flags|=128);const c=o.type.prototype;!i&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),i=!0),!u&&(c.ngOnChanges||c.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),u=!0),f++}!function wS(e,t){const r=t.directiveEnd,h=e.data,d=t.attrs,s=[];let i=null,u=null;for(let f=t.directiveStart;f<r;f++){const a=h[f],o=a.inputs,c=null===d||Pm(t)?null:LS(o,d);s.push(c),i=I_(o,f,i),u=I_(a.outputs,f,u)}null!==i&&(i.hasOwnProperty("class")&&(t.flags|=16),i.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=i,t.outputs=u}(e,n)}s&&function RS(e,t,n){if(t){const r=e.localNames=[];for(let h=0;h<t.length;h+=2){const d=n[t[h+1]];if(null==d)throw new en(-301,!1);r.push(t[h],d)}}}(n,r,s)}return n.mergedAttrs=Ou(n.mergedAttrs,n.attrs),h}(t,n,f,Qi(i,s)),null!==f.attrs&&ol(f,f.attrs,!1),null!==f.mergedAttrs&&ol(f,f.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,f),f}(s,d,h,0,t,n,r):d.data[s];ci(f,!0);const a=f.mergedAttrs;null!==a&&xu(i,u,a);const o=f.classes;null!==o&&Rd(i,u,o);const c=f.styles;return null!==c&&Am(i,u,c),64!=(64&f.flags)&&Xu(d,h,u,f),0===function ZC(){return Gt.lFrame.elementDepthCount}()&&or(u,h),function $C(){Gt.lFrame.elementDepthCount++}(),Tu(f)&&(function af(e,t,n){!sg()||(function DS(e,t,n,r){const h=n.directiveStart,d=n.directiveEnd;e.firstCreatePass||qs(n,t),or(r,t);const s=n.initialInputs;for(let i=h;i<d;i++){const u=e.data[i],f=Kr(u);f&&OS(t,n,u);const a=ea(t,e,i,n);or(a,t),null!==s&&FS(0,i-h,a,u,0,s),f&&(Ar(n.index,t)[8]=a)}}(e,t,n,kr(n,t)),128==(128&n.flags)&&function MS(e,t,n){const r=n.directiveStart,h=n.directiveEnd,d=n.index,s=function aT(){return Gt.lFrame.currentDirectiveIndex}();try{Yi(d);for(let i=r;i<h;i++){const u=e.data[i],f=t[i];zc(i),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&w_(u,f)}}finally{Yi(-1),zc(s)}}(e,t,n))}(d,h,f),function g_(e,t,n){if(Oc(t)){const h=t.directiveEnd;for(let d=t.directiveStart;d<h;d++){const s=e.data[d];s.contentQueries&&s.contentQueries(1,n[d],d)}}}(d,f,h)),null!==r&&function uf(e,t,n=kr){const r=t.localNames;if(null!==r){let h=t.index+1;for(let d=0;d<r.length;d+=2){const s=r[d+1],i=-1===s?n(t,e):e[s];e[h++]=i}}}(h,f),ba}function wa(){let e=Un();jc()?function Hc(){Gt.lFrame.isParent=!1}():(e=e.parent,ci(e,!1));const t=e;!function qC(){Gt.lFrame.elementDepthCount--}();const n=an();return n.firstCreatePass&&(Mu(n,e),Oc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function IT(e){return 0!=(16&e.flags)}(t)&&If(n,t,vt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function bT(e){return 0!=(32&e.flags)}(t)&&If(n,t,vt(),t.stylesWithoutHost,!1),wa}function Ca(e,t,n,r){return ba(e,t,n,r),wa(),Ca}function ul(e){return!!e&&"function"==typeof e.then}const iv=function rv(e){return!!e&&"function"==typeof e.subscribe};function Ta(e,t,n,r){const h=vt(),d=an(),s=Un();return function sv(e,t,n,r,h,d,s,i){const u=Tu(r),a=e.firstCreatePass&&M_(e),o=t[8],c=D_(t);let l=!0;if(3&r.type||i){const p=kr(r,t),g=i?i(p):p,C=c.length,_=i?v=>i(Fn(v[r.index])):r.index;if(Mn(n)){let v=null;if(!i&&u&&(v=function _A(e,t,n,r){const h=e.cleanup;if(null!=h)for(let d=0;d<h.length-1;d+=2){const s=h[d];if(s===n&&h[d+1]===r){const i=t[7],u=h[d+2];return i.length>u?i[u]:null}"string"==typeof s&&(d+=2)}return null}(e,t,h,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=d,v.__ngLastListenerFn__=d,l=!1;else{d=Cf(r,t,o,d,!1);const T=n.listen(g,h,d);c.push(d,T),a&&a.push(h,_,C,C+1)}}else d=Cf(r,t,o,d,!0),g.addEventListener(h,d,s),c.push(d),a&&a.push(h,_,C,s)}else d=Cf(r,t,o,d,!1);const m=r.outputs;let I;if(l&&null!==m&&(I=m[h])){const p=I.length;if(p)for(let g=0;g<p;g+=2){const D=t[I[g]][I[g+1]].subscribe(d),P=c.length;c.push(d,D),a&&a.push(h,r.index,P,-(P+1))}}}(d,h,h[11],s,e,t,!!n,r),Ta}function av(e,t,n,r){try{return!1!==n(r)}catch(h){return R_(e,h),!1}}function Cf(e,t,n,r,h){return function d(s){if(s===Function)return r;ff(2&e.flags?Ar(e.index,t):t);let u=av(t,0,r,s),f=d.__ngNextListenerFn__;for(;f;)u=av(t,0,f,s)&&u,f=f.__ngNextListenerFn__;return h&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function Sf(e,t=""){const n=vt(),r=an(),h=e+22,d=r.firstCreatePass?us(r,h,1,t,null):r.data[h],s=n[h]=function Td(e,t){return Mn(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Xu(r,n,s,d),ci(d,!1)}const ws="en-US";let ey=ws;class sM{resolveComponentFactory(t){throw function oM(e){const t=Error(`No component factory found for ${pn(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Pa=(()=>{class e{}return e.NULL=new sM,e})();class $i{}class Ay{}class Dy{}function uM(){return Ts(Un(),vt())}function Ts(e,t){return new qi(kr(e,t))}let qi=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=uM,e})();class My{}let fM=(()=>{class e{}return e.\u0275prov=tn({token:e,providedIn:"root",factory:()=>null}),e})();class gl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const hM=new gl("14.0.2"),Ff={};function ml(e,t,n,r,h=!1){for(;null!==n;){const d=t[n.index];if(null!==d&&r.push(Fn(d)),Yr(d))for(let i=10;i<d.length;i++){const u=d[i],f=u[1].firstChild;null!==f&&ml(u[1],u,f,r)}const s=n.type;if(8&s)ml(e,t,n.child,r);else if(32&s){const i=bd(n,t);let u;for(;u=i();)r.push(u)}else if(16&s){const i=Tm(t,n);if(Array.isArray(i))r.push(...i);else{const u=ga(t[16]);ml(u[1],u,i,r,!0)}}n=h?n.projectionNext:n.next}return r}class Ra{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return ml(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Yr(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Sd(t,r),ku(n,r))}this._attachedToViewContainer=!1}pm(this._lView[1],this._lView)}onDestroy(t){!function y_(e,t,n,r){const h=D_(t);null===n?h.push(r):(h.push(n),e.firstCreatePass&&M_(e).push(r,h.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function pf(e,t,n){const r=t[10];r.begin&&r.begin();try{cs(e,t,e.template,n)}catch(h){throw R_(t,h),h}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new en(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sE(e,t){ma(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new en(902,"");this._appRef=t}}class pM extends Ra{constructor(t){super(t),this._view=t}detectChanges(){A_(this._view)}checkNoChanges(){}get context(){return null}}class Lf extends Pa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=gn(t);return new Nf(n,this.ngModule)}}function Py(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class mM{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const h=this.injector.get(t,Ff,r);return h!==Ff||n===Ff?h:this.parentInjector.get(t,n,r)}}class Nf extends Dy{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function SE(e){return e.map(EE).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Py(this.componentDef.inputs)}get outputs(){return Py(this.componentDef.outputs)}create(t,n,r,h){let d=(h=h||this.ngModule)instanceof To?h:h?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const s=d?new mM(t,d):t,i=s.get(My,ng),u=s.get(fM,null),f=i.createRenderer(null,this.componentDef),a=this.componentDef.selectors[0][0]||"div",o=r?function v_(e,t,n){if(Mn(e))return e.selectRootElement(t,n===li.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(f,r,this.componentDef.encapsulation):Ed(i.createRenderer(null,this.componentDef),a,function gM(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(a)),c=this.componentDef.onPush?288:272,l=function j_(e,t){return{components:[],scheduler:e||Z0,clean:GS,playerHandler:t||null,flags:0}}(),m=rl(0,null,null,1,0,null,null,null,null,null),I=_a(null,m,l,c,null,null,i,f,u,s,null);let p,g;Au(I);try{const C=function U_(e,t,n,r,h,d){const s=n[1];n[22]=e;const u=us(s,22,2,"#host",null),f=u.mergedAttrs=t.hostAttrs;null!==f&&(ol(u,f,!0),null!==e&&(xu(h,e,f),null!==u.classes&&Rd(h,e,u.classes),null!==u.styles&&Am(h,e,u.styles)));const a=r.createRenderer(e,t),o=_a(n,m_(t),null,t.onPush?32:16,n[22],u,r,a,d||null,null,null);return s.firstCreatePass&&(Nu(qs(u,n),s,t.type),C_(s,u),T_(u,n.length,1)),il(n,o),n[22]=o}(o,this.componentDef,I,i,f);if(o)if(r)xu(f,o,["ng-version",hM.full]);else{const{attrs:_,classes:v}=function AE(e){const t=[],n=[];let r=1,h=2;for(;r<e.length;){let d=e[r];if("string"==typeof d)2===h?""!==d&&t.push(d,e[++r]):8===h&&n.push(d);else{if(!Jr(h))break;h=d}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);_&&xu(f,o,_),v&&v.length>0&&Rd(f,o,v.join(" "))}if(g=function Vc(e,t){return e.data[t]}(m,22),void 0!==n){const _=g.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const T=n[v];_.push(null!=T?Array.from(T):null)}}p=function G_(e,t,n,r,h){const d=n[1],s=function SS(e,t,n){const r=Un();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),E_(e,r,t,ls(e,t,1,null),n));const h=ea(t,e,r.directiveStart,r);or(h,t);const d=kr(r,t);return d&&or(d,t),h}(d,n,t);if(r.components.push(s),e[8]=s,null!==h)for(const u of h)u(s,t);if(t.contentQueries){const u=Un();t.contentQueries(1,s,u.directiveStart)}const i=Un();return!d.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Yi(i.index),b_(n[1],i,0,i.directiveStart,i.directiveEnd,t),w_(t,s)),s}(C,this.componentDef,I,l,[qS]),va(m,I,null)}finally{Du()}return new vM(this.componentType,p,Ts(g,I),I,g)}}class vM extends class aM{}{constructor(t,n,r,h,d){super(),this.location=r,this._rootLView=h,this._tNode=d,this.instance=n,this.hostView=this.changeDetectorRef=new pM(h),this.componentType=t}get injector(){return new Jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Ry extends $i{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lf(this);const r=Er(t);this._bootstrapComponents=Ri(r.bootstrap),this._r3Injector=Ym(t,n,[{provide:$i,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],pn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(t)}get(t,n=Rr.THROW_IF_NOT_FOUND,r=kt.Default){return t===Rr||t===$i||t===Fd?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Bf extends Ay{constructor(t){super(),this.moduleType=t}create(t){return new Ry(this.moduleType,t)}}class IM extends $i{constructor(t,n,r){super(),this.componentFactoryResolver=new Lf(this),this.instance=null;const h=new Hm([...t,{provide:$i,useValue:this},{provide:Pa,useValue:this.componentFactoryResolver}],n||Bd(),r,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function _l(e,t=null,n=null){return new IM(e,t,n).injector}function kf(e){return t=>{setTimeout(e,void 0,t)}}const pr=class UM extends ai{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let h=t,d=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;h=u.next?.bind(u),d=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(d=kf(d),h&&(h=kf(h)),s&&(s=kf(s)));const i=super.subscribe({next:h,error:d,complete:s});return t instanceof Lr&&t.add(i),i}};let ei=(()=>{class e{}return e.__NG_ELEMENT_ID__=QM,e})();function QM(){return function Wy(e,t){let n;const r=t[e.index];if(Yr(r))n=r;else{let h;if(8&e.type)h=Fn(r);else{const d=t[11];h=d.createComment("");const s=kr(e,t);wo(d,Ju(d,s),h,function hE(e,t){return Mn(e)?e.nextSibling(t):t.nextSibling}(d,s),!1)}t[e.index]=n=function S_(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,h,e),il(t,n)}return new By(n,e,t)}(Un(),vt())}const YM=ei,By=class extends YM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new Jo(this._hostTNode,this._hostLView)}get parentInjector(){const t=Lu(this._hostTNode,this._hostLView);if(yg(t)){const n=Ko(t,this._hostLView),r=Yo(t);return new Jo(n[1].data[r+8],n)}return new Jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=ky(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let h,d;"number"==typeof r?h=r:null!=r&&(h=r.index,d=r.injector);const s=t.createEmbeddedView(n||{},d);return this.insert(s,h),s}createComponent(t,n,r,h,d){const s=t&&!function ra(e){return"function"==typeof e}(t);let i;if(s)i=n;else{const o=n||{};i=o.index,r=o.injector,h=o.projectableNodes,d=o.environmentInjector||o.ngModuleRef}const u=s?t:new Nf(gn(t)),f=r||this.parentInjector;if(!d&&null==u.ngModule){const c=(s?f:this.parentInjector).get(To,null);c&&(d=c)}const a=u.create(f,h,void 0,d);return this.insert(a.hostView,i),a}insert(t,n){const r=t._lView,h=r[1];if(function XC(e){return Yr(e[3])}(r)){const a=this.indexOf(t);if(-1!==a)this.detach(a);else{const o=r[3],c=new By(o,o[6],o[3]);c.detach(c.indexOf(t))}}const d=this._adjustIndex(n),s=this._lContainer;!function uE(e,t,n,r){const h=10+r,d=n.length;r>0&&(n[h-1][4]=t),r<d-10?(t[4]=n[h],Pg(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function lE(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const i=t[19];null!==i&&i.insertView(e),t[2]|=64}(h,r,s,d);const i=Md(d,s),u=r[11],f=Ju(u,s[7]);return null!==f&&function oE(e,t,n,r,h,d){r[0]=h,r[6]=t,ma(e,r,n,1,h,d)}(h,s[6],u,r,f,i),t.attachToViewContainerRef(),Pg(Vf(s),d,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=ky(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Sd(this._lContainer,n);r&&(ku(Vf(this._lContainer),n),pm(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=Sd(this._lContainer,n);return r&&null!=ku(Vf(this._lContainer),n)?new Ra(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ky(e){return e[8]}function Vf(e){return e[8]||(e[8]=[])}function Il(...e){}const qf=new $t("Application Initializer");let bl=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Il,this.reject=Il,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,h)=>{this.resolve=r,this.reject=h})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const d=this.appInits[h]();if(ul(d))n.push(d);else if(iv(d)){const s=new Promise((i,u)=>{d.subscribe({complete:i,error:u})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(h=>{this.reject(h)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(Ot(qf,8))},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const La=new $t("AppId",{providedIn:"root",factory:function lI(){return`${eh()}${eh()}${eh()}`}});function eh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cI=new $t("Platform Initializer"),dI=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),fI=new $t("appBootstrapListener");let CP=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Li=new $t("LocaleId",{providedIn:"root",factory:()=>function QT(e,t=kt.Default){return Ot(e,t)}(Li,kt.Optional|kt.SkipSelf)||function TP(){return typeof $localize<"u"&&$localize.locale||ws}()});class SP{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let th=(()=>{class e{compileModuleSync(n){return new Bf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),d=Ri(Er(n).declarations).reduce((s,i)=>{const u=gn(i);return u&&s.push(new Nf(u)),s},[]);return new SP(r,d)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const DP=(()=>Promise.resolve(0))();function nh(e){typeof Zone>"u"?DP.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Nn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pr(!1),this.onMicrotaskEmpty=new pr(!1),this.onStable=new pr(!1),this.onError=new pr(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!r&&n,h.shouldCoalesceRunChangeDetection=r,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function MP(){let e=dn.requestAnimationFrame,t=dn.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function xP(e){const t=()=>{!function RP(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(dn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,ih(e),e.isCheckStableRunning=!0,rh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),ih(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,h,d,s,i)=>{try{return hI(e),n.invokeTask(h,d,s,i)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||e.shouldCoalesceRunChangeDetection)&&t(),pI(e)}},onInvoke:(n,r,h,d,s,i,u)=>{try{return hI(e),n.invoke(h,d,s,i,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),pI(e)}},onHasTask:(n,r,h,d)=>{n.hasTask(h,d),r===h&&("microTask"==d.change?(e._hasPendingMicrotasks=d.microTask,ih(e),rh(e)):"macroTask"==d.change&&(e.hasPendingMacrotasks=d.macroTask))},onHandleError:(n,r,h,d)=>(n.handleError(h,d),e.runOutsideAngular(()=>e.onError.emit(d)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Nn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,h){const d=this._inner,s=d.scheduleEventTask("NgZoneEvent: "+h,t,PP,Il,Il);try{return d.runTask(s,n,r)}finally{d.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const PP={};function rh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ih(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function hI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function pI(e){e._nesting--,rh(e)}class OP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pr,this.onMicrotaskEmpty=new pr,this.onStable=new pr,this.onError=new pr}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,h){return t.apply(n,r)}}const gI=new $t(""),wl=new $t("");let ah,oh=(()=>{class e{constructor(n,r,h){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ah||(function FP(e){ah=e}(h),h.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nn.assertNotInAngularZone(),nh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,h){let d=-1;r&&r>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==d),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:d,updateCb:h})}whenStable(n,r,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,h){return[]}}return e.\u0275fac=function(n){return new(n||e)(Ot(Nn),Ot(sh),Ot(wl))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})(),sh=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ah?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),eo=null;const mI=new $t("AllowMultipleToken"),_I=new $t("PlatformOnDestroy");class vI{constructor(t,n){this.name=t,this.token=n}}function II(e,t,n=[]){const r=`Platform: ${t}`,h=new $t(r);return(d=[])=>{let s=uh();if(!s||s.injector.get(mI,!1)){const i=[...n,...d,{provide:h,useValue:!0}];e?e(i):function BP(e){if(eo&&!eo.get(mI,!1))throw new en(400,"");eo=e;const t=e.get(wI);(function yI(e){const t=e.get(cI,null);t&&t.forEach(n=>n())})(e)}(function bI(e=[],t){return Rr.create({name:t,providers:[{provide:Ld,useValue:"platform"},{provide:_I,useValue:()=>eo=null},...e]})}(i,r))}return function WP(e){const t=uh();if(!t)throw new en(401,"");return t}()}}function uh(){return eo?.get(wI)??null}let wI=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const h=function VP(e,t){let n;return n="noop"===e?new OP:("zone.js"===e?void 0:e)||new Nn(t),n}(r?.ngZone,function CI(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),d=[{provide:Nn,useValue:h}];return h.run(()=>{const s=Rr.create({providers:d,parent:this.injector,name:n.moduleType.name}),i=n.create(s),u=i.injector.get(rs,null);if(!u)throw new en(402,"");return h.runOutsideAngular(()=>{const f=h.onError.subscribe({next:a=>{u.handleError(a)}});i.onDestroy(()=>{Tl(this._modules,i),f.unsubscribe()})}),function TI(e,t,n){try{const r=n();return ul(r)?r.catch(h=>{throw t.runOutsideAngular(()=>e.handleError(h)),h}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(u,h,()=>{const f=i.injector.get(bl);return f.runInitializers(),f.donePromise.then(()=>(function ty(e){Tr(e,"Expected localeId to be defined"),"string"==typeof e&&(ey=e.toLowerCase().replace(/_/g,"-"))}(i.injector.get(Li,ws)||ws),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,r=[]){const h=EI({},r);return function LP(e,t,n){const r=new Bf(n);return Promise.resolve(r)}(0,0,n).then(d=>this.bootstrapModuleFactory(d,h))}_moduleDoBootstrap(n){const r=n.injector.get(Cl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(h=>r.bootstrap(h));else{if(!n.instance.ngDoBootstrap)throw new en(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new en(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(_I,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(Ot(Rr))},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function EI(e,t){return Array.isArray(t)?t.reduce(EI,e):{...e,...t}}let Cl=(()=>{class e{constructor(n,r,h,d){this._zone=n,this._injector=r,this._exceptionHandler=h,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Vn(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),i=new Vn(u=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{Nn.assertNotInAngularZone(),nh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const a=this._zone.onUnstable.subscribe(()=>{Nn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{f.unsubscribe(),a.unsubscribe()}});this.isStable=function mC(...e){const t=js(e),n=function lC(e,t){return"number"==typeof Ic(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?wi(r[0]):Wo(n)(zn(r,t)):Ti}(s,i.pipe(function _C(e={}){const{connector:t=(()=>new ai),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:h=!0}=e;return d=>{let s=null,i=null,u=null,f=0,a=!1,o=!1;const c=()=>{i?.unsubscribe(),i=null},l=()=>{c(),s=u=null,a=o=!1},m=()=>{const I=s;l(),I?.unsubscribe()};return Jn((I,p)=>{f++,!o&&!a&&c();const g=u=u??t();p.add(()=>{f--,0===f&&!o&&!a&&(i=bc(m,h))}),g.subscribe(p),s||(s=new pu({next:C=>g.next(C),error:C=>{o=!0,c(),i=bc(l,n,C),g.error(C)},complete:()=>{a=!0,c(),i=bc(l,r),g.complete()}}),zn(I).subscribe(s))})(d)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const h=n instanceof Dy;if(!this._initStatus.done)throw!h&&function Ss(e){const t=gn(e)||ur(e)||lr(e);return null!==t&&t.standalone}(n),new en(405,false);let d;d=h?n:this._injector.get(Pa).resolveComponentFactory(n),this.componentTypes.push(d.componentType);const s=function NP(e){return e.isBoundToModule}(d)?void 0:this._injector.get($i),u=d.create(Rr.NULL,[],r||d.selector,s),f=u.location.nativeElement,a=u.injector.get(gI,null);return a?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Tl(this.components,u),a?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new en(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Tl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(fI,[]).concat(this._bootstrapListeners).forEach(h=>h(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Tl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new en(406,false);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(Ot(Nn),Ot(Rr),Ot(rs),Ot(bl))},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Tl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let AI=!0,lh=(()=>{class e{}return e.__NG_ELEMENT_ID__=jP,e})();function jP(e){return function HP(e,t,n){if(Cu(e)&&!n){const r=Ar(e.index,t);return new Ra(r,r)}return 47&e.type?new Ra(t[16],t):null}(Un(),vt(),16==(16&e))}const i1=II(null,"core",[]);let o1=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(Ot(Cl))},e.\u0275mod=go({type:e}),e.\u0275inj=Hi({}),e})(),Dl=null;function to(){return Dl}const Ir=new $t("DocumentToken");let Ba=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:function(){return function l1(){return Ot(kI)}()},providedIn:"platform"}),e})();const c1=new $t("Location Initialized");let kI=(()=>{class e extends Ba{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return to().getBaseHref(this._doc)}onPopState(n){const r=to().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=to().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,h){WI()?this._history.pushState(n,r,h):this.location.hash=h}replaceState(n,r,h){WI()?this._history.replaceState(n,r,h):this.location.hash=h}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ir))},e.\u0275prov=tn({token:e,factory:function(){return function d1(){return new kI(Ot(Ir))}()},providedIn:"platform"}),e})();function WI(){return!!window.history.pushState}function ph(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function VI(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Ni(e){return e&&"?"!==e[0]?"?"+e:e}let Ms=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:function(){return function f1(){const e=Ot(Ir).location;return new UI(Ot(Ba),e&&e.origin||"")}()},providedIn:"root"}),e})();const gh=new $t("appBaseHref");let UI=(()=>{class e extends Ms{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ph(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ni(this._platformLocation.search),h=this._platformLocation.hash;return h&&n?`${r}${h}`:r}pushState(n,r,h,d){const s=this.prepareExternalUrl(h+Ni(d));this._platformLocation.pushState(n,r,s)}replaceState(n,r,h,d){const s=this.prepareExternalUrl(h+Ni(d));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ba),Ot(gh,8))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})(),h1=(()=>{class e extends Ms{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=ph(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,h,d){let s=this.prepareExternalUrl(h+Ni(d));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,h,d){let s=this.prepareExternalUrl(h+Ni(d));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ba),Ot(gh,8))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})(),mh=(()=>{class e{constructor(n){this._subject=new pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=VI(GI(r)),this._locationStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ni(r))}normalize(n){return e.stripTrailingSlash(function g1(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,GI(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",h=null){this._locationStrategy.pushState(h,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),h)}replaceState(n,r="",h=null){this._locationStrategy.replaceState(h,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ni(r)),h)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(h=>h(n,r))}subscribe(n,r,h){return this._subject.subscribe({next:n,error:r,complete:h})}}return e.normalizeQueryParams=Ni,e.joinWithSlash=ph,e.stripTrailingSlash=VI,e.\u0275fac=function(n){return new(n||e)(Ot(Ms))},e.\u0275prov=tn({token:e,factory:function(){return function p1(){return new mh(Ot(Ms))}()},providedIn:"root"}),e})();function GI(e){return e.replace(/\/index.html$/,"")}let RR=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=go({type:e}),e.\u0275inj=Hi({}),e})();let LR=(()=>{class e{}return e.\u0275prov=tn({token:e,providedIn:"root",factory:()=>new NR(Ot(Ir),window)}),e})();class NR{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function BR(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let h=r.currentNode;for(;h;){const d=h.shadowRoot;if(d){const s=d.getElementById(t)||d.querySelector(`[name="${t}"]`);if(s)return s}h=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,h=n.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(r-d[0],h-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=rb(this.window.history)||rb(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rb(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Ph extends class WR extends class u1{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function a1(e){Dl||(Dl=e)}(new Ph)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function VR(){return Va=Va||document.querySelector("base"),Va?Va.getAttribute("href"):null}();return null==n?null:function UR(e){kl=kl||document.createElement("a"),kl.setAttribute("href",e);const t=kl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Va=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function $1(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[h,d]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(h.trim()===t)return decodeURIComponent(d)}return null}(document.cookie,t)}}let kl,Va=null;const ib=new $t("TRANSITION_ID"),jR=[{provide:qf,useFactory:function GR(e,t,n){return()=>{n.get(bl).donePromise.then(()=>{const r=to(),h=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let d=0;d<h.length;d++)r.remove(h[d])})}},deps:[ib,Ir,Rr],multi:!0}];let zR=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();const Wl=new $t("EventManagerPlugins");let Vl=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(h=>h.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,h){return this._findPluginFor(r).addEventListener(n,r,h)}addGlobalEventListener(n,r,h){return this._findPluginFor(r).addGlobalEventListener(n,r,h)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const h=this._plugins;for(let d=0;d<h.length;d++){const s=h[d];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(Ot(Wl),Ot(Nn))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();class ob{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const h=to().getGlobalEventTarget(this._doc,t);if(!h)throw new Error(`Unsupported event target ${h} for event ${n}`);return this.addEventListener(h,n,r)}}let sb=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(h=>{this._stylesSet.has(h)||(this._stylesSet.add(h),r.add(h))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})(),Ua=(()=>{class e extends sb{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,h){n.forEach(d=>{const s=this._doc.createElement("style");s.textContent=d,h.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(ab),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,h)=>{this._addStylesToHost(n,h,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(ab))}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ir))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();function ab(e){to().remove(e)}const Rh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xh=/%COMP%/g;function Ul(e,t,n){for(let r=0;r<t.length;r++){let h=t[r];Array.isArray(h)?Ul(e,h,n):(h=h.replace(xh,e),n.push(h))}return n}function cb(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Oh=(()=>{class e{constructor(n,r,h){this.eventManager=n,this.sharedStylesHost=r,this.appId=h,this.rendererByCompId=new Map,this.defaultRenderer=new Fh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case li.Emulated:{let h=this.rendererByCompId.get(r.id);return h||(h=new ZR(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,h)),h.applyToHost(n),h}case 1:case li.ShadowDom:return new $R(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const h=Ul(r.id,r.styles,[]);this.sharedStylesHost.addStyles(h),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(Ot(Vl),Ot(Ua),Ot(La))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();class Fh{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Rh[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(fb(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(fb(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,h){if(h){n=h+":"+n;const d=Rh[h];d?t.setAttributeNS(d,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const h=Rh[r];h?t.removeAttributeNS(h,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,h){h&(Pr.DashCase|Pr.Important)?t.style.setProperty(n,r,h&Pr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Pr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,cb(r)):this.eventManager.addEventListener(t,n,cb(r))}}function fb(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class ZR extends Fh{constructor(t,n,r,h){super(t),this.component=r;const d=Ul(h+"-"+r.id,r.styles,[]);n.addStyles(d),this.contentAttr=function KR(e){return"_ngcontent-%COMP%".replace(xh,e)}(h+"-"+r.id),this.hostAttr=function JR(e){return"_nghost-%COMP%".replace(xh,e)}(h+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class $R extends Fh{constructor(t,n,r,h){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=Ul(h.id,h.styles,[]);for(let s=0;s<d.length;s++){const i=document.createElement("style");i.textContent=d[s],this.shadowRoot.appendChild(i)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let qR=(()=>{class e extends ob{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,h){return n.addEventListener(r,h,!1),()=>this.removeEventListener(n,r,h)}removeEventListener(n,r,h){return n.removeEventListener(r,h)}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ir))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();const hb=["alt","control","meta","shift"],tx={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nx={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let rx=(()=>{class e extends ob{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,h){const d=e.parseEventName(r),s=e.eventCallback(d.fullKey,h,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>to().onAndCancel(n,d.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),h=r.shift();if(0===r.length||"keydown"!==h&&"keyup"!==h)return null;const d=e._normalizeKey(r.pop());let s="";if(hb.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=d,0!=r.length||0===d.length)return null;const i={};return i.domEventName=h,i.fullKey=s,i}static getEventFullKey(n){let r="",h=function ix(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&pb.hasOwnProperty(t)&&(t=pb[t]))}return tx[t]||t}(n);return h=h.toLowerCase()," "===h?h="space":"."===h&&(h="dot"),hb.forEach(d=>{d!=h&&nx[d](n)&&(r+=d+".")}),r+=h,r}static eventCallback(n,r,h){return d=>{e.getEventFullKey(d)===n&&h.runGuarded(()=>r(d))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ir))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();const gb=[{provide:dI,useValue:"browser"},{provide:cI,useValue:function ox(){Ph.makeCurrent()},multi:!0},{provide:Ir,useFactory:function ax(){return function QC(e){kc=e}(document),document},deps:[]}],ux=II(i1,"browser",gb),mb=new $t(""),_b=[{provide:wl,useClass:class HR{addToWindow(t){dn.getAngularTestability=(r,h=!0)=>{const d=t.findTestabilityInTree(r,h);if(null==d)throw new Error("Could not find testability for element.");return d},dn.getAllAngularTestabilities=()=>t.getAllTestabilities(),dn.getAllAngularRootElements=()=>t.getAllRootElements(),dn.frameworkStabilizers||(dn.frameworkStabilizers=[]),dn.frameworkStabilizers.push(r=>{const h=dn.getAllAngularTestabilities();let d=h.length,s=!1;const i=function(u){s=s||u,d--,0==d&&r(s)};h.forEach(function(u){u.whenStable(i)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?to().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:gI,useClass:oh,deps:[Nn,sh,wl]},{provide:oh,useClass:oh,deps:[Nn,sh,wl]}],vb=[{provide:Ld,useValue:"root"},{provide:rs,useFactory:function sx(){return new rs},deps:[]},{provide:Wl,useClass:qR,multi:!0,deps:[Ir,Nn,dI]},{provide:Wl,useClass:rx,multi:!0,deps:[Ir]},{provide:Oh,useClass:Oh,deps:[Vl,Ua,La]},{provide:My,useExisting:Oh},{provide:sb,useExisting:Ua},{provide:Ua,useClass:Ua,deps:[Ir]},{provide:Vl,useClass:Vl,deps:[Wl,Nn]},{provide:class kR{},useClass:zR,deps:[]},[]];let lx=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:La,useValue:n.appId},{provide:ib,useExisting:La},jR]}}}return e.\u0275fac=function(n){return new(n||e)(Ot(mb,12))},e.\u0275mod=go({type:e}),e.\u0275inj=Hi({providers:[...vb,..._b],imports:[RR,o1]}),e})(),yb=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(Ot(Ir))},e.\u0275prov=tn({token:e,factory:function(n){let r=null;return r=n?new n:function dx(){return new yb(Ot(Ir))}(),r},providedIn:"root"}),e})();function Qt(...e){return zn(e,js(e))}typeof window<"u"&&window;class ri extends ai{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:Ix}=Array,{getPrototypeOf:bx,prototype:wx,keys:Cx}=Object;const{isArray:Sx}=Array;function wb(...e){const t=js(e),n=function uC(e){return vn(Ic(e))?e.pop():void 0}(e),{args:r,keys:h}=function Tx(e){if(1===e.length){const t=e[0];if(Ix(t))return{args:t,keys:null};if(function Ex(e){return e&&"object"==typeof e&&bx(e)===wx}(t)){const n=Cx(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return zn([],t);const d=new Vn(function Px(e,t,n=ho){return r=>{Cb(t,()=>{const{length:h}=e,d=new Array(h);let s=h,i=h;for(let u=0;u<h;u++)Cb(t,()=>{const f=zn(e[u],t);let a=!1;f.subscribe(Xn(r,o=>{d[u]=o,a||(a=!0,i--),i||r.next(n(d.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,h?s=>function Mx(e,t){return e.reduce((n,r,h)=>(n[r]=t[h],n),{})}(h,s):ho));return n?d.pipe(function Dx(e){return bn(t=>function Ax(e,t){return Sx(t)?e(...t):e(t)}(e,t))}(n)):d}function Cb(e,t,n){e?Ci(n,e,t):t()}function Ga(e,t){const n=vn(e)?e:()=>e,r=h=>h.error(n());return new Vn(t?h=>t.schedule(r,0,h):r)}const ja=Us(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Bh(...e){return function Rx(){return Wo(1)}()(zn(e,js(e)))}function Tb(e){return new Vn(t=>{wi(e()).subscribe(t)})}function kh(){return Jn((e,t)=>{let n=null;e._refCount++;const r=Xn(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const h=e._connection,d=n;n=null,h&&(!d||h===d)&&h.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class Eb extends Vn{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sp(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Lr;const n=this.getSubject();t.add(this.source.subscribe(Xn(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Lr.EMPTY)}return t}refCount(){return kh()(this)}}function Mo(e,t){return Jn((n,r)=>{let h=null,d=0,s=!1;const i=()=>s&&!h&&r.complete();n.subscribe(Xn(r,u=>{h?.unsubscribe();let f=0;const a=d++;wi(e(u,a)).subscribe(h=Xn(r,o=>r.next(t?t(u,o,a,f++):o),()=>{h=null,i()}))},()=>{s=!0,i()}))})}function Ox(e,t,n,r,h){return(d,s)=>{let i=n,u=t,f=0;d.subscribe(Xn(s,a=>{const o=f++;u=i?e(u,a,o):(i=!0,a),r&&s.next(u)},h&&(()=>{i&&s.next(u),s.complete()})))}}function Sb(e,t){return Jn(Ox(e,t,arguments.length>=2,!0))}function Ps(e,t){return Jn((n,r)=>{let h=0;n.subscribe(Xn(r,d=>e.call(t,d,h++)&&r.next(d)))})}function ro(e){return Jn((t,n)=>{let d,r=null,h=!1;r=t.subscribe(Xn(n,void 0,void 0,s=>{d=wi(e(s,ro(e)(t))),r?(r.unsubscribe(),r=null,d.subscribe(n)):h=!0})),h&&(r.unsubscribe(),r=null,d.subscribe(n))})}function Ha(e,t){return vn(t)?Zn(e,t,1):Zn(e,1)}function Wh(e){return e<=0?()=>Ti:Jn((t,n)=>{let r=[];t.subscribe(Xn(n,h=>{r.push(h),e<r.length&&r.shift()},()=>{for(const h of r)n.next(h);n.complete()},void 0,()=>{r=null}))})}function Ab(e=Fx){return Jn((t,n)=>{let r=!1;t.subscribe(Xn(n,h=>{r=!0,n.next(h)},()=>r?n.complete():n.error(e())))})}function Fx(){return new ja}function Vh(e){return Jn((t,n)=>{let r=!1;t.subscribe(Xn(n,h=>{r=!0,n.next(h)},()=>{r||n.next(e),n.complete()}))})}function Po(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ps((h,d)=>e(h,d,r)):ho,Hs(1),n?Vh(t):Ab(()=>new ja))}function ar(e,t,n){const r=vn(e)||t||n?{next:e,error:t,complete:n}:e;return r?Jn((h,d)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let i=!0;h.subscribe(Xn(d,u=>{var f;null===(f=r.next)||void 0===f||f.call(r,u),d.next(u)},()=>{var u;i=!1,null===(u=r.complete)||void 0===u||u.call(r),d.complete()},u=>{var f;i=!1,null===(f=r.error)||void 0===f||f.call(r,u),d.error(u)},()=>{var u,f;i&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(f=r.finalize)||void 0===f||f.call(r)}))}):ho}function Uh(e){return Jn((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class ki{constructor(t,n){this.id=t,this.url=n}}class Gh extends ki{constructor(t,n,r="imperative",h=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=h}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class za extends ki{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Db extends ki{constructor(t,n,r){super(t,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bx extends ki{constructor(t,n,r){super(t,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kx extends ki{constructor(t,n,r,h){super(t,n),this.urlAfterRedirects=r,this.state=h,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wx extends ki{constructor(t,n,r,h){super(t,n),this.urlAfterRedirects=r,this.state=h,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vx extends ki{constructor(t,n,r,h,d){super(t,n),this.urlAfterRedirects=r,this.state=h,this.shouldActivate=d,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ux extends ki{constructor(t,n,r,h){super(t,n),this.urlAfterRedirects=r,this.state=h,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gx extends ki{constructor(t,n,r,h){super(t,n),this.urlAfterRedirects=r,this.state=h,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jx{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hx{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zx{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qx{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yx{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kx{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mb{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class Jx{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Rs(e){return new Jx(e)}const Pb="ngNavigationCancelingError";function jh(e){const t=Error("NavigationCancelingError: "+e);return t[Pb]=!0,t}function Zx(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const h={};for(let d=0;d<r.length;d++){const s=r[d],i=e[d];if(s.startsWith(":"))h[s.substring(1)]=i;else if(s!==i.path)return null}return{consumed:e.slice(0,r.length),posParams:h}}function vi(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let h;for(let d=0;d<n.length;d++)if(h=n[d],!Rb(e[h],t[h]))return!1;return!0}function Rb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((h,d)=>r[d]===h)}return e===t}function xb(e){return Array.prototype.concat.apply([],e)}function Ob(e){return e.length>0?e[e.length-1]:null}function $n(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function ii(e){return iv(e)?e:ul(e)?zn(Promise.resolve(e)):Qt(e)}const eO={exact:function Nb(e,t,n){if(!xo(e.segments,t.segments)||!Gl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!Nb(e.children[r],t.children[r],n))return!1;return!0},subset:Bb},Fb={exact:function tO(e,t){return vi(e,t)},subset:function nO(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Rb(e[n],t[n]))},ignored:()=>!0};function Lb(e,t,n){return eO[n.paths](e.root,t.root,n.matrixParams)&&Fb[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Bb(e,t,n){return kb(e,t,t.segments,n)}function kb(e,t,n,r){if(e.segments.length>n.length){const h=e.segments.slice(0,n.length);return!(!xo(h,n)||t.hasChildren()||!Gl(h,n,r))}if(e.segments.length===n.length){if(!xo(e.segments,n)||!Gl(e.segments,n,r))return!1;for(const h in t.children)if(!e.children[h]||!Bb(e.children[h],t.children[h],r))return!1;return!0}{const h=n.slice(0,e.segments.length),d=n.slice(e.segments.length);return!!(xo(e.segments,h)&&Gl(e.segments,h,r)&&e.children[qt])&&kb(e.children[qt],t,d,r)}}function Gl(e,t,n){return t.every((r,h)=>Fb[n](e[h].parameters,r.parameters))}class Ro{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rs(this.queryParams)),this._queryParamMap}toString(){return oO.serialize(this)}}class sn{constructor(t,n){this.segments=t,this.children=n,this.parent=null,$n(n,(r,h)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jl(this)}}class Qa{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Rs(this.parameters)),this._parameterMap}toString(){return jb(this)}}function xo(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class Wb{}class Vb{parse(t){const n=new pO(t);return new Ro(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ya(t.root,!0)}`,r=function uO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(h=>`${Hl(n)}=${Hl(h)}`).join("&"):`${Hl(n)}=${Hl(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function sO(e){return encodeURI(e)}(t.fragment)}`:""}`}}const oO=new Vb;function jl(e){return e.segments.map(t=>jb(t)).join("/")}function Ya(e,t){if(!e.hasChildren())return jl(e);if(t){const n=e.children[qt]?Ya(e.children[qt],!1):"",r=[];return $n(e.children,(h,d)=>{d!==qt&&r.push(`${d}:${Ya(h,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function iO(e,t){let n=[];return $n(e.children,(r,h)=>{h===qt&&(n=n.concat(t(r,h)))}),$n(e.children,(r,h)=>{h!==qt&&(n=n.concat(t(r,h)))}),n}(e,(r,h)=>h===qt?[Ya(e.children[qt],!1)]:[`${h}:${Ya(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[qt]?`${jl(e)}/${n[0]}`:`${jl(e)}/(${n.join("//")})`}}function Ub(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hl(e){return Ub(e).replace(/%3B/gi,";")}function Hh(e){return Ub(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(e){return decodeURIComponent(e)}function Gb(e){return zl(e.replace(/\+/g,"%20"))}function jb(e){return`${Hh(e.path)}${function aO(e){return Object.keys(e).map(t=>`;${Hh(t)}=${Hh(e[t])}`).join("")}(e.parameters)}`}const lO=/^[^\/()?;=#]+/;function Ql(e){const t=e.match(lO);return t?t[0]:""}const cO=/^[^=?&#]+/,fO=/^[^&#]+/;class pO{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[qt]=new sn(t,n)),r}parseSegment(){const t=Ql(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Qa(zl(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Ql(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const h=Ql(this.remaining);h&&(r=h,this.capture(r))}t[zl(n)]=zl(r)}parseQueryParam(t){const n=function dO(e){const t=e.match(cO);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function hO(e){const t=e.match(fO);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const h=Gb(n),d=Gb(r);if(t.hasOwnProperty(h)){let s=t[h];Array.isArray(s)||(s=[s],t[h]=s),s.push(d)}else t[h]=d}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ql(this.remaining),h=this.remaining[r.length];if("/"!==h&&")"!==h&&";"!==h)throw new Error(`Cannot parse url '${this.url}'`);let d;r.indexOf(":")>-1?(d=r.slice(0,r.indexOf(":")),this.capture(d),this.capture(":")):t&&(d=qt);const s=this.parseChildren();n[d]=1===Object.keys(s).length?s[qt]:new sn([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Hb{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=zh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=zh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Qh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(h=>h.value).filter(h=>h!==t)}pathFromRoot(t){return Qh(t,this._root).map(n=>n.value)}}function zh(e,t){if(e===t.value)return t;for(const n of t.children){const r=zh(e,n);if(r)return r}return null}function Qh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Qh(e,n);if(r.length)return r.unshift(t),r}return[]}class Wi{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function xs(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class zb extends Hb{constructor(t,n){super(t),this.snapshot=n,Yh(this,t)}toString(){return this.snapshot.toString()}}function Qb(e,t){const n=function gO(e,t){const s=new Yl([],{},{},"",{},qt,t,null,e.root,-1,{});return new Kb("",new Wi(s,[]))}(e,t),r=new ri([new Qa("",{})]),h=new ri({}),d=new ri({}),s=new ri({}),i=new ri(""),u=new Os(r,h,s,i,d,qt,t,n.root);return u.snapshot=n.root,new zb(new Wi(u,[]),n)}class Os{constructor(t,n,r,h,d,s,i,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=h,this.data=d,this.outlet=s,this.component=i,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(bn(t=>Rs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(bn(t=>Rs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yb(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const h=n[r],d=n[r-1];if(h.routeConfig&&""===h.routeConfig.path)r--;else{if(d.component)break;r--}}return function mO(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Yl{constructor(t,n,r,h,d,s,i,u,f,a,o,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=h,this.data=d,this.outlet=s,this.component=i,this.routeConfig=u,this._urlSegment=f,this._lastPathIndex=a,this._correctedLastPathIndex=c??a,this._resolve=o}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kb extends Hb{constructor(t,n){super(n),this.url=t,Yh(this,n)}toString(){return Jb(this._root)}}function Yh(e,t){t.value._routerState=e,t.children.forEach(n=>Yh(e,n))}function Jb(e){const t=e.children.length>0?` { ${e.children.map(Jb).join(", ")} } `:"";return`${e.value}${t}`}function Kh(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,vi(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),vi(t.params,n.params)||e.params.next(n.params),function $x(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!vi(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),vi(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Jh(e,t){const n=vi(e.params,t.params)&&function rO(e,t){return xo(e,t)&&e.every((n,r)=>vi(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Jh(e.parent,t.parent))}function Ka(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const h=function vO(e,t,n){return t.children.map(r=>{for(const h of n.children)if(e.shouldReuseRoute(r.value,h.value.snapshot))return Ka(e,r,h);return Ka(e,r)})}(e,t,n);return new Wi(r,h)}{if(e.shouldAttach(t.value)){const d=e.retrieve(t.value);if(null!==d){const s=d.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(i=>Ka(e,i)),s}}const r=function yO(e){return new Os(new ri(e.url),new ri(e.params),new ri(e.queryParams),new ri(e.fragment),new ri(e.data),e.outlet,e.component,e)}(t.value),h=t.children.map(d=>Ka(e,d));return new Wi(r,h)}}function Kl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ja(e){return"object"==typeof e&&null!=e&&e.outlets}function Xh(e,t,n,r,h){let d={};if(r&&$n(r,(i,u)=>{d[u]=Array.isArray(i)?i.map(f=>`${f}`):`${i}`}),e===t)return new Ro(n,d,h);const s=Xb(e,t,n);return new Ro(s,d,h)}function Xb(e,t,n){const r={};return $n(e.children,(h,d)=>{r[d]=h===t?n:Xb(h,t,n)}),new sn(e.segments,r)}class Zb{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Kl(r[0]))throw new Error("Root segment cannot have matrix parameters");const h=r.find(Ja);if(h&&h!==Ob(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zh{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function $b(e,t,n){if(e||(e=new sn([],{})),0===e.segments.length&&e.hasChildren())return Jl(e,t,n);const r=function EO(e,t,n){let r=0,h=t;const d={match:!1,pathIndex:0,commandIndex:0};for(;h<e.segments.length;){if(r>=n.length)return d;const s=e.segments[h],i=n[r];if(Ja(i))break;const u=`${i}`,f=r<n.length-1?n[r+1]:null;if(h>0&&void 0===u)break;if(u&&f&&"object"==typeof f&&void 0===f.outlets){if(!ew(u,f,s))return d;r+=2}else{if(!ew(u,{},s))return d;r++}h++}return{match:!0,pathIndex:h,commandIndex:r}}(e,t,n),h=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const d=new sn(e.segments.slice(0,r.pathIndex),{});return d.children[qt]=new sn(e.segments.slice(r.pathIndex),e.children),Jl(d,0,h)}return r.match&&0===h.length?new sn(e.segments,{}):r.match&&!e.hasChildren()?$h(e,t,n):r.match?Jl(e,0,h):$h(e,t,n)}function Jl(e,t,n){if(0===n.length)return new sn(e.segments,{});{const r=function TO(e){return Ja(e[0])?e[0].outlets:{[qt]:e}}(n),h={};return $n(r,(d,s)=>{"string"==typeof d&&(d=[d]),null!==d&&(h[s]=$b(e.children[s],t,d))}),$n(e.children,(d,s)=>{void 0===r[s]&&(h[s]=d)}),new sn(e.segments,h)}}function $h(e,t,n){const r=e.segments.slice(0,t);let h=0;for(;h<n.length;){const d=n[h];if(Ja(d)){const u=SO(d.outlets);return new sn(r,u)}if(0===h&&Kl(n[0])){r.push(new Qa(e.segments[t].path,qb(n[0]))),h++;continue}const s=Ja(d)?d.outlets[qt]:`${d}`,i=h<n.length-1?n[h+1]:null;s&&i&&Kl(i)?(r.push(new Qa(s,qb(i))),h+=2):(r.push(new Qa(s,{})),h++)}return new sn(r,{})}function SO(e){const t={};return $n(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=$h(new sn([],{}),0,n))}),t}function qb(e){const t={};return $n(e,(n,r)=>t[r]=`${n}`),t}function ew(e,t,n){return e==n.path&&vi(t,n.parameters)}class AO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Xa,this.attachRef=null}}class Xa{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new AO,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let qh=(()=>{class e{constructor(n,r,h,d,s){this.parentContexts=n,this.location=r,this.changeDetector=d,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new pr,this.deactivateEvents=new pr,this.attachEvents=new pr,this.detachEvents=new pr,this.name=h||qt,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const h=this.location,s=n._futureSnapshot.component,i=this.parentContexts.getOrCreateContext(this.name).children,u=new DO(n,i,h.injector);if(r&&function MO(e){return!!e.resolveComponentFactory}(r)){const f=r.resolveComponentFactory(s);this.activated=h.createComponent(f,h.length,u)}else this.activated=h.createComponent(s,{index:h.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(Ft(Xa),Ft(ei),function ta(e){return function ET(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let h=0;for(;h<r;){const d=n[h];if(_g(d))break;if(0===d)h+=2;else if("number"==typeof d)for(h++;h<r&&"string"==typeof n[h];)h++;else{if(d===t)return n[h+1];h+=2}}}return null}(Un(),e)}("name"),Ft(lh),Ft(To))},e.\u0275dir=nr({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class DO{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Os?this.route:t===Xa?this.childContexts:this.parent.get(t,n)}}let tw=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Qs({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Ca(0,"router-outlet")},dependencies:[qh],encapsulation:2}),e})();function nw(e,t){return e.providers&&!e._injector&&(e._injector=_l(e.providers,t,`Route: ${e.path}`)),e._injector??t}function tp(e){const t=e.children&&e.children.map(tp),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==qt&&(n.component=tw),n}function Gr(e){return e.outlet||qt}function rw(e,t){const n=e.filter(r=>Gr(r)===t);return n.push(...e.filter(r=>Gr(r)!==t)),n}function iw(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class FO{constructor(t,n,r,h){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=h}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Kh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const h=xs(n);t.children.forEach(d=>{const s=d.value.outlet;this.deactivateRoutes(d,h[s],r),delete h[s]}),$n(h,(d,s)=>{this.deactivateRouteAndItsChildren(d,r)})}deactivateRoutes(t,n,r){const h=t.value,d=n?n.value:null;if(h===d)if(h.component){const s=r.getContext(h.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else d&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),h=r&&t.value.component?r.children:n,d=xs(t);for(const s of Object.keys(d))this.deactivateRouteAndItsChildren(d[s],h);if(r&&r.outlet){const s=r.outlet.detach(),i=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:i})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),h=r&&t.value.component?r.children:n,d=xs(t);for(const s of Object.keys(d))this.deactivateRouteAndItsChildren(d[s],h);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const h=xs(n);t.children.forEach(d=>{this.activateRoutes(d,h[d.value.outlet],r),this.forwardEvent(new Kx(d.value.snapshot))}),t.children.length&&this.forwardEvent(new Qx(t.value.snapshot))}activateRoutes(t,n,r){const h=t.value,d=n?n.value:null;if(Kh(h),h===d)if(h.component){const s=r.getOrCreateContext(h.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(h.component){const s=r.getOrCreateContext(h.outlet);if(this.routeReuseStrategy.shouldAttach(h.snapshot)){const i=this.routeReuseStrategy.retrieve(h.snapshot);this.routeReuseStrategy.store(h.snapshot,null),s.children.onOutletReAttached(i.contexts),s.attachRef=i.componentRef,s.route=i.route.value,s.outlet&&s.outlet.attach(i.componentRef,i.route.value),Kh(i.route.value),this.activateChildRoutes(t,null,s.children)}else{const i=iw(h.snapshot),u=i?.get(Pa)??null;s.attachRef=null,s.route=h,s.resolver=u,s.injector=i,s.outlet&&s.outlet.activateWith(h,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}function io(e){return"function"==typeof e}function Oo(e){return e instanceof Ro}const Za=Symbol("INITIAL_VALUE");function $a(){return Mo(e=>wb(e.map(t=>t.pipe(Hs(1),function xx(...e){const t=js(e);return Jn((n,r)=>{(t?Bh(e,n,t):Bh(e,n)).subscribe(r)})}(Za)))).pipe(Sb((t,n)=>{let r=!1;return n.reduce((h,d,s)=>h!==Za?h:(d===Za&&(r=!0),r||!1!==d&&s!==n.length-1&&!Oo(d)?h:d),t)},Za),Ps(t=>t!==Za),bn(t=>Oo(t)?t:!0===t),Hs(1)))}const ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xl(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...ow}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const h=(t.matcher||Zx)(n,e,t);if(!h)return{...ow};const d={};$n(h.posParams,(i,u)=>{d[u]=i.path});const s=h.consumed.length>0?{...d,...h.consumed[h.consumed.length-1].parameters}:d;return{matched:!0,consumedSegments:h.consumed,remainingSegments:n.slice(h.consumed.length),parameters:s,positionalParamSegments:h.posParams??{}}}function Zl(e,t,n,r,h="corrected"){if(n.length>0&&function GO(e,t,n){return n.some(r=>$l(e,t,r)&&Gr(r)!==qt)}(e,n,r)){const s=new sn(t,function UO(e,t,n,r){const h={};h[qt]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const d of n)if(""===d.path&&Gr(d)!==qt){const s=new sn([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,h[Gr(d)]=s}return h}(e,t,r,new sn(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function jO(e,t,n){return n.some(r=>$l(e,t,r))}(e,n,r)){const s=new sn(e.segments,function VO(e,t,n,r,h,d){const s={};for(const i of r)if($l(e,n,i)&&!h[Gr(i)]){const u=new sn([],{});u._sourceSegment=e,u._segmentIndexShift="legacy"===d?e.segments.length:t.length,s[Gr(i)]=u}return{...h,...s}}(e,t,n,r,e.children,h));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const d=new sn(e.segments,e.children);return d._sourceSegment=e,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:n}}function $l(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function sw(e,t,n,r){return!!(Gr(e)===r||r!==qt&&$l(t,n,e))&&("**"===e.path||Xl(t,e,n).matched)}function aw(e,t,n){return 0===t.length&&!e.children[n]}class ql{constructor(t){this.segmentGroup=t||null}}class uw{constructor(t){this.urlTree=t}}function qa(e){return Ga(new ql(e))}function lw(e){return Ga(new uw(e))}class YO{constructor(t,n,r,h,d){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=h,this.config=d,this.allowRedirects=!0}apply(){const t=Zl(this.urlTree.root,[],[],this.config).segmentGroup,n=new sn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,qt).pipe(bn(d=>this.createUrlTree(np(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ro(d=>{if(d instanceof uw)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof ql?this.noMatchError(d):d}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,qt).pipe(bn(h=>this.createUrlTree(np(h),t.queryParams,t.fragment))).pipe(ro(h=>{throw h instanceof ql?this.noMatchError(h):h}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const h=t.segments.length>0?new sn([],{[qt]:t}):t;return new Ro(h,n,r)}expandSegmentGroup(t,n,r,h){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(bn(d=>new sn([],d))):this.expandSegment(t,r,n,r.segments,h,!0)}expandChildren(t,n,r){const h=[];for(const d of Object.keys(r.children))"primary"===d?h.unshift(d):h.push(d);return zn(h).pipe(Ha(d=>{const s=r.children[d],i=rw(n,d);return this.expandSegmentGroup(t,i,s,d).pipe(bn(u=>({segment:u,outlet:d})))}),Sb((d,s)=>(d[s.outlet]=s.segment,d),{}),function Lx(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ps((h,d)=>e(h,d,r)):ho,Wh(1),n?Vh(t):Ab(()=>new ja))}())}expandSegment(t,n,r,h,d,s){return zn(r).pipe(Ha(i=>this.expandSegmentAgainstRoute(t,n,r,i,h,d,s).pipe(ro(f=>{if(f instanceof ql)return Qt(null);throw f}))),Po(i=>!!i),ro((i,u)=>{if(i instanceof ja||"EmptyError"===i.name)return aw(n,h,d)?Qt(new sn([],{})):qa(n);throw i}))}expandSegmentAgainstRoute(t,n,r,h,d,s,i){return sw(h,n,d,s)?void 0===h.redirectTo?this.matchSegmentAgainstRoute(t,n,h,d,s):i&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,h,d,s):qa(n):qa(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,h,d,s){return"**"===h.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,h,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,h,d,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,h){const d=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lw(d):this.lineralizeSegments(r,d).pipe(Zn(s=>{const i=new sn(s,{});return this.expandSegment(t,i,n,s,h,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,h,d,s){const{matched:i,consumedSegments:u,remainingSegments:f,positionalParamSegments:a}=Xl(n,h,d);if(!i)return qa(n);const o=this.applyRedirectCommands(u,h.redirectTo,a);return h.redirectTo.startsWith("/")?lw(o):this.lineralizeSegments(h,o).pipe(Zn(c=>this.expandSegment(t,n,r,c.concat(f),s,!1)))}matchSegmentAgainstRoute(t,n,r,h,d){if("**"===r.path)return t=nw(r,t),r.loadChildren?(r._loadedRoutes?Qt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(bn(o=>(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,new sn(h,{})))):Qt(new sn(h,{}));const{matched:s,consumedSegments:i,remainingSegments:u}=Xl(n,r,h);return s?(t=nw(r,t),this.getChildConfig(t,r,h).pipe(Zn(a=>{const o=a.injector??t,c=a.routes,{segmentGroup:l,slicedSegments:m}=Zl(n,i,u,c),I=new sn(l.segments,l.children);if(0===m.length&&I.hasChildren())return this.expandChildren(o,c,I).pipe(bn(_=>new sn(i,_)));if(0===c.length&&0===m.length)return Qt(new sn(i,{}));const p=Gr(r)===d;return this.expandSegment(o,I,c,m,p?qt:d,!0).pipe(bn(C=>new sn(i.concat(C.segments),C.children)))}))):qa(n)}getChildConfig(t,n,r){return n.children?Qt({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Qt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(t,n,r).pipe(Zn(h=>h?this.configLoader.loadChildren(t,n).pipe(ar(d=>{n._loadedRoutes=d.routes,n._loadedInjector=d.injector})):function zO(e){return Ga(jh(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(n))):Qt({routes:[],injector:t})}runCanLoadGuards(t,n,r){const h=n.canLoad;return h&&0!==h.length?Qt(h.map(s=>{const i=t.get(s);let u;if(function NO(e){return e&&io(e.canLoad)}(i))u=i.canLoad(n,r);else{if(!io(i))throw new Error("Invalid CanLoad guard");u=i(n,r)}return ii(u)})).pipe($a(),ar(s=>{if(!Oo(s))return;const i=jh(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw i.url=s,i}),bn(s=>!0===s)):Qt(!0)}lineralizeSegments(t,n){let r=[],h=n.root;for(;;){if(r=r.concat(h.segments),0===h.numberOfChildren)return Qt(r);if(h.numberOfChildren>1||!h.children[qt])return Ga(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));h=h.children[qt]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,h){const d=this.createSegmentGroup(t,n.root,r,h);return new Ro(d,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return $n(t,(h,d)=>{if("string"==typeof h&&h.startsWith(":")){const i=h.substring(1);r[d]=n[i]}else r[d]=h}),r}createSegmentGroup(t,n,r,h){const d=this.createSegments(t,n.segments,r,h);let s={};return $n(n.children,(i,u)=>{s[u]=this.createSegmentGroup(t,i,r,h)}),new sn(d,s)}createSegments(t,n,r,h){return n.map(d=>d.path.startsWith(":")?this.findPosParam(t,d,h):this.findOrReturn(d,r))}findPosParam(t,n,r){const h=r[n.path.substring(1)];if(!h)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return h}findOrReturn(t,n){let r=0;for(const h of n){if(h.path===t.path)return n.splice(r),h;r++}return t}}function np(e){const t={};for(const r of Object.keys(e.children)){const d=np(e.children[r]);(d.segments.length>0||d.hasChildren())&&(t[r]=d)}return function KO(e){if(1===e.numberOfChildren&&e.children[qt]){const t=e.children[qt];return new sn(e.segments.concat(t.segments),t.children)}return e}(new sn(e.segments,t))}class cw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ec{constructor(t,n){this.component=t,this.route=n}}function XO(e,t,n){const r=e._root;return eu(r,t?t._root:null,n,[r.value])}function tc(e,t,n){return(iw(t)??n).get(e)}function eu(e,t,n,r,h={canDeactivateChecks:[],canActivateChecks:[]}){const d=xs(t);return e.children.forEach(s=>{(function $O(e,t,n,r,h={canDeactivateChecks:[],canActivateChecks:[]}){const d=e.value,s=t?t.value:null,i=n?n.getContext(e.value.outlet):null;if(s&&d.routeConfig===s.routeConfig){const u=function qO(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!xo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!xo(e.url,t.url)||!vi(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jh(e,t)||!vi(e.queryParams,t.queryParams);default:return!Jh(e,t)}}(s,d,d.routeConfig.runGuardsAndResolvers);u?h.canActivateChecks.push(new cw(r)):(d.data=s.data,d._resolvedData=s._resolvedData),eu(e,t,d.component?i?i.children:null:n,r,h),u&&i&&i.outlet&&i.outlet.isActivated&&h.canDeactivateChecks.push(new ec(i.outlet.component,s))}else s&&tu(t,i,h),h.canActivateChecks.push(new cw(r)),eu(e,null,d.component?i?i.children:null:n,r,h)})(s,d[s.value.outlet],n,r.concat([s.value]),h),delete d[s.value.outlet]}),$n(d,(s,i)=>tu(s,n.getContext(i),h)),h}function tu(e,t,n){const r=xs(e),h=e.value;$n(r,(d,s)=>{tu(d,h.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new ec(h.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,h))}class uF{}function fw(e){return new Vn(t=>t.error(e))}class cF{constructor(t,n,r,h,d,s){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=h,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=s}recognize(){const t=Zl(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,qt);if(null===n)return null;const r=new Yl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),h=new Wi(r,n),d=new Kb(this.url,h);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(t){const n=t.value,r=Yb(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(h=>this.inheritParamsAndData(h))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const d of Object.keys(n.children)){const s=n.children[d],i=rw(t,d),u=this.processSegmentGroup(i,s,d);if(null===u)return null;r.push(...u)}const h=hw(r);return function dF(e){e.sort((t,n)=>t.value.outlet===qt?-1:n.value.outlet===qt?1:t.value.outlet.localeCompare(n.value.outlet))}(h),h}processSegment(t,n,r,h){for(const d of t){const s=this.processSegmentAgainstRoute(d,n,r,h);if(null!==s)return s}return aw(n,r,h)?[]:null}processSegmentAgainstRoute(t,n,r,h){if(t.redirectTo||!sw(t,n,r,h))return null;let d,s=[],i=[];if("**"===t.path){const l=r.length>0?Ob(r).parameters:{},m=gw(n)+r.length;d=new Yl(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_w(t),Gr(t),t.component??t._loadedComponent??null,t,pw(n),m,vw(t),m)}else{const l=Xl(n,t,r);if(!l.matched)return null;s=l.consumedSegments,i=l.remainingSegments;const m=gw(n)+s.length;d=new Yl(s,l.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_w(t),Gr(t),t.component??t._loadedComponent??null,t,pw(n),m,vw(t),m)}const u=function fF(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:a}=Zl(n,s,i,u.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution);if(0===a.length&&f.hasChildren()){const l=this.processChildren(u,f);return null===l?null:[new Wi(d,l)]}if(0===u.length&&0===a.length)return[new Wi(d,[])];const o=Gr(t)===h,c=this.processSegment(u,f,a,o?qt:h);return null===c?null:[new Wi(d,c)]}}function hF(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function hw(e){const t=[],n=new Set;for(const r of e){if(!hF(r)){t.push(r);continue}const h=t.find(d=>r.value.routeConfig===d.value.routeConfig);void 0!==h?(h.children.push(...r.children),n.add(h)):t.push(r)}for(const r of n){const h=hw(r.children);t.push(new Wi(r.value,h))}return t.filter(r=>!n.has(r))}function pw(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function gw(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function _w(e){return e.data||{}}function vw(e){return e.resolve||{}}const rp=Symbol("RouteTitle");function yw(e){return"string"==typeof e.title||null===e.title}function ip(e){return Mo(t=>{const n=e(t);return n?zn(n).pipe(bn(()=>t)):Qt(t)})}class wF extends class bF{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const op=new $t("ROUTES");let sp=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Qt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ii(n.loadComponent()).pipe(ar(d=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=d}),Uh(()=>{this.componentLoaders.delete(n)})),h=new Eb(r,()=>new ai).pipe(kh());return this.componentLoaders.set(n,h),h}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const d=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(bn(i=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,f,a=!1;Array.isArray(i)?f=i:(u=i.create(n).injector,f=xb(u.get(op,[],kt.Self|kt.Optional)));return{routes:f.map(tp),injector:u}}),Uh(()=>{this.childrenLoaders.delete(r)})),s=new Eb(d,()=>new ai).pipe(kh());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return ii(n()).pipe(Zn(r=>r instanceof Ay||Array.isArray(r)?Qt(r):zn(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(Ot(Rr),Ot(th))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();class TF{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function SF(e){throw e}function AF(e,t,n){return t.parse("/")}const DF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Or=(()=>{class e{constructor(n,r,h,d,s,i,u){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=h,this.location=d,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ai,this.errorHandler=SF,this.malformedUriErrorHandler=AF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Qt(void 0),this.urlHandlingStrategy=new TF,this.routeReuseStrategy=new wF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(sp),this.configLoader.onLoadEndListener=c=>this.triggerEvent(new Hx(c)),this.configLoader.onLoadStartListener=c=>this.triggerEvent(new jx(c)),this.ngModule=s.get($i),this.console=s.get(CP);const o=s.get(Nn);this.isNgZoneEnabled=o instanceof Nn&&Nn.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function qx(){return new Ro(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Qb(this.currentUrlTree,this.rootComponentType),this.transitions=new ri({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Ps(h=>0!==h.id),bn(h=>({...h,extractedUrl:this.urlHandlingStrategy.extract(h.rawUrl)})),Mo(h=>{let d=!1,s=!1;return Qt(h).pipe(ar(i=>{this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mo(i=>{const u=this.browserUrlTree.toString(),f=!this.navigated||i.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||f)&&this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return bw(i.source)&&(this.browserUrlTree=i.extractedUrl),Qt(i).pipe(Mo(o=>{const c=this.transitions.getValue();return r.next(new Gh(o.id,this.serializeUrl(o.extractedUrl),o.source,o.restoredState)),c!==this.transitions.getValue()?Ti:Promise.resolve(o)}),function JO(e,t,n,r){return Mo(h=>function QO(e,t,n,r,h){return new YO(e,t,n,r,h).apply()}(e,t,n,h.extractedUrl,r).pipe(bn(d=>({...h,urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ar(o=>{this.currentNavigation={...this.currentNavigation,finalUrl:o.urlAfterRedirects}}),function pF(e,t,n,r,h){return Zn(d=>function lF(e,t,n,r,h="emptyOnly",d="legacy"){try{const s=new cF(e,t,n,r,h,d).recognize();return null===s?fw(new uF):Qt(s)}catch(s){return fw(s)}}(e,t,d.urlAfterRedirects,n(d.urlAfterRedirects),r,h).pipe(bn(s=>({...d,targetSnapshot:s}))))}(this.rootComponentType,this.config,o=>this.serializeUrl(o),this.paramsInheritanceStrategy,this.relativeLinkResolution),ar(o=>{if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const l=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(l,o)}this.browserUrlTree=o.urlAfterRedirects}const c=new kx(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);r.next(c)}));if(f&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:c,extractedUrl:l,source:m,restoredState:I,extras:p}=i,g=new Gh(c,this.serializeUrl(l),m,I);r.next(g);const C=Qb(l,this.rootComponentType).snapshot;return Qt({...i,targetSnapshot:C,urlAfterRedirects:l,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=i.rawUrl,i.resolve(null),Ti}),ar(i=>{const u=new Wx(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(i.urlAfterRedirects),i.targetSnapshot);this.triggerEvent(u)}),bn(i=>({...i,guards:XO(i.targetSnapshot,i.currentSnapshot,this.rootContexts)})),function eF(e,t){return Zn(n=>{const{targetSnapshot:r,currentSnapshot:h,guards:{canActivateChecks:d,canDeactivateChecks:s}}=n;return 0===s.length&&0===d.length?Qt({...n,guardsResult:!0}):function tF(e,t,n,r){return zn(e).pipe(Zn(h=>function aF(e,t,n,r,h){const d=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return d&&0!==d.length?Qt(d.map(i=>{const u=tc(i,t,h);let f;if(function WO(e){return e&&io(e.canDeactivate)}(u))f=ii(u.canDeactivate(e,t,n,r));else{if(!io(u))throw new Error("Invalid CanDeactivate guard");f=ii(u(e,t,n,r))}return f.pipe(Po())})).pipe($a()):Qt(!0)}(h.component,h.route,n,t,r)),Po(h=>!0!==h,!0))}(s,r,h,e).pipe(Zn(i=>i&&function LO(e){return"boolean"==typeof e}(i)?function nF(e,t,n,r){return zn(t).pipe(Ha(h=>Bh(function iF(e,t){return null!==e&&t&&t(new zx(e)),Qt(!0)}(h.route.parent,r),function rF(e,t){return null!==e&&t&&t(new Yx(e)),Qt(!0)}(h.route,r),function sF(e,t,n){const r=t[t.length-1],d=t.slice(0,t.length-1).reverse().map(s=>function ZO(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>Tb(()=>Qt(s.guards.map(u=>{const f=tc(u,s.node,n);let a;if(function kO(e){return e&&io(e.canActivateChild)}(f))a=ii(f.canActivateChild(r,e));else{if(!io(f))throw new Error("Invalid CanActivateChild guard");a=ii(f(r,e))}return a.pipe(Po())})).pipe($a())));return Qt(d).pipe($a())}(e,h.path,n),function oF(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Qt(!0);const h=r.map(d=>Tb(()=>{const s=tc(d,t,n);let i;if(function BO(e){return e&&io(e.canActivate)}(s))i=ii(s.canActivate(t,e));else{if(!io(s))throw new Error("Invalid CanActivate guard");i=ii(s(t,e))}return i.pipe(Po())}));return Qt(h).pipe($a())}(e,h.route,n))),Po(h=>!0!==h,!0))}(r,d,e,t):Qt(i)),bn(i=>({...n,guardsResult:i})))})}(this.ngModule.injector,i=>this.triggerEvent(i)),ar(i=>{if(Oo(i.guardsResult)){const f=jh(`Redirecting to "${this.serializeUrl(i.guardsResult)}"`);throw f.url=i.guardsResult,f}const u=new Vx(i.id,this.serializeUrl(i.extractedUrl),this.serializeUrl(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.triggerEvent(u)}),Ps(i=>!!i.guardsResult||(this.restoreHistory(i),this.cancelNavigationTransition(i,""),!1)),ip(i=>{if(i.guards.canActivateChecks.length)return Qt(i).pipe(ar(u=>{const f=new Ux(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(f)}),Mo(u=>{let f=!1;return Qt(u).pipe(function gF(e,t){return Zn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:h}}=n;if(!h.length)return Qt(n);let d=0;return zn(h).pipe(Ha(s=>function mF(e,t,n,r){const h=e.routeConfig,d=e._resolve;return void 0!==h?.title&&!yw(h)&&(d[rp]=h.title),function _F(e,t,n,r){const h=function vF(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===h.length)return Qt({});const d={};return zn(h).pipe(Zn(s=>function yF(e,t,n,r){const h=tc(e,t,r);return ii(h.resolve?h.resolve(t,n):h(t,n))}(e[s],t,n,r).pipe(Po(),ar(i=>{d[s]=i}))),Wh(1),function Nx(e){return bn(()=>e)}(d),ro(s=>s instanceof ja?Ti:Ga(s)))}(d,e,t,r).pipe(bn(s=>(e._resolvedData=s,e.data=Yb(e,n).resolve,h&&yw(h)&&(e.data[rp]=h.title),null)))}(s.route,r,e,t)),ar(()=>d++),Wh(1),Zn(s=>d===h.length?Qt(n):Ti))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ar({next:()=>f=!0,complete:()=>{f||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),ar(u=>{const f=new Gx(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(f)}))}),ip(()=>this.afterPreactivation()),ip(i=>{const u=f=>{const a=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&a.push(this.configLoader.loadComponent(f.routeConfig).pipe(ar(o=>{f.component=o}),bn(()=>{})));for(const o of f.children)a.push(...u(o));return a};return wb(u(i.targetSnapshot.root)).pipe(Vh(),Hs(1))}),bn(i=>{const u=function _O(e,t,n){const r=Ka(e,t._root,n?n._root:void 0);return new zb(r,t)}(this.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return{...i,targetRouterState:u}}),ar(i=>{this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects)}),((e,t,n)=>bn(r=>(new FO(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,i=>this.triggerEvent(i)),ar({next(){d=!0},complete(){d=!0}}),Uh(()=>{d||s||this.cancelNavigationTransition(h,`Navigation ID ${h.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===h.id&&(this.currentNavigation=null)}),ro(i=>{if(s=!0,function Xx(e){return e&&e[Pb]}(i)){const u=Oo(i.url);u||(this.navigated=!0,this.restoreHistory(h,!0));const f=new Db(h.id,this.serializeUrl(h.extractedUrl),i.message);if(r.next(f),u){const a=this.urlHandlingStrategy.merge(i.url,this.rawUrlTree),o={skipLocationChange:h.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bw(h.source)};this.scheduleNavigation(a,"imperative",null,o,{resolve:h.resolve,reject:h.reject,promise:h.promise})}else h.resolve(!1)}else{this.restoreHistory(h,!0);const u=new Bx(h.id,this.serializeUrl(h.extractedUrl),i);r.next(u);try{h.resolve(this.errorHandler(i))}catch(f){h.reject(f)}}return Ti}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const h={replaceUrl:!0},d=n.state?.navigationId?n.state:null;if(d){const i={...d};delete i.navigationId,delete i.\u0275routerPageId,0!==Object.keys(i).length&&(h.state=i)}const s=this.parseUrl(n.url);this.scheduleNavigation(s,r,d,h)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(tp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:h,queryParams:d,fragment:s,queryParamsHandling:i,preserveFragment:u}=r,f=h||this.routerState.root,a=u?this.currentUrlTree.fragment:s;let o=null;switch(i){case"merge":o={...this.currentUrlTree.queryParams,...d};break;case"preserve":o=this.currentUrlTree.queryParams;break;default:o=d||null}return null!==o&&(o=this.removeEmptyProps(o)),function IO(e,t,n,r,h){if(0===n.length)return Xh(t.root,t.root,t.root,r,h);const d=function bO(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Zb(!0,0,e);let t=0,n=!1;const r=e.reduce((h,d,s)=>{if("object"==typeof d&&null!=d){if(d.outlets){const i={};return $n(d.outlets,(u,f)=>{i[f]="string"==typeof u?u.split("/"):u}),[...h,{outlets:i}]}if(d.segmentPath)return[...h,d.segmentPath]}return"string"!=typeof d?[...h,d]:0===s?(d.split("/").forEach((i,u)=>{0==u&&"."===i||(0==u&&""===i?n=!0:".."===i?t++:""!=i&&h.push(i))}),h):[...h,d]},[]);return new Zb(n,t,r)}(n);return d.toRoot()?Xh(t.root,t.root,new sn([],{}),r,h):function s(u){const f=function wO(e,t,n,r){return e.isAbsolute?new Zh(t.root,!0,0):-1===r?new Zh(n,n===t.root,0):function CO(e,t,n){let r=e,h=t,d=n;for(;d>h;){if(d-=h,r=r.parent,!r)throw new Error("Invalid number of '../'");h=r.segments.length}return new Zh(r,!1,h-d)}(n,r+(Kl(e.commands[0])?0:1),e.numberOfDoubleDots)}(d,t,e.snapshot?._urlSegment,u),a=f.processChildren?Jl(f.segmentGroup,f.index,d.commands):$b(f.segmentGroup,f.index,d.commands);return Xh(t.root,f.segmentGroup,a,r,h)}(e.snapshot?._lastPathIndex)}(f,this.currentUrlTree,n,o,a??null)}navigateByUrl(n,r={skipLocationChange:!1}){const h=Oo(n)?n:this.parseUrl(n),d=this.urlHandlingStrategy.merge(h,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function PF(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(h){r=this.malformedUriErrorHandler(h,this.urlSerializer,n)}return r}isActive(n,r){let h;if(h=!0===r?{...DF}:!1===r?{...MF}:r,Oo(n))return Lb(this.currentUrlTree,n,h);const d=this.parseUrl(n);return Lb(this.currentUrlTree,d,h)}removeEmptyProps(n){return Object.keys(n).reduce((r,h)=>{const d=n[h];return null!=d&&(r[h]=d),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new za(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,h,d,s){if(this.disposed)return Promise.resolve(!1);let i,u,f;s?(i=s.resolve,u=s.reject,f=s.promise):f=new Promise((c,l)=>{i=c,u=l});const a=++this.navigationId;let o;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(h=this.location.getState()),o=h&&h.\u0275routerPageId?h.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):o=0,this.setTransition({id:a,targetPageId:o,source:r,restoredState:h,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:d,resolve:i,reject:u,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(c=>Promise.reject(c))}setBrowserUrl(n,r){const h=this.urlSerializer.serialize(n),d={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(h)||r.extras.replaceUrl?this.location.replaceState(h,"",d):this.location.go(h,"",d)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===h?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===h&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const h=new Db(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(h),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){Hd()},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();function bw(e){return"imperative"!==e}class ww{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(h=>h.outlet===qt);return n}getResolvedTitleForRoute(t){return t.data[rp]}}let OF=(()=>{class e extends ww{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(Ot(yb))},e.\u0275prov=tn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Cw{}class Tw{preload(t,n){return Qt(null)}}let Ew=(()=>{class e{constructor(n,r,h,d,s){this.router=n,this.injector=h,this.preloadingStrategy=d,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ps(n=>n instanceof za),Ha(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const h=[];for(const d of r){d.providers&&!d._injector&&(d._injector=_l(d.providers,n,`Route: ${d.path}`));const s=d._injector??n,i=d._loadedInjector??s;d.loadChildren&&!d._loadedRoutes||d.loadComponent&&!d._loadedComponent?h.push(this.preloadConfig(s,d)):(d.children||d._loadedRoutes)&&h.push(this.processRoutes(i,d.children??d._loadedRoutes))}return zn(h).pipe(Wo())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let h;h=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Qt(null);const d=h.pipe(Zn(s=>null===s?Qt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?zn([d,this.loader.loadComponent(r)]).pipe(Wo()):d})}}return e.\u0275fac=function(n){return new(n||e)(Ot(Or),Ot(th),Ot(To),Ot(Cw),Ot(sp))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})(),lp=(()=>{class e{constructor(n,r,h={}){this.router=n,this.viewportScroller=r,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Gh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof za&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Mb&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new Mb(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){Hd()},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();const Fo=new $t("ROUTER_CONFIGURATION"),Sw=new $t("ROUTER_FORROOT_GUARD"),LF=[mh,{provide:Wb,useClass:Vb},{provide:Or,useFactory:function VF(e,t,n,r,h,d,s={},i,u,f,a){const o=new Or(null,e,t,n,r,h,xb(d));return f&&(o.urlHandlingStrategy=f),a&&(o.routeReuseStrategy=a),o.titleStrategy=u??i,function UF(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,o),o},deps:[Wb,Xa,mh,Rr,th,op,Fo,OF,[ww,new Pi],[class CF{},new Pi],[class IF{},new Pi]]},Xa,{provide:Os,useFactory:function GF(e){return e.routerState.root},deps:[Or]},Ew,Tw,class FF{preload(t,n){return n().pipe(ro(()=>Qt(null)))}},{provide:Fo,useValue:{enableTracing:!1}},sp];function NF(){return new vI("Router",Or)}let Aw=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[LF,Dw(n),{provide:Sw,useFactory:WF,deps:[[Or,new Pi,new ua]]},{provide:Fo,useValue:r||{}},{provide:Ms,useFactory:kF,deps:[Ba,[new Gu(gh),new Pi],Fo]},{provide:lp,useFactory:BF,deps:[Or,LR,Fo]},{provide:Cw,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Tw},{provide:vI,multi:!0,useFactory:NF},[cp,{provide:qf,multi:!0,useFactory:jF,deps:[cp]},{provide:Mw,useFactory:HF,deps:[cp]},{provide:fI,multi:!0,useExisting:Mw}]]}}static forChild(n){return{ngModule:e,providers:[Dw(n)]}}}return e.\u0275fac=function(n){return new(n||e)(Ot(Sw,8),Ot(Or,8))},e.\u0275mod=go({type:e}),e.\u0275inj=Hi({}),e})();function BF(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new lp(e,t,n)}function kF(e,t,n={}){return n.useHash?new h1(e,t):new UI(e,t)}function WF(e){return"guarded"}function Dw(e){return[{provide:xT,multi:!0,useValue:e},{provide:op,multi:!0,useValue:e}]}let cp=(()=>{class e{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ai}appInitializer(){return this.injector.get(c1,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const h=new Promise(i=>r=i),d=this.injector.get(Or),s=this.injector.get(Fo);return"disabled"===s.initialNavigation?(d.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===s.initialNavigation?(d.afterPreactivation=()=>this.initNavigation?Qt(void 0):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),d.initialNavigation()):r(!0),h})}bootstrapListener(n){const r=this.injector.get(Fo),h=this.injector.get(Ew),d=this.injector.get(lp),s=this.injector.get(Or),i=this.injector.get(Cl);n===i.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),h.setUpPreloading(),d.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(n){return new(n||e)(Ot(Rr))},e.\u0275prov=tn({token:e,factory:e.\u0275fac}),e})();function jF(e){return e.appInitializer.bind(e)}function HF(e){return e.bootstrapListener.bind(e)}const Mw=new $t("Router Initializer");var e,t;let rn;e="object"==typeof window?window:global,t=function(e,t,n,r,h){return function(d){var s={};function i(u){if(s[u])return s[u].exports;var f=s[u]={i:u,l:!1,exports:{}};return d[u].call(f.exports,f,f.exports,i),f.l=!0,f.exports}return i.m=d,i.c=s,i.d=function(u,f,a){i.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:a})},i.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},i.t=function(u,f){if(1&f&&(u=i(u)),8&f||4&f&&"object"==typeof u&&u&&u.__esModule)return u;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:u}),2&f&&"string"!=typeof u)for(var o in u)i.d(a,o,function(c){return u[c]}.bind(null,o));return a},i.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return i.d(f,"a",f),f},i.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},i.p="",i(i.s=5)}([function(d,s){d.exports=e},function(d,s){d.exports=t},function(d,s){d.exports=n},function(d,s){d.exports=r},function(d,s){d.exports=h},function(d,s,i){var u,f,a,o,G;i.r(s),i.d(s,"DBR",function(){return Re}),i.d(s,"BarcodeReader",function(){return p}),i.d(s,"BarcodeScanner",function(){return _}),i.d(s,"EnumBarcodeColourMode",function(){return v}),i.d(s,"EnumBarcodeComplementMode",function(){return T}),i.d(s,"EnumBarcodeFormat",function(){return o}),i.d(s,"EnumBarcodeFormat_2",function(){return D}),i.d(s,"EnumBinarizationMode",function(){return P}),i.d(s,"EnumClarityCalculationMethod",function(){return E}),i.d(s,"EnumClarityFilterMode",function(){return M}),i.d(s,"EnumColourClusteringMode",function(){return O}),i.d(s,"EnumColourConversionMode",function(){return R}),i.d(s,"EnumConflictMode",function(){return F}),i.d(s,"EnumDeblurMode",function(){return B}),i.d(s,"EnumDeformationResistingMode",function(){return b}),i.d(s,"EnumDPMCodeReadingMode",function(){return A}),i.d(s,"EnumErrorCode",function(){return f}),i.d(s,"EnumGrayscaleTransformationMode",function(){return N}),i.d(s,"EnumImagePixelFormat",function(){return u}),i.d(s,"EnumImagePreprocessingMode",function(){return Y}),i.d(s,"EnumIMResultDataType",function(){return a}),i.d(s,"EnumIntermediateResultSavingMode",function(){return ne}),i.d(s,"EnumIntermediateResultType",function(){return Ie}),i.d(s,"EnumLocalizationMode",function(){return _e}),i.d(s,"EnumPDFReadingMode",function(){return ce}),i.d(s,"EnumQRCodeErrorCorrectionLevel",function(){return q}),i.d(s,"EnumRegionPredetectionMode",function(){return he}),i.d(s,"EnumResultCoordinateType",function(){return ie}),i.d(s,"EnumResultType",function(){return V}),i.d(s,"EnumScaleUpMode",function(){return J}),i.d(s,"EnumTerminatePhase",function(){return te}),i.d(s,"EnumTextFilterMode",function(){return oe}),i.d(s,"EnumTextResultOrderMode",function(){return Ee}),i.d(s,"EnumTextureDetectionMode",function(){return ge}),(G=u||(u={}))[G.IPF_Binary=0]="IPF_Binary",G[G.IPF_BinaryInverted=1]="IPF_BinaryInverted",G[G.IPF_GrayScaled=2]="IPF_GrayScaled",G[G.IPF_NV21=3]="IPF_NV21",G[G.IPF_RGB_565=4]="IPF_RGB_565",G[G.IPF_RGB_555=5]="IPF_RGB_555",G[G.IPF_RGB_888=6]="IPF_RGB_888",G[G.IPF_ARGB_8888=7]="IPF_ARGB_8888",G[G.IPF_RGB_161616=8]="IPF_RGB_161616",G[G.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",G[G.IPF_ABGR_8888=10]="IPF_ABGR_8888",G[G.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",G[G.IPF_BGR_888=12]="IPF_BGR_888",function(G){G[G.DBR_SYSTEM_EXCEPTION=1]="DBR_SYSTEM_EXCEPTION",G[G.DBR_SUCCESS=0]="DBR_SUCCESS",G[G.DBR_UNKNOWN=-1e4]="DBR_UNKNOWN",G[G.DBR_NO_MEMORY=-10001]="DBR_NO_MEMORY",G[G.DBR_NULL_REFERENCE=-10002]="DBR_NULL_REFERENCE",G[G.DBR_LICENSE_INVALID=-10003]="DBR_LICENSE_INVALID",G[G.DBR_LICENSE_EXPIRED=-10004]="DBR_LICENSE_EXPIRED",G[G.DBR_FILE_NOT_FOUND=-10005]="DBR_FILE_NOT_FOUND",G[G.DBR_FILETYPE_NOT_SUPPORTED=-10006]="DBR_FILETYPE_NOT_SUPPORTED",G[G.DBR_BPP_NOT_SUPPORTED=-10007]="DBR_BPP_NOT_SUPPORTED",G[G.DBR_INDEX_INVALID=-10008]="DBR_INDEX_INVALID",G[G.DBR_BARCODE_FORMAT_INVALID=-10009]="DBR_BARCODE_FORMAT_INVALID",G[G.DBR_CUSTOM_REGION_INVALID=-10010]="DBR_CUSTOM_REGION_INVALID",G[G.DBR_MAX_BARCODE_NUMBER_INVALID=-10011]="DBR_MAX_BARCODE_NUMBER_INVALID",G[G.DBR_IMAGE_READ_FAILED=-10012]="DBR_IMAGE_READ_FAILED",G[G.DBR_TIFF_READ_FAILED=-10013]="DBR_TIFF_READ_FAILED",G[G.DBR_QR_LICENSE_INVALID=-10016]="DBR_QR_LICENSE_INVALID",G[G.DBR_1D_LICENSE_INVALID=-10017]="DBR_1D_LICENSE_INVALID",G[G.DBR_DIB_BUFFER_INVALID=-10018]="DBR_DIB_BUFFER_INVALID",G[G.DBR_PDF417_LICENSE_INVALID=-10019]="DBR_PDF417_LICENSE_INVALID",G[G.DBR_DATAMATRIX_LICENSE_INVALID=-10020]="DBR_DATAMATRIX_LICENSE_INVALID",G[G.DBR_PDF_READ_FAILED=-10021]="DBR_PDF_READ_FAILED",G[G.DBR_PDF_DLL_MISSING=-10022]="DBR_PDF_DLL_MISSING",G[G.DBR_PAGE_NUMBER_INVALID=-10023]="DBR_PAGE_NUMBER_INVALID",G[G.DBR_CUSTOM_SIZE_INVALID=-10024]="DBR_CUSTOM_SIZE_INVALID",G[G.DBR_CUSTOM_MODULESIZE_INVALID=-10025]="DBR_CUSTOM_MODULESIZE_INVALID",G[G.DBR_RECOGNITION_TIMEOUT=-10026]="DBR_RECOGNITION_TIMEOUT",G[G.DBR_JSON_PARSE_FAILED=-10030]="DBR_JSON_PARSE_FAILED",G[G.DBR_JSON_TYPE_INVALID=-10031]="DBR_JSON_TYPE_INVALID",G[G.DBR_JSON_KEY_INVALID=-10032]="DBR_JSON_KEY_INVALID",G[G.DBR_JSON_VALUE_INVALID=-10033]="DBR_JSON_VALUE_INVALID",G[G.DBR_JSON_NAME_KEY_MISSING=-10034]="DBR_JSON_NAME_KEY_MISSING",G[G.DBR_JSON_NAME_VALUE_DUPLICATED=-10035]="DBR_JSON_NAME_VALUE_DUPLICATED",G[G.DBR_TEMPLATE_NAME_INVALID=-10036]="DBR_TEMPLATE_NAME_INVALID",G[G.DBR_JSON_NAME_REFERENCE_INVALID=-10037]="DBR_JSON_NAME_REFERENCE_INVALID",G[G.DBR_PARAMETER_VALUE_INVALID=-10038]="DBR_PARAMETER_VALUE_INVALID",G[G.DBR_DOMAIN_NOT_MATCHED=-10039]="DBR_DOMAIN_NOT_MATCHED",G[G.DBR_RESERVEDINFO_NOT_MATCHED=-10040]="DBR_RESERVEDINFO_NOT_MATCHED",G[G.DBR_AZTEC_LICENSE_INVALID=-10041]="DBR_AZTEC_LICENSE_INVALID",G[G.DBR_LICENSE_DLL_MISSING=-10042]="DBR_LICENSE_DLL_MISSING",G[G.DBR_LICENSEKEY_NOT_MATCHED=-10043]="DBR_LICENSEKEY_NOT_MATCHED",G[G.DBR_REQUESTED_FAILED=-10044]="DBR_REQUESTED_FAILED",G[G.DBR_LICENSE_INIT_FAILED=-10045]="DBR_LICENSE_INIT_FAILED",G[G.DBR_PATCHCODE_LICENSE_INVALID=-10046]="DBR_PATCHCODE_LICENSE_INVALID",G[G.DBR_POSTALCODE_LICENSE_INVALID=-10047]="DBR_POSTALCODE_LICENSE_INVALID",G[G.DBR_DPM_LICENSE_INVALID=-10048]="DBR_DPM_LICENSE_INVALID",G[G.DBR_FRAME_DECODING_THREAD_EXISTS=-10049]="DBR_FRAME_DECODING_THREAD_EXISTS",G[G.DBR_STOP_DECODING_THREAD_FAILED=-10050]="DBR_STOP_DECODING_THREAD_FAILED",G[G.DBR_SET_MODE_ARGUMENT_ERROR=-10051]="DBR_SET_MODE_ARGUMENT_ERROR",G[G.DBR_LICENSE_CONTENT_INVALID=-10052]="DBR_LICENSE_CONTENT_INVALID",G[G.DBR_LICENSE_KEY_INVALID=-10053]="DBR_LICENSE_KEY_INVALID",G[G.DBR_LICENSE_DEVICE_RUNS_OUT=-10054]="DBR_LICENSE_DEVICE_RUNS_OUT",G[G.DBR_GET_MODE_ARGUMENT_ERROR=-10055]="DBR_GET_MODE_ARGUMENT_ERROR",G[G.DBR_IRT_LICENSE_INVALID=-10056]="DBR_IRT_LICENSE_INVALID",G[G.DBR_MAXICODE_LICENSE_INVALID=-10057]="DBR_MAXICODE_LICENSE_INVALID",G[G.DBR_GS1_DATABAR_LICENSE_INVALID=-10058]="DBR_GS1_DATABAR_LICENSE_INVALID",G[G.DBR_GS1_COMPOSITE_LICENSE_INVALID=-10059]="DBR_GS1_COMPOSITE_LICENSE_INVALID",G[G.DBR_DOTCODE_LICENSE_INVALID=-10061]="DBR_DOTCODE_LICENSE_INVALID",G[G.DMERR_NO_LICENSE=-2e4]="DMERR_NO_LICENSE",G[G.DMERR_LICENSE_SYNC_FAILED=-20003]="DMERR_LICENSE_SYNC_FAILED",G[G.DMERR_TRIAL_LICENSE=-20010]="DMERR_TRIAL_LICENSE",G[G.DMERR_FAILED_TO_REACH_LTS=-20200]="DMERR_FAILED_TO_REACH_LTS"}(f||(f={})),function(G){G[G.IMRDT_IMAGE=1]="IMRDT_IMAGE",G[G.IMRDT_CONTOUR=2]="IMRDT_CONTOUR",G[G.IMRDT_LINESEGMENT=4]="IMRDT_LINESEGMENT",G[G.IMRDT_LOCALIZATIONRESULT=8]="IMRDT_LOCALIZATIONRESULT",G[G.IMRDT_REGIONOFINTEREST=16]="IMRDT_REGIONOFINTEREST",G[G.IMRDT_QUADRILATERAL=32]="IMRDT_QUADRILATERAL"}(a||(a={})),function(G){G[G.BF_ALL=-31457281]="BF_ALL",G[G.BF_ONED=1050623]="BF_ONED",G[G.BF_GS1_DATABAR=260096]="BF_GS1_DATABAR",G[G.BF_CODE_39=1]="BF_CODE_39",G[G.BF_CODE_128=2]="BF_CODE_128",G[G.BF_CODE_93=4]="BF_CODE_93",G[G.BF_CODABAR=8]="BF_CODABAR",G[G.BF_ITF=16]="BF_ITF",G[G.BF_EAN_13=32]="BF_EAN_13",G[G.BF_EAN_8=64]="BF_EAN_8",G[G.BF_UPC_A=128]="BF_UPC_A",G[G.BF_UPC_E=256]="BF_UPC_E",G[G.BF_INDUSTRIAL_25=512]="BF_INDUSTRIAL_25",G[G.BF_CODE_39_EXTENDED=1024]="BF_CODE_39_EXTENDED",G[G.BF_GS1_DATABAR_OMNIDIRECTIONAL=2048]="BF_GS1_DATABAR_OMNIDIRECTIONAL",G[G.BF_GS1_DATABAR_TRUNCATED=4096]="BF_GS1_DATABAR_TRUNCATED",G[G.BF_GS1_DATABAR_STACKED=8192]="BF_GS1_DATABAR_STACKED",G[G.BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL=16384]="BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL",G[G.BF_GS1_DATABAR_EXPANDED=32768]="BF_GS1_DATABAR_EXPANDED",G[G.BF_GS1_DATABAR_EXPANDED_STACKED=65536]="BF_GS1_DATABAR_EXPANDED_STACKED",G[G.BF_GS1_DATABAR_LIMITED=131072]="BF_GS1_DATABAR_LIMITED",G[G.BF_PATCHCODE=262144]="BF_PATCHCODE",G[G.BF_PDF417=33554432]="BF_PDF417",G[G.BF_QR_CODE=67108864]="BF_QR_CODE",G[G.BF_DATAMATRIX=134217728]="BF_DATAMATRIX",G[G.BF_AZTEC=268435456]="BF_AZTEC",G[G.BF_MAXICODE=536870912]="BF_MAXICODE",G[G.BF_MICRO_QR=1073741824]="BF_MICRO_QR",G[G.BF_MICRO_PDF417=524288]="BF_MICRO_PDF417",G[G.BF_GS1_COMPOSITE=-2147483648]="BF_GS1_COMPOSITE",G[G.BF_MSI_CODE=1048576]="BF_MSI_CODE",G[G.BF_NULL=0]="BF_NULL"}(o||(o={}));var c=function(G,k,U,H){return new(U||(U=Promise))(function(ee,ye){function Z(le){try{se(H.next(le))}catch(pe){ye(pe)}}function Q(le){try{se(H.throw(le))}catch(pe){ye(pe)}}function se(le){var pe;le.done?ee(le.value):(pe=le.value,pe instanceof U?pe:new U(function(Ce){Ce(pe)})).then(Z,Q)}se((H=H.apply(G,k||[])).next())})};const m=typeof self>"u",I=m?{}:self;class p{constructor(){this._canvasMaxWH="iPhone"==p.browserInfo.OS||"Android"==p.browserInfo.OS?2048:4096,this._instanceID=void 0,this.bSaveOriCanvas=!1,this.oriCanvas=null,this._1dMinConfidence=30,this.maxVideoCvsLength=3,this.videoCvses=[],this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.bFilterRegionInJs=!0,this._region=null,this._timeStartDecode=null,this._timeEnterInnerDBR=null,this._timeGetMessage=null,this._bUseWebgl=!0,this.decodeRecords={},this.bDestroyed=!1,this._setWarnnedEx=new Set,this._lastErrorCode=0,this._lastErrorString="",this._lastInnerDecodeDuration=0}static get version(){return this._version}static get productKeys(){return this._productKeys}static set productKeys(k){if("unload"!=this._loadWasmStatus)throw new Error("`productKeys` is not allowed to change after loadWasm is called.");p._productKeys=k}static get handshakeCode(){return this._productKeys}static set handshakeCode(k){if("unload"!=this._loadWasmStatus)throw new Error("`handshakeCode` is not allowed to change after loadWasm is called.");p._productKeys=k}static get organizationID(){return this._organizationID}static set organizationID(k){if("unload"!=this._loadWasmStatus)throw new Error("`organizationID` is not allowed to change after loadWasm is called.");"number"==typeof k&&(k=k.toString()),p._organizationID=k}static set sessionPassword(k){if("unload"!=this._loadWasmStatus)throw new Error("`sessionPassword` is not allowed to change after loadWasm is called.");p._sessionPassword=k}static get sessionPassword(){return this._sessionPassword}static detectEnvironment(){return c(this,void 0,void 0,function*(){let k={wasm:typeof WebAssembly<"u"&&(typeof navigator>"u"||!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent))),worker:typeof Worker<"u",getUserMedia:!(typeof navigator>"u"||!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),camera:!1,browser:this.browserInfo.browser,version:this.browserInfo.version,OS:this.browserInfo.OS};if(k.getUserMedia)try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(U=>{U.stop()}),k.camera=!0}catch{}return k})}static get engineResourcePath(){return this._engineResourcePath}static set engineResourcePath(k){if("unload"!=this._loadWasmStatus)throw new Error("`engineResourcePath` is not allowed to change after loadWasm is called.");if(null==k&&(k="./"),m)p._engineResourcePath=k;else{let U=document.createElement("a");U.href=k,p._engineResourcePath=U.href}this._engineResourcePath.endsWith("/")||(p._engineResourcePath+="/")}static get licenseServer(){return this._licenseServer}static set licenseServer(k){if("unload"!=this._loadWasmStatus)throw new Error("`licenseServer` is not allowed to change after loadWasm is called.");if(null==k)p._licenseServer=[];else{k instanceof Array||(k=[k]);for(let U=0;U<k.length;++U){if(!m){let H=document.createElement("a");H.href=k[U],k[U]=H.href}k[U].endsWith("/")||(k[U]+="/")}p._licenseServer=k}}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(k){if("unload"!=this._loadWasmStatus)throw new Error("`deviceFriendlyName` is not allowed to change after loadWasm is called.");p._deviceFriendlyName=k||""}static get _bUseFullFeature(){return this.__bUseFullFeature}static set _bUseFullFeature(k){if("unload"!=this._loadWasmStatus)throw new Error("`_bUseFullFeature` is not allowed to change after loadWasm is called.");p.__bUseFullFeature=k}get ifSaveOriginalImageInACanvas(){return this.bSaveOriCanvas}set ifSaveOriginalImageInACanvas(k){this.bSaveOriCanvas=k}getOriginalImageInACanvas(){return this.oriCanvas}set region(k){this._region=k}get region(){return this._region}static isLoaded(){return"loadSuccess"==this._loadWasmStatus}isContextDestroyed(){return this.bDestroyed}static get lastErrorCode(){return this._lastErrorCode}static get lastErrorString(){return this._lastErrorString}get lastErrorCode(){return this._lastErrorCode}get lastErrorString(){return this._lastErrorString}static loadWasm(){return c(this,void 0,void 0,function*(){let k,U=this.productKeys,H=(0==U.length||U.startsWith("P")||U.startsWith("L"))&&0==this.organizationID.length,ee=H||U.length>=8&&!U.startsWith("t")&&!U.startsWith("f")&&!U.startsWith("P")&&!U.startsWith("L")||0==U.length&&0!=this.organizationID.length;if(ee&&(I.crypto||(k="Please upgrade your browser to support handshake code."),I.crypto.subtle||(k="Require https to use handshake code in this browser.")),k){if(!H)throw new Error(k);H=!1,ee=!1,console.warn(k),this._lastErrorCode=f.DMERR_FAILED_TO_REACH_LTS,this._lastErrorString=k}return H&&(U="",console.warn("Automatically apply for a public trial license.")),yield new Promise((ye,Z)=>c(this,void 0,void 0,function*(){switch(this._loadWasmStatus){case"unload":{p._loadWasmStatus="loading";let Q=this.engineResourcePath+this._workerName;this.engineResourcePath.startsWith(location.origin)||(Q=yield fetch(Q).then(se=>se.blob()).then(se=>URL.createObjectURL(se))),p._dbrWorker=new Worker(Q),this._dbrWorker.onerror=se=>{p._loadWasmStatus="loadFail";let le=new Error(se.message);this._loadWasmErr=le;for(let pe of this._loadWasmCallbackArr)pe(le);this._loadWasmCallbackArr=[]},this._dbrWorker.onmessage=se=>c(this,void 0,void 0,function*(){let le=se.data?se.data:se;switch(le.type){case"log":this._onLog&&this._onLog(le.message);break;case"load":{le.message&&(le.message=le.message.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamsoft-barcode-reader/#javascript)"));let pe=!1;if(H&&(pe=!0),le.success){p._loadWasmStatus="loadSuccess",p._version=le.version+"(JS "+this._jsVersion+"."+this._jsEditVersion+")",this._onLog&&this._onLog("load dbr worker success");for(let Ce of this._loadWasmCallbackArr)Ce();this._loadWasmCallbackArr=[],this._dbrWorker.onerror=null,le.message&&console.warn(le.message)}else{let Ce=new Error(le.message);Ce.stack=le.stack+"\n"+Ce.stack,p._loadWasmStatus="loadFail",this._loadWasmErr=Ce;for(let Te of this._loadWasmCallbackArr)Te(Ce);this._loadWasmCallbackArr=[],pe||111==le.ltsErrorCode&&-1!=le.message.toLowerCase().indexOf("trial license")&&(pe=!0)}pe&&this.showDialog(le.success?"warn":"error",le.message);break}case"task":{let pe=le.id,Ce=le.body;try{this._taskCallbackMap.get(pe)(Ce),this._taskCallbackMap.delete(pe)}catch(Te){throw this._taskCallbackMap.delete(pe),Te}break}default:this._onLog&&this._onLog(se)}}),this._dbrWorker.postMessage({type:"loadWasm",bd:this._bWasmDebug,engineResourcePath:this.engineResourcePath,version:this._jsVersion,brtk:ee,bptk:H,pk:U,og:this.organizationID,dm:location.origin.startsWith("http")?location.origin:"https://localhost",bUseFullFeature:this._bUseFullFeature,browserInfo:this.browserInfo,deviceFriendlyName:this.deviceFriendlyName,ls:this.licenseServer,sp:this._sessionPassword,lm:this._limitModules,cw:this._chargeWay})}case"loading":this._loadWasmCallbackArr.push(Q=>{Q?Z(Q):ye()});break;case"loadSuccess":ye();break;case"loadFail":Z(this._loadWasmErr)}}))})}static showDialog(k,U){return c(this,void 0,void 0,function*(){if(!this._bNeverShowDialog)try{let H=yield fetch(p.engineResourcePath+"dls.license.dialog.html");if(!H.ok)throw Error("Get license dialog fail. Network Error: "+H.statusText);let ee=yield H.text();if(!ee.trim().startsWith("<"))throw Error("Get license dialog fail. Can't get valid HTMLElement.");let ye=document.createElement("div");ye.innerHTML=ee;let Z=[];for(let me=0;me<ye.childElementCount;++me){let Me=ye.children[me];Me instanceof HTMLStyleElement&&(Z.push(Me),document.head.append(Me))}let Q=1==ye.childElementCount?ye.children[0]:ye;Q.remove();let se,le,pe,Ce,Te,Be=[Q],xe=Q.children;for(let me of xe)Be.push(me);for(let me=0;me<Be.length;++me)for(let Me of Be[me].children)Be.push(Me);for(let me of Be)if(!se&&me.classList.contains("dls-license-mask"))se=me,me.addEventListener("click",Me=>{if(me==Me.target){Q.remove();for(let Oe of Z)Oe.remove()}});else if(!le&&me.classList.contains("dls-license-icon-close"))le=me,me.addEventListener("click",()=>{Q.remove();for(let Me of Z)Me.remove()});else if(!pe&&me.classList.contains("dls-license-icon-error"))pe=me,"error"!=k&&me.remove();else if(!Ce&&me.classList.contains("dls-license-icon-warn"))Ce=me,"warn"!=k&&me.remove();else if(!Te&&me.classList.contains("dls-license-msg-content")){Te=me;let Me=U;for(;Me;){let Oe=Me.indexOf("["),ze=Me.indexOf("]",Oe),Ze=Me.indexOf("(",ze),ot=Me.indexOf(")",Ze);if(-1==Oe||-1==ze||-1==Ze||-1==ot){me.appendChild(new Text(Me));break}Oe>0&&me.appendChild(new Text(Me.substring(0,Oe)));let ve=document.createElement("a"),Fe=Me.substring(Oe+1,ze);ve.innerText=Fe;let Ve=Me.substring(Ze+1,ot);ve.setAttribute("href",Ve),ve.setAttribute("target","_blank"),me.appendChild(ve),Me=Me.substring(ot+1)}}document.body.appendChild(Q)}catch(H){p._onLog&&p._onLog(H.message||H)}})}static createInstanceInWorker(k=!1){return c(this,void 0,void 0,function*(){return yield this.loadWasm(),yield new Promise((U,H)=>{let ee=p._nextTaskID++;this._taskCallbackMap.set(ee,ye=>{if(ye.success)return U(ye.instanceID);{let Z=new Error(ye.message);return Z.stack=ye.stack+"\n"+Z.stack,H(Z)}}),this._dbrWorker.postMessage({type:"createInstance",id:ee,productKeys:"",bScanner:k})})})}static createInstance(){return c(this,void 0,void 0,function*(){let k=new p;return k._instanceID=yield this.createInstanceInWorker(),k})}decode(k){return c(this,void 0,void 0,function*(){p._onLog&&p._onLog("decode(source: any)"),p._onLog&&(this._timeStartDecode=Date.now());{let U={};return!this.region||this.region instanceof Array||(U.region=JSON.parse(JSON.stringify(this.region))),k instanceof Blob?yield this._decode_Blob(k,U):k instanceof ArrayBuffer?yield this._decode_ArrayBuffer(k,U):k instanceof Uint8Array||k instanceof Uint8ClampedArray?yield this._decode_Uint8Array(k,U):k instanceof HTMLImageElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap?yield this._decode_Image(k,U):k instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&k instanceof OffscreenCanvas?yield this._decode_Canvas(k,U):k instanceof HTMLVideoElement?yield this._decode_Video(k,U):"string"==typeof k||k instanceof String?"data:image/"==k.substring(0,11)?yield this._decode_Base64(k,U):yield this._decode_Url(k,U):yield Promise.reject(TypeError("'_decode(source, config)': Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}})}decodeBase64String(k){return c(this,void 0,void 0,function*(){let U={};return!this.region||this.region instanceof Array||(U.region=JSON.parse(JSON.stringify(this.region))),this._decode_Base64(k,U)})}decodeUrl(k){return c(this,void 0,void 0,function*(){let U={};return!this.region||this.region instanceof Array||(U.region=JSON.parse(JSON.stringify(this.region))),this._decode_Url(k,U)})}_decodeBuffer_Uint8Array(k,U,H,ee,ye,Z){return c(this,void 0,void 0,function*(){return yield new Promise((Q,se)=>{let le=p._nextTaskID++;p._taskCallbackMap.set(le,pe=>{if(pe.success){let Ce,Te=p._onLog?Date.now():0;p._onLog&&p._onLog("worker return result: "+Te),this._lastInnerDecodeDuration=pe.duration;try{Ce=this._handleRetJsonString(pe.decodeReturn);for(let Be=0;Be<Ce.length;++Be){let xe=Ce[Be];try{xe.barcodeFormat&(o.BF_ONED|o.BF_GS1_DATABAR)&&xe.results[0].confidence<this._1dMinConfidence&&(Ce.splice(Be,1),--Be)}catch{}}}catch(Be){return se(Be)}if(p._onLog){let Be=Date.now();p._onLog("DBR time get result: "+Te),p._onLog("Handle image cost: "+(this._timeEnterInnerDBR-this._timeStartDecode)),p._onLog("DBR worker decode image cost: "+(Te-this._timeEnterInnerDBR)),p._onLog("DBR worker handle results: "+(Be-Te)),p._onLog("Total decode image cost: "+(Be-this._timeStartDecode))}return Q(Ce)}{let Ce=new Error(pe.message);return Ce.stack=pe.stack+"\n"+Ce.stack,se(Ce)}}),this._timeEnterInnerDBR=Date.now(),p._onLog&&p._onLog("Send buffer to worker:"+Date.now()),p._dbrWorker.postMessage({type:"decodeBuffer",id:le,instanceID:this._instanceID,body:{buffer:k,width:U,height:H,stride:ee,format:ye,config:Z}},[k.buffer]),p._onLog&&Z._timeEndGettingFrame&&p._onLog("decode image delay: "+(this._timeEnterInnerDBR-Z._timeEndGettingFrame))})})}_decodeBuffer_Blob(k,U,H,ee,ye,Z){return c(this,void 0,void 0,function*(){return p._onLog&&p._onLog("_decodeBuffer_Blob(buffer,width,height,stride,format)"),yield new Promise((Q,se)=>{let le=new FileReader;le.readAsArrayBuffer(k),le.onload=()=>{Q(le.result)},le.onerror=()=>{se(le.error)}}).then(Q=>this._decodeBuffer_Uint8Array(new Uint8Array(Q),U,H,ee,ye,Z))})}decodeBuffer(k,U,H,ee,ye,Z){return c(this,void 0,void 0,function*(){let Q;return p._onLog&&p._onLog("decodeBuffer(buffer,width,height,stride,format)"),p._onLog&&(this._timeStartDecode=Date.now()),k instanceof Uint8Array||k instanceof Uint8ClampedArray?Q=yield this._decodeBuffer_Uint8Array(k,U,H,ee,ye,Z):k instanceof ArrayBuffer?Q=yield this._decodeBuffer_Uint8Array(new Uint8Array(k),U,H,ee,ye,Z):k instanceof Blob&&(Q=yield this._decodeBuffer_Blob(k,U,H,ee,ye,Z)),Q})}_decodeFileInMemory_Uint8Array(k){return c(this,void 0,void 0,function*(){return yield new Promise((U,H)=>{let ee=p._nextTaskID++;p._taskCallbackMap.set(ee,ye=>{if(ye.success){let Z;this._lastInnerDecodeDuration=ye.duration;try{Z=this._handleRetJsonString(ye.decodeReturn)}catch(Q){return H(Q)}return U(Z)}{let Z=new Error(ye.message);return Z.stack=ye.stack+"\n"+Z.stack,H(Z)}}),p._dbrWorker.postMessage({type:"decodeFileInMemory",id:ee,instanceID:this._instanceID,body:{bytes:k}})})})}getRuntimeSettings(){return c(this,void 0,void 0,function*(){return yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success){let ye=JSON.parse(ee.results);return null!=this.userDefinedRegion&&(ye.region=JSON.parse(JSON.stringify(this.userDefinedRegion))),k(ye)}{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"getRuntimeSettings",id:H,instanceID:this._instanceID})})})}updateRuntimeSettings(k){return c(this,void 0,void 0,function*(){let U;if("string"==typeof k||k instanceof String)if("speed"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,U.region=H.region,U.deblurLevel=3,U.expectedBarcodesCount=0,U.localizationModes=[2,0,0,0,0,0,0,0]}else if("balance"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,U.region=H.region,U.deblurLevel=5,U.expectedBarcodesCount=512,U.localizationModes=[2,16,0,0,0,0,0,0]}else if("coverage"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,U.region=H.region}else U=JSON.parse(k);else{if("object"!=typeof k)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");if(U=JSON.parse(JSON.stringify(k)),U.region instanceof Array){let H=U.region;[H.regionLeft,H.regionTop,H.regionLeft,H.regionBottom,H.regionMeasuredByPercentage].some(ee=>void 0!==ee)&&(U.region={regionLeft:H.regionLeft||0,regionTop:H.regionTop||0,regionRight:H.regionRight||0,regionBottom:H.regionBottom||0,regionMeasuredByPercentage:H.regionMeasuredByPercentage||0})}}if(!p._bUseFullFeature){if(0!=(U.barcodeFormatIds&~(o.BF_ONED|o.BF_QR_CODE|o.BF_PDF417|o.BF_DATAMATRIX))||0!=U.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=U.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}if(this.bFilterRegionInJs){let H=U.region;if(H instanceof Array)throw Error("The `region` of type `Array` is only allowed in `BarcodeScanner`.");this.userDefinedRegion=JSON.parse(JSON.stringify(H)),this.region=(H.regionLeft||H.regionTop||H.regionRight||H.regionBottom||H.regionMeasuredByPercentage)&&(H.regionLeft||H.regionTop||100!=H.regionRight||100!=H.regionBottom||!H.regionMeasuredByPercentage)?H:null,U.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0}}else this.userDefinedRegion=null,this.region=null;return yield new Promise((H,ee)=>{let ye=p._nextTaskID++;p._taskCallbackMap.set(ye,Z=>{if(Z.success){try{this._handleRetJsonString(Z.updateReturn)}catch(Q){ee(Q)}return H()}{let Q=new Error(Z.message);return Q.stack=Z.stack+"\n"+Q.stack,ee(Q)}}),p._dbrWorker.postMessage({type:"updateRuntimeSettings",id:ye,instanceID:this._instanceID,body:{settings:JSON.stringify(U)}})})})}resetRuntimeSettings(){return c(this,void 0,void 0,function*(){return this.userDefinedRegion=null,this.region=null,yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success)return k();{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"resetRuntimeSettings",id:H,instanceID:this._instanceID})})})}outputSettingsToString(){return c(this,void 0,void 0,function*(){if(!p._bUseFullFeature)throw Error("outputSettingsToString() is not supported in the compact version. Please try the full-featured version.");return yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success)return k(ee.results);{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"outputSettingsToString",id:H,instanceID:this._instanceID})})})}initRuntimeSettingsWithString(k){return c(this,void 0,void 0,function*(){if(!p._bUseFullFeature)throw Error("initRuntimeSettingsWithString() is not supported in the compact version. Please try the full-featured version.");if("string"==typeof k||k instanceof String);else{if("object"!=typeof k)throw TypeError("'initRuntimeSettingstWithString(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");k=JSON.stringify(k)}return yield new Promise((U,H)=>{let ee=p._nextTaskID++;p._taskCallbackMap.set(ee,ye=>{if(ye.success){try{this._handleRetJsonString(ye.initReturn)}catch(Z){H(Z)}return U()}{let Z=new Error(ye.message);return Z.stack=ye.stack+"\n"+Z.stack,H(Z)}}),p._dbrWorker.postMessage({type:"initRuntimeSettingsWithString",id:ee,instanceID:this._instanceID,body:{settings:k}})})})}_decode_Blob(k,U){return c(this,void 0,void 0,function*(){p._onLog&&p._onLog("_decode_Blob(blob: Blob)");let H=null,ee=null;if(typeof createImageBitmap<"u")try{H=yield createImageBitmap(k)}catch{}var Z;H||(ee=yield(Z=k,new Promise((Q,se)=>{let le=URL.createObjectURL(Z),pe=new Image;pe.dbrObjUrl=le,pe.src=le,pe.onload=()=>{Q(pe)},pe.onerror=Ce=>{se(new Error("Can't convert blob to image : "+(Ce instanceof Event?Ce.type:Ce)))}})));let ye=yield this._decode_Image(H||ee,U);return H&&H.close(),ye})}_decode_ArrayBuffer(k,U){return c(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([k]),U)})}_decode_Uint8Array(k,U){return c(this,void 0,void 0,function*(){return yield this._decode_Blob(new Blob([k]),U)})}_decode_Image(k,U){return c(this,void 0,void 0,function*(){p._onLog&&p._onLog("_decode_Image(image: HTMLImageElement|ImageBitmap)"),U=U||{};let H,ee,ye=k instanceof HTMLImageElement?k.naturalWidth:k.width,Z=k instanceof HTMLImageElement?k.naturalHeight:k.height,Q=Math.max(ye,Z);if(Q>this._canvasMaxWH){let Ze=this._canvasMaxWH/Q;H=Math.round(ye*Ze),ee=Math.round(Z*Ze)}else H=ye,ee=Z;let se,le=0,pe=0,Ce=ye,Te=Z,Be=H,xe=ee,me=U.region;if(me){let Ze,ot,ve,Fe;me.regionMeasuredByPercentage?(Ze=me.regionLeft*H/100,ot=me.regionTop*ee/100,ve=me.regionRight*H/100,Fe=me.regionBottom*ee/100):(Ze=me.regionLeft,ot=me.regionTop,ve=me.regionRight,Fe=me.regionBottom),Be=ve-Ze,Ce=Math.round(Be/H*ye),xe=Fe-ot,Te=Math.round(xe/ee*Z),le=Math.round(Ze/H*ye),pe=Math.round(ot/ee*Z)}!this.bSaveOriCanvas&&I.OffscreenCanvas?se=new OffscreenCanvas(Be,xe):(se=document.createElement("canvas"),se.width=Be,se.height=xe);let Me,Oe=se.getContext("2d");0==le&&0==pe&&ye==Ce&&Z==Te&&ye==Be&&Z==xe?Oe.drawImage(k,0,0):Oe.drawImage(k,le,pe,Ce,Te,0,0,Be,xe),k.dbrObjUrl&&URL.revokeObjectURL(k.dbrObjUrl),me?(Me=JSON.parse(JSON.stringify(U)),delete Me.region):Me=U;let ze=yield this._decode_Canvas(se,Me);return p.fixResultLocationWhenFilterRegionInJs(me,ze,le,pe,Ce,Te,Be,xe),ze})}_decode_Canvas(k,U){return c(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Canvas(canvas:HTMLCanvasElement)"),k.crossOrigin&&"anonymous"!=k.crossOrigin)throw"cors";(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=k);let H=(k.dbrCtx2d||k.getContext("2d")).getImageData(0,0,k.width,k.height).data;return yield this._decodeBuffer_Uint8Array(H,k.width,k.height,4*k.width,u.IPF_ABGR_8888,U)})}handleVideoFrame(k,U){if(p._onLog&&p._onLog("handleVideoFrame(video)"),!(k instanceof HTMLVideoElement))throw TypeError("'handleVideoFrame(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(k.crossOrigin&&"anonymous"!=k.crossOrigin)throw"cors";U=U||{};const H=k.videoWidth,ee=k.videoHeight,ye=Math.max(H,ee);let Z,Q;if(ye>this._canvasMaxWH){let Me=this._canvasMaxWH/ye;Z=Math.round(H*Me),Q=Math.round(ee*Me)}else Z=H,Q=ee;let se=0,le=0,pe=H,Ce=ee,Te=H,Be=ee,xe=U.region;if(xe){let Me,Oe,ze,Ze;xe.regionMeasuredByPercentage?(Me=xe.regionLeft*Z/100,Oe=xe.regionTop*Q/100,ze=xe.regionRight*Z/100,Ze=xe.regionBottom*Q/100):(Me=xe.regionLeft,Oe=xe.regionTop,ze=xe.regionRight,Ze=xe.regionBottom),Te=ze-Me,pe=Math.round(Te/Z*H),Be=Ze-Oe,Ce=Math.round(Be/Q*ee),se=Math.round(Me/Z*H),le=Math.round(Oe/Q*ee)}let me=0==se&&0==le&&H==pe&&ee==Ce&&H==Te&&ee==Be;if(!this.bSaveOriCanvas&&this._bUseWebgl&&me){this.videoGlCvs||(this.videoGlCvs=I.OffscreenCanvas?new OffscreenCanvas(Te,Be):document.createElement("canvas"));const Me=this.videoGlCvs;Me.width==Te&&Me.height==Be||(Me.height=Be,Me.width=Te,this.videoGl&&this.videoGl.viewport(0,0,Te,Be));const Oe=this.videoGl||Me.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||Me.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0});if(!this.videoGl){this.videoGl=Oe;const Fe=Oe.createShader(Oe.VERTEX_SHADER);Oe.shaderSource(Fe,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    gl_Position = a_position;\n    v_uv = a_uv;\n}\n"),Oe.compileShader(Fe),Oe.getShaderParameter(Fe,Oe.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+Oe.getShaderInfoLog(Fe));const Ve=Oe.createShader(Oe.FRAGMENT_SHADER);Oe.shaderSource(Ve,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec4 sample =  texture2D(u_texture, v_uv);\n    float grey = 0.299 * sample.r + 0.587 * sample.g + 0.114 * sample.b;\n    gl_FragColor = vec4(grey, 0.0, 0.0, 1.0);\n}\n"),Oe.compileShader(Ve),Oe.getShaderParameter(Ve,Oe.COMPILE_STATUS)||console.error("An error occurred compiling the shaders: "+Oe.getShaderInfoLog(Ve));const Ye=Oe.createProgram();Oe.attachShader(Ye,Fe),Oe.attachShader(Ye,Ve),Oe.linkProgram(Ye),Oe.getProgramParameter(Ye,Oe.LINK_STATUS)||console.error("Unable to initialize the shader program: "+Oe.getProgramInfoLog(Ye)),Oe.useProgram(Ye),Oe.bindBuffer(Oe.ARRAY_BUFFER,Oe.createBuffer()),Oe.bufferData(Oe.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),Oe.STATIC_DRAW);const Ne=Oe.getAttribLocation(Ye,"a_position");Oe.enableVertexAttribArray(Ne),Oe.vertexAttribPointer(Ne,2,Oe.FLOAT,!1,16,0);const Je=Oe.getAttribLocation(Ye,"a_uv");Oe.enableVertexAttribArray(Je),Oe.vertexAttribPointer(Je,2,Oe.FLOAT,!1,16,8),Oe.activeTexture(Oe.TEXTURE0),Oe.bindTexture(Oe.TEXTURE_2D,Oe.createTexture()),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_S,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_T,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MIN_FILTER,Oe.NEAREST),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MAG_FILTER,Oe.NEAREST),Oe.uniform1i(Oe.getUniformLocation(Ye,"u_texture"),0)}(!this.glImgData||this.glImgData.length<Te*Be*4)&&(this.glImgData=new Uint8Array(Te*Be*4)),Oe.texImage2D(Oe.TEXTURE_2D,0,Oe.RGBA,Oe.RGBA,Oe.UNSIGNED_BYTE,k);let ze=p._onLog?Date.now():0;Oe.drawArrays(Oe.TRIANGLE_STRIP,0,4),p._onLog&&p._onLog("Grey cost: "+(Date.now()-ze));const Ze=this.glImgData;Oe.readPixels(0,0,Oe.drawingBufferWidth,Oe.drawingBufferHeight,Oe.RGBA,Oe.UNSIGNED_BYTE,Ze);let ot=p._onLog?Date.now():0,ve=new Uint8Array(new Uint32Array(Ze.buffer));return p._onLog&&p._onLog("Extract grey cost: "+(Date.now()-ot)),{bUseWebGL:!0,u8Gray:ve,dWidth:Te,dHeight:Be}}{let Me=null;if(this.bSaveOriCanvas)Me=document.createElement("canvas"),Me.width=Te,Me.height=Be,Me.dbrCtx2d=Me.getContext("2d");else{for(let ot of this.videoCvses)if(ot.width==Te&&ot.height==Be){Me=ot;break}Me||(I.OffscreenCanvas?Me=new OffscreenCanvas(Te,Be):(Me=document.createElement("canvas"),Me.width=Te,Me.height=Be),Me.dbrCtx2d=Me.getContext("2d"),this.videoCvses.length>=this.maxVideoCvsLength&&(this.videoCvses=this.videoCvses.slice(1)),this.videoCvses.push(Me))}const Oe=Me.dbrCtx2d;let ze;me?Oe.drawImage(k,0,0):Oe.drawImage(k,se,le,pe,Ce,0,0,Te,Be),xe?(ze=JSON.parse(JSON.stringify(U)),delete ze.region):ze=U;let Ze=Me.dbrCtx2d||Me.getContext("2d");return 0===Me.width||0===Me.height?null:{bUseWebGL:!1,data:Ze.getImageData(0,0,Me.width,Me.height).data,cvs:Me,config:ze,region:xe,sx:se,sy:le,sWidth:pe,sHeight:Ce,dWidth:Te,dHeight:Be}}}_decode_Video(k,U){return c(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Video(video)"),!(k instanceof HTMLVideoElement))throw TypeError("'_decode_Video(video [, config] )': Type of 'video' should be 'HTMLVideoElement'.");if(k.crossOrigin&&"anonymous"!=k.crossOrigin)throw"cors";let H=this.handleVideoFrame(k,U);if(H&&H.bUseWebGL){let{u8Gray:ee,dWidth:ye,dHeight:Z}=H;return yield this._decodeBuffer_Uint8Array(ee,ye,Z,ye,u.IPF_GrayScaled)}if(H&&!1===H.bUseWebGL){let{data:ee,cvs:ye,config:Z,region:Q,sx:se,sy:le,sWidth:pe,sHeight:Ce,dWidth:Te,dHeight:Be}=H;(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=ye);let xe=yield this._decodeBuffer_Uint8Array(ee,ye.width,ye.height,4*ye.width,u.IPF_ABGR_8888,Z);return p.fixResultLocationWhenFilterRegionInJs(Q,xe,se,le,pe,Ce,Te,Be),xe}})}_decode_Base64(k,U){return c(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Base64(base64Str)"),!("string"==typeof k||k instanceof String))return Promise.reject("'_decode_Base64(base64Str, config)': Type of 'base64Str' should be 'String'.");"data:image/"==k.substring(0,11)&&(k=k.substring(k.indexOf(",")+1));{let H=atob(k),ee=H.length,ye=new Uint8Array(ee);for(;ee--;)ye[ee]=H.charCodeAt(ee);return yield this._decode_Blob(new Blob([ye]),U)}})}_decode_Url(k,U){return c(this,void 0,void 0,function*(){if(p._onLog&&p._onLog("_decode_Url(url)"),!("string"==typeof k||k instanceof String))throw TypeError("'_decode_Url(url, config)': Type of 'url' should be 'String'.");{let H=yield new Promise((ee,ye)=>{let Z=new XMLHttpRequest;Z.open("GET",k,!0),Z.responseType="blob",Z.send(),Z.onloadend=()=>c(this,void 0,void 0,function*(){ee(Z.response)}),Z.onerror=()=>{ye(new Error("Network Error: "+Z.statusText))}});return yield this._decode_Blob(H,U)}})}_decode_FilePath(k,U){return c(this,void 0,void 0,function*(){throw p._onLog&&p._onLog("_decode_FilePath(path)"),Error("'_decode_FilePath(path, config)': The method is only supported in node environment.")})}static fixResultLocationWhenFilterRegionInJs(k,U,H,ee,ye,Z,Q,se){if(k&&U.length>0)for(let le of U){let pe=le.localizationResult;2==pe.resultCoordinateType&&(pe.x1*=.01*Q,pe.x2*=.01*Q,pe.x3*=.01*Q,pe.x4*=.01*Q,pe.y1*=.01*se,pe.y2*=.01*se,pe.y3*=.01*se,pe.y4*=.01*se);let Ce=Q/ye,Te=se/Z;pe.x1=pe.x1/Ce+H,pe.x2=pe.x2/Ce+H,pe.x3=pe.x3/Ce+H,pe.x4=pe.x4/Ce+H,pe.y1=pe.y1/Te+ee,pe.y2=pe.y2/Te+ee,pe.y3=pe.y3/Te+ee,pe.y4=pe.y4/Te+ee,2==pe.resultCoordinateType&&(pe.x1*=100/ye,pe.x2*=100/ye,pe.x3*=100/ye,pe.x4*=100/ye,pe.y1*=100/Z,pe.y2*=100/Z,pe.y3*=100/Z,pe.y4*=100/Z)}}static BarcodeReaderException(k,U){let H,ee=f.DBR_UNKNOWN;return"number"==typeof k?(ee=k,H=new Error(U)):H=new Error(k),H.code=ee,H}_handleRetJsonString(k){let U=f;if(k.textResults){for(let H=0;H<k.textResults.length;H++){let ee=k.textResults[H];try{let ye=ee.barcodeText,Z="";for(let Q=0;Q<ye.length;Q++)Z+=String.fromCharCode(ye[Q]);try{ee.barcodeText=decodeURIComponent(escape(Z))}catch{ee.barcodeText=Z}}catch{ee.barcodeText=""}if(null!=ee.exception){this._setWarnnedEx.has(ee.exception)||(this._setWarnnedEx.add(ee.exception),console.warn(ee.exception));let ye={};ee.exception.split(";").forEach(Z=>{let Q=Z.indexOf(":");ye[Z.substring(0,Q)]=Z.substring(Q+1)}),ee.exception=ye}}return this.decodeRecords=k.decodeRecords?k.decodeRecords:{},this._lastErrorCode=k.exception,this._lastErrorString=k.description,k.textResults}if(k.exception==U.DBR_SUCCESS)return k.data;throw p.BarcodeReaderException(k.exception,k.description)}setModeArgument(k,U,H,ee){return c(this,void 0,void 0,function*(){return yield new Promise((ye,Z)=>{let Q=p._nextTaskID++;p._taskCallbackMap.set(Q,se=>{if(se.success){try{this._handleRetJsonString(se.setReturn)}catch(le){return Z(le)}return ye()}{let le=new Error(se.message);return le.stack=se.stack+"\n"+le.stack,Z(le)}}),p._dbrWorker.postMessage({type:"setModeArgument",id:Q,instanceID:this._instanceID,body:{modeName:k,index:U,argumentName:H,argumentValue:ee}})})})}getModeArgument(k,U,H){return c(this,void 0,void 0,function*(){return yield new Promise((ee,ye)=>{let Z=p._nextTaskID++;p._taskCallbackMap.set(Z,Q=>{if(Q.success){let se;try{se=this._handleRetJsonString(Q.getReturn)}catch(le){return ye(le)}return ee(se)}{let se=new Error(Q.message);return se.stack=Q.stack+"\n"+se.stack,ye(se)}}),p._dbrWorker.postMessage({type:"getModeArgument",id:Z,instanceID:this._instanceID,body:{modeName:k,index:U,argumentName:H}})})})}getIntermediateResults(){return c(this,void 0,void 0,function*(){return yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success)return k(ee.results);{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"getIntermediateResults",id:H,instanceID:this._instanceID})})})}getIntermediateCanvas(){return c(this,void 0,void 0,function*(){let k=yield this.getIntermediateResults(),U=[];for(let H of k)if(H.dataType==a.IMRDT_IMAGE)for(let ee of H.results){const ye=ee.bytes;let Z;switch(p._onLog&&p._onLog(" "+ye.length+" "+ye.byteLength+" "+ee.width+" "+ee.height+" "+ee.stride+" "+ee.format),ee.format){case u.IPF_ABGR_8888:Z=new Uint8ClampedArray(ye);break;case u.IPF_RGB_888:{const le=ye.length/3;Z=new Uint8ClampedArray(4*le);for(let pe=0;pe<le;++pe)Z[4*pe]=ye[3*pe+2],Z[4*pe+1]=ye[3*pe+1],Z[4*pe+2]=ye[3*pe],Z[4*pe+3]=255;break}case u.IPF_GrayScaled:{const le=ye.length;Z=new Uint8ClampedArray(4*le);for(let pe=0;pe<le;pe++)Z[4*pe]=Z[4*pe+1]=Z[4*pe+2]=ye[pe],Z[4*pe+3]=255;break}case u.IPF_Binary:case u.IPF_BinaryInverted:{ee.width=8*ee.stride,ee.height=ye.length/ee.stride;const le=ye.length;Z=new Uint8ClampedArray(8*le*4);for(let pe=0;pe<le;pe++){let Ce=ye[pe];for(let Te=0;Te<8;++Te)Z[4*(8*pe+Te)]=Z[4*(8*pe+Te)+1]=Z[4*(8*pe+Te)+2]=(128&Ce)/128*255,Z[4*(8*pe+Te)+3]=255,Ce<<=1}break}default:console.warn("unknow intermediate image",ee)}if(!Z)continue;let Q=new ImageData(Z,ee.width,ee.height),se=document.createElement("canvas");se.width=ee.width,se.height=ee.height,se.getContext("2d").putImageData(Q,0,0),U.push(se)}return U})}destroy(){return p._onLog&&p._onLog("destroy()"),this.bDestroyed=!0,new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success)return k();{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"destroy",id:H,instanceID:this._instanceID})})}}p._jsVersion="8.6.1",p._jsEditVersion="20210628",p._version="loading...(JS "+p._jsVersion+"."+p._jsEditVersion+")",p._productKeys=m||!document.currentScript?"":document.currentScript.getAttribute("data-productKeys")||document.currentScript.getAttribute("data-licenseKey")||document.currentScript.getAttribute("data-handshakeCode")||"",p._organizationID=m||!document.currentScript?"":document.currentScript.getAttribute("data-organizationID")||"",p._sessionPassword=m||!document.currentScript?"":document.currentScript.getAttribute("data-sessionPassword")||"",p.browserInfo=function(){if(!m){var G={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS","Linux"==this.OS&&-1!=navigator.userAgent.indexOf("Windows NT")&&(this.OS="HarmonyOS")},searchString:function(k){for(var U=0;U<k.length;U++){var H=k[U].string,ee=k[U].prop;if(this.versionSearchString=k[U].versionSearch||k[U].identity,H){if(-1!=H.indexOf(k[U].subString))return k[U].identity}else if(ee)return k[U].identity}},searchVersion:function(k){var U=k.indexOf(this.versionSearchString);if(-1!=U)return parseFloat(k.substring(U+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],dataOS:[{string:navigator.userAgent,subString:"HarmonyOS",identity:"HarmonyOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return G.init(),{browser:G.browser,version:G.version,OS:G.OS}}if(m)return{browser:"ssr",version:0,OS:"ssr"};{const k=i(4);return{browser:"node",version:process.version.substring(1),OS:k&&k.platform?k.platform()+k.release():"Unknown"}}}(),p._workerName="dbr-"+p._jsVersion+".worker.js",p._engineResourcePath=(()=>{if(!m&&document.currentScript){let G=document.currentScript.src,k=G.indexOf("?");if(-1!=k)G=G.substring(0,k);else{let U=G.indexOf("#");-1!=U&&(G=G.substring(0,U))}return G.substring(0,G.lastIndexOf("/")+1)}return"./"})(),p._licenseServer=[],p._deviceFriendlyName="",p._isShowRelDecodeTimeInResults=!1,p._bWasmDebug=!1,p._bNeverShowDialog=!1,p.__bUseFullFeature=!0,p._nextTaskID=0,p._taskCallbackMap=new Map,p._loadWasmStatus="unload",p._loadWasmCallbackArr=[],p._lastErrorCode=0,p._lastErrorString="",p._loadWasmErr=null;var g=function(G,k,U,H){return new(U||(U=Promise))(function(ee,ye){function Z(le){try{se(H.next(le))}catch(pe){ye(pe)}}function Q(le){try{se(H.throw(le))}catch(pe){ye(pe)}}function se(le){var pe;le.done?ee(le.value):(pe=le.value,pe instanceof U?pe:new U(function(Ce){Ce(pe)})).then(Z,Q)}se((H=H.apply(G,k||[])).next())})};const C=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name&&typeof HTMLCanvasElement>"u");class _ extends p{constructor(){super(),this.styleEls=[],this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this._singleFrameMode=!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),this._singleFrameModeIpt=(()=>{let k=document.createElement("input");return k.setAttribute("type","file"),k.setAttribute("accept","image/*"),k.setAttribute("capture",""),k.addEventListener("change",()=>g(this,void 0,void 0,function*(){let U=k.files[0];k.value="";let H=yield this.decode(U);for(let ee of H)delete ee.bUnduplicated;if(this._drawRegionsults(H),this.onFrameRead&&this._isOpen&&!this._bPauseScan&&this.onFrameRead(H),this.onUnduplicatedRead&&this._isOpen&&!this._bPauseScan)for(let ee of H)this.onUnduplicatedRead(ee.barcodeText,ee);yield this.clearMapDecodeRecord()})),k})(),this._clickIptSingleFrameMode=()=>{this._singleFrameModeIpt.click()},this.intervalTime=0,this._isOpen=!1,this._bWorkerDecodeBuffer=!1,this._intervalGetVideoFrame=0,this._getVideoFrameMode=4,this.loopGetFrameTimes=1,this._countLoopGetFrame=0,this.queue_handledFrame=[],this.array_getFrameTimeCost=[],this.array_decodeFrameTimeCost=[],this._indexCurrentDecodingFrame=0,this._timeEndGettingFrame=null,this._bPauseScan=!1,this._lastDeviceId=void 0,this._intervalDetectVideoPause=1e3,this._vc_bPlayingVideoBeforeHide=!1,this._ev_documentHideEvent=()=>{"visible"===document.visibilityState?this._vc_bPlayingVideoBeforeHide&&("Firefox"==p.browserInfo.browser?this.play():this._video.play(),this._vc_bPlayingVideoBeforeHide=!1):this._video&&!this._video.paused&&(this._vc_bPlayingVideoBeforeHide=!0,this._video.pause())},this._video=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._bgLoading=null,this._bgCamera=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._soundOnSuccessfullRead=new Audio("data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"),this.bPlaySoundOnSuccessfulRead=!1,this.bVibrateOnSuccessfulRead=!1,this.vibrateDuration=300,this._allCameras=[],this._currentCamera=null,this._videoTrack=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.barcodeFillStyle="rgba(254,180,32,0.3)",this.barcodeStrokeStyle="rgba(254,180,32,0.9)",this.barcodeLineWidth=1,this.beingLazyDrawRegionsults=!1,this._indexVideoRegion=0,this._onCameraSelChange=()=>{this.play(this._selCam.value).then(()=>{this._isOpen||this.stop()})},this._onResolutionSelChange=()=>{let k,U;if(this._selRsl&&-1!=this._selRsl.selectedIndex){let H=this._selRsl.options[this._selRsl.selectedIndex];k=H.getAttribute("data-width"),U=H.getAttribute("data-height")}this.play(void 0,k,U).then(()=>{this._isOpen||this.stop()})},this._onCloseBtnClick=()=>{this.hide()},this.iPlayRound=0,this.promisePlay=null}static get defaultUIElementURL(){var k;return null===(k=this._defaultUIElementURL)||void 0===k?void 0:k.replace("@engineResourcePath/",p.engineResourcePath)}static set defaultUIElementURL(k){this._defaultUIElementURL=k}getUIElement(){return this.UIElement}setUIElement(k){return g(this,void 0,void 0,function*(){if("string"==typeof k||k instanceof String){if(!k.trim().startsWith("<")){let H=yield fetch(k);if(!H.ok)throw Error("setUIElement(elementOrUrl): Network Error: "+H.statusText);k=yield H.text()}if(!k.trim().startsWith("<"))throw Error("setUIElement(elementOrUrl): Can't get valid HTMLElement.");let U=document.createElement("div");U.innerHTML=k;for(let H=0;H<U.childElementCount;++H){let ee=U.children[H];ee instanceof HTMLStyleElement&&(this.styleEls.push(ee),document.head.append(ee))}(k=1==U.childElementCount?U.children[0]:U).remove()}this.UIElement=k})}get singleFrameMode(){return this._singleFrameMode}set singleFrameMode(k){if(this._isOpen)throw new Error("`singleFrameMode` is not allowed to change when scanner is open.");this._singleFrameMode=k,this._singleFrameMode&&g(this,void 0,void 0,function*(){let U=yield this.getScanSettings();U.oneDTrustFrameCount=1,yield this.updateScanSettings(U)})}_assertOpen(){if(!this._isOpen)throw Error("The scanner is not open.")}get soundOnSuccessfullRead(){return this._soundOnSuccessfullRead}set soundOnSuccessfullRead(k){this._soundOnSuccessfullRead=k instanceof HTMLAudioElement?k:new Audio(k)}get whenToPlaySoundforSuccessfulRead(){return!0===this.bPlaySoundOnSuccessfulRead?"frame":this.bPlaySoundOnSuccessfulRead?this.bPlaySoundOnSuccessfulRead:"never"}set whenToPlaySoundforSuccessfulRead(k){this.bPlaySoundOnSuccessfulRead="never"!==k&&k}get whenToVibrateforSuccessfulRead(){return!0===this.bVibrateOnSuccessfulRead?"frame":this.bVibrateOnSuccessfulRead?this.bVibrateOnSuccessfulRead:"never"}set whenToVibrateforSuccessfulRead(k){this.bVibrateOnSuccessfulRead="never"!==k&&k}set region(k){this._region=k,this.singleFrameMode||(this.beingLazyDrawRegionsults=!0,setTimeout(()=>{this.beingLazyDrawRegionsults&&this._drawRegionsults()},500))}get region(){return this._region}static createInstance(k){return g(this,void 0,void 0,function*(){if(C)throw new Error("`BarcodeScanner` is not supported in Node.js.");let U=new _;U._instanceID=yield _.createInstanceInWorker(!0),("string"==typeof k||k instanceof String)&&(k=JSON.parse(k));for(let H in k)U[H]=k[H];return yield U.setUIElement(this.defaultUIElementURL),U.singleFrameMode&&console.warn("The `navigator.mediaDevices.getUserMedia` is unavailable. automatically change to `singleFrameMode`."),U.singleFrameMode||(yield U.updateRuntimeSettings("single")),document.addEventListener("visibilitychange",U._ev_documentHideEvent),U})}decode(k){return super.decode(k)}decodeBase64String(k){return super.decodeBase64String(k)}decodeUrl(k){return super.decodeUrl(k)}decodeBuffer(k,U,H,ee,ye,Z){return super.decodeBuffer(k,U,H,ee,ye,Z)}decodeCurrentFrame(k){return g(this,void 0,void 0,function*(){return this._assertOpen(),this._decode_Video(this._video,k)})}clearMapDecodeRecord(){return g(this,void 0,void 0,function*(){return yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success)return k();{let ye=new Error(ee.message);return ye.stack=ee.stack+"\n"+ye.stack,U(ye)}}),p._dbrWorker.postMessage({type:"clearMapDecodeRecord",id:H,instanceID:this._instanceID})})})}static isRegionSinglePreset(k){return JSON.stringify(k)==JSON.stringify(this.singlePresetRegion)}static isRegionNormalPreset(k){return 0==k.regionLeft&&0==k.regionTop&&0==k.regionRight&&0==k.regionBottom&&0==k.regionMeasuredByPercentage}updateRuntimeSettings(k){return g(this,void 0,void 0,function*(){let U;if("string"==typeof k||k instanceof String)if("speed"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,_.isRegionSinglePreset(H.region)||(U.region=H.region)}else if("balance"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,_.isRegionSinglePreset(H.region)||(U.region=H.region),U.deblurLevel=3,U.expectedBarcodesCount=512,U.localizationModes=[2,16,0,0,0,0,0,0],U.timeout=1e5}else if("coverage"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,_.isRegionSinglePreset(H.region)||(U.region=H.region),U.deblurLevel=5,U.expectedBarcodesCount=512,U.scaleDownThreshold=1e5,U.localizationModes=[2,16,4,8,0,0,0,0],U.timeout=1e5}else if("single"==k){let H=yield this.getRuntimeSettings();yield this.resetRuntimeSettings(),U=yield this.getRuntimeSettings(),U.barcodeFormatIds=H.barcodeFormatIds,U.barcodeFormatIds_2=H.barcodeFormatIds_2,U.region=_.isRegionNormalPreset(H.region)?JSON.parse(JSON.stringify(_.singlePresetRegion)):H.region,U.expectedBarcodesCount=1,U.localizationModes=[16,2,0,0,0,0,0,0],U.barcodeZoneMinDistanceToImageBorders=0}else U=JSON.parse(k);else{if("object"!=typeof k)throw TypeError("'UpdateRuntimeSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");if(U=JSON.parse(JSON.stringify(k)),U.region instanceof Array){let H=k.region;[H.regionLeft,H.regionTop,H.regionLeft,H.regionBottom,H.regionMeasuredByPercentage].some(ee=>void 0!==ee)&&(U.region={regionLeft:H.regionLeft||0,regionTop:H.regionTop||0,regionRight:H.regionRight||0,regionBottom:H.regionBottom||0,regionMeasuredByPercentage:H.regionMeasuredByPercentage||0})}}if(!p._bUseFullFeature){if(0!=(U.barcodeFormatIds&~(o.BF_ONED|o.BF_QR_CODE|o.BF_PDF417|o.BF_DATAMATRIX))||0!=U.barcodeFormatIds_2)throw Error("Some of the specified barcode formats are not supported in the compact version. Please try the full-featured version.");if(0!=U.intermediateResultTypes)throw Error("Intermediate results is not supported in the compact version. Please try the full-featured version.")}{let H=U.region;if(this.userDefinedRegion=this.bFilterRegionInJs?JSON.parse(JSON.stringify(H)):null,H instanceof Array)if(H.length){for(let ee=0;ee<H.length;++ee){let ye=H[ee];ye&&((ye.regionLeft||ye.regionTop||ye.regionRight||ye.regionBottom||ye.regionMeasuredByPercentage)&&(ye.regionLeft||ye.regionTop||100!=ye.regionRight||100!=ye.regionBottom||!ye.regionMeasuredByPercentage)||(H[ee]=null))}this.region=H}else this.region=null;else this.region=(H.regionLeft||H.regionTop||H.regionRight||H.regionBottom||H.regionMeasuredByPercentage)&&(H.regionLeft||H.regionTop||100!=H.regionRight||100!=H.regionBottom||!H.regionMeasuredByPercentage)?H:null;this.bFilterRegionInJs&&(U.region={regionLeft:0,regionTop:0,regionRight:0,regionBottom:0,regionMeasuredByPercentage:0})}yield new Promise((H,ee)=>{let ye=p._nextTaskID++;p._taskCallbackMap.set(ye,Z=>{if(Z.success){try{this._handleRetJsonString(Z.updateReturn)}catch(Q){ee(Q)}return H()}{let Q=new Error(Z.message);return Q.stack=Z.stack+"\n"+Q.stack,ee(Q)}}),p._dbrWorker.postMessage({type:"updateRuntimeSettings",id:ye,instanceID:this._instanceID,body:{settings:JSON.stringify(U)}})}),"single"==k&&(yield this.setModeArgument("BinarizationModes",0,"EnableFillBinaryVacancy","0"),yield this.setModeArgument("LocalizationModes",0,"ScanDirection","2"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeX","71"),yield this.setModeArgument("BinarizationModes",0,"BlockSizeY","71"))})}_bindUI(){if(!this.UIElement)throw new Error("Need to define `UIElement` before opening.");let k=[this.UIElement],U=this.UIElement.children;for(let ee of U)k.push(ee);for(let ee=0;ee<k.length;++ee)for(let ye of k[ee].children)k.push(ye);let H=null;for(let ee of k)!this._video&&ee.classList.contains("dbrScanner-video")?(this._video=ee,this._video.setAttribute("playsinline","true")):!this._cvsDrawArea&&ee.classList.contains("dbrScanner-cvs-drawarea")?this._cvsDrawArea=ee:!this._divScanArea&&ee.classList.contains("dbrScanner-cvs-scanarea")?this._divScanArea=ee:!this._divScanLight&&ee.classList.contains("dbrScanner-scanlight")?this._divScanLight=ee:!this._bgLoading&&ee.classList.contains("dbrScanner-bg-loading")?this._bgLoading=ee:!this._bgCamera&&ee.classList.contains("dbrScanner-bg-camera")?this._bgCamera=ee:!this._selCam&&ee.classList.contains("dbrScanner-sel-camera")?this._selCam=ee:!this._selRsl&&ee.classList.contains("dbrScanner-sel-resolution")?(this._selRsl=ee,this._selRsl.options.length||(this._selRsl.innerHTML=[this._optGotRsl?"":'<option class="dbrScanner-opt-gotResolution" value="got"></option>','<option data-width="1920" data-height="1080">ask 1920 x 1080</option>','<option data-width="1280" data-height="720">ask 1280 x 720</option>','<option data-width="640" data-height="480">ask 640 x 480</option>'].join(""),this._optGotRsl=this._optGotRsl||this._selRsl.options[0])):!this._optGotRsl&&ee.classList.contains("dbrScanner-opt-gotResolution")?this._optGotRsl=ee:!this._btnClose&&ee.classList.contains("dbrScanner-btn-close")?this._btnClose=ee:!this._video&&ee.classList.contains("dbrScanner-existingVideo")?(this._video=ee,this._video.setAttribute("playsinline","true"),this.singleFrameMode=!1):!H&&ee.tagName&&"video"==ee.tagName.toLowerCase()&&(H=ee);if(!this._video&&H&&(this._video=H),this.singleFrameMode?(this._video&&(this._video.addEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="pointer",this._video.setAttribute("title","Take a photo")),this._cvsDrawArea&&(this._cvsDrawArea.addEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="pointer",this._cvsDrawArea.setAttribute("title","Take a photo")),this._divScanArea&&(this._divScanArea.addEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="pointer",this._divScanArea.setAttribute("title","Take a photo")),this._bgCamera&&(this._bgCamera.style.display="")):this._bgLoading&&(this._bgLoading.style.display=""),this._selCam&&this._selCam.addEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.addEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.addEventListener("click",this._onCloseBtnClick),!this._video)throw this._unbindUI(),Error("Can not find HTMLVideoElement with class `dbrScanner-video`.");this._isOpen=!0}_unbindUI(){this._clearRegionsults(),this.singleFrameMode?(this._video&&(this._video.removeEventListener("click",this._clickIptSingleFrameMode),this._video.style.cursor="",this._video.removeAttribute("title")),this._cvsDrawArea&&(this._cvsDrawArea.removeEventListener("click",this._clickIptSingleFrameMode),this._cvsDrawArea.style.cursor="",this._cvsDrawArea.removeAttribute("title")),this._divScanArea&&(this._divScanArea.removeEventListener("click",this._clickIptSingleFrameMode),this._divScanArea.style.cursor="",this._divScanArea.removeAttribute("title")),this._bgCamera&&(this._bgCamera.style.display="none")):this._bgLoading&&(this._bgLoading.style.display="none"),this._selCam&&this._selCam.removeEventListener("change",this._onCameraSelChange),this._selRsl&&this._selRsl.removeEventListener("change",this._onResolutionSelChange),this._btnClose&&this._btnClose.removeEventListener("click",this._onCloseBtnClick),this._video=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._isOpen=!1}_renderSelCameraInfo(){if(this._selCam&&(this._selCam.innerHTML=""),this._selCam){let k;for(let U of this._allCameras){let H=document.createElement("option");H.value=U.deviceId,H.innerText=U.label,this._selCam.append(H),U.deviceId&&this._currentCamera&&this._currentCamera.deviceId==U.deviceId&&(k=H)}this._selCam.value=k?k.value:""}}getAllCameras(){return g(this,void 0,void 0,function*(){const k=yield navigator.mediaDevices.enumerateDevices(),U=[],H=[];if(this._allCameras)for(let ee of this._allCameras)ee._checked&&H.push(ee);for(let ee=0;ee<k.length;ee++){let ye,Z=k[ee];if("videoinput"==Z.kind){for(let Q of H)Z.deviceId==Q.deviceId&&(ye=Q);ye||(ye={},ye.deviceId=Z.deviceId,ye.label=Z.label?Z.label:"camera "+ee),U.push(ye)}}return this._allCameras=U,p._onLog&&p._onLog(JSON.stringify(this._allCameras)),Promise.resolve(U)})}getCurrentCamera(){return g(this,void 0,void 0,function*(){return this._currentCamera})}setCurrentCamera(k){return g(this,void 0,void 0,function*(){return yield this.play(k.deviceId||k)})}getResolution(){return this._isOpen?[this._video.videoWidth,this._video.videoHeight]:null}setResolution(k,U){return g(this,void 0,void 0,function*(){let H,ee;return this._isOpen?(k instanceof Array?(H=k[0],ee=k[1]):(H=k,ee=U),yield this.play(null,H,ee)):yield Promise.reject(new Error("The camera is not open."))})}getScanSettings(){return g(this,void 0,void 0,function*(){return yield new Promise((k,U)=>{let H=p._nextTaskID++;p._taskCallbackMap.set(H,ee=>{if(ee.success){let ye=ee.results;return ye.intervalTime=this.intervalTime,k(ye)}{let ye=new Error(ee.message);return ye.stack+="\n"+ee.stack,U(ye)}}),p._dbrWorker.postMessage({type:"getScanSettings",id:H,instanceID:this._instanceID})})})}updateScanSettings(k){return g(this,void 0,void 0,function*(){return this.intervalTime=k.intervalTime,yield new Promise((U,H)=>{let ee=p._nextTaskID++;p._taskCallbackMap.set(ee,ye=>{if(ye.success)return U();{let Z=new Error(ye.message);return Z.stack+="\n"+ye.stack,H(Z)}}),_._dbrWorker.postMessage({type:"updateScanSettings",id:ee,instanceID:this._instanceID,body:{settings:k}})})})}getVideoSettings(){return JSON.parse(JSON.stringify(this.videoSettings))}updateVideoSettings(k){return this.videoSettings=JSON.parse(JSON.stringify(k)),this._lastDeviceId=null,this._isOpen?this.play():Promise.resolve()}isOpen(){return this._isOpen}_show(){this.UIElement.parentNode||(this.UIElement.style.position="fixed",this.UIElement.style.left="0",this.UIElement.style.top="0",document.body.append(this.UIElement)),"none"==this.UIElement.style.display&&(this.UIElement.style.display="")}stop(){this._video&&this._video.srcObject&&(p._onLog&&p._onLog("======stop video========"),this._video.srcObject.getTracks().forEach(k=>{k.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null),this._video&&this._video.classList.contains("dbrScanner-existingVideo")&&(p._onLog&&p._onLog("======stop existing video========"),this._video.pause(),this._video.currentTime=0),this._bgLoading&&(this._bgLoading.style.animationPlayState=""),this._divScanLight&&(this._divScanLight.style.display="none"),this._drawRegionsults(),this.queue_handledFrame.length=0,this.array_decodeFrameTimeCost.length=0,this.array_getFrameTimeCost.length=0,this._intervalGetVideoFrame=0}pause(){this._video&&this._video.pause(),this._divScanLight&&(this._divScanLight.style.display="none")}play(k,U,H){return g(this,void 0,void 0,function*(){if(this._assertOpen(),this._video&&this.videoSrc){yield new Promise((Z,Q)=>{this._video.onloadedmetadata=()=>g(this,void 0,void 0,function*(){this._video.onloadedmetadata=null,yield this._video.play(),Z()}),"string"==typeof this.videoSrc||this.videoSrc instanceof String?this._video.src=this.videoSrc:this._video.srcObject=this.videoSrc,setTimeout(()=>Q(new Error("Failed to play video. Timeout.")),4e3)});let ye={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(ye)},0),ye}if(this.singleFrameMode)return this._clickIptSingleFrameMode(),{width:0,height:0};const ee=++this.iPlayRound;return this.promisePlay&&(yield this.promisePlay,ee<this.iPlayRound)?{width:this._video.videoWidth,height:this._video.videoHeight}:(this.promisePlay=(()=>g(this,void 0,void 0,function*(){var ye;try{this._video&&this._video.srcObject&&this.stop(),p._onLog&&p._onLog("======before video========"),yield this.getAllCameras();let Z=()=>{if(this.bDestroyed)throw pe&&pe.getTracks().forEach(ve=>{ve.stop()}),this._video.srcObject=null,this._videoTrack=null,this._currentCamera=null,new Error("The BarcodeScanner instance has been destroyed.")};const Q=JSON.parse(JSON.stringify(this.videoSettings));let se;"boolean"==typeof Q.video&&(Q.video={}),U&&(Q.video.width={ideal:U}),H&&(Q.video.height={ideal:H});const le=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"];let pe,Ce=()=>{for(let ve of this._allCameras){let Fe=ve.label.toLowerCase();if(Fe&&le.some(Ve=>-1!=Fe.indexOf(Ve))&&/\b0(\b)?/.test(Fe)){delete Q.video.facingMode,Q.video.deviceId={ideal:ve.deviceId};break}}Q.video.deviceId||-1==["Android","HarmonyOS"].indexOf(p.browserInfo.OS)||(delete Q.video.facingMode,Q.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})};if(k)delete Q.video.facingMode,Q.video.deviceId={exact:k},this._lastDeviceId=k;else if(!Q.video.deviceId)if(this._lastDeviceId)delete Q.video.facingMode,Q.video.deviceId={exact:this._lastDeviceId};else if(Q.video.facingMode){let ve=Q.video.facingMode;ve instanceof Array&&ve.length&&(ve=ve[0]),ve=ve.exact||ve.ideal||ve,"environment"===ve&&(se=!!Q.video.facingMode,Ce())}p._onLog&&p._onLog("======try getUserMedia========");let Te,Be=[0,500],xe=null,me=null,Me=ve=>g(this,void 0,void 0,function*(){for(let Fe of Be){Z(),Fe&&(yield new Promise(Ve=>setTimeout(Ve,Fe))),Z();{const Ve=ve.video.deviceId;me=Ve?Ve.exact||Ve.ideal||Ve:null}try{p._onLog&&p._onLog("ask "+JSON.stringify(ve)),pe=yield navigator.mediaDevices.getUserMedia(ve);break}catch(Ve){xe=Ve,p._onLog&&p._onLog(Ve.message||Ve)}}});if(yield Me(Q),!pe&&(p._onLog&&p._onLog("======try getUserMedia again========"),Te=JSON.parse(JSON.stringify(Q)),"object"==typeof Te.video&&("iPhone"==p.browserInfo.OS?(U>=1280||H>=1280?Te.video.width=1280:U>=640||H>=640?Te.video.width=640:(U<640||H<640)&&(Te.video.width=320),delete Te.video.height):se&&!Q.video.deviceId?(delete Te.video.facingMode,this._allCameras.length&&(Te.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):Te.video=!0),p._onLog&&p._onLog(Te),yield Me(Te)),pe||(Be=[1e3,2e3],yield Me(Q)),pe||(yield Me(Te)),!pe)throw xe;const Oe=()=>{const ve=pe.getVideoTracks();let Fe,Ve;if(ve.length&&(Fe=this._videoTrack=ve[0]),this._video&&Fe){if(Fe.label)for(let Ye of this._allCameras)if(Fe.label==Ye.label){Ye._checked=!0,Ve=Ye,this._lastDeviceId=Ye.deviceId;break}if(!Ve&&me)for(let Ye of this._allCameras)if(me==Ye.deviceId){Fe.label&&(Ye._checked=!0,Ye.label=Fe.label),Ve=Ye,this._lastDeviceId=Ye.deviceId;break}}this._currentCamera=Ve};if(yield this.getAllCameras(),Z(),se){Oe(),Ce();let ve=Q.video.deviceId;ve&&(ve=ve.exact||ve.ideal||ve);let Fe=null===(ye=this._currentCamera)||void 0===ye?void 0:ye.deviceId;!ve||Fe&&ve==Fe||(pe.getTracks().forEach(Ve=>{Ve.stop()}),Be=[0,500,1e3,2e3],yield Me(Q))}Z(),yield(()=>g(this,void 0,void 0,function*(){p._onLog&&p._onLog("======play video========"),yield new Promise((ve,Fe)=>{this._video.onloadedmetadata=()=>g(this,void 0,void 0,function*(){this._video.onloadedmetadata=null,yield this._video.play(),ve()}),this._video.srcObject=pe,setTimeout(()=>Fe(new Error("Failed to play video. Timeout.")),4e3)})}))(),p._onLog&&p._onLog("======played video========"),this._bgLoading&&(this._bgLoading.style.animationPlayState="paused");const Ze="got "+this._video.videoWidth+"x"+this._video.videoHeight;this._optGotRsl&&(this._optGotRsl.setAttribute("data-width",this._video.videoWidth),this._optGotRsl.setAttribute("data-height",this._video.videoHeight),this._optGotRsl.innerText=Ze,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value="got")),p._onLog&&p._onLog(Ze),Oe(),Z(),this._renderSelCameraInfo();let ot={width:this._video.videoWidth,height:this._video.videoHeight};return this.onPlayed&&setTimeout(()=>{this.onPlayed(ot)},0),this.promisePlay=null,ot}catch(Z){throw this.promisePlay=null,Z}}))(),yield this.promisePlay)})}pauseScan(){this._assertOpen(),this._bPauseScan=!0,this._divScanLight&&(this._divScanLight.style.display="none")}resumeScan(){this._assertOpen(),this._bPauseScan=!1}getCapabilities(){return this._assertOpen(),this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}}getCameraSettings(){return this._assertOpen(),this._videoTrack.getSettings()}getConstraints(){return this._assertOpen(),this._videoTrack.getConstraints()}applyConstraints(k){return g(this,void 0,void 0,function*(){if(this._assertOpen(),!this._videoTrack.applyConstraints)throw Error("Not supported.");return yield this._videoTrack.applyConstraints(k)})}turnOnTorch(){return g(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!0}]});throw Error("Not supported.")})}turnOffTorch(){return g(this,void 0,void 0,function*(){if(this._assertOpen(),this.getCapabilities().torch)return yield this._videoTrack.applyConstraints({advanced:[{torch:!1}]});throw Error("Not supported.")})}setColorTemperature(k){return g(this,void 0,void 0,function*(){this._assertOpen();let U=this.getCapabilities().colorTemperature;if(!U)throw Error("Not supported.");return k<U.min?k=U.min:k>U.max&&(k=U.max),yield this._videoTrack.applyConstraints({advanced:[{colorTemperature:k}]})})}setExposureCompensation(k){return g(this,void 0,void 0,function*(){this._assertOpen();let U=this.getCapabilities().exposureCompensation;if(!U)throw Error("Not supported.");return k<U.min?k=U.min:k>U.max&&(k=U.max),yield this._videoTrack.applyConstraints({advanced:[{exposureCompensation:k}]})})}setZoom(k){return g(this,void 0,void 0,function*(){this._assertOpen();let U=this.getCapabilities().zoom;if(!U)throw Error("Not supported.");return k<U.min?k=U.min:k>U.max&&(k=U.max),yield this._videoTrack.applyConstraints({advanced:[{zoom:k}]})})}setFrameRate(k){return g(this,void 0,void 0,function*(){this._assertOpen();let U=this.getCapabilities().frameRate;if(!U)throw Error("Not supported.");return k<U.min?k=U.min:k>U.max&&(k=U.max),yield this._videoTrack.applyConstraints({width:{ideal:Math.max(this._video.videoWidth,this._video.videoHeight)},frameRate:k})})}_cloneDecodeResults(k){if(k instanceof Array){let U=[];for(let H of k)U.push(this._cloneDecodeResults(H));return U}return JSON.parse(JSON.stringify(k,(H,ee)=>"oriVideoCanvas"==H||"searchRegionCanvas"==H?void 0:ee))}_loopReadVideo(){return g(this,void 0,void 0,function*(){if(this.bDestroyed)return;if(!this._isOpen)return void(yield this.clearMapDecodeRecord());if(this._video.paused||this._bPauseScan)return p._onLog&&p._onLog("Video or scan is paused. Ask in 1s."),yield this.clearMapDecodeRecord(),void setTimeout(()=>{this._loopReadVideo()},this._intervalDetectVideoPause);this._divScanLight&&"none"==this._divScanLight.style.display&&(this._divScanLight.style.display=""),p._onLog&&p._onLog("======= once read ======="),p._onLog&&(this._timeStartDecode=Date.now());let k=this.queue_handledFrame;this._countLoopGetFrame=0,0===k.length?this.loopGetVideoFrame(!0):(this._idGetFrameTimeout&&clearTimeout(this._idGetFrameTimeout),this._idGetFrameTimeout=setTimeout(()=>{this._countLoopGetFrame++,this.loopGetVideoFrame(!0)},this._intervalGetVideoFrame)),this._indexCurrentDecodingFrame=this._indexVideoRegion,this.region&&this.region instanceof Array&&++this._indexVideoRegion>=this.region.length&&(this._indexVideoRegion=0),(()=>g(this,void 0,void 0,function*(){if(k[0]&&k[0].bUseWebGL){let{u8Gray:U,dWidth:H,dHeight:ee}=k.pop();this._bWorkerDecodeBuffer=!0;let ye={bUseWebGL:!0};return!this._timeEndGettingFrame||(ye._timeEndGettingFrame=this._timeEndGettingFrame),yield this._decodeBuffer_Uint8Array(U,H,ee,H,u.IPF_GrayScaled,ye)}if(k[0]&&!1===k[0].bUseWebGL){let{data:U,cvs:H,config:ee,region:ye,sx:Z,sy:Q,sWidth:se,sHeight:le,dWidth:pe,dHeight:Ce}=k.pop();this._bWorkerDecodeBuffer=!0,ee.bUseWebGL=!1,!this._timeEndGettingFrame||(ee._timeEndGettingFrame=this._timeEndGettingFrame),(this.bSaveOriCanvas||this.singleFrameMode)&&(this.oriCanvas=H);let Te=yield this._decodeBuffer_Uint8Array(U,H.width,H.height,4*H.width,u.IPF_ABGR_8888,ee);return p.fixResultLocationWhenFilterRegionInJs(ye,Te,Z,Q,se,le,pe,Ce),Te}{let U=new Error("queue_handledFrame is empty.");return new Promise(H=>H(U))}}))().then(U=>{if(p._onLog&&p._onLog(U),Date.now(),this._bWorkerDecodeBuffer=!1,this._idGetFrameTimeout2&&clearTimeout(this._idGetFrameTimeout2),4===this._getVideoFrameMode){let H=this.array_decodeFrameTimeCost,ee=this.array_getFrameTimeCost,ye=this._indexCurrentDecodingFrame;if(this.region instanceof Array?(H[ye]&&H[ye]instanceof Array?H[ye].length>=5&&H[ye].shift():H[ye]=[],H[ye].push(this._lastInnerDecodeDuration)):(H.length>=5&&H.shift(),H.push(this._lastInnerDecodeDuration)),this.region instanceof Array){let Z=0,Q=0;Z=ye+1>=this.region.length?0:ye+1,Q=Z+1>=this.region.length?0:Z+1,this._intervalGetVideoFrame=H[Z]&&H[Z].length&&ee[Q]&&ee[Q].length?Math.min(...H[Z])-Math.max(...ee[Q]):0}else if(ee&&ee.length){let Z=Math.min(...H),Q=Math.max(...ee);Z||Q||(this._intervalGetVideoFrame=Z-Q)}else this._intervalGetVideoFrame=0;this._intervalGetVideoFrame=this._intervalGetVideoFrame>0?this._intervalGetVideoFrame:0}if(this._isOpen&&!this._video.paused&&!this._bPauseScan){if(this.bPlaySoundOnSuccessfulRead&&U.length){let H=!1;if(!0===this.bPlaySoundOnSuccessfulRead||"frame"===this.bPlaySoundOnSuccessfulRead)H=!0;else if("unduplicated"===this.bPlaySoundOnSuccessfulRead)for(let ee of U)if(ee.bUnduplicated){H=!0;break}H&&(this.soundOnSuccessfullRead.currentTime=0,this.soundOnSuccessfullRead.play().catch(ee=>{console.warn("Autoplay not allowed. User interaction required: "+(ee.message||ee))}))}if(navigator.vibrate&&this.bVibrateOnSuccessfulRead&&U.length){let H=!1;if(!0===this.bVibrateOnSuccessfulRead||"frame"===this.bVibrateOnSuccessfulRead)H=!0;else if("unduplicated"===this.bVibrateOnSuccessfulRead)for(let ee of U)if(ee.bUnduplicated){H=!0;break}if(H)try{navigator.vibrate(this.vibrateDuration)}catch(ee){console.warn("Vibration not allowed. User interaction required: "+(ee.message||ee))}}if(this.onFrameRead){let H=this._cloneDecodeResults(U);for(let ee of H)delete ee.bUnduplicated;this.onFrameRead(H)}if(this.onUnduplicatedRead)for(let H of U)H.bUnduplicated&&this.onUnduplicatedRead(H.barcodeText,this._cloneDecodeResults(H));this._drawRegionsults(U)}setTimeout(()=>{this._loopReadVideo()},this.intervalTime)}).catch(U=>{this._bWorkerDecodeBuffer=!1,p._onLog&&p._onLog(U.message||U),setTimeout(()=>{this._loopReadVideo()},Math.max(this.intervalTime,1e3)),"platform error"==U.message||console.warn(U.message)})})}loopGetVideoFrame(k){if(this.bDestroyed)return;if(!this._isOpen)return void this.clearMapDecodeRecord();if(this._video.paused||this._bPauseScan)return p._onLog&&p._onLog("Video or scan is paused. Ask in 1s."),void this.clearMapDecodeRecord();let U=Date.now();p._onLog&&p._onLog("start getting a frame: "+U);let H=this.queue_handledFrame,ee={};if(this.region)if(this.region instanceof Array){let Q=this.region[this._indexVideoRegion];Q&&(ee.region=JSON.parse(JSON.stringify(Q)))}else ee.region=JSON.parse(JSON.stringify(this.region));if(0===this._getVideoFrameMode){let Q=this.handleVideoFrame(this._video,ee);Q&&(H[0]=Q)}else if(1===this._getVideoFrameMode){let Q=this.handleVideoFrame(this._video,ee);Q&&(H[0]=Q),this._idGetFrameTimeout&&clearTimeout(this._idGetFrameTimeout),k&&(this._idGetFrameTimeout=setTimeout(()=>{this._bWorkerDecodeBuffer&&this._countLoopGetFrame<this.loopGetFrameTimes&&(this._countLoopGetFrame++,this.loopGetVideoFrame(!0))},this._intervalGetVideoFrame))}else if(2===this._getVideoFrameMode){let Q=this.handleVideoFrame(this._video,ee);Q&&(H[0]=Q),this._idGetFrameTimeout&&clearTimeout(this._idGetFrameTimeout),this._idGetFrameTimeout=setTimeout(()=>{this._bWorkerDecodeBuffer&&this.loopGetVideoFrame(!0)},this._intervalGetVideoFrame)}else if(4===this._getVideoFrameMode){let Q=this.handleVideoFrame(this._video,ee);Q&&(H[0]=Q),this._idGetFrameTimeout&&clearTimeout(this._idGetFrameTimeout),k&&(this._idGetFrameTimeout=setTimeout(()=>{this._bWorkerDecodeBuffer&&this._countLoopGetFrame<this.loopGetFrameTimes&&(this._countLoopGetFrame++,this.loopGetVideoFrame(!0))},this._intervalGetVideoFrame))}this._idGetFrameTimeout2&&clearTimeout(this._idGetFrameTimeout2),this._idGetFrameTimeout2=setTimeout(()=>{0!=this.queue_handledFrame.length&&(p._onLog&&p._onLog("second timeout is executed: "+Date.now()),this.loopGetVideoFrame(!1))},200);let ye=Date.now(),Z=ye-U;if(4===this._getVideoFrameMode){let Q=this.array_getFrameTimeCost;if(this.region instanceof Array){let se=this._indexVideoRegion;Q[se]&&Q[se]instanceof Array?Q[se].length>=5&&Q[se].shift():Q[se]=[],Q[se].push(Z)}else Q.length>=5&&Q.shift(),Q.push(Z)}this._timeEndGettingFrame=ye,p._onLog&&p._onLog("end getting a frame: "+ye),p._onLog&&p._onLog("get frame cost: "+Z)}_drawRegionsults(k){let U,H,ee;if(this.beingLazyDrawRegionsults=!1,this.singleFrameMode){if(!this.oriCanvas)return;U="contain",H=this.oriCanvas.width,ee=this.oriCanvas.height}else{if(!this._video)return;U=this._video.style.objectFit||"contain",H=this._video.videoWidth,ee=this._video.videoHeight}let ye=this.region;if(ye&&(!ye.regionLeft&&!ye.regionRight&&!ye.regionTop&&!ye.regionBottom&&!ye.regionMeasuredByPercentage||ye instanceof Array?ye=null:ye.regionMeasuredByPercentage?ye=ye.regionLeft||ye.regionRight||100!==ye.regionTop||100!==ye.regionBottom?{regionLeft:Math.round(ye.regionLeft/100*H),regionTop:Math.round(ye.regionTop/100*ee),regionRight:Math.round(ye.regionRight/100*H),regionBottom:Math.round(ye.regionBottom/100*ee)}:null:(ye=JSON.parse(JSON.stringify(ye)),delete ye.regionMeasuredByPercentage)),this._cvsDrawArea){this._cvsDrawArea.style.objectFit=U;let Z=this._cvsDrawArea;Z.width=H,Z.height=ee;let Q=Z.getContext("2d");if(ye){Q.fillStyle=this.regionMaskFillStyle,Q.fillRect(0,0,Z.width,Z.height),Q.globalCompositeOperation="destination-out",Q.fillStyle="#000";let se=Math.round(this.regionMaskLineWidth/2);Q.fillRect(ye.regionLeft-se,ye.regionTop-se,ye.regionRight-ye.regionLeft+2*se,ye.regionBottom-ye.regionTop+2*se),Q.globalCompositeOperation="source-over",Q.strokeStyle=this.regionMaskStrokeStyle,Q.lineWidth=this.regionMaskLineWidth,Q.rect(ye.regionLeft,ye.regionTop,ye.regionRight-ye.regionLeft,ye.regionBottom-ye.regionTop),Q.stroke()}if(k){Q.globalCompositeOperation="destination-over",Q.fillStyle=this.barcodeFillStyle,Q.strokeStyle=this.barcodeStrokeStyle,Q.lineWidth=this.barcodeLineWidth,k=k||[];for(let se of k){let le=se.localizationResult;Q.beginPath(),Q.moveTo(le.x1,le.y1),Q.lineTo(le.x2,le.y2),Q.lineTo(le.x3,le.y3),Q.lineTo(le.x4,le.y4),Q.fill(),Q.beginPath(),Q.moveTo(le.x1,le.y1),Q.lineTo(le.x2,le.y2),Q.lineTo(le.x3,le.y3),Q.lineTo(le.x4,le.y4),Q.closePath(),Q.stroke()}}this.singleFrameMode&&(Q.globalCompositeOperation="destination-over",Q.drawImage(this.oriCanvas,0,0))}if(this._divScanArea){let Z=this._video.offsetWidth,Q=this._video.offsetHeight,se=1;Z/Q<H/ee?(se=Z/H,this._divScanArea.style.left="0",this._divScanArea.style.top=Math.round((Q-ee*se)/2)+"px"):(se=Q/ee,this._divScanArea.style.left=Math.round((Z-H*se)/2)+"px",this._divScanArea.style.top="0");let le=ye?Math.round(ye.regionLeft*se):0,pe=ye?Math.round(ye.regionTop*se):0,Ce=Math.round(ye?ye.regionRight*se-le:H*se),Te=Math.round(ye?ye.regionBottom*se-pe:ee*se);this._divScanArea.style.marginLeft=le+"px",this._divScanArea.style.marginTop=pe+"px",this._divScanArea.style.width=Ce+"px",this._divScanArea.style.height=Te+"px"}}_clearRegionsults(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)}open(){return g(this,void 0,void 0,function*(){this._bindUI();let k=yield this.play();return this.singleFrameMode||this._loopReadVideo(),k})}openVideo(){return g(this,void 0,void 0,function*(){this._bindUI();let k=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||this._loopReadVideo(),k})}close(){return g(this,void 0,void 0,function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1})}show(){return g(this,void 0,void 0,function*(){this._bindUI(),this._show();let k=yield this.play();return this.singleFrameMode||this._loopReadVideo(),k})}showVideo(){return g(this,void 0,void 0,function*(){this._bindUI(),this._show();let k=yield this.play();return this._bPauseScan=!0,this.singleFrameMode||this._loopReadVideo(),k})}hide(){return g(this,void 0,void 0,function*(){this.stop(),this._unbindUI(),this._bPauseScan=!1,this.UIElement.style.display="none"})}destroy(){const k=Object.create(null,{destroy:{get:()=>super.destroy}});return g(this,void 0,void 0,function*(){document.removeEventListener("visibilitychange",this._ev_documentHideEvent),yield this.close();for(let U of this.styleEls)U.remove();this.styleEls.splice(0,this.styleEls.length),this.bDestroyed||(yield k.destroy.call(this))})}}var v,T,D,P,E,M,O,R,F,B,b,A,N,Y,ne,Ie,_e,ce,q,he,ie,V,J,te,oe,Ee,ge;_._defaultUIElementURL="@engineResourcePath/dbr.scanner.html",_.singlePresetRegion=[null,{regionLeft:0,regionTop:30,regionRight:100,regionBottom:70,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1},{regionLeft:25,regionTop:25,regionRight:75,regionBottom:75,regionMeasuredByPercentage:1}],function(G){G[G.BICM_DARK_ON_LIGHT=1]="BICM_DARK_ON_LIGHT",G[G.BICM_LIGHT_ON_DARK=2]="BICM_LIGHT_ON_DARK",G[G.BICM_DARK_ON_DARK=4]="BICM_DARK_ON_DARK",G[G.BICM_LIGHT_ON_LIGHT=8]="BICM_LIGHT_ON_LIGHT",G[G.BICM_DARK_LIGHT_MIXED=16]="BICM_DARK_LIGHT_MIXED",G[G.BICM_DARK_ON_LIGHT_DARK_SURROUNDING=32]="BICM_DARK_ON_LIGHT_DARK_SURROUNDING",G[G.BICM_SKIP=0]="BICM_SKIP",G[G.BICM_REV=2147483648]="BICM_REV"}(v||(v={})),function(G){G[G.BCM_AUTO=1]="BCM_AUTO",G[G.BCM_GENERAL=2]="BCM_GENERAL",G[G.BCM_SKIP=0]="BCM_SKIP",G[G.BCM_REV=2147483648]="BCM_REV"}(T||(T={})),function(G){G[G.BF2_NULL=0]="BF2_NULL",G[G.BF2_POSTALCODE=32505856]="BF2_POSTALCODE",G[G.BF2_NONSTANDARD_BARCODE=1]="BF2_NONSTANDARD_BARCODE",G[G.BF2_USPSINTELLIGENTMAIL=1048576]="BF2_USPSINTELLIGENTMAIL",G[G.BF2_POSTNET=2097152]="BF2_POSTNET",G[G.BF2_PLANET=4194304]="BF2_PLANET",G[G.BF2_AUSTRALIANPOST=8388608]="BF2_AUSTRALIANPOST",G[G.BF2_RM4SCC=16777216]="BF2_RM4SCC",G[G.BF2_DOTCODE=2]="BF2_DOTCODE"}(D||(D={})),function(G){G[G.BM_AUTO=1]="BM_AUTO",G[G.BM_LOCAL_BLOCK=2]="BM_LOCAL_BLOCK",G[G.BM_SKIP=0]="BM_SKIP",G[G.BM_THRESHOLD=4]="BM_THRESHOLD",G[G.BM_REV=2147483648]="BM_REV"}(P||(P={})),function(G){G[G.ECCM_CONTRAST=1]="ECCM_CONTRAST"}(E||(E={})),function(G){G[G.CFM_GENERAL=1]="CFM_GENERAL"}(M||(M={})),function(G){G[G.CCM_AUTO=1]="CCM_AUTO",G[G.CCM_GENERAL_HSV=2]="CCM_GENERAL_HSV",G[G.CCM_SKIP=0]="CCM_SKIP",G[G.CCM_REV=2147483648]="CCM_REV"}(O||(O={})),function(G){G[G.CICM_GENERAL=1]="CICM_GENERAL",G[G.CICM_SKIP=0]="CICM_SKIP",G[G.CICM_REV=2147483648]="CICM_REV"}(R||(R={})),function(G){G[G.CM_IGNORE=1]="CM_IGNORE",G[G.CM_OVERWRITE=2]="CM_OVERWRITE"}(F||(F={})),function(G){G[G.DM_SKIP=0]="DM_SKIP",G[G.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",G[G.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",G[G.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",G[G.DM_SMOOTHING=8]="DM_SMOOTHING",G[G.DM_MORPHING=16]="DM_MORPHING",G[G.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",G[G.DM_SHARPENING=64]="DM_SHARPENING",G[G.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",G[G.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING"}(B||(B={})),function(G){G[G.DRM_AUTO=1]="DRM_AUTO",G[G.DRM_GENERAL=2]="DRM_GENERAL",G[G.DRM_SKIP=0]="DRM_SKIP",G[G.DRM_REV=2147483648]="DRM_REV"}(b||(b={})),function(G){G[G.DPMCRM_AUTO=1]="DPMCRM_AUTO",G[G.DPMCRM_GENERAL=2]="DPMCRM_GENERAL",G[G.DPMCRM_SKIP=0]="DPMCRM_SKIP",G[G.DPMCRM_REV=2147483648]="DPMCRM_REV"}(A||(A={})),function(G){G[G.GTM_INVERTED=1]="GTM_INVERTED",G[G.GTM_ORIGINAL=2]="GTM_ORIGINAL",G[G.GTM_SKIP=0]="GTM_SKIP",G[G.GTM_REV=2147483648]="GTM_REV"}(N||(N={})),function(G){G[G.IPM_AUTO=1]="IPM_AUTO",G[G.IPM_GENERAL=2]="IPM_GENERAL",G[G.IPM_GRAY_EQUALIZE=4]="IPM_GRAY_EQUALIZE",G[G.IPM_GRAY_SMOOTH=8]="IPM_GRAY_SMOOTH",G[G.IPM_SHARPEN_SMOOTH=16]="IPM_SHARPEN_SMOOTH",G[G.IPM_MORPHOLOGY=32]="IPM_MORPHOLOGY",G[G.IPM_SKIP=0]="IPM_SKIP",G[G.IPM_REV=2147483648]="IPM_REV"}(Y||(Y={})),function(G){G[G.IRSM_MEMORY=1]="IRSM_MEMORY",G[G.IRSM_FILESYSTEM=2]="IRSM_FILESYSTEM",G[G.IRSM_BOTH=4]="IRSM_BOTH"}(ne||(ne={})),function(G){G[G.IRT_NO_RESULT=0]="IRT_NO_RESULT",G[G.IRT_ORIGINAL_IMAGE=1]="IRT_ORIGINAL_IMAGE",G[G.IRT_COLOUR_CLUSTERED_IMAGE=2]="IRT_COLOUR_CLUSTERED_IMAGE",G[G.IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE=4]="IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE",G[G.IRT_TRANSFORMED_GRAYSCALE_IMAGE=8]="IRT_TRANSFORMED_GRAYSCALE_IMAGE",G[G.IRT_PREDETECTED_REGION=16]="IRT_PREDETECTED_REGION",G[G.IRT_PREPROCESSED_IMAGE=32]="IRT_PREPROCESSED_IMAGE",G[G.IRT_BINARIZED_IMAGE=64]="IRT_BINARIZED_IMAGE",G[G.IRT_TEXT_ZONE=128]="IRT_TEXT_ZONE",G[G.IRT_CONTOUR=256]="IRT_CONTOUR",G[G.IRT_LINE_SEGMENT=512]="IRT_LINE_SEGMENT",G[G.IRT_FORM=1024]="IRT_FORM",G[G.IRT_SEGMENTATION_BLOCK=2048]="IRT_SEGMENTATION_BLOCK",G[G.IRT_TYPED_BARCODE_ZONE=4096]="IRT_TYPED_BARCODE_ZONE",G[G.IRT_PREDETECTED_QUADRILATERAL=8192]="IRT_PREDETECTED_QUADRILATERAL"}(Ie||(Ie={})),function(G){G[G.LM_SKIP=0]="LM_SKIP",G[G.LM_AUTO=1]="LM_AUTO",G[G.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",G[G.LM_LINES=8]="LM_LINES",G[G.LM_STATISTICS=4]="LM_STATISTICS",G[G.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",G[G.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",G[G.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",G[G.LM_CENTRE=128]="LM_CENTRE",G[G.LM_REV=2147483648]="LM_REV"}(_e||(_e={})),function(G){G[G.PDFRM_RASTER=1]="PDFRM_RASTER",G[G.PDFRM_AUTO=2]="PDFRM_AUTO",G[G.PDFRM_VECTOR=4]="PDFRM_VECTOR",G[G.PDFRM_REV=2147483648]="PDFRM_REV"}(ce||(ce={})),function(G){G[G.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",G[G.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",G[G.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",G[G.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(q||(q={})),function(G){G[G.RPM_AUTO=1]="RPM_AUTO",G[G.RPM_GENERAL=2]="RPM_GENERAL",G[G.RPM_GENERAL_RGB_CONTRAST=4]="RPM_GENERAL_RGB_CONTRAST",G[G.RPM_GENERAL_GRAY_CONTRAST=8]="RPM_GENERAL_GRAY_CONTRAST",G[G.RPM_GENERAL_HSV_CONTRAST=16]="RPM_GENERAL_HSV_CONTRAST",G[G.RPM_SKIP=0]="RPM_SKIP",G[G.RPM_REV=2147483648]="RPM_REV"}(he||(he={})),function(G){G[G.RCT_PIXEL=1]="RCT_PIXEL",G[G.RCT_PERCENTAGE=2]="RCT_PERCENTAGE"}(ie||(ie={})),function(G){G[G.RT_STANDARD_TEXT=0]="RT_STANDARD_TEXT",G[G.RT_RAW_TEXT=1]="RT_RAW_TEXT",G[G.RT_CANDIDATE_TEXT=2]="RT_CANDIDATE_TEXT",G[G.RT_PARTIAL_TEXT=3]="RT_PARTIAL_TEXT"}(V||(V={})),function(G){G[G.SUM_AUTO=1]="SUM_AUTO",G[G.SUM_LINEAR_INTERPOLATION=2]="SUM_LINEAR_INTERPOLATION",G[G.SUM_NEAREST_NEIGHBOUR_INTERPOLATION=4]="SUM_NEAREST_NEIGHBOUR_INTERPOLATION",G[G.SUM_SKIP=0]="SUM_SKIP",G[G.SUM_REV=2147483648]="SUM_REV"}(J||(J={})),function(G){G[G.TP_REGION_PREDETECTED=1]="TP_REGION_PREDETECTED",G[G.TP_IMAGE_PREPROCESSED=2]="TP_IMAGE_PREPROCESSED",G[G.TP_IMAGE_BINARIZED=4]="TP_IMAGE_BINARIZED",G[G.TP_BARCODE_LOCALIZED=8]="TP_BARCODE_LOCALIZED",G[G.TP_BARCODE_TYPE_DETERMINED=16]="TP_BARCODE_TYPE_DETERMINED",G[G.TP_BARCODE_RECOGNIZED=32]="TP_BARCODE_RECOGNIZED"}(te||(te={})),function(G){G[G.TFM_AUTO=1]="TFM_AUTO",G[G.TFM_GENERAL_CONTOUR=2]="TFM_GENERAL_CONTOUR",G[G.TFM_SKIP=0]="TFM_SKIP",G[G.TFM_REV=2147483648]="TFM_REV"}(oe||(oe={})),function(G){G[G.TROM_CONFIDENCE=1]="TROM_CONFIDENCE",G[G.TROM_POSITION=2]="TROM_POSITION",G[G.TROM_FORMAT=4]="TROM_FORMAT",G[G.TROM_SKIP=0]="TROM_SKIP",G[G.TROM_REV=2147483648]="TROM_REV"}(Ee||(Ee={})),function(G){G[G.TDM_AUTO=1]="TDM_AUTO",G[G.TDM_GENERAL_WIDTH_CONCENTRATION=2]="TDM_GENERAL_WIDTH_CONCENTRATION",G[G.TDM_SKIP=0]="TDM_SKIP",G[G.TDM_REV=2147483648]="TDM_REV"}(ge||(ge={}));class Re{static get version(){return p.version}static get productKeys(){return p.productKeys}static set productKeys(k){p.productKeys=k}static get handshakeCode(){return p.handshakeCode}static set handshakeCode(k){p.handshakeCode=k}static get organizationID(){return p.organizationID}static set organizationID(k){p.organizationID=k}static get sessionPassword(){return p.sessionPassword}static set sessionPassword(k){p.sessionPassword=k}static get browserInfo(){return p.browserInfo}static detectEnvironment(){return p.detectEnvironment()}static get _workerName(){return p._workerName}static set _workerName(k){p._workerName=k}static get engineResourcePath(){return p.engineResourcePath}static set engineResourcePath(k){p.engineResourcePath=k}static get licenseServer(){return p.licenseServer}static set licenseServer(k){p.licenseServer=k}static get deviceFriendlyName(){return p.deviceFriendlyName}static set deviceFriendlyName(k){p.deviceFriendlyName=k}static get _onLog(){return p._onLog}static set _onLog(k){p._onLog=k}static get _bWasmDebug(){return p._bWasmDebug}static set _bWasmDebug(k){p._bWasmDebug=k}static get _bUseFullFeature(){return p._bUseFullFeature}static set _bUseFullFeature(k){p._bUseFullFeature=k}static get _dbrWorker(){return p._dbrWorker}static isLoaded(){return p.isLoaded()}static isWasmLoaded(){return p.isLoaded()}static loadWasm(){return p.loadWasm()}}Re.BarcodeReader=p,Re.BarcodeScanner=_,Re.EnumBarcodeColourMode=v,Re.EnumBarcodeComplementMode=T,Re.EnumBarcodeFormat=o,Re.EnumBarcodeFormat_2=D,Re.EnumBinarizationMode=P,Re.EnumClarityCalculationMethod=E,Re.EnumClarityFilterMode=M,Re.EnumColourClusteringMode=O,Re.EnumColourConversionMode=R,Re.EnumConflictMode=F,Re.EnumDeblurMode=B,Re.EnumDeformationResistingMode=b,Re.EnumDPMCodeReadingMode=A,Re.EnumErrorCode=f,Re.EnumGrayscaleTransformationMode=N,Re.EnumImagePixelFormat=u,Re.EnumImagePreprocessingMode=Y,Re.EnumIMResultDataType=a,Re.EnumIntermediateResultSavingMode=ne,Re.EnumIntermediateResultType=Ie,Re.EnumLocalizationMode=_e,Re.EnumPDFReadingMode=ce,Re.EnumQRCodeErrorCorrectionLevel=q,Re.EnumRegionPredetectionMode=he,Re.EnumResultCoordinateType=ie,Re.EnumResultType=V,Re.EnumScaleUpMode=J,Re.EnumTerminatePhase=te,Re.EnumTextFilterMode=oe,Re.EnumTextResultOrderMode=Ee,Re.EnumTextureDetectionMode=ge,s.default=Re}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.dbr=t():e.dbr=t(e.worker_threads,e.https,e.http,e.fs,e.os),"object"==typeof dbr?rn=dbr.DBR:"object"==typeof module&&module.exports&&module.exports.default?rn=module.exports.default:"object"==typeof exports&&exports.dbr&&(rn=exports.dbr.DBR);var w=window.Dynamsoft||{Lib:{}},Rt=window;window.Dynamsoft=w,function(e){var t=e.DWT||(e.DWT={});e.Lib||(e.Lib={}),t.initQueue=[],e.initOrder=e.initOrder||[],e.unloadQueue=e.unloadQueue||[]}(w),w.DWT.IfUseActiveXForIE10Plus=!1,w.Lib.timestamp="?t=20220322143206",w=w||{},function(e,t,n){var r=20211014;if(!(t._preDefine_ver&&t._preDefine_ver>=r)){t._preDefine_ver=r;var h=function(f,a){for(var o in a)a.hasOwnProperty(o)&&(f[o]=a[o]);return f},d=function(f){if(null==f||"object"!=typeof f)return f;var a,o,c;if(f instanceof Date)return(a=new Date).setTime(f.getTime()),a;if(f instanceof Array){for(a=[],c=f.length,o=0;o<c;o++)a[o]=d(f[o]);return a}if(f instanceof Object){for(o in a={},f)f.hasOwnProperty(o)&&(a[o]=d(f[o]));return a}return 0};if(t.Lib||(t.Lib={}),h(t.Lib,{win:e,doc:e.document,debug:!1,nil:void 0,mix:h,clone:d,guid:function(f){var c,l,a=[],o="0123456789abcdef";for(c=0;c<8;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),c=0;c<4;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-4"),c=0;c<3;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),l=o.substr(Math.floor(16*Math.random()),1),l=o.substr(3&l|8,1),a.push(l),c=0;c<3;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),c=0;c<8;c++)a.push(o.substr(Math.floor(16*Math.random()),1));return a.unshift(f),a.join("")},now:Date.now||function(){return+new Date},noop:function(){}}),Object.keys)t.Lib.keys=Object.keys;else{var u,s=["propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],i={}.hasOwnProperty;for(u in{toString:1})s=!1;t.Lib.keys=function(f){var o,c,a=[];for(o in f)i.call(f,o)&&a.push(o);if(s&&f)for(c=0;o=s[c++];)i.call(f,o)&&a.push(o);return a}}}}(typeof window<"u"?window:void 0,w),function(e){var t=!{toString:1}.propertyIsEnumerable("toString"),n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function r(h,d){return{}.hasOwnProperty.call(h,d)}e.keys=Object.keys||function(h){var s,i,d=[];for(s in h)r(h,s)&&d.push(s);if(t)for(i=n.length-1;i>=0;i--)r(h,s=n[i])&&d.push(s);return d}}(w.Lib),function(e,t){var n=20200716;if(!(e._isXXX_ver&&e._isXXX_ver>=n)){e._isXXX_ver=n;var h,d,s=!1,f={}.hasOwnProperty,a={},o="object"==typeof HTMLElement;(0,e.mix)(e,{isDef:function l(I){return I!==t},isUndef:c,isUndefined:c,isNull:function(I){return null===I},isNaN:function(I){return isNaN(I)},type:function(I){return null===I||I===t?String(I):a[{}.toString.call(I)]||"object"},isPlainObject:function(I){if(!I||"object"!==e.type(I)||I.nodeType||I.window==I)return s;var p,g;try{if((g=I.constructor)&&!f(I,"constructor")&&!f(g.prototype,"isPrototypeOf"))return s}catch{return s}for(p in I);return c(p)||f(I,p)},isDOM:function(I){return o?I instanceof HTMLElement:I&&"object"==typeof I&&(1===I.nodeType||9===I.nodeType)&&"string"==typeof I.nodeName},isDOMInBody:function(I){var p=I;if(e.isDOM(I))for(;!p&&p!=document.body;)p=p.parentNode;else p=0;return!!p}}),m("Function"),e.each=h=function(I,p,g){if(I){var C,_,v,T=0,D=I.length;if(g=g||null,c(D)||e.isFunction(I))for(v=e.keys(I);T<v.length&&p.call(g,I[C=v[T]],C,I)!==s;T++);else for(_=I[0];T<D&&p.call(g,_,T,I)!==s;_=I[++T]);}return I},d=["String","Object","Boolean","Number"],Array.isArray?e.isArray=Array.isArray:d.push("Array"),h(d,m)}function c(I){return I===t}function m(I,p){a["[object "+I+"]"]=p=I.toLowerCase(),e["is"+I]=function(g){return e.type(g)===p}}}(w.Lib),function(e){var r,t=e.mix,n=e.win,h=20211122;e._log_ver&&e.isNumber(e._log_ver)&&e._log_ver>=h||(e._log_ver=h,e.isDef(n.console)&&(!e.isFunction((r=n.console).log)||!e.isFunction(r.error))&&(r=!1),e.getFormatedNow=function(d){var s=d?new Date(d):new Date,i="yyyy-MM-dd HH:mm:ss.SSSZ",u={"M+":s.getUTCMonth()+1,"d+":s.getUTCDate(),"H+":s.getUTCHours(),"h+":s.getUTCHours()%12||12,"m+":s.getUTCMinutes(),"s+":s.getUTCSeconds(),"q+":Math.floor((s.getUTCMonth()+3)/3),"S+":s.getUTCMilliseconds()};for(var f in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(s.getUTCFullYear()+"").substr(4-RegExp.$1.length))),u)new RegExp("("+f+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?u[f]:("000"+u[f]).substr(("000"+u[f]).length-RegExp.$1.length)));return i},t(e,{log:function(d){if(e.debug&&r&&e.isFunction(r.log)){var s=e.getFormatedNow((new Date).getTime());r.log(["[",s,"] ",d].join(""))}},error:function(d){if(e.debug&&r&&e.isFunction(r.error)){var s=e.getFormatedNow((new Date).getTime());r.error(["[",s,"] ",d].join(""))}},warn:function(d){if(e.debug&&r&&e.isFunction(r.warn)){var s=e.getFormatedNow((new Date).getTime());r.warn(["[",s,"] ",d].join(""))}},info:function(d){if(e.debug&&r&&e.isFunction(r.info)){var s=e.getFormatedNow((new Date).getTime());r.info(["[",s,"] ",d].join(""))}},getLogger:function(){return r},setLogger:function(d){r=d}}))}(w.Lib),function(e){var t=20200521;e._random_ver&&e._random_ver>=t||(e._random_ver=t,e.getRandom=function(){for(var h,n=e.now()%1e4,r=[],d=0;d<5;d++)h=Math.floor(10*Math.random()),0!=d||0!=h?r.push(h):d=-1;return n<10?r.push("000"):n<100?r.push("00"):n<1e3&&r.push("0"),r.push(n),r.join("")})}(w.Lib),function(e){var t=20201013;e._strUtil_ver&&e.isNumber(e._strUtil_ver)&&e._strUtil_ver>=t||(e._strUtil_ver=t,e.mix(e,{startsWith:function(n,r){return 0===n.lastIndexOf(r,0)},endsWith:function(n,r){var h=n.length-r.length;return h>=0&&n.indexOf(r,h)===h},replaceAll:function(n,r,h){return n.replace(new RegExp(r,"gi"),h)},upperCaseFirst:function(n){return n.charAt(0).toUpperCase()+n.substr(1)},removeNonPrintableChar:function(n){return e.isString(n)?n.replace(/[^\x20-\x7E]/g,""):n},makeArray:function(n){if(null==n)return[];if(e.isArray(n))return n;var r=typeof n.length,h=typeof n;if("number"!==r||n.alert||"string"===h||"function"===h&&(!("item"in n)||"number"!==r))return[n];for(var d=[],s=0,i=n.length;s<i;s++)d[s]=n[s];return d}}))}(w.Lib),function(e){var t=20200521;e._extend_ver&&e.isNumber(e._extend_ver)&&e._extend_ver>=t||(e._extend_ver=t,e.extend=function(n,r){var h=function(){n.apply(this,arguments),r&&r.apply(this,arguments)};return e.each(n.prototype,function(d,s){h.prototype[s]=d}),h.prototype.constructor=h,h})}(w.Lib),function(e){var t=20200521;function n(r){var h=this,d=h.constructor;for(h.__attrs={},h.__attrVals={},h.userConfig=r;d;)h.addAttrs(d.ATTRS),d=d.superclass?d.superclass.constructor:null;e.mix(h.__attrs,r)}e._attribute_ver&&e.isNumber(e._attribute_ver)&&e._attribute_ver>=t||(e._attribute_ver=t,e.mix(n.prototype,{get:function(r){return r in this.__attrs?this.__attrs[r]:""},set:function(r,h){r in this.__attrs&&(this.__attrs[r]=h)},addAttrs:function(r){e.mix(this.__attrs,r)}}),n.extend=function(r){var d,s;return(r=r||{}).constructor&&(d=r.constructor),s=e.extend(this,d),e.mix(s,r),s},e.Attributes=n)}(w.Lib),function(e){var t=20200521;if(!(e._json_ver&&e._json_ver>=t)){e._json_ver=t;var n=e.win.JSON;if(n&&n.parse&&n.stringify)return e.parse=n.parse,void(e.stringify=n.stringify);var h,l,m,I,p,r=(m={},I=/["\b\f\n\r\t\x00-\x1f]/g,p=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g,e.each(l={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},function(g,C){m[g]=C}),m["\\/"]="/",m["\\\\"]="\\",{quote:function(g){return'"'+g.replace(I,function(C){var _;return(_=l[C])||(_="\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)),_})+'"'},unQuote:function(g){return g.slice(1,g.length-1).replace(p,function(C){var _;return(_=m[C])||(_=String.fromCharCode(parseInt(C.slice(2),16))),_})}});h=function(l,m,I,p,g,C,_){var v=m[l];switch(v&&"object"==typeof v&&("function"==typeof v.toJSON?v=v.toJSON(l):v instanceof Date?v=isFinite(v.valueOf())?v.getUTCFullYear()+"-"+d(v.getUTCMonth()+1)+"-"+d(v.getUTCDate())+"T"+d(v.getUTCHours())+":"+d(v.getUTCMinutes())+":"+d(v.getUTCSeconds())+"Z":null:(v instanceof String||v instanceof Number||v instanceof Boolean)&&(v=v.valueOf())),void 0!==I&&(v=I.call(m,l,v)),typeof v){case"number":return isFinite(v)?String(v):"null";case"string":return r.quote(v);case"boolean":return String(v);case"object":return v?e.isArray(v)?function i(l,m,I,p,g,C){var _=C;C+=p;for(var v=[],T=l.length,D=0;D<T;){var P=h(String(D),l,m,I,p,g,C);v[v.length]=void 0===P?"null":P,++D}return v.length?p?"[\n"+C+v.join("\n,"+C)+"\n"+_+"]":"["+v.join(",")+"]":"[]"}(v,I,p,g,C,_):function s(l,m,I,p,g,C){var _=C;C+=p;var v,T,P,D=0,E=[];for(T=(v=void 0!==I?I:e.keys(l)).length;D<T;D++){var M=h(P=v[D],l,m,I,p,g,C);if(void 0!==M){var O=r.quote(P);O+=":",p&&(O+=" "),E[E.length]=O+=M}}return E.length?p?"{\n"+C+E.join(",\n"+C)+"\n"+_+"}":"{"+E.join(",")+"}":"{}"}(v,I,p,g,C,_):"null"}},e.stringify=function(l,m,I){var g,C,p="";return m&&("function"==typeof m?C=m:e.isArray(m)&&(g=m)),"number"==typeof I?(I=Math.min(10,I),p=new Array(I+1).join(" ")):"string"==typeof I&&(p=I.slice(0,10)),h("",{"":l},C,g,p,[],"")};var a,u={};u.yy={unQuote:r.unQuote},a=function(l){var m=this;m.rules=[],e.mix(m,l),m.resetInput(m.input)},a.prototype={constructor:function(l){var m=this;m.rules=[],e.mix(m,l),m.resetInput(m.input)},resetInput:function(l){e.mix(this,{input:l,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var l=this,m=l.stateStack[l.stateStack.length-1],I=[];return m=l.mapState(m),e.each(l.rules,function(p){var g=p.state||p[3];g?e.inArray(m,g)&&I.push(p):m==a.STATIC.INITIAL&&I.push(p)}),I},pushState:function(l){this.stateStack.push(l)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var l=this,m=a.STATIC.DEBUG_CONTEXT_LIMIT,I=l.matched,p=l.match,g=l.input,C=((I=I.slice(0,I.length-p.length)).length>m?"...":"")+I.slice(-m).replace(/\n/," "),_=p+g;return C+(_=_.slice(0,m)+(_.length>m?"...":""))+"\n"+new Array(C.length+1).join("-")+"^"},mapSymbol:function(l){var I=this.symbolMap;return I?I[l]||(I[l]=++this.symbolId):l},mapReverseSymbol:function(l){var m=this,I=m.symbolMap,g=m.reverseSymbolMap;return!g&&I&&(g=m.reverseSymbolMap={},e.each(I,function(C,_){g[C]=_})),g?g[l]:l},mapState:function(l){var I=this.stateMap;return I?I[l]||(I[l]=++this.stateId):l},lex:function(){var I,p,g,C,_,l=this,m=l.input,v=l.getCurrentRules();if(l.match=l.text="",!m)return l.mapSymbol(a.STATIC.END_TAG);for(I=0;I<v.length;I++){var E,D=(p=v[I]).token||p[0],P=p.action||p[2]||void 0;if(g=m.match(p.regexp||p[1]))return(_=g[0].match(/\n.*/g))&&(l.lineNumber+=_.length),e.mix(l,{firstLine:l.lastLine,lastLine:l.lineNumber+1,firstColumn:l.lastColumn,lastColumn:_?_[_.length-1].length-1:l.lastColumn+g[0].length}),E=l.match=g[0],l.matches=g,l.text=E,l.matched+=E,C=void 0===(C=P&&P.call(l))?D:l.mapSymbol(C),m=m.slice(E.length),l.input=m,C||l.lex()}e.error("lex error at line "+l.lineNumber+":\n"+l.showDebugInfo())}},a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var o=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});u.lexer=o,o.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},u.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var l={};return l[this.$1.key]=this.$1.value,l}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],u.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},u.parse=function(m){var g,C,_,I=this,p=I.lexer,v=I.table,T=v.gotos,D=v.action,P=I.productions,E=[null],M=[0];for(p.resetInput(m);;){if(g=M[M.length-1],C||(C=p.lex()),!C)return e.log("it is not a valid input: "+m,"error"),!1;if(!(_=D[g]&&D[g][C])){var R,O=[];return D[g]&&e.each(D[g],function(ce,q){O.push(I.lexer.mapReverseSymbol(q))}),R="Syntax error at line "+p.lineNumber+":\n"+p.showDebugInfo()+"\nexpect "+O.join(", "),e.log(R),!1}switch(_[0]){case 1:M.push(C),E.push(p.text),M.push(_[2]),C=null;break;case 2:var ne,F=P[_[1]],B=F.symbol||F[0],b=F.action||F[2],N=(F.rhs||F[1]).length,Y=0,Ie=E[E.length-N];for(I.$$=Ie,ne=void 0;Y<N;Y++)I["$"+(N-Y)]=E[E.length-1-Y];b&&(ne=b.call(I)),Ie=void 0!==ne?ne:I.$$,N&&(M=M.slice(0,-1*N*2),E=E.slice(0,-1*N)),M.push(B),E.push(Ie),M.push(T[M[M.length-2]][M[M.length-1]]);break;case 0:return Ie}}},e.parse=function(l,m){var I=u.parse(String(l));return m?c({"":I},"",m):I}}function d(l){return l<10?"0"+l:l}function c(l,m,I){var g,C,_,p=l[m];if("object"==typeof p)if(e.isArray(p)){g=0,C=p.length;for(var v=[];g<C;)void 0!==(_=c(p,String(g),I))&&(v[v.length]=_);p=v}else{var T=e.keys(p);for(g=0,C=T.length;g<C;g++){var D=T[g];void 0===(_=c(p,D,I))?delete p[D]:p[D]=_}}return I.call(l,m,p)}}(w.Lib),function(e){var t=20210305;if(!(e._array_ver&&e._array_ver>=t)){e._array_ver=t;var n=Array.prototype,r=n.indexOf,h=n.filter,d=n.forEach;e.isFunction(r)||(r=function(s,i){var u;if(null==this)return-1;var f=Object(this),a=f.length>>>0;if(0===a)return-1;var o=+i||0;if(Math.abs(o)===1/0&&(o=0),o>=a)return-1;for(u=Math.max(o>=0?o:a-Math.abs(o),0);u<a;){if(u in f&&f[u]===s)return u;u++}return-1}),e.isFunction(d)||(Array.prototype.forEach=function(i,u){var f,a;if(null!=this&&e.isFunction(i)){var o=Object(this),c=o.length>>>0;for(arguments.length>1&&(f=u),a=0;a<c;)a in o&&i.call(f,o[a],a,o),a++}}),e.mix(e,{filter:h?function(s,i,u){return h.call(s,i,u||this)}:function(s,i,u){var f=[];return e.each(s,function(a,o,c){i.call(u||this,a,o,c)&&f.push(a)}),f},indexOf:function(s,i){return r.call(i,s)},uniq:function(s){for(var i=[],u=s.length,f=0;f<u;f++){for(var a=f+1;a<u;a++)s[f]===s[a]&&(a=++f);i.push(s[f])}return i}})}}(w.Lib),function(e){var t=20200521;if(!(e._function_ver&&e._function_ver>=t)){e._function_ver=t;var n=Array.prototype,r=Function.prototype;e.isFunction(r.bind)||(r.bind=function(h){var d=this;if(1<arguments.length){var s=n.slice.call(arguments,1);return function(){return d.apply(h,arguments.length?s.concat(n.slice.call(arguments)):s)}}return function(){return arguments.length?d.apply(h,arguments):d.call(h)}})}}(w.Lib),function(e){var t=20200521;if(!(e._string_ver&&e._string_ver>=t)){e._string_ver=t;var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=String.prototype,d=r.trim;d||(d=r.trim=function(){return this.replace(n,"")}),e.trim=function(s){return null==s?"":d.call(s)}}}(w.Lib),function(e){var t=20220220;e._navInfobase_ver&&e.isNumber(e._navInfobase_ver)&&e._navInfobase_ver>=t||(e._navInfobase_ver=t,e.getNavInfoByUserAgent=function(n,r){var a,d=!1,s=!0,u=e.doc,o=n.toLowerCase(),c=r.toLowerCase(),l=/harmonyos/g.test(o),m=!l&&/cros/.test(o),I=!l&&/android/g.test(o),p=/iphone/g.test(o)||/iphone/g.test(c),g=/macintosh/.test(o),C=navigator.maxTouchPoints||0,_=/ipad/g.test(o)||(g||"macintel"==c)&&C>1,v=/ucweb|ucbrowser/g.test(o),T=!v&&/nexus/g.test(o)&&/version\/[\d.]+.*safari\//g.test(o),D=/playbook/g.test(o),P=/hp-tablet/g.test(o),E=/blackberry|bb10/g.test(o),M=/symbian/g.test(o),O=/windows phone/g.test(o),R=/mobile/g.test(o),F=/arm64|aarch64/g.test(o),B=/mips64/g.test(o),b=/huaweibrowser/g.test(o),A=F||B;"linux"==c&&o.indexOf("windows nt")>=0&&(c="harmonyos",l=!0);var N=D||_||P,Y=!N&&(p||T||E||M||O||I||l||R),ne=!Y&&!N&&!m,Ie=ne&&/win32|win64|windows/.test(c),_e=Ie&&/win64|x64/.test(o),ce=ne&&/mac68k|macppc|macintosh|macintel/.test(o),q=ne&&/linux/.test(c),he="win64"==c||/wow64|x86_64|win64|x64/.test(o)||A,ie=/wow64/g.test(o),V=o.indexOf("msie "),J=o.indexOf("trident"),te=o.indexOf("rv:"),oe=d,Ee=/opera|opr/g.test(o),ge=/360se/g.test(o),Re=/maxthon/g.test(o),G=/tencenttraveler|qqbrowser/g.test(o),k=/the world/g.test(o),U=/metasr/g.test(o),H=/avant/g.test(o),ee=/firefox|fxios/g.test(o),ye=!(ee||b)&&/edge\/|edga\/|edgios\/|edg\//g.test(o),Z=!(E||D||v||Ee||ye||b)&&/chrome|crios/g.test(o),Q=Ie&&!ee&&!ye&&!Z&&(-1!=V||-1!=J||-1!=te),se="",le=0,pe=/gecko/g.test(o),Ce=Y||N,Te="";if((ce||p||_||Ie||E||D||T)&&!v&&!Ee&&!ye&&!Q&&!ee&&(a=o.match(/version\/([\d.]+).*safari\//))&&(E||D||T||(oe=s,Z=d),Te=a[1]),ye){var Be=o.indexOf("edge/");Be>-1?Be+=5:(Be=o.indexOf("edg/"))>-1?Be+=4:(Be=o.indexOf("edga/"))>-1?Be+=5:(Be=o.indexOf("edgios/"))>-1&&(Be+=7),Be>-1&&(a=(Te=o.slice(Be)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s}else if(ee)if(Ce=s,(a=o.indexOf("firefox/"))>-1){var xe=(a=o.slice(a+8)).indexOf(" ");xe>-1&&(a=a.slice(0,xe)),Te=a,(xe=a.indexOf("."))>-1&&(a=Te.slice(0,xe)),a<27&&(Ce=d)}else(p||_)&&(a=o.indexOf("fxios/"))>-1&&(Te=a=(a=o.slice(a+6)).slice(0,a.indexOf(" ")));else if(Q)-1!=V?se=a=(a=o.slice(V+5)).slice(0,a.indexOf(";")):-1!=te?se=a=(a=(a=o.slice(te+3)).slice(0,a.indexOf(";"))).slice(0,a.indexOf(")")):-1!=J&&(se=a=(a=o.slice(J+7)).slice(0,a.indexOf(";"))),(""===se||se>=10)&&(Ce=s),Te=a;else if(oe)Ce=s,(a=Te.indexOf("."))>-1&&(a=Te.slice(0,a))<7&&(Ce=d);else if(v)(a=o.indexOf("ucweb"))>-1?Te=o.slice(a+5):(a=o.indexOf("ucbrowser/"))>-1&&(a=(Te=o.slice(a+10)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s;else if(Ee)(a=o.indexOf("version/"))>-1?Te=o.slice(a+8):(a=o.indexOf("opr/"))>-1&&(Te=o.slice(a+4)),Ce=s;else if(M)(a=o.indexOf("browserng/"))>-1&&(Te=o.slice(a+10)),Ce=s;else if(O)(a=o.indexOf("iemobile/"))>-1&&(Te=o.slice(a+9)),Ce=s;else if(Z){var me=o.indexOf("chrome/");me>-1?(a=(Te=o.slice(me+7)).indexOf(" "))>-1&&(Te=Te.slice(0,a)):(me=o.indexOf("crios/"))>-1&&(a=(Te=o.slice(me+6)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s,(a=Te.indexOf("."))>-1&&(a=Te.slice(0,a))<27&&(Ce=d)}else if(b){var Me=o.indexOf("huaweibrowser");Me>-1&&(a=(Te=o.slice(Me+14)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s}return(ye||Q)&&(u.documentMode?le=u.documentMode:(le=5,u.compatMode&&"CSS1Compat"==u.compatMode&&(le=7))),(ce||q)&&(he=!0,ce&&(a=o.match(/mac os x (\d+)(_|\.)(\d+)/))&&a.length>3&&(10==a[1]&&a[3]<14||a[1]<10)&&(he=!1)),{bWin:Ie,bMac:ce,bLinux:q,bMobile:Y,bPad:N,bChromeOS:m,bHarmonyOS:l,bArm64:F,bMips64:B,bEmbed:A,bAndroid:I,biPhone:p,biPad:_,bWin64:_e,bWOW64:ie,bOSx64:he,bIE:Q,bEdge:ye,bChrome:Z,bFirefox:ee,bSafari:oe,bOpera:Ee,bNexus:T,bUC:v,b360SE:ge,bMaxthon:Re,bTencentTraveler:G,bTheWorld:k,bMetaSr:U,bAvant:H,bHuaWeiBrowser:b,bGecko:pe,bHTML5Edition:Ce,strBrowserVersion:Te,IEMode:le}})}(w.Lib),function(e){var t=20210305;if(!(e._defineProperty_ver&&e._defineProperty_ver>=t)){e._defineProperty_ver=t;var n=!1;if(!("userAgentData"in navigator)){var h,r=navigator;h=e.getNavInfoByUserAgent(r.userAgent,r.platform),w.navInfo=h,h.bIE&&(n=8==h.strBrowserVersion)}n?Object.defineProperty=function(d,s,i){d[s]=i.value||i.get&&i.get()}:Object.defineProperty||(Object.defineProperty=function(d,s,i){var u=d[s],f=function(){return i.get.apply(d,[u])},a=function(c){return u=i.set.apply(d,[c])};if(d.__defineGetter__)d.__defineGetter__(s,f),d.__defineSetter__(s,a);else{var o=function(c){event.propertyName==s&&(d.detachEvent("onpropertychange",o),a(d[s]),d[s]=f,d[s].toString=f,d.attachEvent("onpropertychange",o))};d[s]=f,d[s].toString=f,d.attachEvent("onpropertychange",o)}}),Object.create||(Object.create=function(d,s){if("object"!=typeof d&&"function"!=typeof d)return{};if(null===d)return{};if(typeof s<"u")return{};function i(){}return i.prototype=d,new i})}}(w.Lib),function(e,t){var l,m,n="",d=e.getLogger(),s=e.isDef,i=e.each,o={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},c={},I=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function p(v){var T=typeof v;return null==v||"object"!==T&&"function"!==T}function _(v){return encodeURIComponent(String(v))}i(o,function(v,T){c[v]=T}),e.mix(e,{urlEncode:_,urlDecode:function(v){return decodeURIComponent(v.replace(/\+/g," "))},fromUnicode:function(v){return v.replace(/\\u([a-f\d]{4})/gi,function(T,D){return String.fromCharCode(parseInt(D,16))})},escapeHtml:function(v){return(v+"").replace(function g(){if(l)return l;var v=n;return i(o,function(T){v+=T+"|"}),v=v.slice(0,-1),l=new RegExp(v,"g")}(),function(T){return c[T]})},escapeRegExp:function(v){return v.replace(I,"\\$&")},unEscapeHtml:function(v){return v.replace(function C(){if(m)return m;var v=n;return i(c,function(T){v+=T+"|"}),v+="&#(\\d{1,5});",m=new RegExp(v,"g")}(),function(T,D){return o[T]||String.fromCharCode(+D)})},param:function(v,T,D,P){T=T||"&",D=D||"=",e.isUndef(P)&&(P=!0);var E=[];return i(v,function(M,O){var R=_(O);p(M)?(E.push(R),s(M)&&E.push(D,_(M+n)),E.push(T)):e.isArray(M)&&M.length&&i(M,function(F){p(F)&&(E.push(R,P?_("[]"):n),s(F)&&E.push(D,_(F+n)),E.push(T))})}),E.pop(),E.join(n)},unparam:function(v,T,D){if(!e.isString(v)||!(v=e.trim(v)))return{};D=D||"=";for(var E,R,F,P={},M=e.urlDecode,O=v.split(T=T||"&"),B=0,b=O.length;B<b;++B){if(-1===(E=e.indexOf(D,O[B])))R=M(O[B]),F=void 0;else{R=M(O[B].substring(0,E)),F=O[B].substring(E+1);try{F=M(F)}catch(A){d.error("decodeURIComponent error : "+F),d.error(A)}e.endsWith(R,"[]")&&(R=R.substring(0,R.length-2))}R in P?e.isArray(P[R])?P[R].push(F):P[R]=[P[R],F]:P[R]=F}return P}})}(w.Lib),function(e){var t=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function n(h,d){for(var s=[],i=0;i<h.length;i++){var u=h[i];!u||"."===u||(".."===u?s.length&&".."!==s[s.length-1]?s.pop():d&&s.push(".."):s.push(u))}return s}var r=e.Path={resolve:function(){var s,u,h="",i=arguments,f=0;for(s=i.length-1;s>=0&&!f;s--)e.isString(u=i[s])&&u&&(h=u+"/"+h,f="/"===u.charAt(0));return(f?"/":"")+n(e.filter(h.split("/"),function(a){return!!a}),!f).join("/")||"."},normalize:function(h){var d="/"===h.charAt(0),s="/"===h.slice(-1);return!(h=n(e.filter(h.split("/"),function(i){return!!i}),!d).join("/"))&&!d&&(h="."),h&&s&&(h+="/"),(d?"/":"")+h},join:function(){var h=e.makeArray(arguments);return r.normalize(e.filter(h,function(d){return d&&e.isString(d)}).join("/"))},relative:function(h,d){h=r.normalize(h),d=r.normalize(d);var u,f,s=e.filter(h.split("/"),function(c){return!!c}),i=[],a=e.filter(d.split("/"),function(c){return!!c}),o=Math.min(s.length,a.length);for(u=0;u<o&&s[u]===a[u];u++);for(f=u;u<s.length;)i.push(".."),u++;return(i=i.concat(a.slice(f))).join("/")},basename:function(h,d){var i;return i=(h.match(t)||[])[3]||"",d&&i&&i.slice(-1*d.length)===d&&(i=i.slice(0,-1*d.length)),i},dirname:function(h){var d=h.match(t)||[],s=d[1]||"",i=d[2]||"";return s||i?(i&&(i=i.substring(0,i.length-1)),s+i):"."},extname:function(h){return(h.match(t)||[])[4]||""}}}(w.Lib),function(e,t){function n(h){h._queryMap||(h._queryMap=e.unparam(h._query))}function r(h){this._query=h||""}r.prototype={constructor:r,clone:function(){return new r(this.toString())},reset:function(h){var d=this;return d._query=h||"",d._queryMap=null,d},count:function(){var d=0;return n(this),e.each(this._queryMap,function(s){e.isArray(s)?d+=s.length:d++}),d},has:function(h){var s;return n(this),s=this._queryMap,h?h in s:!e.isEmptyObject(s)},get:function(h){var s;return n(this),s=this._queryMap,h?s[h]:s},keys:function(){return n(this),e.keys(this._queryMap)},set:function(h,d){var i,s=this;return n(s),i=s._queryMap,e.isString(h)?s._queryMap[h]=d:(h instanceof r&&(h=h.get()),e.each(h,function(u,f){i[f]=u})),s},remove:function(h){var d=this;return n(d),h?delete d._queryMap[h]:d._queryMap={},d},add:function(h,d){var i,u,s=this;return e.isString(h)?(n(s),u=e.isUndef(u=(i=s._queryMap)[h])?d:[].concat(u).concat(d),i[h]=u):(h instanceof r&&(h=h.get()),e.each(h,function(f,a){s.add(a,f)})),s},toString:function(h){return n(this),e.param(this._queryMap,t,t,h)}},e.uriQuery=r}(w.Lib),function(e){var t=e.uriQuery,n=e.each,r=e.Path,h=e.getLogger(),d=/[#\/\?@]/g,s=/[#\?]/g,i=/[#@]/g,u=/#/g,f={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},a=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function c(I,p){return I.toLowerCase()===p.toLowerCase()}function l(I,p){return encodeURI(I).replace(p,function(g){return"%"+function o(I){return 1===I.length?"0"+I:I}(g.charCodeAt(0).toString(16))})}function m(I){if(I instanceof m)return I.clone();var p,g=this;return e.mix(g,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),p=m.getComponents(I),n(p,function(C,_){if(C=C||"","query"===_)g.query=new t(C);else{try{C=e.urlDecode(C)}catch(v){h.error(v+"urlDecode error : "+C)}g[_]=C}}),g}m.prototype={constructor:m,clone:function(){var I=new m,p=this;return n(f,function(g,C){I[C]=p[C]}),I.query=I.query.clone(),I},resolve:function(I){e.isString(I)&&(I=new m(I));var C,g=0,v=this.clone();return n(["scheme","userInfo","hostname","port","path","query","fragment"],function(T){if("path"===T)if(g)v[T]=I[T];else{var D=I.path;D&&(g=1,e.startsWith(D,"/")||(v.hostname&&!v.path?D="/"+D:v.path&&-1!==(C=v.path.lastIndexOf("/"))&&(D=v.path.slice(0,C+1)+D)),v.path=r.normalize(D))}else"query"===T?(g||I.query.toString())&&(v.query=I.query.clone(),g=1):(g||I[T])&&(v[T]=I[T],g=1)}),v},getScheme:function(){return this.scheme},setScheme:function(I){return this.scheme=I,this},getHostname:function(){return this.hostname},setHostname:function(I){return this.hostname=I,this},setUserInfo:function(I){return this.userInfo=I,this},getUserInfo:function(){return this.userInfo},setPort:function(I){return this.port=I,this},getPort:function(){return this.port},setPath:function(I){return this.path=I,this},getPath:function(){return this.path},setQuery:function(I){return e.isString(I)&&(e.startsWith(I,"?")&&(I=I.slice(1)),I=new t(l(I,i))),this.query=I,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(I){return e.startsWith(I,"#")&&(I=I.slice(1)),this.fragment=I,this},isSameOriginAs:function(I){var p=this;return c(p.hostname,I.hostname)&&c(p.scheme,I.scheme)&&c(p.port,I.port)},toString:function(I){var C,_,v,T,D,P,E,p=[],g=this;return(C=g.scheme)&&(p.push(l(C,d)),p.push(":")),(_=g.hostname)&&(p.push("//"),(E=g.userInfo)&&(p.push(l(E,d)),p.push("@")),p.push(encodeURIComponent(_)),(T=g.port)&&(p.push(":"),p.push(T))),(v=g.path)&&(_&&!e.startsWith(v,"/")&&(v="/"+v),v=r.normalize(v),p.push(l(v,s))),(P=g.query.toString.call(g.query,I))&&(p.push("?"),p.push(P)),(D=g.fragment)&&(p.push("#"),p.push(l(D,u))),p.join("")}},m.getComponents=function(I){var g=(I=I||"").match(a)||[],C={};return n(f,function(_,v){C[v]=g[_]}),C},e.Uri=m}(w.Lib),function(e,t){var n=e.Lib,r=n.win,h=20200622;if(!(n._promise_ver&&n.isNumber(n._promise_ver)&&n._promise_ver>=h)){if(n._promise_ver=h,n.isFunction(r.__zone_symbol__Promise)&&(n.nativePromise=r.__zone_symbol__Promise),Rt&&Rt.Promise)return n.Promise=Rt.Promise,void(n.nativePromise||(n.nativePromise=n.Promise));if(r&&r.Promise)return n.Promise=r.Promise,void(n.nativePromise||(n.nativePromise=n.Promise));r.Map||(r.Map=function(){this.keys=[],this.data={},this.set=function(d,s){null==this.data[d]&&-1==this.keys.indexOf(d)&&this.keys.push(d),this.data[d]=s},this.get=function(d){return this.data[d]}}),function(d){if("object"==typeof exports&&typeof module<"u")module.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var s;typeof window<"u"?s=window:typeof global<"u"?s=global:typeof Rt<"u"&&(s=Rt),s.Promise=d()}}(function(){return function u(f,a,o){function c(I,p){if(!a[I]){if(!f[I]){var g="function"==typeof _dereq_&&_dereq_;if(!p&&g)return g(I,!0);if(l)return l(I,!0);var C=new Error("Cannot find module '"+I+"'");throw C.code="MODULE_NOT_FOUND",C}var _=a[I]={exports:{}};f[I][0].call(_.exports,function(v){return c(f[I][1][v]||v)},_,_.exports,u,f,a,o)}return a[I].exports}for(var l="function"==typeof _dereq_&&_dereq_,m=0;m<o.length;m++)c(o[m]);return c}({1:[function(u,f,a){f.exports=function(o){function c(m){var I=new l(m),p=I.promise();return I.setHowMany(1),I.setUnwrap(),I.init(),p}var l=o._SomePromiseArray;o.any=function(m){return c(m)},o.prototype.any=function(){return c(this)}}},{}],2:[function(u,f,a){function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new _(16),this._normalQueue=new _(16),this._haveDrainedQueues=!1;var v=this;this.drainQueues=function(){v._drainQueues()},this._schedule=C}function I(v){for(;v.length()>0;)p(v)}function p(v){var T=v.shift();if("function"!=typeof T)T._settlePromises();else{var D=v.shift(),P=v.shift();T.call(D,P)}}var g;try{throw new Error}catch(v){g=v}var C=u("./schedule"),_=u("./queue");o.prototype.setScheduler=function(v){var T=this._schedule;return this._schedule=v,this._customScheduler=!0,T},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(v,T){T?(process.stderr.write("Fatal "+(v instanceof Error?v.stack:v)+"\n"),process.exit(2)):this.throwLater(v)},o.prototype.throwLater=function(v,T){if(1===arguments.length&&(T=v,v=function(){throw T}),typeof setTimeout<"u")setTimeout(function(){v(T)},0);else try{this._schedule(function(){v(T)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},o.prototype.invokeLater=function c(v,T,D){this._lateQueue.push(v,T,D),this._queueTick()},o.prototype.invoke=function l(v,T,D){this._normalQueue.push(v,T,D),this._queueTick()},o.prototype.settlePromises=function m(v){this._normalQueue._pushOne(v),this._queueTick()},o.prototype._drainQueues=function(){I(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,I(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},f.exports=o,f.exports.firstLineError=g},{"./queue":26,"./schedule":29}],3:[function(u,f,a){f.exports=function(o,c,l,m){var I=!1,p=function(v,T){this._reject(T)},g=function(v,T){T.promiseRejectionQueued=!0,T.bindingPromise._then(p,p,null,this,v)},C=function(v,T){0==(50397184&this._bitField)&&this._resolveCallback(T.target)},_=function(v,T){T.promiseRejectionQueued||this._reject(v)};o.prototype.bind=function(v){I||(I=!0,o.prototype._propagateFrom=m.propagateFromFunction(),o.prototype._boundValue=m.boundValueFunction());var T=l(v),D=new o(c);D._propagateFrom(this,1);var P=this._target();if(D._setBoundTo(T),T instanceof o){var E={promiseRejectionQueued:!1,promise:D,target:P,bindingPromise:T};P._then(c,g,void 0,D,E),T._then(C,_,void 0,D,E),D._setOnCancel(T)}else D._resolveCallback(P);return D},o.prototype._setBoundTo=function(v){void 0!==v?(this._bitField=2097152|this._bitField,this._boundTo=v):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(v,T){return o.resolve(T).bind(v)}}},{}],4:[function(u,f,a){var c;typeof Promise<"u"&&(c=Promise);var l=u("./promise")();l.noConflict=function o(){try{Promise===l&&(Promise=c)}catch{}return l},f.exports=l},{"./promise":22}],5:[function(u,f,a){var o=Object.create;if(o){var c=o(null),l=o(null);c[" size"]=l[" size"]=0}f.exports=function(m){function p(D){var E=function I(D,P){var E;if(null!=D&&(E=D[P]),"function"!=typeof E){var M="Object "+v.classString(D)+" has no method '"+v.toString(P)+"'";throw new m.TypeError(M)}return E}(D,this.pop());return E.apply(D,this)}function g(D){return D[this]}function C(D){var P=+this;return 0>P&&(P=Math.max(0,P+D.length)),D[P]}var v=u("./util"),T=v.canEvaluate;m.prototype.call=function(D){var P=[].slice.call(arguments,1);return P.push(D),this._then(p,void 0,void 0,P,void 0)},m.prototype.get=function(D){var P;if("number"==typeof D)P=C;else if(T){var M=(void 0)(D);P=null!==M?M:g}else P=g;return this._then(P,void 0,void 0,D,void 0)}}},{"./util":36}],6:[function(u,f,a){f.exports=function(o,c,l,m){var I=u("./util"),p=I.tryCatch,g=I.errorObj,C=o._async;o.prototype.break=o.prototype.cancel=function(){if(!m.cancellation())return this._warn("cancellation is disabled");for(var _=this,v=_;_._isCancellable();){if(!_._cancelBy(v)){v._isFollowing()?v._followee().cancel():v._cancelBranched();break}var T=_._cancellationParent;if(null==T||!T._isCancellable()){_._isFollowing()?_._followee().cancel():_._cancelBranched();break}_._isFollowing()&&_._followee().cancel(),_._setWillBeCancelled(),v=_,_=T}},o.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},o.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},o.prototype._cancelBy=function(_){return _===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},o.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},o.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),C.invoke(this._cancelPromises,this,void 0))},o.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},o.prototype._unsetOnCancel=function(){this._onCancelField=void 0},o.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},o.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},o.prototype._doInvokeOnCancel=function(_,v){if(I.isArray(_))for(var T=0;T<_.length;++T)this._doInvokeOnCancel(_[T],v);else if(void 0!==_)if("function"==typeof _){if(!v){var D=p(_).call(this._boundValue());D===g&&(this._attachExtraTrace(D.e),C.throwLater(D.e))}}else _._resultCancelled(this)},o.prototype._invokeOnCancel=function(){var _=this._onCancel();this._unsetOnCancel(),C.invoke(this._doInvokeOnCancel,this,_)},o.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},o.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(u,f,a){f.exports=function(o){var l=u("./util"),m=u("./es5").keys,I=l.tryCatch,p=l.errorObj;return function c(g,C,_){return function(v){var T=_._boundValue();e:for(var D=0;D<g.length;++D){var P=g[D];if(P===Error||null!=P&&P.prototype instanceof Error){if(v instanceof P)return I(C).call(T,v)}else if("function"==typeof P){var E=I(P).call(T,v);if(E===p)return E;if(E)return I(C).call(T,v)}else if(l.isObject(v)){for(var M=m(P),O=0;O<M.length;++O){var R=M[O];if(P[R]!=v[R])continue e}return I(C).call(T,v)}}return o}}}},{"./es5":13,"./util":36}],8:[function(u,f,a){f.exports=function(o){function c(){this._trace=new c.CapturedTrace(m())}function m(){var g=p.length-1;return g>=0?p[g]:void 0}var I=!1,p=[];return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},c.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,p.push(this._trace))},c.prototype._popContext=function(){if(void 0!==this._trace){var g=p.pop(),C=g._promiseCreated;return g._promiseCreated=null,C}return null},c.CapturedTrace=null,c.create=function l(){return I?new c:void 0},c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var g=o.prototype._pushContext,C=o.prototype._popContext,_=o._peekContext,v=o.prototype._peekContext,T=o.prototype._promiseCreated;c.deactivateLongStackTraces=function(){o.prototype._pushContext=g,o.prototype._popContext=C,o._peekContext=_,o.prototype._peekContext=v,o.prototype._promiseCreated=T,I=!1},I=!0,o.prototype._pushContext=c.prototype._pushContext,o.prototype._popContext=c.prototype._popContext,o._peekContext=o.prototype._peekContext=m,o.prototype._promiseCreated=function(){var D=this._peekContext();D&&null==D._promiseCreated&&(D._promiseCreated=this)}},c}},{}],9:[function(u,f,a){f.exports=function(o,c,l,m){function I(we,Ae){return{promise:Ae}}function p(){return!1}function g(we,Ae,Ue){var He=this;try{we(Ae,Ue,function(Ke){if("function"!=typeof Ke)throw new TypeError("onCancel must be a function, got: "+H.toString(Ke));He._attachCancellationCallback(Ke)})}catch(Ke){return Ke}}function C(we){if(!this._isCancellable())return this;var Ae=this._onCancel();void 0!==Ae?H.isArray(Ae)?Ae.push(we):this._setOnCancel([Ae,we]):this._setOnCancel(we)}function _(){return this._onCancelField}function v(we){this._onCancelField=we}function T(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(we,Ae){if(0!=(1&Ae)){this._cancellationParent=we;var Ue=we._branchesRemainingToCancel;void 0===Ue&&(Ue=0),we._branchesRemainingToCancel=Ue+1}0!=(2&Ae)&&we._isBound()&&this._setBoundTo(we._boundTo)}function E(){var we=this._boundTo;return void 0!==we&&we instanceof o?we.isFulfilled()?we.value():void 0:we}function M(){this._trace=new oe(this._peekContext())}function O(we,Ae){if(ye(we)){var Ue=this._trace;if(void 0!==Ue&&Ae&&(Ue=Ue._parent),void 0!==Ue)Ue.attachExtraTrace(we);else if(!we.__stackCleaned__){var He=_e(we);H.notEnumerableProp(we,"stack",He.message+"\n"+He.stack.join("\n")),H.notEnumerableProp(we,"__stackCleaned__",!0)}}}function R(){this._trace=void 0}function b(we,Ae,Ue){if(Je.warnings){var He,Ke=new U(we);if(Ae)Ue._attachExtraTrace(Ke);else if(Je.longStackTraces&&(He=o._peekContext()))He.attachExtraTrace(Ke);else{var rt=_e(Ke);Ke.stack=rt.message+"\n"+rt.stack.join("\n")}ve("warning",Ke)||ce(Ke,"",!0)}}function ne(we){for(var Ae=[],Ue=0;Ue<we.length;++Ue){var He=we[Ue],Ke="    (No stack trace)"===He||le.test(He),rt=Ke&&Ve(He);Ke&&!rt&&(Ce&&" "!==He.charAt(0)&&(He="    "+He),Ae.push(He))}return Ae}function _e(we){var Ae=we.stack,Ue=we.toString();return Ae="string"==typeof Ae&&Ae.length>0?function Ie(we){for(var Ae=we.stack.replace(/\s+$/g,"").split("\n"),Ue=0;Ue<Ae.length;++Ue){var He=Ae[Ue];if("    (No stack trace)"===He||le.test(He))break}return Ue>0&&"SyntaxError"!=we.name&&(Ae=Ae.slice(Ue)),Ae}(we):["    (No stack trace)"],{message:Ue,stack:"SyntaxError"==we.name?Ae:ne(Ae)}}function ce(we,Ae,Ue){var He;typeof console<"u"&&(He=H.isObject(we)?Ae+pe(we.stack,we):Ae+String(we),"function"==typeof Re?Re(He,Ue):("function"==typeof console.log||"object"==typeof console.log)&&console.log(He))}function q(we,Ae,Ue,He){var Ke=!1;try{"function"==typeof Ae&&(Ke=!0,"rejectionHandled"===we?Ae(He):Ae(Ue,He))}catch(rt){k.throwLater(rt)}"unhandledRejection"===we?ve(we,Ue,He)||Ke||ce(Ue,"Unhandled rejection "):ve(we,He)}function he(we){var Ae;if("function"==typeof we)Ae="[function "+(we.name||"anonymous")+"]";else{if(Ae=we&&"function"==typeof we.toString?we.toString():H.toString(we),/\[object [a-zA-Z0-9$_]+\]/.test(Ae))try{Ae=JSON.stringify(we)}catch{}0===Ae.length&&(Ae="(empty array)")}return"(<"+function ie(we){return we.length<41?we:we.substr(0,38)+"..."}(Ae)+">, no stack trace)"}function V(){return"function"==typeof Ne}function J(we){var Ae=we.match(Ye);return Ae?{fileName:Ae[1],line:parseInt(Ae[2],10)}:void 0}function oe(we){this._parent=we,this._promisesCreated=0;var Ae=this._length=1+(void 0===we?0:we._length);Ne(this,oe),Ae>32&&this.uncycle()}var Ee,ge,Re,G,k=o._async,U=u("./errors").Warning,H=u("./util"),ee=u("./es5"),ye=H.canAttachTrace,Z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,se=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,le=null,pe=null,Ce=!1,Te=!(0==H.env("BLUEBIRD_DEBUG")||!H.env("BLUEBIRD_DEBUG")&&"development"!==H.env("NODE_ENV")),Be=!(0==H.env("BLUEBIRD_WARNINGS")||!Te&&!H.env("BLUEBIRD_WARNINGS")),xe=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!Te&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),me=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Be||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function we(){for(var He=0;He<Ue.length;++He)Ue[He]._notifyUnhandledRejection();Ae()}function Ae(){Ue.length=0}var Ue=[];G=function(He){Ue.push(He),setTimeout(we,1)},ee.defineProperty(o,"_unhandledRejectionCheck",{value:we}),ee.defineProperty(o,"_unhandledRejectionClear",{value:Ae})})(),o.prototype.suppressUnhandledRejections=function(){var we=this._target();we._bitField=-1048577&we._bitField|524288},o.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),G(this))},o.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",Ee,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},o.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var we=this._settledValue();this._setUnhandledRejectionIsNotified(),q("unhandledRejection",ge,we,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},o.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},o.prototype._warn=function(we,Ae,Ue){return b(we,Ae,Ue||this)},o.onPossiblyUnhandledRejection=function(we){var Ae=o._getContext();ge=H.contextBind(Ae,we)},o.onUnhandledRejectionHandled=function(we){var Ae=o._getContext();Ee=H.contextBind(Ae,we)};var Me=function(){};o.longStackTraces=function(){if(k.haveItemsQueued()&&!Je.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Je.longStackTraces&&V()){var we=o.prototype._captureStackTrace,Ae=o.prototype._attachExtraTrace,Ue=o.prototype._dereferenceTrace;Je.longStackTraces=!0,Me=function(){if(k.haveItemsQueued()&&!Je.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");o.prototype._captureStackTrace=we,o.prototype._attachExtraTrace=Ae,o.prototype._dereferenceTrace=Ue,c.deactivateLongStackTraces(),Je.longStackTraces=!1},o.prototype._captureStackTrace=M,o.prototype._attachExtraTrace=O,o.prototype._dereferenceTrace=R,c.activateLongStackTraces()}},o.hasLongStackTraces=function(){return Je.longStackTraces&&V()};var Oe={unhandledrejection:{before:function(){var we=H.global.onunhandledrejection;return H.global.onunhandledrejection=null,we},after:function(we){H.global.onunhandledrejection=we}},rejectionhandled:{before:function(){var we=H.global.onrejectionhandled;return H.global.onrejectionhandled=null,we},after:function(we){H.global.onrejectionhandled=we}}},ze=function(){var we=function(Ue,He){if(!Ue)return!H.global.dispatchEvent(He);var Ke;try{return Ke=Ue.before(),!H.global.dispatchEvent(He)}finally{Ue.after(Ke)}};try{if("function"==typeof CustomEvent){var Ae=new CustomEvent("CustomEvent");return H.global.dispatchEvent(Ae),function(He,Ke){He=He.toLowerCase();var st=new CustomEvent(He,{detail:Ke,cancelable:!0});return ee.defineProperty(st,"promise",{value:Ke.promise}),ee.defineProperty(st,"reason",{value:Ke.reason}),we(Oe[He],st)}}return"function"==typeof Event?(Ae=new Event("CustomEvent"),H.global.dispatchEvent(Ae),function(He,Ke){He=He.toLowerCase();var rt=new Event(He,{cancelable:!0});return rt.detail=Ke,ee.defineProperty(rt,"promise",{value:Ke.promise}),ee.defineProperty(rt,"reason",{value:Ke.reason}),we(Oe[He],rt)}):((Ae=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(Ae),function(Ue,He){Ue=Ue.toLowerCase();var Ke=document.createEvent("CustomEvent");return Ke.initCustomEvent(Ue,!1,!0,He),we(Oe[Ue],Ke)})}catch{}return function(){return!1}}(),Ze=H.isNode?function(){return process.emit.apply(process,arguments)}:H.global?function(we){var Ae="on"+we.toLowerCase(),Ue=H.global[Ae];return!!Ue&&(Ue.apply(H.global,[].slice.call(arguments,1)),!0)}:function(){return!1},ot={promiseCreated:I,promiseFulfilled:I,promiseRejected:I,promiseResolved:I,promiseCancelled:I,promiseChained:function(we,Ae,Ue){return{promise:Ae,child:Ue}},warning:function(we,Ae){return{warning:Ae}},unhandledRejection:function(we,Ae,Ue){return{reason:Ae,promise:Ue}},rejectionHandled:I},ve=function(we){var Ae=!1;try{Ae=Ze.apply(null,arguments)}catch(He){k.throwLater(He),Ae=!0}var Ue=!1;try{Ue=ze(we,ot[we].apply(null,arguments))}catch(He){k.throwLater(He),Ue=!0}return Ue||Ae};o.config=function(we){if("longStackTraces"in(we=Object(we))&&(we.longStackTraces?o.longStackTraces():!we.longStackTraces&&o.hasLongStackTraces()&&Me()),"warnings"in we){var Ae=we.warnings;Je.warnings=!!Ae,me=Je.warnings,H.isObject(Ae)&&"wForgottenReturn"in Ae&&(me=!!Ae.wForgottenReturn)}if("cancellation"in we&&we.cancellation&&!Je.cancellation){if(k.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=T,o.prototype._propagateFrom=D,o.prototype._onCancel=_,o.prototype._setOnCancel=v,o.prototype._attachCancellationCallback=C,o.prototype._execute=g,Fe=D,Je.cancellation=!0}if("monitoring"in we&&(we.monitoring&&!Je.monitoring?(Je.monitoring=!0,o.prototype._fireEvent=ve):!we.monitoring&&Je.monitoring&&(Je.monitoring=!1,o.prototype._fireEvent=p)),"asyncHooks"in we&&H.nodeSupportsAsyncResource){var He=!!we.asyncHooks;Je.asyncHooks!==He&&(Je.asyncHooks=He,He?l():m())}return o},o.prototype._fireEvent=p,o.prototype._execute=function(we,Ae,Ue){try{we(Ae,Ue)}catch(He){return He}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(we){},o.prototype._attachCancellationCallback=function(we){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._dereferenceTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(we,Ae){};var Fe=function P(we,Ae){0!=(2&Ae)&&we._isBound()&&this._setBoundTo(we._boundTo)},Ve=function(){return!1},Ye=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(oe,Error),c.CapturedTrace=oe,oe.prototype.uncycle=function(){var we=this._length;if(!(2>we)){for(var Ae=[],Ue={},He=0,Ke=this;void 0!==Ke;++He)Ae.push(Ke),Ke=Ke._parent;for(He=(we=this._length=He)-1;He>=0;--He){var rt=Ae[He].stack;void 0===Ue[rt]&&(Ue[rt]=He)}for(He=0;we>He;++He){var ht=Ue[Ae[He].stack];if(void 0!==ht&&ht!==He){ht>0&&(Ae[ht-1]._parent=void 0,Ae[ht-1]._length=1),Ae[He]._parent=void 0,Ae[He]._length=1;var ft=He>0?Ae[He-1]:this;we-1>ht?(ft._parent=Ae[ht+1],ft._parent.uncycle(),ft._length=ft._parent._length+1):(ft._parent=void 0,ft._length=1);for(var pt=ft._length+1,Ct=He-2;Ct>=0;--Ct)Ae[Ct]._length=pt,pt++;return}}}},oe.prototype.attachExtraTrace=function(we){if(!we.__stackCleaned__){this.uncycle();for(var Ae=_e(we),Ue=Ae.message,He=[Ae.stack],Ke=this;void 0!==Ke;)He.push(ne(Ke.stack.split("\n"))),Ke=Ke._parent;(function Y(we){for(var Ae=we[0],Ue=1;Ue<we.length;++Ue){for(var He=we[Ue],Ke=Ae.length-1,rt=Ae[Ke],st=-1,ht=He.length-1;ht>=0;--ht)if(He[ht]===rt){st=ht;break}for(ht=st;ht>=0&&Ae[Ke]===He[ht];--ht)Ae.pop(),Ke--;Ae=He}})(He),function N(we){for(var Ae=0;Ae<we.length;++Ae)(0===we[Ae].length||Ae+1<we.length&&we[Ae][0]===we[Ae+1][0])&&(we.splice(Ae,1),Ae--)}(He),H.notEnumerableProp(we,"stack",function A(we,Ae){for(var Ue=0;Ue<Ae.length-1;++Ue)Ae[Ue].push("From previous event:"),Ae[Ue]=Ae[Ue].join("\n");return Ue<Ae.length&&(Ae[Ue]=Ae[Ue].join("\n")),we+"\n"+Ae.join("\n")}(Ue,He)),H.notEnumerableProp(we,"__stackCleaned__",!0)}};var Ne=function(){var we=/^\s*at\s*/,Ae=function(rt,st){return"string"==typeof rt?rt:void 0!==st.name&&void 0!==st.message?st.toString():he(st)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,le=we,pe=Ae;var Ue=Error.captureStackTrace;return Ve=function(rt){return Z.test(rt)},function(rt,st){Error.stackTraceLimit+=6,Ue(rt,st),Error.stackTraceLimit-=6}}var Ke,He=new Error;if("string"==typeof He.stack&&He.stack.split("\n")[0].indexOf("stackDetection@")>=0)return le=/@/,pe=Ae,Ce=!0,function(rt){rt.stack=(new Error).stack};try{throw new Error}catch(rt){Ke="stack"in rt}return"stack"in He||!Ke||"number"!=typeof Error.stackTraceLimit?(pe=function(rt,st){return"string"==typeof rt?rt:"object"!=typeof st&&"function"!=typeof st||void 0===st.name||void 0===st.message?he(st):st.toString()},null):(le=we,pe=Ae,function(rt){Error.stackTraceLimit+=6;try{throw new Error}catch(st){rt.stack=st.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&typeof console.warn<"u"&&(Re=function(we){console&&console.warn&&console.warn(we)},H.isNode&&process.stderr.isTTY?Re=function(we,Ae){console&&console.warn&&console.warn((Ae?"\x1b[33m":"\x1b[31m")+we+"\x1b[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(Re=function(we,Ae){console&&console.warn&&console.warn("%c"+we,Ae?"color: darkorange":"color: red")}));var Je={warnings:Be,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return xe&&o.longStackTraces(),{asyncHooks:function(){return Je.asyncHooks},longStackTraces:function(){return Je.longStackTraces},warnings:function(){return Je.warnings},cancellation:function(){return Je.cancellation},monitoring:function(){return Je.monitoring},propagateFromFunction:function(){return Fe},boundValueFunction:function(){return E},checkForgottenReturns:function F(we,Ae,Ue,He,Ke){if(void 0===we&&null!==Ae&&me){if(void 0!==Ke&&Ke._returnedNonUndefined()||0==(65535&He._bitField))return;Ue&&(Ue+=" ");var rt="",st="";if(Ae._trace){for(var ht=Ae._trace.stack.split("\n"),ft=ne(ht),pt=ft.length-1;pt>=0;--pt){var Ct=ft[pt];if(!Q.test(Ct)){var St=Ct.match(se);St&&(rt="at "+St[1]+":"+St[2]+":"+St[3]+" ");break}}if(ft.length>0){var At=ft[0];for(pt=0;pt<ht.length;++pt)if(ht[pt]===At){pt>0&&(st="\n"+ht[pt-1]);break}}}He._warn("a promise was created in a "+Ue+"handler "+rt+"but was not returned from it, see http://goo.gl/rRqMUw"+st,!0,Ae)}},setBounds:function te(we,Ae){if(V()){for(var Ue,He,Ke=(we.stack||"").split("\n"),rt=(Ae.stack||"").split("\n"),st=-1,ht=-1,ft=0;ft<Ke.length;++ft)if(pt=J(Ke[ft])){Ue=pt.fileName,st=pt.line;break}for(ft=0;ft<rt.length;++ft){var pt;if(pt=J(rt[ft])){He=pt.fileName,ht=pt.line;break}}0>st||0>ht||!Ue||!He||Ue!==He||st>=ht||(Ve=function(Ct){if(Z.test(Ct))return!0;var St=J(Ct);return!!(St&&St.fileName===Ue&&st<=St.line&&St.line<=ht)})}},warn:b,deprecated:function B(we,Ae){var Ue=we+" is deprecated and will be removed in a future version.";return Ae&&(Ue+=" Use "+Ae+" instead."),b(Ue)},CapturedTrace:oe,fireDomEvent:ze,fireGlobalEvent:Ze}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(u,f,a){f.exports=function(o){function c(){return this.value}function l(){throw this.reason}o.prototype.return=o.prototype.thenReturn=function(m){return m instanceof o&&m.suppressUnhandledRejections(),this._then(c,void 0,void 0,{value:m},void 0)},o.prototype.throw=o.prototype.thenThrow=function(m){return this._then(l,void 0,void 0,{reason:m},void 0)},o.prototype.catchThrow=function(m){if(arguments.length<=1)return this._then(void 0,l,void 0,{reason:m},void 0);var I=arguments[1],p=function(){throw I};return this.caught(m,p)},o.prototype.catchReturn=function(m){if(arguments.length<=1)return m instanceof o&&m.suppressUnhandledRejections(),this._then(void 0,c,void 0,{value:m},void 0);var I=arguments[1];I instanceof o&&I.suppressUnhandledRejections();var p=function(){return I};return this.caught(m,p)}}},{}],11:[function(u,f,a){f.exports=function(o,c){function l(){return p(this)}var I=o.reduce,p=o.all;o.prototype.each=function(g){return I(this,g,c,0)._then(l,void 0,void 0,this,void 0)},o.prototype.mapSeries=function(g){return I(this,g,c,c)},o.each=function(g,C){return I(g,C,c,0)._then(l,void 0,void 0,g,void 0)},o.mapSeries=function m(g,C){return I(g,C,c,c)}}},{}],12:[function(u,f,a){function o(F,B){function b(A){return this instanceof b?(_(this,"message","string"==typeof A?A:B),_(this,"name",F),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new b(A)}return C(b,Error),b}function c(F){return this instanceof c?(_(this,"name","OperationalError"),_(this,"message",F),this.cause=F,this.isOperational=!0,void(F instanceof Error?(_(this,"message",F.message),_(this,"stack",F.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new c(F)}var l,m,I=u("./es5"),p=I.freeze,g=u("./util"),C=g.inherits,_=g.notEnumerableProp,v=o("Warning","warning"),T=o("CancellationError","cancellation error"),D=o("TimeoutError","timeout error"),P=o("AggregateError","aggregate error");try{l=TypeError,m=RangeError}catch{l=o("TypeError","type error"),m=o("RangeError","range error")}for(var E="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),M=0;M<E.length;++M)"function"==typeof Array.prototype[E[M]]&&(P.prototype[E[M]]=Array.prototype[E[M]]);I.defineProperty(P.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),P.prototype.isOperational=!0;var O=0;P.prototype.toString=function(){var F=Array(4*O+1).join(" "),B="\n"+F+"AggregateError of:\n";O++,F=Array(4*O+1).join(" ");for(var b=0;b<this.length;++b){for(var A=this[b]===this?"[Circular AggregateError]":this[b]+"",N=A.split("\n"),Y=0;Y<N.length;++Y)N[Y]=F+N[Y];B+=(A=N.join("\n"))+"\n"}return O--,B},C(c,Error);var R=Error.__BluebirdErrorTypes__;R||(R=p({CancellationError:T,TimeoutError:D,OperationalError:c,RejectionError:c,AggregateError:P}),I.defineProperty(Error,"__BluebirdErrorTypes__",{value:R,writable:!1,enumerable:!1,configurable:!1})),f.exports={Error,TypeError:l,RangeError:m,CancellationError:R.CancellationError,OperationalError:R.OperationalError,TimeoutError:R.TimeoutError,AggregateError:R.AggregateError,Warning:v}},{"./es5":13,"./util":36}],13:[function(u,f,a){var o=function(){return void 0===this}();if(o)f.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function(T,D){var P=Object.getOwnPropertyDescriptor(T,D);return!(P&&!P.writable&&!P.set)}};else{var c={}.hasOwnProperty,l={}.toString,m={}.constructor.prototype,I=function(T){var D=[];for(var P in T)c.call(T,P)&&D.push(P);return D};f.exports={isArray:function(T){try{return"[object Array]"===l.call(T)}catch{return!1}},keys:I,names:I,defineProperty:function(T,D,P){return T[D]=P.value,T},getDescriptor:function(T,D){return{value:T[D]}},freeze:function(T){return T},getPrototypeOf:function(T){try{return Object(T).constructor.prototype}catch{return m}},isES5:o,propertyIsWritable:function(){return!0}}}},{}],14:[function(u,f,a){f.exports=function(o,c){var l=o.map;o.prototype.filter=function(m,I){return l(this,m,I,c)},o.filter=function(m,I,p){return l(m,I,p,c)}}},{}],15:[function(u,f,a){f.exports=function(o,c,l){function m(E,M,O){this.promise=E,this.type=M,this.handler=O,this.called=!1,this.cancelPromise=null}function I(E){this.finallyHandler=E}function p(E,M){return null!=E.cancelPromise&&(arguments.length>1?E.cancelPromise._reject(M):E.cancelPromise._cancel(),E.cancelPromise=null,!0)}function g(){return _.call(this,this.promise._target()._settledValue())}function C(E){return p(this,E)?void 0:(D.e=E,D)}function _(E){var M=this.promise,O=this.handler;if(!this.called){this.called=!0;var R=this.isFinallyHandler()?O.call(M._boundValue()):O.call(M._boundValue(),E);if(R===l)return R;if(void 0!==R){M._setReturnedNonUndefined();var F=c(R,M);if(F instanceof o){if(null!=this.cancelPromise){if(F._isCancelled()){var B=new T("late cancellation observer");return M._attachExtraTrace(B),D.e=B,D}F.isPending()&&F._attachCancellationCallback(new I(this))}return F._then(g,C,void 0,this,void 0)}}}return M.isRejected()?(p(this),D.e=E,D):(p(this),E)}var v=u("./util"),T=o.CancellationError,D=v.errorObj,P=u("./catch_filter")(l);return m.prototype.isFinallyHandler=function(){return 0===this.type},I.prototype._resultCancelled=function(){p(this.finallyHandler)},o.prototype._passThrough=function(E,M,O,R){return"function"!=typeof E?this.then():this._then(O,R,void 0,new m(this,M,E),void 0)},o.prototype.lastly=o.prototype.finally=function(E){return this._passThrough(E,0,_,_)},o.prototype.tap=function(E){return this._passThrough(E,1,_)},o.prototype.tapCatch=function(E){var M=arguments.length;if(1===M)return this._passThrough(E,1,void 0,_);var O,R=new Array(M-1),F=0;for(O=0;M-1>O;++O){var B=arguments[O];if(!v.isObject(B))return o.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+v.classString(B)));R[F++]=B}R.length=F;var b=arguments[O];return this._passThrough(P(R,b,this),1,void 0,_)},m}},{"./catch_filter":7,"./util":36}],16:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function C(M,O,R,F){if(p.cancellation()){var B=new o(l),b=this._finallyPromise=new o(l);this._promise=B.lastly(function(){return b}),B._captureStackTrace(),B._setOnCancel(this)}else(this._promise=new o(l))._captureStackTrace();this._stack=F,this._generatorFunction=M,this._receiver=O,this._generator=void 0,this._yieldHandlers="function"==typeof R?[R].concat(E):E,this._yieldedPromise=null,this._cancellationPhase=!1}var v=u("./errors").TypeError,T=u("./util"),D=T.errorObj,P=T.tryCatch,E=[];T.inherits(C,I),C.prototype._isResolved=function(){return null===this._promise},C.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},C.prototype._promiseCancelled=function(){if(!this._isResolved()){var M;if(typeof this._generator.return<"u")this._promise._pushContext(),M=P(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var R=new o.CancellationError("generator .return() sentinel");o.coroutine.returnSentinel=R,this._promise._attachExtraTrace(R),this._promise._pushContext(),M=P(this._generator.throw).call(this._generator,R),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(M)}},C.prototype._promiseFulfilled=function(M){this._yieldedPromise=null,this._promise._pushContext();var O=P(this._generator.next).call(this._generator,M);this._promise._popContext(),this._continue(O)},C.prototype._promiseRejected=function(M){this._yieldedPromise=null,this._promise._attachExtraTrace(M),this._promise._pushContext();var O=P(this._generator.throw).call(this._generator,M);this._promise._popContext(),this._continue(O)},C.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof o){var M=this._yieldedPromise;this._yieldedPromise=null,M.cancel()}},C.prototype.promise=function(){return this._promise},C.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},C.prototype._continue=function(M){var O=this._promise;if(M===D)return this._cleanup(),this._cancellationPhase?O.cancel():O._rejectCallback(M.e,!1);var R=M.value;if(!0===M.done)return this._cleanup(),this._cancellationPhase?O.cancel():O._resolveCallback(R);var F=m(R,this._promise);if(F instanceof o||(F=function g(M,O,R){for(var F=0;F<O.length;++F){R._pushContext();var B=P(O[F])(M);if(R._popContext(),B===D){R._pushContext();var b=o.reject(D.e);return R._popContext(),b}var A=m(B,R);if(A instanceof o)return A}return null}(F,this._yieldHandlers,this._promise),null!==F)){var B=(F=F._target())._bitField;0==(50397184&B)?(this._yieldedPromise=F,F._proxy(this,null)):0!=(33554432&B)?o._async.invoke(this._promiseFulfilled,this,F._value()):0!=(16777216&B)?o._async.invoke(this._promiseRejected,this,F._reason()):this._promiseCancelled()}else this._promiseRejected(new v("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(R))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},o.coroutine=function(M,O){if("function"!=typeof M)throw new v("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var R=Object(O).yieldHandler,F=C,B=(new Error).stack;return function(){var b=M.apply(this,arguments),A=new F(void 0,void 0,R,B),N=A.promise();return A._generator=b,A._promiseFulfilled(void 0),N}},o.coroutine.addYieldHandler=function(M){if("function"!=typeof M)throw new v("expecting a function but got "+T.classString(M));E.push(M)},o.spawn=function(M){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof M)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var O=new C(M,this),R=O.promise();return O._run(o.spawn),R}}},{"./errors":12,"./util":36}],17:[function(u,f,a){f.exports=function(o,c,l,m,I){u("./util"),o.join=function(){var g,C=arguments.length-1;C>0&&"function"==typeof arguments[C]&&(g=arguments[C]);var _=[].slice.call(arguments);g&&_.pop();var v=new c(_).promise();return void 0!==g?v.spread(g):v}}},{"./util":36}],18:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(P,E,M,O){this.constructor$(P),this._promise._captureStackTrace();var R=o._getContext();if(this._callback=_.contextBind(R,E),this._preservedValues=O===I?new Array(this.length()):null,this._limit=M,this._inFlight=0,this._queue=[],D.invoke(this._asyncInit,this,void 0),_.isArray(P))for(var F=0;F<P.length;++F){var B=P[F];B instanceof o&&B.suppressUnhandledRejections()}}function C(P,E,M,O){if("function"!=typeof E)return l("expecting a function but got "+_.classString(E));var R=0;if(void 0!==M){if("object"!=typeof M||null===M)return o.reject(new TypeError("options argument must be an object but it is "+_.classString(M)));if("number"!=typeof M.concurrency)return o.reject(new TypeError("'concurrency' must be a number but it is "+_.classString(M.concurrency)));R=M.concurrency}return new g(P,E,R="number"==typeof R&&isFinite(R)&&R>=1?R:0,O).promise()}var _=u("./util"),v=_.tryCatch,T=_.errorObj,D=o._async;_.inherits(g,c),g.prototype._asyncInit=function(){this._init$(void 0,-2)},g.prototype._init=function(){},g.prototype._promiseFulfilled=function(P,E){var M=this._values,O=this.length(),R=this._preservedValues,F=this._limit;if(0>E){if(M[E=-1*E-1]=P,F>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(F>=1&&this._inFlight>=F)return M[E]=P,this._queue.push(E),!1;null!==R&&(R[E]=P);var B=this._promise,b=this._callback,A=B._boundValue();B._pushContext();var N=v(b).call(A,P,E,O),Y=B._popContext();if(p.checkForgottenReturns(N,Y,null!==R?"Promise.filter":"Promise.map",B),N===T)return this._reject(N.e),!0;var ne=m(N,this._promise);if(ne instanceof o){var Ie=(ne=ne._target())._bitField;if(0==(50397184&Ie))return F>=1&&this._inFlight++,M[E]=ne,ne._proxy(this,-1*(E+1)),!1;if(0==(33554432&Ie))return 0!=(16777216&Ie)?(this._reject(ne._reason()),!0):(this._cancel(),!0);N=ne._value()}M[E]=N}return++this._totalResolved>=O&&(null!==R?this._filter(M,R):this._resolve(M),!0)},g.prototype._drainQueue=function(){for(var P=this._queue,E=this._limit,M=this._values;P.length>0&&this._inFlight<E;){if(this._isResolved())return;var O=P.pop();this._promiseFulfilled(M[O],O)}},g.prototype._filter=function(P,E){for(var M=E.length,O=new Array(M),R=0,F=0;M>F;++F)P[F]&&(O[R++]=E[F]);O.length=R,this._resolve(O)},g.prototype.preservedValues=function(){return this._preservedValues},o.prototype.map=function(P,E){return C(this,P,E,null)},o.map=function(P,E,M,O){return C(P,E,M,O)}}},{"./util":36}],19:[function(u,f,a){f.exports=function(o,c,l,m,I){var p=u("./util"),g=p.tryCatch;o.method=function(C){if("function"!=typeof C)throw new o.TypeError("expecting a function but got "+p.classString(C));return function(){var _=new o(c);_._captureStackTrace(),_._pushContext();var v=g(C).apply(this,arguments),T=_._popContext();return I.checkForgottenReturns(v,T,"Promise.method",_),_._resolveFromSyncValue(v),_}},o.attempt=o.try=function(C){if("function"!=typeof C)return m("expecting a function but got "+p.classString(C));var v,_=new o(c);if(_._captureStackTrace(),_._pushContext(),arguments.length>1){I.deprecated("calling Promise.try with more than 1 argument");var T=arguments[1],D=arguments[2];v=p.isArray(T)?g(C).apply(D,T):g(C).call(D,T)}else v=g(C)();var P=_._popContext();return I.checkForgottenReturns(v,P,"Promise.try",_),_._resolveFromSyncValue(v),_},o.prototype._resolveFromSyncValue=function(C){C===p.errorObj?this._rejectCallback(C.e,!1):this._resolveCallback(C,!0)}}},{"./util":36}],20:[function(u,f,a){function c(v){var T;if(function o(v){return v instanceof Error&&C.getPrototypeOf(v)===Error.prototype}(v)){(T=new g(v)).name=v.name,T.message=v.message,T.stack=v.stack;for(var D=C.keys(v),P=0;P<D.length;++P){var E=D[P];_.test(E)||(T[E]=v[E])}return T}return m.markAsOriginatingFromRejection(v),v}var m=u("./util"),I=m.maybeWrapAsError,g=u("./errors").OperationalError,C=u("./es5"),_=/^(?:name|message|stack|cause)$/;f.exports=function l(v,T){return function(D,P){if(null!==v){if(D){var E=c(I(D));v._attachExtraTrace(E),v._reject(E)}else if(T){var M=[].slice.call(arguments,1);v._fulfill(M)}else v._fulfill(P);v=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(u,f,a){f.exports=function(o){function c(_,v){if(!I.isArray(_))return l.call(this,_,v);var D=g(v).apply(this._boundValue(),[null].concat(_));D===C&&p.throwLater(D.e)}function l(_,v){var D=this._boundValue(),P=void 0===_?g(v).call(D,null):g(v).call(D,null,_);P===C&&p.throwLater(P.e)}function m(_,v){if(!_){var D=new Error(_+"");D.cause=_,_=D}var P=g(v).call(this._boundValue(),_);P===C&&p.throwLater(P.e)}var I=u("./util"),p=o._async,g=I.tryCatch,C=I.errorObj;o.prototype.asCallback=o.prototype.nodeify=function(_,v){if("function"==typeof _){var T=l;void 0!==v&&Object(v).spread&&(T=c),this._then(T,m,void 0,this,_)}return this}}},{"./util":36}],22:[function(u,f,a){f.exports=function(){function o(){}function l(k){k!==_e&&function c(k,U){if(null==k||k.constructor!==l)throw new ne("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof U)throw new ne("expecting a function but got "+T.classString(U))}(this,k),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(k),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function m(k){this.promise._resolveCallback(k)}function I(k){this.promise._rejectCallback(k,!1)}function p(k){var U=new l(_e);U._fulfillmentHandler0=k,U._rejectionHandler0=k,U._promise0=k,U._receiver0=k}var g=function(){return new ne("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},C=function(){return new l.PromiseInspection(this._target())},_=function(k){return l.reject(new ne(k))},v={},T=u("./util");T.setReflectHandler(C);var D=function(){var k=process.domain;return void 0===k?null:k},E=function(){return{domain:D(),async:null}},M=T.isNode&&T.nodeSupportsAsyncResource?u("async_hooks").AsyncResource:null,O=function(){return{domain:D(),async:new M("Bluebird::Promise")}},R=T.isNode?E:function(){return null};T.notEnumerableProp(l,"_getContext",R);var b=u("./es5"),A=u("./async"),N=new A;b.defineProperty(l,"_async",{value:N});var Y=u("./errors"),ne=l.TypeError=Y.TypeError;l.RangeError=Y.RangeError;var Ie=l.CancellationError=Y.CancellationError;l.TimeoutError=Y.TimeoutError,l.OperationalError=Y.OperationalError,l.RejectionError=Y.OperationalError,l.AggregateError=Y.AggregateError;var _e=function(){},ce={},q={},he=u("./thenables")(l,_e),ie=u("./promise_array")(l,_e,he,_,o),V=u("./context")(l),J=V.create,te=u("./debuggability")(l,V,function(){R=O,T.notEnumerableProp(l,"_getContext",O)},function(){R=E,T.notEnumerableProp(l,"_getContext",E)}),oe=u("./finally")(l,he,q),Ee=u("./catch_filter")(q),ge=u("./nodeback"),Re=T.errorObj,G=T.tryCatch;return l.prototype.toString=function(){return"[object Promise]"},l.prototype.caught=l.prototype.catch=function(k){var U=arguments.length;if(U>1){var H,ee=new Array(U-1),ye=0;for(H=0;U-1>H;++H){var Z=arguments[H];if(!T.isObject(Z))return _("Catch statement predicate: expecting an object but got "+T.classString(Z));ee[ye++]=Z}if(ee.length=ye,"function"!=typeof(k=arguments[H]))throw new ne("The last argument to .catch() must be a function, got "+T.toString(k));return this.then(void 0,Ee(ee,k,this))}return this.then(void 0,k)},l.prototype.reflect=function(){return this._then(C,C,void 0,this,void 0)},l.prototype.then=function(k,U){if(te.warnings()&&arguments.length>0&&"function"!=typeof k&&"function"!=typeof U){var H=".then() only accepts functions but was passed: "+T.classString(k);arguments.length>1&&(H+=", "+T.classString(U)),this._warn(H)}return this._then(k,U,void 0,void 0,void 0)},l.prototype.done=function(k,U){this._then(k,U,void 0,void 0,void 0)._setIsFinal()},l.prototype.spread=function(k){return"function"!=typeof k?_("expecting a function but got "+T.classString(k)):this.all()._then(k,void 0,void 0,ce,void 0)},l.prototype.toJSON=function(){var k={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(k.fulfillmentValue=this.value(),k.isFulfilled=!0):this.isRejected()&&(k.rejectionReason=this.reason(),k.isRejected=!0),k},l.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new ie(this).promise()},l.prototype.error=function(k){return this.caught(T.originatesFromRejection,k)},l.getNewLibraryCopy=f.exports,l.is=function(k){return k instanceof l},l.fromNode=l.fromCallback=function(k){var U=new l(_e);U._captureStackTrace();var H=arguments.length>1&&!!Object(arguments[1]).multiArgs,ee=G(k)(ge(U,H));return ee===Re&&U._rejectCallback(ee.e,!0),U._isFateSealed()||U._setAsyncGuaranteed(),U},l.all=function(k){return new ie(k).promise()},l.cast=function(k){var U=he(k);return U instanceof l||((U=new l(_e))._captureStackTrace(),U._setFulfilled(),U._rejectionHandler0=k),U},l.resolve=l.fulfilled=l.cast,l.reject=l.rejected=function(k){var U=new l(_e);return U._captureStackTrace(),U._rejectCallback(k,!0),U},l.setScheduler=function(k){if("function"!=typeof k)throw new ne("expecting a function but got "+T.classString(k));return N.setScheduler(k)},l.prototype._then=function(k,U,H,ee,ye){var Z=void 0!==ye,Q=Z?ye:new l(_e),se=this._target(),le=se._bitField;Z||(Q._propagateFrom(this,3),Q._captureStackTrace(),void 0===ee&&0!=(2097152&this._bitField)&&(ee=0!=(50397184&le)?this._boundValue():se===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Q));var pe=R();if(0!=(50397184&le)){var Ce,Te,Be=se._settlePromiseCtx;0!=(33554432&le)?(Te=se._rejectionHandler0,Ce=k):0!=(16777216&le)?(Te=se._fulfillmentHandler0,Ce=U,se._unsetRejectionIsUnhandled()):(Be=se._settlePromiseLateCancellationObserver,Te=new Ie("late cancellation observer"),se._attachExtraTrace(Te),Ce=U),N.invoke(Be,se,{handler:T.contextBind(pe,Ce),promise:Q,receiver:ee,value:Te})}else se._addCallbacks(k,U,Q,ee,pe);return Q},l.prototype._length=function(){return 65535&this._bitField},l.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},l.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},l.prototype._setLength=function(k){this._bitField=-65536&this._bitField|65535&k},l.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},l.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},l.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},l.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},l.prototype._isFinal=function(){return(4194304&this._bitField)>0},l.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},l.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},l.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},l.prototype._setAsyncGuaranteed=function(){if(!N.hasCustomScheduler()){var k=this._bitField;this._bitField=k|(536870912&k)>>2^134217728}},l.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},l.prototype._receiverAt=function(k){var U=0===k?this._receiver0:this[4*k-4+3];return U===v?void 0:void 0===U&&this._isBound()?this._boundValue():U},l.prototype._promiseAt=function(k){return this[4*k-4+2]},l.prototype._fulfillmentHandlerAt=function(k){return this[4*k-4+0]},l.prototype._rejectionHandlerAt=function(k){return this[4*k-4+1]},l.prototype._boundValue=function(){},l.prototype._migrateCallback0=function(k){var U=k._fulfillmentHandler0,H=k._rejectionHandler0,ee=k._promise0,ye=k._receiverAt(0);void 0===ye&&(ye=v),this._addCallbacks(U,H,ee,ye,null)},l.prototype._migrateCallbackAt=function(k,U){var H=k._fulfillmentHandlerAt(U),ee=k._rejectionHandlerAt(U),ye=k._promiseAt(U),Z=k._receiverAt(U);void 0===Z&&(Z=v),this._addCallbacks(H,ee,ye,Z,null)},l.prototype._addCallbacks=function(k,U,H,ee,ye){var Z=this._length();if(Z>=65531&&(Z=0,this._setLength(0)),0===Z)this._promise0=H,this._receiver0=ee,"function"==typeof k&&(this._fulfillmentHandler0=T.contextBind(ye,k)),"function"==typeof U&&(this._rejectionHandler0=T.contextBind(ye,U));else{var Q=4*Z-4;this[Q+2]=H,this[Q+3]=ee,"function"==typeof k&&(this[Q+0]=T.contextBind(ye,k)),"function"==typeof U&&(this[Q+1]=T.contextBind(ye,U))}return this._setLength(Z+1),Z},l.prototype._proxy=function(k,U){this._addCallbacks(void 0,void 0,U,k,null)},l.prototype._resolveCallback=function(k,U){if(0==(117506048&this._bitField)){if(k===this)return this._rejectCallback(g(),!1);var H=he(k,this);if(!(H instanceof l))return this._fulfill(k);U&&this._propagateFrom(H,2);var ee=H._target();if(ee===this)return void this._reject(g());var ye=ee._bitField;if(0==(50397184&ye)){var Z=this._length();Z>0&&ee._migrateCallback0(this);for(var Q=1;Z>Q;++Q)ee._migrateCallbackAt(this,Q);this._setFollowing(),this._setLength(0),this._setFollowee(H)}else if(0!=(33554432&ye))this._fulfill(ee._value());else if(0!=(16777216&ye))this._reject(ee._reason());else{var se=new Ie("late cancellation observer");ee._attachExtraTrace(se),this._reject(se)}}},l.prototype._rejectCallback=function(k,U,H){var ee=T.ensureErrorObject(k),ye=ee===k;if(!ye&&!H&&te.warnings()){var Z="a promise was rejected with a non-error: "+T.classString(k);this._warn(Z,!0)}this._attachExtraTrace(ee,!!U&&ye),this._reject(k)},l.prototype._resolveFromExecutor=function(k){if(k!==_e){var U=this;this._captureStackTrace(),this._pushContext();var H=!0,ee=this._execute(k,function(ye){U._resolveCallback(ye)},function(ye){U._rejectCallback(ye,H)});H=!1,this._popContext(),void 0!==ee&&U._rejectCallback(ee,!0)}},l.prototype._settlePromiseFromHandler=function(k,U,H,ee){var ye=ee._bitField;if(0==(65536&ye)){var Z;ee._pushContext(),U===ce?H&&"number"==typeof H.length?Z=G(k).apply(this._boundValue(),H):(Z=Re).e=new ne("cannot .spread() a non-array: "+T.classString(H)):Z=G(k).call(U,H);var Q=ee._popContext();0==(65536&(ye=ee._bitField))&&(Z===q?ee._reject(H):Z===Re?ee._rejectCallback(Z.e,!1):(te.checkForgottenReturns(Z,Q,"",ee,this),ee._resolveCallback(Z)))}},l.prototype._target=function(){for(var k=this;k._isFollowing();)k=k._followee();return k},l.prototype._followee=function(){return this._rejectionHandler0},l.prototype._setFollowee=function(k){this._rejectionHandler0=k},l.prototype._settlePromise=function(k,U,H,ee){var ye=k instanceof l,Z=this._bitField,Q=0!=(134217728&Z);0!=(65536&Z)?(ye&&k._invokeInternalOnCancel(),H instanceof oe&&H.isFinallyHandler()?(H.cancelPromise=k,G(U).call(H,ee)===Re&&k._reject(Re.e)):U===C?k._fulfill(C.call(H)):H instanceof o?H._promiseCancelled(k):ye||k instanceof ie?k._cancel():H.cancel()):"function"==typeof U?ye?(Q&&k._setAsyncGuaranteed(),this._settlePromiseFromHandler(U,H,ee,k)):U.call(H,ee,k):H instanceof o?H._isResolved()||(0!=(33554432&Z)?H._promiseFulfilled(ee,k):H._promiseRejected(ee,k)):ye&&(Q&&k._setAsyncGuaranteed(),0!=(33554432&Z)?k._fulfill(ee):k._reject(ee))},l.prototype._settlePromiseLateCancellationObserver=function(k){var U=k.handler,H=k.promise,ee=k.receiver,ye=k.value;"function"==typeof U?H instanceof l?this._settlePromiseFromHandler(U,ee,ye,H):U.call(ee,ye,H):H instanceof l&&H._reject(ye)},l.prototype._settlePromiseCtx=function(k){this._settlePromise(k.promise,k.handler,k.receiver,k.value)},l.prototype._settlePromise0=function(k,U,H){var ee=this._promise0,ye=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(ee,k,ye,U)},l.prototype._clearCallbackDataAtIndex=function(k){var U=4*k-4;this[U+2]=this[U+3]=this[U+0]=this[U+1]=void 0},l.prototype._fulfill=function(k){var U=this._bitField;if(!((117506048&U)>>>16)){if(k===this){var H=g();return this._attachExtraTrace(H),this._reject(H)}this._setFulfilled(),this._rejectionHandler0=k,(65535&U)>0&&(0!=(134217728&U)?this._settlePromises():N.settlePromises(this),this._dereferenceTrace())}},l.prototype._reject=function(k){var U=this._bitField;if(!((117506048&U)>>>16))return this._setRejected(),this._fulfillmentHandler0=k,this._isFinal()?N.fatalError(k,T.isNode):void((65535&U)>0?N.settlePromises(this):this._ensurePossibleRejectionHandled())},l.prototype._fulfillPromises=function(k,U){for(var H=1;k>H;H++){var ee=this._fulfillmentHandlerAt(H),ye=this._promiseAt(H),Z=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(ye,ee,Z,U)}},l.prototype._rejectPromises=function(k,U){for(var H=1;k>H;H++){var ee=this._rejectionHandlerAt(H),ye=this._promiseAt(H),Z=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(ye,ee,Z,U)}},l.prototype._settlePromises=function(){var k=this._bitField,U=65535&k;if(U>0){if(0!=(16842752&k)){var H=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,H,k),this._rejectPromises(U,H)}else{var ee=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,ee,k),this._fulfillPromises(U,ee)}this._setLength(0)}this._clearCancellationData()},l.prototype._settledValue=function(){var k=this._bitField;return 0!=(33554432&k)?this._rejectionHandler0:0!=(16777216&k)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&b.defineProperty(l.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),l.defer=l.pending=function(){return te.deprecated("Promise.defer","new Promise"),{promise:new l(_e),resolve:m,reject:I}},T.notEnumerableProp(l,"_makeSelfResolutionError",g),u("./method")(l,_e,he,_,te),u("./bind")(l,_e,he,te),u("./cancel")(l,ie,_,te),u("./direct_resolve")(l),u("./synchronous_inspection")(l),u("./join")(l,ie,he,_e,N),l.Promise=l,l.version="3.7.2",u("./call_get.js")(l),u("./generators.js")(l,_,_e,he,o,te),u("./map.js")(l,ie,_,he,_e,te),u("./nodeify.js")(l),u("./promisify.js")(l,_e),u("./props.js")(l,ie,he,_),u("./race.js")(l,_e,he,_),u("./reduce.js")(l,ie,_,he,_e,te),u("./settle.js")(l,ie,te),u("./some.js")(l,ie,_),u("./timers.js")(l,_e,te),u("./using.js")(l,_,he,J,_e,te),u("./any.js")(l),u("./each.js")(l,_e),u("./filter.js")(l,_e),T.toFastProperties(l),T.toFastProperties(l.prototype),p({a:1}),p({b:2}),p({c:3}),p(1),p(function(){}),p(void 0),p(!1),p(new l(_e)),te.setBounds(A.firstLineError,T.lastLineError),l}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(u,f,a){f.exports=function(o,c,l,m,I){function g(_){var v=this._promise=new o(c);_ instanceof o&&(v._propagateFrom(_,3),_.suppressUnhandledRejections()),v._setOnCancel(this),this._values=_,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var C=u("./util");return C.inherits(g,I),g.prototype.length=function(){return this._length},g.prototype.promise=function(){return this._promise},g.prototype._init=function _(v,T){var D=l(this._values,this._promise);if(D instanceof o){var P=(D=D._target())._bitField;if(this._values=D,0==(50397184&P))return this._promise._setAsyncGuaranteed(),D._then(_,this._reject,void 0,this,T);if(0==(33554432&P))return 0!=(16777216&P)?this._reject(D._reason()):this._cancel();D=D._value()}if(null!==(D=C.asArray(D)))return 0===D.length?void(-5===T?this._resolveEmptyArray():this._resolve(function p(_){switch(_){case-2:return[];case-3:return{};case-6:return new Map}}(T))):void this._iterate(D);var E=m("expecting an array or an iterable object but got "+C.classString(D)).reason();this._promise._rejectCallback(E,!1)},g.prototype._iterate=function(_){var v=this.getActualLength(_.length);this._length=v,this._values=this.shouldCopyValues()?new Array(v):this._values;for(var T=this._promise,D=!1,P=null,E=0;v>E;++E){var M=l(_[E],T);P=M instanceof o?(M=M._target())._bitField:null,D?null!==P&&M.suppressUnhandledRejections():null!==P?0==(50397184&P)?(M._proxy(this,E),this._values[E]=M):D=0!=(33554432&P)?this._promiseFulfilled(M._value(),E):0!=(16777216&P)?this._promiseRejected(M._reason(),E):this._promiseCancelled(E):D=this._promiseFulfilled(M,E)}D||T._setAsyncGuaranteed()},g.prototype._isResolved=function(){return null===this._values},g.prototype._resolve=function(_){this._values=null,this._promise._fulfill(_)},g.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},g.prototype._reject=function(_){this._values=null,this._promise._rejectCallback(_,!1)},g.prototype._promiseFulfilled=function(_,v){return this._values[v]=_,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseCancelled=function(){return this._cancel(),!0},g.prototype._promiseRejected=function(_){return this._totalResolved++,this._reject(_),!0},g.prototype._resultCancelled=function(){if(!this._isResolved()){var _=this._values;if(this._cancel(),_ instanceof o)_.cancel();else for(var v=0;v<_.length;++v)_[v]instanceof o&&_[v].cancel()}},g.prototype.shouldCopyValues=function(){return!0},g.prototype.getActualLength=function(_){return _},g}},{"./util":36}],24:[function(u,f,a){f.exports=function(o,c){function l(_e){return!N.test(_e)}function m(_e){try{return!0===_e.__isPromisified__}catch{return!1}}function I(_e,ce,q){var he=P.getDataPropertyOrDefault(_e,ce+q,b);return!!he&&m(he)}function _(_e,ce,q,he,ie){for(var V=new RegExp(ne(ce)+"$"),J=function g(_e,ce,q,he){for(var ie=P.inheritedDataKeys(_e),V=[],J=0;J<ie.length;++J){var te=ie[J],oe=_e[te],Ee=he===Y||Y(te,oe,_e);"function"!=typeof oe||m(oe)||I(_e,te,ce)||!he(te,oe,_e,Ee)||V.push(te,oe)}return function p(_e,ce,q){for(var he=0;he<_e.length;he+=2){var ie=_e[he];if(q.test(ie))for(var V=ie.replace(q,""),J=0;J<_e.length;J+=2)if(_e[J]===V)throw new F("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",ce))}}(V,ce,q),V}(_e,ce,V,q),te=0,oe=J.length;oe>te;te+=2){var Ee=J[te],ge=J[te+1],Re=Ee+ce;if(he===Ie)_e[Re]=Ie(Ee,D,Ee,ge,ce,ie);else{var G=he(ge,function(){return Ie(Ee,D,Ee,ge,ce,ie)});P.notEnumerableProp(G,"__isPromisified__",!0),_e[Re]=G}}return P.toFastProperties(_e),_e}var D={},P=u("./util"),E=u("./nodeback"),M=P.withAppended,O=P.maybeWrapAsError,R=P.canEvaluate,F=u("./errors").TypeError,b={__isPromisified__:!0},N=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),Y=function(_e){return P.isIdentifier(_e)&&"_"!==_e.charAt(0)&&"constructor"!==_e},ne=function(_e){return _e.replace(/([$])/,"\\$")},Ie=R?void 0:function C(_e,ce,q,he,ie,V){function J(){var Ee=ce;ce===D&&(Ee=this);var ge=new o(c);ge._captureStackTrace();var Re="string"==typeof oe&&this!==te?this[oe]:_e,G=E(ge,V);try{Re.apply(Ee,M(arguments,G))}catch(k){ge._rejectCallback(O(k),!0,!0)}return ge._isFateSealed()||ge._setAsyncGuaranteed(),ge}var te=function(){return this}(),oe=_e;return"string"==typeof oe&&(_e=he),P.notEnumerableProp(J,"__isPromisified__",!0),J};o.promisify=function(_e,ce){if("function"!=typeof _e)throw new F("expecting a function but got "+P.classString(_e));if(m(_e))return _e;var ie=function v(_e,ce,q){return Ie(_e,ce,void 0,_e,null,q)}(_e,void 0===(ce=Object(ce)).context?D:ce.context,!!ce.multiArgs);return P.copyDescriptors(_e,ie,l),ie},o.promisifyAll=function(_e,ce){if("function"!=typeof _e&&"object"!=typeof _e)throw new F("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var q=!!(ce=Object(ce)).multiArgs,he=ce.suffix;"string"!=typeof he&&(he="Async");var ie=ce.filter;"function"!=typeof ie&&(ie=Y);var V=ce.promisifier;if("function"!=typeof V&&(V=Ie),!P.isIdentifier(he))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var J=P.inheritedDataKeys(_e),te=0;te<J.length;++te){var oe=_e[J[te]];"constructor"!==J[te]&&P.isClass(oe)&&(_(oe.prototype,he,ie,V,q),_(oe,he,ie,V,q))}return _(_e,he,ie,V,q)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(u,f,a){f.exports=function(o,c,l,m){function I(P){var E,M=!1;if(void 0!==g&&P instanceof g)E=T(P),M=!0;else{var O=v.keys(P),R=O.length;E=new Array(2*R);for(var F=0;R>F;++F){var B=O[F];E[F]=P[B],E[F+R]=B}}this.constructor$(E),this._isMap=M,this._init$(void 0,M?-6:-3)}function p(P){var E,M=l(P);return _(M)?(E=M instanceof o?M._then(o.props,void 0,void 0,void 0,void 0):new I(M).promise(),M instanceof o&&E._propagateFrom(M,2),E):m("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var g,C=u("./util"),_=C.isObject,v=u("./es5");"function"==typeof Map&&(g=Map);var T=function(){function P(O,R){this[E]=O,this[E+M]=R,E++}var E=0,M=0;return function(O){M=O.size,E=0;var R=new Array(2*O.size);return O.forEach(P,R),R}}();C.inherits(I,c),I.prototype._init=function(){},I.prototype._promiseFulfilled=function(P,E){if(this._values[E]=P,++this._totalResolved>=this._length){var O;if(this._isMap)O=function(P){for(var E=new g,M=P.length/2|0,O=0;M>O;++O)E.set(P[M+O],P[O]);return E}(this._values);else{O={};for(var R=this.length(),F=0,B=this.length();B>F;++F)O[this._values[F+R]]=this._values[F]}return this._resolve(O),!0}return!1},I.prototype.shouldCopyValues=function(){return!1},I.prototype.getActualLength=function(P){return P>>1},o.prototype.props=function(){return p(this)},o.props=function(P){return p(P)}}},{"./es5":13,"./util":36}],26:[function(u,f,a){function c(l){this._capacity=l,this._length=0,this._front=0}c.prototype._willBeOverCapacity=function(l){return this._capacity<l},c.prototype._pushOne=function(l){var m=this.length();this._checkCapacity(m+1),this[this._front+m&this._capacity-1]=l,this._length=m+1},c.prototype.push=function(l,m,I){var p=this.length()+3;if(this._willBeOverCapacity(p))return this._pushOne(l),this._pushOne(m),void this._pushOne(I);var g=this._front+p-3;this._checkCapacity(p);var C=this._capacity-1;this[g+0&C]=l,this[g+1&C]=m,this[g+2&C]=I,this._length=p},c.prototype.shift=function(){var l=this._front,m=this[l];return this[l]=void 0,this._front=l+1&this._capacity-1,this._length--,m},c.prototype.length=function(){return this._length},c.prototype._checkCapacity=function(l){this._capacity<l&&this._resizeTo(this._capacity<<1)},c.prototype._resizeTo=function(l){var m=this._capacity;this._capacity=l,function o(l,m,I,p,g){for(var C=0;g>C;++C)I[C+p]=l[C+m],l[C+m]=void 0}(this,0,this,m,this._front+this._length&m-1)},f.exports=c},{}],27:[function(u,f,a){f.exports=function(o,c,l,m){function I(C,_){var v=l(C);if(v instanceof o)return g(v);if(null===(C=p.asArray(C)))return m("expecting an array or an iterable object but got "+p.classString(C));var T=new o(c);void 0!==_&&T._propagateFrom(_,3);for(var D=T._fulfill,P=T._reject,E=0,M=C.length;M>E;++E){var O=C[E];(void 0!==O||E in C)&&o.cast(O)._then(D,P,void 0,T,null)}return T}var p=u("./util"),g=function(C){return C.then(function(_){return I(_,C)})};o.race=function(C){return I(C,void 0)},o.prototype.race=function(){return I(this,void 0)}}},{"./util":36}],28:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(E,M,O,R){this.constructor$(E);var F=o._getContext();this._fn=D.contextBind(F,M),void 0!==O&&(O=o.resolve(O))._attachCancellationCallback(this),this._initialValue=O,this._currentCancellable=null,this._eachValues=R===I?Array(this._length):0===R?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function C(E,M){this.isFulfilled()?M._resolve(E):M._reject(E)}function _(E,M,O,R){return"function"!=typeof M?l("expecting a function but got "+D.classString(M)):new g(E,M,O,R).promise()}function v(E){this.accum=E,this.array._gotAccum(E);var M=m(this.value,this.array._promise);return M instanceof o?(this.array._currentCancellable=M,M._then(T,void 0,void 0,this,void 0)):T.call(this,M)}function T(E){var F,M=this.array,O=M._promise,R=P(M._fn);O._pushContext(),(F=void 0!==M._eachValues?R.call(O._boundValue(),E,this.index,this.length):R.call(O._boundValue(),this.accum,E,this.index,this.length))instanceof o&&(M._currentCancellable=F);var B=O._popContext();return p.checkForgottenReturns(F,B,void 0!==M._eachValues?"Promise.each":"Promise.reduce",O),F}var D=u("./util"),P=D.tryCatch;D.inherits(g,c),g.prototype._gotAccum=function(E){null!=this._eachValues&&E!==I&&this._eachValues.push(E)},g.prototype._eachComplete=function(E){return null!==this._eachValues&&this._eachValues.push(E),this._eachValues},g.prototype._init=function(){},g.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},g.prototype.shouldCopyValues=function(){return!1},g.prototype._resolve=function(E){this._promise._resolveCallback(E),this._values=null},g.prototype._resultCancelled=function(E){return E===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof o&&this._currentCancellable.cancel(),this._initialValue instanceof o&&this._initialValue.cancel()))},g.prototype._iterate=function(E){this._values=E;var M,O,R=E.length;void 0!==this._initialValue?(M=this._initialValue,O=0):(M=o.resolve(E[0]),O=1),this._currentCancellable=M;for(var F=O;R>F;++F){var B=E[F];B instanceof o&&B.suppressUnhandledRejections()}if(!M.isRejected())for(;R>O;++O)M=M._then(v,void 0,void 0,{accum:null,value:E[O],index:O,length:R,array:this},void 0),0==(127&O)&&M._setNoAsyncGuarantee();void 0!==this._eachValues&&(M=M._then(this._eachComplete,void 0,void 0,this,void 0)),M._then(C,C,void 0,M,this)},o.prototype.reduce=function(E,M){return _(this,E,M,null)},o.reduce=function(E,M,O,R){return _(E,M,O,R)}}},{"./util":36}],29:[function(u,f,a){var o,C,_,v,T,c=u("./util"),m=c.getNativePromise();if(c.isNode&&typeof MutationObserver>"u"){var I=global.setImmediate,p=process.nextTick;o=c.isRecentNode?function(C){I.call(global,C)}:function(C){p.call(process,C)}}else if("function"==typeof m&&"function"==typeof m.resolve){var g=m.resolve();o=function(C){g.then(C)}}else o=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(C=document.createElement("div"),_={attributes:!0},v=!1,T=document.createElement("div"),new MutationObserver(function(){C.classList.toggle("foo"),v=!1}).observe(T,_),function(E){var M=new MutationObserver(function(){M.disconnect(),E()});M.observe(C,_),v||(v=!0,T.classList.toggle("foo"))}):typeof setImmediate<"u"?function(C){setImmediate(C)}:typeof setTimeout<"u"?function(C){setTimeout(C,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};f.exports=o},{"./util":36}],30:[function(u,f,a){f.exports=function(o,c,l){function m(g){this.constructor$(g)}var I=o.PromiseInspection;u("./util").inherits(m,c),m.prototype._promiseResolved=function(g,C){return this._values[g]=C,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseFulfilled=function(g,C){var _=new I;return _._bitField=33554432,_._settledValueField=g,this._promiseResolved(C,_)},m.prototype._promiseRejected=function(g,C){var _=new I;return _._bitField=16777216,_._settledValueField=g,this._promiseResolved(C,_)},o.settle=function(g){return l.deprecated(".settle()",".reflect()"),new m(g).promise()},o.allSettled=function(g){return new m(g).promise()},o.prototype.settle=function(){return o.settle(this)}}},{"./util":36}],31:[function(u,f,a){f.exports=function(o,c,l){function m(T){this.constructor$(T),this._howMany=0,this._unwrap=!1,this._initialized=!1}function I(T,D){if((0|D)!==D||0>D)return l("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var P=new m(T),E=P.promise();return P.setHowMany(D),P.init(),E}var p=u("./util"),g=u("./errors").RangeError,C=u("./errors").AggregateError,_=p.isArray,v={};p.inherits(m,c),m.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var T=_(this._values);!this._isResolved()&&T&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},m.prototype.init=function(){this._initialized=!0,this._init()},m.prototype.setUnwrap=function(){this._unwrap=!0},m.prototype.howMany=function(){return this._howMany},m.prototype.setHowMany=function(T){this._howMany=T},m.prototype._promiseFulfilled=function(T){return this._addFulfilled(T),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},m.prototype._promiseRejected=function(T){return this._addRejected(T),this._checkOutcome()},m.prototype._promiseCancelled=function(){return this._values instanceof o||null==this._values?this._cancel():(this._addRejected(v),this._checkOutcome())},m.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var T=new C,D=this.length();D<this._values.length;++D)this._values[D]!==v&&T.push(this._values[D]);return T.length>0?this._reject(T):this._cancel(),!0}return!1},m.prototype._fulfilled=function(){return this._totalResolved},m.prototype._rejected=function(){return this._values.length-this.length()},m.prototype._addRejected=function(T){this._values.push(T)},m.prototype._addFulfilled=function(T){this._values[this._totalResolved++]=T},m.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},m.prototype._getRangeError=function(T){return new g("Input array must contain at least "+this._howMany+" items but contains only "+T+" items")},m.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},o.some=function(T,D){return I(T,D)},o.prototype.some=function(T){return I(this,T)},o._SomePromiseArray=m}},{"./errors":12,"./util":36}],32:[function(u,f,a){f.exports=function(o){function c(_){void 0!==_?(_=_._target(),this._bitField=_._bitField,this._settledValueField=_._isFateSealed()?_._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}c.prototype._settledValue=function(){return this._settledValueField};var l=c.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},m=c.prototype.error=c.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},I=c.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},p=c.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=c.prototype.isPending=function(){return 0==(50397184&this._bitField)},C=c.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};c.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},o.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},o.prototype._isCancelled=function(){return this._target().__isCancelled()},o.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},o.prototype.isPending=function(){return g.call(this._target())},o.prototype.isRejected=function(){return p.call(this._target())},o.prototype.isFulfilled=function(){return I.call(this._target())},o.prototype.isResolved=function(){return C.call(this._target())},o.prototype.value=function(){return l.call(this._target())},o.prototype.reason=function(){var _=this._target();return _._unsetRejectionIsUnhandled(),m.call(_)},o.prototype._value=function(){return this._settledValue()},o.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},o.PromiseInspection=c}},{}],33:[function(u,f,a){f.exports=function(o,c){var C=u("./util"),_=C.errorObj,v=C.isObject,T={}.hasOwnProperty;return function l(D,P){if(v(D)){if(D instanceof o)return D;var E=function I(D){try{return function m(D){return D.then}(D)}catch(P){return _.e=P,_}}(D);if(E===_){P&&P._pushContext();var M=o.reject(E.e);return P&&P._popContext(),M}if("function"==typeof E)return function p(D){try{return T.call(D,"_promise0")}catch{return!1}}(D)?(M=new o(c),D._then(M._fulfill,M._reject,void 0,M,null),M):function g(D,P,E){var R=new o(c),F=R;E&&E._pushContext(),R._captureStackTrace(),E&&E._popContext();var B=!0,b=C.tryCatch(P).call(D,function M(A){R&&(R._resolveCallback(A),R=null)},function O(A){R&&(R._rejectCallback(A,B,!0),R=null)});return B=!1,R&&b===_&&(R._rejectCallback(b.e,!0,!0),R=null),F}(D,E,P)}return D}}},{"./util":36}],34:[function(u,f,a){f.exports=function(o,c,l){function m(D){this.handle=D}function I(D){return clearTimeout(this.handle),D}function p(D){throw clearTimeout(this.handle),D}var g=u("./util"),C=o.TimeoutError;m.prototype._resultCancelled=function(){clearTimeout(this.handle)};var _=function(D){return v(+this).thenReturn(D)},v=o.delay=function(D,P){var E,M;return void 0!==P?(E=o.resolve(P)._then(_,null,null,D,void 0),l.cancellation()&&P instanceof o&&E._setOnCancel(P)):(E=new o(c),M=setTimeout(function(){E._fulfill()},+D),l.cancellation()&&E._setOnCancel(new m(M)),E._captureStackTrace()),E._setAsyncGuaranteed(),E};o.prototype.delay=function(D){return v(D,this)},o.prototype.timeout=function(D,P){D=+D;var E,M,O=new m(setTimeout(function(){E.isPending()&&function(D,P,E){var M;M="string"!=typeof P?P instanceof Error?P:new C("operation timed out"):new C(P),g.markAsOriginatingFromRejection(M),D._attachExtraTrace(M),D._reject(M),E?.cancel()}(E,P,M)},D));return l.cancellation()?(M=this.then(),(E=M._then(I,p,void 0,O,void 0))._setOnCancel(O)):E=this._then(I,p,void 0,O,void 0),E}}},{"./util":36}],35:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(b){setTimeout(function(){throw b},0)}function _(b,A){var Y=0,ne=b.length,Ie=new o(I);return function N(){if(Y>=ne)return Ie._fulfill();var _e=function C(b){var A=l(b);return A!==b&&"function"==typeof b._isDisposable&&"function"==typeof b._getDisposer&&b._isDisposable()&&A._setDisposable(b._getDisposer()),A}(b[Y++]);if(_e instanceof o&&_e._isDisposable()){try{_e=l(_e._getDisposer().tryDispose(A),b.promise)}catch(ce){return g(ce)}if(_e instanceof o)return _e._then(N,g,null,null,null)}N()}(),Ie}function v(b,A,N){this._data=b,this._promise=A,this._context=N}function T(b,A,N){this.constructor$(b,A,N)}function D(b){return v.isDisposer(b)?(this.resources[this.index]._setDisposable(b),b.promise()):b}function P(b){this.length=b,this.promise=null,this[b-1]=null}var E=u("./util"),M=u("./errors").TypeError,O=u("./util").inherits,R=E.errorObj,F=E.tryCatch,B={};v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():B},v.prototype.tryDispose=function(b){var A=this.resource(),N=this._context;void 0!==N&&N._pushContext();var Y=A!==B?this.doDispose(A,b):null;return void 0!==N&&N._popContext(),this._promise._unsetDisposable(),this._data=null,Y},v.isDisposer=function(b){return null!=b&&"function"==typeof b.resource&&"function"==typeof b.tryDispose},O(T,v),T.prototype.doDispose=function(b,A){return this.data().call(b,b,A)},P.prototype._resultCancelled=function(){for(var b=this.length,A=0;b>A;++A){var N=this[A];N instanceof o&&N.cancel()}},o.using=function(){var b=arguments.length;if(2>b)return c("you must pass at least 2 arguments to Promise.using");var A=arguments[b-1];if("function"!=typeof A)return c("expecting a function but got "+E.classString(A));var N,Y=!0;2===b&&Array.isArray(arguments[0])?(b=(N=arguments[0]).length,Y=!1):(N=arguments,b--);for(var ne=new P(b),Ie=0;b>Ie;++Ie){var _e=N[Ie];if(v.isDisposer(_e)){var ce=_e;(_e=_e.promise())._setDisposable(ce)}else{var q=l(_e);q instanceof o&&(_e=q._then(D,null,null,{resources:ne,index:Ie},void 0))}ne[Ie]=_e}var he=new Array(ne.length);for(Ie=0;Ie<he.length;++Ie)he[Ie]=o.resolve(ne[Ie]).reflect();var ie=o.all(he).then(function(J){for(var te=0;te<J.length;++te){var oe=J[te];if(oe.isRejected())return R.e=oe.error(),R;if(!oe.isFulfilled())return void ie.cancel();J[te]=oe.value()}V._pushContext(),A=F(A);var Ee=Y?A.apply(void 0,J):A(J),ge=V._popContext();return p.checkForgottenReturns(Ee,ge,"Promise.using",V),Ee}),V=ie.lastly(function(){var J=new o.PromiseInspection(ie);return _(ne,J)});return ne.promise=V,V._setOnCancel(ne),V},o.prototype._setDisposable=function(b){this._bitField=131072|this._bitField,this._disposer=b},o.prototype._isDisposable=function(){return(131072&this._bitField)>0},o.prototype._getDisposer=function(){return this._disposer},o.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},o.prototype.disposer=function(b){if("function"==typeof b)return new T(b,this,m());throw new M}}},{"./errors":12,"./util":36}],36:[function(u,f,a){function o(){try{var U=ce;return ce=null,U.apply(this,arguments)}catch(H){return _e.e=H,_e}}function l(U){return null==U||!0===U||!1===U||"string"==typeof U||"number"==typeof U}function C(U,H,ee){return l(U)||ne.defineProperty(U,H,{value:ee,configurable:!0,enumerable:!1,writable:!0}),U}function E(U){try{return U+""}catch{return"[no string representation]"}}function M(U){return U instanceof Error||null!==U&&"object"==typeof U&&"string"==typeof U.message&&"string"==typeof U.name}function F(U){return M(U)&&ne.propertyIsWritable(U,"stack")}function B(U){return{}.toString.call(U)}var ce,ne=u("./es5"),Ie=typeof navigator>"u",_e={e:{}},q=typeof Rt<"u"?Rt:typeof window<"u"?window:typeof global<"u"?global:void 0!==this?this:null,ie=function(){var U=[Array.prototype,Object.prototype,Function.prototype],H=function(Z){for(var Q=0;Q<U.length;++Q)if(U[Q]===Z)return!0;return!1};if(ne.isES5){var ee=Object.getOwnPropertyNames;return function(Z){for(var Q=[],se=Object.create(null);null!=Z&&!H(Z);){var le;try{le=ee(Z)}catch{return Q}for(var pe=0;pe<le.length;++pe){var Ce=le[pe];if(!se[Ce]){se[Ce]=!0;var Te=Object.getOwnPropertyDescriptor(Z,Ce);null!=Te&&null==Te.get&&null==Te.set&&Q.push(Ce)}}Z=ne.getPrototypeOf(Z)}return Q}}var ye={}.hasOwnProperty;return function(Z){if(H(Z))return[];var Q=[];e:for(var se in Z)if(ye.call(Z,se))Q.push(se);else{for(var le=0;le<U.length;++le)if(ye.call(U[le],se))continue e;Q.push(se)}return Q}}(),V=/this\s*\.\s*\S+\s*=/,J=/^[a-z$_][a-z$_0-9]*$/i,te="stack"in new Error?function(U){return F(U)?U:new Error(E(U))}:function(U){if(F(U))return U;try{throw new Error(E(U))}catch(H){return H}},oe=function(U){return ne.isArray(U)?U:null};if(typeof Symbol<"u"&&Symbol.iterator){var Ee="function"==typeof Array.from?function(U){return Array.from(U)}:function(U){for(var H,ee=[],ye=U[Symbol.iterator]();!(H=ye.next()).done;)ee.push(H.value);return ee};oe=function(U){return ne.isArray(U)?U:null!=U&&"function"==typeof U[Symbol.iterator]?Ee(U):null}}var G,U,ge=typeof process<"u"&&"[object process]"===B(process).toLowerCase(),Re=typeof process<"u"&&typeof process.env<"u",k={setReflectHandler:function(U){G=U},isClass:function v(U){try{if("function"==typeof U){var H=ne.names(U.prototype),ee=ne.isES5&&H.length>1,ye=H.length>0&&!(1===H.length&&"constructor"===H[0]),Z=V.test(U+"")&&ne.names(U).length>0;if(ee||ye||Z)return!0}return!1}catch{return!1}},isIdentifier:function D(U){return J.test(U)},inheritedDataKeys:ie,getDataPropertyOrDefault:function g(U,H,ee){if(!ne.isES5)return{}.hasOwnProperty.call(U,H)?U[H]:void 0;var ye=Object.getOwnPropertyDescriptor(U,H);return null!=ye?null==ye.get&&null==ye.set?ye.value:ee:void 0},thrower:function _(U){throw U},isArray:ne.isArray,asArray:oe,notEnumerableProp:C,isPrimitive:l,isObject:function m(U){return"function"==typeof U||"object"==typeof U&&null!==U},isError:M,canEvaluate:Ie,errorObj:_e,tryCatch:function c(U){return ce=U,o},inherits:function(U,H){function ee(){for(var Z in this.constructor=U,this.constructor$=H,H.prototype)ye.call(H.prototype,Z)&&"$"!==Z.charAt(Z.length-1)&&(this[Z+"$"]=H.prototype[Z])}var ye={}.hasOwnProperty;return ee.prototype=H.prototype,U.prototype=new ee,U.prototype},withAppended:function p(U,H){var ee,ye=U.length,Z=new Array(ye+1);for(ee=0;ye>ee;++ee)Z[ee]=U[ee];return Z[ee]=H,Z},maybeWrapAsError:function I(U){return l(U)?new Error(E(U)):U},toFastProperties:function T(U){function H(){}function ee(){return typeof ye.foo}H.prototype=U;var ye=new H;return ee(),ee(),U},filledRange:function P(U,H,ee){for(var ye=new Array(U),Z=0;U>Z;++Z)ye[Z]=H+Z+ee;return ye},toString:E,canAttachTrace:F,ensureErrorObject:te,originatesFromRejection:function R(U){return null!=U&&(U instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===U.isOperational)},markAsOriginatingFromRejection:function O(U){try{C(U,"isOperational",!0)}catch{}},classString:B,copyDescriptors:function b(U,H,ee){for(var ye=ne.names(U),Z=0;Z<ye.length;++Z){var Q=ye[Z];if(ee(Q))try{ne.defineProperty(H,Q,ne.getDescriptor(U,Q))}catch{}}},isNode:ge,hasEnvVariables:Re,env:function A(U){return Re?process.env[U]:void 0},global:q,getNativePromise:function N(){if("function"==typeof Promise)try{if("[object Promise]"===B(new Promise(function(){})))return Promise}catch{}},contextBind:function Y(U,H){if(null===U||"function"!=typeof H||H===G)return H;null!==U.domain&&(H=U.domain.bind(H));var ee=U.async;if(null!==ee){var ye=H;H=function(){var Z=new Array(2).concat([].slice.call(arguments));return Z[0]=ye,Z[1]=this,ee.runInAsyncScope.apply(ee,Z)}}return H}};k.isRecentNode=k.isNode&&(process.versions&&process.versions.node?U=process.versions.node.split(".").map(Number):process.version&&(U=process.version.split(".").map(Number)),0===U[0]&&U[1]>10||U[0]>0),k.nodeSupportsAsyncResource=k.isNode&&function(){var U=!1;try{U="function"==typeof u("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{U=!1}return U}(),k.isNode&&k.toFastProperties(process);try{throw new Error}catch(U){k.lastLineError=U}f.exports=k},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&null!==window?window.P=window.Promise:typeof Rt<"u"&&null!==Rt&&(Rt.P=Rt.Promise),n.Promise=Promise,n.nativePromise||(n.nativePromise=n.Promise)}}(w),function(e){var t=20220220;e._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",e._defaultPlatform="Win64",!(e._navInfo_ver&&e.isNumber(e._navInfo_ver)&&e._navInfo_ver>=t)&&(e._navInfo_ver=t,e.getNavInfoSync=function(){var O,h=e.win,s=h.location.protocol,i="https:"===s,u="https:"!==s&&"http:"!==s,f=!1,a=!0,o=!0,c=0,l=0,m=!1,I=!1,p=!1,g=!1,C=!1,_=!1,v=!1,T=!1,D=!1,P=!1,E=!1,M=!1,R=!1;if("userAgentData"in navigator){var A,F=[],B=navigator.userAgentData,b="",N=0;if(B.platform&&""!=B.platform&&(b=B.platform.toLowerCase(),v=B.mobile,"brands"in B&&e.isArray(B.brands)&&B.brands.length>0?F=B.brands:"uaList"in B&&e.isArray(B.uaList)&&B.uaList.length>0&&(F=B.uaList),N=F.length),0==N)R=!0;else{for(A=0;A<N;A++){var Y=F[A].brand.toLowerCase();if(Y.indexOf("chrome")>=0){T=!0,O=F[A].version;break}if(Y.indexOf("edge")>=0){D=!0,O=F[A].version;break}if(Y.indexOf("opera")>=0){P=!0,O=F[A].version;break}}!T&&!D&&!P&&(T=!0,O="100"),I=b.indexOf("mac")>=0,g=b.indexOf("chrome os")>=0,m="windows"==b,p="linux"==b,C="android"==b,_=b.indexOf("harmony")>=0}}else R=!0;if(R){var ne;if(w.navInfo)ne=w.navInfo;else{var Ie=navigator;ne=e.getNavInfoByUserAgent(Ie.userAgent,Ie.platform),w.navInfo=ne}o=ne.bGecko,m=ne.bWin,I=ne.bMac,p=ne.bLinux,C=ne.bAndroid,g=ne.bChromeOS,_=ne.bHarmonyOS,v=ne.bMobile,T=ne.bChrome,D=ne.bEdge,P=ne.bOpera,E=ne.bFirefox,M=ne.bSafari,O=ne.strBrowserVersion,(f=ne.bIE)&&(c=parseInt(1*ne.strBrowserVersion),l=ne.IEMode),a=ne.bHTML5Edition}return{host:h,bSSL:i,bFileSystem:u,bIE:f,bGecko:o,IEVersion:c,IEMode:l,bHTML5Edition:a,bWin:m,bMac:I,bLinux:p,bAndroid:C,bChromeOS:g,bHarmonyOS:_,bMobile:v,bChrome:T,bEdge:D,bOpera:P,bFirefox:E,bSafari:M,strBrowserVersion:O}},e.getNavInfoByUAData=function(n){var r=function(h){var d=w.navInfoSync,s=h.architecture.toLowerCase(),u="64"==h.bitness,f=s.indexOf("arm")>-1,a=s.indexOf("mips")>-1;return{bWin:d.bWin,bMac:d.bMac,bLinux:d.bLinux,bAndroid:d.bAndroid,bMobile:d.bMobile,bPad:!1,bChromeOS:d.bChromeOS,bHarmonyOS:d.bHarmonyOS,bArm64:f,bMips64:a,bEmbed:!1,bOSx64:u,bIE:!1,bEdge:d.bEdge,bChrome:d.bChrome,bFirefox:d.bFirefox,bSafari:d.bSafari,bOpera:d.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:d.strBrowserVersion,IEMode:0}};return n?Promise.resolve(function(){return r(n)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(r)},e.asyncGetNavInfo=function(){if(w.navInfo)return Promise.resolve(w.navInfo);var n=navigator;if("userAgentData"in n){var r=navigator.userAgentData;if(r.platform&&""!=r.platform){var h=[];if("brands"in r&&e.isArray(r.brands)&&r.brands.length>0?h=r.brands:"uaList"in r&&e.isArray(r.uaList)&&r.uaList.length>0&&(h=r.uaList),h.length>0)return e.getNavInfoByUAData().then(function(s){return w.navInfo=s,s})}}return"userAgent"in n?(w.navInfo=e.getNavInfoByUserAgent(n.userAgent,n.platform),Promise.resolve(w.navInfo)):(w.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),Promise.resolve(w.navInfo))},e.getNavInfo=function(){if(w.navInfo)return w.navInfo;var n=navigator;if("userAgentData"in n){var r=navigator.userAgentData;if(r.platform&&""!=r.platform){var h=[];if("brands"in r&&e.isArray(r.brands)&&r.brands.length>0?h=r.brands:"uaList"in r&&e.isArray(r.uaList)&&r.uaList.length>0&&(h=r.uaList),h.length>0)return e.getNavInfoByUAData().then(function(s){w.navInfo=s}),!1}}return"userAgent"in n?(w.navInfo=e.getNavInfoByUserAgent(n.userAgent,n.platform),w.navInfo):(w.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),w.navInfo)},w.navInfoSync=e.getNavInfoSync())}(w.Lib),function(e,t){var n=e.Lib,r=e.navInfoSync,h=20200521;if(!(n._ls_ver&&n.isNumber(n._ls_ver)&&n._ls_ver>=h)){n._ls_ver=h;var d=!1,s=!1;if(!(r.bEdge&&r.bFileSystem||r.bIE&&r.IEVersion<8))try{s=window.localStorage,d=!!s}catch{s=!1}n.LS={isSupportLS:function(){return d},item:function(u,f,a){var o=null;return this.isSupportLS()?(f?(s.setItem(u,f),o=f):o=s.getItem(u),null===o?a:o):a},removeItem:function(u){return!!this.isSupportLS()&&(s.removeItem(u),!0)}}}}(w),function(e,t){var n=20200708;if(!(e._utilities_ver&&e._utilities_ver>=n)){e._utilities_ver=n;var h=e.win,d=e.doc,s=w.navInfoSync,v=(e.getLogger(),0),T=[],M=/\S/,O=!(!d||!d.addEventListener),R="DOMContentLoaded",F="readystatechange",B="load",b="complete",A=O?function(Ie,_e,ce){Ie.addEventListener(_e,ce,!1)}:function(Ie,_e,ce){Ie.attachEvent("on"+_e,ce)},N=O?function(Ie,_e,ce){Ie.removeEventListener(_e,ce,!1)}:function(Ie,_e,ce){Ie.detachEvent("on"+_e,ce)};if(e.mix(e,{isWindow:function(Ie){return null!=Ie&&Ie==Ie.window},globalEval:function(Ie){Ie&&M.test(Ie)&&(h.execScript?h.execScript(Ie):h.eval.call(h,Ie))},domReady:function(Ie){if(v)try{Ie(e)}catch(_e){e.log(_e.stack||_e,"error"),setTimeout(function(){throw _e},0)}else T.push(Ie);return this}}),e.ready=e.domReady,e.checkDomReady=function(){v||(v=1,e.asyncGetNavInfo().then(function(Ie){d&&!s.nodejs&&N(h,B,e.checkDomReady),function Y(){for(var Ie=0;Ie<T.length;Ie++)try{T[Ie](e)}catch(_e){e.log(_e.stack||_e,"error"),setTimeout(function(){throw _e},0)}}()}))},function ne(){if(d&&d.readyState!==b)if(A(h,B,e.checkDomReady),O){var Ie=function(){N(d,R,Ie),e.checkDomReady()};A(d,R,Ie)}else{var _e=function(){d.readyState===b&&(N(d,F,_e),e.checkDomReady())};A(d,F,_e);var ce,q=d&&d.documentElement,he=q&&q.doScroll;try{ce=null===h.frameElement}catch{ce=!1}if(he&&ce){var ie=function(){try{he("left"),setTimeout(e.checkDomReady,30)}catch{setTimeout(ie,40)}};ie()}}else e.checkDomReady()}(),w.navInfoSync.bIE)try{d.execCommand("BackgroundImageCache",!1,!0)}catch{}}}(w.Lib),function(e){var t=20200521;if(!(e._domUtil_ver&&e._domUtil_ver>=t)){e._domUtil_ver=t;var r="none";e.mix(e,{get:function(h){return e.doc.getElementById(h)},hide:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display=r)},show:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display="")},toggle:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display=d.style.display===r?"":r)},empty:function(h){if(h)for(;h.firstChild;)h.removeChild(h.firstChild)}})}}(w.Lib),function(e){var t=e.Lib,n=20200521;t._color_ver&&t.isNumber(t._color_ver)&&t._color_ver>=n||(t._color_ver=n,t.colorStrToInt=function(r){var d,s,h="0x";if(/^(rgb|RGB)/.test(r)){var i=r.replace(/[^\d,.]/g,"").split(",");for(s=0;s<3;++s)1==(d=Number(i[s]).toString(16)).length&&(d="0"+d),h+=d;4==i.length?(1==(d=Math.round(255*Number(i[s])).toString(16)).length&&(d="0"+d),h+=d):h+="ff"}else if("transparent"==r)h+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(r))h+=r.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(r)){for(s=0;s<3;++s)h+=r[s]+r[s];h+="ff"}else h="-1";return Number(h)},t.IntToColorStr=function(r){if(r>4294967295||r<0)return null;var h;if(w.navInfoSync.bHTML5Edition)h="rgba("+Math.floor(r/16777216)+","+Math.floor(r/65536)%256+","+Math.floor(r/256)%256+","+r%256/255+")";else if(r%256==0)h="transparent";else{for(h=Math.floor(r/256).toString(16);6!=h.length;)h="0"+h;h="#"+h}return h})}(w),function(e){var t=20210107;if(!(e._loadjs_ver&&e._loadjs_ver>=t)){e._loadjs_ver=t;var h=e.doc,d=h&&h.documentElement,s=h.getElementsByTagName("head")[0]||d,i=h.createElement("script").readyState?function(u,f){var a=u.onreadystatechange;u.onreadystatechange=function(){var o=u.readyState;"loaded"===o||"complete"===o?(u.onreadystatechange=null,a&&a(),f.call(this,!0)):"loading"===o||f.call(this,!1)}}:function(u,f){u.addEventListener("load",f,!1),u.addEventListener("error",f,!1)};e.scriptOnload=i,e.getScript=function(u,f,a){var o,c;if(e.isFunction(a)||(a=function(){}),e.isString(u)&&""!=u)return o=h.createElement("script"),c=["",u].join(""),o.src=c,f&&(o.async=!0),o.charset="utf-8",i(o,a),s.insertBefore(o,s.firstChild),o;a()},e.getScripts=function(u,f,a){if(e.isArray(u)){var o=u.length,c=function(l){l?o--:a(),o<=0&&a("ok")};o<=0?a("ok"):e.each(u,function(l){e.getScript(l,f,c)})}else a()},e.getCss=function(u,f){var a,o=f;if(e.isFunction(o)||(o=!1),e.isString(u)&&""!=u)return(a=h.createElement("link")).href=u,a.rel="stylesheet",a.async=!0,o&&i(a,o),s.insertBefore(a,s.firstChild),a;o&&o()},e.getAllCss=function(u,f){if(e.isArray(u)){var a=u.length,o=function(c){c?a--:f(),a<=0&&f("ok")};e.each(u,function(c){e.getCss(c,o)})}else f()},e.addScript=function(u){var f,a;e.isString(a=u.body)&&""!=a&&((f=h.createElement("script")).charset="utf-8",w.navInfoSync.bIE?f.text=a:f.appendChild(h.createTextNode(a)),f.language=u.language?u.language:"javascript",f.type=u.type?u.type:"text/javascript",s.insertBefore(f,s.firstChild))},e.addJS=function(u){e.addScript({body:u})},e.addVBS=function(u){e.addScript({body:u,language:"vbscript",type:"text/vbscript"})}}}(w.Lib),function(e,t){var n=e.Lib,r=20220215;if(!(n._ajax_ver&&n.isNumber(n._ajax_ver)&&n._ajax_ver>=r)){n._ajax_ver=r;var ne,ce,h=w.navInfoSync,d=h.bIE&&h.IEVersion<=9,s=h.bIE&&h.IEVersion<=10,i=n.win,u=n.each,l=200,D=new n.Uri(location.href),P=D&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(D.getScheme()),M=function(){try{return new i.XMLHttpRequest}catch{}},O=function(){try{var q=!1;return u(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(he){try{return q=new i.ActiveXObject(he)}catch(ie){n.error("new xhr error: "+ie.message)}}),q}catch{}},R=!(P||!i.XMLHttpRequest)&&"withCredentials"in(M()||[]),F=i.ActiveXObject?function(q){return d?O():!P&&M()||O()}:M,b=/^(?:GET|HEAD)$/,A=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,N={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},Y=void 0;ne=Rt&&Rt.fetch?Rt.fetch:i.fetch,s&&(Y=n.noop),n.mix(Ie.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(q,he){return this.headers[q]=he,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(q){var he,V;if(q=q.toLowerCase(),2===this.state){if(!(V=this.responseHeaders))for(V=this.responseHeaders={};he=A.exec(this.responseHeadersString);)V[he[1].toLowerCase()]=he[2];he=V[q]}return void 0===he?null:he},overrideMimeType:function(q){return this.state||(this.mimeType=q),this},abort:function(q){var he=this;return q=q||"abort",he.state=3,he.status=0,he.statusText=q,he.nativeXhr&&he.nativeXhr.abort(),he._callback(),he},_ioReady:function(q,he){var ie=this,V=!1;if(2!==ie.state&&3!==ie.state){1===ie.state&&(ie.state=2),ie.readyState=4,q>=l&&q<300||304===q?304===q?(he="not modified",V=!0):(he="success",V=!0):q<0&&(q=0);try{q>=l&&ie.handleResponseData()}catch(J){n.error(J.stack||J,"error"),he=J.message||"parser error"}if((q<l||!V)&&ie.retry>0)return ie.retry=ie.retry-1,void setTimeout(function(){ie.sendInternal()},200);ie.status=q,ie.statusText=he,ie._callback(V)}},_callback:function(q){var he=this,ie=he.timeoutTimer;ie&&(clearTimeout(ie),he.timeoutTimer=0),u([q?he.onSuccess:he.onError,he.onComplete],function(V){n.isFunction(V)&&V.apply(he.context,[he.responseData,he.statusText,he])}),he.responseData=null},handleResponseData:function(){var he,q=this,ie=q.dataType,V=q.nativeXhr;if("blob"===ie||"arraybuffer"===ie)if(d){var J,te,oe;if("responseBody"in V)J=V.responseBody,te=dsVbsBinGetLength(J),he=new VBArray(dsVbsBinGetBytes(J,0,te)).toArray();else for(he=[],te=(J=V.responseText).length,oe=0;oe<te;++oe)he.push(255&J.charCodeAt(oe));J=null}else he=i.Blob?V.response:"responseBody"in V?V.responseBody:V.responseText;else if("json"==ie)he=V.responseType&&"json"==V.responseType.toLowerCase()?V.response:V.responseText?(i.JSON&&i.JSON.parse?i.JSON.parse:n.parse)(V.responseText):{};else if("user-defined"===ie)he=void 0!==V.response?V.response:V.responseText;else{q.responseText=he=V.responseText||"";try{var Ee=V.responseXML;Ee&&Ee.documentElement&&(q.responseXML=Ee)}catch{}}q.responseData=he},sendInternal:function(q){var ie,J,te,oe,Ee,ge,Re,G,k,U,H,he=this;if(ie=he._setup(q),n.isString(J=ie.method)&&(J=J.toUpperCase()),Ee=ie.contentType,oe=ie.dataType,G=ie.mimeType,n.isString(te=ie.url)&&(he.nativeXhr=ge=F(ie.crossDomain),ge)){try{if(he.state=1,ie.username?ge.open(J,te,ie.async,ie.username,ie.password):ge.open(J,te,ie.async),(ie.async||h.bIE)&&oe&&"user-defined"!=oe&&"responseType"in ge)try{ge.responseType=oe}catch{}}catch(Z){return void(he.state<2?(n.error(Z.stack||Z,"error"),he._ioReady(-1,"open error: "+(n.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))):n.error(Z))}"withCredentials"in(Re=ie.xhrFields||{})&&(R||delete Re.withCredentials),u(Re,function(Z,Q){try{ge[Q]=Z}catch(se){n.error(se)}}),G&&ge.overrideMimeType&&ge.overrideMimeType(G),!1===(k=ie.headers||{})["X-Requested-With"]&&delete k["X-Requested-With"],"setRequestHeader"in ge&&(Ee&&ge.setRequestHeader("Content-Type",ie.contentType),ge.setRequestHeader("Accept",oe&&N[oe]?N[oe]+("*"===oe?"":", */*; q=0.01"):N["*"]),u(k,function(Z,Q){ge.setRequestHeader(Q,Z)})),ie.cache||(ge.setRequestHeader("If-Modified-Since","0"),ge.setRequestHeader("Cache-Control","no-cache")),H=(U=!b.test(ie.method))&&ie.data||null,U&&d&&(H=ie.data),ie.async&&ie.timeout>0&&(ie.timeout<300&&(ie.timeout=300),he.timeoutTimer=setTimeout(function(){he.abort("timeout")},ie.timeout));try{if(he.state=1,n.isFunction(he.beforeSend)&&!1===he.beforeSend(ge,he))return void he.abort("cancel");ge.send(H),H=null,ie.data=null,n.isFunction(he.afterSend)&&he.afterSend(he)}catch(Z){he.state<2?(n.error(Z.stack||Z,"error"),he._ioReady(-1,"send error: "+(Z.message||""))):n.error(Z)}ie.async&&4!==ge.readyState?ge.onreadystatechange=function(){he._xhrCallback()}:he._xhrCallback()}},_xhrCallback:function(q,he){var V=this.nativeXhr;try{if(4===V.readyState||he)if(V.onreadystatechange=Y,he)4!==V.readyState&&V.abort();else{this.responseHeadersString=V.getAllResponseHeaders();var te,J=V.status;try{te=V.statusText}catch(oe){n.error("xhr statusText error: "),n.error(oe),te=""}this._ioReady(J,te)}}catch(oe){n.error(oe.stack||oe,"error"),V.onreadystatechange=Y,he||this._ioReady(-1,oe.message||"process error")}},_setup:function(q){var ie,V,J,te,oe,he=this;if(q){for(V in he.context=q.context,delete q.context,q instanceof Ie&&(q=q.config),he.config=q,n.startsWith(te=q.url,"http://")||n.startsWith(te,"https://")?oe=new n.Uri(te):(n.startsWith(te,"//")&&(q.url=te="http:"+te),oe=D.resolve(te)),ie=q.dataType?q.dataType.toLowerCase():"text",q.dataType=ie,q.method=q.method?q.method.toUpperCase():"GET","crossDomain"in q||(q.crossDomain=!oe.isSameOriginAs(D)),J=q.headers)n.isUndefined(J[V])&&delete J[V];n.mix(he,q)}return he.state=1,he}}),n.mix(n,{ajax:_e,io:{get:function(q,he,ie,V){return _e({method:"GET",url:q,onSuccess:he,onError:ie,dataType:V})},post:function(q,he,ie,V,J){return _e({method:"POST",data:he,url:q,onSuccess:ie,onError:V,dataType:J})},put:function(q,he,ie,V,J){return _e({method:"PUT",data:he,url:q,onSuccess:ie,onError:V,dataType:J})}}}),ne?n.fetch=function(q,he){var J,te,ie="text",V=!1;return he&&(he.dataType&&(ie=he.dataType),he.fetchRaw&&(V=!0)),J=ne(q,he),Promise!=n.nativePromise?(te=Promise,Promise=n.nativePromise,J=J.then(function(oe){if(Promise=te,oe.ok)return oe;throw{httpCode:oe.status,errorString:["HTTP process error: ",oe.statusText," (",oe.status,")."].join("")}})):J=J.then(function(oe){if(oe.ok)return oe;throw{httpCode:oe.status,errorString:["HTTP process error: ",oe.statusText," (",oe.status,")."].join("")}}),V||(J=J.then("blob"==ie?function(oe){return oe.blob()}:"json"==ie?function(oe){return oe.json()}:"arraybuffer"==ie?function(oe){return oe.arrayBuffer()}:function(oe){return oe.text()})),J}:(d&&n.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),Promise!=n.nativePromise&&(ce=Promise,Promise=n.nativePromise),n.fetch=function(q,he){return new Promise(function(ie,V){var oe={url:q,onSuccess:function(ge,Re,G){ce&&(Promise=ce),ie(ge)},onError:function(ge,Re,G){ce&&(Promise=ce),V({httpCode:G.status,errorString:Re})},dataType:"text"},Ee=!1;he&&(he.method&&(oe.method=he.method),he.body&&(oe.data=he.body),he.headers&&(oe.headers||(oe.headers={}),u(he.headers,function(ge,Re){"content-type"==Re.toLowerCase()&&(Ee=!0),oe.headers[Re]=ge})),he.dataType&&(oe.dataType=he.dataType),he.contentType&&(oe.contentType=he.contentType)),Ee&&(oe.contentType=!1),"blob"==oe.dataType&&d&&(oe.mimeType="text/plain; charset=x-user-defined"),n.ajax(oe)})})}function Ie(){}function _e(q){if(q&&n.isString(q.url)){var he=new Ie;return he.sendInternal(q),he}n.log("the url is error.")}}(w),function(e){var t=20200521;if(!(e._customEvt_ver&&e.isNumber(e._customEvt_ver)&&e._customEvt_ver>=t)){e._customEvt_ver=t;var n={fire:function(r){var d,h=this;h.exec=h.exec||{},r=r.toLowerCase(),d=Array.prototype.slice.call(arguments,1),e.each(h.exec[r]||[],function(s){var i=s.f,u=s.c||h;try{i.apply(u,d)}catch(f){e.log(f)}})},on:function(r,h,d){var s=this;s.exec=s.exec||{},r=r.toLowerCase(),s.exec[r]=s.exec[r]||[],s.exec[r].push({f:h,c:d})},off:function(r,h,d){var i=this.exec;if(i){if(!r)return void(this.exec=null);if(r=r.toLowerCase(),!h)return void(i[r]=null);for(var u=i[r]||[],f=u.length-1;f>=0;f--)u[f]===h&&u.splice(f,1)}}};e.obj={customEvent:n}}}(w.Lib),function(e){var d,t=e.Lib,r=!0,h=t.win.document,s=20200521;t._evtBase_ver&&t.isNumber(t._evtBase_ver)&&t._evtBase_ver>=s||(t._evtBase_ver=s,d=function(i){return w.navInfoSync.bGecko&&"mousewheel"===i?"DOMMouseScroll":i},t.mix(t,{addEventListener:h.addEventListener?function(i,u,f){var a=d(u);i&&i.addEventListener(a,f,!1)}:function(i,u,f){var a=d(u);i&&i.attachEvent("on"+a,f)},removeEventListener:h.removeEventListener?function(i,u,f){var a=d(u);i&&i.removeEventListener(a,f,!1)}:function(i,u,f){var a=d(u);i&&i.detachEvent("on"+a,f)},stopPropagation:function(i){var u=i||window.event;u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation(),u.returnValue=!1,u.cancelBubble=!0},fireEvent:function(i,u){var f;h.createEvent?((f=h.createEvent("HTMLEvents")).initEvent(i,r,r),u.dispatchEvent&&u.dispatchEvent(f)):h.createEventObject?((f=h.createEventObject()).bubbles=r,f.cancelable=r,u.fireEvent(i,f)):(f=new Event(i),u.dispatchEvent&&u.dispatchEvent(f))}}))}(w),function(e,t){var n=20200716;if(!(e._loadbase64_ver&&e._loadbase64_ver>=n)){e._loadbase64_ver=n;var r={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};e.base64={UTF16ToUTF8:function(s){for(var f,a,i=[],u=s.length,o=0;o<u;o++){var c=s.charCodeAt(o);if(c>0&&c<=127)i.push(s.charAt(o));else if(c>=128&&c<=2047)f=192|c>>6&31,a=128|63&c,i.push(String.fromCharCode(f),String.fromCharCode(a));else if(c>=2048&&c<=65535){f=224|c>>12&15,a=128|c>>6&63;var l=128|63&c;i.push(String.fromCharCode(f),String.fromCharCode(a),String.fromCharCode(l))}}return i.join("")},UTF8ToUTF16:function(s){var f,c,l,I,i=[],u=s.length;for(f=0;f<u;f++)0==((c=s.charCodeAt(f))>>7&255)?i.push(s.charAt(f)):6==(c>>5&255)?(I=(31&c)<<6|63&(l=s.charCodeAt(++f)),i.push(String.fromCharCode(I))):14==(c>>4&255)&&(I=(255&(c<<4|(l=s.charCodeAt(++f))>>2&15))<<8|(3&l)<<6|63&s.charCodeAt(++f),i.push(String.fromCharCode(I)));return i.join("")},encode:function(s){for(var o,c,l,i=this.UTF16ToUTF8(s),u=[],f=0,a=i.length;f<a;){if(o=255&i.charCodeAt(f++),f==a){u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4)),u.push("==");break}if(c=i.charCodeAt(f++),f==a){u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4|(240&c)>>4)),u.push(r.encodeChars.charAt((15&c)<<2)),u.push("=");break}l=i.charCodeAt(f++),u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4|(240&c)>>4)),u.push(r.encodeChars.charAt((15&c)<<2|(192&l)>>6)),u.push(r.encodeChars.charAt(63&l))}return u.join("")},encodeArray:function(s){for(var a,o,c,i=[],u=0,f=s.length;u<f;){if(a=255&s[u++],u==f){i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4)),i.push("==");break}if(o=255&s[u++],u==f){i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4|(240&o)>>4)),i.push(r.encodeChars.charAt((15&o)<<2)),i.push("=");break}c=255&s[u++],i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4|(240&o)>>4)),i.push(r.encodeChars.charAt((15&o)<<2|(192&c)>>6)),i.push(r.encodeChars.charAt(63&c))}return i.join("")},decode:function(s,i){for(var c,l,m,I,u=this,f=[],a=0,o=s.length;a<o;){do{c=r.decodeChars[255&s.charCodeAt(a++)]}while(a<o&&-1==c);if(-1==c)break;do{l=r.decodeChars[255&s.charCodeAt(a++)]}while(a<o&&-1==l);if(-1==l)break;f.push(i?c<<2|(48&l)>>4:String.fromCharCode(c<<2|(48&l)>>4));do{if(61==(m=255&s.charCodeAt(a++)))return i?f:u.UTF8ToUTF16(f.join(""));m=r.decodeChars[m]}while(a<o&&-1==m);if(-1==m)break;f.push(i?(15&l)<<4|(60&m)>>2:String.fromCharCode((15&l)<<4|(60&m)>>2));do{if(61==(I=255&s.charCodeAt(a++)))return i?f:u.UTF8ToUTF16(f.join(""));I=r.decodeChars[I]}while(a<o&&-1==I);if(-1==I)break;f.push(i?(3&m)<<6|I:String.fromCharCode((3&m)<<6|I))}return i?f:u.UTF8ToUTF16(f.join(""))}},e.utf8={fromUTF16:function(s){for(var a,i=[],u=0,f=s.length;u<f;)(a=s.charCodeAt(u))>=1&&a<=127?i.push(s.charAt(u)):a>2047?(i.push(String.fromCharCode(224|a>>12&15)),i.push(String.fromCharCode(128|a>>6&63)),i.push(String.fromCharCode(128|a>>0&63))):(i.push(String.fromCharCode(192|a>>6&31)),i.push(String.fromCharCode(128|a>>0&63))),u++;return i.join("")},toUTF16:function(s){for(var a,o,c,i=[],u=0,f=s.length;u<f;)switch(a=s.charCodeAt(u++),a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i.push(s.charAt(u-1));break;case 12:case 13:o=s.charCodeAt(u++),i.push(String.fromCharCode((31&a)<<6|63&o));break;case 14:o=s.charCodeAt(u++),c=s.charCodeAt(u++),i.push(String.fromCharCode((15&a)<<12|(63&o)<<6|(63&c)<<0))}return i.join("")}};var h=typeof exports<"u"?exports:typeof Rt<"u"?Rt:$.global;(d.prototype=new Error).name="InvalidCharacterError",e.btoa=h.btoa?function(s){return h.btoa(s)}:function(s){for(var u,f,i=String(s),a=0,o=r.encodeChars,c="";i.charAt(0|a)||(o="=",a%1);c+=o.charAt(63&u>>8-a%1*8)){if((f=i.charCodeAt(a+=3/4))>255)throw new d("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return c},e.atob=h.atob?function(s){return h.atob(s)}:function(s){var i=String(s).replace(/[=]+$/,"");if(i.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var f,a,u=0,o=0,c="";a=i.charAt(o++);~a&&(f=u%4?64*f+a:a,u++%4)?c+=String.fromCharCode(255&f>>(-2*u&6)):0)a=r.encodeChars.indexOf(a);return c}}function d(s){this.message=s}}(w.Lib),function(e){var t=e.Lib,n=20210601;if(!(t._asyncQueue_ver&&t.isNumber(t._asyncQueue_ver)&&t._asyncQueue_ver>=n)){t._asyncQueue_ver=n;var r={queue:[],doNextStarted:!1,timer:!1,pushToDo:function(h,d,s){r.queue.push({obj:h,method:d,args:s})},doNext:function(){if(!r.doNextStarted)return clearTimeout(r.timer),void(r.timer=!1);if(0!=r.queue.length){var h=r.queue[0],d=h.obj,s=h.method,i=h.args;if(r.queue.splice(0,1),d&&t.isFunction(d[s])){var u=!1;if(i.length>2){var f=i[i.length-2],a=i[i.length-1];t.isFunction(f)&&t.isFunction(a)&&(i[i.length-2]=function(){try{f.apply(d,arguments)}catch{}r.timer=setTimeout(r.doNext,0)},i[i.length-1]=function(){try{a.apply(d,arguments)}catch{}r.timer=setTimeout(r.doNext,0)},u=!0)}try{d[s].apply(d,i)}catch{}u||(r.timer=setTimeout(r.doNext,0))}else if(null===d&&t.isFunction(s)){try{s.apply(null,i)}catch{}r.timer=setTimeout(r.doNext,0)}else t.log("not invoke a function: "+s),r.timer=setTimeout(r.doNext,0)}else r.timer=setTimeout(r.doNext,500)},start:function(){r.doNextStarted||(r.doNextStarted=!0,r.timer=setTimeout(r.doNext,0))},stop:function(){clearTimeout(r.timer),r.doNextStarted=!1,r.queue=[]}};t.asyncQueue=r}}(w),function(e){var t=20200521;if(!(e._sprintf_ver&&e._sprintf_ver>=t)){e._sprintf_ver=t;var n,r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},s=Object.create?Object.create(null):{};n=function(f){return d(i(f),arguments)},e.sprintf=n,e.vsprintf=function u(f,a){return n.apply(null,[f].concat(a||[]))}}function h(f,a){if("_".repeat)return f.repeat(a);for(var o=0,c=[];o<a;o++)c.push(f);return c.join("")}function d(f,a){var l,I,p,g,C,_,v,T,D,o=1,c=f.length,m="";for(I=0;I<c;I++)if("string"==typeof f[I])m+=f[I];else if("object"==typeof f[I]){if((g=f[I]).keys)for(l=a[o],p=0;p<g.keys.length;p++){if(null==l)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[p],g.keys[p-1]));l=l[g.keys[p]]}else l=g.param_no?a[g.param_no]:a[o++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&l instanceof Function&&(l=l()),r.numeric_arg.test(g.type)&&"number"!=typeof l&&isNaN(l))throw new TypeError(n("[sprintf] expecting number but found %T",l));switch(r.number.test(g.type)&&(T=l>=0),g.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,g.width?parseInt(g.width):0);break;case"e":l=g.precision?parseFloat(l).toExponential(g.precision):parseFloat(l).toExponential();break;case"f":l=g.precision?parseFloat(l).toFixed(g.precision):parseFloat(l);break;case"g":l=g.precision?String(Number(l.toPrecision(g.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=g.precision?l.substring(0,g.precision):l;break;case"t":l=String(!!l),l=g.precision?l.substring(0,g.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=g.precision?l.substring(0,g.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=g.precision?l.substring(0,g.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}r.json.test(g.type)?m+=l:(!r.number.test(g.type)||T&&!g.sign?D="":(D=T?"+":"-",l=l.toString().replace(r.sign,"")),_=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",v=g.width-(D+l).length,C=g.width&&v>0?h(_,v):"",m+=g.align?D+l+C:"0"===_?D+C+l:C+D+l)}return m}function i(f){if(s[f])return s[f];for(var o,a=f,c=[],l=0;a;){if(null!==(o=r.text.exec(a)))c.push(o[0]);else if(null!==(o=r.modulo.exec(a)))c.push("%");else{if(null===(o=r.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(o[2]){l|=1;var m=[],I=o[2],p=[];if(null===(p=r.key.exec(I)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(p[1]);""!==(I=I.substring(p[0].length));)if(null!==(p=r.key_access.exec(I)))m.push(p[1]);else{if(null===(p=r.index_access.exec(I)))throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(p[1])}o[2]=m}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}a=a.substring(o[0].length)}return s[f]=c,c}}(w.Lib),function(e,t){var d,s,n=w.managerEnv,r=e.LS,h=w.navInfoSync.host,i=20220216,u=function(){if(w.dcp){var o=w.dcp.dcpJSVer;if(e.isNumber(o))return o>=i}return!1};if(n||(w.managerEnv={},n=w.managerEnv),n.resourcesPath=n.resourcesPath||"Resources",n.IfUpdateService=!!n.IfUpdateService,u())return u=t,void(i=t);var f=[];w.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:i,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[17,2,1,"0228"],managerVersionMac:[17,2,1,"0228"],managerVersionLinux:[17,2,1,"0228"],serviceVersion:[1,7,2,"0228"],serviceVersionMac:[1,7,2,"0228"],serviceVersionLinux:[1,7,2,"0228"],detect:s={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var o=w.Lib.getNavInfo();if(!o.bWin&&!o.bWin64){if(o.bMac)return d.managerVersionMac;if(o.bLinux)return d.managerVersionLinux}return d.managerVersion},getServiceVersion:function(){var o=w.Lib.getNavInfo();if(!o.bWin&&!o.bWin64){if(o.bMac)return d.serviceVersionMac;if(o.bLinux)return d.serviceVersionLinux}return d.serviceVersion},versionInfo:function(o,c){var l=0;s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,c,function(p){if(e.isArray(p)&&p.length>0&&p[0]){s.curPort=d.ports[l%d.ports.length];var g=p[0];if(e.isString(g)&&d._compareVersion(g.split(","),d.oldDWASMVer))return d._setDefaultValuesFromServer(p),s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.Connected,d._sendStatusEvent(!1,g),e.isFunction(o)&&setTimeout(function(){o(d.strSID,d.bEnhancedMode)},0),!0}return!1},function(p,g,C){return++l,s.curPortIndex=l%d.ports.length,s.bConnected=!1,!!(s.bConnectNumLimited&&l>=s.IMAXCONNECTCOUNT)&&(setTimeout(function(){o(p,g,C)},0),!0)})},_checkOldManagerVersion:function(o,c){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,t,o,c)},_checkManagerVersion:function(o,c,l){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,o,c,l)},_checkService:function(o,c){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,t,o,c)},_checkUpdateFile:function(o,c){this._postBase("CheckUpdateFile",!1,t,o,c)},_updateService:function(o,c){this._postBase("UpdateService",!1,t,o,c)},_postBase:function(o,c,l,m,I){var p,g;return p=c?d.oldDWASMVerStr:"dwasm2_"+d._getModuleVer(),g={id:(new Date).getTime().toString(),method:o,version:p,parameter:[]},l&&(g.productKey=l),this._postBaseV2(o,c,g,500,m,I),!0},_postBaseV2:function(o,c,l,m,I,p){var C,_,v=e.stringify(l);if(e.isFunction(I)&&e.isFunction(p)){if(d.detect.bConnected&&"VersionInfo"==o&&""!=d.detect.connectedResult)return void I(d.detect.connectedResult);C=function(B,b,A){0==--D&&p(B,b,A)},_=function(B,b,A){var N=d._getJSON(B);N&&"result"in N&&(D=-1,d.detect.bConnected||(d.detect.bConnected=!0,d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected,d.detect.curPort=d.ports[A.index],d.ports=[d.detect.curPort],d.detect.curPortIndex=0,r.isSupportLS()&&r.item("DCP_port",d.detect.curPort[1]),I(N.result)))||C(B,b,A)};var T,D=d.ports.length;if(D>1&&r.isSupportLS()){var P=r.item("DCP_port");if(e.isString(P)&&""!==P)for(T=1;T<D;T++){var M,O,E=d.ports[T];M=E[0],(O=E[1])==P&&(d.ports[T][0]=d.ports[0][0],d.ports[T][1]=d.ports[0][1],d.ports[0][0]=M,d.ports[0][1]=O);break}}for(d.detect.bConnected&&(D=1),f=[],d.detect.bConnected=!1,T=0;T<D;T++){var R=[d._getPreUrl(T),c?"dcp/":d._getModuleName(),c?d.oldDWASMVerStr:d._getModuleVer(),"/",o,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");f.push({method:"POST",url:R,timeout:m,data:v,onSuccess:_,onError:C})}for(T=0;T<D;T++)e.ajax(f[T]).index=T}},loadZip:function(o,c,l,m){var I,p=c,g=l;100===p&&(p=0,g=function(C){e.isString(C)&&(C=C.replace('"result" : [ 0,','"result" : [ 100,')),l(C)}),I=w.managerEnv.IfUpdateService?[d._getPreUrl(s.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",p,"&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join(""):[d._getPreUrl(s.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:I,async:!0,data:o,onSuccess:g,onError:m})},oldLoadZip:function(o,c,l,m){var I=[d._getPreUrl(s.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:I,async:!0,data:o,onSuccess:l,onError:m})},_getPreUrl:function(o){var c,l;return w.navInfoSync.bSSL?(l="https://",c=d.ports[o][1]):(l="http://",c=d.ports[o][0]),[l,d.host,":",c,"/"].join("")},_getHttpPreUrl:function(o){return["http://",d.host,":",d.ports[o][0],"/"].join("")},_getDcpWsPreUrl:function(o){return d.getWsUrl(d.host,w.navInfoSync.bSSL?d.ports[o][1]:d.ports[o][0])},_getJSON:function(o){return!!o&&e.parse(o)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(o,c){return!e.isLocalIP(d.host)||(e.isArray(o)&&4==o.length&&e.isArray(c)&&c.length>=4?o[0]>c[0]||o[0]==c[0]&&o[1]>c[1]||o[0]==c[0]&&o[1]==c[1]&&o[2]>c[2]||o[0]==c[0]&&o[1]==c[1]&&o[2]==c[2]&&parseInt(o[3])>=parseInt(c[3]):!!(e.isArray(o)&&1==o.length&&e.isArray(c)&&c.length>=1)&&parseInt(o[0])>=parseInt(c[0]))},_getDSUpdateZipUrl:function(){var c,l,o=w.Lib.getNavInfo(),m="";return c="Win",o.bMac?c="Mac":o.bLinux&&(c="Linux"),l=w.navInfoSync.bFileSystem?"":"?t="+e.now(),o.bWin&&d.b64bit&&(m="_x64"),[w.managerEnv.resourcesPath,"/dist/serviceupdate/",c,"DSUpdate_",d.getManagerVersion().join("."),m,".zip",l].join("")},getPorts:function(o,c,l){var m="GetPorts",I="dwasm2_"+d._getModuleVer();this._postBaseV2(m,!1,{id:"1",method:m,version:I,parameter:[o]},700,c,l)},_setDefaultValuesFromServer:function(o){var c="",l=!1,m=!1,I={};if(o.length>4&&(c=e.isString(o[2])?o[2]:"",l=e.isString(o[3])&&"true"===o[3],m=e.isString(o[4])&&"64"===o[4]),o.length>5&&(I=o[5]),d.detect.connectedResult=o,d.strSID=c,d.bEnhancedMode=l,d.b64bit=m,d.objEnhancedPorts=I,l&&I&&I.dcp){var p=I.dcp;s.curPort=[p.port,p.sslPort]}else s.curPort=d.ports[s.curPortIndex];if(l&&I&&I.dwt){var g=I.dwt;s.dwtPort=g?w.navInfoSync.bSSL?g.sslPort:g.port:0}},checkDcpForUpdate:function(o,c,l,m,I,p,g,C){var _=!1,v=!0,T=3,D=0,P=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0].split(","),ne=!1;if(N.length>4&&(ne=e.isString(N[4])&&"64"===N[4]),d.b64bit=ne,w.managerEnv.IfUpdateService)if(d._compareVersion(Y,d.oldDWASMVer)){var Ie=d._getDSUpdateZipUrl();_=!0;var ce=function(he,ie,V){d._funUpdateFailed(I,p,he,V.status),setTimeout(g,0)};l&&l(),m&&m(),s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,d._sendStatusEvent(),e.fetch(Ie,{mode:"cors",dataType:"arraybuffer"}).then(function(he){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadedZip,d._sendStatusEvent(),d.oldLoadZip(he,0,function(){setTimeout(function(){d._checkManagerVersion(C,M,O)},5e3)},ce),he=null},function(he){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,I&&I();var ie="The update package can't be downloaded. The error code is "+he.httpCode+".";p&&p(!0,ie),d._sendStatusEvent(!0,ie),setTimeout(g,0)})}else v&&(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,l&&l(),o&&o(),d._sendStatusEvent(),v=!1);else s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0);return!0},E=function(N,Y){return++D,s.curPortIndex=D%d.ports.length,s.bConnected=!1,s.bConnectNumLimited&&D>=s.IMAXCONNECTCOUNT?(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,d._sendStatusEvent()):setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3),!0},M=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0].split(",");return!!d._compareVersion(Y,d.getManagerVersion())&&(d.detect.connectedResult=N,w.managerEnv.IfUpdateService?setTimeout(_?function(){d._checkUpdateZip(m,I,p,g)}:function(){d._checkService(R,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0)),!0)},O=function(N,Y,ne){var Ie=1e3;return T<3&&(Ie=500),--T<0?(d._funShowUpgradeDialogWhenUpdateFailed(I,p),setTimeout(g,0)):setTimeout(function(){d._checkManagerVersion(C,M,O)},Ie),!0},R=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return l&&l(),!1;var Y=N[0].split(",");return d._compareVersion(Y,d.getServiceVersion())?(s.bConnected=!0,I&&I(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,d._sendStatusEvent(!1,N[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,d._sendStatusEvent(),setTimeout(g,0)):setTimeout(function(){d._checkUpdateZip(m,I,p,g)},0),!0},F=function(N,Y,ne){return d._funUpdateFailed(I,p,N,ne.status),setTimeout(g,0),!0},b=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0];return e.isString(Y)&&d._compareVersion(Y.split(","),d.oldDWASMVer)?(d._setDefaultValuesFromServer(N),s.curPort=d.ports[D%d.ports.length],w.managerEnv.IfUpdateService?setTimeout(function(){d._checkService(R,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0))):(D=0,s.curPortIndex=0,v&&(l&&l(),o&&o(),v=!1),setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3)),!0},A=function(N,Y){return++D,s.curPortIndex=D%d.ports.length,s.bConnected=!1,v&&(l&&l(),o&&o(N,Y),v=!1),s.bConnectNumLimited&&D>=s.IMAXCONNECTCOUNT?(D=0,s.curPortIndex=0,setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3)):setTimeout(function(){d._checkManagerVersion(C,b,A)},1e3),!0};c&&c(),d._checkManagerVersion(C,b,A)},_checkUpdateZip:function(o,c,l,m,I){var p=function(M,O,R){var F=-1;if(R&&(F=R.status),0==F)return setTimeout(function(){d._checkService(P,E)},5e3),!0;var B=d._getDSUpdateZipUrl();return s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,d._sendStatusEvent(),e.fetch(B,{mode:"cors",dataType:"arraybuffer"}).then(_,g),!0},g=function(M){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,c&&c();var O="The update package can't be downloaded. The error code is "+M.httpCode+".";return l&&l(!0,O),d._sendStatusEvent(!0,O),setTimeout(m,0),!0},_=function(M){w.dcp.loadZip(M,1,function(R){var F,B;try{e.isString(R)&&"result"in(B=e.parse(R.replace(/\0/g,"")))&&(F=B.result)}catch{}e.isArray(F)&&F.length>2&&1==F[2]?setTimeout(function(){d._checkService(P,E)},5e3):(d._funUpdateFailed(c,l,R,200),setTimeout(m,0))},v),M=null},v=function(M,O,R){var F=-1;return R&&(F=R.status),0==F?setTimeout(function(){d._checkService(P,E)},5e3):(d._funUpdateFailed(c,l,M,R.status),setTimeout(m,0)),!0},D=3,P=function(M){if(!(e.isArray(M)&&M.length>0&&M[0]))return!1;var O=M[0].split(",");return!!d._compareVersion(O,d.getServiceVersion())&&(s.bConnected=!0,c&&c(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,d._sendStatusEvent(!1,M[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,d._sendStatusEvent(),setTimeout(m,0),!0)},E=function(M,O){var R=1e3;return D<3&&(R=500),--D<0?(d._funShowUpgradeDialogWhenUpdateFailed(c,l),setTimeout(m,0),!0):(setTimeout(function(){d._checkService(P,E)},R),!0)};o&&o(),s.dcpStatus=s.EnumDCP_DetectStatus.VerifyingZip,d._sendStatusEvent(),d._checkUpdateFile(function(M){if(!(e.isArray(M)&&M.length>1))return!1;if(1==M[1])s.dcpStatus=s.EnumDCP_DetectStatus.VerifiedZip,d._sendStatusEvent(),s.dcpStatus=s.EnumDCP_DetectStatus.UpdatingService,d._sendStatusEvent(),setTimeout(function(){d._checkService(P,E)},5e3);else{var O=0;if("exception"in M&&(O=M.exception),-2373==O)return d._funUpdateFailed(c,l,M,200),setTimeout(m,0),!0;setTimeout(p,0)}return!0},p)},_getStatusString:function(o,c){var l,m,I="";return o==s.EnumDCP_DetectStatus.Init?"Getting manager version":o==s.EnumDCP_DetectStatus.Connected?(c&&(I=c),"Getting manager version succeeded and the version is "+I):o==s.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":o==s.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":o==s.EnumDCP_DetectStatus.DownloadFailed?(m=".",c&&c.length>0?("."==c.slice(c.length-1)&&(m=""),l=" with the error: "+c):l="","Update package failed to download"+l+m):o==s.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":o==s.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":o==s.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":o==s.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":o==s.EnumDCP_DetectStatus.CheckedService?(c&&(I=c),"Getting service version succeeded and the version is "+I):o==s.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":o==s.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":o==s.EnumDCP_DetectStatus.UpdatingService?"Updating the service":o==s.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":o==s.EnumDCP_DetectStatus.UpdateFailed?(m=".",c&&c.length>0?("."==c.slice(c.length-1)&&(m=""),l=" with the error: "+c):l="","The update failed"+l+m):""},_sendStatusEvent:function(o,c){var l=!!o;e.isFunction(h.OnGetServiceUpdateStatus)&&h.OnGetServiceUpdateStatus(l,s.dcpStatus,d._getStatusString(s.dcpStatus,c))},_getErr:function(o){var c,l="";try{e.isString(o)?(c=o.replace(/\0/g,""),c=e.parse(c)):o&&(c=o),"description"in c&&(l=c.description)}catch{}return l},_funShowUpgradeDialogWhenUpdateFailed:function(o,c){return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,o&&o(),c&&c(),d._sendStatusEvent(!0),!0},_funUpdateFailed:function(o,c,l,m){var I,p;return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,o&&o(),200==m?(I="The update failed.",p=d._getStatusString(s.dcpStatus,d._getErr(l))):p=I="The update failed. The error code is "+m,c&&c(!0,I),d._sendStatusEvent(!0,p),!0},getDSPath:function(o,c){var l=w.managerEnv.resourcesPath,m=c;if(w.Lib.isString(l)&&l.length>0?"/"!=l[l.length-1]&&(l+="/"):l="Resources/",!m){var I=w.Lib.getNavInfo();m=I.bMac?".pkg":I.bArm64?"-arm64.deb":I.bMips64?"-mips64el.deb":I.bLinux||I.bChromeOS||I.bHarmonyOS?".deb":".msi"}return[l,"dist/DynamsoftServiceSetup",m].join("")},getLinuxHTML5DebPath:function(){return w.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return w.dcp.getDSPath(!1,".rpm")},newWebsocket:function(o){var c,l=d.wsProtocol,m=window.MozWebSocket;if(typeof m<"u")c=l?new m(o,l):new m(o);else{var I=window.WebSocket;if(w.navInfo.bEdge){var p=window,g=parent;try{for(;p!=g&&g.WebSocket;)I=g.WebSocket,p=g.window,g=g.parent}catch{I=window.WebSocket}}c=l?new I(o,l):new I(o)}return c},_checkManagerVersionWS:function(o,c,l){var m=d._getDcpWsPreUrl(0),I={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+d._getModuleVer(),parameter:[]};return o&&(I.productKey=o),d.postStringDataByWS(m,e.stringify(I),function(g){var C=e.parse(g);C&&"result"in C?c(C.result):l()},l)},getWsUrl:function(o,c){return[w.navInfoSync.bSSL?"wss://":"ws://",o,":",c,"/"].join("")},postStringDataByWS:function(o,c,l,m){var I=d.newWebsocket(o);I.onopen=function(){1==I.readyState?(I.onopen=null,I.send(c)):0==I.readyState&&setTimeout(I.onopen,100)},I.onmessage=function(p){var g=p.data;if("object"==typeof g)return g=null,p=null,m(),void I.close();var C=g.replace(/\0/g,"");try{l(C),I.close()}catch{e.log(g),m(),I.close()}g=null,p=null},I.onerror=function(p){p&&e.log("websocket error: "+p),m(),I.close()},I.onclose=function(p){I.onclose=null,I.onerror=null,I.onmessage=null}},getBinaryFileInfo:function(o,c){var l="GetBinaryFileInfo",m={id:(new Date).getTime().toString(),method:l,version:"dwasm2_"+d._getModuleVer(),parameter:[]},I=e.stringify(m),p=function(_,v,T){var D=d._getJSON(_);D?o(D):c(_,v,T)};if(w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition){var g=d._getDcpWsPreUrl(0);return d.postStringDataByWS(g,I,p,c)}var C=[d._getPreUrl(0),d._getModuleName(),d._getModuleVer(),"/",l,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:C,timeout:500,data:I,onSuccess:p,onError:c})},checkDcpV3:function(o,c,l){var m=!0,I=0,p=function(C){return!!(e.isArray(C)&&C.length>0&&C[0])&&(d._setDefaultValuesFromServer(C),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(l,0),!0)},g=function(C,_){return++I,s.bConnectNumLimited&&I>=s.IMAXCONNECTCOUNT?(s.bConnected=!1,s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,d._sendStatusEvent()):setTimeout(function(){w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition?d._checkManagerVersionWS(o,p,g):d._checkManagerVersion(o,p,g)},1e3),m&&(c&&c(C,_),m=!1),!0};s.curPortIndex=0,s.bConnected=!1,w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition?d._checkManagerVersionWS(o,p,g):d._checkManagerVersion(o,p,g)}},u=t,i=t,n=t,e.domReady(function(){d.onReadys.length>0&&e.each(d.onReadys,function(o){e.isFunction(o)&&o()})}),w.Ready=function(o){return e.asyncGetNavInfo().then(function(){try{o(e)}catch(c){throw e.log(c.stack||c,"error"),c}})}}(w.Lib),function(e){var t=e.Lib,n=t.doc,r=20200521;if(!(t._evt_ver&&t.isNumber(t._evt_ver)&&t._evt_ver>=r)){t._evt_ver=r,t.Events={registedClass:[],registedObjs:[]};var h=function(s){var i=s||window.event,u=!0;return t.each(t.Events.registedObjs,function(f){t.each(t.Events.registedClass,function(a){if(f instanceof a&&f.bFocus&&f.handlerKeyDown&&!(u=f.handlerKeyDown(i)))return!1})}),u};t.ready(function(){t.addEventListener(n.documentElement,"keydown",h)}),t.mix(t,{getWheelDelta:function(s){var i,u=(s=s||window.event).wheelDelta,f=s.detail;return u&&(i=u/120),f&&(i=-(f%3==0?f/3:f)),i}});var d={LEFT:0,MIDDLE:1,RIGHT:2};t.EnumMouseButton=d,t.detectButton=function(s){var i=s||window.event;return null==i.which?i.button<2?d.LEFT:4==i.button?d.MIDDLE:d.RIGHT:i.which<2?d.LEFT:2==i.which?d.MIDDLE:d.RIGHT}}}(w),function(e){var t=20200521;e._ui_eventWhich_ver&&e.isNumber(e._ui_eventWhich_ver)&&e._ui_eventWhich_ver>=t||(e._ui_eventWhich_ver=t,e.switchEvent=function(n){return(n=n||window.event).which=null==n.which?n.button<2?1:4==n.button?2:3:n.which<2?1:2==n.which?2:3,n})}(w.Lib),function(e){var t=20200521;e._ui_style_ver&&e.isNumber(e._ui_style_ver)&&e._ui_style_ver>=t||(e._ui_style_ver=t,e.currentStyle=function(n,r){var h=e.win,d=h.doc;return n.currentStyle?n.currentStyle[r]:h.getComputedStyle?(r.replace(/([A-Z])/g,"-$1"),r.toLowerCase(),d.defaultView.getComputedStyle(n,null)[r]):null})}(w.Lib),function(e,t){var d=e.Lib,s=e.navInfoSync,i=d.isString,u=d.each,f=Array.prototype.slice,a=" ",o=s.bIE&&s.IEMode<10,c=/[\n\t\r\.]/g,l=20200521;function m(P,E,M){var O=this;return O instanceof m?P?"string"==typeof P?(d.error("Err 4001."),O):d.isArray(P)||P.isNodeList?(Array.prototype.push.apply(O,d.makeArray(P)),O):(O[0]=P,O.length=1,O):O:new m(P,E,M)}function I(P){return i(P)&&(P=d.trim(P))&&P.length>=3&&d.startsWith(P,"<")&&d.endsWith(P,">")}function p(P){return(a+P+a).replace(c,a)}function g(P){return P.replace(c,"")}function D(P,E){var M=E;return M&&M.isNodeList&&(M=M.getEL()),i(P)?(I(P)&&d.err("Err 4002."),new m(d.sizzle(P,M))):P.isNodeList?P:new m(P)}d._ui_nodelist_ver&&d.isNumber(d._ui_nodelist_ver)&&d._ui_nodelist_ver>=l||(d._ui_nodelist_ver=l,m.prototype={isNodeList:!0,length:0,item:function(P){return d.isNumber(P)?P>=this.length?null:new m(this[P]):new m(P)},slice:function(){return new m(f.apply(this,arguments))},getDOMNodes:function(){return f.call(this)},each:function(P,E){var M=this;return u(M,function(O,R){return O=new m(O),P.call(E||O,O,R,M)}),M},getEL:function(){return this.length>0?this[0]:void 0},all:function(P){return this.length>0?d.all(P,this):new m},one:function(P){var M=this.all(P);return M.length?M.slice(0,1):M}},d.mix(m.prototype,{before:function(P){var E=this.getEL(),M=[P];E&&(I(P)&&(M=d.parseHTML(P)),u(M,function(O){E.insertBefore(O,E.childNodes[0])}))},append:function(P){var E=this.getEL(),M=[P];E&&(I(P)&&(M=d.parseHTML(P)),u(M,function(O){E.appendChild(O)}))},html:function(P){var E=this.getEL();if(E){if(d.isUndef(P))return function C(P){var E=P.innerHTML;return document.all?(E=E.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(F,B,b,A){return B?"</"+b.toLowerCase()+">":("<"+b.toLowerCase()+A+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(N,Y,ne,Ie,_e,ce,q,he){return _e?'="'+_e+'"'+ce:N})}).replace(/<\/?([^>]+)>/g,function(F){return F}):E}(E);E.innerHTML="",u(d.parseHTML(P),function(M){E.appendChild(M)})}},attr:function(P,E){var M=this.getEL();if(M){if(d.isUndef(E))return"readonly"===P?M.readOnly?"readonly":"":("style"!==P&&o?M=M[P]:(M=M.attributes[P])&&(M=M.value),M);"class"==P?M.className=E:M[P]=E}},style:function(P,E){var M=this.getEL();if(M)return d.style(M,P,E)},css:function(P){u(this,function(E){u(P,function(M,O){d.style(E,O,M)})})},addClass:function(P){var E=this.getEL();E&&function(P,E){var O,F,B,b,M=P.className,R=E.length;if(M){for(O=p(M),F=M,B=0;B<R;B++)b=g(E[B]),O.indexOf(a+b+a)<0&&(F+=a+b);F=d.trim(F)}else F=E.join(" ");P.className=F}(E,P.split(a))},removeClass:function(P){var E=this.getEL();E&&function(P,E){var O,F,B,M=P.className,R=E.length;if(M&&R){for(O=p(M),F=0;F<R;F++)for(B=a+g(E[F])+a;O.indexOf(B)>=0;)O=O.replace(B,a);P.className=d.trim(O)}}(E,P.split(a))},hasClass:function(P){var E=this.getEL();if(E)return function(P,E){var O,F,B,M=P.className,R=E.length;if(M&&R){for(O=p(M),F=0;F<R;F++)if(B=a+g(E[F])+a,O.indexOf(B)<0)return!1;return!0}return!1}(E,P.split(a))},parent:function(){var P=this.getEL();return P&&(P=P.parentNode),new m(P)},remove:function(){var P=this.getEL();P&&P.parentNode.removeChild(P)},offset:function(){var P=this.getEL();return d.DOM.getElDimensions(P,!0)}}),d.mix(d,{all:D,one:function(P,E){var M=D(P,E);return M.length?M.slice(0,1):M},isNodeList:function(P){return P instanceof m}}),d.ready(function(){d.all=D}))}(w),function(e){var t=e.win,n=e.doc,r=isNaN,h=20200521;e._dom_ver&&e.isNumber(e._dom_ver)&&e._dom_ver>=h||(e._dom_ver=h,e.DOM={getOffset:function(d,s,i){d=d||t.event;for(var l,m,u=i||d.target,f=0,a=0,o=0,c=0,I=!1;u&&!r(u.offsetLeft)&&!r(u.offsetTop);)m=u.scrollLeft,l=u.scrollTop,"BODY"===u.tagName?I?(m=0,l=0):(m|=n.documentElement.scrollLeft,l|=n.documentElement.scrollTop):"fixed"===u.style.position&&(I=!0),f+=u.offsetLeft-m,a+=u.offsetTop-l,u=u.offsetParent;return s&&(o=s.Left,c=s.Top),{x:f=d.clientX-f-o,y:a=d.clientY-a-c}},getElDimensions:function(d,s){var i,u;return d?(i=d.style.display,d.style.display="",u=s?{offsetTop:d.offsetTop,offsetLeft:d.offsetLeft,offsetWidth:d.offsetWidth,offsetHeight:d.offsetHeight}:{clientTop:d.clientTop,clientLeft:d.clientLeft,clientWidth:d.clientWidth?d.clientWidth:parseInt(d.style.width)?parseInt(d.style.width):0,clientHeight:d.clientHeight?d.clientHeight:parseInt(d.style.height)?parseInt(d.style.height):0},d.style.display=i,u):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},e.getElDimensions=e.DOM.getElDimensions)}(w.Lib),function(e,t){var n=20220215,r=e.Lib;if(!(r._dialog_ver&&r.isNumber(r._dialog_ver)&&r._dialog_ver>=n)){r._dialog_ver=n,r.loaderBarClassName="ds-dwt-loaderBar",r.loaderBarWidth="230px",r.loaderBarHeight="240px",r.loaderBarBackgroundColor="",r.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",r.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",r.createShowMaskContent=function(){var M,O,E="";return w.DWT&&w.DWT.CustomizableDisplayInfo&&(O=w.DWT.CustomizableDisplayInfo),M=O&&r.isString(O.loaderBarSource)&&""!=O.loaderBarSource?O.loaderBarSource:w.navInfoSync.bIE?r.loaderBarSourceIE:r.loaderBarSource,""!=r.loaderBarBackgroundColor&&(E=";background:"+r.loaderBarBackgroundColor),['<div align="center" ','class="',r.loaderBarClassName,'" ','style="margin:0 auto;width:',r.loaderBarWidth,";height:",r.loaderBarHeight,";line-height:",r.loaderBarHeight,E,'"><img src="',M,'" /></div>'].join("")};var u,f,h=r.win,d=r.doc,s=!0,i=!1,a=5e5,T={pendingDialogStack:[],_updateStacking:function(E){var R,B;0!=(R=this.pendingDialogStack).length?(1!=E&&function _(){u===t&&function C(){u=d.createElement("div"),(f=u.style).position="fixed",f.display="block",f.left=f.top=f.margin=f.padding=0,f.backgroundColor="rgba(128, 128, 128, 0.1)",f.filter="alpha(opacity=10)",f.opacity=f.MozOpacity=.1,f.zIndex=a,f.width=f.height="100%",w.navInfoSync.bIE&&(u.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),d.createEvent&&r.addEventListener(u,"click",g)}(),d.body.contains(u)||d.body.appendChild(u)}(),B=a,r.each(R,function(b){B++,b._dlgInfo.mask.style.zIndex=B++,b.style.zIndex=B})):function v(){u!==t&&(r.removeEventListener(u,"click",g),d.body.removeChild(u),u=t)}()},pushDialog:function(E,M){var R,O=this,F=E.getBoundingClientRect();O.pendingDialogStack.length>=1e3?r.error("Too many modal dialogs."):((R=d.createElement("div")).className="dynamsoft-backdrop",1==M&&(R.style.left=(F.x|F.left)+"px",R.style.top=(F.y|F.top)+"px",R.style.width=F.width+"px",R.style.height=F.height+"px"),d.createEvent&&r.addEventListener(R,"click",function(B){if(E.dispatchEvent){var b=p(B);E.dispatchEvent(b)}}),E.parentNode.insertBefore(R,E.nextSibling),E._dlgInfo.mask=R,O.pendingDialogStack.push(E),O._updateStacking(M))},removeDialog:function(E){var O,R,M=this;-1!=(O=r.isArray(M.pendingDialogStack)?r.indexOf(E,M.pendingDialogStack):-1)&&(M.pendingDialogStack.splice(O,1),(R=E._dlgInfo.mask).parentNode.removeChild(R),E._dlgInfo.mask=null,M._updateStacking())}};r.dialog={setup:function(E,M,O){E.show=D.bind(E,i,M),E.showModal=D.bind(E,s,M),E.close=P.bind(E),O&&(E._dlgcfg=O),E._dlgInfo={}},setcfg:function(E,M){E._dlgcfg=M}},r.mask={container:!1,bConfined:!1,dlgMask:!1,preOnresize:!1,preOnscroll:!1},r.showMask=function(){if(!r.mask.dlgMask&&!r.dlgLoadingShowStatus){var O,E=r.mask.bConfined,M=r.mask.container;if(M){O=M.getBoundingClientRect();for(var R=M.firstChild;R;){if(r.isFunction(R.getBoundingClientRect)){O=R.getBoundingClientRect();break}R=R.nextSibling}}var F=document.createElement("div");F.className="dynamsoft-dialog-wrap",r.mask.preOnresize=!!window.onresize&&window.onresize,r.mask.preOnscroll=!!window.onscroll&&window.onscroll,E&&O&&(window.onresize=window.onscroll=function(){O=M.getBoundingClientRect();for(var B=M.firstChild;B;){if(r.isFunction(B.getBoundingClientRect)){O=B.getBoundingClientRect();break}B=B.nextSibling}F.style.left=(O.x|O.left)+"px",F.style.top=(O.y|O.top)+"px",F.style.width=O.width+"px",O.width<470&&(r.loaderBarWidth=O.width-10+"px"),F.style.height=r.loaderBarHeight=O.height+"px",r.mask.dlgMask&&(r.mask.dlgMask.close(),r.mask.dlgMask.showModal())},window.onscroll()),F.innerHTML=r.createShowMaskContent(),document.body.appendChild(F),r.mask.dlgMask=F,r.dialog.setup(r.mask.dlgMask,E),r.mask.dlgMask.showModal()}},r.hideMask=function(){var E=r.mask.dlgMask;E&&(E.close(),document.body.removeChild(E),r.mask.dlgMask=!1),window.onresize=r.mask.preOnresize?r.mask.preOnresize:null,r.mask.preOnresize=!1,window.onscroll=r.mask.preOnscroll?r.mask.preOnscroll:null,r.mask.preOnscroll=!1}}function l(E,M){for(var O=0;O<E.length;++O)if(E[O]==M)return s;return i}function p(E){var M=d.createEvent("MouseEvents");return M.initMouseEvent(E.type,E.bubbles,E.cancelable,h,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget),M}function g(E){d.body.dispatchEvent(p(E))}function D(E,M){var O=this,R="absolute",B=O._dlgcfg;B&&r.isString(B.style_position)&&(R=B.style_position),O.open?r.error("showDialog called on open dialog."):(O.open=s,O.removeAttribute("closed"),O.setAttribute("open","open"),O.setAttribute("style","DIALOG"==O.tagName?"position:"+R+";left:0;right:0;top:30%;margin:auto;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);width:-moz-fit-content;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;":"position:"+R+";display:block;left:0;right:0;border:0;top:30%;margin:auto;width:-moz-fit-content;-webkit-box-sizing:border-box;box-sizing:border-box;"),function I(E){var M=i;return h.getComputedStyle?M=h.getComputedStyle(E):E.currentStyle&&(M=E.currentStyle),M&&"absolute"!=M.position||"auto"!=E.style.top&&""!=E.style.top||"auto"!=E.style.bottom&&""!=E.style.bottom?i:!function m(E){for(var M=0;M<d.styleSheets.length;++M){var B,b,O=d.styleSheets[M],R=i,F=i;try{R=O.cssRules,F=d.querySelectorAll}catch{}if(R&&F)for(var A=0;A<R.length;++A){B=R[A],b=i;try{b=F(B.selectorText)}catch{}if(b&&l(b,E)){var N=B.style.getPropertyValue("top"),Y=B.style.getPropertyValue("bottom");if(N&&"auto"!=N||Y&&"auto"!=Y)return s}}}return i}(E)}(O)&&function c(E){E.style.top=(d.body.scrollTop||d.documentElement.scrollTop)+((h.innerHeight?h.innerHeight:d.documentElement.clientHeight)-E.offsetHeight)/2+"px",E._dlgInfo.isTopOverridden=s}(O),E&&(O._dlgInfo.modal=s,T.pushDialog(O,M)))}function P(E){var M=this;return M.open||r.error("closeDialog called on closed dialog."),M.open=i,M.removeAttribute("open"),M.setAttribute("closed","closed"),M.style.display="none",typeof E<"u"&&(M.returnValue=E),M._dlgInfo.isTopOverridden&&(M.style.top="auto"),M._dlgInfo.modal&&T.removeDialog(M),M.returnValue}}(w),function(e){var t=20200521;if(!(e._sizzle_ver&&e.isNumber(e._sizzle_ver)&&e._sizzle_ver>=t)){e._sizzle_ver=t;var h,d,s,i,u,f,a,o,c,l,m,I,g,C,_,v,M,O,R,F,r=RegExp,T="dws_"+1*new Date,D=window.document,P=0,E=0,B=function(ve,Fe){return ve===Fe&&(c=!0),0},b=[],A=b.pop,N=b.push,Y=b.push,ne=b.slice,Ie=function(ve,Fe){for(var Ve=0,Ye=ve.length;Ve<Ye;Ve++)if(ve[Ve]===Fe)return Ve;return-1},ce="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",he=["\\[",ce,"*(",q,")(?:",ce,"*([*^$|!~]?=)",ce,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",q,"))|)",ce,"*\\]"].join(""),ie=new r(ce+"+","g"),V=new r(["^",ce,"+|((?:^|[^\\\\])(?:\\\\.)*)",ce,"+$"].join(""),"g"),J=new r(["^",ce,"*,",ce,"*"].join("")),te=new r(["^",ce,"*([>+~]|",ce,")",ce,"*"].join("")),Ee=(new r("^"+q+"$"),{ID:new r("^#("+q+")"),CLASS:new r("^\\.("+q+")"),TAG:new r("^("+q+"|[*])"),ATTR:new r("^"+he),needsContext:new r(["^",ce,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",ce,"*((?:-\\d)?\\d*)",ce,"*\\)|)(?=[^-]|$)"].join(""),"i")}),ge=/^[^{]+\{\s*\[native \w/,Re=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,k=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,U=function(ve,Fe){return Fe?"\0"===ve?"\ufffd":ve.slice(0,-1)+"\\"+ve.charCodeAt(ve.length-1).toString(16)+" ":"\\"+ve},H=function(){l()};M=ee(),O=ee(),R=ee(),F=ee();try{Y.apply(b=ne.call(D.childNodes),D.childNodes)}catch{Y={apply:b.length?function(Fe,Ve){N.apply(Fe,ne.call(Ve))}:function(Fe,Ve){for(var Ye=Fe.length,Ne=0;Fe[Ye++]=Ve[Ne++];);Fe.length=Ye-1}}}h=Q.support={},l=Q.setDocument=function(ve){var Fe,Ve,Ye=ve?ve.ownerDocument||ve:D;return Ye===m||9!==Ye.nodeType||!Ye.documentElement||(I=(m=Ye).documentElement,D!==m&&(Ve=m.defaultView)&&Ve.top!==Ve&&(Ve.addEventListener?Ve.addEventListener("unload",H,!1):Ve.attachEvent&&Ve.attachEvent("onunload",H)),h.attributes=le(function(Ne){return Ne.className="i",!Ne.getAttribute("className")}),h.getElementsByTagName=le(function(Ne){return Ne.appendChild(m.createComment("")),!Ne.getElementsByTagName("*").length}),h.getElementsByClassName=ge.test(m.getElementsByClassName),h.getById=le(function(Ne){return I.appendChild(Ne).id=T,!m.getElementsByName||!m.getElementsByName(T).length}),d.filter.ID=h.getById?function(Ne){var Je=Ne;return function(we){return we.getAttribute("id")===Je}}:function(Ne){var Je=new r(["^",Ne,"$"].join(""),"g");return function(we){var Ae=typeof we.getAttributeNode<"u"&&we.getAttributeNode("id");return Ae&&Je.test(Ae.value)}},d.find.TAG=h.getElementsByTagName?function(Ne,Je){return typeof Je.getElementsByTagName<"u"?Je.getElementsByTagName(Ne):h.qsa?Je.querySelectorAll(Ne):void 0}:function(Ne,Je){var we,Ae=[],Ue=0,He=Je.getElementsByTagName(Ne);if("*"===Ne){for(;we=He[Ue++];)1===we.nodeType&&Ae.push(we);return Ae}return He},d.find.CLASS=h.getElementsByClassName&&function(Ne,Je){if(typeof Je.getElementsByClassName<"u")return Je.getElementsByClassName(Ne)},C=[],g=[],(h.qsa=ge.test(m.querySelectorAll))&&(le(function(Ne){I.appendChild(Ne).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ne.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+ce+"*(?:''|\"\")"),Ne.querySelectorAll("[selected]").length||g.push("\\["+ce+"*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),Ne.querySelectorAll("[id~="+T+"-]").length||g.push("~="),Ne.querySelectorAll(":checked").length||g.push(":checked"),Ne.querySelectorAll("a#"+T+"+*").length||g.push(".#.+[+~]")}),le(function(Ne){Ne.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Je=m.createElement("input");Je.setAttribute("type","hidden"),Ne.appendChild(Je).setAttribute("name","D"),Ne.querySelectorAll("[name=d]").length&&g.push("name"+ce+"*[*^$|!~]?="),2!==Ne.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),I.appendChild(Ne).disabled=!0,2!==Ne.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),Ne.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=ge.test(_=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&le(function(Ne){h.disconnectedMatch=_.call(Ne,"*"),_.call(Ne,"[s!='']:x")}),g=g.length&&new r(g.join("|")),C=C.length&&new r(C.join("|")),Fe=ge.test(I.compareDocumentPosition),v=Fe||ge.test(I.contains)?function(Ne,Je){var we=9===Ne.nodeType?Ne.documentElement:Ne,Ae=Je&&Je.parentNode;return Ne===Ae||!(!Ae||1!==Ae.nodeType||!(we.contains?we.contains(Ae):Ne.compareDocumentPosition&&16&Ne.compareDocumentPosition(Ae)))}:function(Ne,Je){if(Je)for(;Je=Je.parentNode;)if(Je===Ne)return!0;return!1},B=Fe?function(Ne,Je){if(Ne===Je)return c=!0,0;var we=!Ne.compareDocumentPosition-!Je.compareDocumentPosition;return we||(1&(we=(Ne.ownerDocument||Ne)===(Je.ownerDocument||Je)?Ne.compareDocumentPosition(Je):1)||!h.sortDetached&&Je.compareDocumentPosition(Ne)===we?Ne===m||Ne.ownerDocument===D&&v(D,Ne)?-1:Je===m||Je.ownerDocument===D&&v(D,Je)?1:o?Ie(o,Ne)-Ie(o,Je):0:4&we?-1:1)}:function(Ne,Je){if(Ne===Je)return c=!0,0;var we,Ae=0,Ue=Ne.parentNode,He=Je.parentNode,Ke=[Ne],rt=[Je];if(!Ue||!He)return Ne===m?-1:Je===m?1:Ue?-1:He?1:o?Ie(o,Ne)-Ie(o,Je):0;if(Ue===He)return Ce(Ne,Je);for(we=Ne;we=we.parentNode;)Ke.unshift(we);for(we=Je;we=we.parentNode;)rt.unshift(we);for(;Ke[Ae]===rt[Ae];)Ae++;return Ae?Ce(Ke[Ae],rt[Ae]):Ke[Ae]===D?-1:rt[Ae]===D?1:0}),m},Q.matches=function(ve,Fe){return Q(ve,null,null,Fe)},Q.matchesSelector=function(ve,Fe){if((ve.ownerDocument||ve)!==m&&l(ve),h.matchesSelector&&!F[Fe+" "]&&(!C||!C.test(Fe))&&(!g||!g.test(Fe)))try{var Ve=_.call(ve,Fe);if(Ve||h.disconnectedMatch||ve.document&&11!==ve.document.nodeType)return Ve}catch{F(Fe,!0)}return Q(Fe,m,null,[ve]).length>0},Q.contains=function(ve,Fe){return(ve.ownerDocument||ve)!==m&&l(ve),v(ve,Fe)},Q.escape=function(ve){return(ve+"").replace(k,U)},Q.error=function(ve){throw new Error("Syntax error: "+ve)},Q.uniqueSort=function(ve){var Fe,Ve=[],Ye=0,Ne=0;if(c=!h.detectDuplicates,o=!h.sortStable&&ve.slice(0),ve.sort(B),c){for(;Fe=ve[Ne++];)Fe===ve[Ne]&&(Ye=Ve.push(Ne));for(;Ye--;)ve.splice(Ve[Ye],1)}return o=null,ve},s=Q.getText=function(ve){var Fe,Ve="",Ye=0,Ne=ve.nodeType;if(Ne){if(1===Ne||9===Ne||11===Ne){if("string"==typeof ve.textContent)return ve.textContent;for(ve=ve.firstChild;ve;ve=ve.nextSibling)Ve+=s(ve)}else if(3===Ne||4===Ne)return ve.nodeValue}else for(;Fe=ve[Ye++];)Ve+=s(Fe);return Ve},d=Q.selectors={cacheLength:50,match:Ee,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ve){return ve[3]=ve[3]||ve[4]||ve[5]||"","~="===ve[2]&&(ve[3]=" "+ve[3]+" "),ve.slice(0,4)}},filter:{TAG:function(ve){var Fe=ve.toLowerCase();return"*"===ve?function(){return!0}:function(Ve){return Ve.nodeName&&Ve.nodeName.toLowerCase()===Fe}},CLASS:function(ve){var Fe=M[ve+" "];return Fe||(Fe=new r("(^|"+ce+")"+ve+"("+ce+"|$)"))&&M(ve,function(Ve){return Fe.test("string"==typeof Ve.className&&Ve.className||typeof Ve.getAttribute<"u"&&Ve.getAttribute("class")||"")})},ATTR:function(ve,Fe,Ve){return function(Ye){var Ne=Q.attr(Ye,ve);return null==Ne?"!="===Fe:!Fe||(Ne+="","="===Fe?Ne===Ve:"!="===Fe?Ne!==Ve:"^="===Fe?Ve&&0===Ne.indexOf(Ve):"*="===Fe?Ve&&Ne.indexOf(Ve)>-1:"$="===Fe?Ve&&Ne.slice(-Ve.length)===Ve:"~="===Fe?(" "+Ne.replace(ie," ")+" ").indexOf(Ve)>-1:"|="===Fe&&(Ne===Ve||Ne.slice(0,Ve.length+1)===Ve+"-"))}}}},Be.prototype=d.filters=d.pseudos,d.setFilters=new Be,i=Q.tokenize=function(ve,Fe){var Ve,Ye,Je,we,Ae,Ue,Ne=[],He=O[ve+" "];if(He)return Fe?0:He.slice(0);for(we=ve,Ae=[],Ue=d.preFilter;we;){for(Je in(!Ve||(Ye=J.exec(we)))&&(Ye&&(we=we.slice(Ye[0].length)||we),Ae.push(Ne=[])),Ve=!1,(Ye=te.exec(we))&&(Ve=Ye.shift(),Ne.push({value:Ve,type:Ye[0].replace(V," ")}),we=we.slice(Ve.length)),d.filter)(Ye=Ee[Je].exec(we))&&(!Ue[Je]||(Ye=Ue[Je](Ye)))&&(Ve=Ye.shift(),Ne.push({value:Ve,type:Je,matches:Ye}),we=we.slice(Ve.length));if(!Ve)break}return Fe?we.length:we?Q.error(ve):O(ve,Ae).slice(0)},u=Q.compile=function(ve,Fe){var Ve,Ye=[],Ne=[],Je=R[ve+" "];if(!Je){for(Fe||(Fe=i(ve)),Ve=Fe.length;Ve--;)(Je=Ze(Fe[Ve]))[T]?Ye.push(Je):Ne.push(Je);Je=R(ve,function ot(ve,Fe){var Ve=Fe.length>0,Ye=ve.length>0,Ne=function(Je,we,Ae,Ue,He){var Ke,rt,st,ht=0,ft="0",pt=Je&&[],Ct=[],St=a,At=Je||Ye&&d.find.TAG("*",He),En=P+=null==St?1:Math.random()||.1,mn=At.length;for(He&&(a=we===m||we||He);ft!==mn&&null!=(Ke=At[ft]);ft++){if(Ye&&Ke){for(rt=0,!we&&Ke.ownerDocument!==m&&(l(Ke),Ae=!1);st=ve[rt++];)if(st(Ke,we||m,Ae)){Ue.push(Ke);break}He&&(P=En)}Ve&&((Ke=!st&&Ke)&&ht--,Je&&pt.push(Ke))}if(ht+=ft,Ve&&ft!==ht){for(rt=0;st=Fe[rt++];)st(pt,Ct,we,Ae);if(Je){if(ht>0)for(;ft--;)pt[ft]||Ct[ft]||(Ct[ft]=A.call(Ue));Ct=Oe(Ct)}Y.apply(Ue,Ct),He&&!Je&&Ct.length>0&&ht+Fe.length>1&&Q.uniqueSort(Ue)}return He&&(P=En,a=St),pt};return Ve?se(Ne):Ne}(Ne,Ye)),Je.selector=ve}return Je},f=Q.select=function(ve,Fe,Ve,Ye){var Je="function"==typeof ve&&ve,we=!Ye&&i(ve=Je.selector||ve);return Ve=Ve||[],(Je||u(ve,we))(Ye,Fe,!1,Ve,!Fe||Fe),Ve},h.sortStable=T.split("").sort(B).join("")===T,h.detectDuplicates=!!c,l(),h.sortDetached=le(function(ve){return 1&ve.compareDocumentPosition(m.createElement("fieldset"))}),le(function(ve){return ve.innerHTML="<a href='#'></a>","#"===ve.firstChild.getAttribute("href")}),!h.attributes||le(function(ve){return ve.innerHTML="<input/>",ve.firstChild.setAttribute("value",""),""===ve.firstChild.getAttribute("value")}),le(function(ve){return null==ve.getAttribute("disabled")}),e.support=h,e.sizzle=Q}function ee(){var ve=[];return function Fe(Ve,Ye){return ve.push(Ve+" ")>d.cacheLength&&delete Fe[ve.shift()],Fe[Ve+" "]=Ye}}function ye(ve){for(var Fe=0,Ve=ve.length,Ye="";Fe<Ve;Fe++)Ye+=ve[Fe].value;return Ye}function Q(ve,Fe,Ve,Ye){var Ne,Je,we,Ae,Ue,He,Ke,rt=Fe&&Fe.ownerDocument,st=Fe?Fe.nodeType:9;if(Ve=Ve||[],"string"!=typeof ve||!ve||1!==st&&9!==st&&11!==st)return Ve;if(!Ye){if((Fe?Fe.ownerDocument||Fe:D)!==m&&l(Fe),Fe=Fe||m,11!==st)if(Ue=Re.exec(ve))if(Ne=Ue[1]){if(9===st){if(!(we=Fe.getElementById(Ne)))return Ve;if(we.id===Ne)return Ve.push(we),Ve}else if(rt&&(we=rt.getElementById(Ne))&&v(Fe,we)&&we.id===Ne)return Ve.push(we),Ve}else{if(Ue[2])return Y.apply(Ve,Fe.getElementsByTagName(ve)),Ve;if((Ne=Ue[3])&&h.getElementsByClassName&&Fe.getElementsByClassName)return Y.apply(Ve,Fe.getElementsByClassName(Ne)),Ve}else(Ue=G.exec(ve))&&((Ne=Ue[1])?(9===st?(we=Fe.getElementById(Ne))&&we.id===Ne&&(Fe=we):rt&&(we=rt.getElementById(Ne))&&v(Fe,we)&&we.id===Ne&&(Fe=we),Ne="#"+Ne+" "):(Ne=Ue[2])?(Y.apply(Ve,Fe.getElementsByTagName(ve)),Fe=Ve[0],Ne+=" "):(Ne=Ue[3])&&h.getElementsByClassName&&Fe.getElementsByClassName&&(Y.apply(Ve,Fe.getElementsByClassName(Ne)),Fe=Ve[0],Ne+=" "),ve=ve.replace(Ne,""));if(h.qsa&&!F[ve+" "]&&(!g||!g.test(ve))){if(1!==st)rt=Fe,Ke=ve;else if("object"!==Fe.nodeName.toLowerCase()){for((Ae=Fe.getAttribute("id"))?Ae=Ae.replace(k,U):Fe.setAttribute("id",Ae=T),Je=(He=i(ve)).length;Je--;)He[Je]="#"+Ae+" "+ye(He[Je]);Ke=He.join(","),rt=Fe}if(Ke)try{return Y.apply(Ve,rt.querySelectorAll(Ke)),Ve}catch{F(ve,!0)}finally{Ae===T&&Fe.removeAttribute("id")}}}return f(ve.replace(V,"$1"),Fe,Ve,Ye)}function se(ve){return ve[T]=!0,ve}function le(ve){var Fe=m.createElement("fieldset");try{return!!ve(Fe)}catch{return!1}finally{Fe.parentNode&&Fe.parentNode.removeChild(Fe),Fe=null}}function Ce(ve,Fe){var Ve=Fe&&ve,Ye=Ve&&1===ve.nodeType&&1===Fe.nodeType&&ve.sourceIndex-Fe.sourceIndex;if(Ye)return Ye;if(Ve)for(;Ve=Ve.nextSibling;)if(Ve===Fe)return-1;return ve?1:-1}function Be(){}function xe(ve,Fe,Ve){var Ye=Fe.dir,Ne=Fe.next,Je=Ne||Ye,we=Ve&&"parentNode"===Je,Ae=E++;return Fe.first?function(Ue,He,Ke){for(;Ue=Ue[Ye];)if(1===Ue.nodeType||we)return ve(Ue,He,Ke);return!1}:function(Ue,He,Ke){var rt,st,ht,ft=[P,Ae];if(Ke){for(;Ue=Ue[Ye];)if((1===Ue.nodeType||we)&&ve(Ue,He,Ke))return!0}else for(;Ue=Ue[Ye];)if(1===Ue.nodeType||we)if(st=(ht=Ue[T]||(Ue[T]={}))[Ue.uniqueID]||(ht[Ue.uniqueID]={}),Ne&&Ne===Ue.nodeName.toLowerCase())Ue=Ue[Ye]||Ue;else{if((rt=st[Je])&&rt[0]===P&&rt[1]===Ae)return ft[2]=rt[2];if(st[Je]=ft,ft[2]=ve(Ue,He,Ke))return!0}return!1}}function me(ve){return ve.length>1?function(Fe,Ve,Ye){for(var Ne=ve.length;Ne--;)if(!ve[Ne](Fe,Ve,Ye))return!1;return!0}:ve[0]}function Oe(ve,Fe,Ve,Ye,Ne){for(var Je,we=[],Ae=0,Ue=ve.length,He=null!=Fe;Ae<Ue;Ae++)(Je=ve[Ae])&&(!Ve||Ve(Je,Ye,Ne))&&(we.push(Je),He&&Fe.push(Ae));return we}function ze(ve,Fe,Ve,Ye,Ne,Je){return Ye&&!Ye[T]&&(Ye=ze(Ye)),Ne&&!Ne[T]&&(Ne=ze(Ne,Je)),se(function(we,Ae,Ue,He){var Ke,rt,st,ht=[],ft=[],pt=Ae.length,Ct=we||function Me(ve,Fe,Ve){for(var Ye=0,Ne=Fe.length;Ye<Ne;Ye++)Q(ve,Fe[Ye],Ve);return Ve}(Fe||"*",Ue.nodeType?[Ue]:Ue,[]),St=!ve||!we&&Fe?Ct:Oe(Ct,ht,ve,Ue,He),At=Ve?Ne||(we?ve:pt||Ye)?[]:Ae:St;if(Ve&&Ve(St,At,Ue,He),Ye)for(Ke=Oe(At,ft),Ye(Ke,[],Ue,He),rt=Ke.length;rt--;)(st=Ke[rt])&&(At[ft[rt]]=!(St[ft[rt]]=st));if(we){if(Ne||ve){if(Ne){for(Ke=[],rt=At.length;rt--;)(st=At[rt])&&Ke.push(St[rt]=st);Ne(null,At=[],Ke,He)}for(rt=At.length;rt--;)(st=At[rt])&&(Ke=Ne?Ie(we,st):ht[rt])>-1&&(we[Ke]=!(Ae[Ke]=st))}}else At=Oe(At===Ae?At.splice(pt,At.length):At),Ne?Ne(null,Ae,At,He):Y.apply(Ae,At)})}function Ze(ve){for(var Fe,Ve,Ye,Ne=ve.length,Je=d.relative[ve[0].type],we=Je||d.relative[" "],Ae=Je?1:0,Ue=xe(function(rt){return rt===Fe},we,!0),He=xe(function(rt){return Ie(Fe,rt)>-1},we,!0),Ke=[function(rt,st,ht){var ft=!Je&&(ht||st!==a)||((Fe=st).nodeType?Ue(rt,st,ht):He(rt,st,ht));return Fe=null,ft}];Ae<Ne;Ae++)if(Ve=d.relative[ve[Ae].type])Ke=[xe(me(Ke),Ve)];else{if((Ve=d.filter[ve[Ae].type].apply(null,ve[Ae].matches))[T]){for(Ye=++Ae;Ye<Ne&&!d.relative[ve[Ye].type];Ye++);return ze(Ae>1&&me(Ke),Ae>1&&ye(ve.slice(0,Ae-1).concat({value:" "===ve[Ae-2].type?"*":""})).replace(V,"$1"),Ve,Ae<Ye&&Ze(ve.slice(Ae,Ye)),Ye<Ne&&Ze(ve=ve.slice(Ye)),Ye<Ne&&ye(ve))}Ke.push(Ve)}return me(Ke)}}(w.Lib),function(e){var r=e.doc,h=e.each,d=r.documentElement,s=20200521;if(!(e._ui_nodelistExt_ver&&e.isNumber(e._ui_nodelistExt_ver)&&e._ui_nodelistExt_ver>=s)){e._ui_nodelistExt_ver=s;var f,a,o,c,l,m,i=e.support,u=e.sizzle,I=r.createElement("div"),p=r.createElement("div");if(p.style){p.style.cssText="float:left;opacity:.5",i.opacity="0.5"===p.style.opacity,i.cssFloat=!!p.style.cssFloat,p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===p.style.backgroundClip,(I=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",p.innerHTML="",I.appendChild(p),i.boxSizing=""===p.style.boxSizing||""===p.style.MozBoxSizing||""===p.style.WebkitBoxSizing,e.mix(i,{reliableHiddenOffsets:function(){return null==f&&g(),c},boxSizingReliable:function(){return null==f&&g(),o},pixelMarginRight:function(){return null==f&&g(),a},pixelPosition:function(){return null==f&&g(),f},reliableMarginRight:function(){return null==f&&g(),l},reliableMarginLeft:function(){return null==f&&g(),m}});var C,_,v=/^margin/,T=/^(top|right|bottom|left)$/,D=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,P=new RegExp("^("+D+")(?!px)[a-z%]+$","i"),E=new RegExp("^("+D+")(.*)$","i");window.getComputedStyle?(C=function(Z){var Q,se;return(!(se=(Q=e.isFunction(Z.getEL)?Z.getEL():Z).ownerDocument.defaultView)||!se.opener)&&(se=window),se.getComputedStyle(Q)},_=function(Z,Q,se){var le,pe,Ce,Te,Be=Z.style;return(""===(Te=(se=se||C(Z))?se.getPropertyValue(Q)||se[Q]:void 0)||void 0===Te)&&!u.contains(Z.ownerDocument,Z)&&(Te=e.style(Z,Q)),se&&!i.pixelMarginRight()&&P.test(Te)&&v.test(Q)&&(le=Be.width,pe=Be.minWidth,Ce=Be.maxWidth,Be.minWidth=Be.maxWidth=Be.width=Te,Te=se.width,Be.width=le,Be.minWidth=pe,Be.maxWidth=Ce),void 0===Te?Te:Te+""}):d.currentStyle&&(C=function(Z){return Z.currentStyle},_=function(Z,Q,se){var le,pe,Ce,Te,Be=Z.style;return null==(Te=(se=se||C(Z))?se[Q]:void 0)&&Be&&Be[Q]&&(Te=Be[Q]),P.test(Te)&&!T.test(Q)&&(le=Be.left,(Ce=(pe=Z.runtimeStyle)&&pe.left)&&(pe.left=Z.currentStyle.left),Be.left="fontSize"===Q?"1em":Te,Te=Be.pixelLeft+"px",Be.left=le,Ce&&(pe.left=Ce)),void 0===Te?Te:Te+""||"auto"});var q,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,O=/<([\w:-]+)/,R=/^\s+/,F=/<|&#?\w+;/,B=/<tbody/i,b=/^-ms-/,A=/-([\da-z])/gi,N=/^(none|table(?!-c[ea]).+)/,Y=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ne={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"},_e=["Top","Right","Bottom","Left"],ce={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:i.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},he=["Webkit","O","Moz","ms"],V=document.createElement("div");if(V.style){q=V.style,i.cssFloat=!!V.style.cssFloat;var J=function(Z,Q){return Q.toUpperCase()},te={type:e.type,cssHooks:{},htmlPrefilter:function(Z){return Z.replace(M,"<$1></$2>")},nodeName:function(Z,Q){return Z.nodeName&&Z.nodeName.toLowerCase()===Q.toLowerCase()},merge:function(Z,Q){for(var se=+Q.length,le=0,pe=Z.length;le<se;)Z[pe++]=Q[le++];if(se!=se)for(;void 0!==Q[le];)Z[pe++]=Q[le++];return Z.length=pe,Z},camelCase:function(Z){return Z.replace(b,"ms-").replace(A,J)},cssProps:{float:i.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}};h(["height","width"],function(Z,Q){te.cssHooks[Z]={get:function(se,le,pe){if(le)return N.test(e.css(se,"display"))&&0===se.offsetWidth?function(Z,Q,se,le){var pe,Te={};return h(Q,function(Be,xe){Te[xe]=Z.style[xe],Z.style[xe]=Q[xe]}),pe=se.apply(Z,[]),h(Q,function(Be,xe){Z.style[xe]=Te[xe]}),pe}(se,ne,function(){return U(se,Z,pe)}):U(se,Z,pe)},set:function(se,le,pe){var Ce=pe&&C(se);return function ee(Z,Q,se){var le=E.exec(Q);return le?Math.max(0,le[1]-(se||0))+(le[2]||"px"):Q}(0,le,pe?k(se,Z,pe,i.boxSizing&&"border-box"===e.css(se,"boxSizing",!1,Ce),Ce):0)}}}),e.style=function(Z,Q,se,le){if(Z&&3!==Z.nodeType&&8!==Z.nodeType&&Z.style){var pe,Ce,Te,Be=te.camelCase(Q),xe=Z.style;if(Q=te.cssProps[Be]||(te.cssProps[Be]=oe(Be)||Be),Te=te.cssHooks[Q]||te.cssHooks[Be],void 0===se)return Te&&"get"in Te&&void 0!==(pe=Te.get(Z,!1,le))?pe:xe[Q]+"";if("string"==(Ce=typeof se)&&(pe=H(se))&&pe[1]&&(se=function ye(Z,Q,se,le){var pe,Ce=1,Te=20,Be=le?function(){return le.cur()}:function(){return e.css(Z,Q,"")},xe=Be(),me=se&&se[3]||(te.cssNumber[Q]?"":"px"),Me=(te.cssNumber[Q]||"px"!==me&&+xe)&&H(e.css(Z,Q));if(Me&&Me[3]!==me){me=me||Me[3],se=se||[],Me=+xe||1;do{e.style(Z,Q,(Me/=Ce=Ce||".5")+me)}while(Ce!==(Ce=Be()/xe)&&1!==Ce&&--Te)}return se&&(Me=+Me||+xe||0,pe=se[1]?Me+(se[1]+1)*se[2]:+se[2],le&&(le.unit=me,le.start=Me,le.end=pe)),pe}(Z,Q,pe),Ce="number"),null==se||se!=se)return;"number"===Ce&&(se+=pe&&pe[3]||(te.cssNumber[Be]?"":"px")),!i.clearCloneStyle&&""===se&&0===Q.indexOf("background")&&(xe[Q]="inherit"),(!Te||!("set"in Te)||void 0!==(se=Te.set(Z,se,le)))&&(xe[Q]=se)}},e.css=function(Z,Q,se,le){var pe,Ce,Te,Be=te.camelCase(Q);return Q=te.cssProps[Be]||(te.cssProps[Be]=oe(Be)||Be),(Te=te.cssHooks[Q]||te.cssHooks[Be])&&"get"in Te&&(Ce=Te.get(Z,!0,se)),void 0===Ce&&(Ce=_(Z,Q,le)),"normal"===Ce&&Q in Ie&&(Ce=Ie[Q]),""===se||se?(pe=parseFloat(Ce),!0===se||isFinite(pe)?pe||0:Ce):Ce},e.parseHTML=function(Z,Q){if(!Z||"string"!=typeof Z)return[];"boolean"==typeof Q&&(Q=!1),Q=Q||document;var se=Y.exec(Z);return se?[Q.createElement(se[1])]:(se=function Re(Z,Q){for(var se,le,Ce,Te,Be,xe,me=Z.length,Me=function ge(Z){var Q="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),se=Z.createDocumentFragment();if(se.createElement)for(;Q.length;)se.createElement(Q.pop());return se}(Q),Oe=[],ze=0;ze<me;ze++)if((le=Z[ze])||0===le)if("object"===e.type(le))te.merge(Oe,le.nodeType?[le]:le);else if(F.test(le)){for(Ce=Ce||Me.appendChild(Q.createElement("div")),Te=(O.exec(le)||["",""])[1].toLowerCase(),Ce.innerHTML=(xe=ce[Te]||ce._default)[1]+te.htmlPrefilter(le)+xe[2],se=xe[0];se--;)Ce=Ce.lastChild;if(!i.leadingWhitespace&&R.test(le)&&Oe.push(Q.createTextNode(R.exec(le)[0])),!i.tbody)for(se=(le="table"!==Te||B.test(le)?"<table>"!==xe[1]||B.test(le)?0:Ce:Ce.firstChild)&&le.childNodes.length;se--;)te.nodeName(Be=le.childNodes[se],"tbody")&&!Be.childNodes.length&&le.removeChild(Be);for(te.merge(Oe,Ce.childNodes),Ce.textContent="";Ce.firstChild;)Ce.removeChild(Ce.firstChild);Ce=Me.lastChild}else Oe.push(Q.createTextNode(le));for(Ce&&Me.removeChild(Ce),ze=0;le=Oe[ze++];)"SCRIPT"!==le.tagName&&(u.contains(le.ownerDocument,le),Me.appendChild(le));return Ce=null,Me}([Z],Q),te.merge([],se.childNodes))}}}}function g(){var Z,Q;d.appendChild(I),p.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",f=o=m=!1,a=l=!0,window.getComputedStyle&&(Q=window.getComputedStyle(p),f="1%"!==(Q||{}).top,m="2px"===(Q||{}).marginLeft,o="4px"===(Q||{width:"4px"}).width,p.style.marginRight="50%",a="4px"===(Q||{marginRight:"4px"}).marginRight,(Z=p.appendChild(document.createElement("div"))).style.cssText=p.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",Z.style.marginRight=Z.style.width="0",p.style.width="1px",l=!parseFloat((window.getComputedStyle(Z)||{}).marginRight),p.removeChild(Z)),p.style.display="none",(c=0===p.getClientRects().length)&&(p.style.display="",p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",p.childNodes[0].style.borderCollapse="separate",(Z=p.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(c=0===Z[0].offsetHeight)&&(Z[0].style.display="",Z[1].style.display="none",c=0===Z[0].offsetHeight)),d.removeChild(I)}function oe(Z){if(Z in q)return Z;for(var Q=Z.charAt(0).toUpperCase()+Z.slice(1),se=he.length;se--;)if((Z=he[se]+Q)in q)return Z}function k(Z,Q,se,le,pe){for(var Ce=se===(le?"border":"content")?4:"width"===Q?1:0,Te=0;Ce<4;Ce+=2)"margin"===se&&(Te+=e.css(Z,se+_e[Ce],!0,pe)),le?("content"===se&&(Te-=e.css(Z,"padding"+_e[Ce],!0,pe)),"margin"!==se&&(Te-=e.css(Z,"border"+_e[Ce]+"Width",!0,pe))):(Te+=e.css(Z,"padding"+_e[Ce],!0,pe),"padding"!==se&&(Te+=e.css(Z,"border"+_e[Ce]+"Width",!0,pe)));return Te}function U(Z,Q,se){var le=!0,pe="width"===Q?Z.offsetWidth:Z.offsetHeight,Ce=C(Z),Te=i.boxSizing&&"border-box"===e.css(Z,"boxSizing",!1,Ce);if(pe<=0||null==pe){if(((pe=_(Z,Q,Ce))<0||null==pe)&&(pe=Z.style[Q]),P.test(pe))return pe;le=Te&&(i.boxSizingReliable()||pe===Z.style[Q]),pe=parseFloat(pe)||0}return pe+k(Z,Q,se||(Te?"border":"content"),le,Ce)}function H(Z){return new RegExp("^(?:([+-])=|)("+D+")([a-z%]*)$","i").exec(Z)}}(w.Lib),w.navInfoSync.bIE&&w.navInfoSync.IEVersion<=9||function(e){var t={};function n(r){if(t[r])return t[r].exports;var h=t[r]={i:r,l:!1,exports:{}};return e[r].call(h.exports,h,h.exports,n),h.l=!0,h.exports}n.m=e,n.c=t,n.d=function(r,h,d){n.o(r,h)||Object.defineProperty(r,h,{enumerable:!0,get:d})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,h){if(1&h&&(r=n(r)),8&h||4&h&&"object"==typeof r&&r&&r.__esModule)return r;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:r}),2&h&&"string"!=typeof r)for(var s in r)n.d(d,s,function(i){return r[i]}.bind(null,s));return d},n.n=function(r){var h=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(h,"a",h),h},n.o=function(r,h){return Object.prototype.hasOwnProperty.call(r,h)},n.p="",n(n.s=7)}([function(e,t,n){n.d(t,"e",function(){return h}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return s}),n.d(t,"d",function(){return i}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return a});var h=(typeof window<"u"&&window,{PREVIOUS:"prev",NEXT:"next"}),d={CLICK:"click",KEYDOWN:"keydown",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",CHANGE:"change",SCROLL:"scroll",CONTEXTMENU:"contextmenu",RESIZE:"resize"},s={IMAGE_SELECTED:"imageSelected",PAGE_CLICK:"click",PAGE_MOUSE_DOWN:"mousedown",PAGE_MOUSE_MOVE:"mousemove",PAGE_MOUSE_UP:"mouseup",PAGE_MOUSE_OVER:"mouseover",PAGE_MOUSE_OUT:"mouseout",PAGE_DOUBLE_CLICK:"dblclick",PAGE_RIGHT_CLICK:"rightclick",PAGE_CONTEXTMENU:"contextmenu",DRAG_START:"dragstart",DRAG_MOVE:"dragmove",DRAG_DONE:"dragdone",KEY_DOWN:"keydown",KEY_UP:"keyup",RESIZE:"resize",TOP_PAGE_CHANGED:"topPageChanged",BUFFER_CHANGED:"bufferChanged",THUMBNAIL_STRETCH:"resize",REMOVE_PAGE:"removePage",FILE_KEY_UP:"fileKeyUp",FILE_LIST_CLICK:"fileListClick",FILE_LIST_RIGHT_CLICK:"fileListRightClick",TAG_KEY_UP:"tagKeyUp",TAG_LIST_CLICK:"tagListClick",TAG_LIST_RIGHT_CLICK:"tagListRightClick",PAGE_AREA_SELECTED:"pageAreaSelected",PAGE_AREA_UNSELECTED:"pageAreaUnselected",VIEWER_PAGE_RENDERED:"pageRendered",DOCUMENT_KEY_UP:"onDocumentKeyUp",DOCUMENT_POINTER_UP:"onDocumentPointerUp",DOCUMENT_POINTER_MOVE:"onDocumentPointerMove",DOCUMENT_CLICK:"onDocumentClick",SIDEBAR_CLICK:"onSidebarClick",FILE_DROP:"onDrop",WHEEL:"wheel"},i={APPEND_SYNC_DROP:"_appendSyncDrop",UPDATE_UI_SETTING:"_updateUISetting",UPDATE_FOCUS:"_updateFocus",CANVAS_VISIBILITY_CHANGED:"_canvasVisibilityChanged",SET_SELECTED_INDEXES:"_SetSelectedIndexes",DOCUMENT_UP:"_documentUp",DOCUMENT_MOVE:"_documentMove",DISPLAYED_IMAGE_CHANGED:"_displayedImageChanged",REORDER_THUMBNAIL:"_onReOrderThumbnail",CHANGE_THUMBNAIL_VIEW_PROP:"_changeThumbnailViewProp",UPDATE_INNER_THUMBNAIL_PAGE:"_updateInnerThumbnailPage",ERROR:"_updateErrorMessage",LOG:"_updateLogMessage",CLEAR_SLT_BOX:"_clearSltBox",DIRECTORY_CHANGED:"_DirectoryChanged",BIND_SLIDE_COMPONENT:"_bindSlideComponent",UNBIND_SLIDE_COMPONENT:"_unbindSlideComponent",BIND_CANVAS:"_bindCanvas",UNBIND_CANVAS:"_unbindCanvas",SET_CANVAS_SIZE:"_setCanvasSize",CANVAS_TOUCH_START:"_canvasTouchstart",CANVAS_TOUCH_MOVE:"_canvasTouchmove",CANVAS_TOUCH_END:"_canvasTouchend",CANVAS_MOUSE_DOWN:"_canvasMousedown",CANVAS_MOUSE_UP:"_canvasMouseup",CANVAS_MOUSE_MOVE:"_canvasMousemove",CANVAS_MOUSE_OVER:"_canvasMouseOver",CANVAS_MOUSE_OUT:"_canvasMouseOut",CANVAS_WHEEL:"_canvasWheel",CANVAS_SCROLL:"_canvasScroll",CANVAS_CLICK:"_canvasClick",CANVAS_DOUBLE_CLICK:"_canvasDoubleClick",CANVAS_RIGHT_CLICK:"_canvasRightClick",CANVAS_KEY_DOWN:"_canvasKeyDown",CANVAS_KEY_UP:"_canvasKeyUp",CANVAS_RESIZE:"_canvasResize",CANVAS_DRAG_START:"_canvasDragStart",CANVAS_DRAG_MOVE:"_canvasDragMove",CANVAS_DRAG_DONE:"_canvasDragDone",CANVAS_DEFAULT_CURSOR:"_canvasDefaultCursor",SHOW_CANVAS_LOADING:"_showCanvasLoading",DB_SAVE_OK:"_addDataToDBSuccess",DB_SAVE_FAILED:"_addDataToDBFailed",AFTER_RENDER:"_afterRender",CURRENT_CHANGED:"_currentChanged"},u={VIEWER_RESIZE:"_viewerResizeUI",VIEWER_CLICK:"_mouseClickUI",VIEWER_RIGHT_CLICK:"_viewerRightClickUI",VIEWER_MOVE:"_mouseMoveUI",SHOW_LATEST_PAGE:"_showLatestPage",UPDATE_PAGES_LAYOUT:"_updatePagesLayout",DOCUMENT_POINTER_MOVE:"_documentPointerMoveUI",DOCUMENT_POINTER_UP:"_documentPointerUpUI",DOCUMENT_KEY_DOWN:"_documentKeyDownUI",DOCUMENT_KEY_UP:"_documentKeyUpUI",DOCUMENT_CLICK:"_documentClickUI",SIDEBAR_CLICK:"_sideBarClickUI",SIDEBAR_STRETCH_START:"_sidebarStretchStartUI",FILE_LIST_CLICK:"_fileListClickUI",FILE_LIST_RIGHT_CLICK:"_fileListRightClickUI",FILE_KEY_UP:"_fileListKeyUpUI",ADD_NEW_FOLDER:"_addNewFolderUI",FILE_REFRESH:"_directoryRefreshUI",FILE_SELECTED:"_fileSelectedUI",TAG_LIST_CLICK:"_tagListClickUI",TAG_LIST_RIGHT_CLICK:"tagListRightClickUI",TAG_KEY_UP:"_tagKeyUpUI",ADD_NEW_TAG:"_addNewTagUI",TAG_REFRESH:"_tagRefreshUI",TAG_SELECTED:"_tagSelectedUI",OPEN_DEFAULT_TAG:"_openDefaultTagUI",IMAGE_SELECTED:"_imageSelectedUI",THUMBNAIL_CHANGED:"_thumbnailChangedUI",UPDATE_THB_ITEM:"_updateThbItem",UPDATE_THUMBNAIL_PROP:"_updateThumbnailPropUI",SCROLL_TO:"_scrollToUI",SET_VIEW_MODE:"_setViewModeUI",MERGE_DISPLAYED_UIDS:"_mergeDisplayedUidsUi",PAGER_BLUR:"_pagerBlurUI",PAGER_CHANGED:"_pagerChangedUI",SET_SCROLLER_SIZE:"_setScrollerSizeUI",CHANGE_CANVAS_CURSOR:"_changeCanvasCursorUI",TAB_CHANGED:"_tabChangedUI",TAB_LIST_CLICK:"_tabListClickUI",CLOSE_SAVE_SETTING_BOX:"_closeSaveSettingBoxUI",CUSTOM_BUTTON_CLICK:"_customButtonClickUI"},f={UPDATE_FOR_VIEWER:"_updateForViewer",LOAD_TO_VIEWER:"_loadToViewer",OPEN_TO_VIEWER:"_openToViewer",LOAD_PAGE:"_loadPage",LOAD_PAGE_OK:"_loadPageOk",SET_CURRENT_INDEX:"_setCurrentIndex",REMOVE_VIEWER_UID:"_removeViewerUid",GOTO_PAGE:"_gotoPage",CHANGE_PAGE:"_changePage",REORDER_PAGE:"_reorderPage",REMOVE_PAGE:"_removePage",OVERLAY_RECTANGLE:"_overlayRectangle",EDIT:"_editPage",UPDATE_THUMBNAIL_PAGE:"_updateThumbnailPage",REMOVE_FROM_TAG:"_removeFromTag",LOAD_TAG:"_loadToTag",OPEN_TAG:"_openTag",REMOVE_PAGE_TAG:"_removePageTag",ADD_PAGE_TAG:"_addPageTag",EMPTY_TAG:"_emptyTag",RENAME_TAG:"_renameTag",TAG_CHANGED:"_tagChanged",APPEND_SYNC:"_appendSync",UPDATE_SYNC:"_updateSync",REMOVE_FROM_FILE:"_removeFromFile",LOAD_FILE:"_loadToFile",APPEND_TO_OPEN_TAG:"_appendToOpenTag",APPEND_TO_OPEN_ALL:"_appendToOpenAll",REMOVE_FROM_ALL:"_removeFromAll",REMOVE_FILE:"_removeFile"},a={OK:{code:0,message:"ok."},PARAM_TYPE:{code:80001,message:"The parameter type is wrong."},PARAMETER_RANGE:{code:80002,message:"The parameter is out of range."},IMG_NOT_EXIST:{code:80003,message:"The image does not exist."},IMG_LOAD_FAILED:{code:80004,message:"The image load failed."},BACK_TO_TOP:{code:80005,message:"The current folder is root folder."},FILE_NOT_EXIST:{code:80006,message:"The file does not exist."},IMG_HAVE_EXIST:{code:80007,message:"The image has existed."},EMPTY_IN_ARRAY:{code:80008,message:"There is some empty element in array."},TAG_NOT_EXIST:{code:80009,message:"Tag does not exist."},TAG_HAVE_EXIST:{code:80010,message:"The tag already exists."},ELEMENT_NOT_EXIST:{code:80011,message:"Element does not exist."},PAGE_NOT_EXIST:{code:80012,message:"Page does not exist."},PARAMETER_INVALID:{code:80013,message:"The parameter is invalid."},URL_INVALID:{code:80014,message:"The url is invalid."},FOLDER_NOT_EXIST:{code:80015,message:"The folder does not exist."},COLOR_INVALID:{code:80016,message:"The color is invalid."},IMG_STORAGE_FAILED:{code:80017,message:"Failed to save image to database."},IMG_REMOVE_FAILED:{code:80018,message:"Failed to remove image from database by uid."},PATH_ERROR:{code:80019,message:"The path of file or folder does not exist."},BROWSER_NOT_SUPPORT:{code:80020,message:"Your browser does not support full screen."},SIZE_INVALID:{code:80021,message:"The size is invalid."},OPERATION_MODE_ERROR:{code:80022,message:"The operation mode is error."},BORDER_INVALID:{code:80023,message:"The border is invalid."},CAMERA_CLASS_REQUIRE:{code:80025,message:"The camera class is required."},VIEW_UI_REQUIRE:{code:80026,message:"The constructor of view ui is required."},WEBCAM_LICENSE_INVALID:{code:80027,message:"The license of webcam is invalid."},CAMERA_EXIST:{code:80028,message:"The video is shown."},CAMERA_CLASS_INVALID:{code:80029,message:"The camera class is invalid."},META_DATA_NOT_EXIST:{code:80030,message:"The metadata is not exist."},CAMERA_NOT_EXIST:{code:80031,message:"The video is not shown."},FILE_EXIST:{code:80032,message:"The file already exists."}}},function(e,t,n){function r(ie){return Array.isArray?Array.isArray(ie):"[object Array]"===Object.prototype.toString.call(ie)}function h(ie){if(Array.isArray(ie)){for(var V=0;V<ie.length;V++)for(var J=V+1;J<ie.length;J++)ie[V]===ie[J]&&(ie.splice(J,1),J--);return ie}}function d(ie){return"[object Object]"===Object.prototype.toString.call(ie)}function s(ie){return"function"==typeof ie}function i(ie){return"string"==typeof ie}function u(ie){var V=String(ie);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(V)}function f(ie){return"number"==typeof ie&&!isNaN(ie)}function a(ie){return"[object Boolean]"===Object.prototype.toString.call(ie)}function o(ie){var V=document.createElement("span");return V.style.background=ie,!!V.style.background}function c(ie){var V=document.createElement("span");return V.style.border=ie,!(!V.style.border&&""!==ie)}function l(){return"ontouchstart"in document.documentElement}function m(){return void 0!==document.documentMode}function I(ie){return ie instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(ie)}function p(ie,V){if(i(V))ie.style.cssText=V;else for(var J in V)ie.style[J]=V[J]}function g(ie,V,J,te){if(ie)return ie.addEventListener(V,J,te),function(){ie.removeEventListener(V,J)}}function C(ie,V){for(var J in ie)void 0===V[J]?V[J]=ie[J]:d(ie[J])&&d(V[J])?C(ie[J],V[J]):V[J]=ie[J]}function _(ie,V){for(var J in ie){var te=ie[J],oe=V[J];void 0===oe?V[J]=ie[J]:a(te)&&d(oe)?oe.visibility=te:d(te)&&d(oe)?_(ie[J],V[J]):V[J]=ie[J]}}function v(ie,V){var J=this,te=0,oe=null;return function(){var Ee=+new Date;Ee-te<V?(clearTimeout(oe),oe=setTimeout(function(){te=Ee,ie.apply(J)},V)):(te=Ee,ie.apply(J))}}function T(ie){ie&&ie.stopPropagation?ie.stopPropagation():ie&&(ie.cancelBubble=!0)}function D(ie){ie.preventDefault?ie.preventDefault():ie.returnValue=!1}function P(ie){return""===ie||void 0===ie?null:document.getElementById(ie)}function E(){var ie=window.document;return ie.fullscreenElement||ie.msFullscreenElement||ie.mozFullScreenElement||ie.webkitFullscreenElement||!1}function M(ie){return ie.requestFullscreen?(ie.requestFullscreen(),!0):ie.mozRequestFullScreen?(ie.mozRequestFullScreen(),!0):ie.msRequestFullscreen?(ie.msRequestFullscreen(),!0):ie.oRequestFullscreen?(ie.oRequestFullscreen(),!0):ie.webkitRequestFullscreen?(ie.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)}function O(){var ie=window.document;return ie.exitFullScreen?(ie.exitFullScreen(),!0):ie.mozCancelFullScreen?(ie.mozCancelFullScreen(),!0):ie.webkitExitFullscreen?(ie.webkitExitFullscreen(),!0):ie.msExitFullscreen?(ie.msExitFullscreen(),!0):void 0}function R(ie){for(var V=ie.parentNode.children,J=0;J<V.length;J++)if(V[J]===ie)return J}function F(ie,V){for(var J=ie.parentNode,te=J.children,oe=0,Ee=0;Ee<te.length;Ee++){var ge=te[Ee];if(s(V)){if(!V(ge,J))continue;if(ge===ie)return oe;oe++}else if(ge===ie)return Ee}return-1}function B(ie,V){var J=V.parentNode;J.lastChild==V?J.appendChild(ie):b(ie,V.nextSibling,J)}function b(ie,V,J){void 0===V?J.appendChild(ie):J.insertBefore(ie,V)}function A(ie){var V=Math.random().toString(35).substring(2);return V.length<11&&(V+=Math.random().toString(35).substring(2)),ie=Math.max(Math.min(Math.round(ie),11),8),V.substring(0,ie)}function N(ie){var V;if(r(ie))V=[];else{if(!d(ie))return ie;V={}}for(var J in ie){var te=ie[J];V[J]=r(ie)||d(ie)?N(te):te}return V}function Y(ie){var V=window.requestAnimationFrame||window.webkitRequestAnimationFrame,J=!!V;if(V&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(V.toString())&&(J=!1),J)return V(ie);var k,te={},oe=1,Ee=null,ge=+new Date;return k=oe++,te[k]=ie,null===Ee&&(Ee=setInterval(function(){var U=+new Date,H=te;for(var ee in te={},H)Object.prototype.hasOwnProperty.call(H,ee)&&(H[ee](U),ge=U);U-ge>2500&&(clearInterval(Ee),Ee=null)},1e3/60)),k}function ne(){var ie=window;return ie?ie.devicePixelRatio?ie.devicePixelRatio:ie.screen.deviceXDPI&&ie.screen.logicalXDPI?ie.screen.deviceXDPI/ie.screen.logicalXDPI:1:1}function Ie(ie){var V=new Date,J={"M+":V.getMonth()+1,"d+":V.getDate(),"h+":V.getHours(),"m+":V.getMinutes(),"s+":V.getSeconds(),"q+":Math.floor((V.getMonth()+3)/3),S:V.getMilliseconds()};for(var te in/(y+)/.test(ie)&&(ie=ie.replace(RegExp.$1,(V.getFullYear()+"").substr(4-RegExp.$1.length))),J)new RegExp("("+te+")").test(ie)&&(ie=ie.replace(RegExp.$1,1==RegExp.$1.length?J[te]:("00"+J[te]).substr((""+J[te]).length)));return ie}function _e(ie,V,J,te,oe){var Ee=ie+J/2,ge=V+te/2,Re=ce(ie,V,Ee,ge,oe),G=ce(ie+J,V,Ee,ge,oe),k=ce(ie+J,V+te,Ee,ge,oe),U=ce(ie,V+te,Ee,ge,oe),H=[G.x,Re.x,U.x,k.x].sort(function(ye,Z){return ye-Z}),ee=[G.y,Re.y,U.y,k.y].sort(function(ye,Z){return ye-Z});return{x:H[0],y:ee[0],width:H[3]-H[0],height:ee[3]-ee[0]}}function ce(ie,V,J,te,oe){return oe=oe/180*Math.PI,{x:(ie-J)*Math.cos(oe)-(V-te)*Math.sin(oe)+J,y:(ie-J)*Math.sin(oe)+(V-te)*Math.cos(oe)+te}}n.d(t,"m",function(){return r}),n.d(t,"J",function(){return h}),n.d(t,"w",function(){return d}),n.d(t,"s",function(){return s}),n.d(t,"y",function(){return i}),n.d(t,"x",function(){return u}),n.d(t,"v",function(){return f}),n.d(t,"n",function(){return a}),n.d(t,"p",function(){return o}),n.d(t,"o",function(){return c}),n.d(t,"u",function(){return l}),n.d(t,"t",function(){return m}),n.d(t,"q",function(){return I}),n.d(t,"F",function(){return p}),n.d(t,"c",function(){return g}),n.d(t,"A",function(){return C}),n.d(t,"B",function(){return _}),n.d(t,"H",function(){return v}),n.d(t,"G",function(){return T}),n.d(t,"C",function(){return D}),n.d(t,"j",function(){return P}),n.d(t,"r",function(){return E}),n.d(t,"z",function(){return M}),n.d(t,"f",function(){return O}),n.d(t,"h",function(){return R}),n.d(t,"i",function(){return F}),n.d(t,"k",function(){return B}),n.d(t,"l",function(){return b}),n.d(t,"I",function(){return A}),n.d(t,"d",function(){return N}),n.d(t,"D",function(){return Y}),n.d(t,"e",function(){return ne}),n.d(t,"g",function(){return Ie}),n.d(t,"E",function(){return _e}),n.d(t,"b",function(){return q}),n.d(t,"a",function(){return he});var q={log:function(ie){window.Dynamsoft&&window.Dynamsoft.Lib.debug&&window.Dynamsoft.Lib.log(ie)}},he={windowURL:window.URL||window.webkitURL,createURL:function(ie){return i(ie)?ie:he.createURLWithType(ie).data},createURLWithType:function(ie){if(i(ie)||void 0===ie)return{type:"string",data:ie};if(ie instanceof Blob)return{type:"object",data:he.createObjectURL(ie)};if(ie.imageData&&ie.imageData instanceof Blob)return{type:"object",data:he.createObjectURL(ie.imageData)};if(ie.imageData){var V=Object.prototype.toString.call(ie.imageData);if(/\[object \w+Array\]/.test(V))return{type:"object",data:he.createObjectURL(new Blob([ie.imageData]))}}else if(V=Object.prototype.toString.call(ie),/\[object \w+Array\]/.test(V))return{type:"object",data:he.createObjectURL(new Blob([ie]))};return/data:image\/\w+;base64/.test(ie)?{type:"string",data:ie}:{type:"object",data:ie}},createObjectURL:function(ie){if(!ie)return"";var V=he.windowURL.createObjectURL(ie);return q.log("createObjectURL:"+V),V},revokeObjectURL:function(ie){q.log("revokeObjectURL:"+ie),i(ie)&&0==ie.indexOf("blob:http")&&he.windowURL.revokeObjectURL(ie)}}},function(e,t,n){n.d(t,"a",function(){return d}),n.d(t,"b",function(){return s});var r=n(1),h=function(){for(var i=0,u=0,f=arguments.length;u<f;u++)i+=arguments[u].length;var a=Array(i),o=0;for(u=0;u<f;u++)for(var c=arguments[u],l=0,m=c.length;l<m;l++,o++)a[o]=c[l];return a},d=function(){function i(u){this._evtIds=[],this._oPub=null,this._bDisposePub=!1,u?this._oPub=u:(this._oPub=new s,this._bDisposePub=!0)}return i.prototype.getPublishSubscribe=function(){return this._oPub},i.prototype._on=function(u,f){var a=this._oPub.on(u,f);this.push(u,a)},i.prototype._emit=function(u){for(var f,a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];null===(f=this._oPub)||void 0===f||f.emit.apply(f,h([u],a))},i.prototype._off=function(u,f){var a;null===(a=this._oPub)||void 0===a||a.off(u,f)},i.prototype.push=function(u,f){this._evtIds.push({name:u,id:f})},i.prototype.dispose=function(){if(this._oPub){for(var u=this._evtIds.length,f=0;f<u;f++){var a=this._evtIds[f];this._oPub.offById(a.name,a.id)}this._bDisposePub&&this._oPub&&this._oPub.dispose()}this._oPub=null},i}(),s=function(){function i(){this._events={}}return i.prototype.on=function(u,f){this._events[u]||(this._events[u]=[]);var a=Object(r.I)(10);return this._events[u].push({fn:f,evtId:a}),a},i.prototype.emit=function(u){for(var f,a,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var l=this._events[u];if(!l||0===l.length)return!1;for(var m=l.length,I=0;I<m;I++)null===(a=l[I])||void 0===a||(f=a.fn).call.apply(f,h([null],o))},i.prototype.emitEx=function(u){for(var f,a,o,c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var m=this._events[u];if(!m||0===m.length)return Promise.resolve(!0);var I=m.length,p=Promise.resolve(!0);if(1===m.length){var g=null===(a=m[0])||void 0===a?void 0:(f=a.fn).call.apply(f,h([null],c));return g instanceof Promise?g:p}for(var C=function(v){var T,D=null===(o=m[v])||void 0===o?void 0:(T=o.fn).call.apply(T,h([null],c));D instanceof Promise&&(p=p.then(function(){return D}))},_=0;_<I;_++)C(_);return p},i.prototype.off=function(u,f){var a=this._events[u];if(!a)return!1;if(f)for(var o=a.length,c=0;c<o;c++){var l=a[c];l&&l.fn===f&&a.splice(c,1),l=null}else a&&(a.length=0);a=null},i.prototype.offById=function(u,f){var a=this._events[u];if(!a)return!1;if(f)for(var o=a.length,c=0;c<o;c++){var l=a[c];if(l&&l.evtId===f){a.splice(c,1);break}l=null}else a&&(a.length=0);a=null},i.prototype.dispose=function(){for(var u=Object.keys(this._events),f=0,a=u.length;f<a;f++){var c=this._events[u[f]];c&&c.splice(0),c=null}this._events={}},i}()},function(e,t,n){var r=n(1),h=function(){function s(i){var u=this;this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.uid=Object(r.I)(11),Object.keys(i).forEach(function(f){u[f]=i[f]}),this._initBox()}return s.prototype.getRect=function(){if("free"===this.mode)return null;var i=this._getMaxPoint(),u=i.minX,f=i.maxX,a=i.minY,o=i.maxY;return{x:Math.floor(u),y:Math.floor(a),width:Math.floor(f-u),height:Math.floor(o-a)}},s.prototype._initBox=function(){this.midpoints=this._calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this._calcSlopeRatio(this.vertexes)},s.prototype._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},s.prototype.checkPointPosition=function(i){var u=this._getMaxPoint(),f=u.minX,a=u.maxX,o=u.minY,c=u.maxY,l=this.probePoints[2*i],m=this.probePoints[2*i+1];return i<4?l===a&&m===c?"se":l===a&&m===o?"ne":l===f&&m===o?"nw":l===f&&m===c?"sw":null:l===a?"e":m===c?"s":l===f?"w":m===o?"n":null},s.prototype.onStartHandler=function(i,u,f){var a=this.isBoxSelected(i,u);if(void 0!==f&&(a=f),null!==a&&(this._startX=i,this._startY=u,this._lastX=i,this._lastY=u,-1===a?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=a,this.isMoveBox=!1),"free"===this.mode&&a>3)){var o=a-4;this.k1=this.slopeRatio[(o+1)%4],this.b1=this.probePoints[(2*o+3)%8]-this.k1*this.probePoints[(2*o+2)%8],this.k2=this.slopeRatio[(o+3)%4],this.b2=this.probePoints[(2*o+1)%8]-this.k2*this.probePoints[(2*o+0)%8]}},s.prototype.onMoveHandler=function(i,u,f){if(this.isPointSelected||this.isMoveBox){var a=this.probePoints.slice();if(this.isPointSelected){var o=this.activeProbePoint;void 0!==f&&(o=f),"normal"===this.mode?a=this._movePointNormal(a,o,i,u):(a=this._movePointFree(a,o,i,u),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)),this.probePoints=a.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var c=i-this._lastX,l=u-this._lastY;if(0===c&&0===l)return;a=this._moveBox(a,c,l),this.probePoints=a.slice()}var m=this._calcMidpoint(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(m),this.midpoints=m,this._lastX=i,this._lastY=u}},s.prototype.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var i=this._startX,u=this._startY;this._startX=0,this._startY=0;var f=this._lastX,a=this._lastY;if(this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var o=this._checkRectConvexity(this.probePoints);(i===f&&u===a||!o)&&(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=this._calcMidpoint(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=this._calcSlopeRatio(this.probePoints).slice(0,4)}},s.prototype._checkEdge=function(i,u){return i>=0&&i<=this.width&&u>=0&&u<this.height},s.prototype._movePointNormal=function(i,u,f,a){f=Math.max(0,Math.min(this.width,f)),a=Math.max(0,Math.min(this.height,a));var o=0,c=0;if(this.keepAspectRatio){var l=this._getMaxPoint(),m=l.minX,I=l.maxX,p=l.minY,g=l.maxY,C=this.checkPointPosition(u),_=(I-m)/(g-p);0===_||_===1/0||_===-1/0||isNaN(_)?_=this._lastWhr:this._lastWhr=_,o=0,c=0;var v="width";if(u<4){if(c=a-i[2*u+1],0==(o=f-i[2*u])||0===c)return i;v="width"}else{var T=u-4;if("e"===C?(u=(T+1)%4,v="width"):"s"===C?(u=T,v="height"):"w"===C?(u=T,v="width"):"n"===C&&(u=(T+1)%4,v="height"),c=a-i[2*T+1],0==(o=f-i[2*T])||0===c)return i}"height"===v?(o=c*_,"ne"!==C&&"sw"!==C&&"n"!==C&&"w"!==C||(o=-o)):(c=o/_,"ne"!==C&&"sw"!==C&&"n"!==C&&"w"!==C||(c=-c));var D=i[2*u]+o,P=i[2*u+1]+c;D<0?(o=0-i[2*u],c=0):D>this.width?(o=this.width-i[2*u],c=0):P<0?(c=0-i[2*u+1],o=0):P>this.height&&(c=this.height-i[2*u+1],o=0),i[2*u]+=o,i[2*u+1]+=c,E=(u+1)%4,M=(u+3)%4,u%2?(i[2*E]+=o,i[2*M+1]+=c):(i[2*E+1]+=c,i[2*M]+=o)}else if(u<4){if(c=a-i[2*u+1],0==(o=f-i[2*u])&&0===c)return i;i[2*u]=f,i[2*u+1]=a;var E=(u+1)%4,M=(u+3)%4;u%2?(i[2*E]=f,i[2*M+1]=a):(i[2*E+1]=a,i[2*M]=f)}else{var O=u-4,R=this.slopeRatio[O%4];0===R?(i[(2*O+3)%8]=a,i[(2*O+1)%8]=a):R!==1/0&&R!==-1/0||(i[(2*O+2)%8]=f,i[(2*O+0)%8]=f)}return i},s.prototype._movePointFree=function(i,u,f,a){f=Math.max(0,Math.min(this.width,f)),a=Math.max(0,Math.min(this.height,a));var o=i.slice();if(u<4){if(0==f-i[2*u]&&0==a-i[2*u+1])return i;i[2*u]=f,i[2*u+1]=a}else{var m=u-4,I=this.slopeRatio[m%4],p=a-I*f,g=-p/I,C=p,_=i[(2*m+9)%8]-I*i[(2*m+8)%8],v=-_/I,T=this,D=T.k1,P=T.b1,E=T.k2,M=T.b2;0===I?(i[(2*m+3)%8]=a,D!==1/0&&D!==-1/0&&(i[(2*m+2)%8]=(a-P)/D),i[(2*m+1)%8]=a,E!==1/0&&E!==-1/0&&(i[(2*m+0)%8]=(a-M)/E)):I===1/0||I===-1/0?(i[(2*m+2)%8]=f,i[(2*m+3)%8]=D*f+P,i[(2*m+0)%8]=f,i[(2*m+1)%8]=E*f+M):(0===D?i[(2*m+2)%8]+=g-v:D===1/0||D===-1/0?i[(2*m+3)%8]+=C-_:(i[(2*m+2)%8]=(P-p)/(I-D),i[(2*m+3)%8]=(I*P-D*p)/(I-D)),0===E?i[(2*m+0)%8]+=g-v:E===1/0||E===-1/0?i[(2*m+1)%8]+=C-_:(i[(2*m+0)%8]=(M-p)/(I-E),i[(2*m+1)%8]=(I*M-E*p)/(I-E)));for(var O=0;O<4;O++){var R=i[2*O],F=i[2*O+1];if(R<0||R>this.width||F<0||F>this.height)return o}}return i},s.prototype._moveBox=function(i,u,f){if("normal"===this.mode){var a=Math.min(i[0],i[2],i[4],i[6]),o=Math.max(i[0],i[2],i[4],i[6]),c=Math.min(i[1],i[3],i[5],i[7]),l=Math.max(i[1],i[3],i[5],i[7]);a+u<0&&(u=-a),o+u>this.width&&(u=this.width-o),c+f<0&&(f=-c),l+f>this.height&&(f=this.height-l);for(var m=0;m<4;m++)i[2*m]+=u,i[2*m+1]+=f}return i},s.prototype._isPointOnBox=function(i,u){if("normal"===this.mode){var f=this._getMaxPoint();return i>=f.minX&&i<=f.maxX&&u>=f.minY&&u<=f.maxY}return!1},s.prototype.isBoxSelected=function(i,u){var f=this._isPointOnBox(i,u),a=this.isCtrlPointSelected(i,u);return null!==a?a:f?-1:null},s.prototype.isCtrlPointSelected=function(i,u){var f=this.sensorRadius/this.zoom,a=this._getMaxPoint(),l=a.minY,m=a.maxY,I=Math.min(Math.max(f,.1*(a.maxX-a.minX)),3*f)*this.dpr,p=Math.min(Math.max(f,.1*(m-l)),3*f)*this.dpr,g=8;"free"===this.mode&&(g=8);for(var C=0;C<g;C++){var _=this.probePoints[2*C],v=this.probePoints[2*C+1];if(i<=_+I&&i>=_-I&&u<=v+p&&u>=v-p&&i>=0&&i<=this.width&&u>=0&&u<=this.height)return C}return null},s.prototype._checkRectConvexity=function(i){var u=(i[6]-i[0])*(i[3]-i[1])-(i[7]-i[1])*(i[2]-i[0]),f=(i[0]-i[2])*(i[5]-i[3])-(i[1]-i[3])*(i[4]-i[2]),a=(i[2]-i[4])*(i[7]-i[5])-(i[3]-i[5])*(i[6]-i[4]),o=(i[4]-i[6])*(i[1]-i[7])-(i[5]-i[7])*(i[0]-i[6]);if(u*f*a*o<0)return!1;var c=i.slice().concat(i.slice(0,2));if(this.slopeRatio.length)for(var l=0;l<2;l++)if(this.slopeRatio[l]!==this.slopeRatio[l+2]&&this._calcIntersection(c.slice(2*l,2*l+2),c.slice(2*l+2,2*l+4),c.slice(2*l+4,2*l+6),c.slice(2*l+6,2*l+8)))return!1;return u*f*a*o>0},s.prototype._calcMidpoint=function(i){for(var u=i.slice(0,8).concat(i[0],i[1]),f=[],a=0;a<4;a++)f.push((u[2*a]+u[2*a+2])/2,(u[2*a+1]+u[2*a+3])/2);return f},s.prototype._calcSlopeRatio=function(i){for(var u=[],a=i.slice(0,8).concat(i[0],i[1]),o=0;o<4;o++)u.push(a[2*o+3]-a[2*o+1]==0&&a[2*o+2]-a[2*o]==0?0:(a[2*o+3]-a[2*o+1])/(a[2*o+2]-a[2*o]));return u},s.prototype._calcIntersection=function(i,u,f,a){if(this._isRectCross(i,u,f,a)&&this._isLineSegmentCross(i,u,f,a)){var c=void 0,l=void 0;if(l=(i[1]-f[1])*(u[0]-i[0])*(a[0]-f[0])+f[0]*(a[1]-f[1])*(u[0]-i[0])-i[0]*(u[1]-i[1])*(a[0]-f[0]),0==(c=(a[0]-f[0])*(i[1]-u[1])-(u[0]-i[0])*(f[1]-a[1]))||0===l){var m=this._getLine(i,u),I=this._getLine(f,a),p=m[0],g=m[1],C=I[0],_=I[1];if(g[0]===C[0]&&g[1]===C[1])return g;if(p[0]===_[0]&&p[1]===_[1])return p;if(this._isOnLine(g,I)&&this._isOnLine(C,m))return[C,g];if(this._isOnLine(p,I)&&this._isOnLine(_,m))return[p,_];if(this._isOnLine(p,I)&&this._isOnLine(g,I))return[p,g];if(this._isOnLine(C,I)&&this._isOnLine(_,I))return[C,_]}return[l/c,(l=u[1]*(i[0]-u[0])*(a[1]-f[1])+(a[0]-u[0])*(a[1]-f[1])*(i[1]-u[1])-a[1]*(f[0]-a[0])*(u[1]-i[1]))/(c=(i[0]-u[0])*(a[1]-f[1])-(u[1]-i[1])*(f[0]-a[0]))]}return!1},s.prototype._getLine=function(i,u){return i[0]===u[0]?i[1]<u[1]?[i,u]:[u,i]:i[0]<u[0]?[i,u]:[u,i]},s.prototype._isOnLine=function(i,u){return u[0][0]===u[1][0]?i[1]>=u[0][1]&&i[1]<=u[1][1]:i[0]>=u[0][0]&&i[0]<=u[1][0]},s.prototype._isRectCross=function(i,u,f,a){var o=Math.min,c=Math.max;return o(i[0],u[0])<=c(f[0],a[0])&&o(f[0],a[0])<=c(i[0],u[0])&&o(i[1],u[1])<=c(f[1],a[1])&&o(f[1],a[1])<=c(i[1],u[1])},s.prototype._isLineSegmentCross=function(i,u,f,a){var o,c;return!(((o=i[0]*(f[1]-u[1])+u[0]*(i[1]-f[1])+f[0]*(u[1]-i[1]))^(c=i[0]*(a[1]-u[1])+u[0]*(i[1]-a[1])+a[0]*(u[1]-i[1])))>=0&&0!==o&&0!==c||((o=f[0]*(i[1]-a[1])+a[0]*(f[1]-i[1])+i[0]*(a[1]-f[1]))^(c=f[0]*(u[1]-a[1])+a[0]*(f[1]-u[1])+u[0]*(a[1]-f[1])))>=0&&0!==o&&0!==c)},s}();n.d(t,"a",function(){return d});var d=function(){function s(i,u){this._activeBoxId=null,this._startX=null,this._startY=null,this._addNewFlag=null,this._drawingFlag=!1,this.cropBoxes=[],this.width=0,this.height=0,this.zoom=1,this.aspectRatio=0,this.keepAspectRatio=!1,this.mouseDown=!1,this.unselectedCallback=null,this.selectedCallback=null,this.width=i,this.height=u}return s.prototype.updateDpr=function(i){this.cropBoxes.forEach(function(u){u.dpr=i})},s.prototype.setKeepAspectRatio=function(i){this.keepAspectRatio=i,this._drawingFlag||this.cropBoxes.forEach(function(u){u.keepAspectRatio=i})},s.prototype.setAspectRatio=function(i){this.aspectRatio=i},s.prototype.setZoom=function(i){this.zoom=i,this.cropBoxes.forEach(function(u){u.zoom=i})},s.prototype.setPageSize=function(i,u){this.width=i,this.height=u},s.prototype.getRectArr=function(){var i=[];return this.cropBoxes.forEach(function(u,f){var a=Object.assign({index:f},u.getRect());i.push(a)}),i},s.prototype.clear=function(){var i;this.cropBoxes.length>0&&(null===(i=this.unselectedCallback)||void 0===i||i.call(this)),this.cropBoxes=[]},s.prototype.addFreeBox=function(i){var u=Object(r.e)(),f=new h({vertexes:i.slice(),width:this.width,height:this.height,mode:"free",dpr:u});return this.cropBoxes.push(f),f},s.prototype.addBox=function(i,u){var f=Object(r.e)(),a=new h({vertexes:i.slice(),width:this.width,height:this.height,type:u,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom,dpr:f});return this.cropBoxes.push(a),a},s.prototype.removeBox=function(i){return void 0===i&&this.clear(),!(i<0||i>=this.cropBoxes.length||(this.cropBoxes.splice(i,1),0))},s.prototype.getBoxByUid=function(i){for(var u=this.cropBoxes.length,f=0;f<u;f++)if(this.cropBoxes[f].uid===i)return this.cropBoxes[f];return null},s.prototype.onStartHandler=function(i,u,f){this._startX=i,this._startY=u,this.mouseDown=!0;var a=this.checkSelect(i,u);if(null===a)return f||this.clear(),void(this._activeBoxId=null);this._activeBoxId=this.cropBoxes[a].uid,this.getBoxByUid(this._activeBoxId).onStartHandler(i,u)},s.prototype.onMoveHandler=function(i,u,f){if(this.mouseDown){var a=null,o=i-this._startX,c=u-this._startY,l=null,m=2/this.zoom;!this._activeBoxId&&i-this._startX<-m&&u-this._startY<-m?(l=0,this.aspectRatio>0&&(c=o/this.aspectRatio)):!this._activeBoxId&&i-this._startX>m&&u-this._startY<-m?(l=1,this.aspectRatio>0&&(c=-o/this.aspectRatio)):!this._activeBoxId&&i-this._startX>m&&u-this._startY>m?(l=2,this.aspectRatio>0&&(c=o/this.aspectRatio)):!this._activeBoxId&&i-this._startX<-m&&u-this._startY>m&&(l=3,this.aspectRatio>0&&(c=-o/this.aspectRatio));var I=[i,this._startY+c,this._startX,this._startY+c,this._startX,this._startY,i,this._startY],p=[this._startX,this._startY,this._startX,this._startY+c,i,this._startY+c,i,this._startY];if(null!==l){for(var g=[],C=0;C<4;C++)l%2?(g.push(p[2*(l+C)%8]),g.push(p[(2*(l+C)+1)%8])):(g.push(I[2*(l+C)%8]),g.push(I[(2*(l+C)+1)%8]));return(a=this.addBox(g,["topLeft","topRight","bottomRight","bottomLeft"][l])).keepAspectRatio=this.aspectRatio>0,this._drawingFlag=!0,this._addNewFlag=this.keepAspectRatio,this._activeBoxId=a.uid,a.onStartHandler(this._startX,this._startY,l),a.onMoveHandler(i,u,l),void(l=null)}this._activeBoxId&&(a=this.getBoxByUid(this._activeBoxId)),a&&a.onMoveHandler(i,u)}},s.prototype.onEndHandler=function(){var i;if(this.mouseDown&&(this.mouseDown=!1,this._drawingFlag=!1,this._activeBoxId)){var u=this.getBoxByUid(this._activeBoxId);null!==this._addNewFlag&&(u.keepAspectRatio=this._addNewFlag,this._addNewFlag=null),u.onEndHandler(),this.cropBoxes.length>0&&(null===(i=this.selectedCallback)||void 0===i||i.call(this,this.getRectArr())),this._activeBoxId=null}},s.prototype.checkSelect=function(i,u){var f=this.cropBoxes.length;if(0===f)return null;for(var a=f-1;a>=0;a--)if(null!==this.cropBoxes[a].isBoxSelected(i,u))return a;return null},s.prototype.checkSelectForCursor=function(i,u){var f=this.cropBoxes.length;if(0===f)return null;for(var a=f-1;a>=0;a--){var o=this.cropBoxes[a],c=o.isBoxSelected(i,u);if(null!==c){var l="move";return-1!==c&&(l=o.checkPointPosition(c)),{part:c,type:o.type,position:l}}}return null},s.prototype.dispose=function(){this.unselectedCallback=null,this.selectedCallback=null},s}()},function(e,t){(function(n){if("object"==typeof t&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;typeof window<"u"?r=window:typeof global<"u"?r=global:typeof Rt<"u"&&(r=Rt),r.Promise=n()}})(function(){return function d(s,i,u){function f(c,l){if(!i[c]){if(!s[c]){var m="function"==typeof _dereq_&&_dereq_;if(!l&&m)return m(c,!0);if(a)return a(c,!0);var I=new Error("Cannot find module '"+c+"'");throw I.code="MODULE_NOT_FOUND",I}var p=i[c]={exports:{}};s[c][0].call(p.exports,function(g){return f(s[c][1][g]||g)},p,p.exports,d,s,i,u)}return i[c].exports}for(var a="function"==typeof _dereq_&&_dereq_,o=0;o<u.length;o++)f(u[o]);return f}({1:[function(d,s,i){s.exports=function(u){var f=u._SomePromiseArray;function a(o){var c=new f(o),l=c.promise();return c.setHowMany(1),c.setUnwrap(),c.init(),l}u.any=function(o){return a(o)},u.prototype.any=function(){return a(this)}}},{}],2:[function(d,s,i){var u;try{throw new Error}catch(m){u=m}var f=d("./schedule"),a=d("./queue");function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1;var m=this;this.drainQueues=function(){m._drainQueues()},this._schedule=f}function c(m){for(;m.length()>0;)l(m)}function l(m){var I=m.shift();if("function"!=typeof I)I._settlePromises();else{var p=m.shift(),g=m.shift();I.call(p,g)}}o.prototype.setScheduler=function(m){var I=this._schedule;return this._schedule=m,this._customScheduler=!0,I},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(m,I){I?(process.stderr.write("Fatal "+(m instanceof Error?m.stack:m)+"\n"),process.exit(2)):this.throwLater(m)},o.prototype.throwLater=function(m,I){if(1===arguments.length&&(I=m,m=function(){throw I}),typeof setTimeout<"u")setTimeout(function(){m(I)},0);else try{this._schedule(function(){m(I)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},o.prototype.invokeLater=function(m,I,p){this._lateQueue.push(m,I,p),this._queueTick()},o.prototype.invoke=function(m,I,p){this._normalQueue.push(m,I,p),this._queueTick()},o.prototype.settlePromises=function(m){this._normalQueue._pushOne(m),this._queueTick()},o.prototype._drainQueues=function(){c(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,c(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},s.exports=o,s.exports.firstLineError=u},{"./queue":26,"./schedule":29}],3:[function(d,s,i){s.exports=function(u,f,a,o){var c=!1,l=function(g,C){this._reject(C)},m=function(g,C){C.promiseRejectionQueued=!0,C.bindingPromise._then(l,l,null,this,g)},I=function(g,C){0==(50397184&this._bitField)&&this._resolveCallback(C.target)},p=function(g,C){C.promiseRejectionQueued||this._reject(g)};u.prototype.bind=function(g){c||(c=!0,u.prototype._propagateFrom=o.propagateFromFunction(),u.prototype._boundValue=o.boundValueFunction());var C=a(g),_=new u(f);_._propagateFrom(this,1);var v=this._target();if(_._setBoundTo(C),C instanceof u){var T={promiseRejectionQueued:!1,promise:_,target:v,bindingPromise:C};v._then(f,m,void 0,_,T),C._then(I,p,void 0,_,T),_._setOnCancel(C)}else _._resolveCallback(v);return _},u.prototype._setBoundTo=function(g){void 0!==g?(this._bitField=2097152|this._bitField,this._boundTo=g):this._bitField=-2097153&this._bitField},u.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},u.bind=function(g,C){return u.resolve(C).bind(g)}}},{}],4:[function(d,s,i){var u;typeof Promise<"u"&&(u=Promise);var f=d("./promise")();f.noConflict=function(){try{Promise===f&&(Promise=u)}catch{}return f},s.exports=f},{"./promise":22}],5:[function(d,s,i){var u=Object.create;if(u){var f=u(null),a=u(null);f[" size"]=a[" size"]=0}s.exports=function(o){var l=d("./util"),m=l.canEvaluate;function p(_){return function I(_,v){var T;if(null!=_&&(T=_[v]),"function"!=typeof T){var D="Object "+l.classString(_)+" has no method '"+l.toString(v)+"'";throw new o.TypeError(D)}return T}(_,this.pop()).apply(_,this)}function g(_){return _[this]}function C(_){var v=+this;return v<0&&(v=Math.max(0,v+_.length)),_[v]}o.prototype.call=function(_){var v=[].slice.call(arguments,1);return v.push(_),this._then(p,void 0,void 0,v,void 0)},o.prototype.get=function(_){var v;if("number"==typeof _)v=C;else if(m){var T=(void 0)(_);v=null!==T?T:g}else v=g;return this._then(v,void 0,void 0,_,void 0)}}},{"./util":36}],6:[function(d,s,i){s.exports=function(u,f,a,o){var c=d("./util"),l=c.tryCatch,m=c.errorObj,I=u._async;u.prototype.break=u.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var p=this,g=p;p._isCancellable();){if(!p._cancelBy(g)){g._isFollowing()?g._followee().cancel():g._cancelBranched();break}var C=p._cancellationParent;if(null==C||!C._isCancellable()){p._isFollowing()?p._followee().cancel():p._cancelBranched();break}p._isFollowing()&&p._followee().cancel(),p._setWillBeCancelled(),g=p,p=C}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(p){return p===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),I.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(p,g){if(c.isArray(p))for(var C=0;C<p.length;++C)this._doInvokeOnCancel(p[C],g);else if(void 0!==p)if("function"==typeof p){if(!g){var _=l(p).call(this._boundValue());_===m&&(this._attachExtraTrace(_.e),I.throwLater(_.e))}}else p._resultCancelled(this)},u.prototype._invokeOnCancel=function(){var p=this._onCancel();this._unsetOnCancel(),I.invoke(this._doInvokeOnCancel,this,p)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(d,s,i){s.exports=function(u){var f=d("./util"),a=d("./es5").keys,o=f.tryCatch,c=f.errorObj;return function(l,m,I){return function(p){var g=I._boundValue();e:for(var C=0;C<l.length;++C){var _=l[C];if(_===Error||null!=_&&_.prototype instanceof Error){if(p instanceof _)return o(m).call(g,p)}else if("function"==typeof _){var v=o(_).call(g,p);if(v===c)return v;if(v)return o(m).call(g,p)}else if(f.isObject(p)){for(var T=a(_),D=0;D<T.length;++D){var P=T[D];if(_[P]!=p[P])continue e}return o(m).call(g,p)}}return u}}}},{"./es5":13,"./util":36}],8:[function(d,s,i){s.exports=function(u){var f=!1,a=[];function o(){this._trace=new o.CapturedTrace(c())}function c(){var l=a.length-1;return l>=0?a[l]:void 0}return u.prototype._promiseCreated=function(){},u.prototype._pushContext=function(){},u.prototype._popContext=function(){return null},u._peekContext=u.prototype._peekContext=function(){},o.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,a.push(this._trace))},o.prototype._popContext=function(){if(void 0!==this._trace){var l=a.pop(),m=l._promiseCreated;return l._promiseCreated=null,m}return null},o.CapturedTrace=null,o.create=function(){if(f)return new o},o.deactivateLongStackTraces=function(){},o.activateLongStackTraces=function(){var l=u.prototype._pushContext,m=u.prototype._popContext,I=u._peekContext,p=u.prototype._peekContext,g=u.prototype._promiseCreated;o.deactivateLongStackTraces=function(){u.prototype._pushContext=l,u.prototype._popContext=m,u._peekContext=I,u.prototype._peekContext=p,u.prototype._promiseCreated=g,f=!1},f=!0,u.prototype._pushContext=o.prototype._pushContext,u.prototype._popContext=o.prototype._popContext,u._peekContext=u.prototype._peekContext=c,u.prototype._promiseCreated=function(){var C=this._peekContext();C&&null==C._promiseCreated&&(C._promiseCreated=this)}},o}},{}],9:[function(d,s,i){s.exports=function(u,f,a,o){var c,l,m,I,p=u._async,g=d("./errors").Warning,C=d("./util"),_=d("./es5"),v=C.canAttachTrace,T=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,D=/\((?:timers\.js):\d+:\d+\)/,P=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,E=null,M=null,O=!1,R=0!=C.env("BLUEBIRD_DEBUG"),F=!(0==C.env("BLUEBIRD_WARNINGS")||!R&&!C.env("BLUEBIRD_WARNINGS")),B=!(0==C.env("BLUEBIRD_LONG_STACK_TRACES")||!R&&!C.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=C.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(F||!!C.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){var me=[];function Me(){for(var ze=0;ze<me.length;++ze)me[ze]._notifyUnhandledRejection();Oe()}function Oe(){me.length=0}I=function(ze){me.push(ze),setTimeout(Me,1)},_.defineProperty(u,"_unhandledRejectionCheck",{value:Me}),_.defineProperty(u,"_unhandledRejectionClear",{value:Oe})})(),u.prototype.suppressUnhandledRejections=function(){var me=this._target();me._bitField=-1048577&me._bitField|524288},u.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),I(this))},u.prototype._notifyUnhandledRejectionIsHandled=function(){Z("rejectionHandled",c,void 0,this)},u.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},u.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},u.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var me=this._settledValue();this._setUnhandledRejectionIsNotified(),Z("unhandledRejection",l,me,this)}},u.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},u.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},u.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},u.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},u.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},u.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},u.prototype._warn=function(me,Me,Oe){return U(me,Me,Oe||this)},u.onPossiblyUnhandledRejection=function(me){var Me=u._getContext();l=C.contextBind(Me,me)},u.onUnhandledRejectionHandled=function(me){var Me=u._getContext();c=C.contextBind(Me,me)};var A=function(){};u.longStackTraces=function(){if(p.haveItemsQueued()&&!xe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!xe.longStackTraces&&se()){var me=u.prototype._captureStackTrace,Me=u.prototype._attachExtraTrace,Oe=u.prototype._dereferenceTrace;xe.longStackTraces=!0,A=function(){if(p.haveItemsQueued()&&!xe.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");u.prototype._captureStackTrace=me,u.prototype._attachExtraTrace=Me,u.prototype._dereferenceTrace=Oe,f.deactivateLongStackTraces(),xe.longStackTraces=!1},u.prototype._captureStackTrace=Re,u.prototype._attachExtraTrace=G,u.prototype._dereferenceTrace=k,f.activateLongStackTraces()}},u.hasLongStackTraces=function(){return xe.longStackTraces&&se()};var N={unhandledrejection:{before:function(){var me=C.global.onunhandledrejection;return C.global.onunhandledrejection=null,me},after:function(me){C.global.onunhandledrejection=me}},rejectionhandled:{before:function(){var me=C.global.onrejectionhandled;return C.global.onrejectionhandled=null,me},after:function(me){C.global.onrejectionhandled=me}}},Y=function(){var me=function(Oe,ze){if(!Oe)return!C.global.dispatchEvent(ze);var Ze;try{return Ze=Oe.before(),!C.global.dispatchEvent(ze)}finally{Oe.after(Ze)}};try{if("function"==typeof CustomEvent){var Me=new CustomEvent("CustomEvent");return C.global.dispatchEvent(Me),function(Oe,ze){Oe=Oe.toLowerCase();var Ze=new CustomEvent(Oe,{detail:ze,cancelable:!0});return _.defineProperty(Ze,"promise",{value:ze.promise}),_.defineProperty(Ze,"reason",{value:ze.reason}),me(N[Oe],Ze)}}return"function"==typeof Event?(Me=new Event("CustomEvent"),C.global.dispatchEvent(Me),function(Oe,ze){Oe=Oe.toLowerCase();var Ze=new Event(Oe,{cancelable:!0});return Ze.detail=ze,_.defineProperty(Ze,"promise",{value:ze.promise}),_.defineProperty(Ze,"reason",{value:ze.reason}),me(N[Oe],Ze)}):((Me=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),C.global.dispatchEvent(Me),function(Oe,ze){Oe=Oe.toLowerCase();var Ze=document.createEvent("CustomEvent");return Ze.initCustomEvent(Oe,!1,!0,ze),me(N[Oe],Ze)})}catch{}return function(){return!1}}(),ne=C.isNode?function(){return process.emit.apply(process,arguments)}:C.global?function(me){var Me="on"+me.toLowerCase(),Oe=C.global[Me];return!!Oe&&(Oe.apply(C.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function Ie(me,Me){return{promise:Me}}var _e={promiseCreated:Ie,promiseFulfilled:Ie,promiseRejected:Ie,promiseResolved:Ie,promiseCancelled:Ie,promiseChained:function(me,Me,Oe){return{promise:Me,child:Oe}},warning:function(me,Me){return{warning:Me}},unhandledRejection:function(me,Me,Oe){return{reason:Me,promise:Oe}},rejectionHandled:Ie},ce=function(me){var Me=!1;try{Me=ne.apply(null,arguments)}catch(ze){p.throwLater(ze),Me=!0}var Oe=!1;try{Oe=Y(me,_e[me].apply(null,arguments))}catch(ze){p.throwLater(ze),Oe=!0}return Oe||Me};function q(){return!1}function he(me,Me,Oe){var ze=this;try{me(Me,Oe,function(Ze){if("function"!=typeof Ze)throw new TypeError("onCancel must be a function, got: "+C.toString(Ze));ze._attachCancellationCallback(Ze)})}catch(Ze){return Ze}}function ie(me){if(!this._isCancellable())return this;var Me=this._onCancel();void 0!==Me?C.isArray(Me)?Me.push(me):this._setOnCancel([Me,me]):this._setOnCancel(me)}function V(){return this._onCancelField}function J(me){this._onCancelField=me}function te(){this._cancellationParent=void 0,this._onCancelField=void 0}function oe(me,Me){if(0!=(1&Me)){this._cancellationParent=me;var Oe=me._branchesRemainingToCancel;void 0===Oe&&(Oe=0),me._branchesRemainingToCancel=Oe+1}0!=(2&Me)&&me._isBound()&&this._setBoundTo(me._boundTo)}u.config=function(me){if("longStackTraces"in(me=Object(me))&&(me.longStackTraces?u.longStackTraces():!me.longStackTraces&&u.hasLongStackTraces()&&A()),"warnings"in me){var Me=me.warnings;xe.warnings=!!Me,b=xe.warnings,C.isObject(Me)&&"wForgottenReturn"in Me&&(b=!!Me.wForgottenReturn)}if("cancellation"in me&&me.cancellation&&!xe.cancellation){if(p.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");u.prototype._clearCancellationData=te,u.prototype._propagateFrom=oe,u.prototype._onCancel=V,u.prototype._setOnCancel=J,u.prototype._attachCancellationCallback=ie,u.prototype._execute=he,Ee=oe,xe.cancellation=!0}if("monitoring"in me&&(me.monitoring&&!xe.monitoring?(xe.monitoring=!0,u.prototype._fireEvent=ce):!me.monitoring&&xe.monitoring&&(xe.monitoring=!1,u.prototype._fireEvent=q)),"asyncHooks"in me&&C.nodeSupportsAsyncResource){var ze=!!me.asyncHooks;xe.asyncHooks!==ze&&(xe.asyncHooks=ze,ze?a():o())}return u},u.prototype._fireEvent=q,u.prototype._execute=function(me,Me,Oe){try{me(Me,Oe)}catch(ze){return ze}},u.prototype._onCancel=function(){},u.prototype._setOnCancel=function(me){},u.prototype._attachCancellationCallback=function(me){},u.prototype._captureStackTrace=function(){},u.prototype._attachExtraTrace=function(){},u.prototype._dereferenceTrace=function(){},u.prototype._clearCancellationData=function(){},u.prototype._propagateFrom=function(me,Me){};var Ee=function(me,Me){0!=(2&Me)&&me._isBound()&&this._setBoundTo(me._boundTo)};function ge(){var me=this._boundTo;return void 0!==me&&me instanceof u?me.isFulfilled()?me.value():void 0:me}function Re(){this._trace=new Te(this._peekContext())}function G(me,Me){if(v(me)){var Oe=this._trace;if(void 0!==Oe&&Me&&(Oe=Oe._parent),void 0!==Oe)Oe.attachExtraTrace(me);else if(!me.__stackCleaned__){var ze=ee(me);C.notEnumerableProp(me,"stack",ze.message+"\n"+ze.stack.join("\n")),C.notEnumerableProp(me,"__stackCleaned__",!0)}}}function k(){this._trace=void 0}function U(me,Me,Oe){if(xe.warnings){var ze,Ze=new g(me);if(Me)Oe._attachExtraTrace(Ze);else if(xe.longStackTraces&&(ze=u._peekContext()))ze.attachExtraTrace(Ze);else{var ot=ee(Ze);Ze.stack=ot.message+"\n"+ot.stack.join("\n")}ce("warning",Ze)||ye(Ze,"",!0)}}function H(me){for(var Me=[],Oe=0;Oe<me.length;++Oe){var ze=me[Oe],Ze="    (No stack trace)"===ze||E.test(ze),ot=Ze&&le(ze);Ze&&!ot&&(O&&" "!==ze.charAt(0)&&(ze="    "+ze),Me.push(ze))}return Me}function ee(me){var Me=me.stack,Oe=me.toString();return Me="string"==typeof Me&&Me.length>0?function(ze){for(var Ze=ze.stack.replace(/\s+$/g,"").split("\n"),ot=0;ot<Ze.length;++ot){var ve=Ze[ot];if("    (No stack trace)"===ve||E.test(ve))break}return ot>0&&"SyntaxError"!=ze.name&&(Ze=Ze.slice(ot)),Ze}(me):["    (No stack trace)"],{message:Oe,stack:"SyntaxError"==me.name?Me:H(Me)}}function ye(me,Me,Oe){var ze;typeof console<"u"&&(ze=C.isObject(me)?Me+M(me.stack,me):Me+String(me),"function"==typeof m&&m(ze,Oe))}function Z(me,Me,Oe,ze){var Ze=!1;try{"function"==typeof Me&&(Ze=!0,"rejectionHandled"===me?Me(ze):Me(Oe,ze))}catch(ot){p.throwLater(ot)}"unhandledRejection"===me?ce(me,Oe,ze)||Ze||ye(Oe,"Unhandled rejection "):ce(me,ze)}function Q(me){var Me,Oe;if("function"==typeof me)Me="[function "+(me.name||"anonymous")+"]";else{if(Me=me&&"function"==typeof me.toString?me.toString():C.toString(me),/\[object [a-zA-Z0-9$_]+\]/.test(Me))try{Me=JSON.stringify(me)}catch{}0===Me.length&&(Me="(empty array)")}return"(<"+((Oe=Me).length<41?Oe:Oe.substr(0,38)+"...")+">, no stack trace)"}function se(){return"function"==typeof Be}var le=function(){return!1},pe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Ce(me){var Me=me.match(pe);if(Me)return{fileName:Me[1],line:parseInt(Me[2],10)}}function Te(me){this._parent=me,this._promisesCreated=0;var Me=this._length=1+(void 0===me?0:me._length);Be(this,Te),Me>32&&this.uncycle()}C.inherits(Te,Error),f.CapturedTrace=Te,Te.prototype.uncycle=function(){var me=this._length;if(!(me<2)){for(var Me=[],Oe={},ze=0,Ze=this;void 0!==Ze;++ze)Me.push(Ze),Ze=Ze._parent;for(ze=(me=this._length=ze)-1;ze>=0;--ze){var ot=Me[ze].stack;void 0===Oe[ot]&&(Oe[ot]=ze)}for(ze=0;ze<me;++ze){var ve=Oe[Me[ze].stack];if(void 0!==ve&&ve!==ze){ve>0&&(Me[ve-1]._parent=void 0,Me[ve-1]._length=1),Me[ze]._parent=void 0,Me[ze]._length=1;var Fe=ze>0?Me[ze-1]:this;ve<me-1?(Fe._parent=Me[ve+1],Fe._parent.uncycle(),Fe._length=Fe._parent._length+1):(Fe._parent=void 0,Fe._length=1);for(var Ve=Fe._length+1,Ye=ze-2;Ye>=0;--Ye)Me[Ye]._length=Ve,Ve++;return}}}},Te.prototype.attachExtraTrace=function(me){if(!me.__stackCleaned__){this.uncycle();for(var Me=ee(me),Oe=Me.message,ze=[Me.stack],Ze=this;void 0!==Ze;)ze.push(H(Ze.stack.split("\n"))),Ze=Ze._parent;(function(ot){for(var ve=ot[0],Fe=1;Fe<ot.length;++Fe){for(var Ve=ot[Fe],Ye=ve.length-1,Ne=ve[Ye],Je=-1,we=Ve.length-1;we>=0;--we)if(Ve[we]===Ne){Je=we;break}for(we=Je;we>=0&&ve[Ye]===Ve[we];--we)ve.pop(),Ye--;ve=Ve}})(ze),function(ot){for(var ve=0;ve<ot.length;++ve)(0===ot[ve].length||ve+1<ot.length&&ot[ve][0]===ot[ve+1][0])&&(ot.splice(ve,1),ve--)}(ze),C.notEnumerableProp(me,"stack",function(ot,ve){for(var Fe=0;Fe<ve.length-1;++Fe)ve[Fe].push("From previous event:"),ve[Fe]=ve[Fe].join("\n");return Fe<ve.length&&(ve[Fe]=ve[Fe].join("\n")),ot+"\n"+ve.join("\n")}(Oe,ze)),C.notEnumerableProp(me,"__stackCleaned__",!0)}};var Be=function(){var me=/^\s*at\s*/,Me=function(ot,ve){return"string"==typeof ot?ot:void 0!==ve.name&&void 0!==ve.message?ve.toString():Q(ve)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,E=me,M=Me;var Oe=Error.captureStackTrace;return le=function(ot){return T.test(ot)},function(ot,ve){Error.stackTraceLimit+=6,Oe(ot,ve),Error.stackTraceLimit-=6}}var ze,Ze=new Error;if("string"==typeof Ze.stack&&Ze.stack.split("\n")[0].indexOf("stackDetection@")>=0)return E=/@/,M=Me,O=!0,function(ot){ot.stack=(new Error).stack};try{throw new Error}catch(ot){ze="stack"in ot}return!("stack"in Ze)&&ze&&"number"==typeof Error.stackTraceLimit?(E=me,M=Me,function(ot){Error.stackTraceLimit+=6;try{throw new Error}catch(ve){ot.stack=ve.stack}Error.stackTraceLimit-=6}):(M=function(ot,ve){return"string"==typeof ot?ot:"object"!=typeof ve&&"function"!=typeof ve||void 0===ve.name||void 0===ve.message?Q(ve):ve.toString()},null)}();typeof console<"u"&&typeof console.warn<"u"&&(m=function(me){},C.isNode&&process.stderr.isTTY?m=function(me,Me){}:C.isNode||"string"!=typeof(new Error).stack||(m=function(me,Me){}));var xe={warnings:F,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return B&&u.longStackTraces(),{asyncHooks:function(){return xe.asyncHooks},longStackTraces:function(){return xe.longStackTraces},warnings:function(){return xe.warnings},cancellation:function(){return xe.cancellation},monitoring:function(){return xe.monitoring},propagateFromFunction:function(){return Ee},boundValueFunction:function(){return ge},checkForgottenReturns:function(me,Me,Oe,ze,Ze){if(void 0===me&&null!==Me&&b){if(void 0!==Ze&&Ze._returnedNonUndefined()||0==(65535&ze._bitField))return;Oe&&(Oe+=" ");var ot="",ve="";if(Me._trace){for(var Fe=Me._trace.stack.split("\n"),Ve=H(Fe),Ye=Ve.length-1;Ye>=0;--Ye){var Ne=Ve[Ye];if(!D.test(Ne)){var Je=Ne.match(P);Je&&(ot="at "+Je[1]+":"+Je[2]+":"+Je[3]+" ");break}}if(Ve.length>0){var we=Ve[0];for(Ye=0;Ye<Fe.length;++Ye)if(Fe[Ye]===we){Ye>0&&(ve="\n"+Fe[Ye-1]);break}}}ze._warn("a promise was created in a "+Oe+"handler "+ot+"but was not returned from it, see http://goo.gl/rRqMUw"+ve,!0,Me)}},setBounds:function(me,Me){if(se()){for(var Oe,ze,Ze=(me.stack||"").split("\n"),ot=(Me.stack||"").split("\n"),ve=-1,Fe=-1,Ve=0;Ve<Ze.length;++Ve)if(Ye=Ce(Ze[Ve])){Oe=Ye.fileName,ve=Ye.line;break}for(Ve=0;Ve<ot.length;++Ve){var Ye;if(Ye=Ce(ot[Ve])){ze=Ye.fileName,Fe=Ye.line;break}}ve<0||Fe<0||!Oe||!ze||Oe!==ze||ve>=Fe||(le=function(Ne){if(T.test(Ne))return!0;var Je=Ce(Ne);return!!(Je&&Je.fileName===Oe&&ve<=Je.line&&Je.line<=Fe)})}},warn:U,deprecated:function(me,Me){var Oe=me+" is deprecated and will be removed in a future version.";return Me&&(Oe+=" Use "+Me+" instead."),U(Oe)},CapturedTrace:Te,fireDomEvent:Y,fireGlobalEvent:ne}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(d,s,i){s.exports=function(u){function f(){return this.value}function a(){throw this.reason}u.prototype.return=u.prototype.thenReturn=function(o){return o instanceof u&&o.suppressUnhandledRejections(),this._then(f,void 0,void 0,{value:o},void 0)},u.prototype.throw=u.prototype.thenThrow=function(o){return this._then(a,void 0,void 0,{reason:o},void 0)},u.prototype.catchThrow=function(o){if(arguments.length<=1)return this._then(void 0,a,void 0,{reason:o},void 0);var c=arguments[1],l=function(){throw c};return this.caught(o,l)},u.prototype.catchReturn=function(o){if(arguments.length<=1)return o instanceof u&&o.suppressUnhandledRejections(),this._then(void 0,f,void 0,{value:o},void 0);var c=arguments[1];c instanceof u&&c.suppressUnhandledRejections();var l=function(){return c};return this.caught(o,l)}}},{}],11:[function(d,s,i){s.exports=function(u,f){var a=u.reduce,o=u.all;function c(){return o(this)}u.prototype.each=function(l){return a(this,l,f,0)._then(c,void 0,void 0,this,void 0)},u.prototype.mapSeries=function(l){return a(this,l,f,f)},u.each=function(l,m){return a(l,m,f,0)._then(c,void 0,void 0,l,void 0)},u.mapSeries=function(l,m){return a(l,m,f,f)}}},{}],12:[function(d,s,i){var u,f,a=d("./es5"),o=a.freeze,c=d("./util"),l=c.inherits,m=c.notEnumerableProp;function I(M,O){function R(F){if(!(this instanceof R))return new R(F);m(this,"message","string"==typeof F?F:O),m(this,"name",M),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(R,Error),R}var p=I("Warning","warning"),g=I("CancellationError","cancellation error"),C=I("TimeoutError","timeout error"),_=I("AggregateError","aggregate error");try{u=TypeError,f=RangeError}catch{u=I("TypeError","type error"),f=I("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),T=0;T<v.length;++T)"function"==typeof Array.prototype[v[T]]&&(_.prototype[v[T]]=Array.prototype[v[T]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var D=0;function P(M){if(!(this instanceof P))return new P(M);m(this,"name","OperationalError"),m(this,"message",M),this.cause=M,this.isOperational=!0,M instanceof Error?(m(this,"message",M.message),m(this,"stack",M.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var M=Array(4*D+1).join(" "),O="\n"+M+"AggregateError of:\n";D++,M=Array(4*D+1).join(" ");for(var R=0;R<this.length;++R){for(var F=this[R]===this?"[Circular AggregateError]":this[R]+"",B=F.split("\n"),b=0;b<B.length;++b)B[b]=M+B[b];O+=(F=B.join("\n"))+"\n"}return D--,O},l(P,Error);var E=Error.__BluebirdErrorTypes__;E||(E=o({CancellationError:g,TimeoutError:C,OperationalError:P,RejectionError:P,AggregateError:_}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:E,writable:!1,enumerable:!1,configurable:!1})),s.exports={Error,TypeError:u,RangeError:f,CancellationError:E.CancellationError,OperationalError:E.OperationalError,TimeoutError:E.TimeoutError,AggregateError:E.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(d,s,i){var u=function(){return void 0===this}();if(u)s.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:u,propertyIsWritable:function(l,m){var I=Object.getOwnPropertyDescriptor(l,m);return!(I&&!I.writable&&!I.set)}};else{var f={}.hasOwnProperty,a={}.toString,o={}.constructor.prototype,c=function(l){var m=[];for(var I in l)f.call(l,I)&&m.push(I);return m};s.exports={isArray:function(l){try{return"[object Array]"===a.call(l)}catch{return!1}},keys:c,names:c,defineProperty:function(l,m,I){return l[m]=I.value,l},getDescriptor:function(l,m){return{value:l[m]}},freeze:function(l){return l},getPrototypeOf:function(l){try{return Object(l).constructor.prototype}catch{return o}},isES5:u,propertyIsWritable:function(){return!0}}}},{}],14:[function(d,s,i){s.exports=function(u,f){var a=u.map;u.prototype.filter=function(o,c){return a(this,o,c,f)},u.filter=function(o,c,l){return a(o,c,l,f)}}},{}],15:[function(d,s,i){s.exports=function(u,f,a){var o=d("./util"),c=u.CancellationError,l=o.errorObj,m=d("./catch_filter")(a);function I(T,D,P){this.promise=T,this.type=D,this.handler=P,this.called=!1,this.cancelPromise=null}function p(T){this.finallyHandler=T}function g(T,D){return null!=T.cancelPromise&&(arguments.length>1?T.cancelPromise._reject(D):T.cancelPromise._cancel(),T.cancelPromise=null,!0)}function C(){return v.call(this,this.promise._target()._settledValue())}function _(T){if(!g(this,T))return l.e=T,l}function v(T){var D=this.promise,P=this.handler;if(!this.called){this.called=!0;var E=this.isFinallyHandler()?P.call(D._boundValue()):P.call(D._boundValue(),T);if(E===a)return E;if(void 0!==E){D._setReturnedNonUndefined();var M=f(E,D);if(M instanceof u){if(null!=this.cancelPromise){if(M._isCancelled()){var O=new c("late cancellation observer");return D._attachExtraTrace(O),l.e=O,l}M.isPending()&&M._attachCancellationCallback(new p(this))}return M._then(C,_,void 0,this,void 0)}}}return D.isRejected()?(g(this),l.e=T,l):(g(this),T)}return I.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){g(this.finallyHandler)},u.prototype._passThrough=function(T,D,P,E){return"function"!=typeof T?this.then():this._then(P,E,void 0,new I(this,D,T),void 0)},u.prototype.lastly=u.prototype.finally=function(T){return this._passThrough(T,0,v,v)},u.prototype.tap=function(T){return this._passThrough(T,1,v)},u.prototype.tapCatch=function(T){var D=arguments.length;if(1===D)return this._passThrough(T,1,void 0,v);var P,E=new Array(D-1),M=0;for(P=0;P<D-1;++P){var O=arguments[P];if(!o.isObject(O))return u.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(O)));E[M++]=O}E.length=M;var R=arguments[P];return this._passThrough(m(E,R,this),1,void 0,v)},I}},{"./catch_filter":7,"./util":36}],16:[function(d,s,i){s.exports=function(u,f,a,o,c,l){var m=d("./errors").TypeError,I=d("./util"),p=I.errorObj,g=I.tryCatch,C=[];function _(v,T,D,P){if(l.cancellation()){var E=new u(a),M=this._finallyPromise=new u(a);this._promise=E.lastly(function(){return M}),E._captureStackTrace(),E._setOnCancel(this)}else(this._promise=new u(a))._captureStackTrace();this._stack=P,this._generatorFunction=v,this._receiver=T,this._generator=void 0,this._yieldHandlers="function"==typeof D?[D].concat(C):C,this._yieldedPromise=null,this._cancellationPhase=!1}I.inherits(_,c),_.prototype._isResolved=function(){return null===this._promise},_.prototype._cleanup=function(){this._promise=this._generator=null,l.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},_.prototype._promiseCancelled=function(){if(!this._isResolved()){var v;if(typeof this._generator.return<"u")this._promise._pushContext(),v=g(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var T=new u.CancellationError("generator .return() sentinel");u.coroutine.returnSentinel=T,this._promise._attachExtraTrace(T),this._promise._pushContext(),v=g(this._generator.throw).call(this._generator,T),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(v)}},_.prototype._promiseFulfilled=function(v){this._yieldedPromise=null,this._promise._pushContext();var T=g(this._generator.next).call(this._generator,v);this._promise._popContext(),this._continue(T)},_.prototype._promiseRejected=function(v){this._yieldedPromise=null,this._promise._attachExtraTrace(v),this._promise._pushContext();var T=g(this._generator.throw).call(this._generator,v);this._promise._popContext(),this._continue(T)},_.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof u){var v=this._yieldedPromise;this._yieldedPromise=null,v.cancel()}},_.prototype.promise=function(){return this._promise},_.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},_.prototype._continue=function(v){var T=this._promise;if(v===p)return this._cleanup(),this._cancellationPhase?T.cancel():T._rejectCallback(v.e,!1);var D=v.value;if(!0===v.done)return this._cleanup(),this._cancellationPhase?T.cancel():T._resolveCallback(D);var P=o(D,this._promise);if(P instanceof u||null!==(P=function(M,O,R){for(var F=0;F<O.length;++F){R._pushContext();var B=g(O[F])(M);if(R._popContext(),B===p){R._pushContext();var b=u.reject(p.e);return R._popContext(),b}var A=o(B,R);if(A instanceof u)return A}return null}(P,this._yieldHandlers,this._promise))){var E=(P=P._target())._bitField;0==(50397184&E)?(this._yieldedPromise=P,P._proxy(this,null)):0!=(33554432&E)?u._async.invoke(this._promiseFulfilled,this,P._value()):0!=(16777216&E)?u._async.invoke(this._promiseRejected,this,P._reason()):this._promiseCancelled()}else this._promiseRejected(new m("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(D))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},u.coroutine=function(v,T){if("function"!=typeof v)throw new m("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var D=Object(T).yieldHandler,P=_,E=(new Error).stack;return function(){var M=v.apply(this,arguments),O=new P(void 0,void 0,D,E),R=O.promise();return O._generator=M,O._promiseFulfilled(void 0),R}},u.coroutine.addYieldHandler=function(v){if("function"!=typeof v)throw new m("expecting a function but got "+I.classString(v));C.push(v)},u.spawn=function(v){if(l.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof v)return f("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var T=new _(v,this),D=T.promise();return T._run(u.spawn),D}}},{"./errors":12,"./util":36}],17:[function(d,s,i){s.exports=function(u,f,a,o,c){d("./util"),u.join=function(){var m,I=arguments.length-1;I>0&&"function"==typeof arguments[I]&&(m=arguments[I]);var p=[].slice.call(arguments);m&&p.pop();var g=new f(p).promise();return void 0!==m?g.spread(m):g}}},{"./util":36}],18:[function(d,s,i){s.exports=function(u,f,a,o,c,l){var m=d("./util"),I=m.tryCatch,p=m.errorObj,g=u._async;function C(v,T,D,P){this.constructor$(v),this._promise._captureStackTrace();var E=u._getContext();if(this._callback=m.contextBind(E,T),this._preservedValues=P===c?new Array(this.length()):null,this._limit=D,this._inFlight=0,this._queue=[],g.invoke(this._asyncInit,this,void 0),m.isArray(v))for(var M=0;M<v.length;++M){var O=v[M];O instanceof u&&O.suppressUnhandledRejections()}}function _(v,T,D,P){if("function"!=typeof T)return a("expecting a function but got "+m.classString(T));var E=0;if(void 0!==D){if("object"!=typeof D||null===D)return u.reject(new TypeError("options argument must be an object but it is "+m.classString(D)));if("number"!=typeof D.concurrency)return u.reject(new TypeError("'concurrency' must be a number but it is "+m.classString(D.concurrency)));E=D.concurrency}return new C(v,T,E="number"==typeof E&&isFinite(E)&&E>=1?E:0,P).promise()}m.inherits(C,f),C.prototype._asyncInit=function(){this._init$(void 0,-2)},C.prototype._init=function(){},C.prototype._promiseFulfilled=function(v,T){var D=this._values,P=this.length(),E=this._preservedValues,M=this._limit;if(T<0){if(D[T=-1*T-1]=v,M>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(M>=1&&this._inFlight>=M)return D[T]=v,this._queue.push(T),!1;null!==E&&(E[T]=v);var O=this._promise,R=this._callback,F=O._boundValue();O._pushContext();var B=I(R).call(F,v,T,P),b=O._popContext();if(l.checkForgottenReturns(B,b,null!==E?"Promise.filter":"Promise.map",O),B===p)return this._reject(B.e),!0;var A=o(B,this._promise);if(A instanceof u){var N=(A=A._target())._bitField;if(0==(50397184&N))return M>=1&&this._inFlight++,D[T]=A,A._proxy(this,-1*(T+1)),!1;if(0==(33554432&N))return 0!=(16777216&N)?(this._reject(A._reason()),!0):(this._cancel(),!0);B=A._value()}D[T]=B}return++this._totalResolved>=P&&(null!==E?this._filter(D,E):this._resolve(D),!0)},C.prototype._drainQueue=function(){for(var v=this._queue,T=this._limit,D=this._values;v.length>0&&this._inFlight<T;){if(this._isResolved())return;var P=v.pop();this._promiseFulfilled(D[P],P)}},C.prototype._filter=function(v,T){for(var D=T.length,P=new Array(D),E=0,M=0;M<D;++M)v[M]&&(P[E++]=T[M]);P.length=E,this._resolve(P)},C.prototype.preservedValues=function(){return this._preservedValues},u.prototype.map=function(v,T){return _(this,v,T,null)},u.map=function(v,T,D,P){return _(v,T,D,P)}}},{"./util":36}],19:[function(d,s,i){s.exports=function(u,f,a,o,c){var l=d("./util"),m=l.tryCatch;u.method=function(I){if("function"!=typeof I)throw new u.TypeError("expecting a function but got "+l.classString(I));return function(){var p=new u(f);p._captureStackTrace(),p._pushContext();var g=m(I).apply(this,arguments),C=p._popContext();return c.checkForgottenReturns(g,C,"Promise.method",p),p._resolveFromSyncValue(g),p}},u.attempt=u.try=function(I){if("function"!=typeof I)return o("expecting a function but got "+l.classString(I));var p,g=new u(f);if(g._captureStackTrace(),g._pushContext(),arguments.length>1){c.deprecated("calling Promise.try with more than 1 argument");var C=arguments[1],_=arguments[2];p=l.isArray(C)?m(I).apply(_,C):m(I).call(_,C)}else p=m(I)();var v=g._popContext();return c.checkForgottenReturns(p,v,"Promise.try",g),g._resolveFromSyncValue(p),g},u.prototype._resolveFromSyncValue=function(I){I===l.errorObj?this._rejectCallback(I.e,!1):this._resolveCallback(I,!0)}}},{"./util":36}],20:[function(d,s,i){var u=d("./util"),f=u.maybeWrapAsError,a=d("./errors").OperationalError,o=d("./es5"),c=/^(?:name|message|stack|cause)$/;function l(m){var I,_;if((_=m)instanceof Error&&o.getPrototypeOf(_)===Error.prototype){(I=new a(m)).name=m.name,I.message=m.message,I.stack=m.stack;for(var p=o.keys(m),g=0;g<p.length;++g){var C=p[g];c.test(C)||(I[C]=m[C])}return I}return u.markAsOriginatingFromRejection(m),m}s.exports=function(m,I){return function(p,g){if(null!==m){if(p){var C=l(f(p));m._attachExtraTrace(C),m._reject(C)}else if(I){var _=[].slice.call(arguments,1);m._fulfill(_)}else m._fulfill(g);m=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(d,s,i){s.exports=function(u){var f=d("./util"),a=u._async,o=f.tryCatch,c=f.errorObj;function l(p,g){if(!f.isArray(p))return m.call(this,p,g);var C=o(g).apply(this._boundValue(),[null].concat(p));C===c&&a.throwLater(C.e)}function m(p,g){var C=this._boundValue(),_=void 0===p?o(g).call(C,null):o(g).call(C,null,p);_===c&&a.throwLater(_.e)}function I(p,g){if(!p){var C=new Error(p+"");C.cause=p,p=C}var _=o(g).call(this._boundValue(),p);_===c&&a.throwLater(_.e)}u.prototype.asCallback=u.prototype.nodeify=function(p,g){if("function"==typeof p){var C=m;void 0!==g&&Object(g).spread&&(C=l),this._then(C,I,void 0,this,p)}return this}}},{"./util":36}],22:[function(d,s,i){s.exports=function(){var u=function(){return new P("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new q.PromiseInspection(this._target())},a=function(J){return q.reject(new P(J))};function o(){}var c={},l=d("./util");l.setReflectHandler(f);var m=function(){var J=process.domain;return void 0===J?null:J},I=function(){return{domain:m(),async:null}},p=l.isNode&&l.nodeSupportsAsyncResource?d("async_hooks").AsyncResource:null,g=function(){return{domain:m(),async:new p("Bluebird::Promise")}},C=l.isNode?I:function(){return null};l.notEnumerableProp(q,"_getContext",C);var _=d("./es5"),v=d("./async"),T=new v;_.defineProperty(q,"_async",{value:T});var D=d("./errors"),P=q.TypeError=D.TypeError;q.RangeError=D.RangeError;var E=q.CancellationError=D.CancellationError;q.TimeoutError=D.TimeoutError,q.OperationalError=D.OperationalError,q.RejectionError=D.OperationalError,q.AggregateError=D.AggregateError;var M=function(){},O={},R={},F=d("./thenables")(q,M),B=d("./promise_array")(q,M,F,a,o),b=d("./context")(q),A=b.create,N=d("./debuggability")(q,b,function(){C=g,l.notEnumerableProp(q,"_getContext",g)},function(){C=I,l.notEnumerableProp(q,"_getContext",I)}),Y=d("./finally")(q,F,R),ne=d("./catch_filter")(R),Ie=d("./nodeback"),_e=l.errorObj,ce=l.tryCatch;function q(J){J!==M&&function(te,oe){if(null==te||te.constructor!==q)throw new P("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof oe)throw new P("expecting a function but got "+l.classString(oe))}(this,J),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(J),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function he(J){this.promise._resolveCallback(J)}function ie(J){this.promise._rejectCallback(J,!1)}function V(J){var te=new q(M);te._fulfillmentHandler0=J,te._rejectionHandler0=J,te._promise0=J,te._receiver0=J}return q.prototype.toString=function(){return"[object Promise]"},q.prototype.caught=q.prototype.catch=function(J){var te=arguments.length;if(te>1){var oe,Ee=new Array(te-1),ge=0;for(oe=0;oe<te-1;++oe){var Re=arguments[oe];if(!l.isObject(Re))return a("Catch statement predicate: expecting an object but got "+l.classString(Re));Ee[ge++]=Re}if(Ee.length=ge,"function"!=typeof(J=arguments[oe]))throw new P("The last argument to .catch() must be a function, got "+l.toString(J));return this.then(void 0,ne(Ee,J,this))}return this.then(void 0,J)},q.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},q.prototype.then=function(J,te){if(N.warnings()&&arguments.length>0&&"function"!=typeof J&&"function"!=typeof te){var oe=".then() only accepts functions but was passed: "+l.classString(J);arguments.length>1&&(oe+=", "+l.classString(te)),this._warn(oe)}return this._then(J,te,void 0,void 0,void 0)},q.prototype.done=function(J,te){this._then(J,te,void 0,void 0,void 0)._setIsFinal()},q.prototype.spread=function(J){return"function"!=typeof J?a("expecting a function but got "+l.classString(J)):this.all()._then(J,void 0,void 0,O,void 0)},q.prototype.toJSON=function(){var J={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(J.fulfillmentValue=this.value(),J.isFulfilled=!0):this.isRejected()&&(J.rejectionReason=this.reason(),J.isRejected=!0),J},q.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new B(this).promise()},q.prototype.error=function(J){return this.caught(l.originatesFromRejection,J)},q.getNewLibraryCopy=s.exports,q.is=function(J){return J instanceof q},q.fromNode=q.fromCallback=function(J){var te=new q(M);te._captureStackTrace();var oe=arguments.length>1&&!!Object(arguments[1]).multiArgs,Ee=ce(J)(Ie(te,oe));return Ee===_e&&te._rejectCallback(Ee.e,!0),te._isFateSealed()||te._setAsyncGuaranteed(),te},q.all=function(J){return new B(J).promise()},q.cast=function(J){var te=F(J);return te instanceof q||((te=new q(M))._captureStackTrace(),te._setFulfilled(),te._rejectionHandler0=J),te},q.resolve=q.fulfilled=q.cast,q.reject=q.rejected=function(J){var te=new q(M);return te._captureStackTrace(),te._rejectCallback(J,!0),te},q.setScheduler=function(J){if("function"!=typeof J)throw new P("expecting a function but got "+l.classString(J));return T.setScheduler(J)},q.prototype._then=function(J,te,oe,Ee,ge){var Re=void 0!==ge,G=Re?ge:new q(M),k=this._target(),U=k._bitField;Re||(G._propagateFrom(this,3),G._captureStackTrace(),void 0===Ee&&0!=(2097152&this._bitField)&&(Ee=0!=(50397184&U)?this._boundValue():k===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,G));var H=C();if(0!=(50397184&U)){var ee,ye,Z=k._settlePromiseCtx;0!=(33554432&U)?(ye=k._rejectionHandler0,ee=J):0!=(16777216&U)?(ye=k._fulfillmentHandler0,ee=te,k._unsetRejectionIsUnhandled()):(Z=k._settlePromiseLateCancellationObserver,ye=new E("late cancellation observer"),k._attachExtraTrace(ye),ee=te),T.invoke(Z,k,{handler:l.contextBind(H,ee),promise:G,receiver:Ee,value:ye})}else k._addCallbacks(J,te,G,Ee,H);return G},q.prototype._length=function(){return 65535&this._bitField},q.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},q.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},q.prototype._setLength=function(J){this._bitField=-65536&this._bitField|65535&J},q.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},q.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},q.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},q.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},q.prototype._isFinal=function(){return(4194304&this._bitField)>0},q.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},q.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},q.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},q.prototype._setAsyncGuaranteed=function(){if(!T.hasCustomScheduler()){var J=this._bitField;this._bitField=J|(536870912&J)>>2^134217728}},q.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},q.prototype._receiverAt=function(J){var te=0===J?this._receiver0:this[4*J-4+3];return te===c?void 0:void 0===te&&this._isBound()?this._boundValue():te},q.prototype._promiseAt=function(J){return this[4*J-4+2]},q.prototype._fulfillmentHandlerAt=function(J){return this[4*J-4+0]},q.prototype._rejectionHandlerAt=function(J){return this[4*J-4+1]},q.prototype._boundValue=function(){},q.prototype._migrateCallback0=function(J){var te=J._fulfillmentHandler0,oe=J._rejectionHandler0,Ee=J._promise0,ge=J._receiverAt(0);void 0===ge&&(ge=c),this._addCallbacks(te,oe,Ee,ge,null)},q.prototype._migrateCallbackAt=function(J,te){var oe=J._fulfillmentHandlerAt(te),Ee=J._rejectionHandlerAt(te),ge=J._promiseAt(te),Re=J._receiverAt(te);void 0===Re&&(Re=c),this._addCallbacks(oe,Ee,ge,Re,null)},q.prototype._addCallbacks=function(J,te,oe,Ee,ge){var Re=this._length();if(Re>=65531&&(Re=0,this._setLength(0)),0===Re)this._promise0=oe,this._receiver0=Ee,"function"==typeof J&&(this._fulfillmentHandler0=l.contextBind(ge,J)),"function"==typeof te&&(this._rejectionHandler0=l.contextBind(ge,te));else{var G=4*Re-4;this[G+2]=oe,this[G+3]=Ee,"function"==typeof J&&(this[G+0]=l.contextBind(ge,J)),"function"==typeof te&&(this[G+1]=l.contextBind(ge,te))}return this._setLength(Re+1),Re},q.prototype._proxy=function(J,te){this._addCallbacks(void 0,void 0,te,J,null)},q.prototype._resolveCallback=function(J,te){if(0==(117506048&this._bitField)){if(J===this)return this._rejectCallback(u(),!1);var oe=F(J,this);if(!(oe instanceof q))return this._fulfill(J);te&&this._propagateFrom(oe,2);var Ee=oe._target();if(Ee!==this){var ge=Ee._bitField;if(0==(50397184&ge)){var Re=this._length();Re>0&&Ee._migrateCallback0(this);for(var G=1;G<Re;++G)Ee._migrateCallbackAt(this,G);this._setFollowing(),this._setLength(0),this._setFollowee(oe)}else if(0!=(33554432&ge))this._fulfill(Ee._value());else if(0!=(16777216&ge))this._reject(Ee._reason());else{var k=new E("late cancellation observer");Ee._attachExtraTrace(k),this._reject(k)}}else this._reject(u())}},q.prototype._rejectCallback=function(J,te,oe){var Ee=l.ensureErrorObject(J),ge=Ee===J;if(!ge&&!oe&&N.warnings()){var Re="a promise was rejected with a non-error: "+l.classString(J);this._warn(Re,!0)}this._attachExtraTrace(Ee,!!te&&ge),this._reject(J)},q.prototype._resolveFromExecutor=function(J){if(J!==M){var te=this;this._captureStackTrace(),this._pushContext();var oe=!0,Ee=this._execute(J,function(ge){te._resolveCallback(ge)},function(ge){te._rejectCallback(ge,oe)});oe=!1,this._popContext(),void 0!==Ee&&te._rejectCallback(Ee,!0)}},q.prototype._settlePromiseFromHandler=function(J,te,oe,Ee){var ge=Ee._bitField;if(0==(65536&ge)){var Re;Ee._pushContext(),te===O?oe&&"number"==typeof oe.length?Re=ce(J).apply(this._boundValue(),oe):(Re=_e).e=new P("cannot .spread() a non-array: "+l.classString(oe)):Re=ce(J).call(te,oe);var G=Ee._popContext();0==(65536&(ge=Ee._bitField))&&(Re===R?Ee._reject(oe):Re===_e?Ee._rejectCallback(Re.e,!1):(N.checkForgottenReturns(Re,G,"",Ee,this),Ee._resolveCallback(Re)))}},q.prototype._target=function(){for(var J=this;J._isFollowing();)J=J._followee();return J},q.prototype._followee=function(){return this._rejectionHandler0},q.prototype._setFollowee=function(J){this._rejectionHandler0=J},q.prototype._settlePromise=function(J,te,oe,Ee){var ge=J instanceof q,Re=this._bitField,G=0!=(134217728&Re);0!=(65536&Re)?(ge&&J._invokeInternalOnCancel(),oe instanceof Y&&oe.isFinallyHandler()?(oe.cancelPromise=J,ce(te).call(oe,Ee)===_e&&J._reject(_e.e)):te===f?J._fulfill(f.call(oe)):oe instanceof o?oe._promiseCancelled(J):ge||J instanceof B?J._cancel():oe.cancel()):"function"==typeof te?ge?(G&&J._setAsyncGuaranteed(),this._settlePromiseFromHandler(te,oe,Ee,J)):te.call(oe,Ee,J):oe instanceof o?oe._isResolved()||(0!=(33554432&Re)?oe._promiseFulfilled(Ee,J):oe._promiseRejected(Ee,J)):ge&&(G&&J._setAsyncGuaranteed(),0!=(33554432&Re)?J._fulfill(Ee):J._reject(Ee))},q.prototype._settlePromiseLateCancellationObserver=function(J){var te=J.handler,oe=J.promise,Ee=J.receiver,ge=J.value;"function"==typeof te?oe instanceof q?this._settlePromiseFromHandler(te,Ee,ge,oe):te.call(Ee,ge,oe):oe instanceof q&&oe._reject(ge)},q.prototype._settlePromiseCtx=function(J){this._settlePromise(J.promise,J.handler,J.receiver,J.value)},q.prototype._settlePromise0=function(J,te,oe){var Ee=this._promise0,ge=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Ee,J,ge,te)},q.prototype._clearCallbackDataAtIndex=function(J){var te=4*J-4;this[te+2]=this[te+3]=this[te+0]=this[te+1]=void 0},q.prototype._fulfill=function(J){var te=this._bitField;if(!((117506048&te)>>>16)){if(J===this){var oe=u();return this._attachExtraTrace(oe),this._reject(oe)}this._setFulfilled(),this._rejectionHandler0=J,(65535&te)>0&&(0!=(134217728&te)?this._settlePromises():T.settlePromises(this),this._dereferenceTrace())}},q.prototype._reject=function(J){var te=this._bitField;if(!((117506048&te)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=J,this._isFinal())return T.fatalError(J,l.isNode);(65535&te)>0?T.settlePromises(this):this._ensurePossibleRejectionHandled()}},q.prototype._fulfillPromises=function(J,te){for(var oe=1;oe<J;oe++){var Ee=this._fulfillmentHandlerAt(oe),ge=this._promiseAt(oe),Re=this._receiverAt(oe);this._clearCallbackDataAtIndex(oe),this._settlePromise(ge,Ee,Re,te)}},q.prototype._rejectPromises=function(J,te){for(var oe=1;oe<J;oe++){var Ee=this._rejectionHandlerAt(oe),ge=this._promiseAt(oe),Re=this._receiverAt(oe);this._clearCallbackDataAtIndex(oe),this._settlePromise(ge,Ee,Re,te)}},q.prototype._settlePromises=function(){var J=this._bitField,te=65535&J;if(te>0){if(0!=(16842752&J)){var oe=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,oe,J),this._rejectPromises(te,oe)}else{var Ee=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Ee,J),this._fulfillPromises(te,Ee)}this._setLength(0)}this._clearCancellationData()},q.prototype._settledValue=function(){var J=this._bitField;return 0!=(33554432&J)?this._rejectionHandler0:0!=(16777216&J)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&_.defineProperty(q.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),q.defer=q.pending=function(){return N.deprecated("Promise.defer","new Promise"),{promise:new q(M),resolve:he,reject:ie}},l.notEnumerableProp(q,"_makeSelfResolutionError",u),d("./method")(q,M,F,a,N),d("./bind")(q,M,F,N),d("./cancel")(q,B,a,N),d("./direct_resolve")(q),d("./synchronous_inspection")(q),d("./join")(q,B,F,M,T),q.Promise=q,q.version="3.7.2",d("./call_get.js")(q),d("./generators.js")(q,a,M,F,o,N),d("./map.js")(q,B,a,F,M,N),d("./nodeify.js")(q),d("./promisify.js")(q,M),d("./props.js")(q,B,F,a),d("./race.js")(q,M,F,a),d("./reduce.js")(q,B,a,F,M,N),d("./settle.js")(q,B,N),d("./some.js")(q,B,a),d("./timers.js")(q,M,N),d("./using.js")(q,a,F,A,M,N),d("./any.js")(q),d("./each.js")(q,M),d("./filter.js")(q,M),l.toFastProperties(q),l.toFastProperties(q.prototype),V({a:1}),V({b:2}),V({c:3}),V(1),V(function(){}),V(void 0),V(!1),V(new q(M)),N.setBounds(v.firstLineError,l.lastLineError),q}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(d,s,i){s.exports=function(u,f,a,o,c){var l=d("./util");function m(I){var p=this._promise=new u(f);I instanceof u&&(p._propagateFrom(I,3),I.suppressUnhandledRejections()),p._setOnCancel(this),this._values=I,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return l.inherits(m,c),m.prototype.length=function(){return this._length},m.prototype.promise=function(){return this._promise},m.prototype._init=function I(p,g){var C=a(this._values,this._promise);if(C instanceof u){var _=(C=C._target())._bitField;if(this._values=C,0==(50397184&_))return this._promise._setAsyncGuaranteed(),C._then(I,this._reject,void 0,this,g);if(0==(33554432&_))return 0!=(16777216&_)?this._reject(C._reason()):this._cancel();C=C._value()}if(null!==(C=l.asArray(C)))0!==C.length?this._iterate(C):-5===g?this._resolveEmptyArray():this._resolve(function(T){switch(T){case-2:return[];case-3:return{};case-6:return new Map}}(g));else{var v=o("expecting an array or an iterable object but got "+l.classString(C)).reason();this._promise._rejectCallback(v,!1)}},m.prototype._iterate=function(I){var p=this.getActualLength(I.length);this._length=p,this._values=this.shouldCopyValues()?new Array(p):this._values;for(var g=this._promise,C=!1,_=null,v=0;v<p;++v){var T=a(I[v],g);_=T instanceof u?(T=T._target())._bitField:null,C?null!==_&&T.suppressUnhandledRejections():null!==_?0==(50397184&_)?(T._proxy(this,v),this._values[v]=T):C=0!=(33554432&_)?this._promiseFulfilled(T._value(),v):0!=(16777216&_)?this._promiseRejected(T._reason(),v):this._promiseCancelled(v):C=this._promiseFulfilled(T,v)}C||g._setAsyncGuaranteed()},m.prototype._isResolved=function(){return null===this._values},m.prototype._resolve=function(I){this._values=null,this._promise._fulfill(I)},m.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},m.prototype._reject=function(I){this._values=null,this._promise._rejectCallback(I,!1)},m.prototype._promiseFulfilled=function(I,p){return this._values[p]=I,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseCancelled=function(){return this._cancel(),!0},m.prototype._promiseRejected=function(I){return this._totalResolved++,this._reject(I),!0},m.prototype._resultCancelled=function(){if(!this._isResolved()){var I=this._values;if(this._cancel(),I instanceof u)I.cancel();else for(var p=0;p<I.length;++p)I[p]instanceof u&&I[p].cancel()}},m.prototype.shouldCopyValues=function(){return!0},m.prototype.getActualLength=function(I){return I},m}},{"./util":36}],24:[function(d,s,i){s.exports=function(u,f){var a={},o=d("./util"),c=d("./nodeback"),l=o.withAppended,m=o.maybeWrapAsError,I=o.canEvaluate,p=d("./errors").TypeError,g={__isPromisified__:!0},C=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),_=function(R){return o.isIdentifier(R)&&"_"!==R.charAt(0)&&"constructor"!==R};function v(R){return!C.test(R)}function T(R){try{return!0===R.__isPromisified__}catch{return!1}}function D(R,F,B){var b=o.getDataPropertyOrDefault(R,F+B,g);return!!b&&T(b)}var M=I?void 0:function(R,F,B,b,A,N){var Y=function(){return this}(),ne=R;function Ie(){var _e=F;F===a&&(_e=this);var ce=new u(f);ce._captureStackTrace();var q="string"==typeof ne&&this!==Y?this[ne]:R,he=c(ce,N);try{q.apply(_e,l(arguments,he))}catch(ie){ce._rejectCallback(m(ie),!0,!0)}return ce._isFateSealed()||ce._setAsyncGuaranteed(),ce}return"string"==typeof ne&&(R=b),o.notEnumerableProp(Ie,"__isPromisified__",!0),Ie};function O(R,F,B,b,A){for(var N=new RegExp(F.replace(/([$])/,"\\$")+"$"),Y=function P(R,F,B,b){for(var A=o.inheritedDataKeys(R),N=[],Y=0;Y<A.length;++Y){var ne=A[Y],Ie=R[ne],_e=b===_||_(ne);"function"!=typeof Ie||T(Ie)||D(R,ne,F)||!b(ne,Ie,R,_e)||N.push(ne,Ie)}return function(ce,q,he){for(var ie=0;ie<ce.length;ie+=2){var V=ce[ie];if(he.test(V))for(var J=V.replace(he,""),te=0;te<ce.length;te+=2)if(ce[te]===J)throw new p("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",q))}}(N,F,B),N}(R,F,N,B),ne=0,Ie=Y.length;ne<Ie;ne+=2){var _e=Y[ne],ce=Y[ne+1],q=_e+F;if(b===M)R[q]=M(_e,a,_e,ce,F,A);else{var he=b(ce,function(){return M(_e,a,_e,ce,F,A)});o.notEnumerableProp(he,"__isPromisified__",!0),R[q]=he}}return o.toFastProperties(R),R}u.promisify=function(R,F){if("function"!=typeof R)throw new p("expecting a function but got "+o.classString(R));if(T(R))return R;var b,A,B=(b=R,A=void 0===(F=Object(F)).context?a:F.context,M(b,A,void 0,b,null,!!F.multiArgs));return o.copyDescriptors(R,B,v),B},u.promisifyAll=function(R,F){if("function"!=typeof R&&"object"!=typeof R)throw new p("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var B=!!(F=Object(F)).multiArgs,b=F.suffix;"string"!=typeof b&&(b="Async");var A=F.filter;"function"!=typeof A&&(A=_);var N=F.promisifier;if("function"!=typeof N&&(N=M),!o.isIdentifier(b))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var Y=o.inheritedDataKeys(R),ne=0;ne<Y.length;++ne){var Ie=R[Y[ne]];"constructor"!==Y[ne]&&o.isClass(Ie)&&(O(Ie.prototype,b,A,N,B),O(Ie,b,A,N,B))}return O(R,b,A,N,B)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(d,s,i){s.exports=function(u,f,a,o){var c,l=d("./util"),m=l.isObject,I=d("./es5");"function"==typeof Map&&(c=Map);var p=function(){var _=0,v=0;function T(D,P){this[_]=D,this[_+v]=P,_++}return function(D){v=D.size,_=0;var P=new Array(2*D.size);return D.forEach(T,P),P}}();function g(_){var v,T=!1;if(void 0!==c&&_ instanceof c)v=p(_),T=!0;else{var D=I.keys(_),P=D.length;v=new Array(2*P);for(var E=0;E<P;++E){var M=D[E];v[E]=_[M],v[E+P]=M}}this.constructor$(v),this._isMap=T,this._init$(void 0,T?-6:-3)}function C(_){var v,T=a(_);return m(T)?(v=T instanceof u?T._then(u.props,void 0,void 0,void 0,void 0):new g(T).promise(),T instanceof u&&v._propagateFrom(T,2),v):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}l.inherits(g,f),g.prototype._init=function(){},g.prototype._promiseFulfilled=function(_,v){if(this._values[v]=_,++this._totalResolved>=this._length){var T;if(this._isMap)T=function(M){for(var O=new c,R=M.length/2|0,F=0;F<R;++F)O.set(M[R+F],M[F]);return O}(this._values);else{T={};for(var D=this.length(),P=0,E=this.length();P<E;++P)T[this._values[P+D]]=this._values[P]}return this._resolve(T),!0}return!1},g.prototype.shouldCopyValues=function(){return!1},g.prototype.getActualLength=function(_){return _>>1},u.prototype.props=function(){return C(this)},u.props=function(_){return C(_)}}},{"./es5":13,"./util":36}],26:[function(d,s,i){function u(f){this._capacity=f,this._length=0,this._front=0}u.prototype._willBeOverCapacity=function(f){return this._capacity<f},u.prototype._pushOne=function(f){var a=this.length();this._checkCapacity(a+1),this[this._front+a&this._capacity-1]=f,this._length=a+1},u.prototype.push=function(f,a,o){var c=this.length()+3;if(this._willBeOverCapacity(c))return this._pushOne(f),this._pushOne(a),void this._pushOne(o);var l=this._front+c-3;this._checkCapacity(c);var m=this._capacity-1;this[l+0&m]=f,this[l+1&m]=a,this[l+2&m]=o,this._length=c},u.prototype.shift=function(){var f=this._front,a=this[f];return this[f]=void 0,this._front=f+1&this._capacity-1,this._length--,a},u.prototype.length=function(){return this._length},u.prototype._checkCapacity=function(f){this._capacity<f&&this._resizeTo(this._capacity<<1)},u.prototype._resizeTo=function(f){var a=this._capacity;this._capacity=f,function(o,c,l,m,I){for(var p=0;p<I;++p)l[p+m]=o[p+0],o[p+0]=void 0}(this,0,this,a,this._front+this._length&a-1)},s.exports=u},{}],27:[function(d,s,i){s.exports=function(u,f,a,o){var c=d("./util");function l(m,I){var p,g=a(m);if(g instanceof u)return(p=g).then(function(E){return l(E,p)});if(null===(m=c.asArray(m)))return o("expecting an array or an iterable object but got "+c.classString(m));var C=new u(f);void 0!==I&&C._propagateFrom(I,3);for(var _=C._fulfill,v=C._reject,T=0,D=m.length;T<D;++T){var P=m[T];(void 0!==P||T in m)&&u.cast(P)._then(_,v,void 0,C,null)}return C}u.race=function(m){return l(m,void 0)},u.prototype.race=function(){return l(this,void 0)}}},{"./util":36}],28:[function(d,s,i){s.exports=function(u,f,a,o,c,l){var m=d("./util"),I=m.tryCatch;function p(T,D,P,E){this.constructor$(T);var M=u._getContext();this._fn=m.contextBind(M,D),void 0!==P&&(P=u.resolve(P))._attachCancellationCallback(this),this._initialValue=P,this._currentCancellable=null,this._eachValues=E===c?Array(this._length):0===E?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function g(T,D){this.isFulfilled()?D._resolve(T):D._reject(T)}function C(T,D,P,E){return"function"!=typeof D?a("expecting a function but got "+m.classString(D)):new p(T,D,P,E).promise()}function _(T){this.accum=T,this.array._gotAccum(T);var D=o(this.value,this.array._promise);return D instanceof u?(this.array._currentCancellable=D,D._then(v,void 0,void 0,this,void 0)):v.call(this,D)}function v(T){var D,P=this.array,E=P._promise,M=I(P._fn);E._pushContext(),(D=void 0!==P._eachValues?M.call(E._boundValue(),T,this.index,this.length):M.call(E._boundValue(),this.accum,T,this.index,this.length))instanceof u&&(P._currentCancellable=D);var O=E._popContext();return l.checkForgottenReturns(D,O,void 0!==P._eachValues?"Promise.each":"Promise.reduce",E),D}m.inherits(p,f),p.prototype._gotAccum=function(T){null!=this._eachValues&&T!==c&&this._eachValues.push(T)},p.prototype._eachComplete=function(T){return null!==this._eachValues&&this._eachValues.push(T),this._eachValues},p.prototype._init=function(){},p.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},p.prototype.shouldCopyValues=function(){return!1},p.prototype._resolve=function(T){this._promise._resolveCallback(T),this._values=null},p.prototype._resultCancelled=function(T){if(T===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof u&&this._currentCancellable.cancel(),this._initialValue instanceof u&&this._initialValue.cancel())},p.prototype._iterate=function(T){var D,P;this._values=T;var E=T.length;void 0!==this._initialValue?(D=this._initialValue,P=0):(D=u.resolve(T[0]),P=1),this._currentCancellable=D;for(var M=P;M<E;++M){var O=T[M];O instanceof u&&O.suppressUnhandledRejections()}if(!D.isRejected())for(;P<E;++P)D=D._then(_,void 0,void 0,{accum:null,value:T[P],index:P,length:E,array:this},void 0),0==(127&P)&&D._setNoAsyncGuarantee();void 0!==this._eachValues&&(D=D._then(this._eachComplete,void 0,void 0,this,void 0)),D._then(g,g,void 0,D,this)},u.prototype.reduce=function(T,D){return C(this,T,D,null)},u.reduce=function(T,D,P,E){return C(T,D,P,E)}}},{"./util":36}],29:[function(d,s,i){var u,m,I,p,g,f=d("./util"),a=f.getNativePromise();if(f.isNode&&typeof MutationObserver>"u"){var o=global.setImmediate,c=process.nextTick;u=f.isRecentNode?function(m){o.call(global,m)}:function(m){c.call(process,m)}}else if("function"==typeof a&&"function"==typeof a.resolve){var l=a.resolve();u=function(m){l.then(m)}}else u=typeof MutationObserver>"u"||typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?typeof setImmediate<"u"?function(m){setImmediate(m)}:typeof setTimeout<"u"?function(m){setTimeout(m,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(m=document.createElement("div"),I={attributes:!0},p=!1,g=document.createElement("div"),new MutationObserver(function(){m.classList.toggle("foo"),p=!1}).observe(g,I),function(C){var _=new MutationObserver(function(){_.disconnect(),C()});_.observe(m,I),p||(p=!0,g.classList.toggle("foo"))});s.exports=u},{"./util":36}],30:[function(d,s,i){s.exports=function(u,f,a){var o=u.PromiseInspection;function c(l){this.constructor$(l)}d("./util").inherits(c,f),c.prototype._promiseResolved=function(l,m){return this._values[l]=m,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},c.prototype._promiseFulfilled=function(l,m){var I=new o;return I._bitField=33554432,I._settledValueField=l,this._promiseResolved(m,I)},c.prototype._promiseRejected=function(l,m){var I=new o;return I._bitField=16777216,I._settledValueField=l,this._promiseResolved(m,I)},u.settle=function(l){return a.deprecated(".settle()",".reflect()"),new c(l).promise()},u.allSettled=function(l){return new c(l).promise()},u.prototype.settle=function(){return u.settle(this)}}},{"./util":36}],31:[function(d,s,i){s.exports=function(u,f,a){var o=d("./util"),c=d("./errors").RangeError,l=d("./errors").AggregateError,m=o.isArray,I={};function p(C){this.constructor$(C),this._howMany=0,this._unwrap=!1,this._initialized=!1}function g(C,_){if((0|_)!==_||_<0)return a("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var v=new p(C),T=v.promise();return v.setHowMany(_),v.init(),T}o.inherits(p,f),p.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var C=m(this._values);!this._isResolved()&&C&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},p.prototype.init=function(){this._initialized=!0,this._init()},p.prototype.setUnwrap=function(){this._unwrap=!0},p.prototype.howMany=function(){return this._howMany},p.prototype.setHowMany=function(C){this._howMany=C},p.prototype._promiseFulfilled=function(C){return this._addFulfilled(C),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},p.prototype._promiseRejected=function(C){return this._addRejected(C),this._checkOutcome()},p.prototype._promiseCancelled=function(){return this._values instanceof u||null==this._values?this._cancel():(this._addRejected(I),this._checkOutcome())},p.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var C=new l,_=this.length();_<this._values.length;++_)this._values[_]!==I&&C.push(this._values[_]);return C.length>0?this._reject(C):this._cancel(),!0}return!1},p.prototype._fulfilled=function(){return this._totalResolved},p.prototype._rejected=function(){return this._values.length-this.length()},p.prototype._addRejected=function(C){this._values.push(C)},p.prototype._addFulfilled=function(C){this._values[this._totalResolved++]=C},p.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},p.prototype._getRangeError=function(C){return new c("Input array must contain at least "+this._howMany+" items but contains only "+C+" items")},p.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},u.some=function(C,_){return g(C,_)},u.prototype.some=function(C){return g(this,C)},u._SomePromiseArray=p}},{"./errors":12,"./util":36}],32:[function(d,s,i){s.exports=function(u){function f(p){void 0!==p?(p=p._target(),this._bitField=p._bitField,this._settledValueField=p._isFateSealed()?p._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}f.prototype._settledValue=function(){return this._settledValueField};var a=f.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=f.prototype.error=f.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},c=f.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},l=f.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},m=f.prototype.isPending=function(){return 0==(50397184&this._bitField)},I=f.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};f.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},u.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},u.prototype._isCancelled=function(){return this._target().__isCancelled()},u.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},u.prototype.isPending=function(){return m.call(this._target())},u.prototype.isRejected=function(){return l.call(this._target())},u.prototype.isFulfilled=function(){return c.call(this._target())},u.prototype.isResolved=function(){return I.call(this._target())},u.prototype.value=function(){return a.call(this._target())},u.prototype.reason=function(){var p=this._target();return p._unsetRejectionIsUnhandled(),o.call(p)},u.prototype._value=function(){return this._settledValue()},u.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},u.PromiseInspection=f}},{}],33:[function(d,s,i){s.exports=function(u,f){var a=d("./util"),o=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return function(m,I){if(c(m)){if(m instanceof u)return m;var p=function(C){try{return(_=C).then}catch(_){return o.e=_,o}var _}(m);if(p===o){I&&I._pushContext();var g=u.reject(p.e);return I&&I._popContext(),g}if("function"==typeof p)return function(C){try{return l.call(C,"_promise0")}catch{return!1}}(m)?(g=new u(f),m._then(g._fulfill,g._reject,void 0,g,null),g):function(C,_,v){var T=new u(f),D=T;v&&v._pushContext(),T._captureStackTrace(),v&&v._popContext();var E=a.tryCatch(_).call(C,function M(R){T&&(T._resolveCallback(R),T=null)},function O(R){T&&(T._rejectCallback(R,!1,!0),T=null)});return T&&E===o&&(T._rejectCallback(E.e,!0,!0),T=null),D}(m,p,I)}return m}}},{"./util":36}],34:[function(d,s,i){s.exports=function(u,f,a){var o=d("./util"),c=u.TimeoutError;function l(C){this.handle=C}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};var m=function(C){return I(+this).thenReturn(C)},I=u.delay=function(C,_){var v,T;return void 0!==_?(v=u.resolve(_)._then(m,null,null,C,void 0),a.cancellation()&&_ instanceof u&&v._setOnCancel(_)):(v=new u(f),T=setTimeout(function(){v._fulfill()},+C),a.cancellation()&&v._setOnCancel(new l(T)),v._captureStackTrace()),v._setAsyncGuaranteed(),v};function p(C){return clearTimeout(this.handle),C}function g(C){throw clearTimeout(this.handle),C}u.prototype.delay=function(C){return I(C,this)},u.prototype.timeout=function(C,_){var v,T;C=+C;var D=new l(setTimeout(function(){var P,E,M,O;v.isPending()&&(P=v,M=T,O="string"!=typeof(E=_)?E instanceof Error?E:new c("operation timed out"):new c(E),o.markAsOriginatingFromRejection(O),P._attachExtraTrace(O),P._reject(O),M?.cancel())},C));return a.cancellation()?(T=this.then(),(v=T._then(p,g,void 0,D,void 0))._setOnCancel(D)):v=this._then(p,g,void 0,D,void 0),v}}},{"./util":36}],35:[function(d,s,i){s.exports=function(u,f,a,o,c,l){var m=d("./util"),I=d("./errors").TypeError,p=d("./util").inherits,g=m.errorObj,C=m.tryCatch,_={};function v(O){setTimeout(function(){throw O},0)}function T(O,R){var F=0,B=O.length,b=new u(c);return function A(){if(F>=B)return b._fulfill();var Y,ne,N=(Y=O[F++],(ne=a(Y))!==Y&&"function"==typeof Y._isDisposable&&"function"==typeof Y._getDisposer&&Y._isDisposable()&&ne._setDisposable(Y._getDisposer()),ne);if(N instanceof u&&N._isDisposable()){try{N=a(N._getDisposer().tryDispose(R),O.promise)}catch(Y){return v(Y)}if(N instanceof u)return N._then(A,v,null,null,null)}A()}(),b}function D(O,R,F){this._data=O,this._promise=R,this._context=F}function P(O,R,F){this.constructor$(O,R,F)}function E(O){return D.isDisposer(O)?(this.resources[this.index]._setDisposable(O),O.promise()):O}function M(O){this.length=O,this.promise=null,this[O-1]=null}D.prototype.data=function(){return this._data},D.prototype.promise=function(){return this._promise},D.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},D.prototype.tryDispose=function(O){var R=this.resource(),F=this._context;void 0!==F&&F._pushContext();var B=R!==_?this.doDispose(R,O):null;return void 0!==F&&F._popContext(),this._promise._unsetDisposable(),this._data=null,B},D.isDisposer=function(O){return null!=O&&"function"==typeof O.resource&&"function"==typeof O.tryDispose},p(P,D),P.prototype.doDispose=function(O,R){return this.data().call(O,O,R)},M.prototype._resultCancelled=function(){for(var O=this.length,R=0;R<O;++R){var F=this[R];F instanceof u&&F.cancel()}},u.using=function(){var O=arguments.length;if(O<2)return f("you must pass at least 2 arguments to Promise.using");var R,F=arguments[O-1];if("function"!=typeof F)return f("expecting a function but got "+m.classString(F));var B=!0;2===O&&Array.isArray(arguments[0])?(O=(R=arguments[0]).length,B=!1):(R=arguments,O--);for(var b=new M(O),A=0;A<O;++A){var N=R[A];if(D.isDisposer(N)){var Y=N;(N=N.promise())._setDisposable(Y)}else{var ne=a(N);ne instanceof u&&(N=ne._then(E,null,null,{resources:b,index:A},void 0))}b[A]=N}var Ie=new Array(b.length);for(A=0;A<Ie.length;++A)Ie[A]=u.resolve(b[A]).reflect();var _e=u.all(Ie).then(function(q){for(var he=0;he<q.length;++he){var ie=q[he];if(ie.isRejected())return g.e=ie.error(),g;if(!ie.isFulfilled())return void _e.cancel();q[he]=ie.value()}ce._pushContext(),F=C(F);var V=B?F.apply(void 0,q):F(q),J=ce._popContext();return l.checkForgottenReturns(V,J,"Promise.using",ce),V}),ce=_e.lastly(function(){var q=new u.PromiseInspection(_e);return T(b,q)});return b.promise=ce,ce._setOnCancel(b),ce},u.prototype._setDisposable=function(O){this._bitField=131072|this._bitField,this._disposer=O},u.prototype._isDisposable=function(){return(131072&this._bitField)>0},u.prototype._getDisposer=function(){return this._disposer},u.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},u.prototype.disposer=function(O){if("function"==typeof O)return new P(O,this,o());throw new I}}},{"./errors":12,"./util":36}],36:[function(d,s,i){var o,u=d("./es5"),f=typeof navigator>"u",a={e:{}},c=typeof Rt<"u"?Rt:typeof window<"u"?window:typeof global<"u"?global:void 0!==this?this:null;function l(){try{var G=o;return o=null,G.apply(this,arguments)}catch(k){return a.e=k,a}}function p(G){return null==G||!0===G||!1===G||"string"==typeof G||"number"==typeof G}function T(G,k,U){return p(G)||u.defineProperty(G,k,{value:U,configurable:!0,enumerable:!1,writable:!0}),G}var P=function(){var G=[Array.prototype,Object.prototype,Function.prototype],k=function(ee){for(var ye=0;ye<G.length;++ye)if(G[ye]===ee)return!0;return!1};if(u.isES5){var U=Object.getOwnPropertyNames;return function(ee){for(var ye=[],Z=Object.create(null);null!=ee&&!k(ee);){var Q;try{Q=U(ee)}catch{return ye}for(var se=0;se<Q.length;++se){var le=Q[se];if(!Z[le]){Z[le]=!0;var pe=Object.getOwnPropertyDescriptor(ee,le);null!=pe&&null==pe.get&&null==pe.set&&ye.push(le)}}ee=u.getPrototypeOf(ee)}return ye}}var H={}.hasOwnProperty;return function(ee){if(k(ee))return[];var ye=[];e:for(var Z in ee)if(H.call(ee,Z))ye.push(Z);else{for(var Q=0;Q<G.length;++Q)if(H.call(G[Q],Z))continue e;ye.push(Z)}return ye}}(),E=/this\s*\.\s*\S+\s*=/,R=/^[a-z$_][a-z$_0-9]*$/i;function b(G){try{return G+""}catch{return"[no string representation]"}}function A(G){return G instanceof Error||null!==G&&"object"==typeof G&&"string"==typeof G.message&&"string"==typeof G.name}function ne(G){return A(G)&&u.propertyIsWritable(G,"stack")}var Ie="stack"in new Error?function(G){return ne(G)?G:new Error(b(G))}:function(G){if(ne(G))return G;try{throw new Error(b(G))}catch(k){return k}};function _e(G){return{}.toString.call(G)}var q=function(G){return u.isArray(G)?G:null};if(typeof Symbol<"u"&&Symbol.iterator){var he="function"==typeof Array.from?function(G){return Array.from(G)}:function(G){for(var k,U=[],H=G[Symbol.iterator]();!(k=H.next()).done;)U.push(k.value);return U};q=function(G){return u.isArray(G)?G:null!=G&&"function"==typeof G[Symbol.iterator]?he(G):null}}var J,Re,ie=typeof process<"u"&&"[object process]"===_e(process).toLowerCase(),V=typeof process<"u"&&typeof process.env<"u",ge={setReflectHandler:function(G){J=G},isClass:function M(G){try{if("function"==typeof G){var k=u.names(G.prototype),U=u.isES5&&k.length>1,H=k.length>0&&!(1===k.length&&"constructor"===k[0]),ee=E.test(G+"")&&u.names(G).length>0;if(U||H||ee)return!0}return!1}catch{return!1}},isIdentifier:function F(G){return R.test(G)},inheritedDataKeys:P,getDataPropertyOrDefault:function v(G,k,U){if(!u.isES5)return{}.hasOwnProperty.call(G,k)?G[k]:void 0;var H=Object.getOwnPropertyDescriptor(G,k);return null!=H?null==H.get&&null==H.set?H.value:U:void 0},thrower:function D(G){throw G},isArray:u.isArray,asArray:q,notEnumerableProp:T,isPrimitive:p,isObject:function g(G){return"function"==typeof G||"object"==typeof G&&null!==G},isError:A,canEvaluate:f,errorObj:a,tryCatch:function m(G){return o=G,l},inherits:function(G,k){var U={}.hasOwnProperty;function H(){for(var ee in this.constructor=G,this.constructor$=k,k.prototype)U.call(k.prototype,ee)&&"$"!==ee.charAt(ee.length-1)&&(this[ee+"$"]=k.prototype[ee])}return H.prototype=k.prototype,G.prototype=new H,G.prototype},withAppended:function _(G,k){var U,H=G.length,ee=new Array(H+1);for(U=0;U<H;++U)ee[U]=G[U];return ee[U]=k,ee},maybeWrapAsError:function C(G){return p(G)?new Error(b(G)):G},toFastProperties:function O(G){function k(){}k.prototype=G;var U=new k;function H(){return typeof U.foo}return H(),H(),G},filledRange:function B(G,k,U){for(var H=new Array(G),ee=0;ee<G;++ee)H[ee]=k+ee+U;return H},toString:b,canAttachTrace:ne,ensureErrorObject:Ie,originatesFromRejection:function Y(G){return null!=G&&(G instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===G.isOperational)},markAsOriginatingFromRejection:function N(G){try{T(G,"isOperational",!0)}catch{}},classString:_e,copyDescriptors:function ce(G,k,U){for(var H=u.names(G),ee=0;ee<H.length;++ee){var ye=H[ee];if(U(ye))try{u.defineProperty(k,ye,u.getDescriptor(G,ye))}catch{}}},isNode:ie,hasEnvVariables:V,env:function te(G){return V?process.env[G]:void 0},global:c,getNativePromise:function oe(){if("function"==typeof Promise)try{if("[object Promise]"===_e(new Promise(function(){})))return Promise}catch{}},contextBind:function Ee(G,k){if(null===G||"function"!=typeof k||k===J)return k;null!==G.domain&&(k=G.domain.bind(k));var U=G.async;if(null!==U){var H=k;k=function(){var ee=new Array(2).concat([].slice.call(arguments));return ee[0]=H,ee[1]=this,U.runInAsyncScope.apply(U,ee)}}return k}};ge.isRecentNode=ge.isNode&&(process.versions&&process.versions.node?Re=process.versions.node.split(".").map(Number):process.version&&(Re=process.version.split(".").map(Number)),0===Re[0]&&Re[1]>10||Re[0]>0),ge.nodeSupportsAsyncResource=ge.isNode&&function(){var G=!1;try{G="function"==typeof d("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{G=!1}return G}(),ge.isNode&&ge.toFastProperties(process);try{throw new Error}catch(G){ge.lastLineError=G}s.exports=ge},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&null!==window?window.P=window.Promise:typeof Rt<"u"&&null!==Rt&&(Rt.P=Rt.Promise)},,,function(e,t,n){n.r(t);var h,re,d=n(2),s=n(1),i=n(0),u=function(){function re(){this.matrix=[],this.all=[],this.result=[],this._flipNum=0,this._flipNumX=0,this._flipNumY=0,this._tAngle=0,this._curMode=null}return re.prototype.calc3x3Matrix=function(L,y){for(var S=[],x=0;x<3;x++)for(var W=0;W<3;W++)S.push(L[3*x+0]*y[W]+L[3*x+1]*y[W+3]+L[3*x+2]*y[W+6]);return S},re.prototype.rotateMatrix=function(L,y,S){L=L/180*Math.PI;var x=Math.sin(L),W=Math.cos(L);return[W,-x,(1-W)*y+S*x,x,W,(1-W)*S-y*x,0,0,1]},re.prototype.moveMatrix=function(L,y){return[1,0,L,0,1,y,0,0,1]},re.prototype.scaleMatrix=function(L){return[L,0,0,0,L,0,0,0,1]},re.prototype.flipMatrix=function(L,y){return[1-2*Math.pow(L,2),-2*L*y,0,-2*L*y,1-2*Math.pow(y,2),0,0,0,1]},re.prototype.toCanvasMatrix=function(L){for(var y=[0,3,1,4,2,5],S=0;S<y.length;S++)y[S]=L[y[S]];return y},re.prototype.getLatestResult=function(){return 0!==this.result.length?this.result[this.result.length-1].slice():null},re.prototype.rotatePoint=function(L,y,S,x,W){return W=W/180*Math.PI,{x:(L-S)*Math.cos(W)-(y-x)*Math.sin(W)+S,y:(L-S)*Math.sin(W)+(y-x)*Math.cos(W)+x}},re.prototype.rotateRect=function(L,y,S,x,W){var j=L+S/2,ue=y+x/2,Se=this.rotatePoint(L,y,j,ue,W),De=this.rotatePoint(L+S,y,j,ue,W),K=this.rotatePoint(L+S,y+x,j,ue,W),ke=this.rotatePoint(L,y+x,j,ue,W),Xe=[De.x,Se.x,ke.x,K.x].sort(function($e,nt){return $e-nt}),et=[De.y,Se.y,ke.y,K.y].sort(function($e,nt){return $e-nt});return{x:Xe[0],y:et[0],width:Xe[3]-Xe[0],height:et[3]-et[0]}},re.prototype.calcLineEquation=function(L,y){var S=y.y-L.y,x=L.x-y.x,W=y.x*L.y-L.x*y.y,j=S*S+x*x,ue=[];return ue.push((x*x-S*S)/j,-2*S*x/j,-2*S*W/j,-2*S*x/j,(S*S-x*x)/j,-2*x*W/j,0,0,1/j),ue},re.prototype.setTransform=function(L){var y=this;this.matrix.forEach(function(S){S=y.toCanvasMatrix(S),L.transform.apply(L,S)})},re.prototype.setPointTransform=function(L,y){for(var S=[],x=0;x<this.matrix.length;x++){var W=L*(S=this.matrix[x])[0]+y*S[3],j=L*S[1]+y*S[4];L=W,y=j}return{x:L,y}},re.prototype.crop=function(L,y,S,x){this._clear();var W={type:"crop",left:L,top:y,width:S,height:x};return this.all.push(W),W},re.prototype.erase=function(L,y,S,x,W){this._clear();var j={type:"erase",left:L,top:y,width:S,height:x,color:W};return this.all.push(j),j},re.prototype.changePageSize=function(L,y){this._clear();var S={type:"changeSize",width:L,height:y};return this.all.push(S),S},re.prototype.flip=function(L){this._flipNum+=1;var y=this._tAngle/180*Math.PI,S=Math.cos(y),x=-Math.sin(y),W=-Math.sin(y),j=-Math.cos(y);this._flipNumX%2&&(W=-W,j=-j),this._flipNumY%2&&(S=-S,x=-x);var ue={x:S,y:x},Se={x:W,y:j},De={x:0,y:0},K=null;if(0===L)this._flipNumX+=1,K=this.calcLineEquation(ue,De);else{if(1!==L)return;this._flipNumY+=1,K=this.calcLineEquation(Se,De)}var ke={type:"flip",matrix:K,direction:L};this.all.push(ke),this.matrix.push(K);var Xe=this.getLatestResult();return Xe=Xe?this.calc3x3Matrix(K,Xe):K,this.result.push(Xe),ke},re.prototype.calcFlipMatrix=function(L,y){return[1-2*L*L,-2*L*y,0,-2*L*y,1-2*y*y,0,0,0,1]},re.prototype.rotate=function(L,y,S,x){var W=!1;null!==this._curMode&&(this._curMode!==x?(this._clear(),W=!1):W=!0),this._curMode=x,this._flipNum%2&&(L=-L),this._tAngle+=L;var j=L,ue=this.rotateMatrix(L,y||0,S||0);W&&(j=this._tAngle);var Se={type:"rotate",matrix:ue,mode:x,angle:L,calcAngle:j};this.all.push(Se),this.matrix.push(ue);var De=this.getLatestResult();return De=De?this.calc3x3Matrix(ue,De):ue,this.result.push(De),Se},re.prototype.translate=function(L,y){var S=this.moveMatrix(L,y);this.all.push(S),this.matrix.push(S);var x=this.getLatestResult();x=x?this.calc3x3Matrix(S,x):S,this.result.push(x)},re.prototype.calcTranslateDis=function(L,y){var S=this._tAngle/180*Math.PI,x=L*Math.cos(S),W=-L*Math.sin(S),j=y*Math.sin(S),ue=y*Math.cos(S);return this._flipNumX%2&&(j=-j,ue=-ue),this._flipNumY%2&&(x=-x,W=-W),{x:x+j,y:W+ue}},re.prototype.reset=function(){this.all=[],this._clear(),this._curMode=null},re.prototype._clear=function(){this.result=[],this.matrix=[],this._tAngle=0,this._flipNumX=0,this._flipNumY=0,this._flipNum=0},re}(),f=function(){function re(L,y){this.uid=null,this.minData=null,this.oriData=null,this.customData={},this.tags=[],this.active=!1,this.activeMin=!1,this.minTask=null,this.load=!1,this.show=[],this.overlays=[],this.img=null,this.edt=null,this.vws=[],this.oriType=null,this.minType=null,this.tempWidth=0,this.tempHeight=0,this.uid=L,this.setTempSize(y.width,y.height),this.edt=new u}return re.prototype.setTempSize=function(L,y){this.tempWidth=L,this.tempHeight=y},re.prototype.addViewer=function(L){-1===this.vws.indexOf(L)&&this.vws.push(L)},re.prototype.rmViewer=function(L){var y=this.vws.indexOf(L);-1!==y&&this.vws.splice(y,1)},re.prototype.setTags=function(L){L.length<1||(this.tags=L.slice())},re.prototype.getTags=function(){return this.tags.slice()},re}(),a=(h=function(re,L){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var x in S)S.hasOwnProperty(x)&&(y[x]=S[x])})(re,L)},function(re,L){function y(){this.constructor=re}h(re,L),re.prototype=null===L?Object.create(L):(y.prototype=L.prototype,new y)}),o=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},c=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}},l=function(re){function L(y,S,x){var W=re.call(this,S)||this;return W._db=x,W._on(i.b.APPEND_SYNC,function(j,ue){W.appendSync(j,ue)}),W._initEvent(),W}return a(L,re),L.prototype.dispose=function(){re.prototype.dispose.call(this),this._db=null},L.prototype._initEvent=function(){var y=this;this._on(i.b.UPDATE_SYNC,function(S,x,W){y.updateSync(S,x,W)}),this._on(i.b.REMOVE_PAGE,function(S,x){x.forEach(function(W){var j=y._db.getMid(W);if(j){Object(s.y)(j.oriData)&&s.a.revokeObjectURL(j.oriData),Object(s.y)(j.minData)&&s.a.revokeObjectURL(j.minData);var ue=j.img;ue&&(ue.src="",ue.onload=null,ue.onerror=null,j.img=null)}y._db.removeMid(W),y._db.getDataAsync(W).then(function(Se){Object(s.y)(Se.oriData)&&s.a.revokeObjectURL(Se.oriData),Object(s.y)(Se.minData)&&s.a.revokeObjectURL(Se.minData)}).catch(function(Se){}),y._db.removeDataAsync(W),y._db.removeMetadata(W)})}),this._on(i.b.RENAME_TAG,function(S,x,W){W.forEach(function(j){var ue=y._db.getMid(j);if(ue){var Se=ue.tags.indexOf(S);-1!==Se&&ue.tags.splice(Se,1,x)}y._db.getDataAsync(j).then(function(De){if(De.tags){var K=De.tags.indexOf(S);-1!==K&&(De.tags.splice(K,1,x),y._db.updateDataAsync(j,De).catch(function(ke){}))}}).catch(function(De){})})}),this._on(i.b.EMPTY_TAG,function(S,x,W){x.forEach(function(j){var ue=y._db.getMid(j);if(ue){var Se=ue.tags.indexOf(S);-1!==Se&&ue.tags.splice(Se,1)}y._db.getDataAsync(j).then(function(De){if(De.tags){var K=De.tags.indexOf(S);-1!==K&&(De.tags.splice(K,1),y._db.updateDataAsync(j,De).catch(function(ke){}))}}).catch(function(De){})})}),this._on(i.b.ADD_PAGE_TAG,function(S,x,W){var j=y._db.getMid(S);j&&-1===j.tags.indexOf(x)&&j.tags.push(S),y._db.getDataAsync(S).then(function(ue){ue.tags&&-1===ue.tags.indexOf(x)&&(ue.tags.push(S),y._db.updateDataAsync(S,ue).catch(function(Se){}))}).catch(function(ue){})}),this._on(i.b.REMOVE_PAGE_TAG,function(S,x,W){var j=y._db.getMid(S);if(j){var ue=j.tags.indexOf(x);-1!==ue&&j.tags.splice(ue,1)}y._db.getDataAsync(S).then(function(Se){if(Se.tags){var De=Se.tags.indexOf(x);-1!==De&&(Se.tags.splice(De,1),y._db.updateDataAsync(S,Se).catch(function(K){}))}}).catch(function(Se){})})},L.prototype.appendSync=function(y,S){if(!this._ckStr(y)||!this._ckArray(S))return[];var x=this._load(y,S);return this._ok(),x},L.prototype.insertSync=function(y,S,x){if(!this._ckStr(y)||!this._ckArray(S))return this._thrEr(i.a.PARAM_TYPE),[];if(void 0===x)return this.appendSync(y,S);var W=this._load(y,S,x);return this._ok(),W},L.prototype.updateSync=function(y,S,x){void 0===x&&(x=!0),this._emit(i.d.LOG,"Invoking DataControl#updateSync.");var W=this._db.getMid(y);if(!W)return!1;this._db.updateMetadata(y,S.metadata),S.customData&&(W.customData=S.customData),S.tags&&W.setTags(S.tags),x&&(s.a.revokeObjectURL(W.oriData),s.a.revokeObjectURL(W.minData)),W.minData=null,!W.overlays.length&&S.minData&&Object(s.y)(S.minData)&&(W.minData=S.minData),W.oriData=null,W.img=null,W.active=!1,W.activeMin=!1,W.minTask=null,W.edt.reset(),W.setTempSize(S.metadata.width,S.metadata.height),this._db.updateMid(y,W),S.tags||(S.tags=W.getTags()),S.customData||(S.customData=W.customData),this._db.updateDataAsync(y,S),this._emit(i.b.UPDATE_FOR_VIEWER,y,S)},L.prototype._load=function(y,S,x){for(var W=this,j=[],ue=[],Se=S.length,De=function(Xe){var et={uid:Object(s.I)(11),data:S[Xe]};ue.push(et),j.push(et.uid);var $e=Object.assign({},et.data.metadata);K._db.addMetadata(et.uid,$e),K._db.addDataAsync(et.uid,et.data).then(function(ct){W._emit(i.d.DB_SAVE_OK,et.uid,ct)}).catch(function(ct){W._emit(i.d.DB_SAVE_FAILED,et.uid,ct)});var nt=new f(et.uid,$e);et.data.minData&&Object(s.y)(et.data.minData)&&(nt.minData=et.data.minData),nt.customData=et.data.customData||{},nt.setTags(et.data.tags||[]),K._db.addMid(et.uid,nt)},K=this,ke=0;ke<Se;ke++)De(ke);return this._emit(i.b.LOAD_FILE,y,ue,x),ue.slice().forEach(function(Xe){W._emit(i.b.LOAD_TAG,Xe)}),j},L.prototype._convertData=function(y){return new Promise(function(S,x){if(Object(s.w)(y))S(y);else{var W=new XMLHttpRequest;W.onload=function(){var j=s.a.createObjectURL(W.response);S(j)},W.open("GET",y,!0),W.responseType="blob",W.send()}})},L.prototype.addData=function(y,S){return o(this,void 0,void 0,function(){var x=this;return c(this,function(W){switch(W.label){case 0:return this._ckStr(y)&&Object(s.w)(S)?[4,this._db.addDataAsync(y,S).then(function(j){return x._ok(),j}).catch(function(j){return x._thrEr(i.a.IMG_STORAGE_FAILED),x._err(i.a.IMG_STORAGE_FAILED.message)})]:(this._thrEr(i.a.PARAM_TYPE),[2,this._err(i.a.PARAM_TYPE.message)]);case 1:return[2,W.sent()]}})})},L.prototype.getData=function(y){return o(this,void 0,void 0,function(){var S=this;return c(this,function(x){switch(x.label){case 0:return this._ckStr(y)?[4,this._db.getDataAsync(y).then(function(W){return S._ok(),Promise.resolve(W)}).catch(function(W){return S._thrEr(i.a.IMG_NOT_EXIST),S._err(i.a.IMG_NOT_EXIST.message)})]:(this._thrEr(i.a.PARAM_TYPE),[2,this._err(i.a.PARAM_TYPE.message)]);case 1:return[2,x.sent()]}})})},L.prototype.removeData=function(y){return o(this,void 0,void 0,function(){var S=this;return c(this,function(x){switch(x.label){case 0:return this._ckStr(y)?[4,this._db.removeDataAsync(y).then(function(W){return S._ok(),W}).catch(function(W){return S._thrEr(i.a.IMG_REMOVE_FAILED),S._err(i.a.IMG_REMOVE_FAILED.message)})]:(this._thrEr(i.a.PARAM_TYPE),[2,this._err(i.a.PARAM_TYPE.message)]);case 1:return[2,x.sent()]}})})},L.prototype.updateData=function(y,S){return o(this,void 0,void 0,function(){var x=this;return c(this,function(W){switch(W.label){case 0:return this._ckStr(y)?[4,this._db.updateDataAsync(y,S).then(function(j){return x._ok(),j}).catch(function(j){return x._thrEr(i.a.IMG_NOT_EXIST),x._err(i.a.IMG_NOT_EXIST.message)})]:(this._thrEr(i.a.PARAM_TYPE),[2,this._err(i.a.PARAM_TYPE.message)]);case 1:return[2,W.sent()]}})})},L.prototype._err=function(y){return Promise.reject(new Error(y))},L.prototype._ckArray=function(y){return!!Object(s.m)(y)||(this._thrEr(i.a.PARAM_TYPE),!1)},L.prototype._ckStr=function(y){return!!Object(s.y)(y)||(this._thrEr(i.a.PARAM_TYPE),!1)},L.prototype._thrEr=function(y){this._emit(i.d.ERROR,y)},L.prototype._ok=function(){this._emit(i.d.ERROR,i.a.OK)},L}(d.a),m=function(){function re(L){this.cssWidth=0,this.cssHeight=0,this.dpr=1,this.canvas=null,this.ctx=null,this.dpr=L.dpr}return re.prototype.bind=function(L){this.canvas=L,this.ctx=L.getContext("2d"),this.ctx.imageSmoothingEnabled=!1},re.prototype.unbind=function(){this.canvas=null,this.ctx=null},re.prototype.clear=function(L,y,S,x){var W;null===(W=this.canvas)||void 0===W||W.clearRect(L,y,S,x)},re.prototype.size=function(L,y){this.cssWidth=L,this.cssHeight=y,this.innerWidth=L*this.dpr,this.innerHeight=y*this.dpr},re.prototype.dispose=function(){this.unbind()},re}(),I=(re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)},function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}),p=function(re){function L(y){var S=re.call(this,y)||this;return S.maskColor="rgba(200,200,200,0.5)",S.isMask=!0,S}return I(L,re),L.prototype.setMaskColor=function(y){this.maskColor=y},L.prototype.getMaskColor=function(){return this.maskColor},L}(m),g=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),C=function(re){function L(y){return re.call(this,y)||this}return g(L,re),L.prototype.setBackGroundColor=function(y){this.canvas.style.background=y},L}(m),_=function(){function re(){this.saveColor="#ffffff";var L=Object(s.e)();this.mainCvs=new C({dpr:L}),this.cropCvs=new p({dpr:L})}return re.prototype.updateDpr=function(L){this.mainCvs.dpr=L,this.cropCvs.dpr=L},re.prototype.bind=function(L){var y,S,x=L.main,W=L.cropper;x&&(null===(y=this.mainCvs)||void 0===y||y.bind(x)),W&&(null===(S=this.cropCvs)||void 0===S||S.bind(W))},re.prototype.unbind=function(L){"main"===L&&this.mainCvs&&(this.mainCvs.innerWidth=1,this.mainCvs.innerHeight=1,this.mainCvs.unbind()),"cropper"===L&&this.cropCvs&&(this.cropCvs.innerWidth=1,this.cropCvs.innerHeight=1,this.cropCvs.unbind())},re.prototype.setCanvasSize=function(L,y){var S,x;null===(S=this.mainCvs)||void 0===S||S.size(L,y),null===(x=this.cropCvs)||void 0===x||x.size(L,y)},re.prototype.dispose=function(){var L,y;null===(L=this.cropCvs)||void 0===L||L.dispose(),this.cropCvs=null,null===(y=this.mainCvs)||void 0===y||y.dispose(),this.mainCvs=null},re}(),v=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),T=function(re){function L(y,S){var x=re.call(this,y)||this;return x.wrapper=null,x.isVisible=!1,x.isDragging=!1,x.isStart=!1,x.startX=0,x.startTime=0,x.hideTimer=null,x.width=0,x.triggerDist=10,x.minDistanceThreshold=60,x.minTimeThreshold=300,x.pages=null,x.slideEndCallback=null,x.slidingStateChangedCallback=null,x.stateCb=null,x.touchNum=0,x.curPageUid=null,x.renderPageUid=null,x.loading=!1,x.isNew=!1,x.targetIndexes=[-1,-1,-1],x.allowDrag=!0,x.isDisposed=!1,x._db=S,x.isDisposed=!1,x.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],x._initEvent(),x}return v(L,re),L.prototype._initEvent=function(){var y=this;re.prototype._on.call(this,i.d.AFTER_RENDER,function(S){y.renderPageUid=S}),re.prototype._on.call(this,i.d.CURRENT_CHANGED,function(S){S||(y.renderPageUid=null),y.curPageUid=S})},L.prototype.setSlidePages=function(y){if(this.wrapper){for(var S=0;S<3;S++){var x=y[S];if(x.index!==this.targetIndexes[S]||x.index>-1&&""===x.url)return}this.pages=y,this.isNew=!0,this.allowDrag=!1,this.isVisible||this.showPages()}},L.prototype.showPages=function(){var y=this;if(!this.loading&&this.isNew){this.loading=!0,this.isNew=!1;var S=[];this.pages.forEach(function(x,W){var j=new Promise(function(ue,Se){var De,K,ke=null===(K=null===(De=y.wrapper)||void 0===De?void 0:De.children[W])||void 0===K?void 0:K.children[0],Xe=x.index;if(ke)if(ke.style.width=x.width+"px",ke.style.height=x.height+"px",ke.src!==x.url){if(""===x.url)return ke.src=x.url,ke.onload=null,ke.onerror=null,ue(-1);ke.onload=function(){ke.onload=null,ke.onerror=null,ue(Xe)},ke.onerror=function(){ke.onload=null,ke.onerror=null,ue(Xe)},ke.src=x.url}else ue(Xe);else Se(Xe)});S.push(j)}),Promise.all(S).then(function(x){y.allowDrag=!0;for(var W=0;W<x.length;W++)if(x[W]!==y.targetIndexes[W]){y.allowDrag=!1;break}y.loading=!1,y.showPages()}).catch(function(x){})}},L.prototype.startHandler=function(y){!this.isDragging&&this.allowDrag&&(clearTimeout(this.hideTimer),this.startTime=y.timeStamp,y.touches?(this.touchNum=y.touches.length,this.startX=y.touches[0].pageX):this.startX=y.pageX,this.isStart=!0)},L.prototype.moveHandler=function(y){var S;if(this.isStart&&!(this.touchNum>2)){var x=(y.touches?y.touches[0].pageX:y.pageX)-this.startX;if(Math.abs(x)>this.triggerDist){this.isDragging=!0,null===(S=this.stateCb)||void 0===S||S.call(this,!0),this._visible(!0);var W=this.width;x>W?x=W:x<-W&&(x=-W)}this._translateX(x)}},L.prototype.endHandler=function(y){var S=this;if(this.isStart){var x=!0;(!y||y.touches&&(this.touchNum>1||1!==y.changedTouches.length))&&(x=!1),this.isStart=!1;var W=(y=y||{}).pageX-this.startX,ue=this._calcDirection(y.timeStamp-this.startTime,W,x),Se=this;(Object(s.y)(ue)?this._oPub.emitEx("preSlide",ue):Promise.resolve(!0)).then(function(){ue&&(S.allowDrag=!1);var De=S._calcSlidingDistance(ue);Se._transition("transform 0.2s linear"),S._translateX(De),setTimeout(function(){var K;S.wrapper&&(S.isDragging=!1,null===(K=S.stateCb)||void 0===K||K.call(S,!1))},200),ue&&setTimeout(function(){var K;S.isDisposed||null===(K=S.slideEndCallback)||void 0===K||K.call(S,ue)},205),Se._hideSlide()})}},L.prototype._calcDirection=function(y,S,x){var W,j;if(x){var Se=this.pages,De=this.minDistanceThreshold,K=this.minTimeThreshold,ke=this.triggerDist;if(-1!==(null===(W=Se[0])||void 0===W?void 0:W.index)&&(S>De||y<K&&S>ke))return i.e.PREVIOUS;if(-1!==(null===(j=Se[2])||void 0===j?void 0:j.index)&&(S<-De||y<K&&S<-ke))return i.e.NEXT}return null},L.prototype._calcSlidingDistance=function(y){return y===i.e.PREVIOUS?this.width:y===i.e.NEXT?-this.width:0},L.prototype._hideSlide=function(){var y=this;this.curPageUid!==this.renderPageUid||this.pages[1].uid!==this.curPageUid||this.isDragging?(clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){y.isDisposed||y._hideSlide()},210)):(this._visible(!1),this.showPages(),this._transition(""),this._translateX(0))},L.prototype._translateX=function(y){this.wrapper&&(this.wrapper.style.transform="translateX("+y+"px)")},L.prototype._visible=function(y){this.wrapper&&(this.wrapper.style.visibility=y?"visible":"hidden"),this.isVisible=y},L.prototype._transition=function(y){this.wrapper&&(this.wrapper.style.transition=y)},L.prototype.bindSlideEndCallback=function(y){this.slideEndCallback=y},L.prototype.bind=function(y){this.wrapper=y},L.prototype.unbind=function(){this.wrapper=null},L.prototype.setSlideSize=function(y){if(!this.wrapper)return!1;y<120&&(this.minDistanceThreshold=y/2),this.width=y,this.wrapper.style.width=3*y+"px",this.wrapper.style.left=-y+"px";for(var S=0;S<3;S++)this.wrapper.children[S].style.width=y+"px"},L.prototype.dispose=function(){re.prototype.dispose.call(this),this._hideSlide(),this.unbind(),this.isDisposed=!0},L}(d.a),D=function(){function re(L,y){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=L,this.cores=navigator.hardwareConcurrency||4,this.workerBlobURL=y}return re.prototype.resize=function(L,y,S,x,W,j){return this.useWorker?this.resizeWithWorker(L,y,S,x,W,j):this.resizeWithoutWorker(L,x,W,j)},re.prototype.resizeWithoutWorker=function(L,y,S,x){var W=L.width,j=L.height;y=Math.round(y);for(var ue=j/(S=Math.round(S)),Se=L.getContext("2d"),De=[],K=2*Math.ceil(j/this.cores/2),ke=[],Xe=-1,et=0;et<this.cores;et++){var $e=Xe+1;if(!($e>=j)){var nt;Xe=$e+K-1,Xe=Math.min(Xe,j-1),nt=Math.min(K,j-$e),De[et]={},De[et].source=Se.getImageData(0,$e,W,K),De[et].target=!0,De[et].start_y=Math.ceil($e/ue),De[et].height=nt;var ct={width_source:W,height_source:De[et].height,width:y,height:Math.ceil(De[et].height/ue),core:et,source:De[et].source.data.buffer||De[et].source.data};ke[et]=ct}}for(var ut=ke.length,lt=[],It=0;It<ut;It++){for(var bt=ke[It],Dt=bt.core,wt=bt.width_source,Mt=bt.height_source,Ut=bt.width,Pt=bt.height,Zt=wt/Ut,_n=Mt/Pt,wn=Math.ceil(Zt/2),fn=Math.ceil(_n/2),Sn=new Uint8ClampedArray(bt.source),qn=Ut*Pt*4,wr=new ArrayBuffer(qn),jt=new Uint8ClampedArray(wr,0,qn),mr=0;mr<Pt;mr++)for(var Kn=0;Kn<Ut;Kn++){var er=4*(Kn+mr*Ut),Cn=0,Fr=0,Ii=0,tr=0,lo=0,Hr=0,lc=0,cc=mr*_n,dc=Math.floor(Kn*Zt),Vs=Math.ceil((Kn+1)*Zt),fc=Math.floor(mr*_n),Ge=Math.ceil((mr+1)*_n);Vs=Math.min(Vs,wt),Ge=Math.min(Ge,Mt);for(var de=fc;de<Ge;de++)for(var z=Math.abs(cc-de)/fn,X=Kn*Zt,ae=z*z,fe=dc;fe<Vs;fe++){var be=Math.abs(X-fe)/wn,Pe=Math.sqrt(ae+be*be);if(!(Pe>=1)){var We=4*(fe+de*wt);lc+=(Cn=2*Pe*Pe*Pe-3*Pe*Pe+1)*Sn[We+3],Ii+=Cn,Sn[We+3]<255&&(Cn=Cn*Sn[We+3]/250),tr+=Cn*Sn[We],lo+=Cn*Sn[We+1],Hr+=Cn*Sn[We+2],Fr+=Cn}}jt[er]=tr/Fr,jt[er+1]=lo/Fr,jt[er+2]=Hr/Fr,jt[er+3]=lc/Ii}lt.push(ct={core:Dt,target:jt})}for(var Le=0;Le<ut;Le++){var je=lt[Le],Qe=Math.ceil(De[Le].height/ue);if(De[Le].target=Se.createImageData(y,Qe),De[Le].target.data.set)De[Le].target.data.set(je.target);else for(var tt=De[Le].target.data.length,qe=0;qe<tt;qe++)De[Le].target.data[qe]=je.target[qe]}return Promise.resolve(De)},re.prototype.resizeWithWorker=function(L,y,S,x,W,j){var ue=this,Se=Math.floor(y),De=Math.floor(S);x=Math.round(x);for(var K=De/(W=Math.round(W)),ke=L.getContext("2d"),Xe=[],et=2*Math.ceil(De/this.cores/2),$e=-1,nt=0;nt<this.cores;nt++){var ct=$e+1;if(!(ct>=De)){var ut;$e=ct+et-1,$e=Math.min($e,De-1),ut=Math.min(et,De-ct),Xe[nt]={},Xe[nt].source=ke.getImageData(0,ct,Se,et),Xe[nt].target=!0;var lt=Math.ceil(ct/K);Xe[nt].start_y=lt,Xe[nt].height=ut,Xe[nt].height_part=Math.ceil((ct+ut)/K)-lt}}ke=null,L=null;var It=[],bt=function(wt){if(null==Xe[wt])return"continue";var Mt=new Worker(Dt.workerBlobURL),Ut=new Promise(function(Zt,_n){Mt.onmessage=function(wn){Mt.terminate(),Mt.onmessage=null,Mt.onerror=null,Mt=null,wn.data.taskUid!==ue.taskUid&&_n(!1);var fn=wn.data.core,Sn=Xe[fn].height_part;if(Xe[fn].target=document.createElement("canvas").getContext("2d").createImageData(x,Sn),Xe[fn].target.data.set)Xe[fn].target.data.set(wn.data.target);else for(var qn=Xe[fn].target.data.length,wr=0;wr<qn;wr++)Xe[fn].target.data[wr]=wn.data.target[wr];Zt(fn)},Mt.onerror=function(wn){Mt.terminate(),Mt.onmessage=null,Mt.onerror=null,Mt=null,_n(wn)}});It.push(Ut);var Pt={width_source:Se,height_source:Xe[wt].height,width:x,height:Xe[wt].height_part,core:wt,source:Xe[wt].source.data.buffer||Xe[wt].source.data,taskUid:j};try{Mt.postMessage(Pt,[Pt.source])}catch{Mt.postMessage(Pt)}},Dt=this;for(nt=0;nt<this.cores;nt++)bt(nt);return Promise.all(It).then(function(wt){return Promise.resolve(Xe)}).catch(function(wt){return Promise.reject(wt)})},re}(),P=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),E=function(re){function L(y,S,x,W,j,ue,Se,De){var K=re.call(this,x)||this;return K.uid=null,K.cvsOffW=0,K.cvsOffH=0,K.cvsCltW=0,K.cvsCltH=0,K.cvsInnerW=0,K.cvsInnerH=0,K.maxW=0,K.maxH=0,K.virW=0,K.virH=0,K.dpr=1,K.fitType="window",K.keepZoom=!0,K.clickZoom=!1,K.isFreeCrop=!1,K.zoom=1,K.zoomInDelta=1.2,K.zoomOutDelta=1.2,K.zoomDelta=1.2,K.scrL=0,K.scrT=0,K.disMode="single",K.opMode=0,K.curTab=null,K.curPages=[],K.iMargin=10,K.oMargin=10,K.rows=0,K.columns=0,K._mousedown=!1,K._pageX=0,K._pageY=0,K.rotateMode=1,K.saveBg="#ffffff",K.aspectRatio=0,K.keepAspectRatio=!1,K._startDistance=0,K.useWebWorker=!1,K.renderTaskUid=null,K.workerTimer=null,K.useHermite=!0,K.hermite=null,K.workerBlobURL=null,K.scrBarW=0,K.loadingTimer=null,K.allowSlide=!0,K.slide=null,K.isSliding=!1,K.zooming=!0,K.scrollX=!0,K.scrollY=!0,K.animating=!1,K.bouncing=!1,K.paging=!1,K.snapping=!1,K.animationDuration=300,K.locking=!1,K.minZoom=.01,K.maxZoom=8,K.speedDelta=1,K._outerWidth=0,K._outerHeight=0,K._innerWidth=0,K._innerHeight=0,K._outerLeft=0,K._outerTop=0,K._snapWidth=0,K._snapHeight=0,K._pullHeight=0,K._pullActive=!1,K._maxSrL=0,K._maxSrT=0,K._srL=0,K._srT=0,K._zoom=1,K._futureLeft=0,K._futureTop=0,K._futureZoom=0,K._zoomComplete=null,K._isSingleTouch=!0,K._isDecelerating=!1,K._isProcessing=!1,K._isDragging=!1,K._isAnimating=!1,K._interruptedAnimation=!1,K._position=[],K._startTouchLeft=0,K._startTouchTop=0,K._startZoom=1,K._lastTouchLeft=0,K._lastTouchTop=0,K._lastScale=1,K._enableScrollX=!0,K._enableScrollY=!0,K._fps=60,K._running={},K._counter=1,K.cropLineColor="rgba(0,0,0,1)",K.defaultCursor=null,K.isDisposed=!1,K.offScreenCanvas=De,K.uid=W,K.dpr=Object(s.e)(),K._db=S,K.fitType=y.fitType,K.maxZoom=y.maxZoom,K.minZoom=y.minZoom,K.opMode=y.opMode,K.iMargin=y.iMargin,K.scrollX=y.scrollX,K.scrollY=y.scrollY,K.zoomInDelta=y.zoomInDelta,K.zoomOutDelta=y.zoomOutDelta,K.zoomDelta=y.zoomDelta,K.zooming=y.zooming,K.useWebWorker=y.useWebWorker,K.useHermite=j,K.scrBarW=Se,K.cvsMng=new _,K.offScreenCanvas.saveColor=K.saveBg,K._initAnimation(),K._initScroller(),K.slide=new T(x,S),K.slide.stateCb=function(ke){K.isSliding=ke},K.useHermite&&(K.workerBlobURL||(K.workerBlobURL=ue),K.hermite=new D(K.useWebWorker,K.workerBlobURL)),K}return P(L,re),L.prototype.updateDpr=function(){var y=Object(s.e)();this.dpr=y,this.cvsMng.updateDpr(y),this.tabItem&&this.tabItem.chs.forEach(function(S){S.cropMng.updateDpr(y)})},L.prototype.setAllowSlide=function(y){this.allowSlide=y},L.prototype.setSlidePages=function(y){var S;null===(S=this.slide)||void 0===S||S.setSlidePages(y)},L.prototype.checkDisplay=function(y,S){if("single"===S.disMode){var x=S.getCurPage();return!(!x||y!==x.uid)}return!0},L.prototype.initGraphic=function(y){var S=y.uid;this.curPages=y.chs,S!==this.curTab&&(this.curTab=S,this.tabItem=y,this.virH=y.virH||0,this.virW=y.virW||0,this.fitType=y.fitType,this.clickZoom=y.clickZoom,this.isFreeCrop=y.isFreeCrop,this.scrL=y.scrL,this.scrT=y.scrT,this.zoom=y.zoom,this.iMargin=y.iMargin,this.oMargin=y.oMargin,this.direction=y.direction,this.disMode=y.disMode,this.opMode=y.opMode)},L.prototype.render=function(y){var S=this;if(this.tabItem){var x=this.tabItem.getCurPage();if(x&&x.uid===y){var W=this._db.getMid(y),j=W.img,ue=this.cvsMng.mainCvs.ctx;if(j&&ue){var Se=Math.round(x.style.left-this.scrL+x.style.width/2),De=Math.round(x.style.top-this.scrT+x.style.height/2),K=this.offScreenCanvas,ke={viewerUid:"",pageUid:y,isMin:!1,img:j,page:x,midData:W};K.render(ke);var Xe=K.mainCanvas,et=x.style.width/K.mainWidth,$e=Xe.width*et,nt=Xe.height*et;ue.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),ue.save(),ue.imageSmoothingEnabled=!1,ue.scale(this.dpr,this.dpr),ue.translate(Se,De),ue.drawImage(Xe,Math.round(-x.style.width/2),Math.round(-x.style.height/2),Math.round($e),Math.round(nt)),this._handleOverlay(W?.overlays||[],x,ue),ue.restore(),this.workerTimer&&clearTimeout(this.workerTimer),this.renderTaskUid=Object(s.I)(11),this.hermite&&(this.hermite.taskUid=this.renderTaskUid),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout(function(){var ct;if(S.hermite.taskUid===S.renderTaskUid&&!S.isDisposed&&S.offScreenCanvas&&!K.isDisposed&&j.naturalWidth&&j.naturalHeight){K.render(ke);var ut=document.createElement("canvas"),lt=ut.getContext("2d"),It=K.mainWidth,bt=K.mainHeight;ut.width=It,ut.height=bt,lt.drawImage(Xe,0,0),null===(ct=S.hermite)||void 0===ct||ct.resize(ut,It,bt,x.style.width*S.dpr||1,x.style.height*S.dpr||1,S.renderTaskUid).then(function(Dt){var wt=S._db.getMid(y);wt&&(ue.save(),ue.clearRect(0,0,S.cvsInnerW,S.cvsInnerH),Dt.forEach(function(Mt){var Ut=Math.round(0+(x.style.left-S.scrL)*S.dpr),Pt=Math.round(Mt.start_y+(x.style.top-S.scrT)*S.dpr);ue.putImageData(Mt.target,Ut,Pt)}),ue.scale(S.dpr,S.dpr),ue.translate(Se,De),S._handleOverlay(wt?.overlays||[],x,ue),ue.restore(),re.prototype._emit.call(S,i.d.AFTER_RENDER,y))}).catch(function(Dt){re.prototype._emit.call(S,i.d.AFTER_RENDER,y)})}},100)),"single"===this.disMode&&(this.useHermite&&this.zoom<1&&this.hermite||re.prototype._emit.call(this,i.d.AFTER_RENDER,y),re.prototype._emit.call(this,i.g.VIEWER_PAGE_RENDERED,this.tabItem.cur))}}}},L.prototype._handleOverlay=function(y,S,x){var W=this;y.forEach(function(j){S.style.width-j.width*W.zoom>0&&S.style.height-j.height*W.zoom>0&&(x.save(),x.globalAlpha=j.opacity,x.fillStyle=j.color,x.fillRect(-S.style.width/2+j.left*W.zoom,-S.style.height/2+j.top*W.zoom,Math.min(S.style.width-j.left*W.zoom,j.width*W.zoom),Math.min(S.style.height-j.top*W.zoom,j.height*W.zoom)),x.restore())})},L.prototype.drawSltBox=function(y){var S=this,x=this.cvsMng.cropCvs.ctx;x&&(x.imageSmoothingEnabled=!1,x.clearRect(0,0,this.cvsInnerW,this.cvsInnerH),x.save(),x.scale(this.dpr,this.dpr),1===this.opMode&&y.cropMng.cropBoxes.forEach(function(W){for(var j=W.probePoints.slice(0,8),ue=W.midpoints.slice(0,8),Se=0;Se<4;Se++){var De=S.toCanvasCoordinate(j[2*Se],j[2*Se+1]),K=S.toCanvasCoordinate(ue[2*Se],ue[2*Se+1]);j[2*Se]=De.x,j[2*Se+1]=De.y,ue[2*Se]=K.x,ue[2*Se+1]=K.y}var ke=S.dpr;for(x.lineWidth=W.lineWidth*ke,x.fillStyle=W.pointFillColor,x.save(),Se=0;Se<4;Se++)x.strokeStyle=S.cropLineColor,x.beginPath(),x.rect(j[2*Se]-W.sensorRadius*ke,j[2*Se+1]-W.sensorRadius*ke,2*W.sensorRadius*ke,2*W.sensorRadius*ke),x.closePath(),x.stroke(),x.fill();for(Se=0;Se<4;Se++)x.strokeStyle=S.cropLineColor,x.beginPath(),x.rect(ue[2*Se]-W.sensorRadius*ke,ue[2*Se+1]-W.sensorRadius*ke,2*W.sensorRadius*ke,2*W.sensorRadius*ke),x.closePath(),x.stroke(),x.fill();try{x.setLineDash([W.dashLine[0]*ke,W.dashLine[1]*ke])}catch{}x.strokeStyle=S.cropLineColor,x.lineWidth=W.lineWidth*ke,x.beginPath(),x.moveTo(j[0],j[1]),x.lineTo(j[2],j[3]),x.lineTo(j[4],j[5]),x.lineTo(j[6],j[7]),x.closePath(),x.stroke(),x.restore()}),x.restore())},L.prototype.clearCanvas=function(){var y=this.cvsMng.mainCvs.ctx;y&&y.clearRect(0,0,this.cvsInnerW,this.cvsInnerH)},L.prototype._layoutSingle=function(y,S,x){var W,j,ue=y.getCurPage();if(ue&&(W=this._db.getMetadata(ue.uid),j=this._db.getMid(ue.uid)),ue&&W&&j){var De=W.width,K=W.height,ke=W.width,Xe=W.height,et=null,$e=null;j.edt.all.forEach(function(Mt){if("rotate"===Mt.type){if(0===Mt.mode&&($e=Object(s.E)(0,0,ke,Xe,Mt.calcAngle)),null!==et&&et!==Mt.mode&&(ke=De,Xe=K),et=Mt.mode,$e){var Ut=$e.width,Pt=$e.height;De=Ut,K=Pt}}else("crop"===Mt.type||"changeSize"===Mt.type)&&(De=Ut=Mt.width,K=Pt=Mt.height,ke=Ut,Xe=Pt)});var nt=this._calcZoom(y,De||0,K||.1),ct=nt.zoom,It=nt.virW,bt=nt.virH;this.setCanvasSize(nt.canvasWidth,nt.canvasHeight),ue.cropMng.setZoom(ct=ct||1),this.virW=It,this.virH=bt,x||re.prototype._emit.call(this,i.f.SET_SCROLLER_SIZE,{width:this.virW,height:this.virH,x:this.scrL,y:this.scrT});var Dt=(this.cvsCltW-It)/2,wt=(this.cvsCltH-bt)/2;Dt<0&&(S&&(this._srL=Math.abs(Dt)),Dt=0),wt<0&&(S&&(this._srT=Math.abs(wt)),wt=0),ue.setBorder(y.pageBorderWidth),ue.setSize(It,bt),ue.setPosition(Dt,wt),y.virW=It,y.virH=bt,this._zoomTo(ct,!1),this.setVirtualSize(It,bt),this._zoomTo(ct,!1),x||re.prototype._emit.call(this,i.f.SET_SCROLLER_SIZE,{width:It,height:bt,x:this.scrL,y:this.scrT})}else re.prototype._emit.call(this,i.f.SET_SCROLLER_SIZE,{width:1,height:1,x:0,y:0})},L.prototype._calcZoom=function(y,S,x){return"window"===y.fitType?this._calFitWindow(S,x):"width"===y.fitType?this._calcFitWidth(S,x):"height"===y.fitType?this._calcFitHeight(S,x):this.keepZoom&&"none"===y.fitType?this._calcKeepZoom(S,x):this._calFitWindow(S,x)},L.prototype.calcZoomForSlide=function(y,S){var x=this._calFitWindow(y,S).zoom;return Math.min(Math.max(this.minZoom,x),this.maxZoom)},L.prototype._calcKeepZoom=function(y,S){var x=this.zoom,W=this.cvsOffW,j=this.cvsOffH,ue=y*x,Se=S*x;return ue>W&&(j-=this.scrBarW),Se>j&&(W-=this.scrBarW),{zoom:x,canvasWidth:W,canvasHeight:j,virW:ue,virH:Se}},L.prototype._calcFitWidth=function(y,S){var x=1,W=0,j=this.cvsOffW,ue=this.cvsOffH;return(W=S*(x=y<=this.cvsOffW?1:this.cvsOffW/y))>ue&&(W=S*(x=y<=this.cvsOffW-this.scrBarW?1:(this.cvsOffW-this.scrBarW)/y))>this.cvsOffH&&(j-=this.scrBarW),{zoom:x,canvasWidth:j,canvasHeight:ue,virW:y*x,virH:W}},L.prototype._calcFitHeight=function(y,S){var x,W=1,j=0,ue=0;return ue=this.cvsOffH,(j=y*(W=S<=this.cvsOffH?1:this.cvsOffH/S))>(x=this.cvsOffW)&&(j=y*(W=S<=this.cvsOffH-this.scrBarW?1:(this.cvsOffH-this.scrBarW)/S))>this.cvsOffW&&(ue-=this.scrBarW),{zoom:W,canvasWidth:x,canvasHeight:ue,virW:j,virH:S*W}},L.prototype._calFitWindow=function(y,S){return y<=this.cvsCltW&&S<=this.cvsCltH||y>this.cvsCltW&&S<=this.cvsCltH?this._calcFitWidth(y,S):y<=this.cvsCltW&&S>this.cvsCltH?this._calcFitHeight(y,S):y/this.cvsCltW>=S/this.cvsCltH?this._calcFitWidth(y,S):this._calcFitHeight(y,S)},L.prototype._getPage=function(y){for(var S=this.curPages.length,x=0;x<S;x++)if(this.curPages[x].uid===y)return{page:this.curPages[x],index:x}},L.prototype.setFitType=function(y){this.fitType=y,this.tabItem&&(this.tabItem.fitType=y)},L.prototype._setValidArea=function(){this.setValidArea(this.cvsCltW,this.cvsCltH,this.virW,this.virH)},L.prototype._setScrollerPosition=function(){var y=this.cvsMng.mainCvs.canvas,S={left:0,top:0,right:0,bottom:0,width:0,height:0};try{S=y.getBoundingClientRect()}catch{}this.setPosition(S.left+window.pageXOffset+y?.clientLeft||0,S.top+window.pageYOffset+y?.clientTop||0)},L.prototype.setCanvasOffsetSize=function(y,S){var x,W=!1;return this.cvsOffW===y&&this.cvsOffH===S&&(W=!0),this.cvsOffW=y,this.cvsOffH=S,this.cvsCltW=y,this.cvsCltH=S,this.cvsInnerW=y*this.dpr,this.cvsInnerH=S*this.dpr,this.cvsMng.setCanvasSize(y,S),null===(x=this.slide)||void 0===x||x.setSlideSize(y),this._setScrollerPosition(),W},L.prototype.setCanvasSize=function(y,S){this.cvsCltW=y,this.cvsCltH=S,this.cvsInnerW=y*this.dpr,this.cvsInnerH=S*this.dpr,this.cvsMng.setCanvasSize(y,S)},L.prototype.setVirtualSize=function(y,S){this.virW=y||0,this.virH=S||0,this._setValidArea()},L.prototype.setZoom=function(y){return y=Math.max(Math.min(this.maxZoom,y),this.minZoom),this.zoom=y,this.tabItem&&this.tabItem.total||(this._zoom=y),this.setFitType("none"),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages"),!0},L.prototype.getZoom=function(){return this.zoom},L.prototype.zoomTo=function(y,S,x,W){return this.zoom=y,this._zoomTo(y,S,x,W),this.setFitType("none"),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages"),this._zoom},L.prototype.scrollTo=function(y,S,x,W){this._scrollTo(y,S,!1),re.prototype._emit.call(this,"_onRender")},L.prototype.zoomIn=function(){var y=this.zoom;return this._zoomTo(y*=this.zoomInDelta,!1),this.setFitType("none"),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages"),y},L.prototype.zoomOut=function(){var y=this.zoom;return this._zoomTo(y/=this.zoomInDelta,!1),this.setFitType("none"),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages"),y},L.prototype.getMinPageData=function(){var y=document.createElement("canvas"),S=y.getContext("2d"),x=this.offScreenCanvas;y.dvsUid="useToGetMinPageData";var W=x.mainWidth,j=x.mainHeight,ue=W/j;(W>800||j>800)&&(ue>=1?j=(W=800)/ue:W=(j=800)*ue),y.width=W,y.height=j;var ke=x.mainCanvas.height*(j/x.mainHeight);S.drawImage(x.mainCanvas,0,0,Math.floor(x.mainCanvas.width*(W/x.mainWidth)),Math.floor(ke));var Xe=S.getImageData(0,0,W,j);return y.width=1,y.height=1,S.fillRect(0,0,1,1),y=null,Xe},L.prototype.setSaveBackgroundColor=function(y){this.saveBg=y,this.offScreenCanvas.saveColor=y},L.prototype.onCanvasTouchstart=function(y){var S;if(y.cancelable&&y.preventDefault(),!(y.touches[0]&&y.touches[0].target&&y.touches[0].target.tagName.match(/input|textarea|select/i))&&"single"===this.disMode&&"single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,!y.target.tagName.match(/input|textarea|select/i))){var x=y.touches[0].pageX,W=y.touches[0].pageY;if(0===this.opMode){if(this._pageX=x,this._pageY=W,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging&&(null===(S=this.slide)||void 0===S||S.startHandler(y)),this.isSliding)return;y.targetTouches.length>1&&(this._startDistance=this._calDistance(y.targetTouches)),this.startHandler(y.targetTouches,y.timeStamp)}else if(1===this.opMode){if(this.checkMouseOverPage(y)){var j=this.tabItem.getCurPage();if(!j)return;var ue=this.getMouseCoordinate(y),Se=this.toPageCoordinate(ue.x,ue.y),De=!1;!0===y.ctrlKey&&(De=!0);var K=this.tabItem.cur;null===j.cropMng.checkSelect(Se.x,Se.y)&&(De||j.cropMng.cropBoxes.length>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,K)),j.cropMng.onStartHandler(Se.x,Se.y,De)}}else 2===this.opMode&&this.checkMouseOverPage(y)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,x-this._outerLeft,W-this._outerTop),re.prototype._emit.call(this,"_onRender"))}},L.prototype.onCanvasTouchmove=function(y){var S;if("single"===this.disMode&&this.tabItem&&this.tabItem.getCurPage()&&this._mousedown){if(0===this.opMode)if(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL&&1===y.targetTouches.length)null===(S=this.slide)||void 0===S||S.moveHandler(y);else{if(this.isSliding)return;var x=1;y.targetTouches.length>1&&(x=this._calDistance(y.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",y.scale&&(x=y.scale)),this.moveHandler(y.targetTouches,y.timeStamp,x),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages")}this._mousedown=!0}},L.prototype.onCanvasTouchend=function(y){},L.prototype.onDocumentTouchend=function(y){},L.prototype.onCanvasMousedown=function(y){var S;if("single"===this.disMode&&this.tabItem&&0!==this.tabItem.total&&(this._mousedown=!0,y.cancelable&&y.preventDefault(),!y.target.tagName.match(/input|textarea|select/i)))if(0===this.opMode)this._pageX=y.pageX,this._pageY=y.pageY,this.allowSlide&&0===this._maxSrL&&0===this._maxSrT&&!this.slide.isDragging?null===(S=this.slide)||void 0===S||S.startHandler(y):this.startHandler([{pageX:y.pageX,pageY:y.pageY}],y.timeStamp);else if(1===this.opMode){if(this.checkMouseOverPage(y)){var x=this.tabItem.getCurPage();if(!x)return;var W=this.getMouseCoordinate(y),j=this.toPageCoordinate(W.x,W.y),ue=!1;!0===y.ctrlKey&&(ue=!0);var Se=this.tabItem.cur;null===x.cropMng.checkSelect(j.x,j.y)&&(ue||x.cropMng.cropBoxes.length>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,Se)),x.cropMng.onStartHandler(j.x,j.y,ue)}}else 2===this.opMode&&this.checkMouseOverPage(y)&&(this.setFitType("none"),this._setScrollerPosition(),this._zoomTo(this._zoom*this.zoomInDelta,!1,y.pageX-this._outerLeft,y.pageY-this._outerTop),re.prototype._emit.call(this,"_onRender"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages"))},L.prototype.onCanvasMousemove=function(y){this._mousedown&&y.cancelable&&y.preventDefault()},L.prototype.onCanvasMouseup=function(y){},L.prototype.onDocumentMousemove=function(y){var S;if("single"===this.disMode&&this.tabItem){var x=this.tabItem.getCurPage();if(x){var W=this.getMouseCoordinate(y),j=this.toPageCoordinate(W.x,W.y);if(this._mousedown){if(1===this.opMode){if(void 0!==this.checkMouseOverPage(y)){var ue=!1;!0===y.ctrlKey&&(ue=!0),x.cropMng.setAspectRatio(this.aspectRatio),x.cropMng.setKeepAspectRatio(!0===y.shiftKey||this.keepAspectRatio),x.cropMng.onMoveHandler(j.x,j.y,ue),re.prototype._emit.call(this,"_onRenderBoxes")}}else 0===this.opMode&&(y.touches||(this.allowSlide&&0===this._maxSrT&&0===this._maxSrL?null===(S=this.slide)||void 0===S||S.moveHandler(y):0===this._maxSrL&&0===this._maxSrT||(this.moveHandler([{pageX:y.pageX,pageY:y.pageY}],y.timeStamp),re.prototype._emit.call(this,"_onRender"))));this._mousedown=!0}else if(x.cropMng.cropBoxes.length>0){var Se=x.cropMng.checkSelectForCursor(j.x,j.y);if(null!==Se){var De=null;"move"===Se.position?De="move":"nw"!==Se.position&&"se"!==Se.position&&"ne"!==Se.position&&"sw"!==Se.position&&"e"!==Se.position&&"w"!==Se.position&&"n"!==Se.position&&"s"!==Se.position||(De=Se.position+"-resize"),re.prototype._emit.call(this,i.f.CHANGE_CANVAS_CURSOR,De)}else re.prototype._emit.call(this,i.f.CHANGE_CANVAS_CURSOR,this.defaultCursor)}}}},L.prototype._calDistance=function(y){return Math.sqrt(Math.pow(y[0].pageX-y[1].pageX,2)+Math.pow(y[0].pageY-y[1].pageY,2))},L.prototype.onDocumentMouseup=function(y){var S;if(this._mousedown){if(1===this.opMode){if(this.tabItem&&"single"===this.tabItem.disMode){var x=this.tabItem.getCurPage();if(x){x.cropMng.onEndHandler();var W=this.tabItem.cur,j=x.cropMng.getRectArr();j.length>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_SELECTED,W,j),re.prototype._emit.call(this,"_onRenderBoxes")}}}else if(0===this.opMode){if(this.clickZoom&&this._pageX===y.pageX&&this._pageY===y.pageY){var ue=this.getPosition();this._zoomTo(this.zoom*this.zoomInDelta,!1,y.pageX-ue.left,y.pageY-ue.top),re.prototype._emit.call(this,"_onRender")}this.allowSlide&&(null===(S=this.slide)||void 0===S||S.endHandler(y)),this.endHandler(y.timeStamp)}this._mousedown=!1}},L.prototype.onCanvasWheel=function(y){this.isSliding||this._onWheelHandler(y)},L.prototype.onCanvasScroll=function(y){y&&y.target&&(this._scrollTo(y.target.scrollLeft,y.target.scrollTop,!1),re.prototype._emit.call(this,"_onRender"),re.prototype._emit.call(this,"_onRenderBoxes"))},L.prototype._onWheelHandler=function(y){var S,x=0;S=y.wheelDelta?y.wheelDelta:-y.deltaY,y.ctrlKey?(y.cancelable&&y.preventDefault(),x=S>0?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(S,y.timeStamp,y.pageX,y.pageY),re.prototype._emit.call(this,"_onRender"),re.prototype._emit.call(this,"_onRenderBoxes"),0===this._maxSrL&&0===this._maxSrT&&re.prototype._emit.call(this,"_getSlidePages")):y.shiftKey?0!==this._maxSrL&&(y.cancelable&&y.preventDefault(),x=S<0?30:-30,(0!==this._srL&&x<0||this._srL!==this._maxSrL&&x>0)&&(this._scrollTo(this.scrL+x,this.scrT,!1),re.prototype._emit.call(this,"_onRender"),re.prototype._emit.call(this,"_onRenderBoxes"))):0!==this._maxSrT&&(y.cancelable&&y.preventDefault(),x=S<0?30:-30,(0!==this._srT&&x<0||this._srT!==this._maxSrT&&x>0)&&(this._scrollTo(this.scrL,this.scrT+x,!1),re.prototype._emit.call(this,"_onRender"),re.prototype._emit.call(this,"_onRenderBoxes")))},L.prototype.checkMouseOverPage=function(y){if(!this.tabItem)return!1;var S=this.tabItem.getCurPage();if(!S)return!1;var x=this.getMouseCoordinate(y),W=this.toPageCoordinate(x.x,x.y),j=W.x,ue=W.y;return j>=0&&j<=S.naturalWidth&&ue>=0&&ue<=S.naturalHeight},L.prototype.toCanvasCoordinate=function(y,S){var x=this.tabItem.getCurPage();return{x:y=y*this.zoom+x.style.left-this.scrL,y:S=S*this.zoom+x.style.top-this.scrT}},L.prototype.toPageCoordinate=function(y,S){var x=this.tabItem.getCurPage();return{x:y=(y-x.style.left+this.scrL)/this.zoom,y:S=(S-x.style.top+this.scrT)/this.zoom}},L.prototype.getMouseCoordinate=function(y){var S=this.cvsMng.mainCvs.canvas.getBoundingClientRect();return{x:(void 0!==y.clientX?y.clientX:y.changedTouches[0].clientX)-S.left,y:(void 0!==y.clientY?y.clientY:y.changedTouches[0].clientY)-S.top}},L.prototype._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},L.prototype._initScroller=function(){this.callback=function(y,S,x){this.scrL=y,this.scrT=S,this.zoom=x,this.tabItem&&(this.tabItem.scrL=y,this.tabItem.scrT=S,this.tabItem.zoom=x)}.bind(this),this._setValidArea(),this._setScrollerPosition()},L.prototype.setValidArea=function(y,S,x,W){y===+y&&(this._outerWidth=y),S===+S&&(this._outerHeight=S),x===+x&&(this._innerWidth=x),W===+W&&(this._innerHeight=W),this.calcMaxScrollValue()},L.prototype.calcMaxScrollValue=function(y){if(void 0===y&&(y=this._zoom),this.tabItem){var S,x,W=this.tabItem.getCurPage();if(W&&(S=this._db.getMetadata(W.uid),x=this._db.getMid(W.uid)),W&&S&&x){var j=S.width,ue=S.height,Se=S.width,De=S.height,K=null,ke=null;x.edt.all.forEach(function($e){if("rotate"===$e.type)0===$e.mode&&(ke=Object(s.E)(0,0,Se,De,$e.calcAngle)),null!==K&&K!==$e.mode&&(Se=j,De=ue),K=$e.mode,ke&&(j=ke.width,ue=ke.height);else if("crop"===$e.type||"changeSize"===$e.type){var ut=$e.width,lt=$e.height;j=ut,ue=lt,Se=ut,De=lt}});var et=ue*y;this._maxSrL=Math.round(Math.max(j*y-this._outerWidth,0)),this._maxSrT=Math.round(Math.max(et-this._outerHeight,0))}}},L.prototype.setPosition=function(y,S){this._outerLeft=y||0,this._outerTop=S||0},L.prototype.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},L.prototype.setSnapSize=function(y,S){this._snapWidth=y,this._snapHeight=S},L.prototype.activatePull=function(y,S,x,W){this._pullHeight=y,this._pullStart=W,this._pullActivate=S,this._pullDeactivate=x},L.prototype.emitPull=function(){this.publish(this._srL,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},L.prototype.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._srL,this._srT,!0)},L.prototype.getCurScrollValues=function(){return{scrollLeft:this._srL,scrollTop:this._srT,zoom:this._zoom}},L.prototype.getMaxScrollValues=function(){return{maxScrollLeft:this._maxSrL,maxScrollTop:this._maxSrT}},L.prototype._zoomTo=function(y,S,x,W,j){if(!this.zooming||"continuous"===this.disMode)return!1;j&&(this._zoomComplete=j),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0===x&&(x=this._outerWidth/2),void 0===W&&(W=this._outerHeight/2);var ue=this._zoom;if(y=Math.max(Math.min(y,this.maxZoom),this.minZoom),"single"===this.disMode){this.calcMaxScrollValue(y);var Se=(x+this._srL)*y/ue-x,De=(W+this._srT)*y/ue-W;return Se>this._maxSrL?Se=this._maxSrL:Se<0&&(Se=0),De>this._maxSrT?De=this._maxSrT:De<0&&(De=0),this._innerWidth<this._outerWidth&&(Se=this._maxSrL/2),this._innerHeight<this._outerHeight&&(De=this._maxSrT/2),this.publish(Se,De,y,S),!0}},L.prototype._zoomBy=function(y,S,x,W,j){return this._zoomTo(this._zoom*y,S,x,W,j)},L.prototype._scrollTo=function(y,S,x,W){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0!==W&&W!==this._zoom?this.zooming&&(y*=W,S*=W,this.calcMaxScrollValue(W)):W=this._zoom,this.scrollX?this.paging?y=Math.round(y/this._outerWidth)*this._outerWidth:this.snapping&&(y=Math.round(y/this._snapWidth)*this._snapWidth):y=this._srL,this.scrollY?this.paging?S=Math.round(S/this._outerHeight)*this._outerHeight:this.snapping&&(S=Math.round(S/this._snapHeight)*this._snapHeight):S=this._srT,y=Math.max(Math.min(this._maxSrL,y),0),S=Math.max(Math.min(this._maxSrT,S),0),y===this._srL&&S===this._srT&&(x=!1),this._isProcessing||this.publish(y,S,W,x)},L.prototype._scrollBy=function(y,S,x){this._scrollTo((this._isAnimating?this._futureLeft:this._srL)+(y||0),(this._isAnimating?this._futureTop:this._srT)+(S||0),x)},L.prototype.startHandler=function(y,S){var x,W;void 0!==y.length&&(S instanceof Date&&(S=S.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===y.length,this._isSingleTouch?(x=y[0].pageX,W=y[0].pageY):(x=Math.abs(y[0].pageX+y[1].pageX)/2,W=Math.abs(y[0].pageY+y[1].pageY)/2),this._startTouchLeft=x,this._startTouchTop=W,this._startZoom=this._zoom,this._lastTouchLeft=x,this._lastTouchTop=W,this._lastScale=1,this._lastTouchMove=S,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecComp=!1,this._isDragging=!this._isSingleTouch,this._position=[])},L.prototype.moveHandler=function(y,S,x){if(void 0!==y.length&&(S instanceof Date&&(S=S.valueOf()),this._isProcessing)){var W,j;1===y.length?(W=y[0].pageX,j=y[0].pageY):(W=Math.abs(y[0].pageX+y[1].pageX)/2,j=Math.abs(y[0].pageY+y[1].pageY)/2);var ue=this._position;if(this._isDragging){var Se=W-this._lastTouchLeft,De=j-this._lastTouchTop,K=this._srL,ke=this._srT,Xe=this._zoom;if(void 0!==x&&this.zooming){var et=Xe;if(Xe=Xe/this._lastScale*x,et!==(Xe=Math.max(Math.min(Xe,this.maxZoom),this.minZoom))){this._setScrollerPosition();var $e=W-this._outerLeft,nt=j-this._outerTop;K=($e+K)*Xe/et-$e,ke=(nt+ke)*Xe/et-nt,this.calcMaxScrollValue(Xe)}}this._enableScrollX&&((K-=Se*this.speedDelta)>this._maxSrL||K<0)&&(this.bouncing?K+=Se/2*this.speedDelta:K=Math.max(Math.min(this._maxSrL,K),0)),this._enableScrollY&&((ke-=De*this.speedDelta)>this._maxSrT||ke<0)&&(this.bouncing?(ke+=De/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&ke<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&ke>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):ke=Math.max(Math.min(this._maxSrT,ke),0)),ue.length>60&&ue.splice(0,30),ue.push(K,ke,S),this.publish(K,ke,Xe)}else{var ct=this.locking?3:0,ut=Math.abs(W-this._startTouchLeft),lt=Math.abs(j-this._startTouchTop);this._enableScrollX=this.scrollX&&ut>=ct,this._enableScrollY=this.scrollY&&lt>=ct,ue.push(this._srL,this._srT,S),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(ut>=5||lt>=5),this._isDragging&&(this._interruptedAnimation=!1)}this._lastTouchLeft=W,this._lastTouchTop=j,this._lastTouchMove=S,this._lastScale=x}},L.prototype.endHandler=function(y){if(y instanceof Date&&(y=y.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&y-this._lastTouchMove<=100){for(var S=this._position,x=S.length-1,W=x,j=x;j>0&&S[j]>this._lastTouchMove-100;j-=3)W=j;if(W!==x){var ue=S[x]-S[W],De=this._srT-S[W-1];this._decVX=(this._srL-S[W-2])/ue*(1e3/60),this._decVY=De/ue*(1e3/60),Math.abs(this._decVX)>1||Math.abs(this._decVY)>1?this._startDeceleration(y):this._scrollComp&&this._scrollComp()}else this._scrollComp&&this._scrollComp()}else y-this._lastTouchMove>100&&this._scrollComp&&this._scrollComp();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._srL,this._srT,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComp&&this._scrollComp(),this._scrollTo(this._srL,this._srT,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},L.prototype.zoomHandler=function(y,S,x,W){var j=y>0?1.05:.95;return this._setScrollerPosition(),this._zoomTo(this._zoom*j,!1,x-this._outerLeft,W-this._outerTop)},L.prototype.publish=function(y,S,x,W){var j=this;if(this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),W&&this.animating){this._futureLeft=y,this._futureTop=S,this._futureZoom=x;var ue=this._srL,Se=this._srT,De=this._zoom,K=y-ue,ke=S-Se,Xe=x-De;this._isAnimating=this._start(function(et,$e,nt){nt&&(j._srL=ue+K*et,j._srT=Se+ke*et,j._zoom=De+Xe*et,j.callback&&j.callback(y,S,x))},function(et){return j._isAnimating===et},function(et,$e,nt){$e===j._isAnimating&&(j._isAnimating=!1),(j._isDecComp||nt)&&j._scrollComp&&j._scrollComp(),j.zooming&&(j.calcMaxScrollValue(),j._zoomComplete&&(j._zoomComplete(),j._zoomComplete=null))},this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)}else this._futureLeft=this._srL=y,this._futureTop=this._srT=S,this._futureZoom=this._zoom=x,this.callback&&this.callback(y,S,x),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null))},L.prototype._easeOut=function(y){return Math.pow(y-1,3)+1},L.prototype._easeInOut=function(y){return(y/=.5)<1?.5*Math.pow(y,3):.5*(Math.pow(y-2,3)+2)},L.prototype._startDeceleration=function(y){var S=this;if(this.paging){var x=Math.max(Math.min(this._srL,this._maxSrL),0),W=Math.max(Math.min(this._srT,this._maxSrT),0),j=this._outerWidth,ue=this._outerHeight;this._minDecL=Math.floor(x/j)*j,this._minDecT=Math.floor(W/ue)*ue,this._maxDecL=Math.ceil(x/j)*j,this._maxDecT=Math.ceil(W/ue)*ue}else this._minDecL=0,this._minDecT=0,this._maxDecL=this._maxSrL,this._maxDecT=this._maxSrT;var Se=this.snapping?4:.001;this._isDecelerating=this._start(function(De,K,ke){var Xe=S._srL+S._decVX,et=S._srT+S._decVY;if(!S.bouncing){var $e=Math.max(Math.min(S._maxDecL,Xe),S._minDecL),nt=Math.max(Math.min(S._maxDecT,et),S._minDecT);$e!==Xe&&(Xe=$e,S._decVX=0),nt!==et&&(et=nt,S._decVY=0)}if(ke?S.publish(Xe,et,S._zoom):(S._srL=Xe,S._srT=et),!S.paging&&(S._decVX*=.95,S._decVY*=.95),S.bouncing){var ct=0,ut=0,lt=S.penetrationAcceleration,It=S.penetrationDeceleration;Xe<S._minDecL?ct=S._minDecL-Xe:Xe>S._maxDecL&&(ct=S._maxDecL-Xe),et<S._minDecT?ut=S._minDecT-et:et>S._maxDecT&&(ut=S._maxDecT-et),0!=ct&&(ct*S._decVX<=0?S._decVX+=ct*It:S._decVX=ct*lt),0!=ut&&(ut*S._decVY<=0?S._decVY+=ut*It:S._decVY=ut*lt)}},function(){return Math.abs(S._decVX)>=Se||Math.abs(S._decVY)>=Se||(S._isDecComp=!0,!1)},function(De,K,ke){S._isDecelerating=!1,S._scrollComp&&S._scrollComp(),S._scrollTo(S._srL,S._srT,S.snapping)})},L.prototype._stop=function(y){var S=null!=this._running[y];return S&&(this._running[y]=null),S},L.prototype._isRunning=function(y){return null!=this._running[y]},L.prototype._start=function(y,S,x,W,j){var ue=this,Se=this._time(),De=Se,K=0,ke=0,Xe=this._counter++;if(Xe%16==0){var et={};for(var $e in this._running)et[$e]=!0;this._running=et}var nt=function(ct){var ut=!0!==ct,lt=ue._time();if(!ue._running[Xe]||S&&!S(Xe))return ue._running[Xe]=null,void(x&&x(ue._fps-ke/((lt-Se)/1e3),Xe,!1));if(ut)for(var It=Math.round((lt-De)/(1e3/ue._fps))-1,bt=0;bt<Math.min(It,4);bt++)nt(!0),ke++;W&&(K=(lt-Se)/W)>1&&(K=1);var Dt=j?j(K):K;!1!==y(Dt,lt,ut)&&1!==K||!ut?ut&&(De=lt,Object(s.D)(nt)):(ue._running[Xe]=null,x&&x(ue._fps-ke/((lt-Se)/1e3),Xe,1===K||null==W))};return this._running[Xe]=!0,Object(s.D)(nt),Xe},L.prototype.dispose=function(){var y,S;re.prototype.dispose.call(this),this._db=null,null===(y=this.cvsMng)||void 0===y||y.dispose(),this.cvsMng=null,null===(S=this.slide)||void 0===S||S.dispose(),this.slide=null,this.hermite=null,this.offScreenCanvas=null,this.isDisposed=!0},L}(d.a),M=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),O=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},R=function(re){function L(y,S){var x=re.call(this,S)||this;return x.uid=null,x._tbPub=null,x._size=null,x._mouseShape="pointer",x._direction="vertical",x._sequence=-1,x._location="horizontal",x._showThb=!0,x._showPNum=!1,x._multipleMode=!1,x._showSltBox=!1,x._showRmBtn=!1,x._fullThb=!1,x._dragging=!0,x._resizing=!0,x._keyboard=!1,x._rows=4,x._columns=1,x._bg="rgba(67,66,70,1)",x._border="1px solid rgba(27,27,29,1)",x._pageBg="rgba(0,0,0,0)",x._pageBorder="1px solid rgba(128,128,128,1)",x._sltPBg="rgba(127,133,251,1)",x._sltPBorder="1px solid rgba(255,0,0,1)",x._hvPBg="rgba(196,250,248,1)",x._hvPBorder="1px solid rgba(255,255,0,1)",x._placeholderBg="rgba(255,192,203,1)",x._pageMargin=10,x._autoChangeIdx=!1,x.uid=Object(s.I)(11),x._tbPub=new d.a,x.init(y),x._tbPub._on(i.d.CHANGE_THUMBNAIL_VIEW_PROP,function(W){for(var j in W)x[j]=W[j]}),x}return M(L,re),L.prototype.init=function(y,S){var x=this;void 0===S&&(S=[]),Object.keys(y).forEach(function(W){var j=x[W];j!==y[W]&&(x[W]=y[W],j===x[W]&&S.push(W))})},L.prototype._err=function(y){this._emit(i.d.ERROR,y)},L.prototype._ok=function(){this._emit(i.d.ERROR,i.a.OK)},Object.defineProperty(L.prototype,"size",{get:function(){return this._size},set:function(y){Object(s.x)(y)?(this._size=y,this._notifyUi({size:y}),this._ok()):this._err(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"mouseShape",{get:function(){return this._mouseShape},set:function(y){Object(s.y)(y)?(this._mouseShape=y,this._notifyUi({mouseShape:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pubsub",{get:function(){return this._tbPub.getPublishSubscribe()},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"scrollDirection",{get:function(){return this._direction},set:function(y){Object(s.y)(y)?(this._direction=y,this._notifyUi({scrollDirection:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"sequence",{get:function(){return this._sequence},set:function(y){Object(s.v)(y)?(this._sequence=y,this._notifyUi({sequence:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"location",{get:function(){return this._location},set:function(y){Object(s.y)(y)?(this._location=y,this._notifyUi({location:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showThumbnail",{get:function(){return this._showThb},set:function(y){Object(s.n)(y)?(this._showThb=y,this._notifyUi({showThumbnail:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showPageNumber",{get:function(){return this._showPNum},set:function(y){Object(s.n)(y)?(this._showPNum=y,this._notifyUi({showPageNumber:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"multipleMode",{get:function(){return this._multipleMode},set:function(y){Object(s.n)(y)?(this._multipleMode=y,this._notifyUi({multipleMode:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showSelectBox",{get:function(){return this._showSltBox},set:function(y){Object(s.n)(y)?(this._showSltBox=y,this._notifyUi({showSelectBox:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showRemoveBtn",{get:function(){return this._showRmBtn},set:function(y){Object(s.n)(y)?(this._showRmBtn=y,this._notifyUi({showRemoveBtn:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"fullThumbnail",{get:function(){return this._fullThb},set:function(y){Object(s.n)(y)?(this._fullThb=y,this._notifyUi({fullThumbnail:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"rows",{get:function(){return this._rows},set:function(y){Object(s.v)(y)?y<=0?this._err(i.a.PARAMETER_RANGE):(this._rows=y,this._notifyUi({rows:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"columns",{get:function(){return this._columns},set:function(y){Object(s.v)(y)?y<=0?this._err(i.a.PARAMETER_RANGE):(this._columns=y,this._notifyUi({columns:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"background",{get:function(){return this._bg},set:function(y){Object(s.p)(y)?(this._bg=y,this._notifyUi({background:y}),this._ok()):this._err(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"border",{get:function(){return this._border},set:function(y){Object(s.o)(y)?(this._border=y,this._notifyUi({border:y}),this._ok()):this._err(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageBackground",{get:function(){return this._pageBg},set:function(y){Object(s.p)(y)?(this._pageBg=y,this._notifyUi({pageBackground:y}),this._ok()):this._err(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageBorder",{get:function(){return this._pageBorder},set:function(y){Object(s.o)(y)?(this._pageBorder=y,this._notifyUi({pageBorder:y}),this._ok()):this._err(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectedPageBackground",{get:function(){return this._sltPBg},set:function(y){Object(s.p)(y)?(this._sltPBg=y,this._notifyUi({selectedPageBackground:y}),this._ok()):this._err(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectedPageBorder",{get:function(){return this._sltPBorder},set:function(y){Object(s.o)(y)?(this._sltPBorder=y,this._notifyUi({selectedPageBorder:y}),this._ok()):this._err(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"hoverPageBackground",{get:function(){return this._hvPBg},set:function(y){Object(s.p)(y)?(this._hvPBg=y,this._notifyUi({hoverPageBackground:y}),this._ok()):this._err(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"hoverPageBorder",{get:function(){return this._hvPBorder},set:function(y){Object(s.o)(y)?(this._hvPBorder=y,this._notifyUi({hoverPageBorder:y}),this._ok()):this._err(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"placeholderBackground",{get:function(){return this._placeholderBg},set:function(y){Object(s.p)(y)?(this._placeholderBg=y,this._notifyUi({placeholderBackground:y}),this._ok()):this._err(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageMargin",{get:function(){return this._pageMargin},set:function(y){Object(s.x)(y)?(this._pageMargin=y,this._notifyUi({pageMargin:y}),this._ok()):this._err(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowPageDragging",{get:function(){return this._dragging},set:function(y){Object(s.n)(y)?(this._dragging=y,this._notifyUi({allowPageDragging:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowResizing",{get:function(){return this._resizing},set:function(y){Object(s.n)(y)?(this._resizing=y,this._notifyUi({allowResizing:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowKeyboardControl",{get:function(){return this._keyboard},set:function(y){Object(s.n)(y)?(this._keyboard=y,this._notifyUi({allowKeyboardControl:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"autoChangeIndex",{get:function(){return this._autoChangeIdx},set:function(y){Object(s.n)(y)?(this._autoChangeIdx=y,this._notifyUi({autoChangeIndex:y}),this._ok()):this._err(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),L.prototype.scrollTo=function(y){this.emit(i.f.SCROLL_TO,y,!1)},L.prototype.setViewMode=function(y,S){return Object(s.v)(y)&&Object(s.v)(S)?y<0||S<0?(this._err(i.a.PARAMETER_RANGE),!1):(this._rows=S,this._columns=y,this.emit(i.f.SET_VIEW_MODE,y,S),!0):(this._err(i.a.PARAM_TYPE),!1)},L.prototype.getConfig=function(){return{pubsub:this._tbPub.getPublishSubscribe(),uid:this.uid,size:this.size,mouseShape:this.mouseShape,scrollDirection:this.scrollDirection,sequence:this.sequence,location:this.location,showThumbnail:this.showThumbnail,showPageNumber:this.showPageNumber,showSelectBox:this.showSelectBox,showRemoveBtn:this.showRemoveBtn,fullThumbnail:this.fullThumbnail,allowPageDragging:this.allowPageDragging,allowResizing:this.allowResizing,allowKeyboardControl:this.allowKeyboardControl,autoChangeIndex:this.autoChangeIndex,rows:this.rows,columns:this.columns,background:this.background,border:this.border,pageBackground:this.pageBackground,pageBorder:this.pageBorder,selectedPageBackground:this.selectedPageBackground,selectedPageBorder:this.selectedPageBorder,hoverPageBackground:this.hoverPageBackground,hoverPageBorder:this.hoverPageBorder,placeholderBackground:this.placeholderBackground,pageMargin:this.pageMargin}},L.prototype.on=function(y,S){return Object(s.y)(y)&&Object(s.s)(S)?(this._tbPub._on(y,S),!0):(this._err(i.a.PARAM_TYPE),!1)},L.prototype.emit=function(y){for(var S,x=[],W=1;W<arguments.length;W++)x[W-1]=arguments[W];return Object(s.y)(y)?((S=this._tbPub)._emit.apply(S,O([y],x)),!0):(this._err(i.a.PARAM_TYPE),!1)},L.prototype.off=function(y,S){return Object(s.y)(y)?(this._tbPub._off(y,S),!0):(this._err(i.a.PARAM_TYPE),!1)},L.prototype._notifyUi=function(y){this.emit(i.f.UPDATE_THUMBNAIL_PROP,y)},L.prototype.dispose=function(){var y;re.prototype.dispose.call(this),null===(y=this._tbPub)||void 0===y||y.dispose(),this._tbPub=null},L}(d.a),F=n(3),B=function(){function re(L,y){this._db=null,this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropMng=null,this.editor2d=null,this._db=y,this.uid=L.uid,this.naturalWidth=L.naturalW,this.naturalHeight=L.naturalH,this.cropMng=new F.a(this.naturalWidth,this.naturalHeight),this.editor2d=new u}return re.prototype.setBorder=function(L,y,S){this.style.borderWidth=L,y&&(this.style.borderType=y),S&&(this.style.borderColor=S)},re.prototype.setSize=function(L,y){this.style.width=L||1,this.style.height=y||1},re.prototype.setPosition=function(L,y){this.style.left=L,this.style.top=y},re.prototype.clearSelectionBoxes=function(){this.selectionBoxes=[]},re.prototype.pushSelectionBox=function(L){this.selectionBoxes.push(L)},re.prototype.setNaturalSize=function(L,y){var S=this._db.getMid(this.uid);S&&(S.tempWidth=L,S.tempHeight=y),this.naturalWidth=L,this.naturalHeight=y,this.cropMng.setPageSize(L,y)},re.prototype.boxCount=function(){return this.cropMng.cropBoxes.length},re}(),b=function(){function re(L){this.uid=L.uid,this.chs=L.chs||[]}return re.prototype.append=function(L){return-1===this._idxOf(L)&&(this.chs.push(L),!0)},re.prototype.insert=function(L,y){return!(y<0||y>=this.chs.length||(this.chs.splice(y,0,L),0))},re.prototype.remove=function(L){var y=this._idxOf(L);return-1!==y&&(this.chs.splice(y,1),!0)},re.prototype.clear=function(){return this.chs=[],!0},re.prototype.move=function(L,y){if(L===y)return!0;var S=this.chs.splice(L,1)[0];return this.chs.splice(y,0,S),!0},re.prototype.switch=function(L,y){if(L===y)return!0;var S=this.chs[L];return this.chs[L]=this.chs[y],this.chs[y]=S,!0},re.prototype.reorder=function(L){var y=L.length,S=[],x=0;if(this.chs.length!==y||0===y)return!1;for(var W=0;W<y;W++)L[W]===W&&x++;if(x===y)return!0;for(var j=0;j<y;j++)S[j]=this.chs[L[j]];for(var ue=0;ue<y;ue++)this.chs[ue]=S[ue];return!0},re.prototype._idxOf=function(L){for(var y=Object(s.y)(L),S=0,x=this.chs.length;S<x;S++)if(y&&this.chs[S]===L||!y&&this.chs[S].uid===L.uid)return S;return-1},re}(),A=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),N=function(re){function L(y){var S=re.call(this,y)||this;return S.cur=-1,S.total=0,S.slt=[],S.chs=[],S.thbs=[],S.scrL=0,S.scrT=0,S.virW=0,S.virH=0,S.iMargin=0,S.oMargin=0,S.zoom=1,S.fitType="window",S.clickZoom=!1,S.isFreeCrop=!1,S.disMode="single",S.opMode=0,S.name=y.name,S.type=y.type,S.chs=y.chs,S.zoom=y.zoom,S.fitType=y.fitType,S.disMode=y.disMode,S.opMode=y.opMode,S}return A(L,re),L.prototype.getCurUid=function(){return-1===this.cur?null:this.chs[this.cur].uid},L.prototype.getCurPage=function(){return-1===this.cur?null:this.chs[this.cur]},L.prototype.idxPage=function(y){return this.chs[y]},L.prototype.uidPage=function(y){if(!y)return null;for(var S=0;S<this.total;S++)if(this.chs[S].uid===y)return this.chs[S];return null},L.prototype.uid2Idx=function(y){for(var S=0;S<this.total;S++)if(this.chs[S].uid===y)return S;return-1},L.prototype.setCur=function(y){return!(y<0||y>=this.total||(this.cur=y,0))},L.prototype.append=function(y){return this.chs.push(y),!0},L.prototype.remove=function(y){var S=this.chs.length;if(0===S)return!1;if(1===S)return this.chs[0].uid===y&&(this.cur=-1,this.total=0,this.slt=[],this.chs=[],!0);var x=this.uid2Idx(y);return-1!==x&&((x===this.cur&&x===this.total-1||x<this.cur)&&this.cur--,this.chs.splice(x,1),this.slt=this.chs[this.cur]?[this.chs[this.cur].uid]:[],this.total--,!0)},L.prototype.clear=function(){return this.chs=[],this.slt=[],this.cur=-1,this.total=0,!0},L.prototype.getSlt=function(){return this.slt.slice()},L.prototype.setSlt=function(y){var S=y.length;if(0===S)return this.slt=y,this.cur=-1,!0;var x=this.uid2Idx(y[S-1]);return-1!==x&&(this.slt=y,this.cur=x,!0)},L.prototype.move=function(y,S){return re.prototype.move.call(this,y,S),this.setSlt([this.chs[S].uid])},L.prototype.switch=function(y,S){return re.prototype.switch.call(this,y,S),this.cur===y?this.setSlt([this.chs[S].uid]):this.cur===S&&this.setSlt([this.chs[y].uid]),!0},L.prototype.next=function(){return 0===this.total?-1:(this.total-this.cur>1&&this.cur<this.total&&this.cur++,this.slt=[this.chs[this.cur].uid],this.cur)},L.prototype.prev=function(){return 0===this.total?-1:(this.cur>0&&this.cur--,this.cur<0?-1:(this.slt=[this.chs[this.cur].uid],this.cur))},L.prototype.first=function(){return 0===this.total?-1:(this.cur=0,this.slt=[this.chs[0].uid],0)},L.prototype.last=function(){return 0===this.total?-1:(this.cur!==this.total-1&&(this.cur=this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},L.prototype.goto=function(y){return 0===this.total?-1:(y!==this.cur&&(this.cur=y=y<this.total?y>=0?y:0:this.total-1),this.slt=[this.chs[this.cur].uid],this.cur)},L}(b),Y=function(){function re(L){this.tabs=[],this.mode="single",this.curTab=null,this.dfConfig=null,this._opStack=[],this.tabs=[],this.dfConfig={zoom:1,fitType:"window",disMode:"single",opMode:0}}return re.prototype.addTab=function(L){var y=this.checkTab(L.uid),S=null;if(-1!==y)S=this.tabs[y];else{var x=Object.assign(this.dfConfig,L);S=new N(x),"single"===this.mode?this.tabs=[S]:this.tabs.push(S)}return S},re.prototype.getTab=function(L){var y=this.checkTab(L);return-1===y?null:this.tabs[y]},re.prototype.checkTab=function(L){for(var y=this.tabs.length,S=0;S<y;S++)if(this.tabs[S].uid===L)return S;return-1},re.prototype.getCurTab=function(){return this.getTab(this.curTab)},re.prototype.setCurTab=function(L){if(~this.checkTab(L))return this.curTab=L,!0},re.prototype._moveToTop=function(L,y){if(y>=0&&y<L.length){var S=L.splice(y,1)[0];L.push(S)}},re.prototype.closeTab=function(L){var y=this.checkTab(L);return-1!==y&&(this._opStack.pop(),this.tabs.splice(y,1),this.curTab=0===this.tabs.length?null:this._opStack[this._opStack.length-1],!0)},re.prototype.setMode=function(L){return("single"===L||"multiple"===L)&&(this.mode=L,!0)},re.prototype.removePage=function(L,y){var S=this.checkTab(L);return-1!=S&&this.tabs[S].remove(y)},re.prototype.dispose=function(){},re}(),ne=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),Ie=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},_e=function(re){function L(y,S,x,W,j,ue,Se,De,K){var ke=re.call(this,S)||this;return ke.showLatest=!0,ke.isMainViewVisible=!0,ke.isThumbnailVisible=!0,ke.thbViews=[],ke.tabMode="single",ke.autoOpen=!0,ke.keepZoom=!0,ke.cors=!0,ke.minPicWidth=800,ke.minPicHeight=800,ke.saveType="image/jpeg",ke.saveQuality=1,ke.useHermite=!0,ke.rows=1,ke.columns=1,ke.slideTimer=null,ke.showTabTimer=null,ke.isDisposed=!1,ke.saveCanvas=K,ke.uid=W,ke._mPub=new d.a(x),ke._db=Se,ke._tabMng=new Y(y),(Object(s.t)()||Object(s.u)())&&(ke.useHermite=!1),ke._gpc=new E(y,ke._db,ke._oPub,W,ke.useHermite,j,ue,De),ke._initEvent(),ke._gpc.slide.bindSlideEndCallback(function(Xe){Xe===i.e.PREVIOUS?ke.prevPage():Xe===i.e.NEXT&&ke.nextPage(),re.prototype._emit.call(ke,"slideFinished",Xe),ke.setFitType("window")}),ke}return ne(L,re),L.prototype.setUseHermite=function(y){this.useHermite=y,this._gpc.useHermite=y},L.prototype.drawSltBox=function(){if("single"===this._gpc.disMode){var y=this._tabMng.getCurTab();if(y){var S=y.getCurPage();S&&this._gpc.drawSltBox(S)}}},L.prototype.render=function(y,S){y=y||!1,S=S||!1;var x=this._tabMng.getCurTab();if(!x)return!1;this._gpc._layoutSingle(x,y,S);var W=x.getCurPage();return W?(this._checkDisplay(x),this._showPage(W.uid,x.uid),this._ok(),!0):(this._gpc.clearCanvas(),this._err(i.a.PAGE_NOT_EXIST),!1)},L.prototype.tabHandler=function(y,S,x){var W=this;void 0===S&&(S=null);var j=y.chs,ue=j.length,Se=null,De=0,K=this.getTab(y.uid),ke=this.getCurTab();if(ke&&!K&&"single"===this.tabMode&&x&&this._emitM(i.b.REMOVE_VIEWER_UID,ke.uid,this.uid),!ke||!K&&x)(K=this._tabMng.addTab({uid:y.uid,name:y.name,type:y.type,chs:[]})).total=ue,K.cur=this.showLatest?ue-1:ue>0?0:-1,Se=K;else{if(!K)return this._emitM(i.b.REMOVE_VIEWER_UID,y.uid,this.uid),null;De=ue-K.chs.length,j=y.chs.slice(K.total),K.total=ue,(ke.uid===K.uid||x)&&(Se=K)}if(null!==S&&(j=y.chs.slice(S,S+De)),this.showLatest?(this.clearBox(),K.cur=null!==S?S+De-1:ue-1):ue>0&&-1===K.cur&&(K.cur=0),j.forEach(function(et,$e){var nt=W._db.getMetadata(et);if(nt){var ct=new B({uid:et,naturalW:nt.width,naturalH:nt.height},W._db);null!==S?K.insert(ct,S+$e):K.append(ct)}}),this.showLatest){var Xe=K.idxPage(K.cur);Xe&&K.setSlt([Xe.uid])}return Se},L.prototype.showTab=function(y,S){var x=this;void 0===S&&(S="add"),null!==this.showTabTimer&&clearTimeout(this.showTabTimer);var W=y.uid;this._tabMng.setCurTab(W),re.prototype._emit.call(this,i.f.TAB_CHANGED,{tabId:this._tabMng.curTab,tabs:this._tabMng.tabs}),this._showAllThb(y),this._gpc.initGraphic(y),(!y.total||y.cur<0)&&this._gpc.clearCanvas(),this._gpc._layoutSingle(y,!0),("remove"!=S||y.total)&&(this.showTabTimer=setTimeout(function(){x.isDisposed||(x._checkDisplay(y),y.chs.length||x._gpc.offScreenCanvas.reset(),y.chs.forEach(function(j){x._showPage(j.uid,W)}))},20),this.getSlidePages()),this.__slt([y.cur]),this.__buffer(y,S),this.__pager()},L.prototype.onTabChanged=function(){re.prototype._emit.call(this,i.f.TAB_CHANGED,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},L.prototype.updateSync=function(y,S,x){var W=this,j=null;if(!(j=S?this.getTab(S):this.getCurTab()))return this._err(i.a.IMG_NOT_EXIST),!1;for(var ue=j.chs,Se=new B({uid:y,naturalW:x.metadata.width||0,naturalH:x.metadata.height||0},this._db),De=null,K=0;K<ue.length;K++)if(ue[K].uid===y){De=ue[K],ue[K]=Se;break}if(this._tabMng.curTab===j.uid){j.getCurUid()===y&&this._gpc.offScreenCanvas.reset();var ke=!0;De.naturalHeight===Se.naturalHeight&&De.naturalWidth===Se.naturalWidth&&(ke=!1),this._gpc._layoutSingle(j,ke),this._gpc.initGraphic(j),this._checkDisplay(j),ue.forEach(function(Xe){W._showPage(Xe.uid,j.uid,!0)}),this.getSlidePages(),this.__buffer(j,"modify")}},L.prototype.setTabMode=function(y){-1!==["single","multiple"].indexOf(y)&&(this.tabMode=y)},L.prototype.getSlidePages=function(){var y=this,S=this._tabMng.getCurTab();if(S&&"continuous"!==S.disMode){null!==this.slideTimer&&clearTimeout(this.slideTimer);var x=S.cur,W=S.total,j=[],ue=[-1,-1,-1];0!==W&&(x-1>=0?(j.push(x-1),ue[0]=x-1):ue[0]=-1,j.push(x),ue[1]=x,x+1<W?(j.push(x+1),ue[2]=x+1):ue[2]=-1),this._gpc&&this._gpc.slide&&(this._gpc.slide.targetIndexes=ue),this.slideTimer=setTimeout(function(){y.isDisposed||j.forEach(function(Se){var De=y.idxUid(Se);y._emitM(i.b.LOAD_PAGE,De)})},200)}},L.prototype._setSlidePages=function(y){var S=this,x=this.getCurTab();if(!this.isDisposed&&x&&"single"===x.disMode){var W=x.cur,j=x.total,ue=[-1,-1,-1];if(0!==j&&(W-1>=0&&(ue[0]=W-1),ue[1]=W,W+1<j&&(ue[2]=W+1)),!(ue.indexOf(y)<0)){var Se=ue.map(function(De){return S._calcSlidePage(De,W,x)});this._gpc.setSlidePages(Se)}}},L.prototype._calcSlidePage=function(y,S,x){var W={width:0,height:0,index:-1,uid:null,url:""};if(-1===y)return W;var j=this.idxUid(y),ue=this._db.getMid(j),Se=x.idxPage(y);if(!ue||!Se)return W;var De=Se.style.width,K=Se.style.height;if(y!==S){var ke=this._gpc.calcZoomForSlide(Se.naturalWidth||1,Se.naturalHeight||1);De=(Se.naturalWidth||0)*ke,K=(Se.naturalHeight||0)*ke}return{width:De,height:K,index:y,uid:j,url:ue.minData||""}},L.prototype._showAllThb=function(y,S){var x=this,W=y.chs||[],j=y.uidPage(S);j&&(W=[j]);var ue=[];W.forEach(function(Se){var De=x._db.getMid(Se.uid),K={uid:Se.uid,data:De.minData,tags:De.getTags()};ue.push(K)}),re.prototype._emit.call(this,i.f.THUMBNAIL_CHANGED,ue)},L.prototype.showThbItem=function(y){var S=this.getCurTab();if(S){var x=S.uidPage(y),W=this._db.getMid(y);if(x&&W){var j={uid:y,data:W.minData,tags:W.getTags()};re.prototype._emit.call(this,i.f.UPDATE_THB_ITEM,j);var ue=S.uid2Idx(y);this._setSlidePages(ue)}}},L.prototype.needRender=function(y){if(!this._db)return!1;var S=this._db.getMid(y);return!(!S||S.show.indexOf(this.uid)<0)},L.prototype.renderMainPage=function(y){this.needRender(y)&&this._db.getMid(y).img&&this._gpc.render(y)},L.prototype._showPage=function(y,S,x){var W=this;if(S===this._tabMng.curTab&&this.needRender(y)){var j=this._db.getMid(y);if(x||!j.img)return x||!j.active?(j.active=!0,void this._db.getDataAsync(y).then(function(ue){if(W.needRender(y)){var Se=s.a.createURLWithType(ue.oriData);j.oriData=Se.data,j.oriType=Se.type;var De=new Image;W.cors&&(De.crossOrigin="anonymous"),De.onload=function(){if(De.onload=null,De.onerror=null,!W.isDisposed&&W.needRender(y)){if(x){if(!W._gpc)return;W._gpc.offScreenCanvas.reset()}j.img=De,W._emitM("dvsRenderMainPage",j.show.slice(),y)}},De.onerror=function(){De.onload=null,De.onerror=null},De.src=j.oriData}}).catch(function(ue){j.active=!1})):void 0;null==this||this._gpc.render(y)}},L.prototype._checkDisplay=function(y){var S=this;if("single"===y.disMode){var x=y.chs;if(!y.getCurPage())return;x.forEach(function(W,j){var ue=S._db.getMid(W.uid);if(ue){var Se=S._gpc.checkDisplay(W.uid,y),De=ue.show,K=De.indexOf(S.uid);Se?K<0&&De.push(S.uid):(K>-1&&De.splice(K,1),0===De.length&&("object"===ue.oriType&&s.a.revokeObjectURL(ue.oriData),ue.active=!1,ue.load=!1,ue.img=null,ue.oriData=null))}})}},L.prototype.getTabManager=function(){return this._tabMng},L.prototype.closeTab=function(y){if(this._tabMng.closeTab(y)){if(this._tabMng.curTab)this.showTab(this._tabMng.getCurTab(),"add");else{var S=new N({uid:"",name:"empty",type:"",chs:[]});this.showTab(S,"remove")}return re.prototype._emit.call(this,"_onCloseTab",y),!0}return!1},L.prototype.closeCurTab=function(){},L.prototype.emptyTab=function(y){},L.prototype.getCurrentTabId=function(){return this._tabMng.curTab},L.prototype.getTab=function(y){return this._tabMng.getTab(y)},L.prototype.getCurTab=function(){return this._tabMng?this._tabMng.getCurTab():null},L.prototype.getCurPageUids=function(){var y=this.getCurTab();return y?y.chs.map(function(S){return S.uid}):[]},L.prototype.getCurPageCount=function(){var y=this.getCurTab();return y?y.total:0},L.prototype.createThumbnailView=function(y){void 0===y&&(y={});var S=new R(y,this._mPub.getPublishSubscribe());return this.thbViews.push(S),S},L.prototype.removeThumbnailView=function(y){if(!y)return this.thbViews=[],!0;for(var S=0;S<this.thbViews.length;S++)if(this.thbViews[S].uid===y)return this.thbViews.splice(S,1),!0;return!1},L.prototype.getThumbnailViewById=function(y){if(!this._chStr(y))return null;for(var S=0;S<this.thbViews.length;S++)if(this.thbViews[S].uid===y)return this._ok(),this.thbViews[S];return null},L.prototype.remove=function(y,S,x){if(void 0===S&&(S=!0),!Object(s.m)(y))return this._err(i.a.PARAM_TYPE),!1;var W=this._tabMng.tabs;y.forEach(function(ue){W.forEach(function(Se){Se.remove(ue)})});var j=this.getCurTab();return j?(x&&x!==j.uid||(this.showTab(j,"remove"),0===j.chs.length&&(this._setSlidePages(-1),this._gpc.clearCanvas(),re.prototype._emit.call(this,i.f.SET_SCROLLER_SIZE,{width:1,height:1,x:1,y:1}))),S&&this._emitM(i.b.REMOVE_PAGE,this.uid,j,y),this._ok(),!0):void 0},L.prototype.rmAll=function(y){void 0===y&&(y=!0);var S=[],x=this.getCurTab();return x?(x.chs.forEach(function(W){S.push(W.uid)}),this.remove(S,y,x.uid)):(this._ok(),!0)},L.prototype.setBox=function(y,S){var x=this.getCurTab();if(!x)return!1;var W=x.getCurPage();if(void 0===W)return!1;var j=null;Object(s.m)(y)?j=y:Object(s.w)(y)&&(j=[y]),S||W.boxCount()>0&&(W.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,x.cur));for(var ue=j.length,Se=0;Se<ue;Se++){var De=j[Se];if(!this._chBox(De,W.naturalWidth,W.naturalHeight))return!1;W.cropMng.addBox([De.left,De.top,De.left+De.width,De.top,De.left+De.width,De.top+De.height,De.left,De.top+De.height],"bottomRight")}this.drawSltBox();var K=W.cropMng.getRectArr();return K.length>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_SELECTED,x.cur,K),this._ok(),!0},L.prototype._chBox=function(y,S,x){return Object(s.v)(y.left)&&Object(s.v)(y.top)&&Object(s.v)(y.width)&&Object(s.v)(y.height)?y.left<0||y.top<0||y.width<0||y.height<0?(this._err(i.a.PARAMETER_RANGE),!1):!(y.left>S||y.top>x||y.left+y.width>S||y.top+y.height>x)||(this._err(i.a.PARAMETER_RANGE),!1):(this._err(i.a.PARAMETER_INVALID),!1)},L.prototype.clearBox=function(y){var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),!1;var x=S.getCurPage();return x?(x.boxCount()>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur),x.cropMng.removeBox(y),this.drawSltBox(),this._ok(),!0):(this._err(i.a.PAGE_NOT_EXIST),!1)},L.prototype._clearBox=function(){var y=this.getCurTab();if(!y)return!1;var S=y.getCurPage();return void 0===S?(this._err(i.a.PAGE_NOT_EXIST),!1):(S.boxCount()>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,y.cur),S.cropMng.removeBox(),re.prototype._emit.call(this,i.d.CLEAR_SLT_BOX,y.cur),!0)},L.prototype.setFreeBox=function(y){var S=this.getCurTab();if(!S)return!1;var x=S.getCurPage();if(void 0===x)return!1;x.cropMng.addFreeBox(y),this.drawSltBox();var W=x.cropMng.getRectArr();return W.length>0&&re.prototype._emit.call(this,i.g.PAGE_AREA_SELECTED,S.cur,W),this._ok(),!0},L.prototype.nextPage=function(y){void 0===y&&(y=!0);var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),-1;var x=!1,W=S.cur,j=S.slt.length,ue=S.next();if(-1===ue)return this._err(i.a.IMG_NOT_EXIST),-1;if(W!==S.total-1||j>1){var Se=S.idxPage(W);Se&&Se.boxCount()>0&&(Se.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur)),x=!0,this.__pager(),this.render(x),this.getSlidePages(),y&&this._emitM(i.b.CHANGE_PAGE,this.uid,i.e.NEXT),this.__buffer(S,"shift")}return this.__slt(),this._ok(),ue},L.prototype.prevPage=function(y){void 0===y&&(y=!0);var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),-1;var x=!1,W=S.cur,j=S.slt.length,ue=S.prev();if(-1===ue)return this._err(i.a.IMG_NOT_EXIST),-1;if(0!==W||j>1){var Se=S.idxPage(W);Se&&Se.boxCount()>0&&(Se.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur)),x=!0,this.__pager(),this.render(x),this.getSlidePages(),y&&this._emitM(i.b.CHANGE_PAGE,this.uid,i.e.PREVIOUS),this.__buffer(S,"shift")}return this.__slt(),this._ok(),ue},L.prototype.firstPage=function(y){void 0===y&&(y=!0);var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),-1;var x=!1,W=S.cur,j=S.slt.length,ue=S.first();if(-1===ue)return this._err(i.a.IMG_NOT_EXIST),-1;if(0!==W||j>1){var Se=S.idxPage(W);Se&&Se.boxCount()>0&&(Se.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur)),x=!0,this.__pager(),this.render(x),this.getSlidePages(),y&&this._emitM(i.b.CHANGE_PAGE,this.uid,"first"),this.__buffer(S,"shift")}return this.__slt(),this._ok(),ue},L.prototype.lastPage=function(y){void 0===y&&(y=!0);var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),-1;var x=!1,W=S.cur,j=S.slt.length,ue=S.last();if(-1===ue)return this._err(i.a.IMG_NOT_EXIST),-1;if(W!==S.total-1||j>1){var Se=S.idxPage(W);Se&&Se.boxCount()>0&&(Se.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur)),x=!0,this.__pager(),this.render(x),this.getSlidePages(),y&&this._emitM(i.b.CHANGE_PAGE,this.uid,"last"),this.__buffer(S,"shift")}return this.__slt(),this._ok(),ue},L.prototype.gotoPage=function(y,S){if(void 0===S&&(S=!0),!this._checkIndex(y))return-1;var x=this.getCurTab();if(!x)return this._err(i.a.IMG_NOT_EXIST),-1;var j=x.cur,ue=x.slt.length,Se=x.goto(y);if(-1===Se)return this._err(i.a.IMG_NOT_EXIST),-1;if(j!==y||ue>1){var De=x.idxPage(j);De&&De.boxCount()>0&&(De.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,x.cur)),this.render(!0),this.getSlidePages(),S&&this._emitM(i.b.CHANGE_PAGE,this.uid,"goto",y),this.__buffer(x,"shift")}return this.__pager(),this.__slt(),this._ok(),Se},L.prototype.__slt=function(y){y||(y=this.getSltIndexes()),re.prototype._emit.call(this,i.f.IMAGE_SELECTED,y),re.prototype._emit.call(this,i.g.IMAGE_SELECTED,y)},L.prototype.updateSltIndex=function(){this.__slt(),this.__pager(),this.render()},L.prototype.__pager=function(){var y=this.getCurTab(),S={cur:-1,total:0};y&&(S={cur:y.cur,total:y.total}),re.prototype._emit.call(this,i.f.PAGER_CHANGED,S)},L.prototype.changeTag=function(y){re.prototype._emit.call(this,i.b.TAG_CHANGED,y)},L.prototype.changeDir=function(y){re.prototype._emit.call(this,i.b.TAG_CHANGED,y)},L.prototype.rmPageTag=function(y,S){var x=this._tabMng.getTab(S);return!!x&&(x.remove(y),x.uid===this._tabMng.curTab?(this.showTab(x,"remove"),0===x.chs.length&&this._gpc.clearCanvas(),!0):void 0)},L.prototype.addPageTag=function(y,S){var x=this._tabMng.getTab(S);if(!x)return!1;var W=this._db.getMetadata(y);if(!W)return!1;var j=new B({uid:y,naturalW:W.width,naturalH:W.height},this._db);x.append(j),this.showLatest&&(x.cur=x.total-1),x.uid===this._tabMng.curTab&&this.showTab(x,"add")},L.prototype.emptyTag=function(y){if(!this._tabMng.getTab(y))return!1},L.prototype.renameTag=function(y,S,x){var W=this._tabMng.getTab(x);if(!W)return!1;W.name=S,re.prototype._emit.call(this,i.f.TAB_CHANGED,{selectedTabId:this._tabMng.curTab,tabs:this._tabMng.tabs})},L.prototype.switchPage=function(y,S,x,W){void 0===x&&(x=!0);var j=null;return(j=W?this.getTab(W):this.getCurTab())?!(!this._checkIndex(y)||!this._checkIndex(S)||(j.switch(y,S),this._tabMng.curTab===j.uid&&(this._showAllThb(j),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(j,"shift")),x&&this._emitM(i.b.REORDER_PAGE,this.uid,j,"switch",y,S),this._ok(),0)):(this._err(i.a.IMG_NOT_EXIST),!1)},L.prototype.movePage=function(y,S,x,W){void 0===x&&(x=!0);var j=null;return(j=W?this.getTab(W):this.getCurTab())?!(!this._checkIndex(y)||!this._checkIndex(S)||(j.move(y,S),this._tabMng.curTab===j.uid&&(this._showAllThb(j),this.__slt(),this.__pager(),this.getSlidePages(),this.__buffer(j,"shift")),x&&this._emitM(i.b.REORDER_PAGE,this.uid,j,"move",y,S),this._ok(),0)):(this._err(i.a.IMG_NOT_EXIST),!1)},L.prototype.reorderPage=function(y,S,x,W){void 0===x&&(x=!0);var j=null;if(!(j=W?this.getTab(W):this.getCurTab()))return this._err(i.a.IMG_NOT_EXIST),!1;var ue=j.getCurPage();if(j.reorder(y),this._tabMng.curTab===j.uid){this._showAllThb(j),this.setSltPages(S,!1);var Se=j.getCurPage();ue&&Se&&ue.uid!==Se.uid&&ue.boxCount()>0&&(ue.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,j.cur))}x&&this._emitM(i.b.REORDER_PAGE,this.uid,j,"reorder",y,S)},L.prototype.uidIdx=function(y){var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),null;if(!this._chStr(y))return null;for(var x=S.chs.length,W=0;W<x;W++)if(S.chs[W].uid===y)return this._ok(),W;return this._err(i.a.PARAMETER_INVALID),null},L.prototype.idxUid=function(y){if(!this._checkIndex(y))return null;var S=this.getCurTab();return S?(this._ok(),S.chs[y].uid):(this._err(i.a.IMG_NOT_EXIST),null)},L.prototype.getRealTimeMetadataByIndex=function(y){if(void 0!==y&&!this._checkIndex(y))return null;var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),null;var x=S.getCurPage();if(void 0!==y&&(x=S.idxPage(y)),!x)return this._err(i.a.IMG_NOT_EXIST),null;var W=this._db.getMetadata(x.uid);return W?((W=Object.assign({},W)).width=x.naturalWidth,W.height=x.naturalHeight,this._ok(),W):null},L.prototype.getMetadata=function(y){if(!this._checkIndex(y))return null;var S=this.idxUid(y);if(!S)return null;this._ok();var x=this._db.getMetadata(S);return x?Object.assign({},x):null},L.prototype.setMetadata=function(y,S){if(!this._checkIndex(y))return!1;if(!Object(s.w)(S))return this._err(i.a.PARAM_TYPE),!1;var x=this.idxUid(y);return!!x&&(this._ok(),this._db.updateMetadata(x,S))},L.prototype.getCurIndex=function(){var y=this._tabMng.getCurTab();return y?(this._ok(),y.cur):(this._err(i.a.IMG_NOT_EXIST),-1)},L.prototype.getNextPageIndex=function(){var y=this._tabMng.getCurTab();if(!y)return this._err(i.a.IMG_NOT_EXIST),-1;if(this._ok(),0===y.total)return-1;var S=y.cur+1;return S>=y.total?-1:S},L.prototype.getPrePageIndex=function(){var y=this._tabMng.getCurTab();if(!y)return this._err(i.a.IMG_NOT_EXIST),-1;if(this._ok(),0===y.total)return-1;var S=y.cur-1;return S<0?-1:S},L.prototype.setCurIndex=function(y,S){if(void 0===S&&(S=!0),!this._checkIndex(y))return!1;var x=this._tabMng.getCurTab();if(!x)return this._err(i.a.IMG_NOT_EXIST),!1;var W=x.getCurUid(),j=this.idxUid(y),ue=!1;if(j!==W){var Se=x.getCurPage();if(Se&&Se.boxCount()>0&&(Se.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,x.cur)),ue=!0,x.setSlt([j]),!x.setCur(y))return!1;this.__pager(),this.render(ue),this.getSlidePages(),S&&this._emitM(i.b.CHANGE_PAGE,this.uid,"cur",y),this.__buffer(x,"shift")}return this.__slt(),this._ok(),!0},L.prototype.setSltPages=function(y,S){var x=this;if(void 0===S&&(S=!0),!Object(s.m)(y))return this._err(i.a.PARAM_TYPE),!1;var W=y.length;0===W&&this._err(i.a.PARAMETER_INVALID);for(var j=0;j<W;j++)if(!this._checkIndex(y[j]))return!1;var Se=this.getCurTab();if(!Se)return this._err(i.a.IMG_NOT_EXIST),!1;var De=!1,K=Se.getCurUid(),ke=[];y.forEach(function($e){var nt=x.idxUid($e);ke.push(nt),K!=nt&&(De=!0)});var Xe=!1;if(K!==ke[W-1]){var et=Se.getCurPage();et&&et.boxCount()>0&&(et.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,Se.cur)),Xe=!0}return Se.setSlt(ke),this.__slt(y),this.__pager(),this.render(Xe),this.getSlidePages(),S&&this._emitM(i.b.CHANGE_PAGE,this.uid,"slt",y),(De||0==y.length)&&this.__buffer(Se,"shift"),this._ok(),!0},L.prototype.getCustomDataByIndex=function(y){if(!this._checkIndex(y))return null;var S=this.idxUid(y);return S?this.getCustomDataByUid(S):(this._err(i.a.IMG_NOT_EXIST),null)},L.prototype.getCustomDataByUid=function(y){var S=this._db.getMid(y);return S?(this._ok(),S.customData):(this._err(i.a.IMG_NOT_EXIST),null)},L.prototype.getSltIndexes=function(){var y=this,S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),null;var x=S.getSlt(),W=[];return x.forEach(function(j){var ue=y.uidIdx(j);W.push(ue)}),this._ok(),W},L.prototype.selectAll=function(){var y=this.getCurTab();if(!y)return this._err(i.a.IMG_NOT_EXIST),!1;for(var S=[],x=y.chs.length,W=0;W<x;W++)S.push(W);return this.setSltPages(S)},L.prototype.zoomIn=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomIn()},L.prototype.zoomOut=function(){return"single"===this.tabMode&&(this._tabMng.dfConfig.fitType="none"),this._gpc.zoomOut()},L.prototype.zoomTo=function(y,S,x){return!Object(s.v)(y)||void 0!==S&&!Object(s.v)(S)||void 0!==x&&!Object(s.v)(x)?(this._err(i.a.PARAM_TYPE),-1):("single"===this.tabMode&&(this._tabMng.dfConfig.zoom=y,this._tabMng.dfConfig.fitType="none"),this._ok(),this._gpc.zoomTo(y,!1,S,x))},L.prototype.flip=function(y){var S=this.getCurTab();if(!S)return this._err(i.a.IMG_NOT_EXIST),!1;var x=S.getCurPage();if(!x)return this._err(i.a.IMG_NOT_EXIST),!1;this._clearBox();var W=this._db.getMid(x.uid);if(W){this._releaseMin(W);var j=W.edt.flip(y);this._emitM(i.b.EDIT,"flip",{uid:x.uid,flipObj:j,page:x,interlayerData:W})}return this.getSlidePages(),!0},L.prototype.reset=function(){var y=this,S=this.getCurTab();return S&&S.getCurPage()?(this._clearBox(),S.chs.forEach(function(x){var W=y._db.getMid(x.uid),j=y._db.getMetadata(x.uid);W&&W.edt.all.length>0&&(y._releaseMin(W),x.setNaturalSize(j.width,j.height),W.edt.reset(),y._emitM(i.b.EDIT,"reset",{uid:x.uid}))}),this.getSlidePages(),this._ok(),!0):(this._err(i.a.IMG_NOT_EXIST),!1)},L.prototype.rotate=function(y,S){var x=this,W=this.getCurTab();if(!W)return this._err(i.a.IMG_NOT_EXIST),!1;if(!Object(s.v)(y))return this._err(i.a.PARAM_TYPE),!1;if(void 0!==S){if(!Object(s.v)(S)&&!Object(s.m)(S))return this._err(i.a.PARAM_TYPE),!1;if(Object(s.m)(S))for(var j=S.length,ue=0;ue<j;ue++)if(!this._checkIndex(S[ue]))return!1}var Se=[],De=W.getCurPage();Se=void 0===S?[W.cur]:Object(s.v)(S)?[S]:S.slice(),this._clearBox();var K=this._gpc.rotateMode;return Se.forEach(function(ke){var Xe=x._db.getMid((De=W.chs[ke]).uid);if(Xe){x._releaseMin(Xe);var et=Xe.edt.rotate(y,0,0,K);x._emitM(i.b.EDIT,"rotate",{uid:De.uid,rotateObj:et,page:De,interlayerData:Xe})}}),this.getSlidePages(),this._ok(),!0},L.prototype.crop=function(y,S,x,W){var j=this.getCurTab();if(!j)return this._err(i.a.IMG_NOT_EXIST),!1;var ue=j.getCurPage();if(!ue)return this._err(i.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(y)&&Object(s.v)(S)&&Object(s.v)(x)&&Object(s.v)(W)))return this._err(i.a.PARAM_TYPE),!1;var Se=ue.naturalWidth,De=ue.naturalHeight;if(y<0||y>Se||S<0||S>De||x<0||W<0||y+x>Se||S+W>De)return this._err(i.a.PARAMETER_RANGE),!1;this._clearBox();var K=this._db.getMid(ue.uid);if(K){this._releaseMin(K);var ke=K.edt.crop(y,S,x,W);this._emitM(i.b.EDIT,"crop",{uid:ue.uid,cropObj:ke,page:ue})}return this.getSlidePages(),this._ok(),!0},L.prototype.erase=function(y,S,x,W,j){var ue=this.getCurTab();if(!ue)return this._err(i.a.IMG_NOT_EXIST),!1;var Se=ue.getCurPage();if(!Se)return this._err(i.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(y)&&Object(s.v)(S)&&Object(s.v)(x)&&Object(s.v)(W)))return this._err(i.a.PARAM_TYPE),!1;var De=Se.naturalWidth,K=Se.naturalHeight;if(y<0||y>De||S<0||S>K||x<0||W<0||y+x>De||S+W>K)return this._err(i.a.PARAMETER_RANGE),!1;this._clearBox();var ke=this._db.getMid(Se.uid);if(ke){this._releaseMin(ke);var Xe=ke.edt.erase(y,S,x,W,j);this._emitM(i.b.EDIT,"erase",{uid:Se.uid,eraseObj:Xe,page:Se})}return this.getSlidePages(),this._ok(),!0},L.prototype.overlay=function(y,S,x,W,j,ue,Se){if(!this._checkIndex(y))return!1;var De=this.getCurTab();if(!De)return this._err(i.a.IMG_NOT_EXIST),!1;var K=De.idxPage(y);if(!K)return this._err(i.a.IMG_NOT_EXIST),!1;if(!(Object(s.v)(S)&&Object(s.v)(x)&&Object(s.v)(W)&&Object(s.v)(j)))return this._err(i.a.PARAM_TYPE),!1;var ke=K.naturalWidth,Xe=K.naturalHeight;if(S<0||S>ke||x<0||x>Xe||W<0||j<0||S+W>ke||x+j>Xe)return this._err(i.a.PARAMETER_RANGE),!1;var et=this._db.getMid(K.uid);return et.overlays.push({type:"overlay",left:S,top:x,width:W,height:j,color:ue,opacity:Se}),et&&(this._releaseMin(et),this._emitM(i.b.EDIT,"overlay",{uid:K.uid})),this.getSlidePages(),this._clearBox(),this._ok(),!0},L.prototype.changePageSize=function(y,S){if(y<=0||S<=0)return this._err(i.a.PARAMETER_INVALID),!1;var x=this.getCurTab();if(!x)return this._err(i.a.IMG_NOT_EXIST),!1;var W=x.getCurPage();if(!W)return this._err(i.a.IMG_NOT_EXIST),!1;if(!Object(s.v)(y)||!Object(s.v)(S))return this._err(i.a.PARAM_TYPE),!1;this._clearBox();var j=this._db.getMid(W.uid);if(j){this._releaseMin(j);var ue=j.edt.changePageSize(y,S);this._emitM(i.b.EDIT,"changePageSize",{uid:W.uid,changeSizeObj:ue,page:W})}return this.getSlidePages(),this._ok(),!0},L.prototype._releaseMin=function(y){s.a.revokeObjectURL(y.minData),y.minData=null,y.minType=null,y.activeMin=!1},L.prototype.setSaveType=function(y){return["image/png","image/jpeg"].indexOf(y)<0?(this._err(i.a.PARAMETER_INVALID),!1):(this.saveType=y,this._gpc.offScreenCanvas.saveType=y,this._ok(),!0)},L.prototype.getSaveType=function(){return this.saveType},L.prototype.setSaveQuality=function(y){return y<0||y>1?(this._err(i.a.PARAMETER_RANGE),!1):(this.saveQuality=y,this._ok(),!0)},L.prototype.getSaveQuality=function(){return this.saveQuality},L.prototype.setRotateMode=function(y){return Object(s.v)(y)||this._err(i.a.PARAM_TYPE),-1===[0,1,2].indexOf(y)?(this._err(i.a.PARAMETER_INVALID),!1):(this._gpc.rotateMode=y,this._ok(),!0)},L.prototype.getRotateMode=function(){return this._gpc.rotateMode},L.prototype.setSaveBackgroundColor=function(y){return this._ok(),this._gpc.setSaveBackgroundColor(y)},L.prototype.getSaveBackgroundColor=function(){return this._gpc.saveBg},L.prototype.saveTransformation=function(){var y=this,S=this.getCurTab();if(!S)return Promise.reject(i.a.IMG_NOT_EXIST);for(var x=S.getCurUid(),W=S.chs,j=[],ue=function(K){var ke=W[K],Xe=Se._db.getMid(ke.uid);if(Xe&&Xe.edt.all.length>0){var et=new Promise(function($e,nt){var ct=!0;x===ke.uid&&(ct=!1);var ut=y._db.getMid(ke.uid);ut.img?y._saveToBlob(ke.uid,ut.img,ke,ct).then(function(lt){$e(lt)}):ut.oriData?y._getImage(ke.uid,ut.oriData,ke,ct).then(function(lt){$e(lt)}):y._db.getDataAsync(ke.uid).then(function(lt){var It=s.a.createURL(lt.oriData);y._getImage(ke.uid,It,ke,ct).then(function(bt){$e(bt)})}).catch(function(lt){})});j.push(et)}},Se=this,De=0;De<W.length;De++)ue(De);return Promise.all(j)},L.prototype.__buffer=function(y,S){var x,W,j={action:S,uids:(null===(W=null===(x=y.data)||void 0===x?void 0:x.chs)||void 0===W?void 0:W.slice())||[],currentUid:y.getCurUid(),selectedUids:y.getSlt()};re.prototype._emit.call(this,i.d.CURRENT_CHANGED,y.getCurUid()),re.prototype._emit.call(this,i.g.BUFFER_CHANGED,j)},L.prototype._getImage=function(y,S,x,W){var j=this;return new Promise(function(ue,Se){var De=new Image;j.cors&&(De.crossOrigin="anonymous"),De.src=S,De.onload=function(){De.onload=null,De.onerror=null,j._saveToBlob(y,De,x,W).then(function(K){ue(K)}),"object"===S.type&&s.a.revokeObjectURL(S),De.src=""}})},L.prototype._saveToBlob=function(y,S,x,W){var j=this,ue=this._gpc.offScreenCanvas,Se=this._db.getMid(y);ue.render({viewerUid:"",pageUid:y,isMin:!1,img:S,page:x,midData:Se});var De=this._db.getMetadata(y),K=Se.customData,ke=Se.tags;De.width=x.naturalWidth,De.height=x.naturalHeight,Se.setTempSize(x.naturalWidth,x.naturalHeight),S=null;var Xe=ue.mainCanvas,et=ue.mainWidth,$e=ue.mainHeight,nt=this.saveCanvas,ct=nt.getContext("2d");return nt.width!==et&&(nt.width=et),nt.height!==$e&&(nt.height=$e),ct.drawImage(Xe,0,0),new Promise(function(ut,lt){nt.toBlob(function(It){Se.edt.reset(),j._emitM(i.b.UPDATE_SYNC,y,{oriData:It,minData:null,metadata:De,customData:K,tags:ke},!0),j._db&&j._db.getDataAsync(y).then(function(Dt){ut(It)})},j.saveType,j.saveQuality)})},L.prototype.getMinPageData=function(){var y=this.getCurTab();if(!y)return this._err(i.a.IMG_NOT_EXIST),null;var S=y.getCurPage();return S&&this._db.getMid(S.uid)?this._gpc.getMinPageData():(this._err(i.a.IMG_NOT_EXIST),null)},L.prototype.setCropLineColor=function(y){this._gpc.cropLineColor=y,this.drawSltBox()},L.prototype.getCropLineColor=function(){return this._gpc.cropLineColor},L.prototype.setKeepZoom=function(y){this._gpc.keepZoom=y},L.prototype.getFitType=function(){return this._gpc.fitType},L.prototype.setFitType=function(y){if(!this._chStr(y))return!1;if(-1===["window","width","height"].indexOf(y))return this._err(i.a.PARAMETER_INVALID),!1;this._gpc.fitType=y;var S=this.getCurTab();return S&&(S.fitType=y),"single"===this.tabMode&&(this._tabMng.dfConfig.fitType=y),this.render(!0),this.getSlidePages(),this._ok(),!0},L.prototype.setZoom=function(y){"single"===this.tabMode&&(this._tabMng.dfConfig.zoom=y,this._tabMng.dfConfig.fitType="none");var S=this.getCurTab();return S&&(S.zoom=y),this._gpc.setZoom(y)},L.prototype.getZoom=function(){return this._gpc.getZoom()},L.prototype.setMinZoom=function(y){return this._gpc.minZoom=y,!0},L.prototype.getMinZoom=function(){return this._gpc.minZoom},L.prototype.setMaxZoom=function(y){return this._gpc.maxZoom=y,!0},L.prototype.getMaxZoom=function(){return this._gpc.maxZoom},L.prototype.setOperationMode=function(y){var S=this.getCurTab();if(S){S.opMode=y;var x=S.getCurPage();x&&x.boxCount()>0&&(x.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur))}this._gpc.opMode=y,"single"===this.tabMode&&(this._tabMng.dfConfig.opMode=y)},L.prototype.getOperationMode=function(){return this._gpc.opMode},L.prototype.setDisplayMode=function(y){var S=this.getCurTab();if(S){S.disMode=y;var x=S.getCurPage();x&&x.boxCount()>0&&(x.cropMng.clear(),this.drawSltBox(),re.prototype._emit.call(this,i.g.PAGE_AREA_UNSELECTED,S.cur))}this._tabMng.dfConfig.disMode=y,this._gpc.disMode=y,this.render(!0),this.getSlidePages()},L.prototype.setAspectRatio=function(y){this._gpc.aspectRatio=y;var S=this.getCurTab();S&&S.chs.forEach(function(x){x.cropMng.setAspectRatio(y)})},L.prototype.getAspectRatio=function(){return this._gpc.aspectRatio},L.prototype.setKeepAspectRatio=function(y){this._gpc.keepAspectRatio=y;var S=this.getCurTab();S&&S.chs.forEach(function(x){x.cropMng.setKeepAspectRatio(y)})},L.prototype.getKeepAspectRatio=function(){return this._gpc.keepAspectRatio},L.prototype.setPageMargin=function(y){return this._gpc.iMargin=y,!0},L.prototype.getPageMargin=function(){return this._gpc.iMargin},L.prototype.setZoomDelta=function(){},L.prototype.getZoomDelta=function(){},L.prototype.setAllowSlide=function(y){this._gpc.setAllowSlide(y)},L.prototype.getAllowSlide=function(){return this._gpc.allowSlide},L.prototype._getOutEvent=function(y){var S=null,x=-1,W=-1,j=-1,ue=y?.clientX,Se=y?.clientY,De=this.getCurTab();if(De&&(S=De.getCurPage()),S&&(x=this.uidIdx(S.uid)),this._gpc.checkMouseOverPage(y)){var K=this._gpc.getMouseCoordinate(y),ke=this._gpc.toPageCoordinate(K.x,K.y);W=Math.floor(ke.x),j=Math.floor(ke.y)}return{index:x,imageX:W,imageY:j,pageX:ue,pageY:Se}},L.prototype._initEvent=function(){var y=this;re.prototype._on.call(this,i.b.APPEND_SYNC,function(S,x){y._emitM(i.b.APPEND_SYNC,S,x)}),re.prototype._on.call(this,i.d.CANVAS_VISIBILITY_CHANGED,this._onSetCanvasVisibility.bind(this)),re.prototype._on.call(this,i.d.BIND_SLIDE_COMPONENT,function(S){var x;null===(x=y._gpc.slide)||void 0===x||x.bind(S)}),re.prototype._on.call(this,i.d.UNBIND_SLIDE_COMPONENT,function(){var S;null===(S=y._gpc.slide)||void 0===S||S.unbind()}),re.prototype._on.call(this,i.d.BIND_CANVAS,function(S){y._gpc.cvsMng.bind(S)}),re.prototype._on.call(this,i.d.UNBIND_CANVAS,function(S){y._gpc.cvsMng.unbind(S)}),re.prototype._on.call(this,i.d.SET_CANVAS_SIZE,function(S){var x=S.width,W=S.height;y._gpc.updateDpr();var j=y._gpc.setCanvasOffsetSize(x,W),ue=y.getCurTab();ue&&0!==ue.total||re.prototype._emit.call(y,i.f.SET_SCROLLER_SIZE,{width:0,height:0,x:0,y:0}),"single"!==y._gpc.disMode||j||(y.render(!1,!1),y.drawSltBox(),y.getSlidePages())}),re.prototype._on.call(this,i.d.DISPLAYED_IMAGE_CHANGED,function(S){S.forEach(function(x){var W=y._db.getMid(x);if(W)if(W.minData){var j={uid:x,data:W.minData,tags:W.getTags()};re.prototype._emit.call(y,i.f.UPDATE_THB_ITEM,j)}else y._emitM(i.b.LOAD_PAGE,x)})}),re.prototype._on.call(this,i.d.CANVAS_MOUSE_DOWN,function(S,x){var W=y.getCurTab();W&&W.getCurPage()&&y._gpc.onCanvasMousedown(S),x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_DOWN,x,S)}),re.prototype._on.call(this,i.d.CANVAS_MOUSE_MOVE,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_MOVE,x,S)}),re.prototype._on.call(this,i.d.CANVAS_MOUSE_UP,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_UP,x,S)}),re.prototype._on.call(this,i.d.CANVAS_MOUSE_OVER,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_OVER,x,S)}),re.prototype._on.call(this,i.d.CANVAS_MOUSE_OUT,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_OUT,x,S)}),re.prototype._on.call(this,i.d.CANVAS_TOUCH_START,function(S,x){var W=y.getCurTab();W&&W.getCurPage()&&y._gpc.onCanvasTouchstart(S),x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_DOWN,x,S)}),re.prototype._on.call(this,i.d.CANVAS_TOUCH_MOVE,function(S,x){var W=y.getCurTab();W&&W.getCurPage()&&y._gpc.onCanvasTouchmove(S),x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_MOVE,x,S)}),re.prototype._on.call(this,i.d.CANVAS_TOUCH_END,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_MOUSE_UP,x,S)}),re.prototype._on.call(this,i.d.CANVAS_SCROLL,function(S,x){var W=y.getCurTab();W&&W.getCurPage()&&y._gpc.onCanvasScroll(S)}),re.prototype._on.call(this,i.d.CANVAS_WHEEL,function(S,x){var W=y.getCurTab();W&&W.getCurPage()&&(y._gpc.onCanvasWheel(S),re.prototype._emit.call(y,i.g.WHEEL,S))}),re.prototype._on.call(this,i.d.CANVAS_CLICK,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_CLICK,x,S)}),re.prototype._on.call(this,i.d.CANVAS_DOUBLE_CLICK,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_DOUBLE_CLICK,x,S)}),re.prototype._on.call(this,i.d.CANVAS_RIGHT_CLICK,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_RIGHT_CLICK,x,S)}),re.prototype._on.call(this,i.d.CANVAS_RIGHT_CLICK,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.PAGE_CONTEXTMENU,x,S)}),re.prototype._on.call(this,i.d.CANVAS_KEY_DOWN,function(S){re.prototype._emit.call(y,i.g.KEY_DOWN,S)}),re.prototype._on.call(this,i.d.CANVAS_KEY_UP,function(S){re.prototype._emit.call(y,i.g.KEY_UP,S)}),re.prototype._on.call(this,i.d.CANVAS_RESIZE,function(S,x){re.prototype._emit.call(y,i.g.RESIZE,S,x)}),re.prototype._on.call(this,i.d.CANVAS_DRAG_START,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.DRAG_START,x,S)}),re.prototype._on.call(this,i.d.CANVAS_DRAG_MOVE,function(S,x){x||(x=y._getOutEvent(S)),re.prototype._emit.call(y,i.g.DRAG_MOVE,x,S)}),re.prototype._on.call(this,i.d.CANVAS_DRAG_DONE,function(S){re.prototype._emit.call(y,i.g.DRAG_DONE,S)}),re.prototype._on.call(this,i.d.DOCUMENT_MOVE,function(S){var x=y.getCurTab();x&&x.getCurPage()&&y._gpc.onDocumentMousemove(S)}),re.prototype._on.call(this,i.d.DOCUMENT_UP,function(S){var x=y.getCurTab();x&&x.getCurPage()&&y._gpc.onDocumentMouseup(S)}),re.prototype._on.call(this,i.d.SET_SELECTED_INDEXES,function(S){y.setSltPages(S,!1),y._emitM(i.b.CHANGE_PAGE,y.uid,"slt",S)}),re.prototype._on.call(this,i.d.REORDER_THUMBNAIL,function(S,x){y.getCurTab()&&y.reorderPage(S,x,!0)}),re.prototype._on.call(this,i.d.CANVAS_DEFAULT_CURSOR,function(S){void 0===S&&(S="default"),y._gpc.defaultCursor=S}),re.prototype._on.call(this,"_onRender",function(){y.render()}),re.prototype._on.call(this,"_onRenderBoxes",function(){y.drawSltBox()}),re.prototype._on.call(this,"_getSlidePages",function(){y.getSlidePages()})},L.prototype._onSetCanvasVisibility=function(y){},L.prototype.setScrBarW=function(y){this._gpc.scrBarW=y},L.prototype._onM=function(y,S){this._mPub._on(y,S)},L.prototype._emitM=function(y){for(var S,x=[],W=1;W<arguments.length;W++)x[W-1]=arguments[W];this._mPub&&(S=this._mPub)._emit.apply(S,Ie([y],x))},L.prototype._offM=function(y,S){this._mPub._off(y,S)},L.prototype._err=function(y){this._emitM(i.d.ERROR,y)},L.prototype._ok=function(){this._emitM(i.d.ERROR,i.a.OK)},L.prototype._chStr=function(y){return!!Object(s.y)(y)||(this._err(i.a.PARAM_TYPE),!1)},L.prototype._checkIndex=function(y){return Object(s.v)(y)?!(y<0||y>=this.getCurPageCount())||(this._err(i.a.PARAMETER_RANGE),!1):(this._err(i.a.PARAM_TYPE),!1)},L.prototype.dispose=function(){var y,S,x;this.isDisposed||(re.prototype.dispose.call(this),null===(y=this._mPub)||void 0===y||y.dispose(),this._mPub=null,this._db=null,null===(S=this._tabMng)||void 0===S||S.dispose(),this._tabMng=null,null===(x=this._gpc)||void 0===x||x.dispose(),this._gpc=null,this.saveCanvas=null,this.isDisposed=!0)},L}(d.a),ce=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),q=function(){return(q=Object.assign||function(re){for(var L,y=1,S=arguments.length;y<S;y++)for(var x in L=arguments[y])Object.prototype.hasOwnProperty.call(L,x)&&(re[x]=L[x]);return re}).apply(this,arguments)},he=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},ie=function(re){function L(y){var S=y.config,x=y.viewUi,W=y.workerBlobURL,j=y.scrollbarWidth,ue=y.groupUid,Se=y.defaultConfig,K=y.focus,ke=y.db,Xe=y.offScreenCanvas,et=y.saveCanvas,$e=re.call(this,y.mPub)||this;$e.ViewUi=null,$e.group=null,$e._uiConfig={canvasConfig:{}},$e._config={},$e._dfConfig=null,$e._focus={viewerId:void 0,thumbnailId:void 0},$e.uid=Object(s.I)(6),$e.postfix="-"+$e.uid,$e._iPub=new d.a,$e._db=ke,$e.ViewUi=x,$e.group=ue,$e._dfConfig=Se,$e._focus=K,$e.vm=new _e(S,$e._iPub.getPublishSubscribe(),$e._oPub,$e.uid,W,j,ke,Xe,et);var nt=$e.initConfig(S);return $e.bindView($e.container),$e.on(i.d.UPDATE_FOCUS,function(ut){var It=ut.thumbnailId;$e._focus.viewerId=ut.viewerId,$e._focus.thumbnailId=It}),$e.on(i.f.DOCUMENT_KEY_DOWN,function(ut){var lt,It=$e._focus;$e.uid===It.viewerId&&(null===(lt=$e.ui)||void 0===lt||lt.documentKeyDown(ut,It.thumbnailId))}),$e.on(i.f.DOCUMENT_KEY_UP,function(ut){var lt,It=$e._focus;$e.uid===It.viewerId&&(null===(lt=$e.ui)||void 0===lt||lt.documentKeyUp(ut,It.thumbnailId))}),$e.on(i.b.GOTO_PAGE,function(ut){$e.gotoPage(ut)}),$e._e(nt.length?{code:80024,message:"Failed to create the viewer because the parameter "+nt[0]+" is incorrect."}:i.a.OK),$e}return ce(L,re),L.prototype.initConfig=function(y){var S=y.uiConfig.canvasConfig,x=[],W=q(q(q({},y),S),y.uiConfig);for(var j in W)"uiConfig"===j||Object(s.w)(W[j])||this._checkInitProp(W,j)||x.push(j);return this._config=y,this._uiConfig=y.uiConfig,x},L.prototype._e=function(y){re.prototype._emit.call(this,i.d.ERROR,y)},L.prototype._checkInitProp=function(y,S){var x=this[S],W=y[S];return this[S]=y[S],x===W||x!==this[S]},L.prototype.closeTab=function(y){if(!Object(s.y)(y))return this._e(i.a.PARAM_TYPE),!1;this.vm.closeTab(y)},L.prototype.closeCurrentTab=function(){return this.vm.closeCurTab()},L.prototype.emptyTab=function(y){},L.prototype.getCurrentTabId=function(){return this.vm.getCurrentTabId()},L.prototype.getTab=function(y){return Object(s.y)(y)?this.vm.getTab(y):(this._e(i.a.PARAM_TYPE),null)},L.prototype.getCurrentTab=function(){return this.vm.getCurTab()},L.prototype.getCurrentPageUids=function(){return this.vm.getCurPageUids()},L.prototype.getCurrentIndex=function(){return this.vm.getCurIndex()},L.prototype.getNextPageIndex=function(){return this.vm.getNextPageIndex()},L.prototype.getPrePageIndex=function(){return this.vm.getPrePageIndex()},L.prototype.setCurrentIndex=function(y){return this.vm.setCurIndex(y)},L.prototype.setSelectedIndexes=function(y){return this.vm.setSltPages(y)},L.prototype.getSelectedIndexes=function(){return this.vm.getSltIndexes()},L.prototype.selectAll=function(){return this.vm.selectAll()},L.prototype.removeSync=function(y){if(Object(s.v)(y)&&(y=[y]),!Object(s.m)(y))return this._e(i.a.PARAM_TYPE),!1;if(0===y.length)return this._e(i.a.PARAMETER_INVALID),!1;for(var S=[],x=0;x<y.length;x++){var W=this.getUidByIndex(y[x]);if(!W)return!1;S.push(W)}return this.vm.remove(S)},L.prototype.removeAllSync=function(){return this.vm.rmAll()},L.prototype.switchPage=function(y,S){return this.vm.switchPage(y,S,!0)},L.prototype.movePage=function(y,S){return this.vm.movePage(y,S,!0)},L.prototype.getViewerElement=function(){var y;return this._e(i.a.OK),(null===(y=this.ui)||void 0===y?void 0:y.getViewerElement())||null},L.prototype.bindView=function(y,S,x){var W,j,ue,Se=this;if(void 0===S&&(S={}),void 0===x&&(x=!0),!this.ViewUi)return this._e(i.a.VIEW_UI_REQUIRE),!1;if(!y)return this._e(i.a.PARAMETER_INVALID),!1;if(Object(s.y)(y)&&(y=document.getElementById(y)),!Object(s.q)(y))return this._e(i.a.PARAMETER_INVALID),!1;this.unbindView(),x?Object(s.B)(S,this._uiConfig):this._uiConfig=S,this.ui=new this.ViewUi(y,this._uiConfig,this.postfix,this._iPub.getPublishSubscribe(),this._db),null===(W=this.ui)||void 0===W||W.createInnerThumbnail(),null===(j=this.ui)||void 0===j||j.setDisplayMode(this.displayMode),null===(ue=this.ui)||void 0===ue||ue.setOperationMode(this.operationMode),this.vm.thbViews.forEach(function(K){var ke;null===(ke=Se.ui)||void 0===ke||ke.createThumbnail(K.getConfig())});var De=this.vm.getCurTab();return!De||(this.vm._showAllThb(De),this.vm.getSlidePages(),this.vm.updateSltIndex(),this.vm.onTabChanged(),this._e(i.a.OK),!0)},L.prototype.unbindView=function(){var y;return null===(y=this.ui)||void 0===y||y.unbindView(),this.ui=null,this._e(i.a.OK),!0},L.prototype.dispose=function(){var y,S;re.prototype.dispose.call(this),null===(y=this._iPub)||void 0===y||y.dispose(),this._iPub=null,this._db=null,this.ViewUi=null,this.ui=null,null===(S=this.vm)||void 0===S||S.dispose(),this.vm=null},L.prototype.updateUISetting=function(y){var S;if(Object(s.w)(y)){var x=Object(s.d)(this._dfConfig.uiConfig);Object(s.B)(y,x);var W=null===(S=this.ui)||void 0===S?void 0:S.containerBox;return W&&this.bindView(W,x,!1),this._e(i.a.OK),!0}return this._e(i.a.PARAM_TYPE),!1},L.prototype.bindContent=function(y){var S;return Object(s.y)(y)&&(y=document.getElementById(y)),Object(s.q)(y)?null!==(S=this.ui)&&void 0!==S&&S.bindContent(y)?(this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1):(this._e(i.a.PARAMETER_INVALID),!1)},L.prototype.unbindContent=function(){var y;return null!==(y=this.ui)&&void 0!==y&&y.unbindContent()?(this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.fullScreen=function(){var y;return null!==(y=this.ui)&&void 0!==y&&y.fullScreen()?(this._e(i.a.OK),!0):this.ui?(this._e(i.a.BROWSER_NOT_SUPPORT),!1):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.cancelFullScreen=function(){var y;return this._e(i.a.OK),null===(y=this.ui)||void 0===y?void 0:y.cancelFullScreen()},L.prototype.fullWebPage=function(){var y;return null!==(y=this.ui)&&void 0!==y&&y.fullPage()?(this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.cancelFullWebPage=function(){var y;return null!==(y=this.ui)&&void 0!==y&&y.cancelFullPage()?(this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.setButtonClass=function(y,S){var x;if(!Object(s.y)(y)||!Object(s.y)(S))return this._e(i.a.PARAM_TYPE),!1;var W=this._uiConfig.buttons[y];return W?(W.setClass=S,null!==(x=this.ui)&&void 0!==x&&x.setButtonClass(y)?(this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1)):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.setViewMode=function(y,S){var x;return Object(s.v)(y)&&Object(s.v)(S)?y>0&&S>0?(this._uiConfig.canvasConfig.rows=S,this._uiConfig.canvasConfig.columns=y,this.ui?(this._e(i.a.OK),this.vm.rows=S,this.vm.columns=y,null===(x=this.ui)||void 0===x?void 0:x.setViewMode(y,S)):(this._e(i.a.ELEMENT_NOT_EXIST),!1)):(this._e(i.a.PARAMETER_RANGE),!1):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.createCustomElement=function(y,S,x){var W;void 0===S&&(S=0),void 0===x&&(x=!1);var j=y;return Object(s.y)(y)&&(j=document.getElementById(y)),Object(s.q)(j)?(this._e(i.a.OK),null===(W=this.ui)||void 0===W?void 0:W.createCustomElement(j,S,x)):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.updateVideoContainer=function(y){return this.ui?(Object(s.y)(y)||this._e(i.a.PARAM_TYPE),this.ui.updateVideoContainer(y),this._e(i.a.OK),!0):(this._e(i.a.ELEMENT_NOT_EXIST),!1)},L.prototype.setLoadingImage=function(y){var S;this.uiConfig.canvasConfig.loadingImageUrl=y,null===(S=this.ui)||void 0===S||S.setLoadingImage(y)},L.prototype.nextPage=function(){return this.vm.nextPage()},L.prototype.prevPage=function(){return this.vm.prevPage()},L.prototype.firstPage=function(){return this.vm.firstPage()},L.prototype.lastPage=function(){return this.vm.lastPage()},L.prototype.gotoPage=function(y){return this.vm.gotoPage(y)},L.prototype.createThumbnailView=function(y){var S;if(void 0===y&&(y={}),re.prototype._emit.call(this,i.d.LOG,"Invoking viewer#createThumbnailView."),!Object(s.w)(y))return this._e(i.a.PARAM_TYPE),null;var x=[],W=this.vm.createThumbnailView(this._uiConfig.thumbnail);return null===(S=this.ui)||void 0===S||S.createThumbnail(W.getConfig()),W.init(y,x),this._e(x.length?{code:80024,message:"Failed to create the thumbnail viewer because the parameter "+x[0]+" is incorrect."}:i.a.OK),W},L.prototype.removeThumbnailView=function(y){var S;re.prototype._emit.call(this,i.d.LOG,"Invoking viewer#removeThumbnailView.");var x=y;return Object(s.y)(y)||(x=y.uid),this.vm.removeThumbnailView(x)?(null===(S=this.ui)||void 0===S||S.removeThumbnail(x),this._e(i.a.OK),!0):(this._e(i.a.PARAMETER_INVALID),!1)},L.prototype.getThumbnailViewById=function(y){return this.vm.getThumbnailViewById(y)},L.prototype.getThumbnailViewsList=function(){return this.vm.thbViews},L.prototype.getIndexByUid=function(y){return this.vm.uidIdx(y)},L.prototype.getUidByIndex=function(y){return this.vm.idxUid(y)},L.prototype.getRealTimeMetadataByIndex=function(y){return this.vm.getRealTimeMetadataByIndex(y)},L.prototype.getMetadataByIndex=function(y){return this.vm.getMetadata(y)},L.prototype.setMetadataByIndex=function(y,S){return this.vm.setMetadata(y,S)},L.prototype.getCustomDataByIndex=function(y){return this.vm.getCustomDataByIndex(y)},L.prototype.getCustomDataByUid=function(y){return this.vm.getCustomDataByUid(y)},L.prototype.zoomIn=function(){return this.vm.zoomIn()},L.prototype.zoomOut=function(){return this.vm.zoomOut()},L.prototype.zoomTo=function(y,S,x){return this.vm.zoomTo(y,S,x)},L.prototype.reset=function(){return this.vm.reset()},L.prototype.mirror=function(){return this.vm.flip(1)},L.prototype.flip=function(){return this.vm.flip(0)},L.prototype.rotate=function(y,S){return this.vm.rotate(y,S)},L.prototype.crop=function(y,S,x,W){return this.vm.crop(y,S,x,W)},L.prototype.erase=function(y,S,x,W,j){return this.vm.erase(y,S,x,W,j)},L.prototype.overlayRectangle=function(y,S,x,W,j,ue,Se){return this.vm.overlay(y,S,x,W,j,ue,Se)},L.prototype.changePageSize=function(y,S){return this.vm.changePageSize(y,S)},L.prototype.saveTransformation=function(){return this.vm.saveTransformation()},L.prototype.getMinPageData=function(){return"single"===this.displayMode?this.vm.getMinPageData():"continuous"===this.displayMode?null:void 0},L.prototype.setFreeSelectedBox=function(y){return this.vm.setFreeBox(y)},L.prototype.setSelectedBoxes=function(y,S){var x;if(1!==this.operationMode)return this._e(i.a.OPERATION_MODE_ERROR),!1;if(void 0===y)return this._e(i.a.PARAM_TYPE),!1;if(void 0!==S&&!Object(s.n)(S))return this._e(i.a.PARAM_TYPE),!1;var W=this.getCurrentTab();if(!W)return this._e(i.a.IMG_NOT_EXIST),!1;var j=W.getCurPage();if(void 0===j)return this._e(i.a.IMG_NOT_EXIST),!1;var ue=null;if(Object(s.m)(y)){if(0===(ue=y).length)return this._e(i.a.PARAMETER_INVALID),!1}else{if(!Object(s.w)(y))return this._e(i.a.PARAM_TYPE),!1;ue=[y]}for(var Se=ue.length,De=j.naturalWidth,K=j.naturalHeight,ke=0;ke<Se;ke++){var Xe=ue[ke];if(!(Object(s.v)(Xe.left)&&Object(s.v)(Xe.top)&&Object(s.v)(Xe.width)&&Object(s.v)(Xe.height)))return this._e(i.a.PARAM_TYPE),!1;Xe.left<0&&(Xe.left=0),Xe.top<0&&(Xe.top=0),Xe.width<=0&&(Xe.width=1),Xe.height<=0&&(Xe.height=1),Xe.width+Xe.left>De&&(Xe.width=De-Xe.left),Xe.height+Xe.top>K&&(Xe.height=K-Xe.top)}return"single"===this.displayMode?this.vm.setBox(y,S):null===(x=this.ui)||void 0===x||x.setSelectedBoxes(y,S),this._e(i.a.OK),!0},L.prototype.clearSelectedBoxes=function(y){var S;return this.vm.clearBox(y),null===(S=this.ui)||void 0===S||S.clearSelectedBoxes(y),this._e(i.a.OK),!0},L.prototype.render=function(){return this.vm.render()},L.prototype.on=function(y,S){Object(s.y)(y)&&Object(s.s)(S)?(this._iPub._on(y,S),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},L.prototype.emit=function(y){for(var S,x=[],W=1;W<arguments.length;W++)x[W-1]=arguments[W];Object(s.y)(y)?((S=this._iPub)._emit.apply(S,he([y],x)),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},L.prototype.off=function(y,S){Object(s.y)(y)&&(void 0===S||Object(s.s)(S))?(this._iPub._off(y,S),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},Object.defineProperty(L.prototype,"zoom",{get:function(){return this.vm.getZoom()},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this.vm.setZoom(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"minZoom",{get:function(){return this._config.minZoom},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this._config.minZoom=y,this.vm.setMinZoom(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"maxZoom",{get:function(){return this._config.maxZoom},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this._config.maxZoom=y,this.vm.setMaxZoom(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showViewer",{get:function(){return this._uiConfig.showViewer},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.showViewer=y,null===(S=this.ui)||void 0===S||S.setShowViewer(y),y&&this.render(),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showHeader",{get:function(){return this._uiConfig.toolbars.header},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.toolbars.header=y,null===(S=this.ui)||void 0===S||S.setShowHeader(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"headerColor",{get:function(){return this._uiConfig.headerColor},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.headerColor=y,null===(S=this.ui)||void 0===S||S.setHeaderColor(y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showTopMenu",{get:function(){return this._uiConfig.toolbars.topMenu},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.toolbars.topMenu=y,null===(S=this.ui)||void 0===S||S.setShowTopMenu(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"topMenuColor",{get:function(){return this._uiConfig.topMenuColor},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.topMenuColor=y,null===(S=this.ui)||void 0===S||S.setTopMenuColor(y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"topMenuBorder",{get:function(){return this._uiConfig.topMenuBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.topMenuBorder=y,null===(S=this.ui)||void 0===S||S.setTopMenuBorder(y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showSidebar",{get:function(){return this._uiConfig.showSidebar},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.showSidebar=y,null===(S=this.ui)||void 0===S||S.setShowSidebar(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showAside",{get:function(){return this._uiConfig.toolbars.asideMenu},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.toolbars.asideMenu=y,null===(S=this.ui)||void 0===S||S.setShowAside(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showMain",{get:function(){return this._uiConfig.showMain},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.showMain=y,null===(S=this.ui)||void 0===S||S.setShowMain(y),this.emit(i.d.CANVAS_VISIBILITY_CHANGED,y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showFooter",{get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.toolbars.bottomMenu=y,null===(S=this.ui)||void 0===S||S.setShowFooter(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showTab",{get:function(){return this._uiConfig.showTab},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.showTab=y,null===(S=this.ui)||void 0===S||S.setShowTab(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"footerColor",{get:function(){return this._uiConfig.footerColor},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.footerColor=y,null===(S=this.ui)||void 0===S||S.setFooterColor(y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showVideoContainer",{get:function(){return this._uiConfig.showVideoContainer},set:function(y){var S;Object(s.n)(y)||this._e(i.a.PARAM_TYPE),this._uiConfig.showVideoContainer=y,null===(S=this.ui)||void 0===S||S.setShowVideoContainer(y),this._e(i.a.OK)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"fitType",{get:function(){return this.vm.getFitType()},set:function(y){this.vm.setFitType(y)&&(this._config.fitType=y)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"canvasMouseShape",{get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(y){var S;Object(s.y)(y)?(this._uiConfig.canvasConfig.canvasMouseShape=y,null===(S=this.ui)||void 0===S||S.setCanvasMouseShape(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"canvasBackground",{get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.canvasBackground=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("canvasBackground",y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectedBoxLineColor",{get:function(){return this.vm.getCropLineColor()},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.selectedBoxLineColor=y,this.vm.setCropLineColor(y),null===(S=this.ui)||void 0===S||S.setSelectedBoxLineColor(y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"saveBackgroundColor",{get:function(){return this.vm.getSaveBackgroundColor()},set:function(y){this.vm.setSaveBackgroundColor(y)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"saveQuality",{get:function(){return this.vm.getSaveQuality()},set:function(y){this.vm.setSaveQuality(y)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"saveType",{get:function(){return this.vm.getSaveType()},set:function(y){this.vm.setSaveType(y)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"rotateMode",{get:function(){return this.vm.getRotateMode()},set:function(y){this.vm.setRotateMode(y)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"canvasBorder",{get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.canvasConfig.canvasBorder=y,null===(S=this.ui)||void 0===S||S.setCanvasBorder(y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageBackground",{get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.pageBackground=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("pageBackground",y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageBorder",{get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.canvasConfig.pageBorder=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("pageBorder",y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectedPageBackground",{get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.selectedPageBackground=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("selectedPageBackground",y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectedPageBorder",{get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.canvasConfig.selectedPageBorder=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("selectedPageBorder",y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"hoverPageBorder",{get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.canvasConfig.hoverPageBorder=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("hoverPageBorder",y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"hoverPageBackground",{get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.hoverPageBackground=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("hoverPageBackground",y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"placeholderBackground",{get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(y){var S;Object(s.p)(y)?(this._uiConfig.canvasConfig.placeholderBackground=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("placeholderBackground",y),this._e(i.a.OK)):this._e(i.a.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showPageNumber",{get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.canvasConfig.showPageNumber=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("showPageNumber",y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"multipleMode",{get:function(){return this._uiConfig.canvasConfig.multipleMode||!1},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.canvasConfig.multipleMode=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("multipleMode",y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowPageDragging",{get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.canvasConfig.allowPageDragging=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("allowPageDragging",y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowKeyboardControl",{get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(y){var S;Object(s.n)(y)?(this._uiConfig.canvasConfig.allowKeyboardControl=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("allowKeyboardControl",y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"pageMargin",{get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(y){var S;Object(s.x)(y)?(this._uiConfig.canvasConfig.pageMargin=y,this.vm.setPageMargin(y),null===(S=this.ui)||void 0===S||S.setInnerTbProp("pageMargin",y),this._e(i.a.OK)):this._e(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"scrollDirection",{get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(y){var S;Object(s.y)(y)?(this._uiConfig.canvasConfig.scrollDirection=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("scrollDirection",y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"autoChangeIndex",{get:function(){return this._uiConfig.canvasConfig.autoChangeIndex},set:function(y){var S;Object(s.n)(y)?(this.uiConfig.canvasConfig.autoChangeIndex=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("autoChangeIndex",y)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"checkboxColor",{get:function(){return this._uiConfig.canvasConfig.checkboxColor||"#333"},set:function(y){var S;Object(s.p)(y)?(this.uiConfig.canvasConfig.checkboxColor=y,null===(S=this.ui)||void 0===S||S.setInnerTbProp("checkboxColor",y)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"outerBorder",{get:function(){return this._uiConfig.outerBorder},set:function(y){var S;Object(s.o)(y)?(this._uiConfig.outerBorder=y,null===(S=this.ui)||void 0===S||S.setOuterBorder(y),this._e(i.a.OK)):this._e(i.a.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"sidebarWidth",{get:function(){return this._uiConfig.sidebarWidth},set:function(y){var S;Object(s.x)(y)?(this._uiConfig.sidebarWidth=y,null===(S=this.ui)||void 0===S||S.setSidebarWidth(y),this._e(i.a.OK)):this._e(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"width",{get:function(){var y;return(null===(y=this.ui)||void 0===y?void 0:y.getViewerWidth())||this._uiConfig.width},set:function(y){var S;Object(s.x)(y)?(this._uiConfig.width=y,null===(S=this.ui)||void 0===S||S.setViewerWidth(y),this._e(i.a.OK)):this._e(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"height",{get:function(){var y;return(null===(y=this.ui)||void 0===y?void 0:y.getViewerHeight())||this._uiConfig.height},set:function(y){var S;Object(s.x)(y)?(this._uiConfig.height=y,null===(S=this.ui)||void 0===S||S.setViewerHeight(y),this._e(i.a.OK)):this._e(i.a.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"uiConfig",{get:function(){return this._uiConfig},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"operationMode",{get:function(){return this._config.operationMode},set:function(y){var S;Object(s.v)(y)?-1!==[0,1,2].indexOf(y)?(this._config.operationMode=y,this.vm.setOperationMode(y),null===(S=this.ui)||void 0===S||S.setOperationMode(y),this._e(i.a.OK)):this._e(i.a.PARAMETER_INVALID):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"allowSlide",{get:function(){return this.vm.getAllowSlide()},set:function(y){Object(s.n)(y)?(this.vm.setAllowSlide(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"tabMode",{get:function(){return this._config.tabMode},set:function(y){"single"===y||"multiple"===y?(this._config.tabMode=y,this.vm.setTabMode(y),this._e(i.a.OK)):this._e(i.a.PARAMETER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"selectionBoxAspectRatio",{get:function(){return this.vm.getAspectRatio()},set:function(y){var S;Object(s.v)(y)?(this.vm.setAspectRatio(y),null===(S=this.ui)||void 0===S||S.setAspectRatio(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"keepAspectRatio",{get:function(){return this.vm.getKeepAspectRatio()},set:function(y){Object(s.n)(y)?this.vm.setKeepAspectRatio(y):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"displayMode",{get:function(){return this._config.displayMode},set:function(y){var S;Object(s.y)(y)?-1!==["single","continuous"].indexOf(String(y))?(this._config.displayMode=y,null===(S=this.ui)||void 0===S||S.setDisplayMode(y),this.vm.setDisplayMode(y),this._e(i.a.OK)):this._e(i.a.PARAMETER_RANGE):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"zooming",{get:function(){return this._config.zooming},set:function(y){s.n?(this._config.zooming=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"scrollX",{get:function(){return this._config.scrollX},set:function(y){s.n?(this._config.scrollX=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"scrollY",{get:function(){return this._config.scrollY},set:function(y){s.n?(this._config.scrollY=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"keepZoom",{get:function(){return this._config.keepZoom},set:function(y){Object(s.n)(y)?(this._config.keepZoom=y,this.vm.setKeepZoom(y),this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"ifAllowSlide",{get:function(){return this._config.ifAllowSlide},set:function(y){Object(s.n)(y)?(this._config.ifAllowSlide=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"zoomInDelta",{get:function(){return this._config.zoomInDelta},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this._config.zoomInDelta=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"zoomOutDelta",{get:function(){return this._config.zoomOutDelta},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this._config.zoomOutDelta=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"zoomDelta",{get:function(){return this._config.zoomDelta},set:function(y){Object(s.v)(y)?y<=0?this._e(i.a.PARAMETER_RANGE):(this._config.zoomDelta=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"currentPageCount",{get:function(){return this.vm.getCurPageCount()},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"showLatestPage",{get:function(){return this._config.showLatestPage},set:function(y){Object(s.n)(y)?(this._config.showLatestPage=y,this.vm.showLatest=y,this._e(i.a.OK)):this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"container",{get:function(){return this._config.container},set:function(y){""===y||Object(s.q)(y)||Object(s.q)(y)?this._config.container=y:this._e(i.a.PARAM_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"optimizeImage",{get:function(){return this.vm.useHermite},set:function(y){this.vm.setUseHermite(y)},enumerable:!1,configurable:!0}),L}(d.a),V=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),J=function(re){function L(y){var S=re.call(this,y)||this;return S.vws=[],S.name=y.name,S.type=y.type,S.chs=y.chs||[],S}return V(L,re),L.prototype.getCounts=function(){return this.chs.length},L.prototype.addViewer=function(y){return-1==this.vws.indexOf(y)&&(this.vws.push(y),!0)},L.prototype.removeViewer=function(y){var S=this.vws.indexOf(y);return-1!=S&&(this.vws.splice(S,1),!0)},L}(b),te=function(){function re(L){this.tabs=[],this.mode="single",this.tabs=[]}return re.prototype.addTab=function(L,y){var S=this.checkTab(L.uid),x=null;return-1!==S?x=this.tabs[S]:(x=new J(L),this.tabs.push(x)),y&&x.addViewer(y),x},re.prototype.getTab=function(L){var y=this.checkTab(L);return-1===y?null:this.tabs[y]},re.prototype.removeTab=function(L){var y=this.checkTab(L);y>-1&&this.tabs.splice(y,1)},re.prototype.checkTab=function(L){for(var y=this.tabs.length,S=0;S<y;S++)if(this.tabs[S].uid===L)return S;return-1},re.prototype.setMode=function(L){return("single"===L||"multiple"===L)&&(this.mode=L,!0)},re.prototype.removePage=function(L,y){var S=this.checkTab(L);return-1!=S&&this.tabs[S].remove(y)},re.prototype.dispose=function(){},re}(),oe=function(){function re(L,y,S){this.baseSize=0,this.mainWidth=0,this.mainHeight=0,this.minorWidth=0,this.minorHeight=0,this._curOpType=null,this.saveColor=null,this.saveType="image/jpg",this.scale=1,this.isKeepCanvasSize=!1,this.isDisposed=!1,this.uid=L,this.baseSize=y=y||3840;var x=document.createElement("canvas"),W=document.createElement("canvas");x.id="dvs_used_as_offscreenCanvas_main_"+this.uid,W.id="dvs_used_as_offscreenCanvas_minor_"+this.uid,this.mainCanvas=x,this.minorCanvas=W,this.mainCtx=x.getContext("2d"),this.minorCtx=W.getContext("2d"),this._setCanvasSize(y,y),void 0!==S?this.isKeepCanvasSize=S:Object(s.u)()&&(this.isKeepCanvasSize=!0)}return re.prototype.dispose=function(){this.isDisposed||(this._setCanvasSize(1,1),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCanvas=null,this.minorCanvas=null,this.mainCtx=null,this.minorCtx=null,this.isDisposed=!0)},re.prototype.reset=function(){this.scale=1,this.pageUid=null,this._curOpType=null},re.prototype.render=function(L){var y=this,x=L.pageUid,W=L.isMin,j=L.img,ue=L.page,Se=L.midData;if(x!==this.pageUid){this.ownerViewer=L.viewerUid,this.isMin=W,this.pageUid=x;var De=1,K=j.naturalWidth,ke=j.naturalHeight,Xe=(Math.pow(Math.pow(K,2)+Math.pow(ke,2),.5),Math.max(K,ke));this.isKeepCanvasSize?this.mainCanvas.width<Xe&&(this.scale=De=this.baseSize/Xe):this.mainCanvas.width===K&&this.mainCanvas.height===ke||this._setCanvasSize(K,ke),K*=De,ke*=De,K=Math.floor(K),ke=Math.floor(ke),this._setMainSize(K,ke),this._setMinorSize(K,ke),this._clearRect(this.mainCtx),this._clearRect(this.minorCtx),this.mainCtx.drawImage(j,0,0,K,ke),this.minorCtx.drawImage(j,0,0,K,ke),ue?.setNaturalSize(K,ke);var et=Se.edt.all.slice();Se.edt.reset(),et.forEach(function($e){"rotate"===$e.type?(Se.edt.rotate($e.angle,0,0,$e.mode),y.rotate($e,ue,Se)):"flip"===$e.type?(Se.edt.flip($e.direction),y.flip($e,ue,Se)):"crop"===$e.type?(Se.edt.crop($e.left,$e.top,$e.width,$e.height),y.crop($e,ue)):"erase"===$e.type?(Se.edt.erase($e.left,$e.top,$e.width,$e.height,$e.color),y.erase($e,ue)):"changeSize"===$e.type&&(Se.edt.changePageSize($e.width,$e.height),y.changePageSize($e,ue))})}},re.prototype.rotate=function(L,y,S){var x=this,W=x.mainCanvas,j=x.minorCanvas,ue=x.mainCtx,Se=x.minorCtx,De=null,K=this.mainWidth,ke=this.mainHeight,Xe=1,et=0,$e=!1;if(0===L.mode){if(K=(De=Object(s.E)(0,0,this.minorWidth,this.minorHeight,L.calcAngle)).width,ke=De.height,et=Math.pow(Math.pow(K,2)+Math.pow(ke,2),.5),$e=!this.isKeepCanvasSize&&(this.mainCanvas.width!==K||this.mainCanvas.height!==ke),this.isKeepCanvasSize){var nt=Math.max(K,ke);this.mainCanvas.width<nt&&(Xe=this.baseSize/nt)}K*=Xe,ke*=Xe}null!==this._curOpType&&this._curOpType!==L.mode&&(De&&$e&&this._setMinorCanvasSize(et,et),this._setMinorSize(this.mainWidth,this.mainHeight),this._clearRect(Se),Se.save(),ue.beginPath(),Se.rect(0,0,this.minorWidth,this.minorHeight),Se.clip(),Se.closePath(),Se.drawImage(W,0,0),ue.restore()),this._curOpType=L.mode,De&&($e&&this._setMainCanvasSize(et,et),this._setMainSize(K,ke)),this._clearRect(ue),ue.save(),ue.beginPath(),ue.rect(0,0,this.mainWidth,this.mainHeight),ue.clip(),ue.closePath(),this._fillRect(ue,this.mainWidth,this.mainHeight),ue.translate(this.mainWidth/2,this.mainHeight/2),S.edt.setTransform(ue);var ct=this.minorWidth*Xe/this.minorWidth,ut=j.width*ct,lt=j.height*ct;ue.drawImage(j,Math.floor(-this.minorWidth*Xe/2),Math.floor(-this.minorHeight*Xe/2),Math.floor(ut),Math.floor(lt)),ue.restore(),De&&y?.setNaturalSize(K,ke)},re.prototype.flip=function(L,y,S){var x=this.minorCanvas,W=this.mainCtx;this._clearRect(W),W.save(),W.beginPath(),W.rect(0,0,this.mainWidth,this.mainHeight),W.clip(),W.closePath(),this._fillRect(W,this.mainWidth,this.mainHeight),W.translate(this.mainWidth/2,this.mainHeight/2),S.edt.setTransform(W),W.drawImage(x,Math.floor(-this.minorWidth/2),Math.floor(-this.minorHeight/2)),W.restore()},re.prototype.crop=function(L,y){var S=this,x=S.mainCanvas,W=S.minorCanvas,j=S.mainCtx,ue=S.minorCtx,Se=S.scale,De=L.left,K=L.top,ke=L.width,Xe=L.height;De*=Se,K*=Se,this._setMinorSize(ke*=Se,Xe*=Se),this._clearRect(ue),ue.save(),ue.beginPath(),ue.rect(0,0,ke,Xe),ue.clip(),ue.closePath(),ue.translate(-De,-K),ue.drawImage(x,0,0),ue.restore(),this._setMainSize(ke,Xe),this._clearRect(j),j.save(),j.beginPath(),j.rect(0,0,this.mainWidth,this.mainHeight),j.clip(),j.closePath(),j.drawImage(W,0,0),j.restore(),y?.setNaturalSize(ke,Xe)},re.prototype.erase=function(L,y){var S=this,x=S.mainCanvas,W=S.mainCtx,j=S.minorCtx,ue=S.scale,Se=L.left,De=L.top,K=L.width,ke=L.height,Xe=L.color;Se*=ue,De*=ue,K*=ue,ke*=ue,Xe=Xe||"#ffffff",this._clearRect(j),j.save(),j.beginPath(),j.rect(0,0,this.minorWidth,this.minorHeight),j.clip(),j.closePath(),j.drawImage(x,0,0),j.fillStyle=Xe,j.fillRect(Se,De,K,ke),j.restore(),W.save(),W.fillStyle=Xe,W.fillRect(Se,De,K,ke),W.restore()},re.prototype.changePageSize=function(L,y){var S=this,x=S.mainCanvas,W=S.minorCanvas,j=S.mainCtx,ue=S.minorCtx,Se=L.width,De=L.height,K=this.scale,ke=Math.pow(Math.pow(Se,2)+Math.pow(De,2),.5);if(this.isKeepCanvasSize){var Xe=Math.max(Se,De);this.mainCanvas.width<Xe&&(this.scale=K=this.baseSize/Xe)}else this.mainCanvas.width<ke&&this._setMinorCanvasSize(ke,ke);this._setMinorSize(Se*=K,De*=K),this._clearRect(ue),ue.save(),ue.beginPath(),ue.rect(0,0,this.minorWidth,this.minorHeight),ue.clip(),ue.closePath();var ct=x.height*(De/this.mainHeight);ue.drawImage(x,0,0,Math.floor(x.width*(Se/this.mainWidth)),Math.floor(ct)),ue.restore(),this.isKeepCanvasSize||this.mainCanvas.width<ke&&this._setMainCanvasSize(ke,ke),this._setMainSize(Se,De),this._clearRect(j),j.save(),j.beginPath(),j.rect(0,0,this.mainWidth,this.mainHeight),j.clip(),j.closePath(),j.drawImage(W,0,0),j.restore(),y?.setNaturalSize(Se,De)},re.prototype._clearRect=function(L){L.clearRect(0,0,L.canvas.width,L.canvas.height)},re.prototype._fillRect=function(L,y,S){return L.save(),L.fillStyle=this.saveColor,L.fillRect(0,0,y,S),L.restore(),!0},re.prototype._setMainSize=function(L,y){this.mainWidth=L,this.mainHeight=y},re.prototype._setMinorSize=function(L,y){this.minorWidth=L,this.minorHeight=y},re.prototype._setCanvasSize=function(L,y){this.mainCanvas.width=L,this.mainCanvas.height=y,this.minorCanvas.width=L,this.minorCanvas.height=y},re.prototype._setMainCanvasSize=function(L,y){this.mainCanvas.width=L,this.mainCanvas.height=y},re.prototype._setMinorCanvasSize=function(L,y){this.minorCanvas.width=L,this.minorCanvas.height=y},re}();function Ee(){onmessage=function(re){var L=re.data.core,y=re.data.width_source,S=re.data.height_source,x=re.data.width,W=re.data.height,j=y/x,ue=S/W,Se=Math.ceil(j/2),De=Math.ceil(ue/2),K=null;try{K=new Uint8ClampedArray(re.data.source)}catch{K=new Uint8Array(re.data.source)}var ke=x*W*4,Xe=new ArrayBuffer(ke),et=null;try{et=new Uint8ClampedArray(Xe,0,ke)}catch{et=new Uint8Array(Xe,0,ke)}for(var $e=0;$e<W;$e++)for(var nt=0;nt<x;nt++){var ct=4*(nt+$e*x),ut=0,lt=0,It=0,bt=0,Dt=0,wt=0,Mt=0,Ut=$e*ue,Pt=Math.floor(nt*j),Zt=Math.ceil((nt+1)*j),_n=Math.floor($e*ue),wn=Math.ceil(($e+1)*ue);Zt=Math.min(Zt,y),wn=Math.min(wn,S);for(var fn=_n;fn<wn;fn++)for(var Sn=Math.abs(Ut-fn)/De,qn=nt*j,wr=Sn*Sn,jt=Pt;jt<Zt;jt++){var mr=Math.abs(qn-jt)/Se,Kn=Math.sqrt(wr+mr*mr);if(!(Kn>=1)){var er=4*(jt+fn*y);Mt+=(ut=2*Kn*Kn*Kn-3*Kn*Kn+1)*K[er+3],It+=ut,K[er+3]<255&&(ut=ut*K[er+3]/250),bt+=ut*K[er],Dt+=ut*K[er+1],wt+=ut*K[er+2],lt+=ut}}et[ct]=bt/lt,et[ct+1]=Dt/lt,et[ct+2]=wt/lt,et[ct+3]=Mt/It}var Cn={core:L,target:et,taskUid:re.data.taskUid};try{postMessage(Cn,[et.buffer])}catch{postMessage(Cn,null)}et=null}}var ge=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),Re=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},G=function(re){function L(y,S,x,W){var j=re.call(this,S)||this;j._defaultConfig={container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showSelectBox:!1,showRemoveBtn:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,rows:4,columns:1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)",autoChangeIndex:!1,scrollDirection:"vertical"},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}},j._ViewUi=null,j._scrBarW=0,j._q=[],j.loader=[!1,!1,!1,!1],j._cors=!0,j._outW=4096,j._outH=4096,j._minW=800,j._minH=800,j._group={},j._resizeCb=null,j._focus={viewerId:void 0,thumbnailId:void 0},j.isCanvasInit=!1,j.width=0,j.height=0,j.tempWidth=0,j.tempHeight=0,j.offScreenCanvas=null,j.isDisposed=!1,j.vws=[],j._db=x,j._tabMng=new te,j._mPub=new d.a,j.offScreenCanvas=new oe(W,y.baseCanvasSize,y.isKeepCanvasSize);var ue=document.createElement("canvas");ue.id="dvs_generate_min_cvs_"+W,j.canvas=ue;var Se=document.createElement("canvas");return Se.id="dvs_saveTransformation_cvs_"+W,j.saveCanvas=Se,j._initTopEvent(),j._initViewerEvent(),Object(s.A)(y,j._defaultConfig),Object(s.t)()||Object(s.u)()||j.initWorkerUlr(),j._getScrBarW(),j.createViewer(),j}return ge(L,re),L.prototype._initTopEvent=function(){var y=this;this.on(i.b.LOAD_TO_VIEWER,function(S,x,W,j){y._load(S,x,W,j)}),this.on(i.b.OPEN_TO_VIEWER,function(S,x,W){y._open(S,x,W)}),this.on(i.b.RENAME_TAG,function(S,x,W,j){var ue=y._tabMng.getTab(j);ue&&ue.vws.forEach(function(Se){var De=y.uidViewer(Se);De&&De.vm.renameTag(S,x,j)})}),this.on(i.b.EMPTY_TAG,function(S,x,W){var j=y._tabMng.getTab(W);j&&j.vws.forEach(function(ue){var Se=y.uidViewer(ue);Se&&Se.vm.emptyTag(W)})}),this.on(i.b.ADD_PAGE_TAG,function(S,x,W){var j=y._tabMng.getTab(W);j&&j.vws.forEach(function(ue){var Se=y.uidViewer(ue);Se&&Se.vm.addPageTag(S,W)})}),this.on(i.b.REMOVE_PAGE_TAG,function(S,x,W){var j=y._tabMng.getTab(W);j&&j.vws.forEach(function(ue){var Se=y.uidViewer(ue);Se&&Se.vm.rmPageTag(S,W)})}),this.on(i.b.REMOVE_FILE,function(S){y.emit(i.b.REMOVE_PAGE,{},S.chs.slice());var x=y._tabMng.getTab(S.uid);x&&(x.vws.forEach(function(W){var j=y.uidViewer(W);j&&j.closeTab(S.uid)}),y._tabMng.removeTab(S.uid))}),this.on(i.b.TAG_CHANGED,function(S){y.vws.forEach(function(x){x.vm.changeTag(S)})}),this.on(i.d.DIRECTORY_CHANGED,function(S){y.vws.forEach(function(x){x.vm.changeDir(S)})}),this.on(i.b.UPDATE_FOR_VIEWER,function(S,x){var W=y._db.getMid(S);W&&(S===y.offScreenCanvas.pageUid&&y.offScreenCanvas.reset(),y._tabMng.tabs.forEach(function(j){-1!==j.chs.indexOf(S)&&j.vws.forEach(function(ue){var Se=y.uidViewer(ue);Se&&(Se.vm.updateSync(S,j.uid,x),Se.vm.showThbItem(S))})}),W.minData||y._loadMinPic(S))})},L.prototype._initViewerEvent=function(){var y=this;this.onM("dvsRenderMainPage",function(S,x){S.forEach(function(W){var j=y.uidViewer(W);j&&j.vm.renderMainPage(x)})}),this.onM(i.b.APPEND_SYNC,function(S,x){y.emit(i.b.APPEND_SYNC,S,x)}),this.onM(i.b.UPDATE_SYNC,function(S,x,W){y.emit(i.b.UPDATE_SYNC,S,x,W)}),this.onM(i.d.ERROR,function(S){y._err(S)}),this.onM(i.b.LOAD_PAGE,function(S){y._loadMinPic(S)}),this.onM(i.b.CHANGE_PAGE,function(S,x,W){y._getGroup(S).forEach(function(j){if(j.uid!==S)switch(x){case"first":j.vm.firstPage(!1);break;case"last":j.vm.lastPage(!1);break;case"next":j.vm.nextPage(!1);break;case"prev":j.vm.prevPage(!1);break;case"goto":j.vm.gotoPage(W,!1);break;case"cur":j.vm.setCurIndex(W,!1);break;case"slt":j.vm.setSltPages(W,!1)}})}),this.onM(i.b.REORDER_PAGE,function(S,x,W,j,ue){var Se=y._tabMng.getTab(x.uid);if(Se){var De=Se.uid;Se.vws.forEach(function(K){if(S!==K){var ke=y.uidViewer(K);if(ke)switch(W){case"switch":ke.vm.switchPage(j,ue,!1,De);break;case"move":ke.vm.movePage(j,ue,!1,De);break;case"reorder":ke.vm.reorderPage(j,ue,!1,De)}}}),Se[W](j,ue),y.emit(i.b.REORDER_PAGE,x,W,j,ue)}}),this.onM(i.b.REMOVE_PAGE,function(S,x,W){y.vws.forEach(function(j){j.uid!==S&&j.vm.remove(W,!1,x.uid)}),W.forEach(function(j){y._tabMng.tabs.forEach(function(ue){ue.remove(j)})}),y.emit(i.b.REMOVE_PAGE,x,W)}),this.onM(i.b.EDIT,function(S,x){var W=x.uid,j=y._db.getMid(W);if(j){if(y._loadMinPic(W),j.vws.length){var ue=y.offScreenCanvas;if(ue.pageUid===W)switch(S){case"rotate":ue.rotate(x.rotateObj,x.page,x.interlayerData);break;case"flip":ue.flip(x.flipObj,x.page,x.interlayerData);break;case"crop":ue.crop(x.cropObj,x.page);break;case"erase":ue.erase(x.eraseObj,x.page);break;case"changePageSize":ue.changePageSize(x.changeSizeObj,x.page);break;case"reset":ue.reset()}}j.vws.forEach(function(Se){var De=y.uidViewer(Se);De&&De.vm.uidIdx(W)===De.vm.getCurIndex()&&De.vm.render()})}}),this.onM(i.b.REMOVE_VIEWER_UID,function(S,x){var W=y._tabMng.getTab(S);W&&W.removeViewer(x)})},L.prototype._getGroup=function(y){var S=this,x=[],W=this.uidViewer(y);return W&&this._group[W.group].forEach(function(j){var ue=S.uidViewer(j);ue&&x.push(ue)}),x},L.prototype._loadMinPic=function(y){for(var S=this._q,x=-1,W=0;W<this.loader.length;W++)if(!this.loader[W]){x=W;break}-1!==x?(this.loader[x]=!0,this.runLoader(y,x)):-1===S.indexOf(y)&&S.push(y)},L.prototype._convertData=function(y){return new Promise(function(S,x){if(Object(s.w)(y))S(y);else{var W=new XMLHttpRequest;W.onload=function(){var j=s.a.createURL(W.response);S(j)},W.open("GET",y,!0),W.responseType="blob",W.send()}})},L.prototype.runLoader=function(y,S){var x=this,W=this._db.getMid(y);if(W&&W.minData&&W.vws.forEach(function(ke){var Xe=-1;x.vws.some(function(et,$e){if(et.uid===ke)return Xe=$e,!0}),-1!==Xe&&x.vws[Xe].vm.showThbItem(y)}),!W||W.activeMin||W.minData){var j=this._q.shift();j?this.runLoader(j,S):this.loader[S]=!1}else{var ue=!1,Se=Object(s.I)(11);W.activeMin=!0,W.minTask=Se;var De=new Promise(function(ke,Xe){W.oriData?(ue=!0,ke(W.oriData)):x._db.getDataAsync(y).then(function(et){if(Object(s.y)(et.oriData)&&(ue=!0),10===document.documentMode)x._convertData(et.oriData).then(function(nt){ke(nt)});else{var $e=s.a.createURL(et.oriData);ke($e)}}).catch(function(et){Xe(et)})}),K=new Promise(function(ke,Xe){De.then(function(et){var $e=new Image;x._cors&&($e.crossOrigin="anonymous"),$e.src=et,$e.onload=function(){var nt=x._db.getMid(y);if(!nt||nt.minTask!==Se)return Xe("task cancel or page does not exist");$e.onload=null,$e.onerror=null,ke($e)},$e.onerror=function(nt){return $e.onload=null,$e.onerror=null,Xe(nt)}}).catch(function(et){Xe(et)})});new Promise(function(ke,Xe){K.then(function(et){var $e=x._db.getMid(y);if(!$e||$e.minTask!==Se)return Xe("task cancel or page does not exist");x.offScreenCanvas||Xe("OffScreenCanvas is disposed");var nt=x.offScreenCanvas;if(nt.isDisposed)return Xe("The offScreenCanvas is disposed.");nt.render({viewerUid:"",pageUid:y,isMin:!0,img:et,page:null,midData:$e});var ct=et.naturalWidth/et.naturalHeight,ut=1;ct>=1&&nt.mainWidth>x._minW?ut=x._minW/nt.mainWidth:ct<1&&nt.mainHeight>x._minH&&(ut=x._minH/nt.mainHeight);var lt=nt.mainWidth*ut,It=nt.mainHeight*ut,bt=x.canvas,Dt=bt.getContext("2d");bt.width!==lt&&(bt.width=lt),bt.height!==It&&(bt.height=It);var wt=lt/nt.mainWidth,Ut=nt.mainCanvas.height*wt;Dt.drawImage(nt.mainCanvas,0,0,Math.floor(nt.mainCanvas.width*wt),Math.floor(Ut)),($e.overlays||[]).forEach(function(Pt){Dt.save(),Dt.globalAlpha=Pt.opacity,Dt.fillStyle=Pt.color,Dt.fillRect(Pt.left*ut,Pt.top*ut,Pt.width*ut,Pt.height*ut),Dt.restore()}),!ue&&et.src&&(s.a.revokeObjectURL(et.src),et.src=""),bt.toBlob(function(Pt){var Zt=x._db.getMid(y);Zt&&Zt.minTask===Se||Xe("task cancel or page does not exist"),ke(Pt)},"image/png")}).catch(function(et){Xe(et)})}).then(function(ke){var Xe=s.a.createURLWithType(ke),et=x._db.getMid(y);et&&et.minTask===Se&&(et.activeMin=!1,et.minData=Xe.data,et.vws.forEach(function(nt){var ct=-1;x.vws.some(function(ut,lt){if(ut.uid===nt)return ct=lt,!0}),-1!==ct&&x.vws[ct].vm.showThbItem(y)}));var $e=x._q.shift();$e?x.runLoader($e,S):x.loader[S]=!1}).catch(function(ke){var Xe=x._db.getMid(y);Xe&&Xe.minTask===Se&&(Xe.activeMin=!1);var et=x._q.shift();et?x.runLoader(et,S):x.loader[S]=!1})}},L.prototype._open=function(y,S,x){var W=this,j=y.uid,ue=y.chs.slice(),Se=this._tabMng.getTab(j);Se||(Se=this._tabMng.addTab({uid:j,name:y.name,type:S,chs:[]},x)),Se.chs=ue;var De=this.vws,K=null;if(x){if(0===(K=this._getGroup(x).map(function(ke){return ke.uid})).length)return void this._err(i.a.PARAMETER_INVALID);De=(K=Object(s.J)(Re(K,Se.vws))).map(function(ke){return W.uidViewer(ke)})}De.forEach(function(ke){if(ke){Se.addViewer(ke.uid);var Xe=ke.vm.tabHandler(Se,null,!0);Xe&&ke.vm.showTab(Xe,"filter")}})},L.prototype._load=function(y,S,x,W){var j=this,ue=y.uid,Se=y.chs.slice(),De=this._tabMng.getTab(ue);De||(De=this._tabMng.addTab({uid:ue,name:y.name,type:S,chs:[]})),this.vws.forEach(function(K){De.addViewer(K.uid)}),De.chs=Se,De.vws.forEach(function(K){var ke,Xe=j.uidViewer(K);if(Xe){De.chs.forEach(function(nt){var ct=j._db.getMid(nt);ct&&ct.addViewer(Xe.uid)});var et=null;"all"!==De.type.toLowerCase()&&(et=x);var $e=null===(ke=Xe.vm)||void 0===ke?void 0:ke.tabHandler(De,et,!1);$e&&Xe.vm.showTab($e)}})},L.prototype.bindViewUi=function(y){if(!Object(s.s)(y))return this.emit(i.d.ERROR,i.a.PARAM_TYPE),!1;this._ViewUi=y,this.vws.forEach(function(S){S.ViewUi=y})},L.prototype.createViewer=function(y,S){var x=this;void 0===y&&(y={});var W=null,j=[],ue=null;if(S){if(!(ue=this.uidViewer(S)))return this._err(i.a.PARAMETER_INVALID),null;j=this._group[W=ue.group]}else W=Object(s.I)(11),this._group[W]=j;var Se=Object(s.d)(this._defaultConfig);Object(s.A)(y,Se);var De={config:Se,viewUi:this._ViewUi,workerBlobURL:this._hermiteWorkerUrl,scrollbarWidth:this._scrBarW,groupUid:W,defaultConfig:this._defaultConfig,mPub:this._mPub.getPublishSubscribe(),focus:this._focus,db:this._db,offScreenCanvas:this.offScreenCanvas,saveCanvas:this.saveCanvas},K=new ie(De),ke=K.uid;if(this.vws.push(K),j.push(ke),ue){var Xe=ue.vm.getCurTab();if(Xe){Xe.chs.forEach(function(nt){var ct=x._db.getMid(nt.uid);ct&&ct.addViewer(ke)});var et=this._tabMng.getTab(Xe.uid);et.vws.push(ke);var $e=K.vm.tabHandler(et,null,!0);$e&&($e.setCur(Xe.cur),$e.setSlt(Xe.slt.slice()),K.vm.showTab($e,"filter"))}}return this.emit(i.d.LOG,"Invoking ViewControl#createViewer."),K},L.prototype.removeViewer=function(y){var S,x,W=this;if(!y)return!1;var j=y,ue=null,Se=null;Object(s.w)(y)&&(j=y.uid,ue=y);for(var De=0;De<this.vws.length;De++)if(this.vws[De].uid===j){ue=this.vws[De],Se=De;break}if(null===Se)return!1;var K=this._group[ue.group];if(K){var ke=K.indexOf(j);K.splice(ke,1),0===K.length&&delete this._group[ue.group]}for(var Xe in null===(x=null===(S=this._tabMng)||void 0===S?void 0:S.tabs)||void 0===x||x.forEach(function(et){et.removeViewer(ue.uid)&&et.chs.forEach(function($e){var nt=W._db.getMid($e);nt&&nt.rmViewer(ue.uid)})}),ue.unbindView(),ue.dispose(),ue)ue[Xe]=null,delete ue[Xe];return this.vws.splice(Se,1),this.emit(i.d.LOG,"Invoking ViewControl#removeViewer."),!0},L.prototype.uidViewer=function(y){if(!y)return this.vws[0]||null;for(var S=0,x=this.vws.length;S<x;S++){var W=this.vws[S];if(W.uid===y)return W}return null},L.prototype.idxViewer=function(y){return y>=this.vws.length||y<0?null:this.vws[y]},L.prototype.dispose=function(){var y,S,x,W=this;this.isDisposed||(re.prototype.dispose.call(this),null===(y=this.vws)||void 0===y||y.forEach(function(j){W.removeViewer(j)}),this.vws=null,this.offScreenCanvas.dispose(),this.offScreenCanvas=null,this.canvas.width=1,this.canvas.height=1,this.canvas.getContext("2d").clearRect(0,0,1,1),this.canvas=null,this.saveCanvas.width=1,this.saveCanvas.height=1,this.saveCanvas.getContext("2d").clearRect(0,0,1,1),this.saveCanvas=null,null===(S=this._mPub)||void 0===S||S.dispose(),this._mPub=null,null===(x=this._tabMng)||void 0===x||x.dispose(),this._tabMng=null,this._hermiteWorkerUrl&&(s.a.revokeObjectURL(this._hermiteWorkerUrl),this._hermiteWorkerUrl=null),this.isDisposed=!0)},L.prototype._getScrBarW=function(){var y=document.createElement("div"),S=document.createElement("div");y.appendChild(S),y.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),S.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(y);var x=y.offsetWidth-y.clientWidth;document.body.removeChild(y),this._scrBarW=x,this.vws.forEach(function(W){W.vm.setScrBarW(x)})},L.prototype.initWorkerUlr=function(){this._hermiteWorkerUrl=s.a.createURL(new Blob(["("+Ee.toString()+")()"],{type:"application/javascript"}))},L.prototype.on=function(y,S){re.prototype._on.call(this,y,S)},L.prototype.emit=function(y){for(var S=[],x=1;x<arguments.length;x++)S[x-1]=arguments[x];re.prototype._emit.apply(this,Re([y],S))},L.prototype.onM=function(y,S){this._mPub._on(y,S)},L.prototype.emitM=function(y){for(var S,x=[],W=1;W<arguments.length;W++)x[W-1]=arguments[W];(S=this._mPub)._emit.apply(S,Re([y],x))},L.prototype._err=function(y){this.emit(i.d.ERROR,y)},L.prototype._ok=function(){this.emit(i.d.ERROR,i.a.OK)},L}(d.a),k=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),U=function(re){function L(y,S,x,W){var j=re.call(this,S)||this;return j._vwMng=null,j._vwMng=new G(y,S,x,W),j}return k(L,re),L.prototype.createViewer=function(y,S){return void 0===y&&(y={}),this._vwMng.createViewer(y,S)},L.prototype.getViewerByUid=function(y){return this._vwMng.uidViewer(y)},L.prototype.getViewerByIndex=function(y){return this._vwMng.idxViewer(y)},L.prototype.removeViewer=function(y){return this._vwMng.removeViewer(y)},L.prototype.getViewerList=function(){return this._vwMng.vws.slice()},L.prototype.bindViewUiConstructor=function(y){return this._vwMng.bindViewUi(y)},L.prototype.dispose=function(){var y;re.prototype.dispose.call(this),null===(y=this._vwMng)||void 0===y||y.dispose(),this._vwMng=null},L}(d.a),H=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),ee=function(re){function L(y){var S=re.call(this,y)||this;return S.name=y.name,S.type=y.type,S.parent=y.parent||null,S}return H(L,re),L.prototype.removeChildren=function(y,S){var x=this.chs.length;if(x){for(var W=0;W<x;W++){var j=this.chs[W];if(j.name===y&&j.type===S)return this.chs.splice(W,1)[0]}return!1}return!1},L.prototype.setName=function(y){this.name=y},L.prototype.reorder=function(y){return("file"===this.type||"all"===this.type)&&re.prototype.reorder.call(this,y)},L}(b),ye=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),Z=function(re){function L(y){var S=re.call(this,y)||this;return S.all=null,S.open=!0,S.dfNode=null,S.root=new ee({uid:Object(s.I)(11),name:"root",type:"root",parent:null,chs:[]}),S.dfNode=S.root,S.all=new ee({uid:Object(s.I)(11),name:"All",type:"file"}),S.curNode=S.root,S.selectedNodeId=null,S._initEvent(),S}return ye(L,re),L.prototype.dispose=function(){re.prototype.dispose.call(this)},L.prototype._initEvent=function(){var y=this;re.prototype._on.call(this,i.b.LOAD_FILE,function(S,x,W){var j=W,ue=y.findChild(y.dfNode,S);ue||(ue=y.createFile(S),re.prototype._emit.call(y,i.d.DIRECTORY_CHANGED,y.dfNode)),x.forEach(function(Se){void 0!==W?ue.insert(Se.uid,j++):ue.append(Se.uid),y.all.append(Se.uid)}),re.prototype._emit.call(y,i.b.LOAD_TO_VIEWER,ue,"file",W,y.open),re.prototype._emit.call(y,i.b.LOAD_TO_VIEWER,y.all,"all",W,!1)}),re.prototype._on.call(this,i.b.REORDER_PAGE,function(S,x,W,j){var ue=null;if("file"===S.type){if(!(ue=y._find(S.uid,y.root)))return}else{if("all"!==S.type)return;ue=y.all}ue[{switch:"switch",move:"move",reorder:"reorder"}[x]](W,j)}),re.prototype._on.call(this,i.b.REMOVE_PAGE,function(S,x){x.forEach(function(W){y.all.remove(W),y._rmPage(W,y.root)})})},L.prototype._rmPage=function(y,S){var x=this;if(!(S.chs.length<1))return S.chs[0].uid?void S.chs.forEach(function(W){x._rmPage(y,W)}):S.remove(y)},L.prototype.createFile=function(y){var S=this.dfNode;S||(S=this.root);var x=this.findChild(S,y);return x&&"file"===x.type?(re.prototype._emit.call(this,i.d.ERROR,i.a.FILE_EXIST),x):(x=new ee({uid:Object(s.I)(11),name:y,type:"file",parent:S,chs:[]}),this.curNode.chs.push(x),re.prototype._emit.call(this,i.d.ERROR,i.a.OK),x)},L.prototype.openAll=function(y){return re.prototype._emit.call(this,i.b.OPEN_TO_VIEWER,this.all,"all",y),this.all.chs.slice()},L.prototype.openFile=function(y,S){var x=this.findChild(this.dfNode,y);return x&&"file"===x.type?(re.prototype._emit.call(this,i.b.OPEN_TO_VIEWER,x,"file",S),re.prototype._emit.call(this,i.d.ERROR,i.a.OK),x.chs.slice()):(re.prototype._emit.call(this,i.d.ERROR,i.a.FILE_NOT_EXIST),!1)},L.prototype.removeFile=function(y){for(var S=this.dfNode.chs,x=0;x<S.length;x++)if(S[x].name===y)return re.prototype._emit.call(this,i.b.REMOVE_FILE,S[x]),S.splice(x,1),re.prototype._emit.call(this,i.d.ERROR,i.a.OK),!0;return re.prototype._emit.call(this,i.d.ERROR,i.a.FILE_NOT_EXIST),!1},L.prototype.getCurrentFileList=function(){return this.dfNode.chs.slice()},L.prototype._getSpiltIndex=function(y){for(var S=y.length,x=0;x<S;x++)if("folder"!==y[x].type)return x;return S},L.prototype.findChild=function(y,S){if(y.chs.length>=0){var x=y.chs.filter(function(W){return W.name===S});return x.length?x[0]:null}return null},L.prototype._find=function(y,S){for(var x=S.chs,W=x.length,j=0;j<W;j++){if(x[j].uid===y)return x[j];if(x[j].children){var ue=this._find(y,x[j]);if(ue)return ue}}},L.prototype._err=function(y){re.prototype._emit.call(this,i.d.ERROR,y)},L.prototype._ok=function(){re.prototype._emit.call(this,i.d.ERROR,i.a.OK)},L}(d.a),Q=function(){function re(L){this.autoOpen=!0,this._tree=new Z(L.pubsub)}return re.prototype.dispose=function(){var L;null===(L=this._tree)||void 0===L||L.dispose(),this._tree=null},re.prototype.setDefaultFolder=function(L){this._tree.dfNode=L},re.prototype.openAll=function(){return this._tree.openAll()},re.prototype.getAllContents=function(){return this._tree.all.chs.slice()},re.prototype.openFile=function(L,y){return this._tree.openFile(L,y)},re.prototype.createFile=function(L){return this._tree.createFile(L)},re.prototype.removeFile=function(L){return this._tree.removeFile(L)},re.prototype.getCurrentFileList=function(){return this._tree.getCurrentFileList()},re}(),se=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),le=function(re){function L(y){var S=re.call(this,y)||this;return S.name=y.name,S.chs=y.chs||[],S.uid=y.uid||Object(s.I)(11),S}return se(L,re),L}(b),pe=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),Ce=function(re){function L(y){var S=re.call(this,y)||this;return S.tags=[],S.dfName=null,S.dfUid=null,S.sltUid=null,S.emptyItem=new le({name:"defaultTag",chs:[]}),S._initEvent(),S}return pe(L,re),L.prototype.dispose=function(){re.prototype.dispose.call(this),this.tags=[]},L.prototype._initEvent=function(){var y=this;re.prototype._on.call(this,i.b.LOAD_TAG,function(S){var x=!1,W=S.data;W.tags||(W.tags=[]),y.dfName&&-1===W.tags.indexOf(y.dfName)&&W.tags.push(y.dfName),W.tags.forEach(function(j){y.addTag(j)&&(x=!0);var ue=y.getTag(j);ue.append(S.uid),re.prototype._emit.call(y,i.b.LOAD_TO_VIEWER,ue,"tag",null,null,!1)}),x&&re.prototype._emit.call(y,i.b.TAG_CHANGED,y.getTagList())}),re.prototype._on.call(this,i.b.REORDER_PAGE,function(S,x,W,j){if("tag"===S.type){var ue=y.uidTag(S.uid);ue&&ue[{switch:"switch",move:"move",reorder:"reorder"}[x]](W,j)}}),re.prototype._on.call(this,i.b.REMOVE_PAGE,function(S,x){y.getTagList().forEach(function(W){x.forEach(function(j){W.remove(j)})})})},L.prototype.openTag=function(y,S){var x=this.getTag(y);return x||(this._err(i.a.TAG_NOT_EXIST),x=this.emptyItem),this.setDefaultTag(y),this.sltUid=x.uid,re.prototype._emit.call(this,i.b.OPEN_TO_VIEWER,x,"tag",S),this._ok(),x.chs.slice()},L.prototype.getCurTag=function(){return this.uidTag(this.sltUid)},L.prototype.addTag=function(y,S){if(-1!==this.checkTag(y))return!1;var x=new le({name:y,chs:S||[]});return this.tags.push(x),!0},L.prototype.removeTag=function(y){var S=this.checkTag(y);return-1!==S&&(y===this.dfName&&(this.dfName=null,this.sltUid=null),this.tags.splice(S,1),!0)},L.prototype.emptyTag=function(y){var S=this.getTag(y);return!!S&&(S.clear(),!0)},L.prototype.clear=function(){return this.tags=[],!0},L.prototype.getTagContents=function(y){var S=this.getTag(y);return S?S.chs.slice():null},L.prototype.getDefaultTag=function(){return this.dfName},L.prototype.setDefaultTag=function(y){if(!y)return this.dfName=null,this.dfUid=null,!0;var S=this.checkTag(y);if(-1===S)return!1;var x=this.tags[S];return this.dfName=y,this.dfUid=x.uid,!0},L.prototype.renameTag=function(y,S){if(!Object(s.y)(y)||!Object(s.y)(S))return this._err(i.a.PARAM_TYPE),!1;var x=this.getTag(S),W=this.getTag(y);if(!W)return this._err(i.a.TAG_NOT_EXIST),!1;if(x)return this._err(i.a.TAG_HAVE_EXIST),!1;W.name=S;var j=W.chs.slice();return re.prototype._emit.call(this,i.b.RENAME_TAG,y,S,j,W.uid),this._ok(),!0},L.prototype.checkTag=function(y){for(var S=this.tags.length,x=0;x<S;x++)if(this.tags[x].name===y)return x;return-1},L.prototype.getTagList=function(){return this.tags},L.prototype.getTag=function(y){var S=this.checkTag(y);return-1===S?null:this.tags[S]},L.prototype.uidTag=function(y){for(var S=this.tags.length,x=0;x<S;x++)if(this.tags[x].uid===y)return this.tags[x];return null},L.prototype._err=function(y){re.prototype._emit.call(this,i.d.ERROR,y)},L.prototype._ok=function(){re.prototype._emit.call(this,i.d.ERROR,i.a.OK)},L}(d.a),Te=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},Be=function(){function re(L){this._mng=new Ce(L.pubsub)}return re.prototype.dispose=function(){var L;null===(L=this._mng)||void 0===L||L.dispose(),this._mng=null},re.prototype.getTagList=function(){var L=[];return this._mng.tags.forEach(function(y){var S={name:y.name,uids:y.chs.slice()};L.push(S)}),L},re.prototype.addTag=function(L){return Object(s.y)(L)?!!this._mng.addTag(L)||(this._err(i.a.TAG_HAVE_EXIST),!1):(this._err(i.a.PARAM_TYPE),!1)},re.prototype.removeTag=function(L){var y=this,S=this._mng.getTag(L);return S?(S.chs.slice().forEach(function(x){y.removePageTag(x,L)}),this._ok(),this._mng.removeTag(L)):(this._err(i.a.TAG_NOT_EXIST),!1)},re.prototype.emptyTag=function(L){if(!Object(s.y)(L))return this._err(i.a.PARAM_TYPE),!1;var y=this._mng.uidTag(L);if(!L)return this._err(i.a.TAG_NOT_EXIST),!1;var S=y.chs.slice();return this._emit(i.b.EMPTY_TAG,L,S,y.uid),this._ok(),this._mng.emptyTag(L)},re.prototype.openTag=function(L,y){return this._mng.openTag(L,y)},re.prototype.getCurrentTag=function(){return this._mng.getCurTag()},re.prototype.getTagContents=function(L){return this._mng.getTagContents(L)},re.prototype.getDefaultTag=function(){return this._mng.getDefaultTag()},re.prototype.setDefaultTag=function(L){return this._mng.setDefaultTag(L)},re.prototype.addPageTag=function(L,y){Object(s.y)(L)&&Object(s.y)(y)||this._err(i.a.PARAM_TYPE);var S=this._mng.getTag(y);return S?S.append(L)?(this._emit(i.b.ADD_PAGE_TAG,L,y,S.uid),this._emit(i.b.TAG_CHANGED,this._mng.tags),this._ok(),!0):(this._err(i.a.TAG_HAVE_EXIST),!1):(this._err(i.a.TAG_NOT_EXIST),!1)},re.prototype.removePageTag=function(L,y){var S=this;if(Object(s.y)(L)||this._err(i.a.PARAM_TYPE),void 0===y)this._mng.getTagList().forEach(function(j){j.remove(L),S._emit(i.b.REMOVE_PAGE_TAG,L,j.name,j.uid)});else{Object(s.y)(y)||this._err(i.a.PARAM_TYPE);var x=this._mng.getTag(y);if(!x)return this._err(i.a.TAG_NOT_EXIST),!1;if(!x.remove(L))return this._err(i.a.PAGE_NOT_EXIST),!1;this._emit(i.b.REMOVE_PAGE_TAG,L,y,x.uid)}var W=this._mng.getTagList();return this._emit(i.b.TAG_CHANGED,W),!0},re.prototype.renameTag=function(L,y){return this._mng.renameTag(L,y)},re.prototype._emit=function(L){for(var y,S=[],x=1;x<arguments.length;x++)S[x-1]=arguments[x];(y=this._mng)._emit.apply(y,Te([L],S))},re.prototype._err=function(L){this._emit(i.d.ERROR,L)},re.prototype._ok=function(){this._emit(i.d.ERROR,i.a.OK)},re}(),xe=function(){function re(){this._d={}}return re.prototype.addDataSync=function(L,y){return!this._check(L)&&(this._d[L]=y,!0)},re.prototype.getDataSync=function(L){return this._d[L]},re.prototype.removeDataSync=function(L){return!!this._check(L)&&(delete this._d[L],!0)},re.prototype.updateDataSync=function(L,y){return!!this._check(L)&&(this._d[L]=y,!0)},re.prototype._check=function(L){return void 0!==this._d[L]},re}(),me=function(){function re(L,y){this._d={},this.createDatabase(L,y)}return re.prototype.createDatabase=function(L,y){this._d[L]={},this._d[L][y]={}},re.prototype.addDataAsync=function(L,y,S,x){var W=this;return new Promise(function(j,ue){return W._checkDB(S)?W._checkTable(S,x)?W._checkId(S,x,L)?ue("The "+L+" already exists."):(W._d[S][x][L]=y,void j("Save "+L+" to database successful.")):ue(W._erMsg(1,x)):ue(W._erMsg(0,S))})},re.prototype.getDataAsync=function(L,y,S){var x=this;return new Promise(function(W,j){return x._checkDB(y)?x._checkTable(y,S)?x._checkId(y,S,L)?void W(x._d[y][S][L]):j(x._erMsg(2,L)):j(x._erMsg(1,S)):j(x._erMsg(0,y))})},re.prototype.removeDataAsync=function(L,y,S){var x=this;return new Promise(function(W,j){return x._checkDB(y)?x._checkTable(y,S)?(delete x._d[y][S][L],void W("Remove "+L+" successful.")):j(x._erMsg(1,S)):j(x._erMsg(0,y))})},re.prototype.updateDataAsync=function(L,y,S,x){var W=this;return new Promise(function(j,ue){return W._checkDB(S)?W._checkTable(S,x)?W._checkId(S,x,L)?(W._d[S][x][L]=y,void j("Update "+L+" successful.")):ue(W._erMsg(2,L)):ue(W._erMsg(1,x)):ue(W._erMsg(0,S))})},re.prototype._checkDB=function(L){return void 0!==this._d[L]},re.prototype._checkTable=function(L,y){return void 0!==this._d[L][y]},re.prototype._checkId=function(L,y,S){return void 0!==this._d[L][y][S]},re.prototype._erMsg=function(L,y){return"The "+["database","table","item"][L]+" "+y+" does not exist."},re}(),Me=function(){function re(){this.databaseName="dvsDb",this.documentTableName="dvsDoc",this.imageTableName="dvsImage",this.annotationTableName="dvsAnno",this.middle=new xe,this.metadataMng=new xe,this.DBMng=new me(this.databaseName,this.documentTableName)}return re.prototype.addDataAsync=function(L,y,S,x){return this.DBMng.addDataAsync(L,y,S||this.databaseName,x||this.documentTableName)},re.prototype.getDataAsync=function(L,y,S){return this.DBMng.getDataAsync(L,y||this.databaseName,S||this.documentTableName)},re.prototype.removeDataAsync=function(L,y,S){return this.DBMng.removeDataAsync(L,y||this.databaseName,S||this.documentTableName)},re.prototype.updateDataAsync=function(L,y,S,x){return this.DBMng.updateDataAsync(L,y,S||this.databaseName,x||this.documentTableName)},re.prototype.addMid=function(L,y){return this.middle.addDataSync(L,y)},re.prototype.getMid=function(L){return this.middle.getDataSync(L)},re.prototype.removeMid=function(L){return this.middle.removeDataSync(L)},re.prototype.updateMid=function(L,y){return this.middle.updateDataSync(L,y)},re.prototype.addMetadata=function(L,y){return this.metadataMng.addDataSync(L,y)},re.prototype.getMetadata=function(L){return this.metadataMng.getDataSync(L)},re.prototype.removeMetadata=function(L){return this.metadataMng.removeDataSync(L)},re.prototype.updateMetadata=function(L,y){return this.metadataMng.updateDataSync(L,y)},re}(),Oe=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),ze=function(re){function L(y){var S=re.call(this,y)||this;return S.errorMessage="ok",S.errorCode=0,S._on(i.d.ERROR,S.updateErrorMessage.bind(S)),S}return Oe(L,re),L.prototype.updateErrorMessage=function(y){80003!==y.code&&(this.errorMessage=y.message,this.errorCode=y.code)},L}(d.a),Ze=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),ot=function(re){function L(y){var S=re.call(this,y)||this;return S.logs=[],S.allowLog=!0,S.logs.push(S._formatLog("Initialize DVS object.")),S.logs.push(S._formatLog("Initialize DVS object.")),S._on(i.d.LOG,S.updateLogMessage.bind(S)),S.logs.push(S._formatLog("Complete Log object initialization.")),S}return Ze(L,re),L.prototype.updateLogMessage=function(y){var S;this.allowLog&&(null===(S=null==this?void 0:this.logs)||void 0===S||S.push(null==this?void 0:this._formatLog(y)))},L.prototype._formatLog=function(y){return Object(s.g)("yyyy-MM-dd hh:mm:ss")+" DVS: "+y},L.prototype.clear=function(){this.logs=[]},L.prototype.dispose=function(){re.prototype.dispose.call(this),this.logs=null},L}(d.a),ve=window.Dynamsoft,Fe=n(4),Ve=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},Ye=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}};function Ne(re,L,y,S,x){return void 0===x&&(x={}),Ve(this,void 0,void 0,function(){var W,j,ue,Se;return Ye(this,function(De){switch(De.label){case 0:return[4,L.DataControl.getData(y)];case 1:return W=De.sent(),j=W.customData,ue=Je(re),j?S&&(j.resBlob&&delete j.resBlob,j.preview&&delete j.preview):j={},x&&(Se=S?["angle","detectArea","filterValue","bitDepth"]:["angle","detectArea","filterValue","bitDepth","resBlob","preview"],Object(Fe.each)(Se,function(K){void 0!==x[K]&&(j[K]=x[K])}),!j.oriBlob&&x.oriBlob&&(j.oriBlob=x.oriBlob)),L.DataControl.updateSync(y,{oriData:re.imageData,metadata:ue,customData:j},!0),[2,!0]}})})}function Je(re){return{width:re.imageWidth,height:re.imageHeight,bitDepth:re.imageBitDepth,resolutionX:re.imageXResolution,resolutionY:re.imageYResolution,rgba:re.rgba,bgra:re.bgra}}function we(){var re=document.querySelectorAll(".preFilter");if(re)for(var L=0;L<re.length;L++){var y=re[L];y&&"IMG"==y.tagName&&y.src&&(s.a.revokeObjectURL(y.src),y.onload=null,y.parentNode.remove())}}function Ae(){var re;we(),null===(re=document.querySelector(".dcs-filterDropDown"))||void 0===re||re.remove()}function Ue(re){return!1===(re||{}).visibility?{visibility:!1}:{}}function He(re,L,y,S){return s.b.log("blobToImageData"),ht(re,L,y,S,{quality:85,returnType:ve.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(x){return x.result})}function Ke(re){return s.b.log("ImageDataToBlob"),ht(re,void 0,void 0,void 0,{quality:85,returnType:ve.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(y){return re.imageData=y.src,y.result})}function rt(re,L,y){return Ve(this,void 0,void 0,function(){var S;return Ye(this,function(W){return y&&(S={points:y}),[2,ht(re,L,S,!0,{quality:85,returnType:ve.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(j){return re.imageData=j.src,j.result})]})})}function st(re,L,y,S){var x,W="fe8e14";return y&&Object(s.y)(y.stroke)&&0==y.stroke.indexOf("#")&&(W=y.stroke.substr(1)),L&&(x={points:ft(L),lineWidth:5,strokeColor:W}),ht(re,S,x,!1,!1,!0).then(function(j){return j.preview})}function ht(re,L,y,S,x,W){return Ve(this,void 0,void 0,function(){var j,ue;return Ye(this,function(Se){return ue={polygon:j=void 0,doPerspective:j,source:{angle:j},output:{orgImage:j,previewImage:j}},Object(s.A)(re,ue.source),ue.source.angle=L,y&&(ue.polygon=y),S&&y&&y.points&&(ue.doPerspective=!0),!1!==x&&(ue.output.orgImage=x instanceof Object?x:{quality:85,returnType:ve.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==W&&(ue.output.previewImage=W instanceof Object?W:{quality:85,width:200,height:200,returnType:ve.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),[2,ve.ImageProcWrapper.createImage(ue)]})})}function ft(re){for(var L={value:Number.MAX_VALUE,idx:-1},y={value:Number.MAX_VALUE,idx:-1},S=0;S<re.length;S+=2){var x=re[S];x<=L.value?(y=L,L={value:x,idx:S}):x<=y.value&&(y={value:x,idx:S})}var W=re[L.idx+1]<re[y.idx+1]?L.idx:y.idx;return re.slice(W).concat(re.slice(0,W))}function pt(re,L,y){return void 0===y&&(y=1),Math.abs(re-L)<=y}function Ct(re){var L=re.config,y=(void 0===L?{}:L).filterViewer.filter,S=y.defaultValue,x=void 0===S?"original":S;return"original"!==x&&y.valueList.some(function(j){return j.value===x})?x:"original"}function St(re,L,y){return Ve(this,void 0,void 0,function(){var S,x,W,j;return Ye(this,function(ue){var Se,De,K,Xe,et,$e,nt,ct,ut,lt;return x=!1,y&&(S=ft(y),De=re.imageWidth,K=re.imageHeight,Xe=(Se=S)[1],et=Se[2],$e=Se[3],nt=Se[4],ct=Se[5],ut=Se[6],lt=Se[7],x=pt(Se[0],0)&&pt(Xe,0)&&pt(et,De)&&pt($e,0)&&pt(nt,De)&&pt(ct,K)&&pt(ut,0)&&pt(lt,K)),j=!1,x||!y||(W={points:S},j=!0),[2,He(re,L,W,j)]})})}function At(re){var L=re%360;return L<0&&(L+=360),L}var oo=function(re,L,y){return function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,[])).next())})}(this,0,void 0,function(){var S,x,W,j,ue,Se,De,K,ke,Xe,et,$e,nt,lt,Dt,wt,Mt;return function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}}(this,function(Ut){switch(Ut.label){case 0:S=this,x=y.getCurrentPage().options,W=x.file,j=[],ue=0,Se=re.File.getCurrentFileList(),De=Se.find(function(Pt){return"camera"===Pt.name}),ke=(K=De?.chs||[]).length-1,Ut.label=1;case 1:return ue<K.length?(et={uuid:Xe=K[ue]},ue!=ke?[3,4]:[4,re.DataControl.getData(Xe)]):[3,5];case 2:return $e=Ut.sent(),[4,st((nt=$e.customData).oriBlob,nt.detectArea,void 0===(Dt=y.config.scannerViewer.polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:Dt,void 0===(lt=nt.angle)?0:lt)];case 3:wt=Ut.sent(),et.preview=wt,Ut.label=4;case 4:return j.push(et),ue++,[3,1];case 5:return W.blobList=j,S.setCurPageId(null),S.setCurImageData(null),y.showAllPages(),document.getElementById("dvs-camera-container").classList.add("dcs-display-none"),y.multipleView=!1,y.showLoading("close multiple page"),"playing"!=(Mt=y.getStatus())?[3,6]:[3,9];case 6:return"paused"!=Mt?[3,7]:(y.resume(),[3,9]);case 7:return[4,y.play()];case 8:Ut.sent(),Ut.label=9;case 9:return y.emit("resetResolution"),y.hideLoading("close multiple page"),y.emit("focusPage"),[2]}})})},nc=function(re,L,y){return function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,[])).next())})}(this,0,void 0,function(){var S,x,W,j,ue;return function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}}(this,function(De){S=this,y.showLoading("rotate button init");try{L.rotateMode=0,L.rotate(270),x=L.getCurrentIndex(),W=L.getUidByIndex(x),(j=L.getCustomDataByUid(W)).angle=At((void 0===(ue=j.angle)?0:ue)+270),j.resBlob&&delete j.resBlob,S.setCurImageData(null),S.SetFilterDirty(!0),Ae()}finally{y.hideLoading("rotate button init")}return[2]})})},rc=function(re,L,y,S){var x=L.getCurrentIndex();L.vm.getCurPageCount(),L.removeSync(x),S.file.blobList.splice(x,1);var W=document.querySelector(".imgCount");W.innerText=Number(W.innerText)-1+"";var j=document.querySelector(".dcs-btn-multipleImg");if(L.currentPageCount<1)oo.call(this,re,L,y),j?.classList.add("dcs-hidden");else{var ue=L.getCurrentIndex();Gi(this,L.getUidByIndex(ue)).then(function(){L.render()})}},ao=function(re,L,y,S){var x=this,W=L.getCurrentIndex(),j=L.getUidByIndex(W);x.showEditPage(j,{element:S,footerButtons:{save:{icon:"dcs-font dcs-i-save",onclick:function(ue,Se){var De=Se.dcs,K=Se.page;return function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,[])).next())})}(this,0,void 0,function(){var ke,Xe,et,$e,nt,ct,ut,lt;return function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}}(this,function(It){switch(It.label){case 0:De.showLoading("crop save"),It.label=1;case 1:return It.trys.push([1,,10,11]),ke=K.getAngle(),Xe=K.getDetectAreaForNotRotate(),[4,L.getCustomDataByUid(j)];case 2:return[4,He((et=It.sent()).oriBlob)];case 3:return[4,rt(It.sent(),ke,Xe)];case 4:return $e=It.sent(),x.setCurImageData($e),x.SetFilterDirty(!0),[4,Ke($e)];case 5:return nt=It.sent(),lt=void 0,"original"!==(ut=void 0===(ct=et.filterValue)?"original":ct)?[3,6]:(lt=nt,[3,8]);case 6:return[4,De.filterHandlerByIImageData($e,nt,ut)];case 7:lt=It.sent(),It.label=8;case 8:return[4,Ne(lt,re,j,!1,{detectArea:Xe,angle:ke,bitDepth:lt.imageBitDepth})];case 9:return It.sent(),De.navigateBack(),Ae(),[3,11];case 10:return De.hideLoading("crop save"),[7];case 11:return[2]}})})}}}},!0)},No_MAX_IMAGES_IN_BUFFER_LIMIT={code:-4219,message:"The number of images processed exceeded memory limit"},Ls=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},Ns=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}},dp=function(re,L,y,S){var x,W,j=this,ue=this,Se=((null===(x=y.config.filterViewer)||void 0===x?void 0:x.insert)||{}).position;W="before"===(void 0===Se?"before":Se)?L.getCurrentIndex():L.getCurrentIndex()+1;var De=function(et){void 0===et&&(et={});var $e=et.scannerViewer,nt=void 0===$e?{}:$e,ct=nt.resolution,ut=nt.autoScan,lt=nt.autoDetect,It=nt.continuousScan,bt=nt.switchCamera,Dt=nt.loadLocalFile;return{deviceId:nt.deviceId,fill:nt.fullScreen,continuous:It?.enableContinuousScan,headerButtons:{autoDetect:yi({isSelected:!ut?.enableAutoScan&&lt?.enableAutoDetect},Ue(lt)),changeResBtn:Ue(ct)},footerButtons:{load:Ue(Dt),autoCapture:yi({isSelected:ut?.enableAutoScan},Ue(ut)),toggleCamera:Ue(bt),continuous:Ue(It)}}}(y.config);function K(et){var $e;return Ls(this,void 0,void 0,function(){var nt,ct,ut,lt,bt,Dt,wt,Mt,Ut,Pt,Zt,_n,Sn;return Ns(this,function(qn){return ut=et.oriBlob,lt=et.detectArea,bt=et.resBlob,Dt=et.filterBlob||bt||ut,wt=((null===($e=y.config.filterViewer)||void 0===$e?void 0:$e.filter)||{}).defaultValue,Mt=[{oriData:Dt.imageData,metadata:{width:Dt.imageWidth,height:Dt.imageHeight},customData:{detectArea:lt,oriBlob:ut,resBlob:bt,filterValue:wt}}],Zt=void 0===(Pt=(Ut=y.config.scannerViewer||{}).maxDocuments)?20:Pt,L.currentPageCount+1<=(void 0===(_n=Ut.maxImagesInBuffer)?Zt:_n)&&L.currentPageCount+1<=Zt?(ct=W>L.currentPageCount-1?re.DataControl.appendSync("camera",Mt):re.DataControl.insertSync("camera",Mt,W),nt=ct[0],S.file.blobList.splice(W,0,et),(Sn=document.querySelector(".imgCount")).innerText=Number(Sn.innerText)+1+""):y.emit("video-error",No_MAX_IMAGES_IN_BUFFER_LIMIT),y.navigateBack(),y.hideLoading("insertImgByBlobItem"),[2,nt]})})}function ke(et,$e){var nt,ct=!1,ut=!1;(nt=document.createElement("input")).type="file",nt.multiple=!1,nt.accept="image/png,image/jpeg";var lt=function(){nt.value=null,nt.files=null,nt.onchange=null,nt=null,ut=!1,ct=!1,$e.removeGlobalBlurEvent(et),$e.removeGlobalFocusEvent(et)};return ut=!0,nt.click(),ct=!0,new Promise(function(It){$e.addGlobalFocusEvent(et,function(){setTimeout(function(){!ut&&ct&&(s.b.log("select file canceled"),lt(),et.onblur=null,It(null))},200)}),$e.addGlobalBlurEvent(et,function(){ut&&ct&&(s.b.log("selecting file"),ut=!1)}),nt.onchange=function(){if(ct=!1,""===nt.value)lt(),et.onblur=null,It(null);else{var bt=nt.files;bt.length>0?(It(bt[0]),lt(),et.onblur=null):(It(null),lt(),et.onblur=null)}}})}function Xe(et){var $e,nt,ct;return(ve.navInfo.biPhone||ve.navInfo.biPad)&&($e=5,nt=85,ct=3840),ve.ImageProcWrapper.getMax4kImage(et,$e,nt,ct)}Object(s.A)({footerButtons:{capture:{onclick:function(et,$e){return Ls(j,void 0,void 0,function(){var nt;return Ns(this,function(ct){return(nt=$e&&$e.dcs||y).captureLoop.startManualCapture({dcs:nt,page:nt.getCurrentPage()}),[2]})})}},load:{onclick:function(et,$e){return Ls(this,void 0,void 0,function(){var nt,ct,ut,lt,bt,Dt;return Ns(this,function(wt){switch(wt.label){case 0:return(nt=$e&&$e.dcs||y).emit("blurPage"),[4,ke(et.target,nt)];case 1:return(ct=wt.sent())?(nt.showLoading("insert - load image"),[4,nt.stop()]):(nt.emit("focusPage"),[2]);case 2:wt.sent(),wt.label=3;case 3:return wt.trys.push([3,7,8,9]),[4,Xe(ct)];case 4:return ut=wt.sent(),[4,nt.packageBlobItemFromIImageData(ut,!0,!0,!0)];case 5:return lt=wt.sent(),ue.setCurImageData(lt.resImage),ue.SetFilterDirty(!0),lt.resImage&&delete lt.resImage,[4,K(lt)];case 6:return bt=wt.sent(),ue.setCurPageId(bt),[3,9];case 7:throw Dt=wt.sent(),nt.hideLoading("insert - load image"),nt.emit("blurPage"),Dt;case 8:return nt.emit("blurPage"),nt.hideLoading("insert - load image"),[7];case 9:return[2]}})})}},continuous:{visibility:!1}}},De),De.continuous=!1,De.onSaveCapture=function(et,$e,nt,ct,ut){return Ls(this,void 0,void 0,function(){var lt,It,Dt;return Ns(this,function(wt){switch(wt.label){case 0:(lt=$e.dcs).showLoading("OnInsertPageSave"),wt.label=1;case 1:return wt.trys.push([1,,4,6]),[4,lt.packageBlobItemFromIImageData(nt,!0,!0,!1)];case 2:return It=wt.sent(),ue.setCurImageData(It.resImage),ue.SetFilterDirty(!0),It.resImage&&delete It.resImage,[4,K(It)];case 3:return Dt=wt.sent(),ue.setCurPageId(Dt),ct&&lt.setImageDataBack(nt.imageData),lt.emit("blurPage"),[3,6];case 4:return[4,lt.stop()];case 5:return wt.sent(),lt.hideLoading("OnInsertPageSave"),[7];case 6:return[2]}})})},y.showInsertPage(De),y.emit("focusPage")},ru=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},iu=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}},Bs=function(re,L,y,S){var x;return ru(this,void 0,void 0,function(){var W,j,ue,Se,De,K,ke,Xe,et,$e;return iu(this,function(nt){switch(nt.label){case 0:W=this,y.showLoading("save button init"),nt.label=1;case 1:nt.trys.push([1,,17,18]),W.setCurImageData(null),W.SetFilterDirty(!0),j=L.getCurrentPageUids(),ue=[],Se=0,nt.label=2;case 2:return Se<j.length?[4,re.DataControl.getData(De=j[Se])]:[3,7];case 3:return K=nt.sent(),[4,oc(y,K)];case 4:return ke=nt.sent(),Xe=ke.filterBlob,delete ke.filterBlob,ue.push({file:ke,iImageData:Xe}),[4,re.DataControl.removeData(De)];case 5:nt.sent(),nt.label=6;case 6:return Se++,[3,2];case 7:return[4,W._savePhotoCallback(ue)];case 8:return nt.sent(),ue.splice(0),ue=null,y.config.filterViewer.exitDocumentScanAfterSave||y.showAllPages(),L.removeAllSync(),S.file.blobList=[],document.querySelector(".dcs-btn-multipleImg").classList.add("dcs-hidden"),null===(x=document.getElementById("dvs-camera-container"))||void 0===x||x.classList.add("dcs-display-none"),et.style.display=""==(et=document.querySelector(".dvs-showImageArea")).style.display?"block":"",y.config.filterViewer.exitDocumentScanAfterSave?y.multipleCloseHandleFn?[4,y.multipleCloseHandleFn()]:[3,10]:[3,11];case 9:nt.sent(),nt.label=10;case 10:return Ae(),y.emit("video-closed"),y.navigateBack(),[3,16];case 11:return y.multipleView=!1,y.showLoading("close multiple page"),"playing"!=($e=y.getStatus())?[3,12]:[3,15];case 12:return"paused"!=$e?[3,13]:(y.resume(),[3,15]);case 13:return[4,y.play()];case 14:nt.sent(),nt.label=15;case 15:y.emit("resetResolution"),y.hideLoading("close multiple page"),y.emit("focusPage"),nt.label=16;case 16:return[3,18];case 17:return y.hideLoading("save button init"),[7];case 18:return[2]}})})};function oc(re,L){return ru(this,void 0,void 0,function(){var y,S,x,W,j,Se,De,K,ke,Xe,et,$e,nt,ct,ut,lt;return iu(this,function(It){switch(It.label){case 0:return S=(y=L.customData).oriBlob,x=y.detectArea,W=y.filterValue,De=void 0===(Se=y.bitDepth)?0:Se,K=At(void 0===(j=y.angle)?0:j),x&&W&&0==K?(re.emit("resetResolution"),[2,{filterBlob:{imageData:L.oriData,imageBitDepth:De},detectArea:x,oriBlob:S,angle:0,filterValue:W}]):[3,1];case 1:return x?[4,St(S,K,x)]:[3,5];case 2:return ke=It.sent(),(lt=W)||(lt=Ct(re)),[4,Ke(ke)];case 3:return Xe=It.sent(),[4,re.filterHandlerByIImageData(ke,Xe,lt)];case 4:return et=It.sent(),re.emit("resetResolution"),[2,{filterBlob:et,detectArea:x,oriBlob:S,angle:K,filterValue:lt}];case 5:return[4,He(S,K)];case 6:return $e=It.sent(),[4,re.packageBlobItemFromIImageData($e,!0,!0,!1)];case 7:return nt=It.sent(),ct=nt.detectArea,ut=nt.filterBlob,lt=nt.filterValue,re.emit("resetResolution"),[2,{filterBlob:ut,detectArea:ct,oriBlob:S,angle:K,filterValue:lt}]}})})}var Vi=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},Bo=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}},ko=function(re,L,y,S){return Vi(this,void 0,void 0,function(){function x(){W(document.querySelector(".dcs-filterDropDown"),!1)}function W(ct,ut){ct&&(ct.classList[ut?"remove":"add"]("dcs-display-none"),ut&&K&&(ct.scrollLeft=K.offsetLeft),De=ut)}function j(ct,ut){var lt;return Vi(this,void 0,void 0,function(){var It,bt,Dt,wt,Mt,Ut,Pt,Zt,_n,wn,fn,Sn,qn,wr,jt,mr,Kn,er;return Bo(this,function(Cn){switch(Cn.label){case 0:S.showLoading("create filter list"),Cn.label=1;case 1:return Cn.trys.push([1,,12,13]),ct.className="dcs-filterDropDown dropdown dcs-display-none",[4,Se.getCurImageData()];case 2:return It=Cn.sent(),bt=ut.getUidByIndex(ut.getCurrentIndex()),[4,L.DataControl.getData(bt)];case 3:return Dt=Cn.sent(),wt=Dt.customData.filterValue,Mt=null===(lt=S.config.filterViewer)||void 0===lt?void 0:lt.filter,Ut=Mt.valueList,[4,(Fr=It,Ii={source:Fr,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:ve.Enum_ImageType.IT_BGRA,returnBlob:!1,nInterplationMethod:5}}},ve.ImageProcWrapper.createImage(Ii).then(function(tr){return Fr.imageData=tr.src,tr.preview}))];case 4:return[4,Ke(Pt=Cn.sent())];case 5:Zt=Cn.sent(),_n=[],wn=!1,fn=0,Cn.label=6;case 6:return fn<Ut.length?(wr=(Sn=Ut[fn]).label,jt=void 0,"original"!==(qn=Sn.value)?[3,7]:(jt=Zt,wn=!0,[3,9])):[3,11];case 7:return[4,S.filterHandlerByIImageData(Pt,Zt,qn)];case 8:mr=Cn.sent(),jt=mr,Cn.label=9;case 9:jt&&(Kn=s.a.createURL(jt),_n.push({value:qn,url:Kn,label:wr})),Cn.label=10;case 10:return fn++,[3,6];case 11:return Pt=null,wn||_n.unshift({value:"original",url:s.a.createURL(Zt),label:"original"}),Ut.some(function(tr){return tr.value===wt})||(wt="original"),er=document.createDocumentFragment(),_n.forEach(function(tr,lo){var Hr=document.createElement("li");Hr.innerHTML='<img class="preFilter" src="'+tr.url+'"><p>'+tr.label+"</p>",er.appendChild(Hr),Hr.dataset.filterValue=tr.value,tr.value===wt&&(Hr.classList.add("selectedItem"),K=Hr)}),ct.appendChild(er),[3,13];case 12:return S.hideLoading("create filter list"),[7];case 13:return[2]}var Fr,Ii})})}var Se,De,K,ke,Xe,et,$e,nt=this;return Bo(this,function(ct){switch(ct.label){case 0:return Se=this,De=!1,K=null,ke=!1,Xe=document.querySelector(".dvs-filter"),(et=Xe.querySelector(".dcs-filterDropDown"))&&!Se.IsFilterDirty()?[3,2]:($e=!et,et?we():et=document.createElement("ul"),[4,j(et,y)]);case 1:ct.sent(),$e&&(et.addEventListener("click",function(ut){return Vi(nt,void 0,void 0,function(){return Bo(this,function(lt){return function ue(ct){Vi(this,void 0,void 0,function(){var ut,lt,It,bt,Dt,wt;return Bo(this,function(Mt){switch(Mt.label){case 0:if(ct.stopPropagation(),(ut=ct.target)===K||"LI"!==ut.tagName)return[2];S.showLoading("click filter"),Mt.label=1;case 1:return Mt.trys.push([1,,8,9]),lt=y.getUidByIndex(y.getCurrentIndex()),K?.classList.remove("selectedItem"),null===(Pt=null===(Ut=document.querySelector(".dcs-filterDropDown"))||void 0===Ut?void 0:Ut.querySelector(".selectedItem"))||void 0===Pt||Pt.classList.remove("selectedItem"),K=ut,ut.classList.add("selectedItem"),It=ut.dataset.filterValue,[4,Se.getCurImageData()];case 2:return[4,Ke(bt=Mt.sent())];case 3:return Dt=Mt.sent(),wt=void 0,"original"!==It?[3,4]:(wt=Dt,[3,6]);case 4:return[4,S.filterHandlerByIImageData(bt,Dt,It)];case 5:wt=Mt.sent(),Mt.label=6;case 6:return[4,Ne(wt,L,lt,!1,{filterValue:It,bitDepth:wt.imageBitDepth})];case 7:return Mt.sent(),[3,9];case 8:return S.hideLoading("click filter"),[7];case 9:return[2]}var Ut,Pt})})}(ut),[2]})})}),Xe.appendChild(et)),Se.SetFilterDirty(!1),ct.label=2;case 2:return W(et,De=!De),re.stopPropagation(),ke||(y.on(i.f.DOCUMENT_CLICK,x),y.on(i.d.CANVAS_CLICK,x),y.on(i.f.PAGER_CHANGED,function(){Ae(),De=!1}),ke=!0),[2]}})})},ou=function(re,L,y,S){var x,W,j;return function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,[])).next())})}(this,0,void 0,function(){var ue,Se,De,K,ke,Xe,et,$e,nt,ct,ut,lt;return function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}}(this,function(It){switch(It.label){case 0:null===(j=null===(W=null===(x=re?.ViewControl)||void 0===x?void 0:x.getViewerByIndex(0))||void 0===W?void 0:W.ui)||void 0===j||j._resizeViewer(),ue=re.File.getCurrentFileList(),Se=ue.find(function(bt){return"camera"===bt.name}),De=Se?.chs||[],K=0,It.label=1;case 1:return K<S.length||K<De.length?(Xe=De[K],!(ke=S[K])||Xe?[3,2]:(et=ke.detectArea,$e=Je(lt=ke.oriBlob),nt=re.DataControl.appendSync("camera",[{oriData:lt.imageData,metadata:$e,customData:{oriBlob:lt,detectArea:et}}])[0],ke.uuid=nt,ke.oriBlob=null,[3,5])):[3,6];case 2:if(ke||!Xe)return[3,3];for(ct=[],ut=K;ut<De.length;ut++)ct.push(ut);return re.ViewControl.getViewerByIndex(0).removeSync(ct),[3,5];case 3:return ke.uuid===Xe?[3,5]:(lt=ke.oriBlob,ke.uuid=Xe,[4,Ne(lt,re,Xe,!1,{oriBlob:lt,bitDepth:lt.imageBitDepth})]);case 4:It.sent(),It.label=5;case 5:return K++,[3,1];case 6:return S.splice(0),[2]}})})},yi=function(){return(yi=Object.assign||function(re){for(var L,y=1,S=arguments.length;y<S;y++)for(var x in L=arguments[y])Object.prototype.hasOwnProperty.call(L,x)&&(re[x]=L[x]);return re}).apply(this,arguments)},oi=function(re,L,y,S){return new(y||(y=Promise))(function(x,W){function j(De){try{Se(S.next(De))}catch(K){W(K)}}function ue(De){try{Se(S.throw(De))}catch(K){W(K)}}function Se(De){var K;De.done?x(De.value):(K=De.value,K instanceof y?K:new y(function(ke){ke(K)})).then(j,ue)}Se((S=S.apply(re,L||[])).next())})},jr=function(re,L){var y,S,x,W,j={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function ue(Se){return function(De){return function(K){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,S&&(x=2&K[0]?S.return:K[0]?S.throw||((x=S.return)&&x.call(S),0):S.next)&&!(x=x.call(S,K[1])).done)return x;switch(S=0,x&&(K=[2&K[0],x.value]),K[0]){case 0:case 1:x=K;break;case 4:return j.label++,{value:K[1],done:!1};case 5:j.label++,S=K[1],K=[0];continue;case 7:K=j.ops.pop(),j.trys.pop();continue;default:if(!((x=(x=j.trys).length>0&&x[x.length-1])||6!==K[0]&&2!==K[0])){j=0;continue}if(3===K[0]&&(!x||K[1]>x[0]&&K[1]<x[3])){j.label=K[1];break}if(6===K[0]&&j.label<x[1]){j.label=x[1],x=K;break}if(x&&j.label<x[2]){j.label=x[2],j.ops.push(K);break}x[2]&&j.ops.pop(),j.trys.pop();continue}K=L.call(re,j)}catch(ke){K=[6,ke],S=0}finally{y=x=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([Se,De])}}},su="closeMultiple",au="deleteImg",uu="replaceImg",lu="rotateImg",cu="filterImg",Ui="cropImg",ac="saveImg",fp=function(){function re(L,y,S,x,W){var j=this;this._container=null,this._curPageId=null,this._curImageData=null,this._filterDirty=!1,this.ViewUiClass=null,this.ViewUiClass=S,this.isKeepCanvasSize=void 0===x?Object(s.u)():x,this.baseCanvasSize=W||3840,this._dcs=new L,this._dcs.on("video-closed",function(){var ue;y.videoShown=!1,Ae(),null===(ue=y._oPub)||void 0===ue||ue.emit("video-closed"),j._removeCameraDvs()}),this._dcs.on("video-error",function(ue){y._oPub.emit("video-error",ue)}),this._bindMultipleHandler(),this._bindMultipleCloseHandler(),this._dvs=y}return re.prototype.unbindDvsBeforeDispose=function(){this._dvs=null},re.prototype.dispose=function(){var L;this._removeCameraDvs(),null===(L=this._dcs)||void 0===L||L.dispose(),this._dcs=null,this._dvs=null,this._container=null,this._savePhotoCallback=null},re.prototype.showVideo=function(L){return void 0===L&&(L={}),oi(this,void 0,void 0,function(){var y,S;return jr(this,function(x){switch(x.label){case 0:(y=this._dcs).config=L,y._dvs=this._dvs,x.label=1;case 1:return x.trys.push([1,3,,4]),[4,y.showHomePage(yi({onSave:this._savePhotoCallback},ks(L)))];case 2:return x.sent(),this._dvs.videoShown=!0,[3,4];case 3:throw S=x.sent(),this._dvs.videoShown=!1,S;case 4:return[4,y.getCurrentResolution()];case 5:return[2,x.sent()]}})})},re.prototype.showEditPage=function(L,y,S){return void 0===y&&(y={}),void 0===S&&(S=!1),oi(this,void 0,void 0,function(){var x,W,j,ue,Se,De,K,ke,Xe,et,$e,nt,ct,ut;return jr(this,function(lt){switch(lt.label){case 0:if(x=this._dcs,W=S?this._cameraDvs:this._dvs,!L)throw new Error("page id is necessary!");return[4,W.DataControl.getData(L)];case 1:return j=lt.sent(),Se=j.metadata,De=j.oriData,Xe=!1,(ue=j.customData).oriBlob?K=ue.oriBlob:(ue.oriBlob=De,K=De),Object(s.y)(K)?[4,fetch(K)]:[3,4];case 2:return[4,lt.sent().blob()];case 3:K=lt.sent(),Xe=!0,lt.label=4;case 4:return K instanceof Blob?[4,(It=K,(ve.navInfo.biPhone||ve.navInfo.biPad)&&(bt=5,Dt=85,wt=3840),ve.ImageProcWrapper.getMax4kImage(It,bt,Dt,wt))]:[3,6];case 5:K=lt.sent(),1==Se.bitDepth&&(K.imageBitDepth=1),Xe=!0,lt.label=6;case 6:return Xe&&(ue.oriBlob=K),ke=ue.detectArea?ue.detectArea:[0,0,et=Se.width,0,et,$e=Se.height,0,$e],nt=function(Mt){void 0===Mt&&(Mt={});var Ut=Mt.cropViewer,Pt=void 0===Ut?{}:Ut,Zt=Mt.filterViewer,fn=Pt.rotateRight,Sn=Pt.autoDetectBorder,qn="dcs-font dcs-i-next";return(void 0===Zt?{}:Zt).visibility||(qn="dcs-font dcs-i-save"),{footerButtons:{rotateLeft:Ue(Pt.rotateLeft),rotateRight:Ue(fn),toggleFullArea:Ue(Sn),save:{icon:qn}}}}(x.config),ct=ue.angle,Object(s.A)(y,nt),void 0===ct&&(ct=0),nt.file||(nt.file={}),nt.file.oriBlob=K,nt.file.oriDetectArea=ke,nt.file.oriAngle=ct,(ut=y.element)&&(x.config.element=ut),x.showEditPage(yi({blob:K,detectArea:ke,angle:ct,onSave:function(Mt){var Ut=this,Pt=Mt[0];return s.b.log("[camera] showEditPage - onSave"),s.b.log(Pt),Ne(Pt.iImageData,W,L,!0,Pt.file).then(function(){return oi(Ut,void 0,void 0,function(){return jr(this,function(Zt){return x.navigateBack(2),[2,!0]})})})}},nt)),[2]}var It,bt,Dt,wt})})},re.prototype.closeVideo=function(){this._dcs.closeAll()},re.prototype.bindAreaDetectFunction=function(L){return this._dcs.bindAreaDetectFunction(L)},re.prototype.bindPerspectiveFunction=function(L){return this._dcs.bindPerspectiveFunction(L)},re.prototype.bindLicenseCallback=function(L){return this._dcs.bindLicenseCallback(L)},re.prototype.bindSavePhotoCallback=function(L){this._savePhotoCallback=L},re.prototype.bindFilterHandleList=function(L){return this._dcs.bindFilterHandleList(L)},re.prototype.bindImageDataToBlobHandle=function(L){return this._dcs.bindImageDataToBlobHandle(L)},re.prototype._bindCameraEvents=function(L,y,S){var x=this,W=S.dcs,j=S.page,ue=y.on.bind(y),Se=j.options;this._container=W.config.element,ue(su,oo.bind(this,L,y,W)),ue(lu,nc.bind(this,L,y,W)),ue(au,rc.bind(this,L,y,W,Se)),ue(Ui,ao.bind(this,L,y,W,this._container)),ue(uu,dp.bind(this,L,y,W,Se)),ue(ac,Bs.bind(this,L,y,W,Se)),ue(cu,function(De){ko.call(x,De,L,y,W)}),L.ViewControl.getViewerByIndex(0).on("slideFinished",function(){si(x)})},re.prototype._createCameraDvs=function(L){var y,S=L.dcs.config,x=S.element,W=S.filterViewer,j=void 0===W?{}:W,ue=S.cropViewer,Se=void 0===ue?{}:ue,De=j.insert,K=j.rotateLeft,ke=j.remove,Xe=j.filter,et=void 0===Xe?{}:Xe;if(this._cameraDvs)document.getElementById("dvs-camera-container").classList.remove("dcs-display-none");else{var $e=document.createElement("div");$e.id="dvs-camera-container",$e.classList.add("dvs-camera-container");var nt=void 0;(nt=Object(s.y)(x)?document.getElementById(x):x)?nt.appendChild($e):($e.classList.add("dcs-fixed-full"),document.body.appendChild($e)),this._cameraDvs=new Ws({isKeepCanvasSize:this.isKeepCanvasSize,baseCanvasSize:this.baseCanvasSize,uiConfig:{toolbars:{header:!1,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!1},footerGroup:{visibility:!0,location:"bottomMenu",sequence:1},headerGroup:{visibility:!0,location:"topMenu",sequence:1}},buttons:{back:{visibility:!0,location:"headerGroup",iconClass:"dcs-font dcs-i-back",sequence:0,onButtonClick:su},delete:{visibility:!1!==ke?.visibility,location:"headerGroup",iconClass:ke?.iconCss||"dcs-font dcs-i-delete",sequence:0,onButtonClick:au},replace:{visibility:!1!==De?.visibility,location:"footerGroup",iconClass:"dcs-font dcs-i-insert",sequence:0,onButtonClick:uu},rotateLeft:{visibility:!1!==K?.visibility,location:"footerGroup",iconClass:K?.iconCss||"dcs-font dcs-i-rotateLeft",sequence:0,onButtonClick:lu},filter:{visibility:!1!==et.visibility,location:"footerGroup",iconClass:"dcs-font dcs-i-filter",sequence:0,onButtonClick:cu},crop:{visibility:!1!==Se.visibility,location:"footerGroup",iconClass:"dcs-font dcs-i-crop",sequence:0,onButtonClick:Ui},save:{visibility:!0,location:"footerGroup",iconClass:"dcs-font dcs-i-save",sequence:0,onButtonClick:ac}}}}),this._cameraDvs.ViewControl.bindViewUiConstructor(this.ViewUiClass);var ct=this._cameraDvs.ViewControl.getViewerByIndex(0);ct.bindView($e),(y=ct).topMenuBorder="none",y.topMenuColor="#000",y.canvasBackground="#323232",y.canvasBorder="none",y.footerColor="#000",y.displayMode="single",y.width="100%",y.height="100%",function(ut,lt){var It,bt=ut._dcs,Dt=document.createElement("div");Dt.className="cameraPager",Dt.id="cameraPager",Dt.innerHTML='\n    <div class="previousPage dcs-font dcs-i-arrow"></div>\n    <p><span class="curPage">0</span>/<span class="totalPage">0</span></p>\n    <div class="nextPage dcs-font dcs-i-arrow disable"></div>\n    ',null===(It=document.getElementById("dvs-camera-container"))||void 0===It||It.appendChild(Dt);var wt=Dt.children[0],Mt=Dt.children[2];wt.onclick=function(){bt.showLoading("prePage");var Pt=lt.getPrePageIndex();if(-1!=Pt){var Zt=lt.getUidByIndex(Pt);Gi(ut,Zt).then(function(){lt.prevPage()})}bt.hideLoading("prePage")},Mt.onclick=function(){bt.showLoading("next page");var Pt=lt.getNextPageIndex();if(-1!=Pt){var Zt=lt.getUidByIndex(Pt);Gi(ut,Zt).then(function(){lt.nextPage()})}bt.hideLoading("next page")},lt.on(i.f.PAGER_CHANGED,function(Pt){var Zt=Dt.querySelector(".curPage"),_n=Dt.querySelector(".totalPage");Zt.innerText=String(Pt.cur+1),_n.innerText=String(Pt.total),function Ut(){var Pt,Zt;if("camera"===(null===(Pt=lt.getCurrentTab())||void 0===Pt?void 0:Pt.name)){var _n=lt.getCurrentIndex();wt.classList[_n<=0?"add":"remove"]("dcs-disable");var wn=(null===(Zt=lt.getCurrentTab())||void 0===Zt?void 0:Zt.chs.length)||0;Mt.classList[wn===_n+1?"add":"remove"]("dcs-disable")}}()})}(this,ct),this._bindCameraEvents(this._cameraDvs,ct,L)}},re.prototype._removeCameraDvs=function(){var L,y;null===(L=this._cameraDvs)||void 0===L||L.dispose(),this._cameraDvs=null,null===(y=document.getElementById("dvs-camera-container"))||void 0===y||y.remove()},re.prototype._bindMultipleHandler=function(){var L=this,y=this;this._dcs.bindMultipleHandle(function(S,x){return oi(L,void 0,void 0,function(){return jr(this,function(W){switch(W.label){case 0:return x.dcs.multipleView=!0,x.dcs.config.filterViewer.visibility||(x.dcs.config.filterViewer.insert.visibility=!1,x.dcs.config.filterViewer.remove.visibility=!1,x.dcs.config.filterViewer.rotateLeft.visibility=!1,x.dcs.config.filterViewer.filter.visibility=!1),S.length?[3,2]:[4,y._multipleCloseFn()];case 1:return W.sent(),[2];case 2:return y._createCameraDvs(x),y._cameraDvs.ViewControl.getViewerByIndex(0),[4,ou(y._cameraDvs,0,0,S)];case 3:return W.sent(),si(y).finally(function(){y._dcs.hideAllPages()}),[2]}})})})},re.prototype._bindMultipleCloseHandler=function(){this._dcs.bindMultipleCloseHandle(this._multipleCloseFn)},re.prototype._multipleCloseFn=function(){return oi(this,void 0,void 0,function(){var L,y;return jr(this,function(S){return(L=document.querySelector(".dcs-btn-multipleImg"))&&(y=L.querySelector(".previewImg")).src&&s.a.revokeObjectURL(y.src),[2]})})},re.prototype.getCurPageId=function(){return this._curPageId},re.prototype.setCurPageId=function(L){this._curPageId!=L&&(this._filterDirty=!0),this._curPageId=L},re.prototype.IsFilterDirty=function(){return this._filterDirty},re.prototype.SetFilterDirty=function(L){this._filterDirty=L},re.prototype.getCurImageData=function(){return oi(this,void 0,void 0,function(){var L,y,S,x,W,j,ue,Se,De,K,ke,Xe,et,$e,nt,ct;return jr(this,function(ut){switch(ut.label){case 0:return this._curImageData?[2,this._curImageData]:(L=this._cameraDvs,y=this._dcs,S=this.getCurPageId(),[4,L.DataControl.getData(S)]);case 1:x=ut.sent(),j=(W=x.customData).oriBlob,ue=W.detectArea,De=void 0===(Se=W.angle)?0:Se,y.showLoading("handle page by uid"),ut.label=2;case 2:return ut.trys.push([2,,9,10]),ue?[4,St(j,De,ue)]:[3,4];case 3:return K=ut.sent(),this.setCurImageData(K),this.SetFilterDirty(!0),[3,8];case 4:return[4,He(j,De)];case 5:return ke=ut.sent(),[4,y.packageBlobItemFromIImageData(ke,!0,!0,!1)];case 6:return Xe=ut.sent(),et=Xe.detectArea,$e=Xe.filterBlob,nt=Xe.resImage,ct=Xe.filterValue,this.setCurPageId(S),this.setCurImageData(nt),this.SetFilterDirty(!0),[4,Ne($e,L,S,!1,{detectArea:et,oriBlob:j,filterValue:ct,bitDepth:$e.imageBitDepth})];case 7:ut.sent(),ut.label=8;case 8:return[3,10];case 9:return y.hideLoading("handle page by uid"),[7];case 10:return[2,this._curImageData]}})})},re.prototype.handlePageByUid=function(L){return oi(this,void 0,void 0,function(){var y,S,x,W,j,ue,Se,De,K;return jr(this,function(ke){switch(ke.label){case 0:this.getCurPageId()!=L&&(this.setCurPageId(L),this.setCurImageData(null),this.SetFilterDirty(!0)),y=this._cameraDvs,(S=this._dcs).showLoading("handle page by uid"),ke.label=1;case 1:return ke.trys.push([1,,9,10]),[4,y.DataControl.getData(L)];case 2:return x=ke.sent(),j=x.customData.filterValue,(W=x.customData.detectArea)&&j?[3,8]:[3,3];case 3:return[4,this.getCurImageData()];case 4:return ue=ke.sent(),!W||j?[3,8]:(Se=Ct(S),[4,Ke(ue)]);case 5:return De=ke.sent(),[4,S.filterHandlerByIImageData(ue,De,Se)];case 6:return[4,Ne(K=ke.sent(),y,L,!1,{filterValue:Se,bitDepth:K.imageBitDepth})];case 7:ke.sent(),ke.label=8;case 8:return[3,10];case 9:return S.hideLoading("handle page by uid"),[7];case 10:return[2]}})})},re.prototype.setCurImageData=function(L){this._curImageData&&delete this._curImageData.imageData,this._curImageData=L},re}();function si(re){return oi(this,void 0,void 0,function(){var y,S,x;return jr(this,function(W){switch(W.label){case 0:return(y=re._cameraDvs.ViewControl.getViewerByIndex(0))?(S=y.getCurrentIndex(),x=y.getUidByIndex(S),[4,Gi(re,x)]):[3,2];case 1:W.sent(),W.label=2;case 2:return[2]}})})}function Gi(re,L){return oi(this,void 0,void 0,function(){return jr(this,function(y){switch(y.label){case 0:return[4,re.handlePageByUid(L)];case 1:return y.sent(),[2]}})})}function ks(re){void 0===re&&(re={});var L=re.scannerViewer,y=void 0===L?{}:L,S=y.resolution,x=y.autoScan,W=y.autoDetect,j=y.continuousScan,ue=y.switchCamera,Se=y.loadLocalFile;return{deviceId:y.deviceId,fill:y.fullScreen,continuous:j?.enableContinuousScan,headerButtons:{autoDetect:yi({isSelected:!x?.enableAutoScan&&W?.enableAutoDetect},Ue(W)),changeResBtn:Ue(S)},footerButtons:{load:Ue(Se),autoCapture:yi({isSelected:x?.enableAutoScan},Ue(x)),toggleCamera:Ue(ue),continuous:Ue(j)}}}var on=function(){var re=function(L,y){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var W in x)x.hasOwnProperty(W)&&(S[W]=x[W])})(L,y)};return function(L,y){function S(){this.constructor=L}re(L,y),L.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}}(),Yn=function(){for(var re=0,L=0,y=arguments.length;L<y;L++)re+=arguments[L].length;var S=Array(re),x=0;for(L=0;L<y;L++)for(var W=arguments[L],j=0,ue=W.length;j<ue;j++,x++)S[x]=W[j];return S},Ws=function(re){function L(y){var S=re.call(this,new d.b)||this;return S.DataControl=null,S.ViewControl=null,S.File=null,S.Tag=null,S.Annotation=null,S.Error=null,S.Log=null,S._cameraClass=null,S._areaDetectCallback=null,S._perspectiveCallback=null,S._licenseCallback=null,S._savePhotoCallback=null,S._filterHandleList=null,S.videoShown=!1,S._imageDataToBlobHandleFn=null,S.uid=Object(s.I)(11),function r(){var re,L,y,S;Array.from||(Array.from=(re=Object.prototype.toString,L=function(x){return"function"==typeof x||"[object Function]"===re.call(x)},y=Math.pow(2,53)-1,S=function(x){var ue,W=(ue=Number(x),isNaN(ue)?0:0!==ue&&isFinite(ue)?(ue>0?1:-1)*Math.floor(Math.abs(ue)):ue);return Math.min(Math.max(W,0),y)},function(x){var W=this,j=Object(x);if(null==x)throw new TypeError("Array.from requires an array-like object - not null or undefined");var ue,Se=arguments.length>1?arguments[1]:void 0;if(void 0!==Se){if(!L(Se))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(ue=arguments[2])}for(var De,K=S(j.length),ke=L(W)?Object(new W(K)):new Array(K),Xe=0;Xe<K;)De=j[Xe],ke[Xe]=Se?void 0===ue?Se(De,Xe):Se.call(ue,De,Xe):De,Xe+=1;return ke.length=K,ke})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(x,W){if(null==x)throw new TypeError("Cannot convert undefined or null to object");for(var j=Object(x),ue=1;ue<arguments.length;ue++){var Se=arguments[ue];if(null!=Se)for(var De in Se)Object.prototype.hasOwnProperty.call(Se,De)&&(j[De]=Se[De])}return j},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(x,W,j){for(var ue=atob(this.toDataURL(W,j).split(",")[1]),Se=ue.length,De=new Uint8Array(Se),K=0;K<Se;K++)De[K]=ue.charCodeAt(K);x(new Blob([De],{type:W||"image/png"}))}})}(),S.Log=new ot(S._oPub),S._log("DVS"),S._log("db"),S._db=new Me,S._log("db",!1),S._log("Error"),S.Error=new ze(S._oPub),S._log("Error",!1),S._log("Tag"),S.Tag=new Be({pubsub:S._oPub}),S._log("Tag",!1),S._log("File"),S.File=new Q({pubsub:S._oPub}),S._log("File",!1),S._log("ViewControl"),S.ViewControl=new U(y,S._oPub,S._db,S.uid),S._log("ViewControl",!1),S._log("DataControl"),S.DataControl=new l(y,S._oPub,S._db),S._log("DataControl",!1),S._log("DVS",!1),S}return on(L,re),L.prototype.on=function(y,S){re.prototype._on.call(this,y,S)},L.prototype.off=function(y,S){re.prototype._off.call(this,y,S)},L.prototype.emit=function(y){for(var S=[],x=1;x<arguments.length;x++)S[x-1]=arguments[x];re.prototype._emit.apply(this,Yn([y],S))},L.prototype._log=function(y,S){void 0===S&&(S=!0),this._oPub.emit(i.d.LOG,S?"Initialize "+y+" object.":"Complete "+y+" object initialization.")},L.prototype.dispose=function(){var y,S,x,W,j,ue,Se,De;re.prototype.dispose.call(this),null===(y=this.Tag)||void 0===y||y.dispose(),null===(S=this.File)||void 0===S||S.dispose(),null===(W=null===(x=this.ViewControl)||void 0===x?void 0:x.getViewerByIndex(0))||void 0===W||W.removeAllSync(),null===(j=this.ViewControl)||void 0===j||j.dispose(),null===(ue=this.Error)||void 0===ue||ue.dispose(),null===(Se=this.Log)||void 0===Se||Se.dispose(),this._db=null,null===(De=this.camera)||void 0===De||De.dispose(),this.camera=null,this.Log=null,this.Error=null,this.Tag=null,this.File=null,this.DataControl=null},L.prototype.bindCamera=function(y,S,x,W){return this._licenseCallback&&0!==this._licenseCallback().errorCode?(this._e(i.a.WEBCAM_LICENSE_INVALID),!1):Object(s.s)(y)?this._cameraClass?(this._e(i.a.OK),!0):(this._cameraClass=y,this.camera||(this.camera=new fp(y,this,S,x,W)),this._initWebcamCallbacks(),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.showVideo=function(y){return this.videoShown?Promise.reject(i.a.CAMERA_EXIST):(this.videoShown=!0,this.camera?this.camera.showVideo(y):Promise.reject(i.a.CAMERA_CLASS_REQUIRE))},L.prototype.showEditPage=function(y){return this.camera?this.camera.showEditPage(y):Promise.reject(i.a.CAMERA_CLASS_REQUIRE)},L.prototype.closeVideo=function(){this.camera?this.camera.closeVideo():this._e(i.a.ELEMENT_NOT_EXIST)},L.prototype.bindAreaDetectFunction=function(y){var S;return Object(s.s)(y)?(this._areaDetectCallback=y,null===(S=this.camera)||void 0===S||S.bindAreaDetectFunction(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.bindPerspectiveFunction=function(y){var S;return Object(s.s)(y)?(this._perspectiveCallback=y,null===(S=this.camera)||void 0===S||S.bindPerspectiveFunction(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.bindLicenseCallback=function(y){var S;return Object(s.s)(y)?(this._licenseCallback=y,null===(S=this.camera)||void 0===S||S.bindLicenseCallback(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.bindSavePhotoCallback=function(y){var S;return Object(s.s)(y)?(this._savePhotoCallback=y,null===(S=this.camera)||void 0===S||S.bindSavePhotoCallback(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.bindFilterHandleList=function(y){var S;return Object(s.m)(y)?(this._filterHandleList=y,null===(S=this.camera)||void 0===S||S.bindFilterHandleList(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype.bindImageDataToBlobHandle=function(y){var S;return Object(s.s)(y)?(this._imageDataToBlobHandleFn=y,null===(S=this.camera)||void 0===S||S.bindImageDataToBlobHandle(y),this._e(i.a.OK),!0):(this._e(i.a.PARAM_TYPE),!1)},L.prototype._initWebcamCallbacks=function(){if(this.camera){var y=this.camera;return this._areaDetectCallback&&y.bindAreaDetectFunction(this._areaDetectCallback),this._perspectiveCallback&&y.bindPerspectiveFunction(this._perspectiveCallback),this._savePhotoCallback&&y.bindSavePhotoCallback(this._savePhotoCallback),this._licenseCallback&&y.bindLicenseCallback(this._licenseCallback),this._filterHandleList&&y.bindFilterHandleList(this._filterHandleList),this._imageDataToBlobHandleFn&&y.bindImageDataToBlobHandle(this._imageDataToBlobHandleFn),!0}return!1},L.prototype._e=function(y){this._oPub.emit(i.d.ERROR,y)},L}(d.a);n.d(t,"DVS",function(){return Ws});var uc=n(4);window.Promise||(window.Promise=uc),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=Ws}]),w.Ready(function(e,t){var r="[bio]: ",h=!0,d=!1,s=e.win,i=s&&s.FormData;function u(a){var o=this;o.__attrs={},e.mix(o.__attrs,{action:"",data:{},bChunkedSendData:h,blockSize:0,ajaxConfig:{value:{},type:"post",processData:d,cache:d,dataType:"text",async:h,contentType:d,retry:0,headers:{"X-Requested-With":d}},ajax:"",formData:"",CORS:d,bOnlyEmptyIsOK:h}),e.mix(o.__attrs,a),o._setWithCredentials()}function f(a){var o=this;o.__attrs={},e.mix(o.__attrs,{action:"",retry:0,timeout:0,CORS:d,async:h,dataType:"text",fileStatus:"",uploadType:d,data:{},bOnlyEmptyIsOK:h}),e.mix(o.__attrs,a),o._init()}e.mix(u,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"},status:{SUCCESS:"success",ERROR:"error"}}),e.mix(u.prototype,e.obj.customEvent),e.mix(u.prototype,{get:function(a){return a in this.__attrs?this.__attrs[a]:""},set:function(a,o){a in this.__attrs&&(this.__attrs[a]=o)},_setWithCredentials:function(){this.get("CORS");var c=this.get("ajaxConfig");return e.mix(c,{xhrFields:{withCredentials:!1}}),c},uploadToServer:function(a){var o=this;return o.get("blockSize")>0&&a&&a.size>0?o._chunkedUpload(a):o._fullUpload(a)},uploadFilesToServer:function(a){return this._fullUploadFiles(a)},_fullUpload:function(a){var o=this,c=o.get("ajaxConfig"),l=!0;o._setFormData(),a&&a.size>0&&(o._addFileData(a),o.name=e.isString(a.name)&&""!=a.name?a.name:a.fileName),e.mix(c,{data:o.get("formData"),url:o.get("action"),beforeSend:function(g,C,_){g.upload.addEventListener("progress",function(v){o.fire(u.event.PROGRESS,{loaded:v.loaded,total:v.total,name:o.name})},!1)}}),e.mix(c,{method:"POST",onSuccess:function(g){var C="";g&&(g&&e.isArray(g)&&g.length>1?C=g[0]:e.isString(g)&&(C=g)),C=o._processResponse(C),o.fire(u.event.SUCCESS,C)},onError:function(g,C,_){var v,T;l=!1,g&&e.isArray(g)&&g.length>2?(v=g[1],T=g[2]):(v=C,T=_),o._errorHandler(T,v,a)}});var p=e.ajax(c);return o.set("formData",null),c.async?(o.set("ajax",p),!0):(o.set("ajax",!1),l)},_fullUploadFiles:function(a){var o=this,c=o.get("ajaxConfig"),l=!0,m=[];o._setFormData(),e.each(a,function(C){C&&C.size>0?(o._addFileData(C),e.isString(C.name)&&""!=C.name?m.push(C.name):m.push(C.fileName)):m.push("")}),e.mix(c,{data:o.get("formData"),url:o.get("action"),beforeSend:function(C,_,v){C.upload.addEventListener("progress",function(T){o.fire(u.event.PROGRESS,{loaded:T.loaded,total:T.total,name:""})},!1)}}),e.mix(c,{method:"POST",onSuccess:function(C){var _="";m=[],C&&(C&&e.isArray(C)&&C.length>1?_=C[0]:e.isString(C)&&(_=C)),_=o._processResponse(_),o.fire(u.event.SUCCESS,_)},onError:function(C,_,v){var T,D;l=!1,m=[],C&&e.isArray(C)&&C.length>2?(T=C[1],D=C[2]):(T=_,D=v),o._errorHandler(D,T,a)}}),o.name="";var g=e.ajax(c);return o.set("formData",null),c.async?(o.set("ajax",g),!0):(o.set("ajax",!1),l)},_chunkedUpload:function(a){var o=this,c=o.get("ajaxConfig"),m=function(v,T,D){var P,E;v&&e.isArray(v)&&v.length>2?(P=v[1],E=v[2]):(P=T,E=D),o._errorHandler(E,P,a)};e.mix(c,{url:o.get("action")});var I=a.size,p=0,g=o.get("blockSize")||I,C=a.slice||a.webkitSlice||a.mozSlice;!function _(v){var T=C.call(a,p,p+g,a.type),D=T.size,P=a.name;o._setContentRange(p,D,I),o._setFormData(),v&&o.set("data",[]),(!e.isString(P)||""==P)&&(P=a.fileName),T.name=P,o.name=P,o._addFileData(T),e.mix(c,{data:o.get("formData")}),e.mix(c,{method:"POST",onSuccess:function(E,M,O){p=o._getUploadedBytes(O)||p+D,o.fire(u.event.PROGRESS,{loaded:p,total:I,name:o.name}),p<I?_(!1):function(v){var T="";v&&(v&&e.isArray(v)&&v.length>1?T=v[0]:e.isString(v)&&(T=v)),T=o._processResponse(T),o.fire(u.event.SUCCESS,T)}(E)},onError:m}),e.ajax(c),o.set("formData",null)}(!0)},abort:function(){var a=this,o=a.get("ajax");return e.isObject(o)?(o.abort(),a.set("ajax",!1),a):(e.log(r+"abort(), the value of io invalid!"),a)},_setFormData:function(){var c,a=this,o=a.get("data");if(i)if(o instanceof i)a.set("formData",o);else{c=new i;try{e.each(o,function(l,m){c.append(m,l)}),a.set("formData",c)}catch{e.log(r+"something error when reset FormData.")}}else e.log(r+"the browser does not support ajax.")},setRequestHeader:function(a,o){var l=this.get("ajaxConfig");return l.headers[a]=o,this.set("ajaxConfig",l),o},_addFileData:function(a){if(!e.isObject(a))return e.log(r+"_addFileData(), file parameter invalid!"),!1;var c=this.get("formData"),m=a.remoteFilename;return m||(m="RemoteFile"),c.append(m,a,a.name),this.set("formData",c),c},_errorHandler:function(a,o,c){var m=u.status.ERROR,p={status:m,msg:o,response:!1,name:this.name};a&&(p.httpStatus=a.status,p.response=a.responseText),this.fire(m,p)},_getUploadedBytes:function(a){var o=a.getResponseHeader("Range"),c=o&&o.split("-"),l=c&&c.length>1&&parseInt(c[1],10);return l&&l+1},_setContentRange:function(a,o,c){var l="bytes "+a+"-"+(a+o-1)+"/"+c;return this.get("ajaxConfig").headers["Content-Range"]=l,l},_processResponse:function(a){var c,l,m,I=!1,p=this.name,g=u.status.SUCCESS,C=u.event.ERROR;if(e.log("Response from server: "+a),!this.get("bOnlyEmptyIsOK"))return{status:g,msg:!1,json:!1,response:a,name:p};if(e.isUndefined(a)||""===a)c={status:g,msg:!1,json:!1,response:"",name:p};else if(e.isString(a)){try{for(l=0;l<a.length&&!(l>10);l++){if("{"==(m=a[l])){I=!0;break}if(" "!=m&&"\r"!=m&&"\n"!=m&&"\t"!=m)break}if(I){var _=e.parse(a);c=1==_.status?{status:g,msg:!1,json:_,response:a,name:p}:{status:C,msg:!1,json:_,response:a,name:p}}}catch(T){I=!1,e.log(T)}if(!I){var v=String(a);c=""==(v=v.replace(/( |\t|\r|\n)/g,""))?{status:g,msg:!1,json:!1,response:a,name:p}:{status:C,msg:!1,json:!1,response:a,name:p}}}else c={status:g,msg:!1,json:!1,response:"",name:p};return c}}),e.mix(f,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}}),e.mix(f.prototype,e.obj.customEvent),e.mix(f.prototype,{get:function(a){return a in this.__attrs?this.__attrs[a]:""},set:function(a,o){a in this.__attrs&&(this.__attrs[a]=o)},upload:function(a){var c=this.get("uploadType");if(a){if(e.isArray(a))return c.uploadFilesToServer(a);if(e.isObject(a)){var m=a;return m.size?(m.id||(m.id=e.guid("file-")),m.size&&(m.textSize=this._convertByteSize(m.size))):m.size=0,c.uploadToServer(m)}}return c.uploadToServer(a)},abort:function(){return this.get("uploadType").abort(),!0},setRequestHeader:function(a,o){this.get("uploadType").setRequestHeader(a,o)},_convertByteSize:function(a){var o=-1;do{a/=1024,o++}while(a>99&&o<4);return Math.max(a,.1).toFixed(1)+["KB","MB","GB","TB"][o]},_init:function(){var a=this,c=new u({action:a.get("action"),data:a.get("data"),CORS:a.get("CORS"),bOnlyEmptyIsOK:a.get("bOnlyEmptyIsOK")}),l=c.get("ajaxConfig");return l&&(l.dataType=a.get("dataType"),l.async=a.get("async"),l.retry=a.get("retry")),c.on(u.event.SUCCESS,a._uploadCompleteHandler,a),c.on(u.event.ERROR,a._uploadCompleteHandler,a),c.on(u.event.PROGRESS,a._uploadProgressHandler,a),a.set("uploadType",c),c},_uploadProgressHandler:function(a){this.fire(f.event.PROGRESS,a)},_uploadCompleteHandler:function(a){var o=this,c=a.status,l=a.msg,m=o.get("file");e.mix(a,{file:m}),"success"===c?o.fire(f.event.SUCCESS,a):(!1===l||("abort"===l?e.mix(a,{canceled:!0}):"timeout"===l&&e.mix(a,{timeout:!0})),o.fire(f.event.ERROR,a))}}),e.BIO=f}),function(e){e.DWT=e.DWT||{},e.DWT.defaultEnv={JSVersion:"17,2,1,0228",ServerVersionInfo:"17,2,1,0228",ServerLinuxVersionInfo:"17,2,1,0228",ServerMacVersionInfo:"17,2,1,0228",ActiveXVersion:"17,2,1,0228",PluginVersion:"11,1,0,0",PdfVersion:"11.3.0.1026",ProductName:"Dynamic Web TWAIN 17.2.2",Containers:[],DynamicContainers:[],ContainerMap:{},Trial:!1,ResourcesPath:"Resources",Debug:!1,IfUpdateService:!1,AutoLoad:!0,ReConnectToService:!0,OnWebTwainReady:!1,UseDefaultInstallUI:!0,OnWebTwainNotFound:!1,OnWebTwainOldPluginNotAllowed:!1,OnWebTwainNeedUpgrade:!1,OnWebTwainNeedUpgradeWebJavascript:!1,OnWebTwainInitMessage:!1,IfUseViewer:!0,ViewerJSIntegerited:!0,ActiveXIntegerited:!0,ActiveXInstallWithCAB:!1,IfUseActiveXForIE10Plus:!1,IfCheck64bitServiceFirst:!1,IfDownload64bitService:!1,IfInstallDWTModuleWithZIP:!1,IfUseEmbeddedDownloadNoticeForActiveX:!1,IfCheckDCP:!1,IfCheckDWT:!0,IfDisableDefaultSettings:!1,OnWebTwainWillInit:!1,IfAddMD5InUploadHeader:!1,IfAlwaysFocusOnPopupWindow:!0,IfConfineMaskWithinTheViewer:!1,IfUseWSPool:!1,UseDefaultViewer:!0,fetchOptions:{mode:"cors",credentials:"same-origin"},CertificateConfig:{URL:"",UpdateDaysBeforeExpired:30},HideTrialMessage:!1,CheckCertExpired:!0,ConnectWithSocket:!1,CustomizableDisplayInfo:{loaderBarClassName:"ds-dwt-loaderBar",loaderBarBackgroundColor:"",loaderBarSource:e.navInfoSync.bIE?e.Lib.loaderBarSourceIE:e.Lib.loaderBarSource,errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_WebTwainIdDuplicated:"Error: Duplicate id detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encode:"Processing...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:!0,visibility:{scan:!0,load:!0,print:!0,removeall:!0,removeselected:!0,rotateleft:!0,rotate:!0,rotateright:!0,deskew:!0,crop:!0,cut:!0,changeimagesize:!0,flip:!0,mirror:!0,zoomin:!0,originalsize:!0,zoomout:!0,stretch:!0,fit:!0,fitw:!0,fith:!0,hand:!0,rectselect:!0,zoom:!0,restore:!0,save:!0,close:!0}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}},handshakeCode:void 0,organizationID:void 0,licenseServer:void 0,sessionPassword:"",ltsDebug:!1,showLoadingMsgDialog:!0},e.MSG={Loading:"Processing...",LoadingTiff:"Processing tiff...",LoadingPdf:"Processing pdf...",Encoding:"Processing...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}}(w),w.OnWebTwainNotFoundOnWindowsCallback=w.OnWebTwainNotFoundOnWindowsCallback||!1,w.OnWebTwainNotFoundOnMacCallback=w.OnWebTwainNotFoundOnMacCallback||!1,w.OnWebTwainNotFoundOnLinuxCallback=w.OnWebTwainNotFoundOnLinuxCallback||!1,w.OnWebTwainPreExecuteCallback=w.OnWebTwainPreExecuteCallback||!1,w.OnWebTwainPostExecuteCallback=w.OnWebTwainPostExecuteCallback||!1,w.OnWebTwainShowUpdatingDialog=w.OnWebTwainShowUpdatingDialog||!1,w.OnWebTwainCloseUpdatingDialog=w.OnWebTwainCloseUpdatingDialog||!1,w.OnRemoteWebTwainNotFoundCallback=w.OnRemoteWebTwainNotFoundCallback||!1,w.OnRemoteWebTwainNeedUpgradeCallback=w.OnRemoteWebTwainNeedUpgradeCallback||!1,w.OnWebTWAINDllDownloadSuccessful=w.OnWebTWAINDllDownloadSuccessful||!1,w.OnWebTWAINDllDownloadFailure=w.OnWebTWAINDllDownloadFailure||!1,w.OnWebTWAINModuleDownloadManually=w.OnWebTWAINModuleDownloadManually||!1,function(e){var t={},n=w.dcp;w.DWT.RegisterEvent=function(r,h){return(("OnWebTwainReady"===r||!w.DWT.UseDefaultInstallUI)&&e.isFunction(h)||"OnWebTwainInitMessage"===r&&e.isFunction(h))&&(w.DWT[r]=h),!0},e.mix(t,w.DWT.defaultEnv),e.mix(t,w.DWT),w.DWT=t,n.onReadys.push(function(){n.ifCheck64bitServiceFirst=w.DWT.IfCheck64bitServiceFirst})}(w.Lib),function(e){var m,t=!0,n=!1,r=document.location.protocol,h=location.hostname,d=w.navInfoSync,s=d.bSSL,i=d.bHTML5Edition,u=n,f=n,a=n,o=0,c=location.pathname,l=0;(m={config:{debug:n,devMode:n,usingMainMode:n,bDiscardBlankImage:n,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:s,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:t,bOK:n,__dialog:n,scriptLoaded:n,wasmScriptLoaded:n,wasmPdfReaderLoaded:n,wasmLoad:n,cssLoaded:n,viewerScriptLoaded:n,bNoControlEvent:n,bNeedUpgradeEvent:n,StartWSTimeoutId:n,StartWSByIPTimeoutId:n,bPromptJSOrServerOutdated:n,bNeedWasm:n,bAutoLoadDone:n,detectType:s?1:"http:"===r||""===h?0:-1,tryTimes:0,ports:[{port:18623,ssl:t},{port:18622,ssl:n}],win64Ports:[{port:18621,ssl:t},{port:18620,ssl:n}],cUrlIndex:0,urls:[],onNoControl:n,needUpgrade:n,onNotAllowedForChrome:n,OnDetectNext:n,OnCreatWS:n,bMaskShow:n},page:{bUnload:n,OnUnload:n},tmp:{IfAllowLocalCache:t,EmptyFunction:function(){}}}).appendMessage=function(_){"string"==typeof _?m.config.msg.push(_):"[object Array]"===Object.prototype.toString.call(_)&&w.Lib.each(_,function(v){m.appendMessage(v)})},m.appendRichMessage=function(_){m.appendMessage([m.config.msgPrefix,_,m.config.msgSuffix])},m.clearMessage=function(){var _=w.navInfoSync;return _.bIE&&8==_.IEVersion?m.config.msg.splice(0,m.config.msg.length):m.config.msg.splice(0),t},m.getRealPath=function(_){return void 0===_?"":1==m.env.pathType?m.env.basePath+_:m.env.basePath+_.replace(new RegExp("/","g"),"\\\\")},m.getHex=function(_){var v;return 1==(v=Number(_).toString(16).toUpperCase()).length&&(v=["0",v].join("")),v},m.getColor=function(_){var T,D;return D=(65280&_)>>8,T=255&_,["#",m.getHex(_>>16),m.getHex(D),m.getHex(T)].join("")},m.RGB2BGR=function(_){return(255&_)<<16|65280&_|_>>16},m.BGR2RGB=m.RGB2BGR,m.isLocalIP=function(_){return _&&("127.0.0.1"===_||"localhost"===_||"local.dynamsoftwebtwain.com"===_||"local.dynamsoft.com"===_)},m.IsNeedLoadWasm=function(){return e.detect.bNeedWasm||!1===w.DWT.UseLocalService||e.isUndefined(w.DWT.UseLocalService)&&e.env.bMobile||w.DWT.UseBarcodeAddonWasm},""===h?d.bWin&&c.lastIndexOf("\\")>1?c=c.substring(1,c.lastIndexOf("\\")).replace(/%20/g," "):(l=1,c=c.substring(1,c.lastIndexOf("/")).replace(/%20/g," ")):(l=1,c=c.substring(0,c.lastIndexOf("/"))),d.bIE?""===(o=d.IEVersion)||o>=10?0==w.DWT.IfUseActiveXForIE10Plus?i=t:(a=t,d.bHTML5Edition=i=n):(i=n,o>=9?a=t:f=t):i||(u=t);var g=d.bMobile;if(w.navInfo){var C=w.navInfo;g=g||C.bPad||C.biPhone||C.biPad}m.env={bIE:d.bIE,bEdge:d.bEdge,bFileSystem:d.bFileSystem,bMobile:g,strIEVersion:d.IEVersion,basePath:c,pathType:l,isDesktopViewer:function(){return w.navInfoSync.bWin||w.navInfoSync.bLinux||w.navInfo.bChromeOS||w.navInfoSync.bMac},isPadViewer:function(){return w.navInfo.bPad||w.navInfo.biPad},isMobileViewer:function(){return w.navInfoSync.bMobile||w.navInfo.biPhone},isWasmUseFastcomp:function(){if(navigator.userAgentData&&navigator.userAgentData.brands){var _=navigator.userAgentData.brands,v=0;for(v=0;v<_.length;v++){var T=_[v];if(T.brand&&("Chromium"==T.brand||"Google Chrome"==T.brand)&&T.version&&parseInt(T.version,10)>=94)return!1}}else{var D=parseInt(w.navInfo.strBrowserVersion);if(w.navInfo.bSafari&&D>=13)return!1;if(w.navInfo.bFirefox&&D>=94)return!1;if(w.navInfo.bChrome&&D>=94)return!1}return!0}},m.product={name:"Dynamic Web TWAIN",bHTML5Edition:i,bPluginEdition:u||a,bActiveXEdition:f,host:w.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:w.dcp.getDSPath,getPKGPath:function(){return w.DWT.ResourcesPath+"/dist/mac/DynamicWebTWAINMacEdition.pkg"},getMSIPath:function(){return w.DWT.ResourcesPath+"/dist/win/DynamicWebTWAINPlugIn.msi"},getActiveXCABx86Path:function(){return w.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAIN.cab"},getActiveXCABx64Path:function(){return w.DWT.ResourcesPath+"/dist/win/ActiveX/DynamicWebTWAINx64.cab"},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:i},m.getShadowRoot=function(_){var v=_;if(e.win.ShadowRoot)for(;v;){if(v instanceof e.win.ShadowRoot)return v;v=v.parentNode}return!1},m.isShadowRoot=function(_){return!!(e.win.ShadowRoot&&_ instanceof e.win.ShadowRoot)},e.mix(e,m),e.Addon_Events=[],e.Addon_Sendback_Events=[]}(w.Lib),w.Ready(function(e,t){var h=e.getNavInfo(),d=w.navInfoSync,s=d.bMac,i=d.bLinux,u=d.bWin,f=h.bOSx64,a=u&&f,o=h.bSafari,c=h.bFirefox,l=h.bChrome,m=parseFloat(h.strBrowserVersion),I={getServerVersionInfo:function(g){var C=w.DWT.ServerVersionInfo;return h.bWin||h.bWin64||(h.bMac?C=w.DWT.ServerMacVersionInfo:(h.bLinux||h.bChromeOS)&&(C=w.DWT.ServerLinuxVersionInfo)),g?C:e.replaceAll(C,",","")},getDWTPrefix:function(){return!0===w.DWT.CustomMode?"dwtc_":"dwt_"},loadResourcePath:!1,loadingResourcePath:!1};e.mix(e.product,I),e.mix(e.env,{bChrome:l,bFirefox:c,bSafari:o,bWin:u,bWin64:a,bMac:s,bLinux:i,isX64:f,iPluginLength:0,strChromeVersion:h.bChrome?m:"",strFirefoxVersion:h.bFirefox?m:""})}),w.Ready(function(e,t){var n=e.getNavInfo(),r=!0,h=!1;e.License={isLTS:function(){return e.isString(w.DWT.handshakeCode)||e.isString(w.DWT.organizationID)||w.DWT.isPublicLicense()},_innerCheckProductKey:function(u,f,a,o){var c,I,l=w.DWT,m=o;if((c=u.__licenseInfo)&&c.LTS){if(!c||!e.isArray(c.Detail)||0==c.Detail.length)return w.Lib.License.isLTS()?e.Errors.LicenseNoCore(u):e.Errors.LicenseEmptyOrInvalid(u),e.License.ShowInvalidLicense("",!0),h;m=!1}else if(!e.isString(l.ProductKey)||""==l.ProductKey||"******"==l.ProductKey||!c||!e.isArray(c.Detail)||0==c.Detail.length)return w.Lib.License.isLTS()?e.Errors.LicenseNoCore(u):e.Errors.LicenseEmptyOrInvalid(u),e.License.ShowInvalidLicense("",!0),h;var O,R,F,B,p=0,g=0,C=[],_=[],v=h,T=h,D=h,P=h,E=h,M=h;if(!this.isBindDomainOK(c.Domain))return e.Errors.LicenseBadDomain(u),m&&e.License.promptLicenseErr(u),h;for(c.Detail.length>0&&(I="FALSE"!=(F=c.Detail[0]).Trial),R=1;R<c.Detail.length;R++)if("FALSE"==(F=c.Detail[R]).Trial&&I||"TRUE"==F.Trial&&!I)return e.Errors.LicenseTrialFullMixed(u),m&&e.License.promptLicenseErr(u),h;if(f.Core){for(R=0;R<c.Detail.length;R++)if((B=this.getEnumLicenseType((F=c.Detail[R]).EnumLicenseType)).Core){var b=this.getLicenseType(F.LicenseType);if(e.product.bHTML5Edition){if(b.ActiveX&&!b.Html5)continue;_.push(F)}else{if(!b.ActiveX&&b.Html5)continue;_.push(F)}}}else _=c.Detail;for(R=0;R<_.length;R++){var A=r;if(B=this.getEnumLicenseType((F=_[R]).EnumLicenseType),f.Core||this.isAllowLicenseType(B,f)){O=F.ExpireDate.replace(/-/g,"/");var N="FALSE"!=F.Trial;if(N&&!w.DWT.HideTrialMessage){var Y=this.remainExpireDays(O);Y<=5&&(e.isFunction(w.OnLicenseExpiredMessage)&&w.OnLicenseExpiredMessage(O,Y),w.DWT.HideTrialMessage=!0)}if(this.isExpiredOrFuture(O,N))C.push(O);else if(B.Core&&parseInt(F.Version)>=15||!B.Core)if(f.Wasm){var ne=!1;(f.Core&&B.Core||f.PDFRasterizer&&B.PDFRasterizer||f.Webcam&&B.Webcam)&&(ne=!0),ne&&(F.OS.toLowerCase().indexOf("wasm")>-1?this.isBrowserOK(F.Browser)||a?(p++,A=h):T=r:f.PDFRasterizer?E=r:f.Webcam?M=r:P=r)}else this.isOSOK(F.OS,u)?this.isBrowserOK(F.Browser)||a?(p++,A=h):T=r:v=r;else D=r;A&&g++}}if(p>0)return r;if(0==g)return this.setNoAllowedLicenseTypeError(u,f),m&&e.License.promptLicenseErr(u),h;if(C.length>0){var he,Ie=0,_e=1e20,ce="",q=(new Date).getTime();for(O="",R=0;R<C.length;R++)(he=this.parseDateFromString(C[R])).getTime()<q&&he.getTime()>Ie?(Ie=he.getTime(),O=C[R]):he.getTime()>q&&he.getTime()<_e&&(_e=he.getTime(),ce=C[R]);return""!=O?(he=this.parseDateFromString(O),O=this.getLicenseDateString(he),e.Errors.LicenseExpired(u,O),w.Lib.License.isLTS()||e.License.ShowInvalidLicense(O,I),m=!1):""!=ce?(he=this.parseDateFromString(ce),ce=this.getLicenseDateString(he),e.Errors.LicenseIsFuture(u,ce)):(e.Errors.LicenseExpired(u,""),m=!1,e.License.ShowInvalidLicense()),m&&e.License.promptLicenseErr(u),h}if(D)return e.Errors.LicenseLower(u),m&&e.License.promptLicenseErr(u),h;if(T)return n.bEdge?e.Errors.LicenseNoEdge(u):n.bChrome?e.Errors.LicenseNoChrome(u):n.bFirefox?e.Errors.LicenseNoFirefox(u):n.bIE?e.Errors.LicenseNoIE(u):n.bSafari?e.Errors.LicenseNoSafari(u):e.Errors.LicenseNotSupportBorwser(u),m&&e.License.promptLicenseErr(u),h;if(v){var V=!1,J=!1,te=!1;return u._bRemoteMode?u.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?te=!0:u.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux?J=!0:u.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(V=!0):(V=n.bMac,J=n.bLinux,te=n.bWin||n.bWin64),te?e.Errors.LicenseNotSupportWindows(u):V?e.Errors.LicenseNotSupportMAC(u):J?e.Errors.LicenseNotSupportLinux(u):e.Errors.LicenseNotSupportOS(u),m&&e.License.promptLicenseErr(u),h}return P?(e.Errors.LicenseNotSupportWasm(u),m&&e.License.promptLicenseErr(u),h):E?(e.Errors.LicenseNotSupportPdfRWasm(u),m&&e.License.promptLicenseErr(u),h):M?(e.Errors.LicenseNotSupportWebcamWasm(u),m&&e.License.promptLicenseErr(u),h):(e.Errors.LicenseEmptyOrInvalid(u),m&&this.promptLicenseErr(u),h)},checkProductKey:function(u,f,a,o){var c=w.DWT.licenseException,l=!0;return(w.Lib.isString(w.DWT.handshakeCode)||w.Lib.isString(w.DWT.organizationID))&&w.Lib.isString(w.DWT.ProductKey)&&(w.Lib.Errors.LongKeyShortKeyMixed(u),l=!1),(l=l&&w.Lib.License._innerCheckProductKey(u,f,a,o))||(c.code=u._errorCode,c.message=u._errorString,c.fromLTS=!1),l},promptLicenseErr:function(u){var a,f=!1,o=screen.width,c=o>640?640:o-10;e.isNumber(u.ErrorCode)?(f=u.ErrorCode,a=u.ErrorString):e.isNumber(u.code)?(f=u.code,a=u.message):e.isString(u.message)&&(f=!0,a=u.message),!1!==f&&w.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',a,"</div>",'<div style="padding-top:35px"></div>'].join(""),{width:c,height:0,headerStyle:1})},ShowInvalidLicense:function(u,f){if(!e.detect.needUpgrade){if(e.License.isLTS())return void(w.OnLTSLicenseError&&w.OnLTSLicenseError(w.Lib.License.getPublicLicenseContent(w.DWT.licenseException.message)));var c=[],l="is not valid",m=screen.width,I=m>640?640:m-10;if(u&&""!=u&&(l=-1==u.indexOf("on")?"has expired on "+u:"has expired "+u),c.push('<div style="padding:0 25px 25px 25px;">'),e.env.bMobile?(c.push("The <strong>ProductKey</strong> is not valid."),f&&(c.push(" Please <br /><ul><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a trial license</a>.</li>"),c.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key?product=dwt&utm_source=in-product' target='_blank'>Update the ProductKey</a>.</li>"),c.push("</ul>"))):f?(c.push("You are seeing this message because your trial key "),c.push(l),c.push(". Two quick steps to extend your trial: <br /><div><ul>"),c.push("<li style='padding-left:25px'>1.<strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product' target='_blank'>Request a new trial key</a></strong> and follow the instructions to set the new key</li>"),c.push("<li style='padding-left:25px'>2.Refresh your scan page and try again</li>"),c.push("</ul></div>If you run into any issues, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a>.")):(c.push("You are seeing this message because the license for doc scanning support "),c.push(l),c.push(".<br /><div><ul>"),c.push("<li><strong>If you are the owner of the website</strong>, please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/order/renewalList' target='_blank'>renew your license</a> and follow the instructions to set the new key. Please <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/company/contact/' target='_blank'>contact us</a> if you need any help.</li>"),c.push("<li><strong>If you are an end-user</strong>, please inform the owner or developer of this website.</li>"),c.push("</ul></div>")),c.push("</div>"),w.DWT.ShowMessage(c.join(""),{width:I,height:0,headerStyle:1,closeButton:!1}),e.env.bMobile){var p=e.one(".ds-dwt-ui-dlg-wrap");p&&p.length>0&&(p[0].style.fontSize="1.5em",p[0].style.lineHeight="1.5em")}}},isBindDomainOK:function(u){if(e.isUndefined(u)||null==u||""==u||"*"==u||"*.*"==u)return r;var f=location.hostname,a=h;if(""==f)return r;for(var o=f.toLowerCase().split("."),c=o.length,l=u.toLowerCase().split(";"),m=0;m<l.length;m++){var I=l[m];if("*.*"==I){a=r;break}var p=I.split("."),g=p.length;if(g>0&&g-1<=c){for(var C=r,_=g-1;_>0;_--){if(p[_].indexOf("*")>-1){a=r;break}if(_+c-g>=0){if(o[_+c-g]!=p[_]){C=h;break}}else if("*"!=p[_]){C=h;break}}if(C&&("*"==p[0]||c>=g&&o[c-g]==p[0])){a=r;break}}}return a},isExpiredOrFuture:function(u,f){if(""==u)return h;if(!f){var a=u.length;if(a>2&&"/"==u[a-2]&&"0"==u[a-1])return h}var o=this.parseDateFromString(u),c=(new Date).getTime(),l=c+5184e6;return o.getTime()<c||f&&o.getTime()>l?r:h},remainExpireDays:function(u){if(""==u)return 65536;var f=this.parseDateFromString(u),a=(new Date).getTime(),o=(f.getTime()-a)/864e5;return f.getTime()<a?0:Math.ceil(o)},isOSOK:function(u,f){var o=!1,c=!1,l=!1,m=!1,I=!1,p=!1;return""==u||"0"==u||(f._bRemoteMode?f.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?l=!0:f.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux?c=!0:f.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac?o=!0:f.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumEmbed?I=!0:f.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumChromeOS&&(p=!0):(o=n.bMac,c=n.bLinux,l=n.bWin||n.bWin64,m=e.env.bMobile,p=n.bChromeOS,I=n.bEmbed),(u=u.toLowerCase()).indexOf("windows")>-1&&l)||u.indexOf("mac")>-1&&o||u.indexOf("linux")>-1&&(c||p)||u.indexOf("mobile")>-1&&m||u.indexOf("embed")>-1&&I?r:h},isBrowserOK:function(u){if(e.isString(u)){if(""==u||"0"==u)return r;var f=(u=u.toLowerCase()).split(";"),a=h;return e.each(f,function(o){("chrome"==e.trim(o)&&(n.bChrome||n.bSafari||n.bOpera)||"ie"==e.trim(o)&&(n.bIE||n.bEdge)||"firefox"==e.trim(o)&&n.bFirefox)&&(a=r)}),a}return h},parseDateFromString:function(u){var f,a=u;return a=a.replace(/-/g,"/"),f=Date.parse(a),isNaN(f)&&(f=0),(f=new Date(f)).setHours(23,59,59,999),f},getEnumLicenseType:function(u){var f=h,a=h,o=h,c=h,l=h,m=h,I=h,p=h,g=h;return e.isString(u)&&e.each(u.split(";"),function(C){var _=1*C;2==_||3==_||0==_||1==_?f=r:4==_?a=r:50==_?o=r:51==_?c=r:52==_?l=r:7==_?m=r:8==_?I=r:9==_?p=r:10==_&&(g=r)}),{Core:f,PDFRasterizer:p,Webcam:I,barcode1D:a,QR:o,PDF417:c,DataMatrix:l,OCR:m,OCRPro:g}},getLicenseType:function(u){var f=h,a=h,o=h,c=h,l=h,m=h,I=h,p=h,g=h,C=h;return u&&""!=u&&("html5;activex;oldie"==(u=u.toLowerCase())?o=r:"html5"==u||"win=(aph) or mac=(ph) or linux(h)"==u?f=r:"html5;activex"==u?(f=r,o=r):"1d barcode reader"==u?a=r:"2d barcode reader(qrcode)"==u?c=r:"2d barcode reader(pdf417)"==u?l=r:"2d barcode reader(data matrix)"==u?m=r:"ocr"==u?I=r:"webcam"==u?p=r:"pdf rasterizer"==u?g=r:"proocr"==u&&(C=r)),{Html5:f,PDFRasterizer:g,Webcam:p,barcode1D:a,QR:c,PDF417:l,DataMatrix:m,OCR:I,OCRPro:C,ActiveX:o}},isAllowLicenseType:function(u,f){return f.Core?u.Core:f.PDFRasterizer?u.PDFRasterizer:f.Webcam?u.Webcam:f.barcode1D?u.barcode1D:f.QR?u.QR:f.PDF417?u.PDF417:f.DataMatrix?u.DataMatrix:f.OCR?u.OCR:f.OCRPro?u.OCRPro:u.Core},setNoAllowedLicenseTypeError:function(u,f){f.Core?f.Wasm?e.Errors.LicenseNotSupportWasm(u):e.Errors.LicenseNoCore(u):f.PDFRasterizer?f.Wasm?e.Errors.LicenseNotSupportPdfRWasm(u):e.Errors.LicenseNoPDF(u):f.Webcam?f.Wasm?e.Errors.LicenseNotSupportWebcamWasm(u):e.Errors.LicenseNoWebcam(u):f.OCR?e.Errors.LicenseNoOCR(u):f.OCRPro?e.Errors.LicenseNoOCRPro(u):e.Errors.LicenseEmptyOrInvalid(u)},getLicenseDateString:function(u){var a,f=u.getFullYear();return[(a=u.getMonth()+1)>=10?""+a:"0"+a,"/",u.getDate()>=10?""+u.getDate():"0"+u.getDate(),"/",f].join("")},hasPDFRProductKey:function(u){if(u._isMobileMode()){if(!e.License.checkProductKey(u,{PDFRasterizer:!0,Wasm:!0},!0))return u._resetErr(),!1}else if(!e.License.checkProductKey(u,{PDFRasterizer:!0},!0))return u._resetErr(),!1;return!0},checkPDFProductKeyWhenNeeds:function(u,f){var c;if((f==w.DWT.EnumDWT_ImageType.IT_PDF||f==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF)&&(e.product.bHTML5Edition?u.__addon&&u.__addon.PDF&&(c=u.__addon.PDF.GetConvertMode()):u.Addon&&u.Addon.PDF&&(c=u.Addon.PDF.GetConvertMode()),1==c||4==c))return e.isFunction(u._isMobileMode)&&u._isMobileMode()?this.checkProductKey(u,{PDFRasterizer:!0,Wasm:!0},!0):this.checkProductKey(u,{PDFRasterizer:!0},!0);return r},getPublicLicenseContent:function(u){var f=[],a=u;if(!e.isString(a)){if(e.isUndef(a))return"";a=a instanceof Error||"message"in a?a.message:""+a}var o=a.indexOf("["),c=a.indexOf("]",o),l=a.indexOf("(",c),m=a.indexOf(")",l);if(-1==o||-1==c||-1==l||-1==m)return a;o>0&&f.push(a.substring(0,o));var I=a.substring(o+1,c),p=a.substring(l+1,m);return f.push(['<a href="',p,'" target="_blank" class="dynamsoft-major-color">',I,"</a>"].join("")),f.push(a.substring(m+1)),f.join("")}}}),w.Ready(function(e,t){var h={Errors:{FilePathSyntaxIncorrect:function(d){d._errorCode=-3123,d._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(d,s){return e.isString(s)&&0!=s.length?!(e.startsWith(s,"http://")||e.startsWith(s,"https://")||e.startsWith(s,"ftp://"))||(e.File.Errors.FilePathSyntaxIncorrect(d),!1):(e.Errors.InvalidFile(d),!1)}};h.checkFolder=h.checkFilePath,e.File=h,w.DWT.isPublicLicense=function(){return!(!e.isUndef(w.DWT.ProductKey)||!(e.isUndef(w.DWT.handshakeCode)&&e.isUndef(w.DWT.organizationID)||e.isUndef(w.DWT.handshakeCode)&&"200001"==w.DWT.organizationID))},e.showProgress=function(){},e.closeProgress=function(){},w.DWT.__innerCheckCertDate=function(d){var s=Date.parse(d+"T00:00:00");""!=d&&!isNaN(s)&&w.DWT.CheckCertExpired&&(new Date).getTime()>=s-864e5*w.DWT.CertificateConfig.UpdateDaysBeforeExpired&&(e.isFunction(w.OnCertExpired)&&w.OnCertExpired(d),setTimeout(function(){w.DWT.UpdateCert(w.DWT.CertificateConfig.URL,w.OnUpdateCertSuccess,w.OnUpdateCertFailure)},5e3))},w.DWT.__innerUpdateCert=function(d,s,i,u){var a,f=w.dcp;a=[s?f._getHttpPreUrl(f.detect.curPortIndex):f._getPreUrl(f.detect.curPortIndex),f._getModuleName(),f._getModuleVer(),"/LoadZipFromBytes?type=",2,"&dsver=",f.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:a,async:!0,data:d,onSuccess:i,onError:function(){e.isFunction(u)&&u()}})},w.DWT.__innerReboot=function(d,s){var i=w.dcp,u=[i._getPreUrl(i.detect.curPortIndex),i._getModuleName(),i._getModuleVer(),"/admin?ts=",e.now()].join("");e.ajax({method:"POST",url:u,async:!0,data:'{"id":"'+(new Date).getTime().toString()+'","method":"Reboot","parameter":[],"version":"dwasm2_'+i._getModuleVer()+'"}',onSuccess:d,onError:s})},w.DWT.UpdateCert=function(d,s,i){e.isString(d)&&""!=d?e.fetch(d,{mode:"cors",dataType:"arraybuffer"}).then(function(f){w.DWT.__innerUpdateCert(f,!1,function(){w.DWT.CheckCertExpired=!1,e.isFunction(s)&&s()},function(){w.navInfoSync.bSSL?w.DWT.__innerUpdateCert(f,!0,s,i):e.isFunction(i)&&i()}),f=null},i):e.isFunction(i)&&i()}}),function(e,t){e.install={_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:!1},e.install._strNonInstallDIV=['<div style="text-align:center;" id="',e.install._divDWTNonInstallContainerID,'"></div>'].join(""),t.CloseDialog=function(){var n=e.install._dlgInstall;if(n){var r=e.all(".dynamsoft-dialog-close");e.each(r,function(h,d){e.removeEventListener(h,"click",t.CloseDialog)}),n.open&&n.close(),document.body.removeChild(n),e.install._dlgInstall=!1}},t.ShowDialog=function(n,r,h,d,s){if(!1!==h){var i,u={width:n,height:r,position:"absolute"};d?(i=['<div class="dynamsoft-dwt-dialog-body">',h,"</div>"].join(""),u.closeButton=!1):i=['<div class="ds-dwt-ui-showdlg">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',s?"":'<div class="dynamsoft-dialog-close"></div>',"</div>",h,"</div>","</div>"].join(""),s&&(u.closeButton=!1),t.ShowMessage(i,u)}},t.ShowMessage=function(n,r){var f,a,l,m,I,h=e.install,d="ds-dwt-ui-dlg",s="ds-dwt-ui-dlg-wrap",i=screen.width,u=!0,o=0,c=!0,p=!0,g=0,C="fixed",_="Error",v=e.product.bActiveXEdition||e.product.bPluginEdition;if(r&&(f=r.width,a=r.height,r.seconds&&(o=r.seconds),r.headerStyle&&(g=r.headerStyle),!1===r.closeButton&&(c=!1),r.bAutoClose&&(l=r.bAutoClose,c=!0),0==r.bReadyClosed&&(u=!1),r.position&&(C=r.position),r.caption&&(_=r.caption)),f?f>i-10&&(f=i-10):f=i>600?600:i-10,a||(a="100%"),1==g?n=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-dialog-body">','<div class="dynamsoft-dwt-dlg-header">',c?'<div class="dynamsoft-dialog-close"></div>':"","</div>",n,"</div></div>"].join(""):2==g&&(n=['<div class="dynamsoft-dialog">','<div class="dynamsoft-dwt-ltsdlg-header"><span style="color:#FFF;line-height:35px;margin-left:15px">',_,"</span>",c?'<div class="dynamsoft-dialog-close"></div>':"","</div>",'<div class="dynamsoft-dwt-ltsdlg-body" style="padding:25px 50px 20px 50px;">',n,"</div></div>"].join("")),0==e.one("."+d).length){var T=document.createElement("div"),D=document.createElement("div"),P=document.createElement("div");if(T.className=d,D.className=s,D.style.margin="auto",D.style.zIndex="9999",D.style.position="relative",D.style.border="0",l&&((m=document.createElement("div")).className="dynamsoft-dialog-close",D.insertBefore(m,D.firstChild),(I=document.createElement("div")).className="dynamsoft-dialog-closeTimer",I.style.width="100%",I.style.height="2px",I.style.marginTop="-2px",I.style.backgroundColor="#fe8e14",D.insertBefore(I,D.firstChild)),D.appendChild(P),P.innerHTML=n,T.appendChild(D),document.body.appendChild(T),h._dlgInstall=T,e.dialog.setup(h._dlgInstall,!1,{style_position:C}),w.navInfo.bIE){var E=document.createElement("iframe");E.frameborder="0",E.marginheight="0",E.marginwidth="0",E.style.border="0",E.style.backgroundColor="transparent",E.style.position="absolute",E.style.left=0,E.style.top=0,E.style.width="100%",E.style.height=document.body.clientHeight+"px",E.style.margin="0 auto",E.style.zIndex="9990",E.src=["javas","cript:",'""'].join("");var M=e.one(".dynamsoft-backdrop");M&&M.length>0&&(M[0].innerHTML="",M[0].appendChild(E))}}else p=!1,e.dialog.setcfg(h._dlgInstall,{style_position:C});var O=e.one("."+s);if(O&&O.getEL()&&(O[0].style.width=f+"px",O[0].style.height=e.isNumber(a)&&a>0?a+"px":"100%",p||e.each(O[0].childNodes,function(B){if("DIV"==B.tagName&&"dynamsoft-dialog-close"!=B.className&&"dynamsoft-dialog-closeTimer"!=B.className)return B.innerHTML=n,!1})),v){var R=e.one(".dynamsoft-dialog");R&&R.getEL()&&(R.getEL().style.border="1px solid #999")}if(h._dlgInstall.open&&h._dlgInstall.close(),h._dlgInstall.showModal(),h._dlgInstall.bReadyClosed=u,c){var F=e.all(".dynamsoft-dialog-close");e.each(F,function(B,b){e.addEventListener(B,"click",t.CloseDialog)}),F.length>0&&l&&o>0&&setTimeout(e._zdgb_xkz_dhk,100)}},t.OnWebTwainPreExecute=function(){w.Lib.detect.OnWebTwainPreExecute(w.DWT.IfConfineMaskWithinTheViewer)},t.OnWebTwainPostExecute=function(){w.Lib.detect.OnWebTwainPostExecute()}}(w.Lib,w.DWT);var XF=function(e,t){var n=w.Lib;t||w.DWT.CloseDialog();var r=n.get(n.install._divDWTNonInstallContainerID);if(r&&r.parentNode.removeChild(r),e&&n.isDOM(e)&&n.show(e),e&&n.isString(e))n.show(e);else{var h,d;if(d=w.DWT.Containers)for(h=0;h<d.length;h++)d[h].ContainerId&&n.show(d[h].ContainerId);if(d=w.DWT.DynamicContainers)for(h=0;h<d.length;h++)d[h].ContainerId&&n.show(d[h].ContainerId);d=null}""!=n.install._divDWTemessageContainer&&n.show(n.install._divDWTemessageContainer)};(function(e){e.win.DCP_DWT_OnClickCloseInstall=XF,e.detect.showMask=function(){e.detect.bMaskShow=!0,w.DWT.ScanDirectly||(e.isFunction(w.OnWebTwainPreExecuteCallback)?w.OnWebTwainPreExecuteCallback():e.detect.OnWebTwainPreExecute(w.DWT.IfConfineMaskWithinTheViewer))},e.detect.OnWebTwainPreExecute=function(n){var h,d,r=n;w.DWT.Containers.length>0&&(d=w.Lib.get(w.DWT.Containers[0].ContainerId)),d&&(h=d.getBoundingClientRect(),d.firstChild&&d.firstChild.getBoundingClientRect&&(h=d.firstChild.getBoundingClientRect())),(null==h||w.DWT.Containers.length>1||1==w.DWT.Containers.length&&(0==h.width||0==h.height))&&(r=!1),e.mask.bConfined=r,e.mask.container=d,e.showMask()},e.detect.hideMask=function(){e.detect.bMaskShow=!1,w.DWT.ScanDirectly||(e.isFunction(w.OnWebTwainPostExecuteCallback)?w.OnWebTwainPostExecuteCallback():e.detect.OnWebTwainPostExecute())},e.detect.OnWebTwainPostExecute=e.hideMask})(w.Lib),function(e){e._zdgb_xkz_dhk=function(){var t=e.install._dlgInstall;if(t){var n=e.one(".dynamsoft-dialog-closeTimer",t);if(n.getEL()){var r=parseInt(n.getEL().style.width);(r-=1)<=0?w.DWT.CloseDialog():(n.getEL().style.width=r+"%",setTimeout(e._zdgb_xkz_dhk,100))}}},e.ShowLicenseDialog=w.DWT.ShowMessage,e.createLoadingBarContent=function(){var t=e.loaderBarClassName+"-noserver",n=e.loaderBarClassName+"-noserver-parent",r="";""!=e.loaderBarBackgroundColor&&(r=";background:"+e.loaderBarBackgroundColor);var h=[];return h.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">'),h.push(['<div class="',n,'" style="margin:0 auto',r,'">'].join("")),h.push(['<div class="',t,'" style="margin:0 auto',r,'">'].join("")),h.push(['<img src="',e.loaderBarSource,'" />'].join("")),h.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>'),h.push('<p class="dynamsoft-loadingMsg-desc"> </p>'),h.push("</div></dialog>"),h.join("")},e.openLoadingMsg=function(){if(e.product.bHTML5Edition&&!e.dlgLoadingShowStatus&&w.DWT.showLoadingMsgDialog){var n,t=w.DWT.UseLocalService;if(!e.env.bMobile&&(e.isUndefined(t)||1==t))return void e.detect.showMask();if(e.detect.hideMask(),!e.dlgLoading){(n=e.one(".dynamsoft-loadingMsg"))&&n.getEL()&&n.remove();var r=e.parseHTML(e.createLoadingBarContent());r&&r.length>0&&document.body.appendChild(r[0]),(n=e.one(".dynamsoft-loadingMsg"))&&n.getEL()&&(e.dlgLoading=n[0],e.dialog.setup(e.dlgLoading))}e.dlgLoading.showModal(),e.dlgLoadingShowStatus=!0}},e.showLoadingMsg=function(t,n,r){if(0!=e.dlgLoadingShowStatus){e.one(".dynamsoft-loadingMsg");var d=e.one(".dynamsoft-loadingMsg-msg"),s=e.one(".dynamsoft-loadingMsg-desc");d&&d.getEL()&&d.html(n),s&&s.getEL()&&(e.env.bMobile&&(s.getEL().style.fontSize="1.4em"),s.html(r))}},e.closeLoadingMsg=function(t){e.log("closeLoadingMsg:"+t),e.detect.hideMask(),1==e.dlgLoadingShowStatus&&(e.dlgLoading&&e.dlgLoading.close(),e.dlgLoadingShowStatus=!1)}}(w.Lib),function(e){e.domReady(function(){var n=document.createElement("style"),r=["dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-backdrop{position:fixed;background:rgba(128,128,128,0.1);top:0;bottom:0;left:0;right:0;z-index:-99999999;}.dynamsoft-dwt-dialogProgress{width:330px;background:#FFF}.dynamsoft-finalMessage{margin:0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:7px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{width:290px;height:290px;margin:auto;color:#CCC;border-width:1px;background:#FFF}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 50px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");n.type="text/css";try{n.appendChild(document.createTextNode(r))}catch{n.styleSheet.cssText=r}document.body.appendChild(n)});var t=!0;e._funsAfterConfigLoaded=[],e._safePromptCustomMsg=function(n){if(e.product.loadResourcePath)n&&e._funsAfterConfigLoaded.push(n);else{if(t){var r={},h=w.DWT.CustomizableDisplayInfo;e.mix(r,w.DWT.defaultEnv.CustomizableDisplayInfo),h&&(h.loaderBarClassName&&(r.loaderBarClassName=h.loaderBarClassName),h.loaderBarSource&&(r.loaderBarSource=h.loaderBarSource),h.loaderBarWidth&&(r.loaderBarWidth=h.loaderBarWidth),h.loaderBarHeight&&(r.loaderBarHeight=h.loaderBarHeight),h.errorMessages&&e.mix(r.errorMessages,h.errorMessages),h.generalMessages&&e.mix(r.generalMessages,h.generalMessages),h.customProgressText&&e.mix(r.customProgressText,h.customProgressText),h.buttons&&(h.buttons.titles&&e.mix(r.buttons.titles,h.buttons.titles),h.buttons.bShowAllButtons&&e.mix(r.buttons.bShowAllButtons,h.buttons.bShowAllButtons),h.buttons.visibility&&e.mix(r.buttons.visibility,h.buttons.visibility)),h.dialogText&&e.mix(r.dialogText,h.dialogText)),w.DWT.CustomizableDisplayInfo=r,t=!1}n&&n()}}}(w.Lib),w.Ready(function(e){function t(n,r){var s,h=this,d=0;s=e.isString(n)?document.getElementById(n):n,h.isLoaded=!1,h.displayType=0,h.progress=0,h.progressPosition=0,h.borderWidth={left:0,right:0,top:0,bottom:0},h.orientation=r.orientation||t.Orientation.Horizontal,h.direction=r.direction||t.Direction.LeftToRight,h.creationType=r.creationType||t.CreationType.Replace,h.value=0,h.initialValue=r.value||0,h.minValue=r.minValue||0,h.maxValue=r.maxValue||100,h.showLabel=typeof r.showLabel>"u"||r.showLabel,h.labelText=r.labelText||"",h.width=r.width||280,h.height=r.height||20,h.borderRadius=r.borderRadius||10,h.orientation==t.Orientation.Horizontal&&h.borderRadius>h.height/2&&(h.borderRadius=Math.round(h.height/2)),h.orientation==t.Orientation.Vertical&&h.borderRadius>h.width/2&&(h.borderRadius=Math.round(h.width/2)),h.backColor=r.backColor||"",h.color=r.color||"#50a8e1",h.animationStyle=0,h.animationInterval=r.animationInterval||100;var i=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];for(h.extraClassName={},d=0;d<i.length;d++)h.extraClassName[i[d]]=r.extraClassName?"string"==typeof r.extraClassName?r.extraClassName:r.extraClassName[i[d]]||"":"";h.onLoad=r.onLoad||null,h.onValueChanged=r.onValueChanged||null,h.onAnimate=r.onAnimate||null,h.creationType==t.CreationType.Replace?h.parentElement=s:(h.parentElement=document.createElement("DIV"),s.appendChild(h.parentElement)),h.finishLoading()}t.Orientation={Horizontal:0,Vertical:1},t.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1},t.CreationType={Replace:0,AppendChild:1},t.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24},t.prototype.finishLoading=function(){var h,n=this;n.wrapperElement=null,n.backgroundElement=null,n.valueElement=null,n.leftElement=null,n.middleElement=null,n.rightElement=null,n.backgroundElement=document.createElement("DIV"),n.backgroundElement.className="progressbar_background"+(n.extraClassName.background?" ":"")+n.extraClassName.background,n.backgroundElement.style.cssText=n.backgroundElement.style.cssText+t._createBorderRadiusCss(n.borderRadius),n.parentElement.appendChild(n.backgroundElement);var d=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"],s=0,i="";for(s=0;s<d.length&&!(i=t._elementCurrentStyle(n.backgroundElement,d[s]))&&"string"!=typeof i;s++);""!=i&&t._parseInt(i)!=n.borderRadius&&(n.borderRadius=t._parseInt(i)),n.displayType=n.orientation==t.Orientation.Horizontal||n.orientation==t.Orientation.Vertical?0:1,n.parentElement.className=(""!=n.parentElement.className?" ":"")+"progressbar_parent dynamsoft-progressBar"+(n.extraClassName.parent?" ":"")+n.extraClassName.parent,0==n.displayType?((h=n.wrapperElement=document.createElement("DIV")).style.border="1px solid #A0A0A0",h.style.cssFloat="left",h.style.display="inline-block",h.style.width=n.width+"px",h.style.height=n.height+"px",h.style.left="0px",h.style.top=-n.height+"px",h.style.backgroundColor=n.backColor,h.style.backgroundRepeat="no-repeat",h.style.position="relative",h.style.cssText=h.style.cssText+t._createBorderRadiusCss(n.borderRadius),n.parentElement.appendChild(h),n.borderWidth={left:t._parseInt(t._elementCurrentStyle(h,"border-left-width")),right:t._parseInt(t._elementCurrentStyle(h,"border-right-width")),top:t._parseInt(t._elementCurrentStyle(h,"border-top-width")),bottom:t._parseInt(t._elementCurrentStyle(h,"border-bottom-width"))}):1==n.displayType&&(n.orientation==t.Orientation.Horizontal?n.borderRadius>n.width/2&&(n.borderRadius=n.width):n.orientation==t.Orientation.Vertical&&n.borderRadius>n.height/2&&(n.borderRadius=n.height),n.valueElement=document.createElement("DIV"),n.valueElement.className="",n.leftElement=document.createElement("DIV"),n.middleElement=document.createElement("DIV"),n.rightElement=document.createElement("DIV"),n.leftElement.style.border="1px solid #A0A0A0",n.leftElement.style.cssFloat="left",n.leftElement.style.display="inline-block",n.leftElement.style.backgroundColor=n.backColor,n.leftElement.style.backgroundRepeat="no-repeat",n.leftElement.style.position="relative",n.rightElement.style.border="1px solid #A0A0A0",n.rightElement.style.cssFloat="left",n.rightElement.style.display="inline-block",n.rightElement.style.backgroundColor=n.backColor,n.rightElement.style.backgroundRepeat="no-repeat",n.rightElement.style.position="relative",n.middleElement.style.border="1px solid #A0A0A0",n.middleElement.style.cssFloat="left",n.middleElement.style.display="inline-block",n.middleElement.style.overflow="hidden",n.middleElement.style.position="relative",n.valueElement.style.backgroundColor=n.backColor,n.valueElement.style.position="relative",n.orientation==t.Orientation.Horizontal?(n.leftElement.style.width=n.borderRadius+"px",n.leftElement.style.height=n.height+"px",n.leftElement.style.top=-n.height+"px",n.leftElement.style.left="0px",n.leftElement.style.borderRight="none",n.leftElement.style.cssText=n.leftElement.style.cssText+t._createBorderRadiusCss(n.borderRadius,0,0,n.borderRadius),n.rightElement.style.width=n.borderRadius+"px",n.rightElement.style.height=n.height+"px",n.rightElement.style.top=-n.height+"px",n.rightElement.style.borderLeft="none",n.rightElement.style.cssText=n.rightElement.style.cssText+t._createBorderRadiusCss(0,n.borderRadius,n.borderRadius,0),n.middleElement.style.width=n.width-2*n.borderRadius+"px",n.middleElement.style.height=n.height+"px",n.middleElement.style.top=-n.height+"px",n.middleElement.style.borderLeft="none",n.middleElement.style.borderRight="none",n.valueElement.style.width="0px",n.valueElement.style.height=n.height+"px"):n.orientation==t.Orientation.Vertical&&(n.leftElement.style.width=n.width+"px",n.leftElement.style.height=n.borderRadius+"px",n.leftElement.style.top=-n.height+"px",n.leftElement.style.left="0px",n.leftElement.style.borderBottom="none",n.leftElement.style.cssText=n.leftElement.style.cssText+t._createBorderRadiusCss(n.borderRadius,n.borderRadius,0,0),n.rightElement.style.width=n.width+"px",n.rightElement.style.height=n.borderRadius+"px",n.rightElement.style.top=-n.height+"px",n.rightElement.style.left="0px",n.rightElement.style.borderTop="none",n.rightElement.style.cssText=n.rightElement.style.cssText+t._createBorderRadiusCss(0,0,n.borderRadius,n.borderRadius),n.middleElement.style.width=n.width+"px",n.middleElement.style.height=n.height-2*n.borderRadius+"px",n.middleElement.style.top=-n.height+"px",n.middleElement.style.left="0px",n.middleElement.style.borderTop="none",n.middleElement.style.borderBottom="none",n.valueElement.style.width=n.width+"px",n.valueElement.style.height="0px"),n.middleElement.appendChild(n.valueElement),n.parentElement.appendChild(n.leftElement),n.parentElement.appendChild(n.middleElement),n.parentElement.appendChild(n.rightElement),n.orientation==t.Orientation.Horizontal?n.borderWidth={left:t._parseInt(t._elementCurrentStyle(n.leftElement,"border-left-width")),right:t._parseInt(t._elementCurrentStyle(n.rightElement,"border-right-width")),top:t._parseInt(t._elementCurrentStyle(n.middleElement,"border-top-width")),bottom:t._parseInt(t._elementCurrentStyle(n.middleElement,"border-bottom-width"))}:n.orientation==t.Orientation.Vertical&&(n.borderWidth={left:t._parseInt(t._elementCurrentStyle(n.middleElement,"border-left-width")),right:t._parseInt(t._elementCurrentStyle(n.middleElement,"border-right-width")),top:t._parseInt(t._elementCurrentStyle(n.leftElement,"border-top-width")),bottom:t._parseInt(t._elementCurrentStyle(n.rightElement,"border-bottom-width"))})),n.parentElement.style.width=n.width+n.borderWidth.left+n.borderWidth.right+"px",n.parentElement.style.height=n.height+n.borderWidth.top+n.borderWidth.bottom+"px",n.backgroundElement.style.cssFloat="left",n.backgroundElement.style.display="inline-block",n.backgroundElement.style.width=n.width+n.borderWidth.left+n.borderWidth.right+"px",n.backgroundElement.style.height=n.height+"px",n.backgroundElement.style.backgroundColor="#FFFFFF",n.backgroundElement.style.position="relative",0==n.displayType&&(n.backgroundElement.style.width=n.width+n.borderWidth.left+n.borderWidth.right+"px"),n.backgroundElement.style.top=n.borderWidth.top+"px",n.markerElement=document.createElement("DIV"),n.markerElement.style.display="inline-block",n.markerElement.style.zoom="1.0",n.markerElement.style.width=n.width+"px",n.markerElement.style.height=n.height+"px",n.markerElement.style.top=2*-n.height-n.borderWidth.top+"px",n.markerElement.style.left=n.borderWidth.left+"px",n.markerElement.style.backgroundColor=n.color,n.markerElement.style.lineHeight=n.height+"px",n.markerElement.style.position="relative",n.parentElement.appendChild(n.markerElement),n.isLoaded=!0,n.setValue(n.initialValue),null!=n.onLoad&&n.onLoad()},t.prototype.setValue=function(n){var r=this;if(null!==n&&n<r.minValue&&(n=r.minValue),null!==n&&n>r.maxValue&&(n=r.maxValue),null===n||(r.value=n),r.isLoaded){var d,h=0;if(r.orientation==t.Orientation.Horizontal){r.progressPosition=h=r.value/r.maxValue*r.width,0==r.displayType||1==r.displayType&&(r.direction==t.Direction.LeftToRight?r.valueElement.style.width=h<=r.borderRadius?"0px":h>=r.width-r.borderRadius?r.middleElement.style.width:h-r.borderRadius+"px":h<=r.borderRadius?r.valueElement.style.width="0px":h>=r.width-r.borderRadius?(r.valueElement.style.left="0px",r.valueElement.style.width=r.middleElement.style.width):(r.valueElement.style.left=r.width-h-r.borderRadius+"px",r.valueElement.style.width=h-r.borderRadius+"px")),h>0?(r.markerElement.style.width=r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull?h+"px":r.width+"px",r.markerElement.style.visibility="visible"):(r.markerElement.style.width=r.width+"px",r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull&&(r.markerElement.style.visibility="hidden")),r.markerElement.style.left=r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull?r.direction==t.Direction.LeftToRight?r.borderWidth.left+"px":r.width-h+r.borderWidth.left+"px":r.borderWidth.left+"px";var i=2*-r.height-r.borderWidth.top;if(0==h||r.width==h)r.markerElement.style.top=i+"px",r.markerElement.style.height=r.height+"px",r.markerElement.style.cssText=r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius);else if(h<r.borderRadius){var u=r.height-2.25*(r.borderRadius-Math.sqrt(Math.pow(r.borderRadius,2)-Math.pow(r.borderRadius-h,2)));r.markerElement.style.top=i+r.height/2-u/2+"px",r.markerElement.style.height=u+"px",r.markerElement.style.cssText=r.direction==t.Direction.LeftToRight?r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,0,0,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(0,r.borderRadius,r.borderRadius,0)}else r.width-h<r.borderRadius?(d=(2*(r.borderRadius-(r.width-h))+(r.borderRadius-Math.sqrt(Math.pow(r.borderRadius,2)-Math.pow(r.borderRadius-(r.width-h),2))))/3,r.markerElement.style.cssText=r.direction==t.Direction.LeftToRight?r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,d,d,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(d,r.borderRadius,r.borderRadius,d)):(r.markerElement.style.top=i+"px",r.markerElement.style.height=r.height+"px",r.markerElement.style.cssText=r.direction==t.Direction.LeftToRight?r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,0,0,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(0,r.borderRadius,r.borderRadius,0))}else if(r.orientation==t.Orientation.Vertical){r.progressPosition=h=r.value/r.maxValue*r.height,0==r.displayType||1==r.displayType&&(r.direction==t.Direction.TopToBottom?r.valueElement.style.height=h<=r.borderRadius?"0px":h>=r.height-r.borderRadius?r.middleElement.style.height:h-r.borderRadius+"px":h<=r.borderRadius?r.valueElement.style.height="0px":h>=r.height-r.borderRadius?(r.valueElement.style.top="0px",r.valueElement.style.height=r.middleElement.style.height):(r.valueElement.style.top=r.height-h-r.borderRadius+"px",r.valueElement.style.height=h+2*r.borderRadius+"px")),h>0?(r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull?r.markerElement.style.height=h+"px":(r.markerElement.style.height=r.height+"px",r.markerElement.style.cssText=r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius)),r.markerElement.style.visibility="visible"):(r.markerElement.style.height="0px",r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull&&(r.markerElement.style.visibility="hidden"));var c=r.borderWidth.left;if(0==h||r.height==h)r.markerElement.style.left=c+"px",r.markerElement.style.width=r.width+"px",r.markerElement.style.cssText=r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius);else if(h<r.borderRadius){var l=2.5*h;l>r.width&&(l=r.width),r.markerElement.style.left=c+r.width/2-l/2+"px",r.markerElement.style.width=l+"px",r.markerElement.style.cssText=r.direction==t.Direction.BottomToTop?r.markerElement.style.cssText+t._createBorderRadiusCss(0,0,r.borderRadius,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,r.borderRadius,0,0)}else r.height-h<r.borderRadius?(d=(2*(r.borderRadius-(r.height-h))+(r.borderRadius-Math.sqrt(Math.pow(r.borderRadius,2)-Math.pow(r.borderRadius-(r.height-h),2))))/3,r.markerElement.style.cssText=r.direction==t.Direction.BottomToTop?r.markerElement.style.cssText+t._createBorderRadiusCss(d,d,r.borderRadius,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,r.borderRadius,d,d)):(r.markerElement.style.left=c+"px",r.markerElement.style.width=r.width+"px",r.markerElement.style.cssText=r.direction==t.Direction.BottomToTop?r.markerElement.style.cssText+t._createBorderRadiusCss(0,0,r.borderRadius,r.borderRadius):r.markerElement.style.cssText+t._createBorderRadiusCss(r.borderRadius,r.borderRadius,0,0));r.markerElement.style.top=r.animationStyle!=t.AnimationStyle.StaticFull&&r.animationStyle!=t.AnimationStyle.CustomFull?r.direction==t.Direction.TopToBottom?2*-r.height-r.borderWidth.top+"px":-r.height-h-r.borderWidth.top+"px":2*-r.height-r.borderWidth.top+"px"}r.progress=r.value/r.maxValue}null!=r.onValueChanged&&r.onValueChanged()},t._elementCurrentStyle=function(n,r){if(n.currentStyle){var h=0,d="",s=!1;for(h=0;h<r.length;h++)"-"!=r[h].toString()?(d+=s?r[h].toString().toUpperCase():r[h].toString(),s=!1):s=!0;return n.currentStyle[r=d]}return getComputedStyle(n,null).getPropertyValue(r)},t._parseInt=function(n){var r=parseInt(n);return isNaN(r)&&(r=0),r},t._createBorderRadiusCss=function(n,r,h,d){return null!=n&&null==r&&null==h&&null==d?"; -moz-border-radius: "+n+"px; -ms-border-radius: "+n+"px; -o-border-radius: "+n+"px; -webkit-border-radius: "+n+"px; -khtml-border-radius: "+n+"px; border-radius: "+n+"px;":"; -moz-border-radius: "+(n=n||0)+"px "+(r=r||0)+"px "+(h=h||0)+"px "+(d=d||0)+"px; -ms-border-radius: "+n+"px "+r+"px "+h+"px "+d+"px; -o-border-radius: "+n+"px "+r+"px "+h+"px "+d+"px; -webkit-border-radius: "+n+"px "+r+"px "+h+"px "+d+"px; -khtml-border-radius: "+n+"px "+r+"px "+h+"px "+d+"px; border-radius: "+n+"px "+r+"px "+h+"px "+d+"px;"},e.ProgressBar=t}),function(e){for(var t=[w.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16},r.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2},r.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16},r.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446},r.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6},r.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2},r.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16},r.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773},r.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5},r.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14},r.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7},r.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4},r.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12},r.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6},r.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2},r.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113},r.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54},r.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3},r.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1},r.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7},r.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2},r.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3},r.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1},r.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8},r.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4},r.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1},r.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4},r.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1},r.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6},r.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2},r.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3},r.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6},r.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4},r.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1},r.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1},r.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3},r.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2},r.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2,enumEmbed:3,enumChromeOS:4,enumHarmonyOS:5},r.EnumDWT_UploadDataFormat={Binary:0,Base64:1},r.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8},r.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8},r.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5},r.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5},r.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14}}}(window),w.DWT.EnumDWT_Error={ModuleNotExists:-2371},function(){function e(t){return w.Lib.isString(t)?t:("errorMessage"in t&&(n=t.errorMessage),"message"in t&&(n=t.message),w.Lib.isString(n)||(n="message"in n?n.message:""),"errorCode"in t&&-1==n.indexOf("(")&&(n+="("+t.errorCode+")"),"code"in t&&-1==n.indexOf("(")&&(n+="("+t.code+")"),n);var n}w.Lib.Errors={OutOfRange:function(t){t._errorCode=-1010,t._errorString="Data parameter out of supported range."},InvalidIndex:function(t){t._errorCode=-1033,t._errorString="Invalid index."},InvalidValue:function(t){t._errorCode=-1034,t._errorString="Invalid value."},NoImage:function(t){t._errorCode=-1035,t._errorString="There is no image."},UnrecognizedExt:function(t){t._errorCode=-1110,t._errorString="Unrecognized file extension."},LoadTextPDFButSetImageOnly:function(t){t._errorCode=-1119,t._errorString="The text-based PDF file was not imported correctly because ConvertMode was set to CM_IMAGEONLY, which means PDF Rasterizer is turned off. Please set ConvertMode to Dynamsoft.DWT.EnumDWT_ConvertMode.CM_AUTO to enable it."},SourceHasNothingToCapture:function(t){t._errorCode=-1029,t._errorString="Source has nothing to capture."},bImageOnlyError_NotPurelyPDF:function(t){return-1416==t},MustUpgradeService:function(t){t._errorCode=-2207,t._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},Server_Restarted:function(t){t._errorCode=-2208,t._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(t){t._errorCode=-2209,t._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(t){t._errorCode=-2210,t._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(t){t._errorCode=-2300,t._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(t){t._errorCode=-2301,t._errorString="Network error."},InvalidResultFormat:function(t){t._errorCode=-2302,t._errorString="The result format is invalid."},UploadError:function(t,n,r,h){if(n)t._errorCode=-2303,t._errorString="Upload cancelled.";else if(t._errorCode=-2003,h&&h>0||r){var d=["HTTP process error: "];r&&d.push(r),h&&h>0&&d.push(" ("+h+")"),t._errorString=d.join("")+"."}else t._errorString="HTTP process error."},HttpDownloadUrlError:function(t){t._errorCode=-2304,t._errorString="Http download error: the url is invalid."},HttpDownloadError:function(t,n,r,h){if(n)t._errorCode=-2305,t._errorString="User cancelled the operation.";else if(t._errorCode=-2003,h&&h>0||r){var d=["HTTP process error: "];r&&d.push(r),h&&h>0&&d.push(" ("+h+")"),t._errorString=d.join("")+"."}else t._errorString="HTTP process error."},UploadFileCannotEmpty:function(t){t._errorCode=-2306,t._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(t){t._errorCode=-2307,t._errorString="The width or height you entered is invalid."},Server_Invalid:function(t){0==t._errorCode&&(t._errorCode=-2308,t._errorString="The local Dynamsoft Service has been stopped.")},InvalidLocalFilename:function(t,n){t._errorCode=-2309,t._errorString="The LocalFile is empty in the name "+n+" Function."},BarCode_InvalidIndex:function(t,n){t._errorCode=-2310,t._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(t){t._errorCode=-2311,t._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(t){t._errorCode=-2312,t._errorString="The file length is empty."},UploadExceededMaxSize:function(t){t._errorCode=-2313,t._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(t){t._errorCode=-2314,t._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(t,n){t._errorCode=-2315,t._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(t){t._errorCode=-2316,t._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(t){t._errorCode=-2317,t._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(t){t._errorCode=-2318,t._errorString="Invalid destination file."},InvalidSourceFile:function(t){t._errorCode=-2319,t._errorString="Invalid source file."},InvalidFile:function(t){t._errorCode=-2320,t._errorString="Invalid file."},hasLicenseError:function(t){return t._errorCode>=-2348&&t._errorCode<=-2325},OCR_InvalidIndex:function(t,n){t._errorCode=-2321,t._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(t){t._errorCode=-2322,t._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(t){t._errorCode=-2323,t._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(t){t._errorCode=-2324,t._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(t){t._errorCode=-2325,w.Lib.License.isLTS()?(t._errorString="The license is invalid.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key is empty or invalid."},LicenseExpired:function(t,n){t._errorCode=-2326;var r="";n&&""!=n&&-1==n.indexOf("on")&&(r=" on "+n),w.Lib.License.isLTS()?(t._errorString="The license has expired"+r+".",w.DWT.lcexp().then(function(){t._errorString=w.DWT.licenseException.message})):t._errorString="The current product key has expired"+r+", please contact the site administrator."},LicenseNoChrome:function(t){t._errorCode=-2327,t._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(t){t._errorCode=-2328,t._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(t){t._errorCode=-2329,t._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(t){t._errorCode=-2330,t._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(t){t._errorCode=-2392,t._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(t){t._errorCode=-2333,w.Lib.License.isLTS()?(t._errorString="The license for the module twain is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNoWebcam:function(t){t._errorCode=-2338,w.Lib.License.isLTS()?(t._errorString="The license for the module direct show is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(t){t._errorCode=-2339,w.Lib.License.isLTS()?(t._errorString="The license for the module pdf rasterizer is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(t){t._errorCode=-2340,w.Lib.License.isLTS()?(t._errorString="The license for the module ocr is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(t){t._errorCode=-2341,w.Lib.License.isLTS()?(t._errorString="The license for the module ocr pro is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(t){t._errorCode=-2342,t._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(t){t._errorCode=-2343,t._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(t){t._errorCode=-2344,t._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(t){t._errorCode=-2345,t._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(t){t._errorCode=-2346,t._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(t){t._errorCode=-2347,t._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(t){t._errorCode=-2348,t._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(t){t._errorCode=-2349,t._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(t){t._errorCode=-2350,t._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(t){t._errorCode=-2351,t._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(t){t._errorCode=-2352,t._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(t){t._errorCode=-2353,t._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(t){t._errorCode=-2354,t._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(t){t._errorCode=-2355,t._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(t){t._errorCode=-2356,t._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(t){t._errorCode=-2357,t._errorString="The header name you entered is invalid."},IndicesNotArray:function(t){t._errorCode=-2358,t._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(t){t._errorCode=-2359,t._errorString="The index is out of range."},IndexNullOrUndefined:function(t){t._errorCode=-2360,t._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(t){t._errorCode=-2361,t._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(t){t._errorCode=-2362,t._errorString="The image type is not supported."},InvalidDataFormat:function(t){t._errorCode=-2363,t._errorString="The data format is not supported."},InvalidUploadInSegments:function(t){t._errorCode=-2364,t._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(t){t._errorCode=-2365,t._errorString="The url is invalid."},ConvertBase64Failed:function(t){t._errorCode=-2366,t._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(t){t._errorCode=-2367,t._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(t){t._errorCode=-2368,t._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(t){t._errorCode=-2369,t._errorString="The current product key is missing the WASM core license, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(t){t._errorCode=-2370,w.Lib.License.isLTS()?(t._errorString="The license for the module pdf rasterizer is not found or has expired.",w.Lib.Errors.SetLTSException(t)):t._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},WebTwainModuleNotExist:function(t){t._errorCode=w.DWT.EnumDWT_Error.ModuleNotExists,t._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(t){t._errorCode=-2372,t._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(t){t._errorCode=-2375,t._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(t){t._errorCode=-2376,t._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(t){t._errorCode=-2377,t._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(t){t._errorCode=-2378,t._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(t){t._errorCode=-2379,t._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(t){t._errorCode=-2380,t._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(t){t._errorCode=-2381,t._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(t){t._errorCode=-2382,t._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(t){t._errorCode=-2383,t._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(t){t._errorCode=-2384,t._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(t){t._errorCode=-2385,t._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(t){t._errorCode=-2386,t._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(t){t._errorCode=-2387,t._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(t){t._errorCode=-2388,t._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(t){t._errorCode=-2389,t._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(t){t._errorCode=-2390,t._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(t){t._errorCode=-1034,t._errorString="Invalid image ID."},InvalidEventName:function(t){t._errorCode=-2391,t._errorString="Invalid event name."},ConvertBlobIsEmpty:function(t){t._errorCode=-2393,t._errorString="Failed to convert the data to blob."},InvalidTagName:function(t){t._errorCode=-2394,t._errorString="Invalid tag name."},WebTwainModuleDownloadFailure:function(t){t._errorCode=-2395,t._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(t,n){t._errorCode=-2396,t._errorString="The current product key is invalid, please contact the site administrator."},ServiceNotSupport:function(t,n){t._errorCode=-2400,t._errorString=n+" doesn't work under current settings."},MobileNotSupport:function(t,n){t._errorCode=-2400,t._errorString=n+" doesn't work under current settings."},LoadImageFailed:function(t,n){t._errorCode=-2401,t._errorString="Failed to load image: "+e(n)},RotateFailed:function(t,n){t._errorCode=-2402,t._errorString="Failed to rotate image: "+e(n)},FlipFailed:function(t,n){t._errorCode=-2403,t._errorString="Failed to flip image: "+e(n)},MirrorFailed:function(t,n){t._errorCode=-2404,t._errorString="Failed to mirror image: "+e(n)},EraseFailed:function(t,n){t._errorCode=-2405,t._errorString="Failed to erase image: "+e(n)},InvertFailed:function(t,n){t._errorCode=-2406,t._errorString="Failed to invert image: "+e(n)},SaveImageFailed:function(t,n){t._errorCode=-2407,t._errorString="Failed to save image: "+e(n)},ChangeImageSizeFailed:function(t,n){t._errorCode=-2408,t._errorString="Failed to change image size: "+e(n)},CropFailed:function(t,n){t._errorCode=-2409,t._errorString="Failed to crop image: "+e(n)},SkewAngleFailed:function(t,n){t._errorCode=-2410,t._errorString="Failed to skew angle: "+e(n)},ConvertToGrayScaleFailed:function(t,n){t._errorCode=-2411,t._errorString="Failed to convert to gray scale: "+e(n)},ConvertToBWScaleFailed:function(t,n){t._errorCode=-2412,t._errorString="Failed to convert to black and white scale: "+e(n)},SetDPIFailed:function(t,n){t._errorCode=-2413,t._errorString="Failed to set dpi: "+e(n)},SetImageWidthFailed:function(t,n){t._errorCode=-2414,t._errorString="Failed to set image width: "+e(n)},GetLicenseInfoFailed:function(t,n){t._errorCode=-2415,t._errorString="Failed to get license info: "+e(n)},InvalidParameter:function(t){t._errorCode=-2416,t._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(t){t._errorCode=-2417,t._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(t){t._errorCode=-2418,t._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(t){t._errorCode=-2419,t._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(t){t._errorCode=-2420,t._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(t){t._errorCode=-2421,t._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(t){t._errorCode=-2422,t._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(t){t._errorCode=-2423,t._errorString="The index is invalid."},GetMD5Failed:function(t,n){t._errorCode=-2424,t._errorString="Failed to get MD5: "+e(n)},ConvertFromBase64Failed:function(t){t._errorCode=-2425,t._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(t){t._errorCode=-2426,t._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.DWT.ProductKey."},BarcodeReaderError:function(t,n){t._errorCode=-2427,t._errorString=n},TiffTagCountExceedError:function(t){t._errorCode=-2428,t._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(t){t._errorCode=-2429,t._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(t){t._errorCode=-2430,t._errorString="The current product key is invalid."},LicenseNotSupportWebcamWasm:function(t){t._errorCode=-2431,t._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(t){t._errorCode=-2432,t._errorString="Invalid parameter."},ActiveXNotSupport:function(t){t._errorCode=-2433,t._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(t){t._errorCode=-2434},PerspectiveCallback:function(t){t._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(t){return'Error: The element specified by the id "'+t+"\" doesn't exist."},StartScanFailed:function(t){t._errorCode=-2436,t._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(t){t._errorCode=-2437,t._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(t){t._errorCode=-2438,t._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(t){t._errorCode=-2439,t._errorString="You cannot call the method bindViewer() when Dynamsoft.DWT.UseDefaultViewer is set to false."},LongKeyShortKeyMixed:function(t){t._errorCode=-2444,t._errorString="You can only specify the license once and have already specified it with the API ProductKey."},ImageEditorExist:function(t){t._errorCode=-2500,t._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(t){t._errorCode=-2501,t._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(t){t._errorCode=-2502,t._errorString="A CustomElement already exists."},ImageEditorNotExist:function(t){t._errorCode=-2503,t._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(t){t._errorCode=-2504,t._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(t){t._errorCode=-2505,t._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(t){t._errorCode=-2506,t._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(t){t._errorCode=-2507,t._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(t){t._errorCode=-2508,t._errorString="The CustomElement object has been disposed."},EventNotExist:function(t){t._errorCode=-2509,t._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(t){t._errorCode=-2510,t._errorString="The callback is not a function."},ElementRequired:function(t){t._errorCode=-2511,t._errorString="Parameter 'element' is required."},ElementNotExist:function(t){t._errorCode=-2512,t._errorString="Parameter 'element' doesn't exist."},Destroyed:function(t){t._errorCode=-2513,t._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(t){t._errorCode=-2514,t._errorString="Invalid property value. "},HostNotAvailable:function(t,n){t._errorCode=-2515,t._errorString="The Dynamsoft Service is not configured correctly on "+n+". Please check."},CameraRequired:function(t){t._errorCode=-2516,t._errorString="The camera addon is required."},OldTagNameRequired:function(t){t._errorCode=-2517,t._errorString="Old tag name is required."},NewTagNameRequired:function(t){t._errorCode=-2518,t._errorString="New tag name is required."},CursorInvalidMode:function(t){t._errorCode=-2519,t._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(t,n){t._errorCode=-2520,t._errorString=n},ChangeContrastFailed:function(t,n){t._errorCode=-2521,t._errorString="Failed to change contrast: "+e(n)},ChangeBrightnessFailed:function(t,n){t._errorCode=-2522,t._errorString="Failed to change brightening: "+e(n)},ConvertToGrayScaleFilterCallbackErr:function(t,n){t._errorCode=-2523,t._errorString='Failed to apply "gray" filter: '+e(n)},ConvertToBWScaleFilterCallbackErr:function(t,n){t._errorCode=-2524,t._errorString='Failed to apply "black and white" filter: '+e(n)},RemoveShadowFilterCallbackErr:function(t,n){t._errorCode=-2525,t._errorString='Failed to apply "remove shadow" filter: '+e(n)},EnhanceAndSharpenFilterCallbackErr:function(t,n){t._errorCode=-2526,t._errorString='Failed to apply "enhance and sharpen" filter: '+e(n)},BrightenFilterCallbackErr:function(t,n){t._errorCode=-2527,t._errorString='Failed to apply "brightening" filter: '+e(n)},SaveTonerCallbackErr:function(t,n){t._errorCode=-2528,t._errorString='Failed to apply "save toner" filter: '+e(n)},GetBlurryScoreErr:function(t,n){t._errorCode=-2529,t._errorString="Failed to get blurry score: "+e(n)},FileNameCannotEmpty:function(t){t._errorCode=-2530,t._errorString="File name cannot be empty."},FileNameNotString:function(t){t._errorCode=-2531,t._errorString="File name is not a string."},DocumentEditorNotExist:function(t){t._errorCode=-2532,t._errorString="This documentEditor doesn't exist."},DocumentEditorDispose:function(t){t._errorCode=-2533,t._errorString="The documentEditor object has been disposed."},DocumentEditorExist:function(t){t._errorCode=-2534,t._errorString="A documentEditor already exists."},RgbaImageToBlobErr:function(t,n){t._errorCode=-2529,t._errorString="Failed to convert image data: "+e(n)},LoadTextPDFButNoPdfrLicenseErr:function(t){t._errorCode=-2530,t._errorString="This PDF file is not supported by the Core module. You may need the PDF Rasterizer add-on to support it."},WebviewerError:function(t,n,r){t._errorCode=r||-2600,t._errorString=n},ClearErrorInfo:function(t){t._errorCode=0,t._errorString=""},SetLTSException:function(t){var n=w.DWT.licenseException;n.code=t._errorCode,n.message=t._errorString,n.fromLTS=!1},__last:!1}}(),function(e){function t(xe){this.clearData(),this.m_enumInstance=xe,xe==e.DWT.EnumInstance.dwt_desktop?this.m_deploymentType="desktop":(xe==e.DWT.EnumInstance.dwt_browser||xe==e.DWT.EnumInstance.dbr)&&(this.m_deploymentType="browser")}e.DWT.LTS=e.DWT.LTS||{},e.DWT.lwscmd=[],e.DWT.licenseException={code:0,message:"",fromLTS:!1},e.DWT.bLTSOnline=!0,e.DWT.axInstance=void 0,e.DWT.lOnUpdateDWObj=[],e.DWT.globalWS=[],e.DWT.EnumInstance={dwt_desktop:0,dwt_browser:1,dbr:2},t.prototype.clearData=function(){this.m_iUsingTime=0,this.m_jvUsingTime=e.Lib.nil,this.m_countMap={},this.m_newConsum=!1,this.m_mapSavedToDb=!1,this.m_minExpiredTime=e.Lib.nil,this.m_maxExpiredTime=e.Lib.nil,this.m_cu=e.Lib.nil,this.m_ar=e.Lib.nil,this.m_ltsInstance=e.Lib.nil},t.prototype.set_cu=function(xe){this.m_cu=xe},t.prototype.get_cu=function(){return this.m_cu},t.prototype.set_ar=function(xe){this.m_ar=xe},t.prototype.get_ar=function(){return this.m_ar},t.prototype.get_ltsInstance=function(){return this.m_ltsInstance||(this.m_ltsInstance=function pe(xe){var Me,Oe,me=e.DWT.licenseServer;if(me&&me.length>0)for(Me=0;Me<me.length;Me++)e.Lib.endsWith(Oe=me[Me],"/")||(me[Me]=Oe+"/");var ze={lf:e.Lib.localforage,btoa:e.Lib.btoa,atob:e.Lib.atob,sutlcb:function(){e.Lib.isFunction(e.DWT.lonsend)&&e.DWT.lonsend()},fol:e.DWT.OnFirstOffline,dwt:!0,product:"dwt|dbr"};if(ze.feab=xe==e.DWT.EnumInstance.dwt_browser||xe==e.DWT.EnumInstance.dbr?e.DWT.lfeab_wasm:e.DWT.lfeab_ax,!e.navInfoSync.bIE&&e.DWT.ltsDebug&&(ze.debugLog=console.log),e.LTS&&e.LTS._)return e.LTS._.createLtsInstance(ze);var Ze={},ot=function(){return w.Lib.Promise.reject({code:Be.LtsJsLoadError,message:"The dynamsoft.lts.js load failed."})};return Ze.i=ot,Ze.s=ot,Ze.caret=ot,Ze}(this.m_enumInstance)),this.m_ltsInstance},t.prototype.inited_ltsInstance=function(xe){return!!this.m_ltsInstance},t.prototype.set_maxExpiredTime=function(xe){this.m_maxExpiredTime=xe},t.prototype.get_maxExpiredTime=function(){return this.m_maxExpiredTime},t.prototype.set_minExpiredTime=function(xe){this.m_minExpiredTime=xe},t.prototype.get_minExpiredTime=function(){return this.m_minExpiredTime},t.prototype.get_deploymentType=function(){return this.m_deploymentType};var q,oe,Ee,ge,ce=0,he={},ie=!1,V=!1,Re=!1,G=!1,k=!1;function H(){var xe=e.DWT.handshakeCode;return e.Lib.isString(xe)||(xe=""),xe}function ee(){var xe=e.DWT.organizationID;return e.Lib.isNumber(xe)?xe=""+xe:e.Lib.isString(xe)||(xe=""),xe}function Z(){return e.DWT.JSVersion.split(",")[0]}function Q(){var xe=e.DWT.ResourcesPath,me="";return w.Lib.endsWith(xe,"/")||(me="/"),[xe,me,"src"].join("")}function le(xe){var me=xe;return me===e.Lib.nil&&(me=w.Lib.IsNeedLoadWasm()?e.DWT.EnumInstance.dwt_browser:e.DWT.EnumInstance.dwt_desktop),me==e.DWT.EnumInstance.dwt_browser?(oe||(oe=new t(me)),oe):me==e.DWT.EnumInstance.dbr?(ge||(ge=new t(me)),ge):(Ee||(Ee=new t(me)),Ee)}function Ce(){return Date.now()}function Te(xe){var me=xe?new Date(xe):new Date,Me="yyyy-MM-ddTHH:mm:ss.SSSZ",Oe={"M+":me.getUTCMonth()+1,"d+":me.getUTCDate(),"H+":me.getUTCHours(),"h+":me.getUTCHours()%12||12,"m+":me.getUTCMinutes(),"s+":me.getUTCSeconds(),"q+":Math.floor((me.getUTCMonth()+3)/3),"S+":me.getUTCMilliseconds()};for(var ze in/(y+)/.test(Me)&&(Me=Me.replace(RegExp.$1,(me.getUTCFullYear()+"").substr(4-RegExp.$1.length))),Oe)new RegExp("("+ze+")").test(Me)&&(Me=Me.replace(RegExp.$1,1==RegExp.$1.length?Oe[ze]:("000"+Oe[ze]).substr(("000"+Oe[ze]).length-RegExp.$1.length)));return Me}e.DWT.lupverfy=function(){le(e.DWT.EnumInstance.dwt_desktop).get_ltsInstance(),le(e.DWT.EnumInstance.dwt_browser).get_ltsInstance(),le(e.DWT.EnumInstance.dbr).get_ltsInstance()},e.DWT.lsmid=function(xe){le(e.DWT.EnumInstance.dwt_desktop).set_cu(xe)},e.DWT.laddDWTObj=function(xe){var me=!1;e.Lib.each(e.DWT.lOnUpdateDWObj,function(Me){if(Me==xe)return me=!0,!1}),me||e.DWT.lOnUpdateDWObj.push(xe)},e.DWT.lremoveDWTObj=function(xe){e.Lib.each(e.DWT.lOnUpdateDWObj,function(me,Me){if(me==xe)return e.DWT.lOnUpdateDWObj.splice(Me,1),!1})},e.DWT.lsendUpdateEvt=function(xe){var me=[];if(e.Lib.each(e.DWT.lOnUpdateDWObj,function(ze){xe==w.DWT.EnumInstance.dwt_desktop?(ze.isUsingActiveX()||ze._bLocalService)&&me.push(ze):xe==w.DWT.EnumInstance.dwt_browser&&(ze.isUsingActiveX()||ze._bLocalService||me.push(ze))}),0==me.length)return e.Lib.Promise.resolve();var Oe,Me=me[0];return Me.isUsingActiveX()?(e.Lib.each(me,function(ze){ze.SetLTSInfo(le(xe).get_ar(),le(xe).get_cu())}),Me.GetLicenseInfo().then(function(ze){ze&&e.Lib.isArray(ze.Detail)&&ze.Detail.length>0&&w.DWT.lsexp(xe,ze.Detail[0].ExpireDate)})):(Oe=Me.SetLTSLicenseAsync(le(xe).get_ar()).then(function(ze){ze&&e.Lib.isArray(ze.Detail)&&ze.Detail.length>0&&w.DWT.lsexp(xe,ze.Detail[0].ExpireDate)}),e.Lib.each(me,function(ze,Ze){0!=Ze&&ze.SetLTSLicenseAsync(le(xe).get_ar())}),Oe)},e.DWT.lgcb=function(){var xe=e.navInfo,me=[];return xe.bChrome?me.push("Chrome"):xe.bFirefox?me.push("Firefox"):xe.bEdge?me.push("Edge"):xe.bIE?me.push("IE"):xe.bSafari?me.push("Safari"):xe.bOpera?me.push("Opera"):xe.b360SE?me.push("360SE"):xe.bTencentTraveler?me.push("TencentTraveler"):xe.bMaxthon?me.push("Maxthon"):xe.bMetaSr?me.push("MetaSr"):xe.bTheWorld?me.push("TheWorld"):xe.bUC&&me.push("UC"),me.push(xe.strBrowserVersion),xe.bWin||xe.bWin64?me.push("Windows"):xe.bMac?me.push("Mac"):xe.bLinux?me.push("Linux"):xe.bAndroid?me.push("Android"):w.Lib.env.bMobile?me.push("Mobile OS"):xe.bEmbed&&me.push("Embed OS"),me.join(" ")},e.DWT.lglic=function(xe){var me=le(xe);if(e.DWT.lclex(),me.get_ar()&&me.get_cu())return Promise.resolve({ar:me.get_ar(),cu:me.get_cu()});var Me={engineResourcePath:Q(),version:e.Lib.replaceAll(e.DWT.JSVersion,",","."),pk:H(),dm:location.origin?e.Lib.startsWith(location.origin,"http")?location.origin:"https://localhost":e.Lib.startsWith(location.href,"http")?location.href:"https://localhost",browserInfo:e.DWT.lgcb(),deviceFriendlyName:e.DWT.DeviceFriendlyName||"",ls:e.DWT.licenseServer,sp:e.DWT.sessionPassword,og:ee(),getMinExpireTime:function(){return me.get_maxExpiredTime()},getMaxExpireTime:function(){return me.get_minExpiredTime()},fol:e.DWT.OnFirstOffline};return Me.dt=me.get_deploymentType(),xe==e.DWT.EnumInstance.dwt_desktop&&(Me.lsu=me.get_cu()),xe==e.DWT.EnumInstance.dbr||(Me.dwt=!0,Me.updateLicense=function(Oe){me.set_ar(Oe.ar),me.get_cu()||me.set_cu(Oe.cu),e.DWT.lsendUpdateEvt(xe)}),me.get_ltsInstance().i(Me).then(function(Oe){return me.get_ar()||me.set_ar()(Oe.ar),me.get_cu()||me.set_cu(Oe.cu),Oe})},e.DWT.lshow=function(){return{t:q,t2:ce,m:JSON.stringify(he)}},e.DWT.lgct=function(xe){switch(xe){case 0:return"3011";case 1:return"3012";case 2:return"3014";case 3:return"3013";case 4:return"3015";case 14:return"3016";case 3001:return"3001";case 3002:return"3002";case 3003:return"3003";case 3004:return"3004";case 3005:return"3005";case 3006:return"3006";case 3007:return"3007";case 5001:return"5001";case 4001:return"4001";case 4002:return"4002";case 4003:return"4003"}return""},e.DWT.lcvrf=function(xe){var me;me=xe.isUsingActiveX()||xe._bLocalService?w.DWT.EnumInstance.dwt_desktop:w.DWT.EnumInstance.dwt_browser,setTimeout(function(){e.DWT.lcvrf_(xe,me)},1)},e.DWT.lcvrf_=function(xe,me){var ve,Oe=e.DWT.lgcb(),Ze=le(me),ot={handShake:H(),organization:ee(),clientUuid:Ze.get_cu(),clientFriendName:"",cw:"",os:Oe,versionMajor:Z(),deploymentType:Ze.get_deploymentType(),edition:"javascript"},Fe=function(Ke,rt){var ht,pt,st=w.Lib,ft=0;if(st.isString(Ke)&&""!=Ke&&"{}"!=Ke&&rt&&st.isArray(rt)&&!(rt.length<1)){if(pt=le(rt[0]),ht=st.parse(Ke),e.DWT.lclex(),0==ce){var St=Ce(),At="";ce=St,q=Te(St),he={},ft=0,st.each(ht,function(En,mn){(mn<ft||0==ft)&&(ft=mn,At=En)}),ft>0&&pt.get_ltsInstance().s(e.DWT.licenseServer,At,ft,!0).then(function(){},function(En){})}st.each(ht,function(En,mn){var oo=!1,so=parseInt(mn);so>0&&so!=ft&&(so+18e4<Ce()&&(oo=!0),pt.get_ltsInstance().s(e.DWT.licenseServer,En,mn,oo).then(function(){},function(nc){}))})}};if(ot.product="dwt|dbr",ve=JSON.stringify(ot),!xe.isUsingActiveX()){var Ye=w.Lib.html5.Funs,Ne="GetBuffer",Je=Ye.makeParams(w.Lib.replaceAll(ve,'"','\\"')),we=xe._objWS,Ae=xe.clientId,Ue=Ye.generateCmdId();return e.DWT.lwscmd.push({cmd:Ne,cmdId:Ue,sFun:Fe,fFun:function(){},params:[me,xe._host]}),Ye.sendData(we,e.DWT.lgj(Ae,Ne,Je,Ue),!1,!0)}Fe(xe.GetBuffer(ve),[me,""])},e.DWT.lavrf=function(xe,me,Me){var Oe=1;if(""!=xe){me>1&&(Oe=me);var ze=Ce();if(ce>0&&ce+18e4<ze){V?(he={},e.DWT.lavrf__unload()):e.DWT.lavrf__(!0,Me);var ot=Ce()+1;ce=ot,q=Te(ot),he={}}ie=!0,V=!1,he[xe]?he[xe]+=Oe:he[xe]=Oe,0==ce&&e.DWT.lavrf__(!0,Me)}},e.DWT.lavrf_=function(xe,me){if(ie){var Me=1;xe&&(Me=xe),setTimeout(function(){e.DWT.lavrf__(!1,me)},Me)}},e.DWT.lavrf__=function(xe,me){var Ze,Ye,Me=Ce(),Oe=!1,ze=!!xe,Fe=0,Ve=me;e.Lib.isUndefined(Ve)&&(Ve=e.DWT.EnumInstance.dwt_browser),Ye=le(Ve),ie=!1,0==ce&&(Oe=!0,ce=Me,q=Te(Me)),Ze=ce;var Ne={};Ne.usingTime=q;var Je={};if(w.Lib.each(he,function(ht,ft){Je[ft]=ht,ht>0&&Fe++}),Ne.counts=Je,ze||Ze+18e4<Me){ze=!0;var we=Ce()+1;if(ce=we,q=Te(we),he={},V=!1,0==Fe)return}else{if(0==Fe)return;V=!0}Ne.concurrentDuration=Oe?1:180;var st,He=e.DWT.lgcb(),rt={handShake:H(),organization:ee(),clientUuid:Ye.get_cu(),clientFriendName:"",cw:"",os:He,versionMajor:Z(),deploymentType:Ye.get_deploymentType(),edition:"javascript",records:[Ne],product:"dwt|dbr"};st=JSON.stringify(rt),e.DWT.ltsDebug&&Te(),e.DWT.lclex(),Ye.get_ltsInstance().s(e.DWT.licenseServer,st,""+Ze,ze).then(function(){},function(ht){})},e.DWT.lavrf__unload=function(){var Me,xe=Ce(),ze=le(e.DWT.EnumInstance.dwt_desktop),Ze=le(e.DWT.EnumInstance.dwt_browser),ot=le(e.DWT.EnumInstance.dbr);ie=!1,0==ce&&(ce=xe,q=Te(xe)),Me=ce;var ve=Ce()+1;ce=ve,q=Te(ve),he={},V=!1,Me+=1,e.DWT.lclex(),ze.inited_ltsInstance()&&ze.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Me,!0).then(function(){},function(Fe){}),Ze.inited_ltsInstance()&&Ze.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Me,!0).then(function(){},function(Fe){}),ot.inited_ltsInstance()&&ot.get_ltsInstance().s(e.DWT.licenseServer,!1,""+Me,!0).then(function(){},function(Fe){})},e.DWT.lclex=function(){var xe=e.DWT.licenseException;xe.code=0,xe.message="",xe.httpResponse="",xe.fromLTS=!1},e.DWT.li=function(xe){var me;return xe.axInstance&&(e.DWT.axInstance=xe.axInstance,e.DWT.axInstance)?(me=e.DWT.axInstance.GetUUID(),e.DWT.ltsDebug&&console.log("ActiveX cu: "+me),le(xe.instanceMode).set_cu(me),me):le(xe.instanceMode).get_cu()},e.DWT.lfeab_ax=function(xe){return new Promise(function(me,Me){var Oe="";if(e.DWT.axInstance)try{Oe=e.DWT.axInstance.Encrypt(xe,0)}catch{}me(Oe)})},e.DWT.lfeab_wasm=function(xe){return new Promise(function(me,Me){var Oe=new w.Imagecore;Oe.getAesResult(xe).then(function(ze){Oe.terminate(),me(ze)},function(ze){Oe.terminate(),Me(ze)})})},e.DWT.lgj=function(xe,me,Me,Oe){var ze=[];ze.push("{"),ze.push('"id":"'),ze.push(xe),ze.push('"'),Oe&&(ze.push(',"cmdId":"'),ze.push(Oe),ze.push('"')),ze.push(',"method":"'),ze.push(me),ze.push('"'),ze.push(',"module":"dwt","version":"');var Ze=w.Lib,ot=[Ze.product.getDWTPrefix(),Ze.product.getServerVersionInfo()].join("");return ze.push(ot),ze.push('"'),null!=Me&&(ze.push(',"parameter":'),ze.push(Me)),ze.push("}"),ze.join("")},e.DWT.lwsproc=function(xe){var me;if(xe.indexOf("Exception:")>=0||0==xe.indexOf("Error")){var Me=xe;(me=w.DWT.lwscmd.pop()||{}).fFun&&me.fFun({code:-2520,message:Me})}else{try{xe=w.Lib.parse(xe)}catch(ot){return void((me=e.DWT.lwscmd.pop()||{}).fFun&&me.fFun(ot))}if(xe.cmdId){var ze,Ze=-1;for(ze=w.DWT.lwscmd.length-1;ze>=0;ze--)if(w.DWT.lwscmd[ze].cmdId==xe.cmdId){me=w.DWT.lwscmd.splice(Ze=ze,1)[0];break}if(Ze<0)return}if("GetBuffer"==xe.method){if(void 0!==xe.exception&&void 0!==xe.description)return void(me.fFun&&me.fFun({code:xe.exception,message:xe.description}));me.sFun(me.sFun&&xe.result.length>0?xe.result[0]:"",me.params)}else me.sFun&&me.sFun(xe)}},e.DWT.lsexp=function(xe,me){var Oe,Me=me;if(3==(Oe=(Me=e.Lib.replaceAll(Me,"/","-")).split("-")).length){var ze=Oe[0],Ze=Oe[1],ot=Oe[2];Ze.length<2&&(Ze=(Ze="00"+Ze).substr(Ze.length-2)),ot.length<2&&(ot=(ot="00"+ot).substr(ot.length-2)),Me=[ze,Ze,ot].join("-")}var ve=[Me,"T23:59:59.999Z"].join("");le(xe).set_minExpiredTime(ve),le(xe).set_maxExpiredTime(ve)},e.DWT.lunload=function(){e.DWT.lavrf__unload();var xe=le(e.DWT.EnumInstance.dwt_desktop),me=le(e.DWT.EnumInstance.dwt_browser),Me=le(e.DWT.EnumInstance.dbr);xe.clearData(),me.clearData(),Me.clearData(),ce=0,q=e.Lib.nil,he={},V=!1,ie=!1,Re=!1,G=!1,k=!1,e.DWT.lwscmd=[],e.DWT.lclex(),e.DWT.bLTSOnline=!0,e.DWT.axInstance=e.Lib.nil,e.DWT.lOnUpdateDWObj=[],e.DWT.globalWS=[]};var Be={NetworkError:-2440,Timedout:-2441,JsonError:-2442,CorsError:-2443,Expired:-2445,LtsJsLoadError:-2446,UUIDError:-2447};e.DWT.lcexp=function(xe){return le(xe).get_ltsInstance().caret().then(function(){return!1},function(me){var Me=w.DWT.licenseException,Oe="";return me instanceof Error||"message"in me?Oe=me.message:e.Lib.isString(me)&&(Oe=me),e.DWT.lsetException(Be.Expired,Oe,!1),G||(G=!0,console&&console.error&&console.error(Oe),w.OnLTSLicenseError&&w.OnLTSLicenseError(w.Lib.License.getPublicLicenseContent(Me.message))),!0})},e.DWT.OnLicenseException=function(){var xe=e.DWT.licenseException,me=xe.message;if(e.Lib.isString(me)&&(me.indexOf("Error Code")>-1?me=e.Lib.replaceAll(me,"Error Code","error code"):me.indexOf("Error code")>-1&&(me=e.Lib.replaceAll(me,"Error code","error code"))),me.indexOf("(https://www.dynamsoft.com/purchase-center/)")>-1&&(me=me.replace("(https://www.dynamsoft.com/purchase-center/)","(https://www.dynamsoft.com/store/dynamic-web-twain/)"),xe.message=me),me.indexOf("error code:")>-1){var Me=me.substr(0,me.indexOf("message")),Oe=me.substr(me.indexOf("message"));Me.indexOf("{")>-1&&(Me=Me.substr(Me.indexOf("{")+1)),Oe.indexOf("}")>-1&&(Oe=Oe.substr(0,Oe.indexOf("}"))),Me=e.Lib.replaceAll(Me,"error code:",""),Oe=e.Lib.replaceAll(Oe,"message: ",""),e.DWT.lsetException(parseInt(Me),Oe,!0),console&&console.error&&console.error(Oe),w.OnLTSLicenseError&&w.OnLTSLicenseError(w.Lib.License.getPublicLicenseContent(me))}else{if(!xe.code){var ze=Be.NetworkError;me.indexOf("timed out")>-1||me.indexOf("timeout")>-1?ze=Be.Timedout:(me.indexOf("access-control-allow-origin")>-1||me.indexOf("cors")>-1)&&(ze=Be.CorsError),e.DWT.lsetException(ze,me,!0)}if(console&&console.error&&console.error(xe.message),xe.code==Be.LtsJsLoadError)return;w.OnLTSLicenseError&&w.OnLTSLicenseError(w.Lib.License.getPublicLicenseContent(xe.message))}},e.DWT.lol=function(){return e.DWT.bLTSOnline},e.DWT.OnFirstOffline=function(xe){e.DWT.bLTSOnline=!1},e.DWT.lpubdlg=function(xe,me){if(e.Lib.isString(xe)&&""!=xe){if(xe=e.Lib.atob(xe),console&&console.warn&&!Re&&console.warn(xe),1==me)return Re||(Re=!0,w.OnLTSPublicLicenseMessage&&w.OnLTSPublicLicenseMessage(w.Lib.License.getPublicLicenseContent(xe))),!0;2==me&&(Re||(Re=!0))}return!1},e.DWT.lcheckLic=function(xe,me){var Me=!1;if(me){if(e.Lib.isArray(me.Detail)&&me.Detail.length>0)return w.DWT.lsexp(xe,me.Detail[0].ExpireDate),w.DWT.lcexp().then(function(Ze){var ot=!1;Ze?ot=!0:(1==me.Trial||2==me.Trial)&&(ot=e.DWT.lpubdlg(me.Message,me.Trial)),!ot&&!e.DWT.bLTSOnline&&!k&&(k=!0,w.OnLTSConnectionWarning&&w.OnLTSConnectionWarning())});(1==me.Trial||2==me.Trial)&&(Me=e.DWT.lpubdlg(me.Message,me.Trial))}!Me&&!e.DWT.bLTSOnline&&!k&&(k=!0,w.OnLTSConnectionWarning&&w.OnLTSConnectionWarning())},e.DWT.lisValidID=function(xe){if(e.Lib.isString(xe)&&""!=xe)return!0;var me=e.DWT.licenseException;return e.DWT.lsetException(Be.UUIDError,"Failed to generate an ID for your device to license it: not enough permission.",!0),console&&console.error&&console.error(me.message),w.OnLTSUUIDError&&w.OnLTSUUIDError(me.message),!1},e.DWT.lsetException=function(xe,me,Me){var Oe=w.DWT.licenseException;Oe.code=xe,Oe.message=me,e.Lib.isUndefined(Me)||(Oe.fromLTS=Me)}}(w),w.Ready(function(e){e.LS={isSupportLS:function(){var t=w.navInfoSync,n=!1;if(!t.bEdge||!t.bFileSystem)try{n=!!window.localStorage}catch{}return n},item:function(t,n,r){var h=null;return this.isSupportLS()?(n?(localStorage.setItem(t,n),h=n):h=localStorage.getItem(t),null===h?r:h):r},removeItem:function(t){return!!this.isSupportLS()&&(localStorage.removeItem(t),!0)}}}),w.Ready(function(e,t){if(e.html5=e.html5||{},e.product.bHTML5Edition){var r,n=1,h=!1,d=!0;r=e.html5.Funs={notSupportProperty:function(R){},notSupportMethod:function(R){},getRandom:function(){for(var B,R=(new Date).getTime()%1e4,F=[],b=0;b<5;b++)B=Math.floor(10*Math.random()),0!=b||0!=B?F.push(B):b=-1;return R<10?F.push("000"):R<100?F.push("00"):R<1e3&&F.push("0"),F.push(R),F.join("")},generateCmdId:function(){return++n},cformat:function(R,F){if(e.isString(R)){var b,A,N,Y,ne,B=R.indexOf("<%");if(-1==B)return R;if(A=R.substring(0,B),!(B+2<(b=R.indexOf(">",A))))return R;N=R.substring(B+1,b),Y=R.substring(b+1);try{ne=e.sprintf(N,F)}catch{ne=""}return[A,ne,Y].join("")}return""},sendData:function(R,F,B,b){var A,N,Y,ne,Ie,_e,ce,q;if(!b){try{R.send(F)}catch(he){e.log(he)}return h}for(ne=new ArrayBuffer(12),N=B&&B.size?B.size:0,Y=(A=(q=new Blob([F])).size)+N,Ie=new DataView(ne),ce=0;ce<8&&Y;ce++)Ie.setUint8(ce,Y%256),Y=parseInt(Y/256);for(ce=0;ce<4&&A;ce++)Ie.setUint8(8+ce,A%256),A=parseInt(A/256);return _e=new Blob([ne,q]),R.send(_e),N>0&&R.send(B),ne=null,q=null,_e=null,Ie=null,d},__pushElement:function(R,F){if(e.isString(F))R.push('"'),R.push(F),R.push('"');else if(e.isArray(F)){var B=d;R.push("["),e.each(F,function(b){B?B=h:R.push(","),r.__pushElement(R,b)}),R.push("]")}else R.push(void 0===F?'""':F)},makeParams:function(){var R=arguments;if(void 0!==R&&0!==R.length){var B,b,F=[];return 1===R.length?(B=R[0],F.push("["),r.__pushElement(F,B),F.push("]")):2===R.length?(B=R[0],b=R[1],F.push("["),r.__pushElement(F,B),F.push(","),r.__pushElement(F,b),F.push("]")):r.__pushElement(F,Array.prototype.slice.call(R)),F.join("")}},getJson:function(R,F,B,b){var A=[];A.push("{"),A.push('"id":"'),A.push(R.clientId),A.push('"'),b&&(A.push(',"cmdId":"'),A.push(b),A.push('"')),A.push(',"method":"'),A.push(F),A.push('"'),A.push(',"module":"dwt","version":"');var Y=[e.product.getDWTPrefix(),e.product.getServerVersionInfo()].join("");return A.push(Y),A.push('"'),null!=B&&(A.push(',"parameter":'),A.push(B)),A.push("}"),A.join("")},refreshImageAfterInvokeFun:function(R,F,B){return 1==B},loadHttpBlob:function(R,F,B,b,A,N,Y,ne){var _e,ce,q=h;if(ce={method:F,dataType:"blob"},ne&&(ce.headers=ne),""!=R.HTTPUserName&&(ce.username=R.HTTPUserName,ce.password=R.HTTPPassword),b){if((w.Lib.env.bMobile||w.navInfo.bChrome||w.navInfo.bFirefox)&&"get"==F)return ce.fetchRaw=!0,fetch(B,ce).then(function(J){if(!J.ok)throw{httpCode:J.status,errorString:J.statusText};var te=J.headers.get("Content-Length"),oe=0,Ee=J.body.getReader(),ge=new ReadableStream({start:function(G){var k=function(){Ee.read().then(function(U){U.done?G.close():(Y({loaded:oe+=U.value.length,total:te}),G.enqueue(U.value),setTimeout(k,0))})};setTimeout(k,0)}}),Re=J.headers.get("Content-Type");return(!Re||""==Re)&&(Re="application/octet-stream"),new Response(ge,{headers:{"Content-Type":Re}})}).then(function(J){return J.blob()}).then(function(J){A(J),J=null},function(J){J&&J.httpCode?e.Errors.HttpDownloadError(R,!1,J.errorString,J.httpCode):e.Errors.HttpDownloadUrlError(R),e.isFunction(N)&&N({code:R._errorCode,message:R._errorString})}),!0;ce.onSuccess=A,e.isFunction(Y)&&(ce.beforeSend=function(J){J.addEventListener("progress",function(te){delete te.totalSize,delete te.position,Y(te)},h)}),q=d}else w.navInfoSync.bIE?(ce.dataType="arraybuffer",ce.onSuccess=function(J,te,oe){var Ee,Re;(Ee=J||oe.responseData)&&(Re=new Uint8Array(Ee)),R._errorCode=0,R._errorString="",A(Re),Re=null,q=d}):(ce.dataType="text",ce.contentType="text/plain; charset=x-user-defined",ce.mimeType="text/plain; charset=x-user-defined",ce.onSuccess=function(J,te,oe){var Ee,ge,Re;ge=(Ee=oe.responseText).length,Re=new Uint8Array(ge);for(var G=0;G<ge;G++)Re[G]=Ee.charCodeAt(G);R._errorCode=0,R._errorString="",A(Re),Re=null,q=d}),ce.headers?e.mix(ce.headers,{"X-Requested-With":h}):ce.headers={"X-Requested-With":h};if("post"==F){var ie,he=R.httpFormFields;if(he)try{ie=new FormData,e.each(he,function(J,te){J instanceof Blob?ie.append(te,J,J.name):ie.append(te,J)}),e.mix(ce,{data:ie,processData:h,contentType:h})}catch{}}_e=function(J,te,oe){var Ee,ge;J&&e.isArray(J)&&J.length>2?(Ee=J[1],ge=J[2]):(Ee=te,ge=oe),2==ge.state&&0==ge.status?"abort"===ge.statusText?e.Errors.HttpDownloadError(R,!0):e.Errors.HttpDownloadUrlError(R):e.Errors.HttpDownloadError(R,h,Ee,ge.status),e.isFunction(N)&&N()},ce.url=B,ce.async=b,ce.onError=_e,ce.onComplete=function(){e.bio=h};var V=e.ajax(ce);return b&&(e.bio=V),q},combineUrl:function(R,F,B){var b=[],A=F;return void 0===A||void 0===B?h:(e.isString(A)||(A=String(F)),0==A.indexOf("http://")?(A=A.replace("http://",""),b.push("http://")):0==A.indexOf("https://")?(A=A.replace("https://",""),b.push("https://")):(0==A.indexOf("//")&&(A=A.replace("//","")),b.push(R.IfSSL?"https://":"http://")),b.push(A),A.indexOf(":")<0&&(""==R.HTTPPort&&(R.HTTPPort=e.detect.ssl?443:80),(!e.detect.ssl&&80!=R.HTTPPort||e.detect.ssl&&443!=R.HTTPPort)&&(b.push(":"),b.push(R.HTTPPort))),0!==B.indexOf("/")&&b.push("/"),b.push(B),b.join(""))},httpPostUpload:function(R,F,B,b,A,N,Y,ne,Ie,_e,ce,q){if(!B||B.size<=0)return e.Errors.UploadFileCannotEmpty(R),e.isFunction(q)&&q(),h;var J,te,he=R.MaxUploadImageSize,ie=B.size,V=B.type;if(ie>he&&-1!=he)return e.Errors.UploadExceededMaxSize(R),e.isFunction(q)&&q(),h;if(""===V||V&&V!=R.HttpContentTypeFieldValue){var oe=B.slice||B.webkitSlice||B.mozSlice,Ee=B.name;(!e.isString(Ee)||""==Ee)&&(Ee=B.fileName),(J=oe.call(B,0,ie,R.HttpContentTypeFieldValue)).name=Ee}else J=B;return B=null,J.remoteFilename=R.__remoteFilename,te=this.httpUploadByBIO(R,F,J,A,b,N,Y,ne,Ie,_e,ce,q),J=null,te},httpPostUploadFiles:function(R,F,B,b,A,N,Y,ne,Ie,_e,ce){var ie,q=R.MaxUploadImageSize,he=0;if(!B||!e.isArray(B)||B.length<=0)return e.Errors.UploadFileCannotEmpty(R),e.isFunction(ce)&&ce(),h;for(ie=0;ie<B.length;ie++){var V=B[ie];if(!V||V.size<=0)return e.Errors.UploadFileCannotEmpty(R),e.isFunction(ce)&&ce(),h;var oe,J=V.size,te=V.type;if(he+=J,""===te||te&&te!=R.HttpContentTypeFieldValue){var ge=V.name,Re=(V.slice||V.webkitSlice||V.mozSlice).call(V,0,J,R.HttpContentTypeFieldValue);(!e.isString(ge)||""==ge)&&(ge=V.fileName),Re.name=this.cformat(ge,ie+1),B[ie]=Re}B[ie].remoteFilename=this.cformat(R.__remoteFilename,ie+1),V=null}if(he>q&&-1!=q)return e.Errors.UploadExceededMaxSize(R),e.isFunction(ce)&&ce(),h;for(oe=this.httpUploadByBIO(R,F,B,A,b,N,Y,ne,Ie,!1,_e,ce),ie=0;ie<B.length;ie++)B[ie]=null;return B=null,oe},httpPostUploadString:function(R,F,B,b,A,N,Y,ne,Ie,_e,ce){var q,he,V;return""==B?(e.Errors.UploadFileCannotEmpty(R),e.isFunction(ce)&&ce(),h):B.length>(he=R.MaxUploadImageSize)&&-1!=he?(e.Errors.UploadExceededMaxSize(R),e.isFunction(ce)&&ce(),h):((q=new Blob([B],{type:"text/plain"})).name=b,V=this.httpUploadByBIO(R,F,q,A,d,N,Y,ne,Ie,!1,_e,ce),q=null,V)},httpUploadByBIO:function(R,F,B,b,A,N,Y,ne,Ie,_e,ce,q){var he,ie,V,J;if(V=R.httpFormFields,J=new FormData,e.each(V,function(oe,Ee){oe instanceof Blob?J.append(Ee,oe,oe.name):J.append(Ee,oe)}),e.bio=new e.BIO({action:F,data:J,async:A,retry:ne,bOnlyEmptyIsOK:Ie}),(he=e.bio.get("uploadType"))&&((ie=he.get("ajaxConfig"))&&ie.headers&&N&&e.mix(ie.headers,N),b>=0&&he.set("blockSize",b),R.__withCredentials&&e.mix(ie.xhrFields,{withCredentials:!0})),R.__HTTPPostResponseString=h,e.bio.on(e.BIO.event.SUCCESS,function(oe){e.bio=h,R.__HTTPPostResponseString=oe&&e.isString(oe.response)?oe.response:"",e.isFunction(R.__OnHttpUploadStatus)&&R.__OnHttpUploadStatus({fileName:oe.name,percentage:100,statusCode:200,responseString:R.__HTTPPostResponseString}),e.isFunction(ce)&&ce(R.__HTTPPostResponseString)}),e.bio.on(e.BIO.event.ERROR,function(oe){var Ee=oe&&oe.canceled,Re=h,G=0;e.bio=h,R.__HTTPPostResponseString=oe&&e.isString(oe.response)?oe.response:"",Ee||(oe&&oe.msg&&(Re=oe.msg),oe&&oe.httpStatus&&(G=oe.httpStatus)),e.Errors.UploadError(R,Ee,Re,G),e.isFunction(R.__OnHttpUploadStatus)&&R.__OnHttpUploadStatus({fileName:oe.name,percentage:100,statusCode:G,responseString:R.__HTTPPostResponseString}),e.isFunction(q)&&q(R.__HTTPPostResponseString)}),(Y||e.isFunction(R.__OnHttpUploadStatus))&&(e.bio.on(e.BIO.event.PROGRESS,function(oe){delete oe.totalSize,delete oe.position;var Ee=0===oe.total?100:Math.round(100*oe.loaded/oe.total);[oe.loaded," / ",oe.total].join(""),e.isFunction(R.__OnHttpUploadStatus)&&(Ee>99&&(Ee=99),R.__OnHttpUploadStatus({fileName:oe.name,percentage:Ee,statusCode:0,responseString:""})),Y&&R._OnPercentDone([0,Ee,"","http",oe.name])}),Y&&R._OnPercentDone([0,-1,w.MSG.Uploading,"http"]),e.isFunction(R.__OnHttpUploadStatus))){var te="";e.isArray(B)&&B.length>0||(B&&B.name&&""!=B.name?te=B.name:B&&B.fileName&&(te=B.fileName)),R.__OnHttpUploadStatus({fileName:te,percentage:0,statusCode:0,responseString:""})}return _e&&_e.bCancel?(_e.st=2,e.isFunction(q)&&q(!1),!1):e.bio.upload(B)},httpPutImage:function(R,F,B,b,A,N,Y){var ne=d,Ie={method:"PUT",url:F,hasContent:d,processData:h,async:b,data:B,onSuccess:A,onError:function(){ne=h,e.isFunction(N)&&N()},onComplete:function(){e.bio=h},beforeSend:function(_e){e.isFunction(Y)&&_e.upload.addEventListener("progress",function(ce){delete ce.totalSize,delete ce.position,Y(ce)},h)}};return""!=R.HTTPUserName&&(Ie.username=R.HTTPUserName,Ie.password=R.HTTPPassword),b||e.mix(Ie,{headers:{"X-Requested-With":h}}),e.bio=e.ajax(Ie),ne},dialog:h,dialogRef:0,showMask:function(R){var F=this;e.log("showMask:"+R+"--"+F.dialogRef),0==F.dialogRef&&e.detect.showMask(),F.dialogRef++},hideMask:function(R){var F=this;e.log("hideMask:"+R+"--"+F.dialogRef),F.dialogRef>1?F.dialogRef--:F.dialogRef<=1&&(e.detect.hideMask(),F.dialog=h,F.dialogRef=0)},setBtnCancelVisibleForProgress:function(R,F){(0==e.cancelFrome&&R.__IfShowProgressBar==d||0!=e.cancelFrome&&R.__IfShowCancelDialogWhenImageTransfer==d)&&e.setBtnCancelVisibleForProgress(F)},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync","OnConsumed"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleOnBitmapChangedEvent:function(R,F,B){var b="_OnBitmapChanged";return e.isFunction(R[b])&&R[b](F.result,F,B),h},handleEvent:function(R,F,B){var b=F.result[0],A=R._objWS,N=h;return e.each(r.EVENTS,function(Y,ne){if(F.event===Y){var Ie=["_",Y].join("");return N=d,e.isFunction(R[Ie])&&R[Ie](F.result,F),h}}),N?(e.log("handled event:"+F.event),e.each(r.SEND_BACK_EVENTS,function(Y,ne){return r.isServerInvalid(R)?h:F.event===Y?(e.log("sendback event:"+F.event),r.sendData(A,r.getJson(R,F.event,r.makeParams(b),0),h,d),h):void 0})):(e.each(e.Addon_Events,function(Y,ne){if(F.event===Y){var Ie=["_",Y].join("");return N=d,e.isFunction(R[Ie])&&R[Ie](F.result),h}}),N&&(e.log("handled addon event:"+F.event),e.each(e.Addon_Sendback_Events,function(Y,ne){return r.isServerInvalid(R)?h:F.event===Y?(e.log("sendback addon event:"+F.event),r.sendData(A,r.getJson(R,F.event,r.makeParams(b),0),h,d),h):void 0}))),N},getImageType:function(R){if(void 0===R)return-1;if(R.length<4)return-1;var B=R.lastIndexOf(".");if(-1===B)return-1;var b=R.slice(B).toLowerCase();return".bmp"===b||".dib"===b?w.DWT.EnumDWT_ImageType.IT_BMP:".jpg"===b||".jpe"===b||".jpeg"===b||".jfif"===b?w.DWT.EnumDWT_ImageType.IT_JPG:".tif"===b||".tiff"===b?w.DWT.EnumDWT_ImageType.IT_TIF:".png"===b?w.DWT.EnumDWT_ImageType.IT_PNG:".pdf"===b?w.DWT.EnumDWT_ImageType.IT_PDF:".jp2"===b||".j2k"===b||".j2c"===b?w.DWT.EnumDWT_ImageType.IT_J2K:-1},addImageFileExt:function(R,F){var B,b=R.substring(R.lastIndexOf(".")).toLowerCase();return".bmp"==b||".dib"==b||".jpg"==b||".jpe"==b||".jpeg"==b||".jfif"==b||".tif"==b||".tiff"==b||".png"==b||".pdf"==b?R:(F==w.DWT.EnumDWT_ImageType.IT_BMP?B=[R,".bmp"].join(""):F==w.DWT.EnumDWT_ImageType.IT_JPG?B=[R,".jpg"].join(""):F==w.DWT.EnumDWT_ImageType.IT_PNG?B=[R,".png"].join(""):F==w.DWT.EnumDWT_ImageType.IT_TIF?B=[R,".tif"].join(""):F==w.DWT.EnumDWT_ImageType.IT_PDF?B=[R,".pdf"].join(""):F==w.DWT.EnumDWT_ImageType.IT_J2K&&(B=[R,".jp2"].join("")),B)},autoDiscardBlankImage:function(R,F){if(e.config.bDiscardBlankImage){var B=R._ImgManager.getCurrentImageIndex();R.IsBlankImage(B)&&R.RemoveImage(B);var b=["Blank Discard (",F,"): ",R.ErrorString].join("");e.isFunction(R.__OnPrintMsg)&&R.__OnPrintMsg(b)}},replaceLocalFilename:function(R){var F;return void 0===R?"":(F=(R=String(R)).replace(/\\/g,"\\\\"),w.navInfoSync.bFileSystem&&(F=decodeURI(F)),F)},GetImageInfo:function(R,F){var B=R._ImgManager.convertClientIndexToServerId(F);return-1==B?(e.Errors.IndexOutOfRange(R),!1):R._innerFun("GetImageInfo",r.makeParams(B))},isServerInvalid:function(R){var B,b,F=R;return b=F.__bMustUpgradeService,(B=!F.bReady||null===F._objWS)?e.Errors.Server_Invalid(F):b&&e.Errors.MustUpgradeService(F),B||b||-2208==F._errorCode},isHttpServerInvalid:function(R){var B,b,F=R;return b=F.__bMustUpgradeService,(B=!F.bReady||null===F.httpUrl)?e.Errors.Server_Invalid(F):b&&e.Errors.MustUpgradeService(F),B||b||-2208==F._errorCode},getBlobTypeByImageType:function(R){var F="application/octet-stream";switch(R){case 0:F="image/bmp";break;case 1:F="image/jpeg";break;case 2:F="image/tiff";break;case 3:F="image/png";break;case 4:F="application/pdf";break;case 14:F="image/jp2"}return F},DEF:function(R,F,B,b){var A;0!==B&&1!==B?A=B:(A={},B&&(A.set=1==b?function(N){var Y=1*N;return!e.isNumber(Y)||isNaN(Y)?(e.Errors.InvalidValue(R),h):(R._resetErr(),!!R._isValid()&&R._innerFun(F,r.makeParams(Y)))}:2==b?function(N){return e.isBoolean(N)?(R._resetErr(),!!R._isValid()&&R._innerFun(F,r.makeParams(N))):(e.Errors.InvalidValue(R),h)}:function(N){return e.isString(N)?(R._resetErr(),!!R._isValid()&&R._innerFun(F,r.makeParams(N))):(e.Errors.InvalidValue(R),h)})),A.get||(A.get=function(){if(R._resetErr(),!R._isValid())return!1;if("CurrentSourceName"==F){var N=R._innerFun(F);return R.__currentImageCaptureDriverType==w.DWT.EnumDWT_Driver.TWAIN64&&N.length>0?"Twain64-"+N:R.__currentImageCaptureDriverType==w.DWT.EnumDWT_Driver.ICA&&R.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&N.length>0?"ICA-"+N:N}return R._innerFun(F)}),F in R||Object.defineProperty(R,F,A)},_DEF_NOT_SUPPORT_MOBILE_A:function(R,F,B){var b={get:function(){return R._mobileNotSupport(F)}};(1===B||e.isUndef(B))&&(b.set=b.get),F in R||Object.defineProperty(R,F,b)},DEF_NOT_SUPPORT_MOBILE:function(R,F,B){e.isArray(F)?e.each(F,function(b){r._DEF_NOT_SUPPORT_MOBILE_A(R,b,B)}):r._DEF_NOT_SUPPORT_MOBILE_A(R,F,B)},callbacks:[],pushCallback:function(R,F,B){r.callbacks({method:R,callback:F,ticks:B})},refreshUIRef:0,isPDF:function(R){return 37==R[0]&&80==R[1]&&68==R[2]&&70==R[3]},isTIFF:function(R){return 73==R[0]&&73==R[1]&&42==R[2]&&0==R[3]||77==R[0]&&77==R[1]&&0==R[2]&&42==R[3]},isJP2:function(R){return 0==R[0]&&0==R[1]&&0==R[2]&&12==R[3]&&106==R[4]&&80==R[5]&&32==R[6]&&32==R[7]||255==R[0]&&79==R[1]&&255==R[2]&&81==R[3]},isJpeg:function(R){return 255==R[0]&&216==R[1]},isBMP:function(R){return 66==R[0]&&77==R[1]},isPng:function(R){return 137==R[0]&&80==R[1]&&78==R[2]&&71==R[3]},GetFileType:function(R){var F=w.DWT.EnumDWT_ImageType,b=R;return(R instanceof ArrayBuffer||R instanceof Array)&&(b=new Uint8Array(R.slice(0,12))),e.html5.Funs.isPDF(b)?F.IT_PDF:e.html5.Funs.isTIFF(b)?F.IT_TIF:e.html5.Funs.isPng(b)?F.IT_PNG:e.html5.Funs.isJpeg(b)?F.IT_JPG:e.html5.Funs.isBMP(b)?F.IT_BMP:e.html5.Funs.isJP2(b)?F.IT_J2K:F.IT_PNG}};var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];v(g("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function R(F,B){return(F=0|F||0)<0?Math.max(F+B,0):Math.min(F,B)}ArrayBuffer.prototype.slice=function(F,B){var Y,ne,Ie,_e,b=this.byteLength,A=R(F,b),N=b;return void 0!==B&&(N=R(B,b)),A>N?new ArrayBuffer(0):(Y=N-A,ne=new ArrayBuffer(Y),Ie=new Uint8Array(ne),_e=new Uint8Array(this,A,Y),Ie.set(_e),ne)}}(),O.prototype.append=function(R){return this.appendBinary(T(R)),this},O.prototype.appendBinary=function(R){this._buff+=R,this._length+=R.length;var B,F=this._buff.length;for(B=64;B<=F;B+=64)m(this._hash,I(this._buff.substring(B-64,B)));return this._buff=this._buff.substring(B-64),this},O.prototype.end=function(R){var b,N,F=this._buff,B=F.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<B;b+=1)A[b>>2]|=F.charCodeAt(b)<<(b%4<<3);return this._finish(A,B),N=v(this._hash),R&&(N=M(N)),this.reset(),N},O.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},O.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},O.prototype.setState=function(R){return this._buff=R.buff,this._length=R.length,this._hash=R.hash,this},O.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},O.prototype._finish=function(R,F){var b,A,N,B=F;if(R[B>>2]|=128<<(B%4<<3),B>55)for(m(this._hash,R),B=0;B<16;B+=1)R[B]=0;b=(b=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),A=parseInt(b[2],16),N=parseInt(b[1],16)||0,R[14]=A,R[15]=N,m(this._hash,R)},O.hash=function(R,F){return O.hashBinary(T(R),F)},O.hashBinary=function(R,F){var b=v(g(R));return F?M(b):b},(O.ArrayBuffer=function(){this.reset()}).prototype.append=function(R){var b,F=function E(R,F,B){var b=new Uint8Array(R.byteLength+F.byteLength);return b.set(new Uint8Array(R)),b.set(new Uint8Array(F),R.byteLength),B?b:b.buffer}(this._buff.buffer,R,!0),B=F.length;for(this._length+=R.byteLength,b=64;b<=B;b+=64)m(this._hash,p(F.subarray(b-64,b)));return this._buff=b-64<B?new Uint8Array(F.buffer.slice(b-64)):new Uint8Array(0),this},O.ArrayBuffer.prototype.end=function(R){var A,N,F=this._buff,B=F.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(A=0;A<B;A+=1)b[A>>2]|=F[A]<<(A%4<<3);return this._finish(b,B),N=v(this._hash),R&&(N=M(N)),this.reset(),N},O.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},O.ArrayBuffer.prototype.getState=function(){var R=O.prototype.getState.call(this);return R.buff=function P(R){return String.fromCharCode.apply(null,new Uint8Array(R))}(R.buff),R},O.ArrayBuffer.prototype.setState=function(R){return R.buff=function D(R,F){var N,B=R.length,b=new ArrayBuffer(B),A=new Uint8Array(b);for(N=0;N<B;N+=1)A[N]=R.charCodeAt(N);return F?A:b}(R.buff,!0),O.prototype.setState.call(this,R)},O.ArrayBuffer.prototype.destroy=O.prototype.destroy,O.ArrayBuffer.prototype._finish=O.prototype._finish,O.ArrayBuffer.hash=function(R,F){var B=function C(R){var b,A,N,Y,ne,Ie,F=R.length,B=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=F;b+=64)m(B,p(R.subarray(b-64,b)));for(A=(R=b-64<F?R.subarray(b-64):new Uint8Array(0)).length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<A;b+=1)N[b>>2]|=R[b]<<(b%4<<3);if(N[b>>2]|=128<<(b%4<<3),b>55)for(m(B,N),b=0;b<16;b+=1)N[b]=0;return Y=(Y=8*F).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt(Y[2],16),Ie=parseInt(Y[1],16)||0,N[14]=ne,N[15]=Ie,m(B,N),B}(new Uint8Array(R)),b=v(B);return F?M(b):b},e.SparkMD5=O}function m(R,F){var B=R[0],b=R[1],A=R[2],N=R[3];b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&A|~b&N)+F[0]-680876936|0)<<7|B>>>25)+b|0)&b|~B&A)+F[1]-389564586|0)<<12|N>>>20)+B|0)&B|~N&b)+F[2]+606105819|0)<<17|A>>>15)+N|0)&N|~A&B)+F[3]-1044525330|0)<<22|b>>>10)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&A|~b&N)+F[4]-176418897|0)<<7|B>>>25)+b|0)&b|~B&A)+F[5]+1200080426|0)<<12|N>>>20)+B|0)&B|~N&b)+F[6]-1473231341|0)<<17|A>>>15)+N|0)&N|~A&B)+F[7]-45705983|0)<<22|b>>>10)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&A|~b&N)+F[8]+1770035416|0)<<7|B>>>25)+b|0)&b|~B&A)+F[9]-1958414417|0)<<12|N>>>20)+B|0)&B|~N&b)+F[10]-42063|0)<<17|A>>>15)+N|0)&N|~A&B)+F[11]-1990404162|0)<<22|b>>>10)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&A|~b&N)+F[12]+1804603682|0)<<7|B>>>25)+b|0)&b|~B&A)+F[13]-40341101|0)<<12|N>>>20)+B|0)&B|~N&b)+F[14]-1502002290|0)<<17|A>>>15)+N|0)&N|~A&B)+F[15]+1236535329|0)<<22|b>>>10)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&N|A&~N)+F[1]-165796510|0)<<5|B>>>27)+b|0)&A|b&~A)+F[6]-1069501632|0)<<9|N>>>23)+B|0)&b|B&~b)+F[11]+643717713|0)<<14|A>>>18)+N|0)&B|N&~B)+F[0]-373897302|0)<<20|b>>>12)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&N|A&~N)+F[5]-701558691|0)<<5|B>>>27)+b|0)&A|b&~A)+F[10]+38016083|0)<<9|N>>>23)+B|0)&b|B&~b)+F[15]-660478335|0)<<14|A>>>18)+N|0)&B|N&~B)+F[4]-405537848|0)<<20|b>>>12)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&N|A&~N)+F[9]+568446438|0)<<5|B>>>27)+b|0)&A|b&~A)+F[14]-1019803690|0)<<9|N>>>23)+B|0)&b|B&~b)+F[3]-187363961|0)<<14|A>>>18)+N|0)&B|N&~B)+F[8]+1163531501|0)<<20|b>>>12)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b&N|A&~N)+F[13]-1444681467|0)<<5|B>>>27)+b|0)&A|b&~A)+F[2]-51403784|0)<<9|N>>>23)+B|0)&b|B&~b)+F[7]+1735328473|0)<<14|A>>>18)+N|0)&B|N&~B)+F[12]-1926607734|0)<<20|b>>>12)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b^A^N)+F[5]-378558|0)<<4|B>>>28)+b|0)^b^A)+F[8]-2022574463|0)<<11|N>>>21)+B|0)^B^b)+F[11]+1839030562|0)<<16|A>>>16)+N|0)^N^B)+F[14]-35309556|0)<<23|b>>>9)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b^A^N)+F[1]-1530992060|0)<<4|B>>>28)+b|0)^b^A)+F[4]+1272893353|0)<<11|N>>>21)+B|0)^B^b)+F[7]-155497632|0)<<16|A>>>16)+N|0)^N^B)+F[10]-1094730640|0)<<23|b>>>9)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b^A^N)+F[13]+681279174|0)<<4|B>>>28)+b|0)^b^A)+F[0]-358537222|0)<<11|N>>>21)+B|0)^B^b)+F[3]-722521979|0)<<16|A>>>16)+N|0)^N^B)+F[6]+76029189|0)<<23|b>>>9)+A|0,b=((b+=((A=((A+=((N=((N+=((B=((B+=(b^A^N)+F[9]-640364487|0)<<4|B>>>28)+b|0)^b^A)+F[12]-421815835|0)<<11|N>>>21)+B|0)^B^b)+F[15]+530742520|0)<<16|A>>>16)+N|0)^N^B)+F[2]-995338651|0)<<23|b>>>9)+A|0,b=((b+=((N=((N+=(b^((B=((B+=(A^(b|~N))+F[0]-198630844|0)<<6|B>>>26)+b|0)|~A))+F[7]+1126891415|0)<<10|N>>>22)+B|0)^((A=((A+=(B^(N|~b))+F[14]-1416354905|0)<<15|A>>>17)+N|0)|~B))+F[5]-57434055|0)<<21|b>>>11)+A|0,b=((b+=((N=((N+=(b^((B=((B+=(A^(b|~N))+F[12]+1700485571|0)<<6|B>>>26)+b|0)|~A))+F[3]-1894986606|0)<<10|N>>>22)+B|0)^((A=((A+=(B^(N|~b))+F[10]-1051523|0)<<15|A>>>17)+N|0)|~B))+F[1]-2054922799|0)<<21|b>>>11)+A|0,b=((b+=((N=((N+=(b^((B=((B+=(A^(b|~N))+F[8]+1873313359|0)<<6|B>>>26)+b|0)|~A))+F[15]-30611744|0)<<10|N>>>22)+B|0)^((A=((A+=(B^(N|~b))+F[6]-1560198380|0)<<15|A>>>17)+N|0)|~B))+F[13]+1309151649|0)<<21|b>>>11)+A|0,b=((b+=((N=((N+=(b^((B=((B+=(A^(b|~N))+F[4]-145523070|0)<<6|B>>>26)+b|0)|~A))+F[11]-1120210379|0)<<10|N>>>22)+B|0)^((A=((A+=(B^(N|~b))+F[2]+718787259|0)<<15|A>>>17)+N|0)|~B))+F[9]-343485551|0)<<21|b>>>11)+A|0,R[0]=B+R[0]|0,R[1]=b+R[1]|0,R[2]=A+R[2]|0,R[3]=N+R[3]|0}function I(R){var B,F=[];for(B=0;B<64;B+=4)F[B>>2]=R.charCodeAt(B)+(R.charCodeAt(B+1)<<8)+(R.charCodeAt(B+2)<<16)+(R.charCodeAt(B+3)<<24);return F}function p(R){var B,F=[];for(B=0;B<64;B+=4)F[B>>2]=R[B]+(R[B+1]<<8)+(R[B+2]<<16)+(R[B+3]<<24);return F}function g(R){var b,A,N,Y,ne,Ie,F=R.length,B=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=F;b+=64)m(B,I(R.substring(b-64,b)));for(A=(R=R.substring(b-64)).length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0;b<A;b+=1)N[b>>2]|=R.charCodeAt(b)<<(b%4<<3);if(N[b>>2]|=128<<(b%4<<3),b>55)for(m(B,N),b=0;b<16;b+=1)N[b]=0;return Y=(Y=8*F).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt(Y[2],16),Ie=parseInt(Y[1],16)||0,N[14]=ne,N[15]=Ie,m(B,N),B}function _(R){var B,F="";for(B=0;B<4;B+=1)F+=c[R>>8*B+4&15]+c[R>>8*B&15];return F}function v(R){var F;for(F=0;F<R.length;F+=1)R[F]=_(R[F]);return R.join("")}function T(R){return/[\u0080-\uFFFF]/.test(R)&&(R=unescape(encodeURIComponent(R))),R}function M(R){var b,F=[],B=R.length;for(b=0;b<B-1;b+=2)F.push(parseInt(R.substr(b,2),16));return String.fromCharCode.apply(String,F)}function O(){this.reset()}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=e.html5.Funs,h=r.DEF;e.html5.STwainStyle=function(i){this._parent=i,function d(i){var u=i;h(u,"width",{get:function(){return this._parent._width},set:function(f){this.SetSize(f,!1)}}),h(u,"height",{get:function(){return this._parent._height},set:function(f){this.SetSize(!1,f)}})}(this)},e.html5.STwainStyle.prototype.SetSize=function(i,u){!function s(i,u,f){var l,a=i,o=!1,c=!1;!!a._isBindViewer()&&(e.isString(u)&&u.length>0&&"%"===u.charAt(u.length-1)&&(o=u),!o&&u&&(l=parseInt(u))&&(o=l+"px"),e.isString(f)&&f.length>0&&"%"===f.charAt(f.length-1)&&(c=f),!c&&f&&(l=parseInt(f))&&(c=l+"px"),o&&(a._width=o),c&&(a._height=c),r.changeImageUISize(a,o,c))}(this._parent,i,u)}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=239514e3;n.prototype.convertServerIdToGuid=function(h){return 1*h+r},n.prototype.convertGuidToServerId=function(h){return 1*h-r},e.Index=e.Index||{},e.Index.ImageIndexManager=n}function n(){}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=e.html5.Funs,h=w.dcp,d=!1,s=!0;e.html5.STwain=function(f){var a=this,o=f||{},c=o.bNoViewer,l=o.bLocalService;a._destroy=!1,a.config=o,a.clientId=e.getRandom(),a._id=o.id,o.container?a._containerElement=o.container:o.containerID&&(a._containerElement=e.get(o.containerID)),a._bBindViewer=c?d:s,a._customIP=d,a._ssl=e.detect.ssl,o.customIP?(a._customIP=s,a._host=o.host):a._host=e.product.host,""==a._host||e.isLocalIP(a._host)?(a._bLocalService=l?s:d,a._bRemoteMode=d):(a._bLocalService=s,a._bRemoteMode=s),(o.customIP||h.bEnhancedMode)&&(a._port=o.port),a.bReady=d,a.httpFormFields={},a._objWS=null,a.__wsRetry=0,a.curCommand=[],a.__OnInternetTransferPercentage=o.onInternetTransferPercentage||"",a.__OnInternetTransferPercentageEx=o.onInternetTransferPercentageEx||"",a.__OnReady=o.onReady||null,a.__OnWSReconnect=o.onWSReconnect||null,a.__OnWSClose=o.onWSClose||null,a.__OnWSMessage=o.onWSMessage||null,a.__OnWSError=o.onWSError||null,a.__OnPercentDone=o.onPercentDone||"",a.__OnPrintMsg=o.onPrintMsg||"",a.__OnResult=o.onResult||"",a.HTTPPassword=o.HTTPPassword||"",a.HTTPPort=o.HTTPPort||(e.detect.ssl?443:80),a.HTTPUserName=o.HTTPUserName||"",a.__HTTPPostResponseString="",a.__strHttpContentTypeFieldValue="application/octet-stream",a.__IfShowProgressBar=s,a.__IfShowCancelDialogWhenImageTransfer=s,a._errorCode=0,a._errorString="",a.__bLoadingImage=d,a.__bAcquireImageNow=d,a.__bOpenFileNow=d,a.__backgroundColor=d,a.__addon={},a.__remoteFilename="RemoteFile",a.__sourceName=[],a.__defaultSourceName="",a.__sourceCount=0,a.__icaSourceCount=-1,a.__serverId="",a.__bConnecting=d,a.__bTrial=d,a.__licenseInfo=d,a.__httpHeaderMap=d,a.__bForceClose=d,a.__strProductName=a._bLocalService?"":w.DWT.ProductName,a.__versionInfo=w.DWT.JSVersion,a.__bMustUpgradeService=d,a.__withCredentials=d,a._moduleSize=1048576,a._segementUploadThreshold=w.dcp.b64bit?4294967296:524288e3,a._driverType=w.DWT.EnumDWT_Driver.TWAIN,a.__IfAppendImage=s,a.__maxImagesInBuffer=32767,a.__maxUploadImageSize=-1,a.__insertingIndex=-1,a.objImageIndexManager=new e.Index.ImageIndexManager(a.__maxImagesInBuffer),a._bServerPercentDone=s,a._aryBitmapCache=[],a._aryTiffTag=[],a._tiffCompressionType=w.DWT.EnumDWT_TIFFCompressionType.TIFF_AUTO,a._jpgQuality=80,a._pdfConvertMode=3,a._pdfRealConvertMode=3,a._pdfResolution=200,a._pdfPassword="",a._ifSSL=w.navInfoSync.bSSL,a._bRegistedLoad=!1,a._logLevel=0,a._scaleDownThreshold=0,a._pdfWriteSetting={},a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumUnknown,a.bPageFocus=!0,a.bServerAlwaysFocusOnPopupWindow=!0,e.License.isLTS()&&(a._blts=!0),function u(f,a){var o=a||{};f.__OnAfterOperate=o.onAfterOperate||"",f.__OnBeforeOperate=o.onBeforeOperate||"",f.__OnOperateStatus=o.onOperateStatus||"",f.__OnBitmapChanged=o.onBitmapChanged||"",f.__OnGetFilePath=o.onGetFilePath||"",f.__OnPreAllTransfers=o.onPreAllTransfers||"",f.__OnPreTransfer=o.onPreTransfer||"",f.__OnPostLoad=o.onPostLoad||"",f.__OnPostTransfer=o.onPostTransfer||"",f.__OnPostAllTransfers=o.onPostAllTransfers||"",f.__OnSourceUIClose=o.onSourceUIClose||"",f.__OnTransferCancelled=o.onTransferCancelled||"",f.__OnTransferError=o.onTransferError||"",f.__OnInternetTransferPercentage=o.onInternetTransferPercentage||"",f.__OnInternetTransferPercentageEx=o.onInternetTransferPercentageEx||"",f.__OnRemoteScanStatusAsync=o.onRemoteScanStatusAsync||""}(a,o)};var i=e.html5.STwain.prototype;i.getInstance=function(){return this},i._getWebTwainId=function(){return this._id},i._isMobileMode=function(){return!(""!=this._host&&!e.isLocalIP(this._host)||this._bLocalService)},i._isPC=function(){var f=w.navInfo;return f.bWin||f.bMac||f.bLinux},i._resetErr=function(){this._errorCode=0,this._errorString="";var f=w.DWT.licenseException;f.code=0,f.message=""},i._isValid=function(){return!this._destroy||(e.Errors.Destroyed(this),!1)},i._isBindViewer=function(){return this._bBindViewer},i._isNoViewer=function(){return!this._bBindViewer},i._mobileNotSupport=function(f,a){var o=this;return e.Errors.MobileNotSupport(o,f),e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),!1},i._mobileNotSupportAsync=function(f){var a=this;return e.Errors.MobileNotSupport(a,f),e.Promise.reject({code:a.ErrorCode,message:a.ErrorString})},i._serviceNotSupportAsync=function(f){var a=this;return e.Errors.ServiceNotSupport(a,f),e.Promise.reject({code:a.ErrorCode,message:a.ErrorString})},i._nouiNotSupport=function(f,a){var o=this;return e.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(o,f),e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),!1},i._OnRecieveMsg=function(f){var o,c,a=this;if(f.event){if("OnBitmapChanged"==f.event){if(f.cmdId)for(m=a.curCommand.length-1;m>=0;m--)if(a.curCommand[m].cmdId==f.cmdId)return void r.handleOnBitmapChangedEvent(a,f,c=a.curCommand[m].currentFileName);return void r.handleOnBitmapChangedEvent(a,f)}r.handleEvent(a,f,c)}else{if(f.cmdId){var m,I=-1;for(m=a.curCommand.length-1;m>=0;m--)if(a.curCommand[m].cmdId==f.cmdId){o=a.curCommand.splice(I=m,1)[0];break}if(I<0)return}else o=a.curCommand.pop()||{};if(void 0!==f.exception&&void 0!==f.description?(a._errorCode=f.exception,a._errorString=f.description):"StartScan"!=f.method&&"GetAddOnVersion"!=f.method&&(a._errorCode=0,a._errorString=""),"ReadBarcode"==f.method||"OCRRecognize"==f.method||f.request&&"OCRProRecognize"==f.request.method)o.sFun&&o.sFun(f);else{if("ActiveUI"==f.method||"VersionInfo"==f.method||"ConvertToBase64"==f.method||"SaveSelectedImagesToBase64Binary"==f.method||"ConvertToBlob"==f.method){if(o.sFun&&f.result.length>0)return void o.sFun(f.result)}else if("ShowFileDialog"==f.method||"SplitTiff"==f.method||"SplitPDF"==f.method||"EncodeAsBase64"==f.method||"ProductKey"==f.method||"GetSourceNames"==f.method||"GetSkewAngle"==f.method||"GetImageInfo"==f.method){if(o.sFun)return void o.sFun(f.result)}else if("GetLicenseInfo"==o.cmd&&e.isArray(f.Detail)){if(o.sFun)return void o.sFun(f)}else if("SetCapabilities"==f.method)return"exception"in f&&"0"!=f.exception?(f.result.errorCode&&f.result.errorString?(a._errorCode=f.result.errorCode,a._errorString=f.result.errorString):(a._errorCode=f.exception,a._errorString=f.description),o.fFun&&o.fFun(f.result),void(f=null)):(o.sFun&&o.sFun(f.result),void(f=null));if(f.result&&f.result.length&&("1"==f.result[0]||1==f.result[0]))o.sFun&&o.sFun();else if(f.exception){var p=!1;o.fFun&&(p=o.fFun(a._errorString)),!p&&f.exception&&f.exception<0&&-2115!=f.exception&&e.isFunction(a.__OnPrintMsg)&&a.__OnPrintMsg(a._errorString)}else{if("LoadImage"==f.method||"LoadImageEx"==f.method||"LoadImageFromBytes"==f.method||"LoadImageFromBase64Binary"==f.method||"LoadDibFromClipboard"==f.method||"FTPDownload"==f.method||"FTPDownloadEx"==f.method)return o.sFun&&o.sFun(f.result),void(f=null);o.fFun&&o.fFun(r.__pushElement(["result:"],f.result))}}}},i._OnReady=function(f){var o,a=this;if(e.detect.starting=!1,e.detect.bOK=!0,a.bReady=!0,a.__wsRetry=0,f||!w.DWT.ContainerMap[a._getWebTwainId()]){if(a._bLocalService&&w.DWT.IfUseWSPool){if(null===(o=a._objWS))return;if(o.onopen=null,a.httpUrl=e.getHttpUrl({host:a._host,ssl:a._ssl,port:a._port}),o.onmessage=function(p){var C,g=p.data;if("object"==typeof g){if(w.DWT.ConnectWithSocket){var T;for(T=a.curCommand.length-1;T>=0;T--)if("ConvertToBlob"==a.curCommand[T].cmd||"GetImageByIndex"==a.curCommand[T].cmd){C=a.curCommand.splice(T,1)[0];break}C.sFun(g)}return g=null,void(p=null)}var P=g.replace(/\0/g,"");try{P=e.parse(P)}catch{e.log(g)}P.id?e._deliverMsg(o.url,P):P=null},o.onclose=o.onerror=function(p){!e.page.bUnload&&!e.detect.starting&&(setTimeout(e._reconnectWSPool,500),e.detect.starting=!0),p&&e.log("websocket error: "+p),r.hideMask(!0),e.detect.bOK=!1,w.Lib.each(w.DWT.globalWS,function(g,C){if(g==o)return w.DWT.globalWS.splice(C,1),!1})},f)return void a._innerActiveUI(function(p){var C,_,v,g=a.__serverId;p&&p.length>=6?(C=p[1],v=p[5],a.__strProductName=_=p[2],e.isString(v)&&("win"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumWindow:"linux"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumLinux:"mac"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumMac:"embed"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==v&&(a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(C=p[1],a.__strProductName=_=p[2]):p&&p.length>=2?C=p[1]:e.log("ActiveUI return parameters error."),_&&(_=_.toLowerCase()),a.__serverId=C,a._blts?w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(T){return e.closeProgress("Reconnect"),a.SetLTSLicenseAsync(T.ar)}).then(function(T){w.DWT.laddDWTObj(a),w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_desktop,T)},function(T){T&&(w.DWT.lsetException(T.code||T.ltsErrorCode,T.message),w.DWT.OnLicenseException()),a.__unload(),w.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)}):(e.closeProgress("Reconnect"),a.SetProductKeyAsync(w.DWT.ProductKey)),g!=C?(e.Errors.Server_Restarted(a),a._ImgManager&&(a._ImgManager.clear(),a._ImgManager.OnReady())):a._ImgManager&&a._innerFunRawV2("HowManyImagesInBuffer").then(function(T){T&&T.result&&0==T.result[0]&&a._ImgManager.clear(),a._ImgManager.OnReady(),a._resetErr()})});e.isLocalIP(a._host)&&(e.LS.item("DWT_port",a._port),e.LS.item("DWT_ssl",a._ssl?"true":"false"))}else if(a._bLocalService&&!w.DWT.IfUseWSPool){var c,l;if(o=a._objWS,a._customIP?l={host:a._host,ssl:a._ssl,port:a._port}:(l=e.detect.urls[e.detect.cUrlIndex])?l.host=e.product.host:l={host:e.product.host,ssl:a._ssl,port:a._port},c=e.getHttpUrl(l),null===o)return;if(o.onopen=null,a.httpUrl=c,o.onmessage=function(p){var C,_,g=p.data;if("object"==typeof g){if(w.DWT.ConnectWithSocket){var T;for(T=a.curCommand.length-1;T>=0;T--)if("ConvertToBlob"==a.curCommand[T].cmd||"GetImageByIndex"==a.curCommand[T].cmd){C=a.curCommand.splice(T,1)[0];break}C.sFun(g)}return g=null,void(p=null)}a.__OnWSMessage&&a.__OnWSMessage(g);var P=g.replace(/\0/g,"");if(P.indexOf('"method" : "EnableBuffer"')>=0||P.indexOf('"method" : "GetBuffer"')>=0)w.DWT.lwsproc(P);else{if(P.indexOf("Exception:")>=0||0==P.indexOf("Error")){var E=g;return C=a.curCommand.pop()||{},_=!1,e.log(E+"@"+C.cmd),C.fFun&&(_=C.fFun(E)),void(!_&&e.isFunction(a.__OnPrintMsg)&&a.__OnPrintMsg(E))}try{P=e.parse(P)}catch{e.log(g)}a._OnRecieveMsg(P),P=null}},o.onclose=function(){a.bReady=!1,a.__wsRetry=0,e.Errors.Server_Invalid(a),!a.__bForceClose&&!e.page.bUnload&&!e.detect.starting&&(setTimeout(function(){e._checkAndReconnect(a._host,a._port)},500),e.detect.starting=!0),a.__OnWSClose&&a.__OnWSClose(),r.hideMask(!0),e.detect.bOK=!1,a.__bForceClose=!1,w.Lib.each(w.DWT.globalWS,function(p,g){if(p==o)return w.DWT.globalWS.splice(g,1),!1})},o.onerror=function(p){a.bReady=!1,a.__wsRetry=0,e.Errors.Server_Invalid(a),e.detect.bOK=!1,!e.page.bUnload&&!e.detect.starting&&(setTimeout(function(){e._checkAndReconnect(a._host,a._port)},500),e.detect.starting=!0),p&&e.log("websocket error: "+p),a.__OnWSError&&a.__OnWSError(),r.hideMask(!0)},f)return void a._innerActiveUI(function(p){var C,_,v,T,g=a.__serverId;p&&p.length>=6?(C=p[1],v=p[5],a.__strProductName=_=p[2],e.isString(v)&&("win"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumWindow:"linux"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumLinux:"mac"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumMac:"embed"==v?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==v&&(a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(C=p[1],a.__strProductName=_=p[2]):p&&p.length>=2?C=p[1]:e.log("ActiveUI return parameters error."),_&&(_=_.toLowerCase()),a.__serverId=C,a._blts?w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(D){return e.closeProgress("Reconnect"),a.SetLTSLicenseAsync(D.ar)}).then(function(D){w.DWT.laddDWTObj(a),w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_desktop,D)},function(D){D&&(w.DWT.lsetException(D.code||D.ltsErrorCode,D.message),w.DWT.OnLicenseException()),a.__unload(),w.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)}):(e.closeProgress("Reconnect"),a.SetProductKeyAsync(w.DWT.ProductKey)),g!=C?(e.Errors.Server_Restarted(a),a._ImgManager&&(a._ImgManager.clear(),a._ImgManager.OnReady()),e.isFunction(a.__OnWSReconnect)&&(T=e.getWSUrl(a._host,a._port,a._ssl),a.__OnWSReconnect(T,c))):a._ImgManager&&a._innerFunRawV2("HowManyImagesInBuffer").then(function(D){D&&D.result&&0==D.result[0]&&a._ImgManager.clear(),a._ImgManager.OnReady(),a._resetErr()})});e.isLocalIP(a._host)&&(e.LS.item("DWT_port",l.port),e.LS.item("DWT_ssl",l.ssl?"true":"false"))}if(e.attachProperty(a),e.html5.ui.init(a,a.config),e.html5.ui.addMethods(a),e.attachPropertyUI(a),a._ImgManager.OnReady(),a._bLocalService)a._innerActiveUI(function(p){var g,C,_,v=!1;if(p&&p.length>=6?(g=p[1],_=p[5],a.__strProductName=C=p[2],e.isString(_)&&("win"==_?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumWindow:"linux"==_?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumLinux:"mac"==_?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumMac:"embed"==_?a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumEmbed:"chromeos"==_&&(a.__serverPlatform=w.DWT.EnumDWT_PlatformType.enumChromeOS))):p&&p.length>=3?(g=p[1],a.__strProductName=C=p[2]):p&&p.length>=2?(g=p[1],v=!0):(v=!0,e.log("ActiveUI return parameters error.")),e.attachAddon(a),C&&(C=C.toLowerCase()),a.__serverId=g,a.__bMustUpgradeService=v,v)e.isFunction(a.__OnReady)&&a.__OnReady(a);else{var T;if(e.showLoadingMsg(-1,"",w.MSG.Init_SetLicenseForDWT),a._blts){e.isUndefined(a._bLocalService),T=w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(E){return a.SetLTSLicenseAsync(E.ar)}).then(function(E){w.DWT.laddDWTObj(a),w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_desktop,E)})}else{var P=w.DWT.ProductKey;T=""==P||"******"==P?e.Promise.resolve(0):a.SetProductKeyAsync(P)}T=T.then(function(){e.closeLoadingMsg();var E=!1;if(a._blts?0==w.DWT.licenseException.code&&(e.License.checkProductKey(a,{Core:!0},!0)||e.License.checkProductKey(a,{Webcam:!0},!0)?(w.DWT.lclex(),E=!0):e.License.checkProductKey(a,{Core:!0},!0)):e.License.checkProductKey(a,{Core:!0})||e.License.checkProductKey(a,{Webcam:!0},!0)?E=!0:e.License.checkProductKey(a,{Core:!0},!1,!0),e.isFunction(a.__OnReady)&&a.__OnReady(a),E)return a._setConvertModeAsync(a._pdfConvertMode).catch(function(){})},function(E){if(e.closeLoadingMsg(),a._blts&&E)return w.DWT.lsetException(E.code||E.ltsErrorCode,E.message),w.DWT.OnLicenseException(),a.__unload(),w.DWT.ContainerMap={},e.detect.arySTwains.splice(0),void e.detect.arySTwainsByIP.splice(0);a._blts?e.License.checkProductKey(a,{Core:!0},!0):e.License.checkProductKey(a,{Core:!0})||e.License.checkProductKey(a,{Webcam:!0},!0)||e.License.checkProductKey(a,{Core:!0},!1,!0)})}});else{var m;if(e.attachAddon(a),a.__serverId=1,a.__bMustUpgradeService=!1,e.showLoadingMsg(-1,"",w.MSG.Init_SetLicenseForDWT),a._blts)w.DWT.li({instanceMode:w.DWT.EnumInstance.dwt_browser}),m=w.DWT.lglic(w.DWT.EnumInstance.dwt_browser).then(function(p){return a.SetLTSLicenseAsync(p.ar)}).then(function(p){w.DWT.laddDWTObj(a),w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_browser,p)},function(p){p&&(w.DWT.lsetException(p.code||p.ltsErrorCode,p.message),w.DWT.OnLicenseException()),a.__unload(),w.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)});else{var I=w.DWT.ProductKey;m=""==I||"******"==I?e.Promise.resolve(0):a.SetProductKeyAsync(I)}m.then(function(){if(e.closeLoadingMsg(),a.ErrorCode<0)e.License.promptLicenseErr(a);else{var p=!1;a._blts?0==w.DWT.licenseException.code&&(e.License.checkProductKey(a,{Core:!0},!0)||e.License.checkProductKey(a,{Webcam:!0},!0)?(w.DWT.lclex(),p=!0):e.License.checkProductKey(a,{Core:!0},!0)):e.License.checkProductKey(a,{Core:!0})||e.License.checkProductKey(a,{Webcam:!0},!0)?e.License.checkProductKey(a,{Core:!0,Wasm:!0},!0,!0)&&(p=!0):e.License.checkProductKey(a,{Core:!0},!1,!0),p&&(w.WasmEnv&&w.WasmEnv.setLoglevel(a._logLevel),a._setConvertMode(a._pdfConvertMode)),e.isFunction(a.__OnReady)&&a.__OnReady(a)}},function(p){e.closeLoadingMsg(),a.errorCode=p.code,a.errorString=p.message,w.OnLicenseError(p.message,p.code)})}}else e.isFunction(a.__OnReady)&&a.__OnReady(a)},i.__unload=i.dispose=function(){var a,f=this;f._destroy||(f._ImgManager&&f._ImgManager.clear(),f.bReady&&((a=f._objWS)&&(f.__bForceClose=!0,w.DWT.IfUseWSPool?e._removeFromWSPool(f):a.close(),f.curCommand.splice(0),delete f._objWS),f.bReady=!1),f.__addon&&f.__addon.Camera&&f.__addon.Camera._viewer&&(""!=f.__addon.Camera.getStatus()&&f.__addon.Camera.closeSource().catch(function(){}),f.__addon.Camera._viewer.dispose(),f.__addon.Camera._viewer=null),f._isBindViewer()&&(f.UnbindViewer(),e.html5.ui.unLoad(f)),f._ImgManager&&(f._ImgManager.dispose(),f._ImgManager=null,f.Viewer=null),f.objImageIndexManager&&(f.objImageIndexManager=null),w.DWT.lremoveDWTObj(f),f._destroy=!0)}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=w.DWT,s=e.html5.STwain,i=s.prototype,a={Auto:0,G3:1,G4:2,LZW:3,ZIP:4,JPEG:5};e.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(V,J,te){var oe=window,Ee=w.navInfo;if((Ee.biPad||Ee.biPhone)&&!(oe.requestFileSystem||oe.webkitRequestFileSystem||oe.mozRequestFileSystem)&&(Ee.bSafari&&parseFloat(Ee.strBrowserVersion)<13||!Ee.bSafari)){var Re=window.open(V,"","",!1);return setTimeout(function(){Re.document.title=J},100),!0}var G=document.createElementNS("http://www.w3.org/1999/xhtml","a");if(G.href=V,G.download=J,G.target="_blank",document.body.appendChild(G),Ee.bEdge)G.click();else{var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!1),G.dispatchEvent(k)}return document.body.removeChild(G),!0},saveLocal:function(V,J,te){e.isString(V)&&V.indexOf("blob:http://")>-1?e.MobileFuns._innerSaveLocal(V,J,te):V instanceof Blob?e.MobileFuns._innerSaveLocal(URL.createObjectURL(V),J,te):V instanceof ArrayBuffer?e.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([V])),J,te):e.MobileFuns._innerSaveLocal(V,J,te)},dataURLtoBlob:function(V){var oe,Ee,ge,J=V.split(","),te=J[0].match(/:(.*?);/)[1];try{oe=atob(J[1])}catch{return oe="",!1}for(Ee=oe.length,ge=new Uint8Array(Ee);Ee--;)ge[Ee]=oe.charCodeAt(Ee);return new Blob([ge],{type:te})},appendTiffPage:function(V,J,te,oe){var Ee=V,ge=J,Re=te.context.bShowPercentProgress,G=Ee._aryTiffTag.length;if(G>0){G>32&&(G=32);for(var k=0;k<G;k++)ge=(ge=ge.then(function(U){te.context.tagIndex=0;var ee=Ee._aryTiffTag[te.context.tagIndex];return e.log("[Wasm]Save Image: page "+te.context.cIndex+" add tiff tag "+ee.tag),te.addTag(ee.tag,ee.content,ee.UseBase64Encoding)})).then(function(){te.context.tagIndex=te.context.tagIndex+1})}return ge=ge.then(function(){e.log("[Wasm]Save Image: page "+te.context.cIndex+" add tiff tag successfully");var U=te.context.aryIndex,H=te.context.cIndex;return Ee._ImgManager.getWebViewer().GetImageData(Ee._ImgManager.getUidByIndex(U[H]))}),Ee._scaleDownThreshold<=0||(ge=(ge=ge.then(function(U){var H=U&&U.metadata?U.metadata:{};return e.log("[Wasm]Save Image: scale"),te.context.metaData=H,w.ImageProcWrapper.resize(U.oriData,H.width,H.height,Ee._scaleDownThreshold,5,1==H.bitDepth)})).then(function(U){return e.log("[Wasm]Save Image: scaled"),{oriData:U.imageData,metadata:te.context.metaData}})),ge=ge.then(function(U){var H=w.DWT.EnumDWT_ImageType.IT_ALL,ee=te.context.tiffFormat;return e.log("[Wasm]Save Image: page "+te.context.cIndex+" append to tiff"),te.appendImage(U.oriData,H,ee,Ee._jpgQuality,1==U.metadata.bitDepth)}),Re&&(ge=ge.then(function(){var H=te.context.aryIndex.length,ye=te.context.cIndex+1;Ee._OnPercentDone([0,100*ye/(1*H),ye+"/"+H,""])})),ge.then(function(){var U=te.context.cIndex;return te.context.cIndex=U+1,U+1})},unloadWasm:function(){return c&&(c.terminate(),c=null),e.Promise.resolve()},loadCallback:function(V){if(V&&V.customData){var ee,J=V.customData,te=V.fPdfReader,oe=V.imgCore,Ee=J.src,ge=J.imgType,Re=J.index,G=J.password,k=J.resolution,U=J.convertMode,H=!1,ye=w.DWT.EnumDWT_ImageType;if(ge==ye.IT_PDF)return te||(te=p(),H=!0),ee=function(pe){te.close(),H&&te.terminate()},te.open(Ee,G).then(function(pe){var Ce,Te,Be;return(w.navInfo.biPhone||w.navInfo.biPad)&&(Ce=5,Te=85,Be=3840),te.readPage(Re,k,U,w.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,Ce,Te,Be)},ee).then(function(pe){return te.close(),H&&te.terminate(),pe.imageData},ee);if(ge==ye.IT_TIF)return oe||(oe=m(),H=!0),ee=function(pe){H&&oe.terminate()},oe.openTiff(Ee).then(function(pe){var Ce,Te,Be;return(w.navInfo.biPhone||w.navInfo.biPad)&&(Ce=5,Te=85,Be=3840),oe.readTiff(Re,w.DWT.EnumDWT_ImageType.IT_JPG,!1,Ce,Te,Be)}).then(function(pe){return H&&oe.terminate(),pe.imageData},ee);if(ge==ye.IT_PNG||ge==ye.IT_JPG||ge==ye.IT_BMP){oe||(oe=m()),H=!0;var Q=_this._jpgQuality;return ee=function(pe){H&&oe.terminate()},(w.navInfo.biPhone||w.navInfo.biPad)&&(H&&oe.terminate(),r1&&(r1.imageWidth>3840||r1.imageHeight>3840))?w.ImageProcWrapper.resizeImageWithMeta(Ee,r1,5,Q,3840).then(function(pe){return pe.imageData}):oe.readImage(Ee,w.DWT.EnumDWT_ImageType.IT_JPG,Q,!1).then(function(pe){return H&&oe.terminate(),pe.imageData},ee)}}return e.Promise.resolve()},convertOutputType:function(V){return V},isBlobUrl:function(V){return e.isString(V)&&V.indexOf("blob:http://")>-1},revoke:function(V){return!e.MobileFuns.isBlobUrl(V)||(window.URL||window.webkitURL).revokeObjectURL(V)}},i._innerSendToMobile=function(V,J,te,oe,Ee){var ge=this;return"GetLicenseInfo"==V||"SetLTSLicense"==V?(e.showMask(),_e(ge,J).then(function(Re){e.hideMask(),e.isFunction(oe)&&oe(Re)},function(Re){e.hideMask(),e.Errors.GetLicenseInfoFailed(ge,Re),Ee&&Ee(ge._errorCode,ge._errorString)})):e.License.checkProductKey(ge,{Core:!0,Wasm:!0},!0)?("SaveImage"==V?Ie(ge,J).then(function(Re){oe&&oe(Re.blobData,Re.type,Re.MD5)},function(){e.isFunction(Ee)&&Ee(ge._errorCode,ge._errorString)}):ge._innerSendToMobileV2(V,J).then(oe,function(){e.isFunction(Ee)&&Ee(ge._errorCode,ge._errorString)}),!0):(Ee&&Ee(ge._errorCode,ge._errorString),!1)},i._innerSendToMobileV2=function(V,J){var te=this;return"GetLicenseInfo"==V||"SetLTSLicense"==V?_e(te,J):e.License.checkProductKey(te,{Core:!0,Wasm:!0},!0)?"LoadImageFromBinary"==V?v(te,J):"RotateEx"==V?T(te,J):"Flip"==V?E(te,J):"Mirror"==V?P(te,J):"Invert"==V?M(te,J):"SaveImage"==V?Ie(te,J):"Crop"==V?O(te,J):"Erase"==V?R(te,J):"ChangeImageSize"==V?F(te,J):"GetSkewAngleOnly"==V?B(te,J):"GetSkewAngle"==V?b(te,J):"ConvertToGrayScale"==V?A(te,J):"ConvertToBWScale"==V?N(te,J):"SetDPI"==V?Y(te,J):"SetImageWidth"==V?ne(te,J):"IsTextBasedPDF"==V?_(te,J):"GetMD5"==V?ce(te,J):"ChangeBrightness"==V?he(te,J):"ChangeContrast"==V?q(te,J):e.Promise.reject({code:-1e3,message:"invalid method: "+V}):e.Promise.reject(w.DWT.licenseException)};var o=0,c=null,l=function(){var V=r.ProductKey;return e.License.isLTS()&&w.WasmEnv&&(V=w.WasmEnv.productKey),V},m=function(){return new w.Imagecore(l(),1)},I=function(){return new w.ImageProc(l(),1)},p=function(){return new w.PdfReader(l(),1)},_=function(V,J){var oe,Re,te=J[0],G=w.DWT.EnumDWT_ImageType;if(te instanceof FileList?oe=te[0]:te instanceof Blob?oe=te:te instanceof ArrayBuffer||te instanceof Uint8Array?(oe=new Blob([te]),Re=e.html5.Funs.GetFileType(te)):oe=te,e.isUndefined(Re)&&(oe.type?"application/pdf"==oe.type&&(Re=G.IT_PDF):Re=e.html5.Funs.getImageType(oe.name)),Re==G.IT_PDF){var k=p();return e.showMask(),k.open(oe,V._pdfPassword).then(function(U){return e.hideMask(),k.close(),k.terminate(),U.isTextBased},function(U){throw e.hideMask(),e.Errors.LoadImageFailed(V,U),k.close(),k.terminate(),{code:V._errorCode,message:V._errorString}})}return e.Errors.LoadImageFailed(V,"not pdf."),e.Promise.reject({code:V._errorCode,message:V._errorString})},v=function(V,J){var Ee,ge,G,k,te=J[0],oe=J[1],U=!1,H=0,ee=!1,ye=w.DWT.EnumDWT_ImageType,Z=!1;if(J.length>3&&(Ee=J[3]),J.length>4&&(ee=J[4]),J.length>5&&(Z=J[5]),Ee||""==(Ee=V.GetCurrentFileName())&&(Ee=V._ImgManager.getWebViewer().GetDefaultFileName()),te instanceof FileList?ge=te[0]:te instanceof Blob?ge=te:te instanceof ArrayBuffer||te instanceof Uint8Array?(ge=new Blob([te]),k=e.html5.Funs.GetFileType(te)):ge=te,e.isUndefined(ge))return e.Errors.InvalidSourceFile(V),e.Promise.reject({code:V._errorCode,message:V._errorString});if(e.isUndefined(k))if(ge.type){if(-1==(k="application/pdf"==ge.type?ye.IT_PDF:"image/png"==ge.type?ye.IT_PNG:"image/jpeg"==ge.type||"image/jpg"==ge.type?ye.IT_JPG:"image/bmp"==ge.type?ye.IT_BMP:"image/tiff"==ge.type||"image/tif"==ge.type?ye.IT_TIF:"image/jp2"==ge.type?ye.IT_J2K:e.html5.Funs.getImageType(ge.name))&&"application/octet-stream"==ge.type)return new e.Promise(function(Ce,Te){var Be=new FileReader;Be.onload=function(xe){J[0]=xe.target.result,Ce(J)},Be.readAsArrayBuffer(ge)}).then(function(Ce){return v(V,Ce)})}else k=e.html5.Funs.getImageType(ge.name);if(G=ge.name,k==ye.IT_JPG||k==ye.IT_PNG||k==ye.IT_BMP||k==ye.IT_J2K){ee||e.showMask();var Q=V._jpgQuality;return(U=m()).readImage(ge,ye.IT_JPG,Q,!1).then(function(Ce){return(w.navInfo.biPhone||w.navInfo.biPad)&&Ce&&(Ce.imageWidth>3840||Ce.imageHeight>3840)?w.ImageProcWrapper.resizeImageWithMeta(ge,Ce,5,V._jpgQuality,3840):Ce}).then(function(Ce){var Te=0;oe?(Te=3006,Z&&(Ce.imageBitDepth=1)):1==Ce.originalFormat?Te=ye.IT_BMP:2==Ce.originalFormat?Te=ye.IT_JPG:3==Ce.originalFormat?Te=ye.IT_PNG:14==Ce.originalFormat&&(Te=ye.IT_J2K);var Be={src:Ce.imageData,imgType:Ce.imageType,verify:Te,dataType:"url"};ge instanceof File||2==Ce.originalFormat&&ge instanceof Blob&&(Be.src=ge);var xe=J[2],me={};me.width=Ce.imageWidth,me.height=Ce.imageHeight,me.bitDepth=Ce.imageBitDepth,me.resolutionX=Ce.imageXResolution,me.resolutionY=Ce.imageYResolution,xe&&(me.oriBlobData=xe),Be.metadata=me,o++;var Me=!1;try{V._OnBitmapChanged(["10",""+o,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Be],null,Ee)}catch(Oe){Me=!0,e.Errors.SystemExceptionError(V,Oe.message)}if(ee||e.hideMask(),!Me&&e.isFunction(V.__OnPostLoad))try{V.__OnPostLoad("",G,k)}catch(Oe){Me=!0,e.Errors.SystemExceptionError(V,Oe.message)}if(U&&U.terminate(),w.DWT.lavrf_(1,w.DWT.EnumInstance.dwt_browser),Me)throw{code:V._errorCode,message:V._errorString}},function(Ce){throw e.Errors.LoadImageFailed(V,Ce),ee||e.hideMask(),U&&U.terminate(),{code:V._errorCode,message:V._errorString}})}if(k==ye.IT_PDF){var se=p();return se.context={},e.showProgress(V),V._OnPercentDone([0,-1,w.MSG.LoadingPdf,""]),se.open(ge,V._pdfPassword).then(function(Ce){var Be,Te=Ce.PdfCount;if(Ce.isTextBased&&2==V._pdfRealConvertMode)return w.Lib.closeProgress(),2==V._pdfConvertMode?w.Lib.Errors.LoadTextPDFButSetImageOnly(V):w.Lib.Errors.LoadTextPDFButNoPdfrLicenseErr(V),se.close(),se.terminate(),e.Promise.reject({code:V._errorCode,message:V._errorString});for(V._OnPercentDone([0,0,"0/"+Te,""]),Be=e.Promise.resolve(0),se.context.cIndex=0,se.context.pdfCount=Te,H=0;H<Te;H++)Be=(Be=Be.then(function(){var Me,Oe,ze;return(w.navInfo.biPhone||w.navInfo.biPad)&&(Me=5,Oe=85,ze=3840),se.readPage(se.context.cIndex,V._pdfResolution,V._pdfRealConvertMode,w.DWT.EnumDWT_ImageType.IT_JPG,!1,!1,Me,Oe,ze)})).then(function(me){var Me=se.context.cIndex,Oe=se.context.pdfCount,ze=Me+1,ot={},ve=w.DWT.EnumDWT_ImageType.IT_PDF;if(1==me.realReadMode&&(ve=5001),V._OnPercentDone([0,100*ze/(1*Oe),ze+"/"+Oe,""]),w.Lib.isArray(me.imageInfos)&&me.imageInfos.length>0){var Fe=me.imageInfos[0];ot.width=Fe.imageWidth,ot.height=Fe.imageHeight,ot.bitDepth=Fe.imageBitDepth,ot.resolutionX=Fe.imageXResolution,ot.resolutionY=Fe.imageYResolution}o++;var Ve={src:me.imageData,dataType:"url",imgType:w.DWT.EnumDWT_ImageType.IT_PDF,verify:ve,index:me.pageIndex,metadata:ot,imageId:o};try{V._OnBitmapChanged(["10",""+o,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Ve],null,Ee)}catch(Ye){throw w.Lib.Errors.SystemExceptionError(V,Ye.message),0}se.context.cIndex=Me+1});return Be.then(function(){w.Lib.closeProgress(),se.close(),se.terminate(),w.DWT.lavrf_(1,w.DWT.EnumInstance.dwt_browser),w.Lib.isFunction(V.__OnPostLoad)&&V.__OnPostLoad("",G,k)},function(me){throw w.Lib.closeProgress(),se.close(),se.terminate(),me&&w.Lib.Errors.LoadImageFailed(V,me),{code:V._errorCode,message:V._errorString}})},function(Ce){throw w.Lib.closeProgress(),se.close(),se.terminate(),Ce&&w.Lib.Errors.LoadImageFailed(V,Ce),{code:V._errorCode,message:V._errorString}})}return k==ye.IT_TIF?(U=m(),e.showProgress(V),V._OnPercentDone([0,-1,w.MSG.LoadingTiff,""]),U.openTiff(ge).then(function(Ce){var Te=Ce.pageCount,Be=Ce.imageInfos,xe=e.Promise.resolve(0);V._OnPercentDone([0,0,"0/"+Te,""]);for(var me=0;me<Te;me++)xe=xe.then(function(Me){var Oe,ze,Ze;return(w.navInfo.biPhone||w.navInfo.biPad)&&(Oe=5,ze=85,Ze=3840),U.readTiff(Me,w.DWT.EnumDWT_ImageType.IT_JPG,!1,Oe,ze,Ze).then(function(ot){var ve=Me+1;V._OnPercentDone([0,100*ve/(1*Te),ve+"/"+Te,""]),o++;var Ve={src:ot.imageData,dataType:"url",imgType:w.DWT.EnumDWT_ImageType.IT_TIF,verify:w.DWT.EnumDWT_ImageType.IT_TIF,index:Me,metadata:Be[Me],imageId:o};try{V._OnBitmapChanged(["10",""+o,1,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Ve],null,Ee)}catch(Ye){throw w.Lib.Errors.SystemExceptionError(V,Ye.message),0}return Me+1})});return xe.then(function(){w.Lib.closeProgress(),U.closeTiff(),U.terminate(),w.DWT.lavrf_(1,w.DWT.EnumInstance.dwt_browser),w.Lib.isFunction(V.__OnPostLoad)&&V.__OnPostLoad("",G,k)},function(Me){throw w.Lib.closeProgress(),U.closeTiff(),U.terminate(),Me&&w.Lib.Errors.LoadImageFailed(V,Me),{code:V._errorCode,message:V._errorString}})},function(Ce){throw w.Lib.closeProgress(),U.closeTiff(),U.terminate(),w.Lib.Errors.LoadImageFailed(V,Ce),{code:V._errorCode,message:V._errorString}})):(e.Errors.LoadImageFailed(V,"invalid image type."),e.Promise.reject({code:V._errorCode,message:V._errorString}))},T=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3],Re=J[4];e.isUndefined(oe)&&(oe=0),e.isUndefined(Ee)&&(Ee=!0),(e.isUndefined(ge)||ge<1||ge>3)&&(ge=3),e.isUndefined(Re)&&(Re="FFFFFF"),oe<0?oe=oe%360+360:oe>=360&&(oe%=360),e.showMask();var G=I(),k=V._ImgManager.convertClientIndexToServerId(te);return G.context={},V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(U){return G.context.metadata=U&&U.metadata?U.metadata:{},G.initImage(U.oriData)}).then(function(){if(0!=oe)return G.rotate(oe,Re,Ee,ge)}).then(function(){return G.getImage()}).then(function(U){return(w.navInfo.biPhone||w.navInfo.biPad)&&U&&(U.imageWidth>3840||U.imageHeight>3840)?w.ImageProcWrapper.resizeImageWithMeta(U.imageData,U,5,V._jpgQuality,3840):U}).then(function(U){"width"in U&&(U.imageWidth=U.imageWidth),"height"in U&&(U.imageHeight=U.imageHeight);var H={src:U.imageData,imgType:e.MobileFuns.convertOutputType(U.imageType),dataType:"url",metadata:{width:U.imageWidth,height:U.imageHeight}},ee=!1;try{V._OnBitmapChanged(["10",""+k,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),H])}catch(ye){ee=!0,e.Errors.SystemExceptionError(V,ye.message)}if(e.hideMask(),G.terminate(),ee)throw{code:V._errorCode,message:V._errorString}},function(U){throw e.Errors.RotateFailed(V,U),e.hideMask(),G.terminate(),{code:V._errorCode,message:V._errorString}})},D=function(V,J,te){var oe=I(),Ee=V._ImgManager.convertClientIndexToServerId(J);return oe.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(J)).then(function(ge){return oe.context.metadata=ge&&ge.metadata?ge.metadata:{},oe.initImage(ge.oriData)}).then(function(){return oe.flip(te)}).then(function(){return oe.getImage()}).then(function(ge){var Re={src:ge.imageData,imgType:e.MobileFuns.convertOutputType(ge.imageType),dataType:"url"};try{V._OnBitmapChanged(["10",""+Ee,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Re])}catch(G){throw e.Errors.SystemExceptionError(V,G.message),0}}).then(function(){e.hideMask(),oe.terminate()},function(ge){throw e.hideMask(),ge&&(-1==te?e.Errors.MirrorFailed(V,ge):e.Errors.FlipFailed(V,ge)),oe.terminate(),{code:V._errorCode,message:V._errorString}})},P=function(V,J){return D(V,J[0],-1)},E=function(V,J){return D(V,J[0],1)},M=function(V,J){var te=J[0],oe=I(),Ee=V._ImgManager.convertClientIndexToServerId(te);return oe.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(ge){return oe.context.metadata=ge&&ge.metadata?ge.metadata:{},oe.initImage(ge.oriData)}).then(function(){return oe.invert()}).then(function(){return oe.getImage()}).then(function(ge){var Re={src:ge.imageData,imgType:e.MobileFuns.convertOutputType(ge.imageType),dataType:"url"};try{V._OnBitmapChanged(["10",""+Ee,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Re])}catch(G){throw e.Errors.SystemExceptionError(V,G.message),0}}).then(function(){e.hideMask(),oe.terminate()},function(ge){throw e.hideMask(),ge&&e.Errors.InvertFailed(V,ge),oe.terminate(),{code:V._errorCode,message:V._errorString}})},O=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3],Re=J[4];if(!(e.isNumber(oe)&&e.isNumber(Ee)&&e.isNumber(ge)&&e.isNumber(Re)))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(V),e.Promise.reject({code:V._errorCode,message:V._errorString});var G=I(),k=V._ImgManager.convertClientIndexToServerId(te);return G.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(U){return G.context.metadata=U&&U.metadata?U.metadata:{},G.initImage(U.oriData)}).then(function(){return G.crop(oe,Ee,ge,Re)}).then(function(){return G.getImage()}).then(function(U){var H={src:U.imageData,imgType:e.MobileFuns.convertOutputType(U.imageType),dataType:"url",metadata:{imageData:U.imageData,width:U.imageWidth,height:U.imageHeight}};try{V._OnBitmapChanged(["10",""+k,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),H])}catch(ee){throw e.Errors.SystemExceptionError(V,ee.message),0}}).then(function(){e.hideMask(),G.terminate()},function(U){throw e.hideMask(),U&&e.Errors.CropFailed(V,U),G.terminate(),{code:V._errorCode,message:V._errorString}})},R=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3],Re=J[4],G=J[5];if(!(e.isNumber(oe)&&e.isNumber(Ee)&&e.isNumber(ge)&&e.isNumber(Re)))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(V),e.Promise.reject({code:V._errorCode,message:V._errorString});e.isUndefined(G)&&(G="FFFFFF");var k=I(),U=V._ImgManager.convertClientIndexToServerId(te);return k.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(H){return k.context.metadata=H&&H.metadata?H.metadata:{},k.initImage(H.oriData)}).then(function(){return k.erase(oe,Ee,ge,Re,G)}).then(function(){return k.getImage()}).then(function(H){var ee={src:H.imageData,imgType:e.MobileFuns.convertOutputType(H.imageType),dataType:"url",metadata:{imageData:H.imageData,width:H.imageWidth,height:H.imageHeight}};try{V._OnBitmapChanged(["10",""+U,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),ee])}catch(ye){throw e.Errors.SystemExceptionError(V,ye.message),0}}).then(function(){e.hideMask(),k.terminate()},function(H){throw e.hideMask(),H&&e.Errors.EraseFailed(V,H),k.terminate(),{code:V._errorCode,message:V._errorString}})},F=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3];if(!e.isNumber(oe))return e.Errors.MobileServer_InvalidWidth(V),e.Promise.reject({code:V._errorCode,message:V._errorString});if(!e.isNumber(Ee))return e.Errors.MobileServer_InvalidHeight(V),e.Promise.reject({code:V._errorCode,message:V._errorString});e.isUndefined(ge)&&(ge=5);var Re=I(),G=V._ImgManager.convertClientIndexToServerId(te);return Re.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(k){return Re.context.metadata=k&&k.metadata?k.metadata:{},Re.initImage(k.oriData)}).then(function(){return Re.resize(oe,Ee,ge,5,1==Re.context.metadata.bitDepth)}).then(function(){return Re.getImage()}).then(function(k){var U={src:k.imageData,imgType:e.MobileFuns.convertOutputType(k.imageType),dataType:"url",metadata:{imageData:k.imageData,width:k.imageWidth,height:k.imageHeight}};try{V._OnBitmapChanged(["10",""+G,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),U])}catch(H){throw e.Errors.SystemExceptionError(V,H.message),0}}).then(function(){e.hideMask(),Re.terminate()},function(k){throw e.hideMask(),k&&e.Errors.ChangeImageSizeFailed(V,k),Re.terminate(),{code:V._errorCode,message:V._errorString}})},B=function(V,J){var te=J[0],oe=I();V._ImgManager.convertClientIndexToServerId(te),oe.context={},e.showMask();var ge=V._ImgManager.getWebViewer().GetMinPageData();if(ge)return oe.initImage(ge.data,!0,ge.width,ge.height).then(function(){return oe.getSkewAngle()}).then(function(Re){return e.hideMask(),delete oe.context,oe.terminate(),Re},function(Re){throw e.hideMask(),e.Errors.SkewAngleFailed(V,Re),oe.terminate(),{code:V._errorCode,message:V._errorString}})},b=function(V,J){var te=J[0],oe=I();return V._ImgManager.convertClientIndexToServerId(te),oe.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(ge){return oe.context.metadata=ge&&ge.metadata?ge.metadata:{},oe.initImage(ge.oriData)}).then(function(){return oe.getSkewAngle()}).then(function(ge){return e.hideMask(),delete oe.context,oe.terminate(),ge},function(ge){throw e.hideMask(),e.Errors.SkewAngleFailed(V,ge),oe.terminate(),{code:V._errorCode,message:V._errorString}})},A=function(V,J){var te=J[0],oe=I(),Ee=V._ImgManager.convertClientIndexToServerId(te);return oe.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(ge){return oe.context.metadata=ge&&ge.metadata?ge.metadata:{},oe.initImage(ge.oriData)}).then(function(){return oe.toGrayscale()}).then(function(){return oe.getImage()}).then(function(ge){var Re={src:ge.imageData,imgType:e.MobileFuns.convertOutputType(ge.imageType),dataType:"url",metadata:{imageData:ge.imageData,width:ge.imageWidth,height:ge.imageHeight,bitDepth:8}};try{V._OnBitmapChanged(["10",""+Ee,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Re])}catch(G){throw e.Errors.SystemExceptionError(V,G.message),0}}).then(function(){e.hideMask(),oe.terminate()},function(ge){throw e.hideMask(),ge&&e.Errors.ConvertToGrayScaleFailed(V,ge),oe.terminate(),{code:V._errorCode,message:V._errorString}})},N=function(V,J){var te=J[0],oe=I(),Ee=V._ImgManager.convertClientIndexToServerId(te);return oe.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(ge){return oe.context.metadata=ge&&ge.metadata?ge.metadata:{},oe.initImage(ge.oriData)}).then(function(){return oe.toBinary(!1,void 0)}).then(function(){return oe.getImage()}).then(function(ge){var Re={src:ge.imageData,imgType:e.MobileFuns.convertOutputType(ge.imageType),dataType:"url",metadata:{imageData:ge.imageData,width:ge.imageWidth,height:ge.imageHeight,bitDepth:1}};try{V._OnBitmapChanged(["10",""+Ee,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Re])}catch(G){throw e.Errors.SystemExceptionError(V,G.message),0}}).then(function(){e.hideMask(),oe.terminate()},function(ge){throw e.hideMask(),ge&&e.Errors.ConvertToBWScaleFailed(V,ge),oe.terminate(),{code:V._errorCode,message:V._errorString}})},Y=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3],Re=J[4];if(!e.isNumber(oe))return e.Errors.MobileServer_InvalidXResolution(V),e.Promise.reject({code:V._errorCode,message:V._errorString});if(!e.isNumber(Ee))return e.Errors.MobileServer_InvalidYResolution(V),e.Promise.reject({code:V._errorCode,message:V._errorString});e.isUndefined(Re)&&(Re=w.DWT.EnumDWT_InterpolationMethod.IM_BICUBIC);var U,H,ee,G=I(),k=V._ImgManager.convertClientIndexToServerId(te);return G.context={},U=V._ImgManager._UIView.GetMetaDataByIndex(te),H=U.resolutionX,ee=U.resolutionY,e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(ye){return G.context.metadata=ye&&ye.metadata?ye.metadata:{},G.initImage(ye.oriData)}).then(function(){return G.setDPI(H,ee,oe,Ee,ge,Re)}).then(function(){return G.getImage()}).then(function(ye){var Z={src:ye.imageData,imgType:e.MobileFuns.convertOutputType(ye.imageType),dataType:"url",metadata:{imageData:ye.imageData,width:ye.imageWidth,height:ye.imageHeight,resolutionX:oe,resolutionY:Ee}};try{V._OnBitmapChanged(["10",""+k,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),Z])}catch(Q){throw e.Errors.SystemExceptionError(V,Q.message),0}}).then(function(){e.hideMask(),G.terminate()},function(ye){throw e.hideMask(),ye&&e.Errors.SetDPIFailed(V,ye),G.terminate(),{code:V._errorCode,message:V._errorString}})},ne=function(V,J){var te=J[0],oe=J[1];if(!e.isNumber(oe))return e.Errors.MobileServer_InvalidWidth(V),e.Promise.reject({code:V._errorCode,message:V._errorString});var Ee=I(),ge=V._ImgManager.convertClientIndexToServerId(te);return Ee.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(Re){return Ee.context.metadata=Re&&Re.metadata?Re.metadata:{},Ee.initImage(Re.oriData)}).then(function(){return Ee.setImageWidth(oe)}).then(function(){return Ee.getImage()}).then(function(Re){var G={src:Re.imageData,imgType:e.MobileFuns.convertOutputType(Re.imageType),dataType:"url",metadata:{imageData:Re.imageData,width:Re.imageWidth,height:Re.imageHeight}};try{V._OnBitmapChanged(["10",""+ge,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),G])}catch(k){throw e.Errors.SystemExceptionError(V,k.message),0}}).then(function(){e.hideMask(),Ee.terminate()},function(Re){throw e.hideMask(),Re&&e.Errors.SetImageWidthFailed(V,Re),Ee.terminate(),{code:V._errorCode,message:V._errorString}})},Ie=function(V,J){var te=J[0],oe=J[1],Ee=J[2],ge=J[3],Re=J[4],H=!1,ee=!1,ye=w.DWT.EnumDWT_ImageType;if(e.isUndefined(te))return e.Errors.MobileServer_InvalidImage(V),e.Promise.reject({code:V._errorCode,message:V._errorString});if(!e.isArray(oe))return e.Errors.MobileServer_InvalidIndex(V),e.Promise.reject({code:V._errorCode,message:V._errorString});if(e.isUndefined(Ee)&&(Ee="jpg"),(!e.isString(te)||""==te)&&(te="img."+Ee),"png"==Ee||"jpg"==Ee||"bmp"==Ee){V._ImgManager.convertClientIndexToServerId(se);var Q,se=oe[0],le=V._jpgQuality;e.log("[Wasm]Save Image: save "+Ee),1==ge&&e.showMask(),Q="png"==Ee?ye.IT_PNG:"bmp"==Ee?ye.IT_BMP:ye.IT_JPG;var pe=V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(se));return(ee=m()).context={},ee.context.bSaveAsBinary=Re,(pe=V._scaleDownThreshold<=0?pe.then(function(Ze){return e.log("[Wasm]Save Image: get original image data successfully."),ee.saveImage(Ze.oriData,Q,le,ee.context.bSaveAsBinary?w.Enum_ReturnType.RT_BINARY:w.Enum_ReturnType.RT_BASE64,1==Ze.metadata.bitDepth)}):(pe=pe.then(function(Ze){e.log("[Wasm]Save Image: save to new type successfully.");var ot=Ze&&Ze.metadata?Ze.metadata:{};return ee.context.bOneBit=1==ot.bitDepth,w.ImageProcWrapper.resize(Ze.oriData,ot.width,ot.height,V._scaleDownThreshold,5,ee.context.bOneBit)})).then(function(Ze){return e.log("[Wasm]Save Image: image scale successfully."),ee.saveImage(Ze.imageData,Q,le,ee.context.bSaveAsBinary?w.Enum_ReturnType.RT_BINARY:w.Enum_ReturnType.RT_BASE64,ee.context.bOneBit)})).then(function(Ze){return 1==ge&&e.hideMask(),ee&&ee.terminate(),H&&H.terminate(),e.log("[Wasm]Save Image: save image terminate."),{blobData:Ze.imageData,type:Ee,MD5:Ze.MD5}},function(Ze){throw 1==ge&&e.hideMask(),e.Errors.SaveImageFailed(V,Ze),e.log("[Wasm]Save Image: save image failed."),ee&&ee.terminate(),H&&H.terminate(),{code:V._errorCode,message:V._errorString}})}if("pdf"==Ee){var Te,Ce=new w.PdfWriter(l(),1),Be=oe.length;Ce.context={},e.log("[Wasm]Save Image: save pdf"),ge&&(e.showProgress(V),V._OnPercentDone(2==ge?[0,-1,w.MSG.ConvertingToBlob,""]:3==ge?[0,-1,w.MSG.ConvertingToBase64,""]:4==ge?[0,-1,w.MSG.Encoding,""]:[0,-1,w.MSG.SavingPdf,""]));var xe=Ce.initPdfSetting(V._pdfWriteSetting);for(V._scaleDownThreshold>0&&((H=I()).context={}),Ce.context.cIndex=0,Ce.context.aryIndex=oe,Ce.context.bSaveAsBinary=Re,Te=0;Te<Be;Te++)xe=xe.then(function(){var Ze=Ce.context.cIndex,ot=Ce.context.aryIndex;return e.log("[Wasm]Save Image: page "+Ce.context.cIndex+" start process."),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(ot[Ze]))}),xe=(xe=V._scaleDownThreshold<=0?xe.then(function(Ze){return e.log("[Wasm]Save Image: page "+Ce.context.cIndex+" get image data successfully. (no scale)"),Ce.appendPage(Ze.oriData,1==Ze.metadata.bitDepth)}):(xe=xe.then(function(Ze){e.log("[Wasm]Save Image: page "+Ce.context.cIndex+" get image data successfully.");var ot=Ze&&Ze.metadata?Ze.metadata:{},ve=1==ot.bitDepth;return Ce.context.bOneBit=ve,w.ImageProcWrapper.resize(Ze.oriData,ot.width,ot.height,V._scaleDownThreshold,5,ve)})).then(function(Ze){return e.log("[Wasm]Save Image: page "+Ce.context.cIndex+" scale successfully."),Ce.appendPage(Ze.imageData,Ce.context.bOneBit)})).then(function(){var Ze=Ce.context.cIndex,ve=Ce.context.aryIndex.length;if(ge){var Fe=Ze+1;V._OnPercentDone([0,100*Fe/(1*ve),Fe+"/"+ve,""])}e.log("[Wasm]Save Image: page "+Ce.context.cIndex+" processed."),Ce.context.cIndex=Ze+1});return xe.then(function(){return Ce.writePdf(Ce.context.bSaveAsBinary?w.Enum_ReturnType.RT_BINARY:w.Enum_ReturnType.RT_AUTO)}).then(function(Ze){return e.log("[Wasm]Save Image: save pdf successfully."),ge&&e.closeProgress(),Ce.terminate(),H&&H.terminate(),{blobData:Ze.pdfData,type:"pdf",MD5:Ze.MD5}},function(Ze){throw ge&&e.closeProgress(),e.Errors.SaveImageFailed(V,Ze),e.log("[Wasm]Save Image: save pdf failed."),Ce.terminate(),H&&H.terminate(),{code:V._errorCode,message:V._errorString}})}if("tiff"==Ee){var me,Me=oe.length;e.log("[Wasm]Save Image: save tiff"),(ee=m()).context={},ee.context.bSaveAsBinary=Re,V._scaleDownThreshold>0&&((H=I()).context={}),ge&&(ee.context.bShowPercentProgress=!0,e.showProgress(V),V._OnPercentDone(2==ge?[0,-1,w.MSG.ConvertingToBlob,""]:3==ge?[0,-1,w.MSG.ConvertingToBase64,""]:4==ge?[0,-1,w.MSG.Encoding,""]:[0,-1,w.MSG.SavingTiff,""]));var Oe=ee.createTiff(),ze=w.DWT.EnumDWT_TIFFCompressionType;for(ee.context.cIndex=0,me=a.Auto,V._tiffCompressionType==ze.TIFF_AUTO?me=a.Auto:V._tiffCompressionType==ze.TIFF_FAX3||V._tiffCompressionType==ze.TIFF_T4?me=a.G3:V._tiffCompressionType==ze.TIFF_FAX4||V._tiffCompressionType==ze.TIFF_T6?me=a.G4:V._tiffCompressionType==ze.TIFF_LZW?me=a.LZW:V._tiffCompressionType==ze.TIFF_JPEG?me=a.JPEG:V._tiffCompressionType==ze.TIFF_PACKBITS&&(me=a.ZIP),ee.context.tiffFormat=me,ee.context.aryIndex=oe,Te=0;Te<Me;Te++)Oe=e.MobileFuns.appendTiffPage(V,Oe,ee,H);return(Oe=Oe.then(function(){return e.log("[Wasm]Save Image: generate tiff data."),ee.getTiff(ee.context.bSaveAsBinary?w.Enum_ReturnType.RT_BINARY:w.Enum_ReturnType.RT_AUTO)})).then(function(Ze){return e.log("[Wasm]Save Image: save tiff successfully."),ee.context.bShowPercentProgress&&e.closeProgress(),ee.closeTiff(),ee.terminate(),H&&H.terminate(),{blobData:Ze.imageData,type:"tiff",MD5:Ze.MD5}},function(Ze){throw ee.context.bShowPercentProgress&&e.closeProgress(),e.Errors.SaveImageFailed(V,Ze),e.log("[Wasm]Save Image: save tiff failed."),ee.closeTiff(),ee.terminate(),H&&H.terminate(),{code:V._errorCode,message:V._errorString}})}return e.Errors.InvalidImageType(V),e.Promise.reject({code:V._errorCode,message:V._errorString})},_e=function(V,J){var te;return te=J.length>0?J[0]:l(),w.WasmEnv?w.WasmEnv.getLicenseInfo(te,w.WasmEnv.licMode,w.WasmEnv.uuid).then(function(ge){if(!ge||!ge.Detail)throw e.Errors.LicenseEmptyOrInvalid(V),{code:V._errorCode,message:V._errorString};return ge},function(ge){throw e.Errors.GetLicenseInfoFailed(V,ge),{code:V._errorCode,message:V._errorString}}):(e.Errors.GetLicenseInfoFailed(V,"wasm not load."),e.Promise.reject({code:V._errorCode,message:V._errorString}))},ce=function(V,J){var te=J[0],oe=te;te instanceof FileList?oe=te[0]:(te instanceof Uint8ClampedArray||te instanceof ArrayBuffer||te instanceof Uint8Array)&&(oe=new Blob([te]));var Ee=m();return Ee.getMD5(oe).then(function(ge){return Ee.terminate(),ge},function(ge){throw e.Errors.GetMD5Failed(V,ge),Ee.terminate(),{code:V._errorCode,message:V._errorString}})},q=function(V,J){var te=J[0],oe=J[1],Ee=I(),ge=V._ImgManager.convertClientIndexToServerId(te);return Ee.context={},e.showMask(),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(Re){return Ee.context.metadata=Re&&Re.metadata?Re.metadata:{},Ee.initImage(Re.oriData)}).then(function(){return Ee.changeContrast(oe)}).then(function(){return Ee.getImage()}).then(function(Re){var G={src:Re.imageData,imgType:e.MobileFuns.convertOutputType(Re.imageType),dataType:"url",metadata:{imageData:Re.imageData,width:Re.imageWidth,height:Re.imageHeight,bitDepth:8}};try{V._OnBitmapChanged(["10",""+ge,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),G])}catch(k){throw e.Errors.SystemExceptionError(V,k.message),0}}).then(function(){e.hideMask(),Ee.terminate()},function(Re){throw e.hideMask(),Re&&e.Errors.ChangeContrastFailed(V,Re),Ee.terminate(),{code:V._errorCode,message:V._errorString}})},he=function(V,J){var te=J[0],oe=J[1],Ee=I(),ge=V._ImgManager.convertClientIndexToServerId(te);return Ee.context={},e.showMask(),e.log("[Wasm]Change Brightness: value "+oe),V._ImgManager.getWebViewer().GetImageData(V._ImgManager.getUidByIndex(te)).then(function(Re){return e.log("[Wasm]Change Brightness: get original image data"),Ee.context.metadata=Re&&Re.metadata?Re.metadata:{},Ee.initImage(Re.oriData)}).then(function(){return e.log("[Wasm]Change Brightness: change brightness"),Ee.changeBrightness(oe)}).then(function(){return Ee.getImage()}).then(function(Re){e.log("[Wasm]Change Brightness: change brightness successfully");var G={src:Re.imageData,imgType:e.MobileFuns.convertOutputType(Re.imageType),dataType:"url",metadata:{imageData:Re.imageData,width:Re.imageWidth,height:Re.imageHeight,bitDepth:8}};try{V._OnBitmapChanged(["10",""+ge,4,V._ImgManager.getCurrentImageIndex(),V._ImgManager.count(),G])}catch(k){throw e.Errors.SystemExceptionError(V,k.message),0}}).then(function(){e.hideMask(),Ee.terminate()},function(Re){throw e.hideMask(),Re&&e.Errors.ChangeBrightnessFailed(V,Re),Ee.terminate(),{code:V._errorCode,message:V._errorString}})};i._saveImageCallback=function(V){var te,oe,Ee,J=this;if(!e.isArray(V))return e.Errors.InvalidSourceFile(J),e.Promise.reject({code:J._errorCode,message:J._errorString});for(e.log("[Wasm]camera callback: save image"),te=e.Promise.resolve({aryData:V,curIndex:0,count:Ee=V.length}),oe=0;oe<Ee;oe++)te=(te=te.then(function(ge){var Re,G;if(Re=ge.aryData[ge.curIndex],ge.bOneBit=!1,Re){var U=Re.iImageData;if(U instanceof Blob||U instanceof ArrayBuffer)return ge.captureBlob=U,ge;G=U.imageData,ge.bOneBit=1==U.imageBitDepth}return G instanceof Blob||G instanceof ArrayBuffer?ge.bOneBit&&J._bLocalService?ie(G).then(function(H){return ge.captureBlob=H.blobData,ge}):(ge.captureBlob=G,ge):(w.Lib.Errors.InvalidSourceFile(J),e.log("[Wasm]camera callback: save image error - page "+ge.curIndex+" source invalid."),w.Lib.Promise.reject({code:J._errorCode,message:J._errorString}))})).then(function(ge){var Re,G;return Re=ge.aryData[ge.curIndex],V&&Re&&(G=Re.file),e.log("[Wasm]camera callback: save image - page "+ge.curIndex+" data ready"),new w.Lib.Promise(function(k,U){var H=ge.captureBlob,ee=-1,ye=w.DWT.EnumDWT_ImageType;if(J._bLocalService)w.Lib.isString(H.type)&&("application/pdf"==H.type?ee=ye.IT_PDF:"image/png"==H.type?ee=ye.IT_PNG:"image/jpeg"==H.type||"image/jpg"==H.type?ee=ye.IT_JPG:"image/bmp"==H.type?ee=ye.IT_BMP:"image/tiff"==H.type||"image/tif"==H.type?ee=ye.IT_TIF:"image/jp2"==H.type&&(ee=ye.IT_J2K)),J.__captureImage(H,ee,function(){e.log("[Wasm]camera callback: save image - page "+ge.curIndex+" data saved from service"),ge.curIndex=ge.curIndex+1,ge.captureBlob=null,k(ge)},function(Q,se){U({code:Q,message:se})});else{var Z=J.GetCurrentFileName();""==Z&&(Z=J._ImgManager.getWebViewer().GetDefaultFileName()),J._innerSendToMobile("LoadImageFromBinary",[H,!0,G,Z,!0,ge.bOneBit],0,function(){e.log("[Wasm]camera callback: save image - page "+ge.curIndex+" data saved"),ge.curIndex=ge.curIndex+1,ge.captureBlob=null,k(ge)},function(Q,se){U({code:Q,message:se})})}})});return te},s._areaDetectCallback=function(V,J,te,oe,Ee,ge){var Re;return ge?Re=I():(c||(c=new w.ImageProc(l(),1)),Re=c),e.log("[Wasm]camera callback: area detect"),Re.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(G){return e.log("[Wasm]camera callback: image is ready"),Re.src=G.srcBuffer,Re.detectDocument(Ee,J,te,oe)}).then(function(G){return e.log("[Wasm]camera callback: area detect successfully"),G.src=Re.src,ge&&Re.terminate(),Re.src=null,G},function(G){e.closeLoadingMsg(),e.log("[Wasm]camera callback: area detect failed"),ge&&Re.terminate();var k={};throw G&&G.code&&G.message?(k._errorString=G.message,k._errorCode=G.code):(k._errorString=G,e.Errors.DetectCallbackErr(k)),{code:k._errorCode,message:k._errorString}})},s._perspectiveCallback=function(V,J){var te=I();if(e.log("[Wasm]camera callback: perspective"),!e.isArray(J)||8!=J.length){var oe={};return e.Errors.InvalidParameterInCallback(oe),e.Promise.reject({code:oe._errorCode,message:oe._errorString})}return te.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(Ee){return e.log("[Wasm]camera callback: image is ready"),te.src=Ee.srcBuffer,te.perspective(J[0],J[1],J[2],J[3],J[4],J[5],J[6],J[7])}).then(function(){e.log("[Wasm]camera callback: perspective successfully");var ge=void 0,k=w.Enum_ImageType.IT_JPG;return V.imageBitDepth<=8&&(ge=V.imageBitDepth,k=w.Enum_ImageType.IT_PNG),te.getImage(85,!0,!1,ge,V.imageXResolution,V.imageYResolution,!0,k)}).then(function(Ee){e.log("[Wasm]camera callback: filter process successfully");var ge=te.src;return te.terminate(),te.src=null,{src:ge,result:Ee}},function(Ee){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),te.terminate();var ge={};throw Ee&&Ee.code&&Ee.message?(ge._errorString=Ee.message,ge._errorCode=Ee.code):(ge._errorString=Ee,e.Errors.PerspectiveCallback(ge)),{code:ge._errorCode,message:ge._errorString}})},s._convertToGrayScaleFilterCallback=function(V,J){var te=I();return e.log("[Wasm]camera callback: convert to gray scale filter"),te.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(oe){var Ee;return e.log("[Wasm]camera callback: image is ready"),te.src=oe.srcBuffer,J&&(Ee=J.level),te.toGrayscale(Ee)}).then(function(){e.log("[Wasm]camera callback: gray scale successfully");var Ee=void 0,G=w.Enum_ImageType.IT_JPG;return V.imageBitDepth<=8&&(Ee=V.imageBitDepth,G=w.Enum_ImageType.IT_PNG),te.getImage(85,!0,!1,Ee,V.imageXResolution,V.imageYResolution,!0,G)}).then(function(oe){e.log("[Wasm]camera callback: filter process successfully");var Ee=te.src;return te.terminate(),te.src=null,{src:Ee,result:oe}},function(oe){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),te.terminate();var Ee={};throw e.Errors.ConvertToGrayScaleFilterCallbackErr(Ee,oe),{code:Ee._errorCode,message:Ee._errorString}})},s._saveTonerFilterCallback=function(V,J){return s._convertToBWScaleFilterCallback(V,J,!0)},s._convertToBWScaleFilterCallback=function(V,J,te){var oe=I();return e.log(te?"[Wasm]camera callback: save toner filter":"[Wasm]camera callback: convert to BW scale filter"),oe.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(Ee){var ge;return e.log("[Wasm]camera callback: image is ready"),oe.src=Ee.srcBuffer,J&&(ge=J.level),oe.toBinary(!!te,ge)}).then(function(){return oe.getImage(85,!0,!1,1,V.imageXResolution,V.imageYResolution,!0,w.Enum_ImageType.IT_PNG)}).then(function(Ee){e.log("[Wasm]camera callback: filter process successfully");var ge=oe.src;return oe.terminate(),oe.src=null,{src:ge,result:Ee}},function(Ee){e.log("[Wasm]camera callback: filter process failed"),e.closeLoadingMsg(),oe.terminate();var ge={};throw te?e.Errors.SaveTonerCallbackErr(ge,Ee):e.Errors.ConvertToBWScaleFilterCallbackErr(ge,Ee),{code:ge._errorCode,message:ge._errorString}})},s._cleanFilterCallback=function(V,J){var te=I();return e.log("[Wasm]camera callback: remove shadow filter"),te.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(oe){var Ee,ge;return e.log("[Wasm]camera callback: image is ready"),J&&(Ee=J.level,ge=J.alpha),te.src=oe.srcBuffer,te.removeShadow(Ee,ge)}).then(function(){var Ee=void 0,G=w.Enum_ImageType.IT_JPG;return V.imageBitDepth<=8&&(Ee=V.imageBitDepth,G=w.Enum_ImageType.IT_PNG),te.getImage(85,!0,!1,Ee,V.imageXResolution,V.imageYResolution,!0,G)}).then(function(oe){e.log("[Wasm]camera callback: remove shadow successfully");var Ee=te.src;return te.terminate(),te.src=null,{src:Ee,result:oe}},function(oe){e.log("[Wasm]camera callback: remove shadow failed"),e.closeLoadingMsg(),te.terminate();var Ee={};throw e.Errors.RemoveShadowFilterCallbackErr(Ee,oe),{code:Ee._errorCode,message:Ee._errorString}})},s._enhanceAndSharpenFilterCallback=function(V,J){var te=I();return e.log("[Wasm]camera callback: enhance and sharpen filter"),te.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(oe){var Ee;return e.log("[Wasm]camera callback: image is ready"),te.src=oe.srcBuffer,J&&(Ee=J.level),te.enhanceAndSharpenImage(Ee)}).then(function(){var Ee=void 0,G=w.Enum_ImageType.IT_JPG;return V.imageBitDepth<=8&&(Ee=V.imageBitDepth,G=w.Enum_ImageType.IT_PNG),te.getImage(85,!0,!1,Ee,V.imageXResolution,V.imageYResolution,!0,G)}).then(function(oe){e.log("[Wasm]camera callback: enhance and sharpen successfully");var Ee=te.src;return te.terminate(),te.src=null,{src:Ee,result:oe}},function(oe){e.log("[Wasm]camera callback: enhance and sharpen failed"),e.closeLoadingMsg(),te.terminate();var Ee={};throw e.Errors.EnhanceAndSharpenFilterCallbackErr(Ee,oe),{code:Ee._errorCode,message:Ee._errorString}})},s._brightenFilterCallback=function(V,J){var te=I();return e.log("[Wasm]camera callback: brighten filter"),te.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(oe){var Ee;return e.log("[Wasm]camera callback: image is ready"),te.src=oe.srcBuffer,J&&(Ee=J.level),te.brighten(Ee)}).then(function(){var Ee=void 0,G=w.Enum_ImageType.IT_JPG;return V.imageBitDepth<=8&&(Ee=V.imageBitDepth,G=w.Enum_ImageType.IT_PNG),te.getImage(85,!0,!1,Ee,V.imageXResolution,V.imageYResolution,!0,G)}).then(function(oe){e.log("[Wasm]camera callback: brighten successfully");var Ee=te.src;return te.terminate(),te.src=null,{src:Ee,result:oe}},function(oe){e.log("[Wasm]camera callback: brighten failed"),e.closeLoadingMsg(),te.terminate();var Ee={};throw e.Errors.BrightenFilterCallbackErr(Ee,oe),{code:Ee._errorCode,message:Ee._errorString}})},s._getBlurryScore=function(V){var J=I();return e.log("[Wasm]camera callback: get blurry score filter"),J.initImage(V.imageData,V.rgba,V.imageWidth,V.imageHeight,V.bgra).then(function(te){return e.log("[Wasm]camera callback: image is ready"),J.src=te.srcBuffer,J.getBlurryScore()}).then(function(te){e.log("[Wasm]camera callback: get blurry score successfully");var oe=J.src;return J.terminate(),J.src=null,{src:oe,result:te>=100}},function(te){e.log("[Wasm]camera callback: get blurry score failed"),e.closeLoadingMsg(),J.terminate();var oe={};throw e.Errors.GetBlurryScoreErr(oe,te),{code:oe._errorCode,message:oe._errorString}})},s._imageDataToBlob=function(V,J,te,oe,Ee,ge){e.log("[Wasm]ImageDataToBlob: init image");var Re={source:{},output:{}};return e.mix(Re.source,V),J&&(J<0?J=J%360+360:J>=360&&(J%=360),0!=J&&(Re.source.angle=J)),te&&(Re.polygon=te),oe&&te&&te.points&&(Re.doPerspective=!0),!1!==Ee&&(Re.output.orgImage=e.isObject(Ee)?Ee:{quality:85,returnType:w.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==ge&&(Re.output.previewImage=e.isObject(ge)?ge:{quality:85,width:200,height:200,returnType:w.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),w.ImageProcWrapper.createImage(Re)},s._freeCallback=function(){c&&(c.terminate(),c=null)},i._checkWebcamWasmLicense=function(){return e.License.checkProductKey(this,{Webcam:!0},!0)&&e.License.checkProductKey(this,{Webcam:!0,Wasm:!0},!0)?{errorCode:0}:w.DWT.licenseException},i.GetImageDataAsync=function(V){var te,J=this;return J.Viewer&&J.Viewer._webViewer&&(te=J.Viewer._webViewer.GetUidByIndex(V)),te?J.Viewer._webViewer.GetImageData(te):Promise.resolve(null)},i.SetCustomDataAsync=function(V,J){var oe,te=this;return te.Viewer&&te.Viewer._webViewer&&(oe=te.Viewer._webViewer.GetUidByIndex(V)),oe&&J?te.Viewer._webViewer.GetImageData(oe).then(function(Ee){return Ee.customData=J,te.Viewer._webViewer.UpdateImageData(oe,Ee)}):Promise.resolve(!1)};var ie=function(V){var J=m();return J.saveImage(V,w.DWT.EnumDWT_ImageType.IT_PNG,85,w.Enum_ReturnType.RT_BINARY,!0).then(function(Re){return J&&J.terminate(),{blobData:Re.imageData,type:"png",MD5:Re.MD5}},function(Re){throw J&&J.terminate(),{code:_this._errorCode,message:_this._errorString}})}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var n=w.navInfo,r=e.html5.Funs,h=!0,d=!1,a=r.DEF,o=r.DEF_NOT_SUPPORT_MOBILE,l=function(C,_,v){2==v&&e.each(_,function(T,D){a(C,T,{get:function(){return C._resetErr(),C._isValid()?h:d},set:function(P){return C._resetErr(),C._isValid()?h:d}})})},m=function(C,_){e.each(_,function(v,T){a(C,v,1,2)})},I=function(C,_){e.each(_,function(v,T){a(C,v,1,1)})},p=function(C,_){e.each(_,function(v,T){a(C,v,0)})},g=function(C,_){e.each(_,function(v,T){a(C,v,1)})};e.DynamicLoadAddonFuns=[],e.attachAddon=function(C){e.each(e.DynamicLoadAddonFuns,function(_){e.isFunction(_)&&_(C)})},e.attachProperty=function(C){var _=C;a(_,"ErrorCode",{get:function(){return _._errorCode}}),a(_,"ErrorString",{get:function(){return-2207==_._errorCode&&_.__bMustUpgradeService&&e.Errors.MustUpgradeService(_),0!=_._errorCode?_._errorString:"Successful."}}),a(_,"ProductKey",{get:function(){return w.DWT.ProductKey},set:function(M){return e.isString(M)?(_._resetErr(),!!_._isValid()&&_._setProductKey(M,!1)):(e.Errors.InvalidValue(_),d)}}),a(_,"ProductName",{get:function(){return _.__strProductName},set:function(M){return _._resetErr(),e.isString(M)?(_.__strProductName=M,h):(e.Errors.InvalidValue(_),d)}}),a(_,"VersionInfo",{get:function(){return _.__versionInfo}}),_._isMobileMode()?o(_,"DefaultSourceName",0):a(_,"DefaultSourceName",{get:function(){if(_._resetErr(),!_._isValid())return!1;e.isUndefined(_.__currentImageCaptureDriverType)&&(_.__currentImageCaptureDriverType=0);var R,M="",O=0,F=_._innerFun("GetDefaultSourceName",r.makeParams(_._driverType));return F.length>0&&(O=(R=JSON.parse(F)).type,M=w.Lib.base64.decode(R.ProductName)),4==_._driverType?O==w.DWT.EnumDWT_Driver.TWAIN64&&M.length>0?"Twain64-"+M:O==w.DWT.EnumDWT_Driver.ICA&&_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&M.length>0?"ICA-"+M:M:_.__currentImageCaptureDriverType==w.DWT.EnumDWT_Driver.TWAIN64?M.length>0&&O==w.DWT.EnumDWT_Driver.TWAIN64?"Twain64-"+M:M:_.__currentImageCaptureDriverType==w.DWT.EnumDWT_Driver.ICA&&M.length>0&&_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac?"ICA-"+M:M}}),_._isMobileMode()?o(_,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"]):(a(_,"IfShowCancelDialogWhenImageTransfer",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfShowCancelDialogWhenImageTransfer},set:function(M){return e.isBoolean(M)?(_._resetErr(),!!_._isValid()&&(_.__IfShowCancelDialogWhenImageTransfer=M)):(e.Errors.InvalidValue(_),d)}}),a(_,"ImageCaptureDriverType",{get:function(){return _._resetErr(),_._isValid()?_._driverType:0},set:function(M){var R=!1,F=!1,B=!1;if(_._bRemoteMode?_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?B=!0:_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux?F=!0:_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(R=!0):(R=n.bMac,F=n.bLinux,B=n.bWin),_._resetErr(),!_._isValid())return!1;if(""!==M){var b=1*M;if(b<w.DWT.EnumDWT_Driver.TWAIN||b>w.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),d;if(B){if(b===w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(w.dcp.b64bit)return _._driverType=b,_.__icaSourceCount=-1,_._innerFun("SetImageCaptureDriverType",r.makeParams(w.DWT.EnumDWT_Driver.TWAIN,_._driverType))}else if(b!=w.DWT.EnumDWT_Driver.TWAIN&&b!=w.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),d;w.dcp.b64bit||(b=w.DWT.EnumDWT_Driver.TWAIN),_._driverType=b,_.__currentImageCaptureDriverType=b}else{if(F)return _._driverType=b=w.DWT.EnumDWT_Driver.SANE,_.__currentImageCaptureDriverType=b,b===w.DWT.EnumDWT_Driver.SANE?h:(e.Errors.ImageCaptureDriverTypeError(_),d);if(R){if(b===w.DWT.EnumDWT_Driver.TWAIN_AND_ICA)return _._driverType=b,_.__icaSourceCount=-1,h;if(b!=w.DWT.EnumDWT_Driver.ICA&&b!=w.DWT.EnumDWT_Driver.TWAIN&&b!=w.DWT.EnumDWT_Driver.TWAIN64)return e.Errors.ImageCaptureDriverTypeError(_),d;_._driverType=b,_.__currentImageCaptureDriverType=b}}_.__icaSourceCount=0,_.CloseSourceManager();var A=_._innerFun("SetImageCaptureDriverType",r.makeParams(b,_._driverType));return _.OpenSourceManager(),A}return e.Errors.ImageCaptureDriverTypeError(_),d}})),_._isMobileMode()?o(_,"SourceCount",0):a(_,"SourceCount",{get:function(){var M,O,R,F,B,b,N,Y,ne,A=[],ce=!1,he=!1;if(_._bRemoteMode?_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?he=!0:_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux||_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(ce=!0):(ce=n.bMac,he=n.bWin),_._resetErr(),!_._isValid())return!1;if(_._resetSources(),_.__icaSourceCount=0,ce&&_._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_ICA){for(O=[],N=_._getSourceNamesSyncV2(w.DWT.EnumDWT_Driver.ICA),b=0;b<N.length;b++)e.isString(F=N[b].ProductName)&&""!==(F=e.trim(F))&&(1==N[b].IsDefaultSource&&(R=F),A.push("ICA"===N[b].DriverType?"ICA-"+F:F),O.push(N[b]));for(void 0===R&&N.length>0&&e.isString(F=N[0].ProductName)&&""!==(F=e.trim(F))&&(R="ICA"===N[0].DriverType?"ICA-"+F:F),ne=_._getSourceNamesSyncV2(w.DWT.EnumDWT_Driver.TWAIN),b=0;b<ne.length;b++)e.isString(F=ne[b].ProductName)&&""!==(F=e.trim(F))&&(1==ne[b].IsDefaultSource&&(R=F),A.push("ICA"===ne[b].DriverType?"ICA-"+F:F),O.push(ne[b]));void 0===R&&ne.length>0&&e.isString(F=ne[0].ProductName)&&""!==(F=e.trim(F))&&(R="ICA"===ne[0].DriverType?"ICA-"+F:F),M=O.length,_.__defaultSourceName=R,_.__icaSourceCount=N.length,_.__sourceCount=M,_.__sourceName=A,_.__sourceDetails=O}else if(he&&w.dcp.b64bit&&_._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64){for(O=[],ne=_._getSourceNamesSyncV2(w.DWT.EnumDWT_Driver.TWAIN),b=0;b<ne.length;b++)e.isString(F=ne[b].ProductName)&&""!==(F=e.trim(F))&&(1==ne[b].IsDefaultSource&&(R=F),A.push(F),O.push(ne[b]));if(void 0===R&&ne.length>0&&e.isString(F=ne[0].ProductName)&&""!==(F=e.trim(F))&&(R=F),w.dcp.b64bit){for(Y=_._getSourceNamesSyncV2(w.DWT.EnumDWT_Driver.TWAIN64),b=0;b<Y.length;b++)e.isString(F=Y[b].ProductName)&&""!==(F=e.trim(F))&&(1==Y[b].IsDefaultSource&&(R=F),A.push("TWAIN(64Bit)"===Y[b].DriverType?"Twain64-"+F:F),O.push(Y[b]));void 0===R&&Y.length>0&&e.isString(F=Y[0].ProductName)&&""!==(F=e.trim(F))&&(R="TWAIN(64Bit)"===Y[0].DriverType?"Twain64-"+F:F)}else Y=[];M=O.length,_.__defaultSourceName=R,_.__icaSourceCount=ne.length,_.__sourceCount=M,_.__sourceName=A,_.__sourceDetails=O}else{if(B=_._getSourceNamesSyncV2(),_.__defaultSourceName="",B&&B.length>=1){for(b=0;b<B.length;b++)e.isString(F=B[b].ProductName)&&""!==(F=e.trim(F))&&(1==B[b].IsDefaultSource&&(R=F),A.push(F));e.isString(R)?_.__defaultSourceName=R:e.isString(F=B[0].ProductName)&&""!==(F=e.trim(F))&&(_.__defaultSourceName="ICA"===B[0].DriverType?"ICA-"+F:F)}else B=[],A=[];_.__sourceCount=M=B.length,_._driverType===w.DWT.EnumDWT_Driver.ICA&&ce&&M>0&&(e.each(A,function(ie,V){if(e.isString(ie)){var J=e.trim(ie);""!==J&&(A[V]="ICA-"+J)}}),""!==_.__defaultSourceName&&(_.__defaultSourceName="ICA-"+_.__defaultSourceName)),_.__sourceName=A,_.__sourceDetails=B}return M<=0?(O=[],A=[],_.__sourceName=[],_.__sourceDetails=[],_.__defaultSourceName="",_.__sourceCount=0,0):M}}),a(_,"HowManyImagesInBuffer",{get:function(){return _._isValid()?_._ImgManager.count():0}}),a(_,"HTTPPostResponseString",{get:function(){return _._resetErr(),_._isValid()&&_.__HTTPPostResponseString?_.__HTTPPostResponseString:""}}),a(_,"IfAppendImage",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfAppendImage},set:function(M){return _._resetErr(),!!_._isValid()&&(e.isBoolean(M)?_.__IfAppendImage=M:(e.Errors.InvalidValue(_),d))}}),_._isMobileMode()?o(_,["FTPPort","IfShowProgressBar","IfAppendImage"]):(a(_,"FTPPort",{get:function(){return _._resetErr(),_._isValid()?_._innerFun("FTPPort"):0},set:function(M){return _._resetErr(),!!_._isValid()&&(""!==M?_._innerFun("FTPPort",r.makeParams(1*M)):void 0)}}),a(_,"IfShowProgressBar",{get:function(){return _._resetErr(),!!_._isValid()&&_.__IfShowProgressBar},set:function(M){return _._resetErr(),!!_._isValid()&&(e.isBoolean(M)?_.__IfShowProgressBar=M:(e.Errors.InvalidValue(_),d))}})),_._isMobileMode()?a(_,"JPEGQuality",{get:function(){return _._resetErr(),!!_._isValid()&&_._jpgQuality},set:function(M){var O=1*M;return O>=100?O=100:O<0&&(O=0),_._resetErr(),!!_._isValid()&&(_._jpgQuality=O,!0)}}):a(_,"JPEGQuality",{get:function(){return _._resetErr(),_._isValid()?_._innerFun("JPEGQuality"):0},set:function(M){var O=1*M;return O>=100?O=100:O<0&&(O=0),_._resetErr(),!!_._isValid()&&_._innerFun("JPEGQuality",r.makeParams(O))}}),_._isMobileMode()?a(_,"TIFFCompressionType",{get:function(){return _._resetErr(),_._isValid()?_._tiffCompressionType:0},set:function(M){return _._resetErr(),!!_._isValid()&&(_._tiffCompressionType=M,!0)}}):a(_,"TIFFCompressionType",1,1),_._isMobileMode()?a(_,"BufferMemoryLimit",{get:function(){return _._resetErr(),_._isValid(),0},set:function(M){return _._resetErr(),_._isValid(),!1}}):a(_,"BufferMemoryLimit",1,1),_._isMobileMode()?a(_,"LogLevel",{get:function(){return _._resetErr(),_._isValid()?_._logLevel:0},set:function(M){if(_._resetErr(),!_._isValid())return!1;var O=1*M;return O>=14?O=14:O<0&&(O=0),w.WasmEnv&&w.WasmEnv.setLoglevel(_._logLevel),_._logLevel=O,!0}}):a(_,"LogLevel",1,1),a(_,"HttpContentTypeFieldValue",{get:function(){return _._resetErr(),_._isValid()?_.__strHttpContentTypeFieldValue:""},set:function(M){return _._resetErr(),!!_._isValid()&&(_.__strHttpContentTypeFieldValue=M,M)}}),a(_,"BrokerProcessType",{get:function(){return _._resetErr(),_._isValid()?1:0},set:function(M){return _._resetErr(),!!_._isValid()}}),a(_,"BorderStyle",{get:function(){return _._resetErr(),!!_._isValid()&&0},set:function(M){return _._resetErr(),_._isValid(),!1}}),a(_,"HttpFieldNameOfUploadedImage",{get:function(){return _._resetErr(),!!_._isValid()&&_.__remoteFilename},set:function(M){return _._resetErr(),!!_._isValid()&&(_.__remoteFilename=M)}}),a(_,"style",{get:function(){return _._isValid()?_.__style:""}}),a(_,"Addon",{get:function(){return _.__addon}}),a(_,"HTTPRequestswithCredentials",{get:function(){return _._resetErr(),!!_._isValid()&&_.__withCredentials},set:function(M){return _._resetErr(),!!_._isValid()&&(_.__withCredentials=M)}}),a(_,"ScaleDownThreshold",{get:function(){return _._resetErr(),_._isValid()?_._scaleDownThreshold:0},set:function(M){var O=1*M;return!e.isNumber(O)||isNaN(O)?(e.Errors.InvalidValue(Rt),d):(_._resetErr(),!!_._isValid()&&(_._scaleDownThreshold=O))}}),a(_,"CurrentImageIndexInBuffer",{get:function(){return _._isValid()?_._ImgManager.getCurrentImageIndex():0},set:function(M){var O=1*M;return _._resetErr(),!!_._isValid()&&(O>=0&&O<_._ImgManager.count()&&(_._ImgManager.Go(O),_._isBindViewer()&&r.__innerRefreshFromUIView(_,_._ImgManager.getCurrentImageIndex())),!0)}}),a(_,"SelectedImagesIndices",{get:function(){return _._resetErr(),_._isValid()?_._ImgManager.count()<=0?[]:_._ImgManager.getSelectedClientIndexArray():[]}}),a(_,"MaxImagesInBuffer",{get:function(){return _._resetErr(),_._isValid()?_.__maxImagesInBuffer:0},set:function(M){var O=1*M;return _._resetErr(),!!_._isValid()&&(O>0&&O<32768?_.__maxImagesInBuffer=O:e.Errors.OutOfRange(_),_.__maxImagesInBuffer)}}),a(_,"MaxUploadImageSize",{get:function(){return _._resetErr(),!!_._isValid()&&_.__maxUploadImageSize},set:function(M){var O=1*M;return _._resetErr(),!!_._isValid()&&(_.__maxUploadImageSize=O,_._isMobileMode()||_._innerFun("MaxUploadImageSize",r.makeParams(O)),_.__maxUploadImageSize)}}),a(_,"IfSSL",{get:function(){return _._ifSSL},set:function(M){return _._ifSSL=M,_._isMobileMode()||_._innerFun("IfSSL",r.makeParams(M)),!0}}),_._isMobileMode()?a(_,"IfAllowLocalCache",{get:function(){return!1},set:function(M){return!1}}):a(_,"IfAllowLocalCache",1,2),a(_,"UseLocalService",{get:function(){return!_._isMobileMode()}}),a(_,"PDFCompressionType",{get:function(){return _._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("PDFCompressionType"):_._innerFun("PDFCompressionType"))},set:function(M){var O=1*M;return O==w.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(O=w.DWT.EnumDWT_PDFCompressionType.PDF_FAX4),_._resetErr(),!!_._isValid()&&(_._isMobileMode()?_._mobileNotSupport("PDFCompressionType"):_._innerFun("PDFCompressionType",r.makeParams(O)))}}),_._getPdfDllname=function(){var O=!1,R=!1;return _._bRemoteMode?_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow||(_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux?R=!0:_.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(O=!0)):(O=n.bMac,R=n.bLinux),O?w.dcp.b64bit?"libDynamicPdfCorex64_"+w.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+w.DWT.PdfVersion+".dylib":R?"libDynamicPdfCore_"+w.DWT.PdfVersion+".so":w.dcp.b64bit?"DynamicPdfCorex64_"+w.DWT.PdfVersion+".dll":"DynamicPdfCore_"+w.DWT.PdfVersion+".dll"},_._setConvertModeInner=function(M){if(!e.License.checkProductKey(_,{Core:!0}))return!1;var O=1*M;return _._resetErr(),!(!_._isValid()||(isNaN(O)?(e.Errors.ParameterCannotEmpty(_),1):1!=O&&2!=O&&3!=O&&4!=O?(e.Errors.InvalidValue(_),1):(_._pdfConvertMode=O,_._pdfRealConvertMode=2==O||e.License.hasPDFRProductKey(_)?O:2,0)))},_._setConvertMode=function(M){if(!_._setConvertModeInner(M))return!1;if(!_._isMobileMode()){var A=_._getPdfDllname();_._innerFun("SetPDFConvertMode",r.makeParams(_._pdfRealConvertMode,A))}return!(2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode)||(e.Errors.LicenseNoPDF(_),!1)},_._setConvertModeAsync=function(M){var b=_._setConvertModeInner(M);if(e.Promise.resolve(!0),!b)return e.Promise.reject({code:_._errorCode,message:_._errorString});if(!_._isMobileMode()){var N=_._getPdfDllname();return _._innerFunV2("SetPDFConvertMode",r.makeParams(_._pdfRealConvertMode,N)).then(function(){if(2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode)throw e.Errors.LicenseNoPDF(_),{code:_._errorCode,message:_._errorString};return!0})}return 2==_._pdfRealConvertMode&&1==_._pdfConvertMode||2==_._pdfRealConvertMode&&4==_._pdfConvertMode?(e.Errors.LicenseNoPDF(_),e.Promise.reject({code:_._errorCode,message:_._errorString})):e.Promise.resolve(!0)},_._setProductKey=function(M,O,R,F){var B=!0,b=M,A=w.DWT,N=function(Y){Y||(_.__licenseInfo=!1);var ne=!0;return F||(ne=e.License.checkProductKey(_,{Core:!0})),e.isFunction(R)&&R(),ne};if(_._resetErr(),!_._isValid())return!1;if((!e.isString(b)||"******"==b)&&(b=""),A.ProductKey=b,""==b)B=!1,N();else{if(_._isMobileMode())return e.showProgressMsg(-1,"",w.MSG.Init_GetLicenseInfoForDWT),_.GetLicenseInfo(function(Y){w.WasmEnv&&w.WasmEnv.setLoglevel(_._logLevel),_._setConvertMode(_._pdfConvertMode),_._resetErr(),N(!0)},N),!0;_._innerFunRaw("ProductKey",r.makeParams(b),O,!1,!1,function(Y){var ne;ne=e.isArray(Y)?Y[0]:Y,e.isArray(Y)&&Y.length>=3&&"1"===Y[1]&&e.isFunction(w.DWT.ShowMessage)&&w.DWT.ShowMessage(Y[2],{width:510,height:272,headerStyle:1,seconds:10}),O||(B=ne),e.showProgressMsg(-1,"",w.MSG.Init_GetLicenseInfoForDWT),_.GetLicenseInfo(function(){_._setConvertMode(_._pdfConvertMode),N(!0)},N)},function(){O||(B=!1),N()})}return B},g(_,["ProxyServer"]);var v=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"];_._isMobileMode()?o(_,v):g(_,v),p(_,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]);var T=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"];_._isMobileMode()?o(_,T,0):p(_,T),m(_,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]);var D=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"];_._isMobileMode()?o(_,D):m(_,D),I(_,["MaxInternetTransferThreads"]);var P=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"];_._isMobileMode()?o(_,P):I(_,P),l(_,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],2);var E=["IfOpenImageWithGDIPlus"];_._isMobileMode()?o(_,E):l(_,E)},e.attachPropertyUI||(e.attachPropertyUI=function(){})}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=w.navInfoSync,d=e.html5.STwain.prototype,s=e.html5.Funs;d.__innerLoadImage=function(i,u,f,a,o,c,l){var m=this;if(!e.License.checkProductKey(m,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(m,f))return e.isFunction(l)&&l(m._errorCode,m._errorString),!1;if(e.isFunction(c))return m.__innerAcquireImage(i,u,a,c,l);var I=m.GetCurrentFileName();return""==I&&(I=m._ImgManager.getWebViewer().GetDefaultFileName()),m.__innerLoadImageFun(i,u,o,I)},d.__innerLoadImageFun=function(i,u,f,a){var c,o=this,l=!0;if(s.isHttpServerInvalid(o))return!1;if(c=o._innerFunRaw(i,u,!1,!1,!0),o.__bOpenFileNow=!1,e.isArray(c.result)&&c.result.length>0){var m="",I=[];if(f){var p=c.result[0];e.isObject(p)?(m=p.ids,I=p.metaData):-1==p&&("LoadImage"==i||"FTPDownload"==i)&&(l=!1)}else m=c.result.join(",");if(e.isArray(I)||(I=[]),o._OnBitmapChanged(["c2",m,1,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count(),I],null,a),l)return e.License.isLTS()&&w.DWT.lcvrf(o),!0}return w.Lib.Errors.bImageOnlyError_NotPurelyPDF(o._errorCode)&&w.Lib.Errors.LicenseNoPDF(o),!1},d.__closeRemoteScanUI=function(i){var u=this;if(u._acquireDivEL){var f=e.one(".ds-img-screen");u._acquireDivEL.evtFun?(f&&f.length>0&&e.removeEventListener(f[0],"mouseup",u._acquireDivEL.evtFun),u._acquireDivEL.evtFun=null):f&&f.length>0&&e.removeEventListener(f[0],"mouseup"),f&&f.length>0&&(f[0].src=""),i&&(document.body.removeChild(u._acquireDivEL),u._acquireDivEL=null)}},d.__innerAcquireImage=function(i,u,f,a,o){var c=this,l="LoadImage"==i||"LoadImageEx"==i||"GenerateURLForUploadData"==i,m=l||"LoadDibFromClipboard"==i,I=function(p){c.__bLoadingImage=!1,c.__bAcquireImageNow=!1,c.__bOpenFileNow=!1;var g=c._ImgManager.getCurrentImageIndex();return g>=0&&c.OnRefreshUI(g),w.Lib.Errors.bImageOnlyError_NotPurelyPDF(c._errorCode)&&w.Lib.Errors.LicenseNoPDF(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),l?w.Lib.closeProgress(i):s.hideMask(i),p&&w.Lib.log(p),c.__closeRemoteScanUI(!0),!1};return s.isServerInvalid(c)?(I(),!1):(l?w.Lib.showProgress(c,i,!1):s.showMask(i),c._innerSend(i,u,!0,function(){if(c.__bLoadingImage=!1,c.__bOpenFileNow=!1,l){if(w.Lib.closeProgress(i),c._isBindViewer()){var p=c._ImgManager.getCurrentImageIndex();p>=0&&c.OnRefreshUI(p)}}else s.hideMask(i);e.isFunction(a)&&a(),c.__closeRemoteScanUI(!0),m&&e.License.isLTS()&&w.DWT.lcvrf(c)},I),!0)},d.__innerSaveImage=function(i,u,f,a){return this._OnPercentDone([0,-1,w.MSG.Encoding]),this.__innerProgressFunction(i,u,!1,f,a)},d.__innerFTPDownloadDirectly=function(i,u,f,a,o){var c=this;return e.License.checkProductKey(c,{Core:!0})&&e.License.checkPDFProductKeyWhenNeeds(c,f)?(e.cancelFrome=4,c.__innerProgressFunction(i,u,!0,a,o)):(e.isFunction(o)&&o(c._errorCode,c._errorString),!1)},d.__innerFTPDownload=function(i,u,f,a,o){var l,c=this;if(!e.License.checkProductKey(c,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(c,f))return e.isFunction(o)&&o(c._errorCode,c._errorString),!1;if(e.cancelFrome=4,e.isFunction(o))return c.__innerProgressFunction(i,u,!0,function(){var g=c._ImgManager.getCurrentImageIndex();g>=0&&c.OnRefreshUI(g),e.License.isLTS()&&w.DWT.lcvrf(c),e.isFunction(a)&&a()},o);var I=c.GetCurrentFileName();""==I&&(I=c._ImgManager.getWebViewer().GetDefaultFileName()),(l=c.__innerLoadImageFun(i,u,1,I))&&e.License.isLTS()&&w.DWT.lcvrf(c);var p=c._ImgManager.getCurrentImageIndex();return p>=0&&c.OnRefreshUI(p),l},d.__innerFTPUpload=function(i,u,f,a){return w.Lib.cancelFrome=3,this.__innerProgressFunction(i,u,!0,f,a)},d.__innerProgressFunction=function(i,u,f,a,o){var c=this;return e.isFunction(o)?(w.Lib.showProgress(c,i,f),this._innerSend(i,u,!0,function(){w.Lib.closeProgress(i),e.isFunction(a)&&a()},function(m){return e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),w.Lib.closeProgress(i),m&&w.Lib.log(m),!0})):this._innerFun(i,u)},d.__innerGetBarcodeResultAsyncFunction=function(i){var u=w.Lib.NewBarcodeResult();return i&&(u._errorCode=i.exception,u._errorString=i.description,u._resultlist=i.result,u._Count=i.result.length),u},d.__innerGetOCRResultAsyncFunction=function(i){var u=w.Lib.NewOCRResult(this);return i&&(u._errorCode=i.exception,u._errorString=i.description,u._resultlist=i.result),u},d._innerSendCmd=function(i,u){if(s.isHttpServerInvalid(this))return!1;this._innerFunRaw(i,u,!0,!1,!0)},d._innerFun=function(i,u){var a;return!s.isHttpServerInvalid(this)&&(a=this._innerFunRaw(i,u,!1,!1,!1),w.Lib.isArray(a)?a[0]:a)},d._innerFunRawV2=function(i,u,f){var o,a=this;return a._resetErr(),a._isValid()?s.isHttpServerInvalid(a)?e.Promise.reject({code:a._errorCode,message:a._errorString}):(o={method:"post",body:s.getJson(a,i,u,0),dataType:f},w.DWT.ConnectWithSocket?new Promise(function(l,m){a._innerSend(i,u,!1,function(I){var p=!1;try{p=e.isString(I)?e.parse(I):I}catch{}if(p){if(p instanceof Blob||p instanceof ArrayBuffer)return void l(p);void 0!==p.exception&&void 0!==p.description&&(a._errorCode=p.exception,a._errorString=p.description)}a._resetErr(),l(p)},function(I){if(w.Lib.Errors.NetworkError(a),I){var p=[a._errorString," ",I.errorString];I.httpCode&&(p.push(" ("),p.push(I.httpCode),p.push(")")),a._errorString=p.join("")}m({code:a._errorCode,message:a._errorString})})}):e.fetch([a.httpUrl,"fa/",i].join(""),o).then(function(l){var m=!1;try{m=e.isString(l)?e.parse(l):l}catch{}if(m){if(m instanceof Blob||m instanceof ArrayBuffer)return m;if(void 0===m.exception||void 0===m.description)return a._resetErr(),m;a._errorCode=m.exception,a._errorString=m.description}else w.Lib.Errors.InvalidResultFormat(a);throw{code:a._errorCode,message:a._errorString}},function(l){if(w.Lib.Errors.NetworkError(a),l){var m=[a._errorString," ",l.errorString];l.httpCode&&(m.push(" ("),m.push(l.httpCode),m.push(")")),a._errorString=m.join("")}throw{code:a._errorCode,message:a._errorString}})):e.Promise.reject({code:a._errorCode,message:a._errorString})},d._innerFunV2=function(i,u){var f=this;return s.isHttpServerInvalid(f)?e.Promise.reject({code:f._errorCode,message:f._errorString}):f._innerFunRawV2(i,u,"text").then(function(a){return a&&w.Lib.isArray(a.result)&&a.result.length>0?a.result[0]:a})},d._innerNewWS=function(i,u){var f=this,a=s.generateCmdId(),o=s.getJson(f,i,u,a);return f._resetErr(),f._isValid()?s.isHttpServerInvalid(f)?e.Promise.reject({code:f._errorCode,message:f._errorString}):new e.Promise(function(c,l){var m;try{m=e.getWS(f._host,f._port,f._ssl)}catch{m&&(m.close(),m=null),e.Errors.Server_Invalid(f),l({code:f._errorCode,message:f._errorString})}m.onopen=function(){1==m.readyState?(m.onopen=null,m.send(o)):0==m.readyState&&setTimeout(m.onopen,100)},m.onmessage=function(I){c(I&&I.data?I.data:""),m.close(),I=null},m.onerror=function(I){l(I),m.close()},m.onclose=function(I){m&&(m.onclose=null,m.onerror=null,m.onmessage=null,m=null)}}):e.Promise.reject({code:f._errorCode,message:f._errorString})},d._innerFunRaw=function(i,u,f,a,o,c,l){var I,p,g,_,m=this,C="f/",v=!1;if(w.DWT.ConnectWithSocket)return this._innerSend(i,u,!1,c,l);if(s.isHttpServerInvalid(m)||(m._resetErr(),!m._isValid()))return!1;if(f&&(v=!0,C="fa/"),g={method:"POST",url:I=[m.httpUrl,C,i].join(""),data:p=s.getJson(m,i,u,0),async:v,onSuccess:function(D,P,E){var M=!1;try{M=e.isString(D)&&"text/json"===E.getResponseHeader("content-type")?e.parse(D):D}catch{}M?(void 0!==M.exception&&void 0!==M.description?(m._errorCode=M.exception,m._errorString=M.description):m._resetErr(),_=o?M:M.result):(w.Lib.Errors.InvalidResultFormat(m),_=""),e.isFunction(c)&&c(_)},onError:function(){w.Lib.Errors.NetworkError(m),_="",e.isFunction(l)&&l()}},!v&&a)r.bIE?(g.dataType="arraybuffer",g.onSuccess=function(D,P,E){var M,O,F,R=!1;if(E.responseHeadersString&&-1!=E.responseHeadersString.indexOf("text/json")&&(R=!0),M=E.responseData,m._resetErr(),_=!1,M&&(O=new Uint8Array(M),R?M=String.fromCharCode.apply(null,O):(_=new Blob([O],{type:m.__strHttpContentTypeFieldValue}),(F=new e.SparkMD5.ArrayBuffer).append(O),_.md5=F.end())),!M||R){var b,N=!1;if((b=R?M:E.responseText).length>0){if("{"==b.charAt(0))try{N=e.parse(b),R=!0}catch{w.Lib.log(b)}R?void 0!==N.exception&&void 0!==N.description?(m._errorCode=N.exception,m._errorString=N.description,_=!1):_=!0:(O=new Uint8Array(b),_=new Blob([O],{type:m.__strHttpContentTypeFieldValue}),(F=new e.SparkMD5.ArrayBuffer).append(O),_.md5=F.end())}}e.isFunction(c)&&c(_)}):(v||(g.dataType="text",g.contentType="text/plain; charset=x-user-defined",g.mimeType="text/plain; charset=x-user-defined"),g.onSuccess=function(D,P,E){var M,O,R;if(m._resetErr(),(O=(M=E.responseText).length)>0){var B,F=!1;if("{"==M.charAt(0))try{B=e.parse(M),F=!0}catch{w.Lib.log(M)}if(F)void 0!==B.exception&&void 0!==B.description?(m._errorCode=B.exception,m._errorString=B.description,_=!1):_=!0;else{R=new Uint8Array(O);for(var b=0;b<O;b++)R[b]=M.charCodeAt(b);_=new Blob([R],{type:m.__strHttpContentTypeFieldValue});var A=new e.SparkMD5.ArrayBuffer;A.append(R),_.md5=A.end()}}else _="";e.isFunction(c)&&c(_)});else if(v&&a){g={method:"POST",body:p},r.bIE?g.dataType="arraybuffer":g.fetchRaw=!0;var T=e.fetch(I,g);return r.bIE||(T=T.then(function(D){var P=D.headers.get("content-type");return P.indexOf("image/")>=0||P.indexOf("application/octet-stream")>=0?D.arrayBuffer():D.json()})),T=T.then(function(D){if(m._resetErr(),D instanceof ArrayBuffer)return e.isFunction(c)&&c(D),void(D=null);if(e.isObject(D)){var P=D;if(void 0!==P.exception&&void 0!==P.description)m._errorCode=P.exception,m._errorString=P.description,e.isFunction(l)&&l();else{var E="";P.result&&(E=P.result),e.isFunction(c)&&c(E)}}else w.Lib.Errors.NetworkError(m),e.isFunction(l)&&l()},function(D){w.Lib.Errors.NetworkError(m),e.isFunction(l)&&l()}),!0}return v||e.mix(g,{headers:{"X-Requested-With":!1}}),r.bFileSystem&&(g.crossDomain=!1),e.ajax(g),!!v||_},d._innerSend=function(i,u,f,a,o){var c=this,l=c._objWS,m=!1,I=!1,p=!1,g=!0;if("ActiveUI"==i?g=!1:p=s.isServerInvalid(c),p)return e.isFunction(o)&&o(),!0;e.isFunction(a)&&(I=a),e.isFunction(o)&&(m=o);var _,C=s.generateCmdId();if(w.DWT.ConnectWithSocket||"SaveSelectedImagesToBytes"!=i&&"ConvertToBlob"!=i){var E=c.GetCurrentFileName();""==E&&(E=c._ImgManager.getWebViewer().GetDefaultFileName()),c.curCommand.push({cmd:i,cmdId:C,sFun:I,fFun:m,currentFileName:E}),_=s.sendData(l,s.getJson(c,i,u,C),!1,g)}else{var v=s.getJson(c,i,u,C);c._innerFunRaw(i,v,!0,!0,!0,I,m),_=!0}return _},d.__innerConvertToBlob=function(i,u,f,a,o,c,l,m){var I=this;if(I._isMobileMode())return I.__innerConvertToBlobByMobile(i,u,f,o,c,l,m);var p=f,C=",";(!e.isString(p)||""==p)&&(p="",C="");var _=["[",i,',"',u.join(","),'"',C,p,"]"].join("");if(a)return I._innerFunRaw("ConvertToBlob",_,!0,!0,!0,function(D){var P=s.getBlobTypeByImageType(i),E=new Blob([D],{type:P});if(w.DWT.IfAddMD5InUploadHeader){var M=new e.SparkMD5.ArrayBuffer;M.append(D),e.isFunction(c)&&c(E,M.end(),m)}else e.isFunction(c)&&c(E,"",m);E=null},l);var v=I._innerFunRaw("ConvertToBlob",_,!1,!0,!1),T="";return 0==I.ErrorCode?(v&&"md5"in v&&(T=v.md5),c(v,T,m)):(l(),!1)},d.__innerConvertToBlobByMobile=function(i,u,f,a,o,c,l){var g,C,m=this,p=[];if(i==w.DWT.EnumDWT_ImageType.IT_BMP)return g="bmp",m._mobileNotSupport("Convert to bmp",c);for(g=i==w.DWT.EnumDWT_ImageType.IT_JPG?"jpg":i==w.DWT.EnumDWT_ImageType.IT_PNG?"png":i==w.DWT.EnumDWT_ImageType.IT_TIF?"tiff":i==w.DWT.EnumDWT_ImageType.IT_PDF?"pdf":i==w.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",C=0;C<u.length;C++)p.push(m._ImgManager.convertServerIdToClientIndex(u[C]));return m._innerSendToMobile("SaveImage",w.Lib.MobileFuns.makeParams("",p,g,a,!0),0,function(_,v,T){e.isFunction(o)&&o(_,l)},c)},d.__innerConvertToBase64ByMobile=function(i,u,f,a,o,c){var p,g,l=this,I=[];if(f==w.DWT.EnumDWT_ImageType.IT_BMP)return p="bmp",l._mobileNotSupport("Convert to bmp",c);if(p=f==w.DWT.EnumDWT_ImageType.IT_JPG?"jpg":f==w.DWT.EnumDWT_ImageType.IT_PNG?"png":f==w.DWT.EnumDWT_ImageType.IT_TIF?"tiff":f==w.DWT.EnumDWT_ImageType.IT_PDF?"pdf":f==w.DWT.EnumDWT_ImageType.IT_J2K?"jp2":"png",e.isArray(u))for(g=0;g<u.length;g++)I.push(l._ImgManager.convertServerIdToClientIndex(u[g]));return l._innerSendToMobile("SaveImage",w.Lib.MobileFuns.makeParams(i,I,p,a,!1),0,function(C,_,v){if(C instanceof Uint8ClampedArray||C instanceof ArrayBuffer||C instanceof Uint8Array){var T=new FileReader;T.onload=function(P){var E=P.target.result,M=e.isString(E)?E.split(","):[];M.length>=2&&(E=M[1]),e.isFunction(o)&&o({result:[E,E.length,T.md5]})};var D="image/"+_;return"pdf"==_&&(D="application/pdf"),void l._innerSendToMobile("GetMD5",w.Lib.MobileFuns.makeParams(C),0,function(P){T.md5=P,T.readAsDataURL(new Blob([C],{type:D}))},c)}o({result:[C,C.length,v]})},c)},d.__SaveLocalFileToBytes=function(i,u,f,a,o){var c=this;if(u)return c._innerFunRaw("SaveSelectedImagesToBytes",s.makeParams(0,0,i,f),u,!0,!0,function(I){if(e.isFunction(a)){var p=new Blob([I]);a(p),p=null}},o),!0;var m=c._innerFunRaw("SaveSelectedImagesToBytes",s.makeParams(0,0,i,f),u,!0,!1);return 0==c.ErrorCode?a(m):(o(),!1)},d.__captureImage=function(i,u,f,a){return this.__LoadImageFromBytesV2(i,u,"",!0,f,a,0,0,"true")},d.__LoadImageFromBytes=function(i,u,f,a,o,c,l,m){return this.__LoadImageFromBytesV2(i,u,f,a,o,c,l,m,"false")},d.__LoadImageFromBytesV2=function(i,u,f,a,o,c,l,m,I){var T,p=this,g="LoadImageFromBytes",C=u||3,_=i.size||i.length,v=i.name,D=s.isServerInvalid(p),P=!0,E=0,M=1;!isNaN(l)&&l>=0&&!isNaN(m)&&m>0?M=0:(l=0,m=0),E=p.__GetLoadEventsNum(),T=["[",_,",",0,",",C,',"',f,'",',l,",",m,",",E,",",M,",",I,"]"].join("");var O=function(){if(w.Lib.closeProgress(g),p.__bLoadingImage=!1,P){var R=p._ImgManager.getCurrentImageIndex();R>=0&&p.OnRefreshUI(R)}return e.isFunction(c)&&c(p._errorCode,p._errorString,v),!1};return D||!e.License.checkProductKey(p,{Core:!0})&&!e.License.checkProductKey(p,{Webcam:!0},!0)||!e.License.checkPDFProductKeyWhenNeeds(p,u)?(P=!1,O()):0===_?(w.Lib.Errors.ImageFileLengthCannotZero(p),P=!1,O()):(s.setBtnCancelVisibleForProgress(p,!1),this._innerSendBlob(g,T,i,a,M,function(){if((l+_==m||m<=0||isNaN(m))&&w.Lib.closeProgress(g),p.__bLoadingImage=!1,p._isBindViewer()){var R=p._ImgManager.getCurrentImageIndex();a&&R>=0&&p.OnRefreshUI(R)}if(e.isFunction(o))if(a)setTimeout(function(){o(v)},30);else try{o(v)}catch(F){w.Lib.log(F.message)}return e.License.isLTS()&&w.DWT.lcvrf(p),!0},O))},d._innerSendBlob=function(i,u,f,a,o,c,l){var m=this,I=m._objWS,p=!1;if(s.isServerInvalid(m))return e.isFunction(l)&&l(),!1;if(e.isFunction(l)&&(p=l),!a){var _,T,D,P,v=[],M="";return!(s.isHttpServerInvalid(m)||(m._resetErr(),!m._isValid()))&&(T=[m.httpUrl,"f/",i].join(""),D=s.getJson(m,i,u,0),D+="\r\n\r\n",P={method:"POST",url:T,processData:!1,data:D+=w.Lib.base64.encodeArray(f),async:!1,onSuccess:function(O,R,F){var B=!1,b=!1;try{B=e.isString(O)&&"text/json"===F.getResponseHeader("content-type")?e.parse(O):O}catch{}if(null!=B&&(void 0!==B.exception&&void 0!==B.description?(m._errorCode=B.exception,m._errorString=B.description):m._resetErr(),(_=B.result)&&e.isArray(_)&&_.length>=1))if(o){var A=_[0];A&&e.isObject(A)&&(M=A.ids,e.isArray(A.metaData)&&(v=A.metaData),b=!0)}else M=_.join(","),v=[],b=!0;b||(w.Lib.Errors.InvalidResultFormat(m),_="",v=[])},onError:function(){w.Lib.Errors.NetworkError(m),_="",v=[]}},e.mix(P,{headers:{"X-Requested-With":!1}}),r.bFileSystem&&(P.crossDomain=!1),e.ajax(P),0==m._errorCode?(M.length>0&&m._OnBitmapChanged(["c2",M,1,m._ImgManager.getCurrentImageIndex(),m._ImgManager.count(),v],null,f.currentFileName),e.isFunction(c)&&c()):e.isFunction(p)&&p(),_)}var g=s.generateCmdId();m.curCommand.push({cmd:i,cmdId:g,sFun:function(){e.isFunction(c)&&c()},fFun:p,currentFileName:f.currentFileName}),s.sendData(I,s.getJson(m,i,u,g),f,!0)},d.GetImageAsync=function(i,u,f,a,o){var c=this;if(c._resetErr(),!c._isValid())return e.Promise.reject({code:c._errorCode,message:c._errorString});var l=parseInt(i);if(isNaN(l))return e.Errors.InvalidIndex(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(l<0||l>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString});if(c._isMobileMode())return c._mobileNotSupportAsync("GetImageAsync");var _,m=c._ImgManager.convertClientIndexToServerId(l);return-1==m?(e.Errors.IndexOutOfRange(c),e.Promise.reject({code:c._errorCode,message:c._errorString})):(e.isNumber(u)?_=s.makeParams(m,u):e.isNumber(f)&&e.isNumber(a)?_=s.makeParams(m,f,a):e.isNumber(o)&&(_=s.makeParams(m,-1,-1,o)),c._innerFunV2("GetImageByIndex",_))},d.GetImageInfoAsync=function(i){var u=this;if(u._resetErr(),!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});var f=parseInt(i);if(isNaN(f))return e.Errors.InvalidIndex(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(f<0||f>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._mobileNotSupportAsync("GetImageAsync");var a=u._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageInfo",s.makeParams(a)).then(function(o){var c=0,l=0,m=o;if(w.Lib.isArray(o)&&1==o.length&&(m=o[0]),w.Lib.isString(m)){var I=m.split(",");c=parseInt(I[0]),l=parseInt(I[1])}return{width:c,height:l}})},d._innerActiveUI=function(i,u){var f=e.detect.ssl;if(this._blts){var a=this,o=w.DWT.li({instanceMode:w.DWT.EnumInstance.dwt_desktop});if(!w.DWT.lisValidID(o))return void(a=null);a._innerSend("ActiveUI",s.makeParams(w.Lib.env.WSVersion,w.Lib.env.WSSession,1,o,f),!1,i,u),a=null}else this._innerSend("ActiveUI",s.makeParams(w.Lib.env.WSVersion,w.Lib.env.WSSession,1,"",f),!1,i,u);return!0}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=w.navInfo,d=e.html5.STwain.prototype,s=e.html5.Funs,i=e.removeNonPrintableChar,u=w.DWT,f=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];d.LoadDibFromClipboard=function(o,c){var p,l=this;return l._resetErr(),!!l._isValid()&&(l._isMobileMode()?l._mobileNotSupport("LoadDibFromClipboard",c):(p=l.__GetLoadEventsNum(),l.__innerLoadImage("LoadDibFromClipboard",s.makeParams(p,1),-1,!0,1,o,c)))},d.LoadImage=function(o,c,l){var m=this;if(m._resetErr(),!m._isValid())return!1;if(m._isMobileMode())return m._mobileNotSupport("LoadImage",l);var C,_,v,p=s.replaceLocalFilename(o),g=e.html5.Funs.getImageType(p);return c&&e.isFunction(c)&&(_=function(){c()}),l&&e.isFunction(l)&&(v=function(){l(m.ErrorCode,m.ErrorString)}),C=m.__GetLoadEventsNum(),""==p&&(m.__bOpenFileNow=!0),m.__innerLoadImage("LoadImage",s.makeParams(p,C,1),g,!0,1,_,v)},d.LoadImageEx=function(o,c,l,m){var I=this;if(I._resetErr(),!I._isValid())return!1;if(I._isMobileMode()){var g=e.one(".d-loadImage");if(0==g.length){var C=document.createElement("input");C._stwain=I,C.setAttribute("type","file"),C.setAttribute("multiple","multiple"),C.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;",C.className="d-loadImage",C.setAttribute("accept",c==w.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":c==w.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":c==w.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":c==w.DWT.EnumDWT_ImageType.IT_PNG?"image/png":c==w.DWT.EnumDWT_ImageType.IT_PDF?".pdf":c==w.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":e.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),C.ondoubleclick=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,l,m),this.value="",this._stwain=null},C.onchange=function(){this.files.length>0&&this._stwain.LoadImageFromBinary(this.files,l,m),this.value="",this._stwain=null},document.body.appendChild(C),C.click()}else g[0].setAttribute("accept",c==w.DWT.EnumDWT_ImageType.IT_BMP?"image/bmp":c==w.DWT.EnumDWT_ImageType.IT_JPG?"image/jpeg":c==w.DWT.EnumDWT_ImageType.IT_TIF?"image/tiff":c==w.DWT.EnumDWT_ImageType.IT_PNG?"image/png":c==w.DWT.EnumDWT_ImageType.IT_PDF?".pdf":c==w.DWT.EnumDWT_ImageType.IT_J2K?".jp2,.j2k,.j2c":e.env.bMobile?"image/jpeg,image/png,image/tiff,image/tif":"image/*,.pdf,.jp2,.j2k,.j2c"),g[0].value="",g[0]._stwain=I,g[0].click();return!0}var T,D,P,_=s.replaceLocalFilename(o),v=c;return l&&e.isFunction(l)&&(D=function(){l()}),m&&e.isFunction(m)&&(P=function(){m(I.ErrorCode,I.ErrorString)}),v==w.DWT.EnumDWT_ImageType.IT_ALL&&(v=-1),T=I.__GetLoadEventsNum(),""==_&&(I.__bOpenFileNow=!0),I.__innerLoadImage("LoadImageEx",s.makeParams(_,v,T,1),v,!0,1,D,P)},d.EnableSource=function(o,c,l){var m=this;return m._resetErr(),!!m._isValid()&&(m._isMobileMode()?m._mobileNotSupport("EnableSource",l):m.AcquireImage(o,c,l))},d.AcquireImage=function(o,c,l){var g,C,m=this,I=null,p=null;if(m._resetErr(),!m._isValid())return!1;if(e.isUndefined(l)&&(e.isFunction(o)&&e.isFunction(c)||e.isFunction(o)&&e.isUndefined(c)||e.isFunction(o)&&null==c||null==o&&e.isFunction(c))?(C={},e.isFunction(o)&&(I=o),e.isFunction(c)&&(p=c)):(C=e.isUndefined(o)||null==o?{}:e.clone(o),e.isFunction(c)&&(I=function(){c(C)}),e.isFunction(l)&&(p=function(){l(C,m._errorCode,m._errorString)})),!e.License.checkProductKey(m,{Core:!0}))return e.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;if(m._isMobileMode())return m._mobileNotSupport("AcquireImage",p);if(s.isServerInvalid(m))return e.isFunction(p)&&p(m.ErrorCode,m.ErrorString),!1;!m._bRemoteMode&&C.RemoteScan&&(C.RemoteScan=!1),m._bRemoteMode&&C.RemoteScan&&(e.isFunction(m.__OnRemoteScanStatusAsync)||(m.__OnRemoteScanStatusAsync=function(){}),e.isFunction(m.__OnSourceUIClose)||(m.__OnSourceUIClose=function(){}));for(var _=0,v=0;v<f.length;v++){var T=["__",f[v]].join("");e.isFunction(m[T])&&(_|=1<<v)}if(C.EnableEvents=_,m._enableEvents=_,m._bRemoteMode&&C.RemoteScan&&(m._isBindViewer()||C.ShowRemoteScanUI)){var D=document.createElement("div");D.style.position="absolute",D.style.zIndex="510000",D.style.left="0",D.style.top="0";var P=document.createElement("img");P.className="ds-img-screen",D.appendChild(P),document.body.appendChild(D),m._acquireDivEL=D}if("SelectSourceByIndex"in C){var E=C.SelectSourceByIndex;return delete C.SelectSourceByIndex,m.SelectSourceByIndexAsync(E).then(function(){return g=["[",e.stringify(C),"]"].join(""),m.__bAcquireImageNow=!0,m.__innerAcquireImage("AcquireImage",g,!1,I,p)},function(M){p(M.code,M.message)})}return m._bRemoteMode||(m.bPageFocus&&u.IfAlwaysFocusOnPopupWindow?m.bServerAlwaysFocusOnPopupWindow||m._OnPageFocus(!0):m.bServerAlwaysFocusOnPopupWindow&&m._OnPageBlur(!0)),g=["[",e.stringify(C),"]"].join(""),m.__bAcquireImageNow=!0,m.__innerAcquireImage("AcquireImage",g,!1,I,p)},d._startScan=function(o,c,l){var g,C,m=this,I=null,p=null;if(C=e.isUndefined(o)||null==o?{}:o,m._resetErr(),!m._isValid())return!1;if(e.isFunction(c)&&(I=function(){c(C)}),e.isFunction(l)&&(p=function(D,P){l(D,P,C)}),s.isServerInvalid(m)||!e.License.checkProductKey(m,{Core:!0}))return e.isFunction(p)&&p(m._errorCode,m._errorString),!1;for(var _=0,v=0;v<f.length;v++){var T=["__",f[v]].join("");e.isFunction(m[T])&&(_|=1<<v)}return C.EnableEvents=_,g=["[",e.stringify(C),"]"].join(""),m.__bAcquireImageNow=!0,m.__innerAcquireImage("StartScan",g,!1,I,p)},d.CancelAllPendingTransfers=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CancelAllPendingTransfers"):this._innerFun("CancelAllPendingTransfers"))},d.CloseSource=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CloseSource"):o._innerFun("CloseSource"))},d.CloseSourceManager=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CloseSourceManager"):o._innerFun("CloseSourceManager"))},d.CloseSourceAsync=function(){var o=this;return o._resetErr(),o._isValid()?o._isMobileMode()?o._mobileNotSupportAsync("CloseSource"):o._innerFunV2("CloseSource"):e.Promise.reject({code:o._errorCode,message:o._errorString})},d.CloseSourceManagerAsync=function(){var o=this;return o._resetErr(),o._isValid()?o._isMobileMode()?o._mobileNotSupportAsync("CloseSourceManager"):o._innerFunV2("CloseSourceManager"):e.Promise.reject({code:o._errorCode,message:o._errorString})},d.DisableSource=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("DisableSource"):o._innerFun("DisableSource"))},d.FeedPage=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("FeedPage"):o._innerFun("FeedPage"))},d.GetDeviceType=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("GetDeviceType"):o._innerFun("GetDeviceType"))},d.GetSourceNameItems=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("GetSourceNameItems"):(c.__sourceCount<0&&(c.SourceCount=0),o<c.__sourceCount&&o>=0?c.__sourceName[o]:""))},d.SourceNameItems=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("SourceNameItems"):c.GetSourceNameItems(o))};var a=function(o){var c=JSON.parse(i(o));return e.each(c,function(l){l.ProductName&&(l.ProductName=e.base64.decode(l.ProductName)),l.ProductFamily&&(l.ProductFamily=e.base64.decode(l.ProductFamily)),l.Manufacturer&&(l.Manufacturer=e.base64.decode(l.Manufacturer)),l.Version&&l.Version.Info&&(l.Version.Info=e.base64.decode(l.Version.Info))}),c};d._getSourceNamesSyncV2=function(o){var I,p,c=this,m=[],g=[];if(I=c._innerFun("GetSourceNames",s.makeParams(1,o)),0!=c._errorCode&&-3032!=c._errorCode)return[];if(""!=I){m=a(I);for(var C=0;C<m.length;C++){var v="true"==(p=m[C]).IsDefaultSource;p.IsCurrentSource="true"==p.IsCurrentSource,p.IsDefaultSource=v,g.push(p)}}return g},d._getSourceNamesAsyncV2=function(o){var c=this;return c._innerFunV2("GetSourceNames",s.makeParams(1,o)).then(function(m){if(0!=c._errorCode&&-3032!=c._errorCode)throw 0;var p,I=[],g=[];if(""!=m){I=a(m);for(var C=0;C<I.length;C++){var v="true"==(p=I[C]).IsDefaultSource;p.IsCurrentSource="true"==p.IsCurrentSource,p.IsDefaultSource=v,g.push(p)}}return g})},d.GetSourceNames=function(o){var c=this,l=c.SourceCount;return l<=0&&(l=0),o?c.__sourceDetails:c.__sourceName},d._resetSources=function(){var o=this;o.__defaultSourceName="",o.__sourceCount=0,o.__icaSourceCount=-1,o.__sourceName=[],o.__sourceDetails=[]},d.GetSourceCountAsync=function(o){var l,c=this,m=!1,p=!1;return c._resetErr(),c._isValid()?(c._bRemoteMode?c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?p=!0:c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux||c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(m=!0):(m=r.bMac,p=r.bWin),c._resetSources(),e.showMask(),o&&(c._driverType=o),m&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_ICA?l=c._getSourceNamesAsyncV2(w.DWT.EnumDWT_Driver.ICA).then(function(C){var _,v,T;for(T=0;T<C.length;T++)e.isString(_=(v=C[T]).ProductName)&&""!==(_=i(e.trim(_)))&&("ICA"===v.DriverType&&(_="ICA-"+_),1==v.IsDefaultSource&&(c.__defaultSourceName=_),c.__sourceName.push(_),c.__sourceDetails.push(v));c.__icaSourceCount=c.__sourceDetails.length}).then(function(){return c._getSourceNamesAsyncV2(w.DWT.EnumDWT_Driver.TWAIN)}).then(function(C){var _,v,T;for(T=0;T<C.length;T++)e.isString(_=(v=C[T]).ProductName)&&""!==(_=i(e.trim(_)))&&("ICA"===v.DriverType&&(_="ICA-"+_),1==v.IsDefaultSource&&(c.__defaultSourceName=_),c.__sourceName.push(_),c.__sourceDetails.push(v))}).then(function(){var C=c.__sourceDetails.length;return c.__sourceCount=C,""===c.__defaultSourceName&&c.__sourceName.length>0&&(c.__defaultSourceName=c.__sourceName[0]),e.hideMask(),C},function(){return c._resetSources(),c.__icaSourceCount=0,e.hideMask(),0}):p&&w.dcp.b64bit&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(l=c._getSourceNamesAsyncV2(w.DWT.EnumDWT_Driver.TWAIN).then(function(C){var _,v,T;for(T=0;T<C.length;T++)e.isString(_=(v=C[T]).ProductName)&&""!==(_=i(e.trim(_)))&&(1==v.IsDefaultSource&&(c.__defaultSourceName=_),c.__sourceName.push(_),c.__sourceDetails.push(v));c.__icaSourceCount=c.__sourceDetails.length}),w.dcp.b64bit&&(l=l.then(function(){return c._getSourceNamesAsyncV2(w.DWT.EnumDWT_Driver.TWAIN64)}).then(function(C){var _,v,T;for(T=0;T<C.length;T++)e.isString(_=(v=C[T]).ProductName)&&""!==(_=e.trim(_))&&("TWAIN(64Bit)"===v.DriverType&&(_="Twain64-"+_),1==v.IsDefaultSource&&(c.__defaultSourceName=_),c.__sourceName.push(_),c.__sourceDetails.push(v))})),l=l.then(function(){var C=c.__sourceDetails.length;return c.__sourceCount=C,""===c.__defaultSourceName&&c.__sourceName.length>0&&(c.__defaultSourceName=c.__sourceName[0]),e.hideMask(),C},function(){return c._resetSources(),c.__icaSourceCount=0,e.hideMask(),0})):l=c._getSourceNamesAsyncV2().then(function(C){var _,v,T;for(T=0;T<C.length;T++)e.isString(_=(v=C[T]).ProductName)&&""!==(_=i(e.trim(_)))&&("ICA"===v.DriverType&&(_="ICA-"+_),1==v.IsDefaultSource&&(c.__defaultSourceName=_),c.__sourceName.push(_),c.__sourceDetails.push(v))}).then(function(){var C=c.__sourceDetails.length;return c.__sourceCount=C,""===c.__defaultSourceName&&c.__sourceName.length>0&&(c.__defaultSourceName=c.__sourceName[0]),c.__icaSourceCount=0,e.hideMask(),C},function(){return c._resetSources(),c.__icaSourceCount=0,e.hideMask(),0}),l):e.Promise.reject({code:c._errorCode,message:c._errorString})},d.getSourceCount=function(o){return this.GetSourceCountAsync(o)},d.GetSourceNamesAsync=function(o){var c=this;return c._resetErr(),c._isValid()?c._isMobileMode()?c._mobileNotSupportAsync("GetSourceNames"):c.getSourceCount().then(o?function(m){return c.__sourceDetails}:function(m){return c.__sourceName}):e.Promise.reject({code:c._errorCode,message:c._errorString})},d.GetSourceType=function(o){var c=this,l=parseInt(o);return c._resetErr(),isNaN(l)?(e.Errors.InvalidParameter(c),!1):(l=c.__SetImageCaptureTypeInner(l),c._innerFun("GetSourceType",s.makeParams(l)))},d.OpenSource=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("OpenSource"):o._innerFun("OpenSource"))},d.OpenSourceManager=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("OpenSourceManager"):o._innerFun("OpenSourceManager"))},d.OpenSourceAsync=function(){var o=this;return o._resetErr(),o._isValid()?o._isMobileMode()?o._mobileNotSupportAsync("OpenSource"):o._innerFunV2("OpenSource"):e.Promise.reject({code:o._errorCode,message:o._errorString})},d.OpenSourceManagerAsync=function(){var o=this;return o._resetErr(),o._isValid()?o._isMobileMode()?o._mobileNotSupportAsync("OpenSourceManager"):o._innerFunV2("OpenSourceManager"):e.Promise.reject({code:o._errorCode,message:o._errorString})},d.ResetImageLayout=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("ResetImageLayout"):o._innerFun("ResetImageLayout"))},d.RewindPage=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("RewindPage"):o._innerFun("RewindPage"))},d.SelectSource=function(o,c){var l=this;return l._resetErr(),!!l._isValid()&&(l._isMobileMode()?l._mobileNotSupport("SelectSource",c):e.isUndefined(o)?l._bRemoteMode&&l.IfShowUI?(e.Errors.SelectSourceMustAsyncWhenRemote(l),!1):l._driverType==w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(e.Errors.SelectSourceMustAsync(l),!1):l._innerFun("SelectSource"):(l.SelectSourceAsync().then(o,function(){e.isFunction(c)&&c(l.ErrorCode,l.ErrorString)}),!0))},d.SelectSourceAsync=function(o){var c=this;return c._resetErr(),c._isValid()?c._isMobileMode()?c._mobileNotSupportAsync("SelectSource"):o?c._innerFunV2("SelectSource",s.makeParams(o)):c.getSourceCount().then(function(l){var I,p,m=document;if(l<=0){var g=u.CustomizableDisplayInfo.dialogText.selectSource[3];return alert(g),e.Promise.reject(g)}if(e.dialog.selectsourcedlg){var D=w.Lib.one(".dynamsoft-dialog-selectsource");D&&D.length>0&&(p=D[0])}else{var C,_=-1;for((p=m.createElement("dialog")).className="dynamsoft-dialog-selectsource",p.style.top="20%",(r.bIE||r.bEdge)&&(p.style.width="300px"),p.setAttribute("closed","closed"),(C=[]).push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">'),I=0;I<c.__sourceCount;I++){var v="";(""==c.__defaultSourceName&&0==I||c.__defaultSourceName==c.__sourceName[I])&&(v=" dynamsoft-dialog-selectsource-sourcelist-li-selected",_=I),C.push('<li class="dynamsoft-dialog-selectsource-item'+v+'" sourceindex='+I+">"+c.__sourceName[I]+"</li>")}C.push("</ul>"),C=C.join("");var T=["<p>",u.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',C,"</div>",'<div><input type="button" value="',u.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',u.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");p.innerHTML=T,e.dialog.selectsourcedlg=p,m.body.appendChild(e.dialog.selectsourcedlg),e.each(e.all(".dynamsoft-dialog-selectsource-item"),function(M,O){e.addEventListener(M,"click",function(R){for(var F=R.target,B=F.attributes.sourceindex.value,b=F.parentElement.children,A=0;A<b.length;A++)b[A].className="dynamsoft-dialog-selectsource-item";F.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected",e.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",B)})}),e.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",_.toString()),e.dialog.setup(e.dialog.selectsourcedlg)}e.dialog.selectsourcedlg.showModal();var P;if((P="CSS1Compat"==m.compatMode?m.documentElement.scrollTop:m.body.scrollTop)>0&&p){var E=e.DOM.getElDimensions(p,!0).offsetTop;p.style.top=(E+=P)+"px"}return new e.Promise(function(M,O){e.removeEventListener(e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click"),e.removeEventListener(e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click"),e.addEventListener(e.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var R=parseInt(w.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);c.SelectSourceByIndexAsync(R).then(function(){e.dialog.selectsourcedlg.close(),document.body.removeChild(e.dialog.selectsourcedlg),e.dialog.selectsourcedlg=!1,M(R)})}),e.addEventListener(e.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){e.dialog.selectsourcedlg.close(),document.body.removeChild(e.dialog.selectsourcedlg),e.dialog.selectsourcedlg=!1,O({code:-1032,message:"User cancelled the operation."})})})}):e.Promise.reject({code:c._errorCode,message:c._errorString})},d.SelectSourceByIndex=function(o){var c=this,l=parseInt(o);if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("SelectSourceByIndex");if(isNaN(l))return e.Errors.InvalidParameter(c),!1;var m=c.__getSourceIndexAndImageCaptureType(o);return c._innerFun("SelectSourceByIndex",s.makeParams(m[0],m[1],m[2]))},d.__getSourceIndexAndImageCaptureType=function(o){var c=this,l=1*o,I=!1,g=!1;c._isValid()&&(c._bRemoteMode?c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?g=!0:c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux||c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(I=!0):(I=r.bMac,g=r.bWin),I&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_ICA?l>=c.__icaSourceCount?(l-=c.__icaSourceCount,c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN):c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.ICA:g&&w.dcp.b64bit&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64&&(l>=c.__icaSourceCount?(l-=c.__icaSourceCount,c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN64):c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN));var _=void 0===c._driverType?0:c._driverType;return[l,void 0===c.__currentImageCaptureDriverType?_:c.__currentImageCaptureDriverType,_]},d.__SetImageCaptureTypeInner=function(o){var c=this;if(!c._isValid())return!1;var l=c.__getSourceIndexAndImageCaptureType(o);return c._innerFun("SetImageCaptureDriverType",s.makeParams(l[1],l[2])),l[0]},d._resetImageCaptureDriverType=function(o){var l,c=this,m=o,I=!1,g=!1;return c._resetErr(),!!c._isValid()&&(c._bRemoteMode?c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow?g=!0:c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux||c.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(I=!0):(I=r.bMac,g=r.bWin),I&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_ICA?(l=-1==c.__icaSourceCount?c.getSourceCount():e.Promise.resolve(c.__sourceCount),o>=c.__icaSourceCount?(m-=c.__icaSourceCount,c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN,l=l.then(function(){return c._innerFunV2("SetImageCaptureDriverType",s.makeParams(w.DWT.EnumDWT_Driver.TWAIN,c._driverType))})):(c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.ICA,l=l.then(function(){return c._innerFunV2("SetImageCaptureDriverType",s.makeParams(w.DWT.EnumDWT_Driver.ICA,c._driverType))}))):g&&w.dcp.b64bit&&c._driverType===w.DWT.EnumDWT_Driver.TWAIN_AND_TWAIN64?(l=-1==c.__icaSourceCount?c.getSourceCount():e.Promise.resolve(c.__sourceCount),o>=c.__icaSourceCount?(m-=c.__icaSourceCount,c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN64,l=l.then(function(){return c._innerFunV2("SetImageCaptureDriverType",s.makeParams(w.DWT.EnumDWT_Driver.TWAIN64,c._driverType))})):(c.__currentImageCaptureDriverType=w.DWT.EnumDWT_Driver.TWAIN,l=l.then(function(){return c._innerFunV2("SetImageCaptureDriverType",s.makeParams(w.DWT.EnumDWT_Driver.TWAIN,c._driverType))}))):l=e.Promise.resolve(0),l.then(function(){return m}))},d.GetSourceTypeAsync=function(o){var c=this,l=1*o;return c._resetErr(),c._isValid()?c._isMobileMode()?c._mobileNotSupportAsync("GetSourceType"):c._resetImageCaptureDriverType(l).then(function(m){return c._innerFunV2("GetSourceType",s.makeParams(m))}):e.Promise.reject({code:c._errorCode,message:c._errorString})},d.SelectSourceByIndexAsync=function(o){var c=this,l=1*o;return c._resetErr(),c._isValid()?e.isNaN(l)?(e.Errors.InvalidIndex(c),e.Promise.reject({code:c._errorCode,message:c._errorString})):c._isMobileMode()?c._mobileNotSupportAsync("SelectSourceByIndex"):c._resetImageCaptureDriverType(l).then(function(m){return c._innerFunV2("SelectSourceByIndex",s.makeParams(m))}):e.Promise.reject({code:c._errorCode,message:c._errorString})},d.SetFileXferInfo=function(o,c){var m,I,l=this;return l._resetErr(),!!l._isValid()&&(l._isMobileMode()?l._mobileNotSupport("SetFileXferInfo"):(m=w.navInfoSync.bFileSystem?o.replace(/<%/g,"<%25"):o,I=s.replaceLocalFilename(m),l._innerFun("SetFileXferInfo",s.makeParams(I,c))))},d.SetImageLayout=function(o,c,l,m){var I=this;return I._resetErr(),!!I._isValid()&&(I._isMobileMode()?I._mobileNotSupport("SetImageLayout"):I._innerFun("SetImageLayout",s.makeParams(o,c,l,m)))},d.CapGet=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGet"):this._innerFun("CapGet"))},d.CapGetCurrent=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGetCurrent"):this._innerFun("CapGetCurrent"))},d.CapGetDefault=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGetDefault"):this._innerFun("CapGetDefault"))},d.CapGetFrameBottom=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("CapGetFrameBottom"):this._innerFun("CapGetFrameBottom",s.makeParams(o)))},d.CapGetFrameLeft=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("CapGetFrameLeft"):this._innerFun("CapGetFrameLeft",s.makeParams(o)))},d.CapGetFrameRight=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("CapGetFrameRight"):this._innerFun("CapGetFrameRight",s.makeParams(o)))},d.CapGetFrameTop=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("CapGetFrameTop"):this._innerFun("CapGetFrameTop",s.makeParams(o)))},d.CapGetHelp=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGetHelp"):this._innerFun("CapGetHelp"))},d.CapGetLabel=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGetLabel"):this._innerFun("CapGetLabel"))},d.CapGetLabels=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapGetLabels"):this._innerFun("CapGetLabels"))},d.CapIfSupported=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("CapIfSupported"):this._innerFun("CapIfSupported",s.makeParams(o)))},d.CapReset=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapReset"):this._innerFun("CapReset"))},d.CapSet=function(){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("CapSet"):this._innerFun("CapSet"))},d.CapSetFrame=function(o,c,l,m,I){var p=this;return p._resetErr(),!!p._isValid()&&(p._isMobileMode()?p._mobileNotSupport("CapSetFrame"):this._innerFun("CapSetFrame",s.makeParams(o,c,l,m,I)))},d.GetCapItems=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("GetCapItems"):this._innerFun("GetCapItems",s.makeParams(o)))},d.GetCapItemsString=function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("GetCapItemsString"):this._innerFun("GetCapItemsString",s.makeParams(o)))},d.SetCapItems=function(o,c){var l=this;return l._resetErr(),!!l._isValid()&&(l._isMobileMode()?l._mobileNotSupport("SetCapItems"):this._innerFun("SetCapItems",s.makeParams(o,c)))},d.SetCapItemsString=function(o,c){var l=this;return l._resetErr(),!!l._isValid()&&(l._isMobileMode()?l._mobileNotSupport("SetCapItemsString"):this._innerFun("SetCapItemsString",s.makeParams(o,c)))},d.GenerateURLForUploadData=function(o,c,l,m,I){var p=this,g=[];if(c==w.DWT.EnumDWT_ImageType.IT_BMP||c==w.DWT.EnumDWT_ImageType.IT_JPG||c==w.DWT.EnumDWT_ImageType.IT_PNG){if(!e.isArray(o))return e.Errors.IndicesNotArray(p),e.isFunction(m)&&m(p.ErrorCode,p.ErrorString,"",o,c),"";if(o.length>1)return e.Errors.UploadIndexMoreThanOne(p),e.isFunction(m)&&m(p.ErrorCode,p.ErrorString,"",o,c),"";if(!p._checkIndices(o))return m(p.ErrorCode,p.ErrorString,"",o,c),!1;var C=p._ImgManager.convertClientIndexToServerId(o[0]);-1!=C&&g.push(C)}else{if(c!=w.DWT.EnumDWT_ImageType.IT_TIF&&c!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.isArray(o)?e.Errors.InvalidImageType(p):e.Errors.IndicesNotArray(p),e.isFunction(m)&&m(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,o,c),"";var _,v;if(e.isArray(o)){if(!p._checkIndices(o))return m(p.ErrorCode,p.ErrorString,"",o,c),!1;_=o}else{if(-1!=o)return e.Errors.IndicesNotArray(p),e.isFunction(m)&&m(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,o,c),"";for(_=[],v=0;v<p._ImgManager.count();v++)_.push(v)}e.each(_,function(P){var E=p._ImgManager.convertClientIndexToServerId(P);-1!=E&&g.push(E)})}return e.isFunction(l)&&e.isFunction(m)?(p._asyncGenerateURLForUploadData(g,c,I,l,function(P){m(p.ErrorCode,p.ErrorString,p.__HTTPPostResponseString,P,c)}),!0):this._syncGenerateURLForUploadData(g,c,I)},d._syncGenerateURLForUploadData=function(o,c,l){var I,m=this,p=!1,g=w.dcp.managerVersion.join(""),C=l,_=",";(!e.isString(C)||""==C)&&(C="",_="");var v=["[",'"dcp","dwasm_'+g,'",',c,',"',o.join(","),'"',_,C,"]"].join("");(I=this._innerFunRaw("GenerateURLForUploadData",v,!1,!1,!0))&&e.isArray(I.result)&&I.result.length>1&&1==I.result[0]&&(p=["dcp://dwasm_",g,"/file/",I.result[1]].join(""));var P=[];return e.isArray(o)&&e.each(o,function(E){var M=m._ImgManager.convertServerIdToClientIndex(E);M>-1&&P.push(M)}),0==p?(e.Errors.GenerateURL_InvalidRetFromServer(m),""):p},d._asyncGenerateURLForUploadData=function(o,c,l,m,I){var p=this,g=c,C=function(){if(e.isFunction(I)){var M=[];e.isArray(o)&&e.each(o,function(O){var R=p._ImgManager.convertServerIdToClientIndex(O);R>-1&&M.push(R)}),I(M)}return""},v=",";if(g==w.DWT.EnumDWT_ImageType.IT_BMP||g==w.DWT.EnumDWT_ImageType.IT_JPG||g==w.DWT.EnumDWT_ImageType.IT_PNG){if(o.length>1)return e.Errors.UploadIndexMoreThanOne(p),C(),""}else if(g!=w.DWT.EnumDWT_ImageType.IT_TIF&&g!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(p),C(),"";var T=!1,D=w.dcp.managerVersion.join(""),P=l;(!e.isString(P)||""==P)&&(P="",v="");var E=["[",'"dcp","dwasm_'+D,'",',g,',"',o.join(","),'"',v,P,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",E,!0,!1,!0,function(M){if(M&&e.isArray(M.result)&&M.result.length>0?1==M.result[0]&&M.result.length>1?T=["dcp://dwasm_",D,"/file/",M.result[1]].join(""):void 0!==M.exception&&void 0!==M.description?(p._errorCode=M.exception,p._errorString=M.description):e.Errors.GenerateURL_InvalidRetFromServer(p):e.Errors.GenerateURL_InvalidRetFromServer(p),0==T)return C(),"";if(e.isFunction(m)){var F=[];e.isArray(o)&&e.each(o,function(B){var b=p._ImgManager.convertServerIdToClientIndex(B);b>-1&&F.push(b)}),m(T,F,c)}return T},C)}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var h=e.html5.STwain.prototype,d=e.html5.Funs;h.AddText=function(s,i,u,f,a,o,c,l){var m=this;if(m._resetErr(),!m._isValid())return!1;if(m._isMobileMode())return m._mobileNotSupport("AddText");var I=parseInt(s);if(isNaN(I))return e.Errors.InvalidIndex(m),!1;if(I<0||I>=m._ImgManager.count())return e.Errors.IndexOutOfRange(m),!1;var p=e.RGB2BGR(a),g=e.RGB2BGR(o),C=m._ImgManager.convertClientIndexToServerId(I);return-1==C?(e.Errors.IndexOutOfRange(m),!1):m._innerFun("AddText",d.makeParams(C,i,u,f,p,g,c,l))},h.CreateTextFont=function(s,i,u,f,a,o,c,l,m,I,p,g,C,_){var v=this;return v._resetErr(),!!v._isValid()&&(v._isMobileMode()?v._mobileNotSupport("CreateTextFont"):this._innerFun("CreateTextFont",d.makeParams(s,i,u,f,a,o,c,l,m,I,p,g,C,_)))},h.CopyToClipboard=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return i._mobileNotSupport("CopyToClipboard");var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),!1):i._innerFun("CopyToClipboard",d.makeParams(f))},h.CopyToClipboardAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._mobileNotSupportAsync("CopyToClipboardAsync");var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("CopyToClipboard",d.makeParams(f))},h._asyncErase=function(s,i,u,f,a,o,c){var l=this,p=parseInt(s),_=l.__BackgroundFillColor;return e.isUndef(_)?_="FFFFFF":e.isNumber(_)?_=_.toString(16):e.isString(_)&&(_=_.replace("#","")),l._innerSendToMobile("Erase",w.Lib.MobileFuns.makeParams(p,i,u,f,a,_),0,function(){d.refreshImageAfterInvokeFun(l,s),e.isFunction(o)&&setTimeout(o,30)},function(){e.isFunction(c)&&c(l.ErrorCode,l.ErrorString)})},h.Erase=function(s,i,u,f,a,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;var p,m=parseInt(s);if(isNaN(m))return e.Errors.InvalidIndex(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(m<0||m>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(l._isMobileMode())return l._ImgManager.getView().GetWebViewer().clearSelectedAreas(),l._asyncErase(m,i,u,f,a,o,c);var g=l._ImgManager.convertClientIndexToServerId(m);return-1==g?(e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):(l._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(p=1==l._innerFun("Erase",d.makeParams(g,i,u,f,a)))?e.isFunction(o)&&o():e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),p)},h.GetImageBitDepth=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return parseInt(f.bitDepth)}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),!1):i._innerFun("GetImageBitDepth",d.makeParams(a))},h.GetImageWidth=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),-1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),-1;if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return parseInt(f.width)}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),-1):i._innerFun("GetImageWidth",d.makeParams(a))},h.GetImageHeight=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),-1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),-1;if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return parseInt(f.height)}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),-1):i._innerFun("GetImageHeight",d.makeParams(a))},h.GetImageSize=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return!1;if(f._isMobileMode())return f._mobileNotSupport("GetImageSize");var a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),-1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),-1;var o=f._ImgManager.convertClientIndexToServerId(a);return-1==o?(e.Errors.IndexOutOfRange(f),-1):f._innerFun("GetImageSize",d.makeParams(o,i,u))},h.GetImageSizeWithSpecifiedType=function(s,i){var u=this;if(u._resetErr(),!u._isValid())return!1;if(u._isMobileMode())return u._mobileNotSupport("GetImageSizeWithSpecifiedType");var f=parseInt(s);if(isNaN(f))return e.Errors.InvalidIndex(u),-1;if(f<0||f>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),-1;var a=u._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(u),-1):u._innerFun("GetImageSizeWithSpecifiedType",d.makeParams(a,i))},h.GetImageXResolution=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return parseInt(f.resolutionX)}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),!1):i._innerFun("GetImageXResolution",d.makeParams(a))},h.GetImageYResolution=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return parseInt(f.resolutionY)}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),!1):i._innerFun("GetImageYResolution",d.makeParams(a))},h.SelectAllImages=function(){var u,s=this,i=s.HowManyImagesInBuffer,f=[];if(s._resetErr(),!s._isValid())return!1;for(u=0;u<i;u++)f.push(u);return s._ImgManager.SetSelectedClientIndexArray(f),f},h.SelectImages=function(s){var i=this;return i._resetErr(),!!i._isValid()&&i._ImgManager.SetSelectedClientIndexArray(s)},h._asyncGetSkewAngleOnly=function(s,i,u){var f=this,c=parseInt(s);return f._innerSendToMobile("GetSkewAngleOnly",w.Lib.MobileFuns.makeParams(c),0,function(I){d.refreshImageAfterInvokeFun(f,s),e.isFunction(i)&&setTimeout(function(){i(I)},30)},function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)})},h._asyncGetSkewAngle=function(s,i,u){var f=this,c=parseInt(s);return f._innerSendToMobile("GetSkewAngle",w.Lib.MobileFuns.makeParams(c),0,function(l){d.refreshImageAfterInvokeFun(f,s),e.isFunction(i)&&setTimeout(function(){i(l)},30)},function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)})},h.GetSkewAngle=function(s,i,u){var a,f=this;if(f._resetErr(),!f._isValid())return!1;var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(c<0||c>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncGetSkewAngle(c,i,u);var l=f._ImgManager.convertClientIndexToServerId(c);if(-1==l)return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a=f._innerFun("GetSkewAngle",d.makeParams(l)),0==f.ErrorCode){if(d.refreshImageAfterInvokeFun(f,c),!e.isFunction(i))return a;i(a)}else e.isFunction(u)&&u(f.ErrorCode,f.ErrorString);return!0},h.GetSkewAngleAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var f=parseInt(s);if(isNaN(f))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(f<0||f>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._innerSendToMobileV2("GetSkewAngle",w.Lib.MobileFuns.makeParams(f)).then(function(o){d.refreshImageAfterInvokeFun(i,f)});var a=i._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetSkewAngle",d.makeParams(a)).then(function(o){var c=o;return e.isArray(o)&&(c=o.length>0?o[0]:0),d.refreshImageAfterInvokeFun(i,f),c})},h.GetSkewAngleEx=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("GetSkewAngleEx");var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var l=o._ImgManager.convertClientIndexToServerId(c);return-1==l?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("GetSkewAngleEx",d.makeParams(l,i,u,f,a))},h.IsBlankImageEx=function(s,i,u,f,a,o){var l,c=this;if(c._resetErr(),!c._isValid())return!1;if(c._isMobileMode())return c._mobileNotSupport("IsBlankImageEx");if(l=parseInt(s),isNaN(l))return e.Errors.InvalidIndex(c),!1;if(l<0||l>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),!1;var m=c._ImgManager.convertClientIndexToServerId(l);return-1==m?(e.Errors.IndexOutOfRange(c),!1):c._innerFun("IsBlankImageEx",d.makeParams(m,i,u,f,a,o))},h.MirrorAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._innerSendToMobileV2("Mirror",w.Lib.MobileFuns.makeParams(u)).then(function(){d.refreshImageAfterInvokeFun(i,u),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("Mirror",d.makeParams(f)).then(function(a){if(1!=a)throw{code:i._errorCode,message:i._errorString};d.refreshImageAfterInvokeFun(i,u),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.Mirror=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return!1;var a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._innerSendToMobileV2("Mirror",w.Lib.MobileFuns.makeParams(a)).then(function(){d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),i&&i()},function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)}),!0;var l,o=f._ImgManager.convertClientIndexToServerId(a);return-1==o?(e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1):((l=1==f._innerFun("Mirror",d.makeParams(o)))?(d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(i)&&i()):e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),l)},h.RemoveAllImages=function(){var s=this,i=!0,u=s._isMobileMode();if(s._resetErr(),!s._isValid())return!1;var f=s._ImgManager.GetCurrentTag();if(""==f||"All"==f)u?s._OnBitmapChanged(["10","-1",3,-1,0]):((i=s._innerFun("RemoveAllImages"))||-1033==s._errorCode)&&s._OnBitmapChanged(["0","-1",3,-1,0]);else{var a,o=function(){},c=function(){},l=[],m="0";for(u&&(m="10"),a=s.HowManyImagesInBuffer-1;a>=0;a--){var p=s._ImgManager.convertClientIndexToServerId(a);p>-1&&(u||(i=s._innerFunRaw("RemoveImage",d.makeParams(p),!0,!1,!0,o,c))||-1033==s._errorCode)&&l.push(p)}s._OnBitmapChanged([m,l.join(","),3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])}return i},h.RemoveImage=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;var u=parseInt(s),f=!0;if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),!1):(i._isMobileMode()?i._OnBitmapChanged(["10",""+a,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]):((f=i._innerFun("RemoveImage",d.makeParams(a)))||-1033==i._errorCode)&&i._OnBitmapChanged(["0",""+a,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]),f)},h.RemoveAllImagesAsync=function(){var s=this;if(s._resetErr(),!s._isValid())return e.Promise.reject({code:s._errorCode,message:s._errorString});var u=s._ImgManager.GetCurrentTag();if(""==u||"All"==u)return s._isMobileMode()?(s._OnBitmapChanged(["10","-1",3,-1,0]),e.Promise.resolve(!0)):s._innerFunV2("RemoveAllImages").then(function(I){return!(!I&&-1033!=s._errorCode||(s._OnBitmapChanged(["0","-1",3,-1,0]),0))});var f,o,a=[],c=s.HowManyImagesInBuffer;for(f=0;f<c;f++){var l=s._ImgManager.convertClientIndexToServerId(f);l>-1&&a.push(l)}if(s._isMobileMode())o=e.Promise.resolve(a.join(","));else{var m=[];for(o=e.Promise.resolve(0),f=0;f<a.length;f++)o=o.then(function(I){return s._innerFunRawV2("RemoveImage",d.makeParams(a[I])).then(function(p){return(p||-1033==s._errorCode)&&m.push(a[I]),I++})});o=o.then(function(){return m.join(",")})}return o.then(function(I){var p="0";s._isMobileMode()&&(p="10"),""!=I&&s._OnBitmapChanged([p,I,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})},h.RemoveImageAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._isMobileMode()?(i._OnBitmapChanged(["10",""+f,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]),e.Promise.resolve(!0)):i._innerFunV2("RemoveImage",d.makeParams(f)).then(function(a){return!(!a&&-1033!=i._errorCode||(i._OnBitmapChanged(["0",""+f,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]),0))})},h._removeImageById=function(s,i,u){var f=this;return f._innerFunRaw("RemoveImage",d.makeParams(s),!0,!1,!0,function(){f._OnBitmapChanged(["0",""+s,3,f._ImgManager.getCurrentImageIndex(),f._ImgManager.count()]),e.isFunction(i)&&i()},u)},h._asyncRotateEx=function(s,i,u,f){var a=this,o=parseInt(s),c=a.__BackgroundFillColor;return e.isUndef(c)?c="FFFFFF":e.isNumber(c)?c="0x"+c.toString(16):e.isString(c)&&(c=c.replace("#","")),a._innerSendToMobileV2("RotateEx",w.Lib.MobileFuns.makeParams(o,i,u,f,c)).then(function(){d.refreshImageAfterInvokeFun(a,s),a._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.Rotate=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return!1;var m,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),!1;if(o._isMobileMode())return o._asyncRotateEx(c,i,u,-1).then(f,function(){e.isFunction(a)&&a(o.ErrorCode,o.ErrorString)}),!0;var I=o._ImgManager.convertClientIndexToServerId(c);return-1==I?(e.Errors.IndexOutOfRange(o),e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),!1):((m=1==o._innerFun("Rotate",d.makeParams(I,i,u)))?(d.refreshImageAfterInvokeFun(o,c),o._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(f)&&f()):e.isFunction(a)&&a(o.ErrorCode,o.ErrorString),m)},h.RotateEx=function(s,i,u,f,a,o){var c=this;if(c._resetErr(),!c._isValid())return!1;var I,l=parseInt(s);if(isNaN(l))return e.Errors.InvalidIndex(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(l<0||l>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(c._isMobileMode())return c._asyncRotateEx(l,i,u,f).then(a,function(){e.isFunction(o)&&o(c.ErrorCode,c.ErrorString)}),!0;var p=c._ImgManager.convertClientIndexToServerId(l);return-1==p?(e.Errors.IndexOutOfRange(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1):((I=1==c._innerFun("RotateEx",d.makeParams(p,i,u,f)))?(d.refreshImageAfterInvokeFun(c,l),c._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(a)&&a()):e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),I)},h.RotateLeft=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return!1;var c,a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncRotateEx(a,-90,!0,-1).then(i,function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)}),!0;var l=f._ImgManager.convertClientIndexToServerId(a);return-1==l?(e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1):((c=1==f._innerFun("RotateLeft",d.makeParams(l)))?(d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(i)&&i()):e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),c)},h.RotateRight=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return!1;var c,a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncRotateEx(a,90,!0,-1).then(i,function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)}),!0;var l=f._ImgManager.convertClientIndexToServerId(a);return-1==l?(e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1):((c=1==f._innerFun("RotateRight",d.makeParams(l)))?(d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(i)&&i()):e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),c)},h.RotateAsync=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return e.Promise.reject({code:f._errorCode,message:f._errorString});var a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.Promise.reject({code:f._errorCode,message:f._errorString});if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.Promise.reject({code:f._errorCode,message:f._errorString});if(f._isMobileMode())return f._asyncRotateEx(a,i,u,-1);var o=f._ImgManager.convertClientIndexToServerId(a);return-1==o?(e.Errors.IndexOutOfRange(f),e.Promise.reject({code:f._errorCode,message:f._errorString})):f._innerFunV2("Rotate",d.makeParams(o,i,u)).then(function(c){if(1!=c)throw{code:f._errorCode,message:f._errorString};d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.RotateExAsync=function(s,i,u,f){var a=this;if(a._resetErr(),!a._isValid())return e.Promise.reject({code:a._errorCode,message:a._errorString});var o=parseInt(s);if(isNaN(o))return e.Errors.InvalidIndex(a),e.Promise.reject({code:a._errorCode,message:a._errorString});if(o<0||o>=a._ImgManager.count())return e.Errors.IndexOutOfRange(a),e.Promise.reject({code:a._errorCode,message:a._errorString});if(a._isMobileMode())return a._asyncRotateEx(o,i,u,f);var c=a._ImgManager.convertClientIndexToServerId(o);return-1==c?(e.Errors.IndexOutOfRange(a),e.Promise.reject({code:a._errorCode,message:a._errorString})):a._innerFunV2("RotateEx",d.makeParams(c,i,u,f)).then(function(l){if(1!=l)throw{code:a._errorCode,message:a._errorString};d.refreshImageAfterInvokeFun(a,o),a._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.RotateLeftAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncRotateEx(u,-90,!0,-1);var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("RotateLeft",d.makeParams(f)).then(function(a){if(1!=a)throw{code:i._errorCode,message:i._errorString};d.refreshImageAfterInvokeFun(i,u),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.RotateRightAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncRotateEx(u,90,!0,-1);var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("RotateRight",d.makeParams(f)).then(function(a){if(1!=a)throw{code:i._errorCode,message:i._errorString};d.refreshImageAfterInvokeFun(i,u),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h._asyncChangeImageSize=function(s,i,u,f){var a=this,o=parseInt(s),c=parseInt(i),l=parseInt(u);return a._innerSendToMobileV2("ChangeImageSize",w.Lib.MobileFuns.makeParams(o,c,l,f)).then(function(){d.refreshImageAfterInvokeFun(a,s)})},h.ChangeImageSize=function(s,i,u,f,a,o){var g,c=this,l=parseInt(s),m=1*i,I=1*u;if(c._resetErr(),!c._isValid())return!1;if(isNaN(l))return e.Errors.InvalidIndex(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(l<0||l>=c._ImgManager.count())return e.Errors.IndexOutOfRange(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(m<=0||I<=0)return e.Errors.InvalidWidthOrHeight(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1;if(c._isMobileMode())return c._asyncChangeImageSize(l,i,u,f).then(a,function(){e.isFunction(o)&&o(c.ErrorCode,c.ErrorString)}),!0;var C=c._ImgManager.convertClientIndexToServerId(l);return-1==C?(e.Errors.IndexOutOfRange(c),e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),!1):((g=1==c._innerFun("ChangeImageSize",d.makeParams(C,m,I,f)))?(d.refreshImageAfterInvokeFun(c,l),e.isFunction(a)&&a()):e.isFunction(o)&&o(c.ErrorCode,c.ErrorString),g)},h.ChangeImageSizeAsync=function(s,i,u,f){var a=this,o=parseInt(s),c=1*i,l=1*u;if(a._resetErr(),!a._isValid())return e.Promise.reject({code:a._errorCode,message:a._errorString});if(isNaN(o))return e.Errors.InvalidIndex(a),e.Promise.reject({code:a._errorCode,message:a._errorString});if(o<0||o>=a._ImgManager.count())return e.Errors.IndexOutOfRange(a),e.Promise.reject({code:a._errorCode,message:a._errorString});if(c<=0||l<=0)return e.Errors.InvalidWidthOrHeight(a),e.Promise.reject({code:a._errorCode,message:a._errorString});if(a._isMobileMode())return a._asyncChangeImageSize(o,i,u,f);var m=a._ImgManager.convertClientIndexToServerId(o);return-1==m?(e.Errors.IndexOutOfRange(a),e.Promise.reject({code:a._errorCode,message:a._errorString})):a._innerFunV2("ChangeImageSize",d.makeParams(m,c,l,f)).then(function(I){if(1!=I)throw{code:a._errorCode,message:a._errorString};d.refreshImageAfterInvokeFun(a,o)})},h._asyncFlip=function(s){var i=this,u=parseInt(s);return i._innerSendToMobileV2("Flip",w.Lib.MobileFuns.makeParams(u)).then(function(){d.refreshImageAfterInvokeFun(i,s),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h.Flip=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return!1;var c,a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncFlip(a).then(i,function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)}),!0;var l=f._ImgManager.convertClientIndexToServerId(a);return-1==l?(e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1):((c=1==f._innerFun("Flip",d.makeParams(l)))?(d.refreshImageAfterInvokeFun(f,a),f._ImgManager._UIView.GetWebViewer().clearSelectedAreas(),e.isFunction(i)&&i()):e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),c)},h.FlipAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncFlip(u);var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("Flip",d.makeParams(f)).then(function(a){if(1!=a)throw{code:i._errorCode,message:i._errorString};d.refreshImageAfterInvokeFun(i,u),i._ImgManager._UIView.GetWebViewer().clearSelectedAreas()})},h._asyncCrop=function(s,i,u,f,a){var o=this,c=parseInt(s);return o._innerSendToMobileV2("Crop",w.Lib.MobileFuns.makeParams(c,i,u,f,a)).then(function(){var l,m;d.refreshImageAfterInvokeFun(o,s),l=o.ErrorCode,m=o.ErrorString,o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),o._errorCode=l,o._errorString=m})},h.Crop=function(s,i,u,f,a,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;var p,m=parseInt(s);if(isNaN(m))return e.Errors.InvalidIndex(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(m<0||m>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(l._isMobileMode())return l._asyncCrop(m,i,u,f,a).then(o,function(){e.isFunction(c)&&c(l.ErrorCode,l.ErrorString)}),!0;var C,_,g=l._ImgManager.convertClientIndexToServerId(m);return-1==g?(e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):(p=1==l._innerFun("Crop",d.makeParams(g,i,u,f,a)),C=l.ErrorCode,_=l.ErrorString,l._ImgManager.getView().GetWebViewer().clearSelectedAreas(),l._errorCode=C,l._errorString=_,p?(d.refreshImageAfterInvokeFun(l,m),e.isFunction(o)&&o()):e.isFunction(c)&&c(C,_),p)},h.CropAsync=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._asyncCrop(c,i,u,f,a);var l=o._ImgManager.convertClientIndexToServerId(c);return-1==l?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("Crop",d.makeParams(l,i,u,f,a)).then(function(m){var I,p;if(I=o.ErrorCode,p=o.ErrorString,o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),o._errorCode=I,o._errorString=p,1!=m)throw{code:o._errorCode,message:o._errorString};return d.refreshImageAfterInvokeFun(o,c),!0})},h.CropToClipboard=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CropToClipboard");var m,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var I=o._ImgManager.convertClientIndexToServerId(c);return-1==I?(e.Errors.IndexOutOfRange(o),!1):(o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(m=1==o._innerFun("CropToClipboard",d.makeParams(I,i,u,f,a)))&&d.refreshImageAfterInvokeFun(o,c),m)},h.CutFrameToClipboard=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("CutFrameToClipboard");var m,c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var I=o._ImgManager.convertClientIndexToServerId(c);return-1==I?(e.Errors.IndexOutOfRange(o),!1):(o._ImgManager.getView().GetWebViewer().clearSelectedAreas(),(m=1==o._innerFun("CutFrameToClipboard",d.makeParams(I,i,u,f,a)))&&d.refreshImageAfterInvokeFun(o,c),m)},h.CutToClipboard=function(s){var i=this;if(i._resetErr(),!i._isValid())return!1;if(i._isMobileMode())return i._mobileNotSupport("CutToClipboard");var a,u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),!1;if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),!1;var o=i._ImgManager.convertClientIndexToServerId(u);return-1==o?(e.Errors.IndexOutOfRange(i),!1):((a=1==i._innerFun("CutToClipboard",d.makeParams(o)))&&i._OnBitmapChanged(["0",""+o,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]),a)},h.CutFrameToClipboardAsync=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CutFrameToClipboardAsync");var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var I=o._ImgManager.convertClientIndexToServerId(c);return-1==I?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CutFrameToClipboard",d.makeParams(I,i,u,f,a)).then(function(p){var g=1==p;if(!g)throw{code:o._errorCode,message:o._errorString};return d.refreshImageAfterInvokeFun(o,c),g})},h.CropToClipboardAsync=function(s,i,u,f,a){var o=this;if(o._resetErr(),!o._isValid())return e.Promise.reject({code:o._errorCode,message:o._errorString});if(o._isMobileMode())return o._mobileNotSupportAsync("CropToClipboardAsync");var c=parseInt(s);if(isNaN(c))return e.Errors.InvalidIndex(o),e.Promise.reject({code:o._errorCode,message:o._errorString});if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var l=o._ImgManager.convertClientIndexToServerId(c);return-1==l?(e.Errors.IndexOutOfRange(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):o._innerFunV2("CropToClipboard",d.makeParams(l,i,u,f,a)).then(function(m){var I=1==m;if(!I)throw{code:o._errorCode,message:o._errorString};return d.refreshImageAfterInvokeFun(o,c),I})},h.CutToClipboardAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._mobileNotSupportAsync("CutToClipboardAsync");var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});var f=i._ImgManager.convertClientIndexToServerId(u);return-1==f?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("CutToClipboard",d.makeParams(f)).then(function(a){var o=1==a;if(!o)throw{code:i._errorCode,message:i._errorString};return i._OnBitmapChanged(["0",""+f,3,i._ImgManager.getCurrentImageIndex(),i._ImgManager.count()]),o})},h._asyncSetDPI=function(s,i,u,f,a,o,c,l){var m=this,g=parseInt(s),C=parseInt(u),_=parseInt(f),v=parseInt(o);return isNaN(C)||C<=0||isNaN(_)||_<=0||isNaN(v)||v<0?(e.Errors.InvalidParameter(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1):m._innerSendToMobile("SetDPI",w.Lib.MobileFuns.makeParams(g,C,_,a,v),0,function(){d.refreshImageAfterInvokeFun(m,s),e.isFunction(c)&&setTimeout(c,30)},function(){e.isFunction(l)&&l(m.ErrorCode,m.ErrorString)})},h.SetDPI=function(s,i,u,f,a,o,c){var I,l=this;if(l._resetErr(),!l._isValid())return!1;var p=parseInt(s);if(isNaN(p))return e.Errors.InvalidIndex(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(p<0||p>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;var g=l._ImgManager.convertClientIndexToServerId(p);return-1==g?(e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):l._isMobileMode()?l._asyncSetDPI(p,g,i,u,f,a,o,c):((I=1==l._innerFun("SetDPI",d.makeParams(g,i,u,f,a)))?e.isFunction(o)&&o():e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),I)},h.MoveImage=function(s,i){var u=this;if(u._resetErr(),!u._isValid())return!1;var f=parseInt(s),a=parseInt(i);return isNaN(f)||isNaN(a)?(e.Errors.InvalidIndex(u),!1):f<0||f>=u._ImgManager.count()||a<0||a>=u._ImgManager.count()?(e.Errors.IndexOutOfRange(u),!1):u._ImgManager.MoveImage(f,a)},h.SwitchImage=function(s,i){var u=this;if(u._resetErr(),!u._isValid())return!1;var f=parseInt(s),a=parseInt(i);return isNaN(f)||isNaN(a)?(e.Errors.InvalidIndex(u),!1):f<0||f>=u._ImgManager.count()||a<0||a>=u._ImgManager.count()?(e.Errors.IndexOutOfRange(u),!1):u._ImgManager.SwitchImage(f,a)},h.CloseWorkingProcess=function(){var s=this;return s._resetErr(),!!s._isValid()&&(s._isMobileMode()?s._mobileNotSupport("CloseWorkerProcess"):s._innerFun("CloseWorkerProcess"))},h.RemoveAllSelectedImages=function(){var s=this,i=s._isMobileMode();if(s._resetErr(),!s._isValid())return!1;var u=!0,f=s._ImgManager.getCurrentImageIndex(),a=s._ImgManager.getSelectedClientIndexArray(),o=[];if(e.isArray(a)&&e.each(a,function(l){var m=s._ImgManager.convertClientIndexToServerId(l);-1!=m&&o.push(m)}),0==o.length&&f>=0){var c=s._ImgManager.convertClientIndexToServerId(f);o.push(c)}return i||(u=s._innerFun("RemoveAllSelectedImages",d.makeParams(o.join(",")))),u&&(i||(s._HowManyImagesInBuffer=s._innerFun("HowManyImagesInBuffer")),e.each(o,function(l){var m="0";s._isMobileMode()&&(m="10"),s._OnBitmapChanged([m,""+l,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})),u},h.RemoveAllSelectedImagesAsync=function(){var s=this,i=s._isMobileMode();if(s._resetErr(),!s._isValid())return e.Promise.reject({code:s._errorCode,message:s._errorString});var f=s._ImgManager.getCurrentImageIndex(),a=s._ImgManager.getSelectedClientIndexArray(),o=[];if(e.isArray(a)&&e.each(a,function(m){var I=s._ImgManager.convertClientIndexToServerId(m);-1!=I&&o.push(I)}),0==o.length&&f>=0){var l=s._ImgManager.convertClientIndexToServerId(f);o.push(l)}return(i?e.Promise.resolve(!0):s._innerFunV2("RemoveAllSelectedImages",d.makeParams(o.join(","))).then(function(m){return m&&s._innerFunV2("HowManyImagesInBuffer").then(function(I){return s._HowManyImagesInBuffer=I,!0})})).then(function(m){m&&e.each(o,function(I){var p="0";s._isMobileMode()&&(p="10"),s._OnBitmapChanged([p,""+I,3,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])})})},h.TagImages=function(s,i){var u=this;if(u._resetErr(),!u._isValid())return!1;var f=!0,a=u._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();return e.isArray(s)?e.isString(i)&&""!=i?(e.each(s,function(o){if(isNaN(o)||o<0||o>=a)return e.Errors.IndexOutOfRange(u),f=!1}),f&&u._ImgManager.AddImageTag(s,i)):(e.Errors.InvalidTagName(u),!1):(e.Errors.IndicesNotArray(u),!1)},h.ClearImageTags=function(s){var i=this;return i._resetErr(),!!i._isValid()&&(-1==s||s>=i.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(i),!1):i._ImgManager.RemoveImageTag(s))},h.SetDefaultTag=function(s){var i=this;return i._resetErr(),!!i._isValid()&&i._ImgManager.SetDefaultTag(s)},h.FilterImagesByTag=function(s,i,u){var f=this;return f._resetErr(),!!f._isValid()&&f._ImgManager.ShowImagesByFilter(s,i,u)},h.ClearFilter=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.ClearFilter()},h.CreateFile=function(s){var i=this;return i._resetErr(),!!i._isValid()&&(s&&""!=s?e.isString(s)?i._ImgManager.CreateFile(s):(e.Errors.FileNameNotString(i),!1):(e.Errors.FileNameCannotEmpty(i),!1))},h.OpenFile=function(s){var i=this;return i._resetErr(),!!i._isValid()&&(s&&""!=s?e.isString(s)?i._ImgManager.OpenFile(s):(e.Errors.FileNameNotString(i),!1):(e.Errors.FileNameCannotEmpty(i),!1))},h.GetCurrentFileName=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetCurrentFileName()},h.RemoveFile=function(s){var i=this,u=i._isMobileMode();if(i._resetErr(),!i._isValid())return!1;if(!u){var f=i._ImgManager.GetImageIdsByFileName(s);i._innerFun("RemoveAllSelectedImages",d.makeParams(f.join(",")))}return i._ImgManager.RemoveFile(s)},h.GetFileInfoList=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetFileInfoList()},h._asyncInvert=function(s){var i=this,u=parseInt(s);return i._innerSendToMobileV2("Invert",w.Lib.MobileFuns.makeParams(u)).then(function(){d.refreshImageAfterInvokeFun(i,s)})},h.Invert=function(s,i,u){var c,f=this,a=parseInt(s);if(f._resetErr(),!f._isValid())return!1;if(isNaN(a))return e.Errors.InvalidIndex(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1;if(f._isMobileMode())return f._asyncInvert(a).then(i,function(){e.isFunction(u)&&u(f.ErrorCode,f.ErrorString)}),!0;var l=f._ImgManager.convertClientIndexToServerId(a);return-1==l?(e.Errors.IndexOutOfRange(f),e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),!1):((c=1==f._innerFun("Invert",d.makeParams(l)))?(d.refreshImageAfterInvokeFun(f,a),e.isFunction(i)&&i()):e.isFunction(u)&&u(f.ErrorCode,f.ErrorString),c)},h.InvertAsync=function(s){var i=this,u=parseInt(s);if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode())return i._asyncInvert(u);var o=i._ImgManager.convertClientIndexToServerId(u);return-1==o?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("Invert",d.makeParams(o)).then(function(c){var l=1==c;if(!l)throw{code:i._errorCode,message:i._errorString};return d.refreshImageAfterInvokeFun(i,u),l})},h.RenameTag=function(s,i){var u=this;return u._resetErr(),!!u._isValid()&&(e.isUndefined(s)?(e.Errors.ParameterCannotEmpty(u),!1):0==s.length?(e.Errors.OldTagNameRequired(u),!1):e.isUndefined(i)||0==i.length?(e.Errors.NewTagNameRequired(u),!1):u._ImgManager.RenameTag(s,i))},h.RemoveTag=function(s,i){var u=this;return u._resetErr(),!!u._isValid()&&(e.isUndefined(s)||0==s.length?(e.Errors.ParameterCannotEmpty(u),!1):e.isUndefined(i)||e.isArray(i)?u._ImgManager.RemoveTag(s,i):(e.Errors.IndicesNotArray(u),!1))},h.GetTagList=function(){var s=this;return s._resetErr(),!!s._isValid()&&s._ImgManager.GetTagList()},h.GetTagListByIndex=function(s){var i=this;return i._resetErr(),!!i._isValid()&&i._ImgManager.GetTagListByIndex(s)},h._registLoadCallback=function(s){var i=this;return i._resetErr(),!!i._isValid()&&i._ImgManager.RegistLoadCallback(s)},h.GetImageBitDepthAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return e.Promise.resolve(parseInt(f.bitDepth))}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetImageBitDepth",d.makeParams(a))},h.GetImageWidthAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return e.Promise.resolve(parseInt(f.width))}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetImageWidth",d.makeParams(a))},h.GetImageHeightAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return e.Promise.resolve(parseInt(f.height))}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetImageHeight",d.makeParams(a))},h.GetImageSizeAsync=function(s,i,u){var f=this;if(f._resetErr(),!f._isValid())return e.Promise.reject({code:f._errorCode,message:f._errorString});if(f._isMobileMode())return f._mobileNotSupportAsync("GetImageSizeAsync");var a=parseInt(s);if(isNaN(a))return e.Errors.InvalidIndex(f),e.Promise.reject({code:f._errorCode,message:f._errorString});if(a<0||a>=f._ImgManager.count())return e.Errors.IndexOutOfRange(f),e.Promise.reject({code:f._errorCode,message:f._errorString});var o=f._ImgManager.convertClientIndexToServerId(a);return-1==o?(e.Errors.IndexOutOfRange(f),e.Promise.reject({code:f._errorCode,message:f._errorString})):f._innerFunV2("GetImageSize",d.makeParams(o,i,u))},h.GetImageSizeWithSpecifiedTypeAsync=function(s,i){var u=this;if(u._resetErr(),!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._mobileNotSupportAsync("GetImageSizeWithSpecifiedTypeAsync");var f=parseInt(s);if(isNaN(f))return e.Errors.InvalidIndex(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(f<0||f>=u._ImgManager.count())return e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString});var a=u._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("GetImageSizeWithSpecifiedType",d.makeParams(a,i))},h.GetImageXResolutionAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return e.Promise.resolve(parseInt(f.resolutionX))}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetImageXResolution",d.makeParams(a))},h.GetImageYResolutionAsync=function(s){var i=this;if(i._resetErr(),!i._isValid())return e.Promise.reject({code:i._errorCode,message:i._errorString});var u=parseInt(s);if(isNaN(u))return e.Errors.InvalidIndex(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(u<0||u>=i._ImgManager.count())return e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString});if(i._isMobileMode()){var f=i._ImgManager._UIView.GetMetaDataByIndex(u);return e.Promise.resolve(parseInt(f.resolutionY))}var a=i._ImgManager.convertClientIndexToServerId(u);return-1==a?(e.Errors.IndexOutOfRange(i),e.Promise.reject({code:i._errorCode,message:i._errorString})):i._innerFunV2("GetImageYResolution",d.makeParams(a))},h.ChangeBrightnessAsync=function(s,i){var u=this,f=parseInt(s);if(!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});if(i<-1e3||i>1e3)return e.Errors.InvalidValue(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._innerSendToMobileV2("ChangeBrightness",w.Lib.MobileFuns.makeParams(f,i)).then(function(){d.refreshImageAfterInvokeFun(u,s),u._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var a=u._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("ChangeBrightness",d.makeParams(a,i))},h.ChangeContrastAsnyc=function(s,i){var u=this,f=parseInt(s);if(!u._isValid())return e.Promise.reject({code:u._errorCode,message:u._errorString});if(i<-1e3||i>1e3)return e.Errors.InvalidValue(u),e.Promise.reject({code:u._errorCode,message:u._errorString});if(u._isMobileMode())return u._innerSendToMobileV2("ChangeContrast",w.Lib.MobileFuns.makeParams(f,i)).then(function(){d.refreshImageAfterInvokeFun(u,s),u._ImgManager._UIView.GetWebViewer().clearSelectedAreas()});var a=u._ImgManager.convertClientIndexToServerId(f);return-1==a?(e.Errors.IndexOutOfRange(u),e.Promise.reject({code:u._errorCode,message:u._errorString})):u._innerFunV2("ChangeContrast",d.makeParams(a,i))}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var h=e,d=e.html5.STwain,s=d.prototype,i=!1,u=!0,f=e.html5.Funs,a=function(v,T){return 0!=v._ImgManager.count()||(e.Errors.NoImage(v),e.isFunction(T)&&T(v.ErrorCode,v.ErrorString),!1)},o=function(v,T,D){return!(!a(v,D)||(isNaN(T)||!e.isNumber(T)||T<0||T>=v._ImgManager.count())&&(e.Errors.IndexOutOfRange(v),e.isFunction(D)&&D(v.ErrorCode,v.ErrorString),1))},c=function(v,T,D,P){if(0==v._ImgManager.count())return e.Errors.NoImage(v),e.isFunction(P)&&P(T),!1;if(e.isNumber(T)){if(isNaN(T)||T<-2||T>=v._ImgManager.count())return e.Errors.IndexOutOfRange(v),e.isFunction(P)&&P(T),!1}else{if(!e.isArray(T))return e.Errors.IndexOutOfRange(v),e.isFunction(P)&&P(T),!1;var E;for(E=0;E<T.length;E++){var M=T[E];if(isNaN(M)||!e.isNumber(M)||M<0||M>=v._ImgManager.count())return e.Errors.IndicesOutOfRange(v),e.isFunction(P)&&P(T),!1}}if(D==w.DWT.EnumDWT_ImageType.IT_BMP||D==w.DWT.EnumDWT_ImageType.IT_JPG||D==w.DWT.EnumDWT_ImageType.IT_PNG||D==w.DWT.EnumDWT_ImageType.IT_J2K)(-1==T&&v._ImgManager.count()>1||e.isArray(T)&&T.length>1)&&(e.Errors.UploadIndexMoreThanOne(v),e.isFunction(P)&&P(T));else if(D!=w.DWT.EnumDWT_ImageType.IT_TIF&&D!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(v),e.isFunction(P)&&P(T),!1;return!0},l=function(v){var D,P,E,T=[];return v._ImgManager.count()<=0||((P=v._ImgManager.getCurrentImageIndex())>=0&&(D=v._ImgManager.convertClientIndexToServerId(P)),E=v._ImgManager.getSelectedClientIndexArray(),e.isArray(E)&&e.each(E,function(M){var O=v._ImgManager.convertClientIndexToServerId(M);-1!=O&&T.push(O)}),-1!=D&&0==T.length&&T.push(D)),T},m=function(v){if(v._ImgManager.count()<=0)return[];var T=v._ImgManager.getSelectedClientIndexArray();if(e.isArray(T)){if(0==T.length){var D=v._ImgManager.getCurrentImageIndex();D>=0&&T.push(D)}return T}return[]},I=function(v,T){for(var D=v._ImgManager.GetAllServerIdList(),P=0;P<D.length;P++)T.push(D[P])},p=function(v,T,D,P,E){try{v(T,D,P,E)}catch{}T=D=P=E=null},g=function(v,T,D){try{v(T.ErrorCode,T.ErrorString,D)}catch{}T=D=null},C=function(v,T,D,P,E,M){try{v(T.ErrorCode,T.ErrorString,D,P,E,M)}catch{}T=D=P=E=M=null};s._asyncSaveImage=function(v,T,D,P,E){var M=this,O=e.isString(D)?D.toLowerCase():"",R=function(ce,q,he){var ie=v;if(h.isString(ie)&&""!=ie?(ie=h.replaceAll(ie,"\\\\","_"),ie=h.replaceAll(ie,":","_")):ie="img"+h.getRandom()+"."+O,!N&&e.isString(ce)){var J=["png"==q?"data:image/png;base64,":"jpg"==q?"data:image/jpeg;base64,":"tiff"==q||"tif"==q?"data:image/tif;base64,":"pdf"==q?"data:application/pdf;base64,":"bmp"==q?"data:image/bmp;base64,":"jp2"==q?"data:image/jp2;base64,":"data:application/octet-stream;base64,",ce].join("");h.MobileFuns.saveLocal(J,ie,O)}else h.MobileFuns.saveLocal(ce,ie,O);f.refreshImageAfterInvokeFun(M,T),e.isFunction(P)&&setTimeout(P,30)},F=function(){e.isFunction(E)&&E(M.ErrorCode,M.ErrorString)},B=window,b=w.navInfo,N=!0;if((b.biPad||b.biPhone)&&!(B.requestFileSystem||B.webkitRequestFileSystem||B.mozRequestFileSystem)&&(b.bSafari&&parseFloat(b.strBrowserVersion)<13||!b.bSafari)){N=!1;var ne;ne="png"==O?w.DWT.EnumDWT_ImageType.IT_PNG:"jpg"==O?w.DWT.EnumDWT_ImageType.IT_JPG:"tiff"==O||"tif"==O?w.DWT.EnumDWT_ImageType.IT_TIF:"pdf"==O?w.DWT.EnumDWT_ImageType.IT_PDF:"bmp"==O?w.DWT.EnumDWT_ImageType.IT_BMP:"jp2"==O?w.DWT.EnumDWT_ImageType.IT_J2K:w.DWT.EnumDWT_ImageType.IT_PNG;var Ie=[];return e.isArray(T)&&e.each(T,function(ce){var q=M._ImgManager.convertClientIndexToServerId(ce);-1!=q&&Ie.push(q)}),M.__innerConvertToBase64ByMobile(v,Ie,ne,1,function(ce){var q=ce&&ce.result;if(e.isArray(q)&&3==q.length)return R(q[0],q[1])},F)}return M._innerSendToMobile("SaveImage",w.Lib.MobileFuns.makeParams(v,T,O,1,N),0,R,F)},s.SaveAllAsMultiPageTIFF=function(v,T,D){var P=this;if(P._resetErr(),!P._isValid())return!1;if(!e.License.checkProductKey(P,{Core:!0})&&!e.License.checkProductKey(P,{Webcam:!0},!0))return e.isFunction(D)&&D(P.ErrorCode,P.ErrorString),!1;if(!a(P,D))return!1;var E=[],M=f.replaceLocalFilename(v);if(P._isMobileMode()){if(!M||""==M)return e.Errors.InvalidFile(P),e.isFunction(D)&&g(D,P),!1;for(var O=[],R=0;R<P.HowManyImagesInBuffer;R++)O.push(R);return P._asyncSaveImage(v,O,"tiff",T,D)}return I(P,E),P.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",f.makeParams(M,E.join(",")),T,D)},s.SaveAllAsPDF=function(v,T,D){var P=this;if(P._resetErr(),!P._isValid())return!1;if(!e.License.checkProductKey(P,{Core:!0})&&!e.License.checkProductKey(P,{Webcam:!0},!0))return e.isFunction(D)&&D(P.ErrorCode,P.ErrorString),!1;if(!a(P,D))return!1;var E=[],M=f.replaceLocalFilename(v);if(P._isMobileMode()){if(!M||""==M)return e.Errors.InvalidFile(P),e.isFunction(D)&&g(D,P),!1;for(var O=[],R=0;R<P.HowManyImagesInBuffer;R++)O.push(R);return P._asyncSaveImage(v,O,"pdf",T,D)}return I(P,E),P.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",f.makeParams(M,E.join(",")),T,D)},s.SaveAsBMP=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("SaveAsBMP",P);if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;var O,M=f.replaceLocalFilename(v);return!!o(E,T,P)&&(-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsBMP",f.makeParams(M,O),D,P))},s.SaveAsJPEG=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;if(!o(E,T,P))return!1;var O,M=f.replaceLocalFilename(v);return E._isMobileMode()?M&&""!=M?E._asyncSaveImage(v,[T],"jpg",D,P):(e.Errors.InvalidFile(E),e.isFunction(P)&&g(P,E),!1):-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsJPEG",f.makeParams(M,O),D,P)},s.SaveAsPDF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;if(!o(E,T,P))return!1;var O,M=f.replaceLocalFilename(v);return E._isMobileMode()?M&&""!=M?E._asyncSaveImage(v,[T],"pdf",D,P):(e.Errors.InvalidFile(E),e.isFunction(P)&&g(P,E),!1):-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsPDF",f.makeParams(M,O),D,P)},s.SaveAsPNG=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;if(!o(E,T,P))return!1;var O,M=f.replaceLocalFilename(v);return E._isMobileMode()?M&&""!=M?E._asyncSaveImage(v,[T],"png",D,P):(e.Errors.InvalidFile(E),e.isFunction(P)&&g(P,E),!1):-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsPNG",f.makeParams(M,O),D,P)},s.SaveAsTIFF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;if(!o(E,T,P))return!1;var O,M=f.replaceLocalFilename(v);return E._isMobileMode()?M&&""!=M?E._asyncSaveImage(v,[T],"tiff",D,P):(e.Errors.InvalidFile(E),e.isFunction(P)&&g(P,E),!1):-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsTIFF",f.makeParams(M,O),D,P)},s.SaveAsGIF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return e.Errors.HTML5NotSupport(E),e.isFunction(P)&&g(P,E),i;if(!e.License.checkProductKey(E,{Core:!0})&&!e.License.checkProductKey(E,{Webcam:!0},!0))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;var O,M=f.replaceLocalFilename(v);return!!o(E,T,P)&&(-1==(O=E._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(E),e.isFunction(P)&&g(P,E),!1):E.__innerSaveImage("SaveAsGIF",f.makeParams(M,O),D,P))},s.SaveSelectedImagesAsMultiPagePDF=function(v,T,D){var P=this;if(P._resetErr(),!P._isValid())return!1;if(!e.License.checkProductKey(P,{Core:!0})&&!e.License.checkProductKey(P,{Webcam:!0},!0))return e.isFunction(D)&&D(P.ErrorCode,P.ErrorString),!1;var E=f.replaceLocalFilename(v);if(P._isMobileMode()){if(!E||""==E)return e.Errors.InvalidFile(P),e.isFunction(D)&&g(D,P),!1;var M=m(P);return P._asyncSaveImage(v,M,"pdf",T,D)}var O=l(P);return P.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",f.makeParams(E,O.join(",")),T,D)},s.SaveSelectedImagesAsMultiPageTIFF=function(v,T,D){var P=this;if(P._resetErr(),!P._isValid())return!1;if(!e.License.checkProductKey(P,{Core:!0})&&!e.License.checkProductKey(P,{Webcam:!0},!0))return e.isFunction(D)&&D(P.ErrorCode,P.ErrorString),!1;var E=f.replaceLocalFilename(v);if(P._isMobileMode()){if(!E||""==E)return e.Errors.InvalidFile(P),e.isFunction(D)&&g(D,P),!1;var M=m(P);return P._asyncSaveImage(v,M,"tiff",T,D)}var O=l(P);return P.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",f.makeParams(E,O.join(",")),T,D)},s.SaveSelectedImagesToBase64Binary=function(v,T){var D=this;if(D._resetErr(),!D._isValid())return!1;if(!e.License.checkProductKey(D,{Core:!0})&&!e.License.checkProductKey(D,{Webcam:!0},!0))return e.isFunction(T)&&T(D.ErrorCode,D.ErrorString),!1;if(D._isMobileMode())return D._mobileNotSupport("SaveSelectedImagesToBase64Binary",T);var P=l(D);return e.isFunction(v)?D._innerSend("SaveSelectedImagesToBase64Binary",f.makeParams(P.join(",")),!0,v,T):D._innerFun("SaveSelectedImagesToBase64Binary",f.makeParams(P.join(",")))},s.ShowFileDialog=function(v,T,D,P,E,M,O,R){var F=this;if(F._resetErr(),!F._isValid())return!1;if(F._isMobileMode())return F._mobileNotSupport("ShowFileDialog");var b,B=f.replaceLocalFilename(E);return b=F.__GetLoadEventsNum(),F._innerSend("ShowFileDialog",f.makeParams(v,T,D,P,B,M,O,R,b),!0)},s.FTPDownload=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPDownload",P);if(!v)return e.Errors.InvalidParameter(E),e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;var M=e.html5.Funs.getImageType(T);return E.__innerFTPDownload("FTPDownload",f.makeParams(v,T),M,D,P)},s.FTPDownloadEx=function(v,T,D,P,E){var M=this;return M._resetErr(),!!M._isValid()&&(M._isMobileMode()?M._mobileNotSupport("FTPDownloadEx",E):v?M.__innerFTPDownload("FTPDownloadEx",f.makeParams(v,T,D),D,P,E):(e.Errors.InvalidParameter(M),e.isFunction(E)&&E(M.ErrorCode,M.ErrorString),!1))},s.FTPUpload=function(v,T,D,P,E){var M=this;if(M._resetErr(),!M._isValid())return!1;if(M._isMobileMode())return M._mobileNotSupport("FTPUpload",E);var O=M._ImgManager.convertClientIndexToServerId(T);return!!o(M,T,E)&&(-1==O?(e.Errors.IndexOutOfRange(M),e.isFunction(E)&&g(E,M),!1):M.__innerFTPUpload("FTPUpload",f.makeParams(v,O,D),P,E))},s.FTPUploadEx=function(v,T,D,P,E,M){var R,O=this;return O._resetErr(),!!O._isValid()&&(O._isMobileMode()?O._mobileNotSupport("FTPUploadEx",M):!!o(O,T,M)&&(-1==(R=O._ImgManager.convertClientIndexToServerId(T))?(e.Errors.IndexOutOfRange(O),e.isFunction(M)&&g(M,O),!1):O.__innerFTPUpload("FTPUploadEx",f.makeParams(v,R,D,P),E,M)))},s.FTPUploadAllAsMultiPageTIFF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",P);var M=[];return I(E,M),this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",f.makeParams(v,T,M.join(",")),D,P)},s.FTPUploadAllAsPDF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAllAsPDF",P);var M=[];return I(E,M),E.__innerFTPUpload("FTPUploadAsMultiPagePDF",f.makeParams(v,T,M.join(",")),D,P)},s.FTPUploadAsMultiPagePDF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAsMultiPagePDF",P);var M=l(E);return E.__innerFTPUpload("FTPUploadAsMultiPagePDF",f.makeParams(v,T,M.join(",")),D,P)},s.FTPUploadAsMultiPageTIFF=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;if(E._isMobileMode())return E._mobileNotSupport("FTPUploadAsMultiPageTIFF",P);var M=l(E);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",f.makeParams(v,T,M.join(",")),D,P)},s.HTTPDownload=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return e.Promise.reject({code:E.ErrorCode,message:E.ErrorString});var M=f.getImageType(T);return E.HTTPDownloadThroughGet(v,T,M,D,P)},d.prototype.HTTPDownloadEx=function(v,T,D,P,E){var M=this;return M._resetErr(),M._isValid()?M._isMobileMode()?M._mobileNotSupport("HTTPDownloadEx",E):M.HTTPDownloadThroughGet(v,T,D,P,E):e.Promise.reject({code:M.ErrorCode,message:M.ErrorString})},s.HTTPDownloadDirectly=function(v,T,D,P,E){var M=this;if(M._resetErr(),!M._isValid())return!1;if(!e.License.checkProductKey(M,{Core:!0}))return e.isFunction(E)&&E(M.ErrorCode,M.ErrorString),!1;if(M._isMobileMode())return M._mobileNotSupport("HTTPDownloadDirectly",E);var F,b,O=_.GetHttpHeadersAndClear(M),R=f.combineUrl(M,v,T);if(!1===R)return e.Errors.ParameterCannotEmpty(M),!1;if(!D||""==D)return e.Errors.InvalidLocalFilename(M,"HTTPDownloadDirectly"),e.isFunction(E)&&g(E,M),!1;if(F=e.html5.Funs.getImageType(D),f.isServerInvalid(M))return e.isFunction(E)&&g(E,M),!1;if(!e.License.checkPDFProductKeyWhenNeeds(M,F))return e.isFunction(E)&&E(M._errorCode,M._errorString),!1;e.cancelFrome=2,b=f.replaceLocalFilename(D),e.showProgress(M,"HTTPDownloadDirectly",!0);var N=!0;return M._OnPercentDone([0,-1,w.MSG.Downloading,"http"]),e.isFunction(P)||(N=!1),f.loadHttpBlob(M,"get",R,N,function(ne){return M._OnPercentDone([0,-1,w.MSG.Loading]),M.__LoadImageFromBytes(ne,3,b,N,P,E)},function(){return e.closeProgress("HTTPDownloadDirectly"),e.isFunction(E)&&g(E,M),!1},function(ne){var Ie=0===ne.total?100:Math.round(100*ne.loaded/ne.total);[ne.loaded," / ",ne.total].join(""),M._OnPercentDone([0,Ie,"","http"])},O)},s.HTTPUploadThroughPostDirectly=function(v,T,D,P,E,M){var O=this;if(O._resetErr(),!O._isValid())return!1;if(O._isMobileMode())return O._mobileNotSupport("HTTPUploadThroughPostDirectly",M);var R=f.combineUrl(O,v,D),F=function(){e.isFunction(M)&&g(M,O,O.__HTTPPostResponseString)};return O.__HTTPPostResponseString="",""===v?(e.Errors.HttpServerCannotEmpty(O),F(),!1):O._innerUploadDirectly(R,T,P,!0,!1,0,!0,!1,E,F)},s._innerUploadDirectly=function(v,T,D,P,E,M,O,R,F,B){var ne,b=this,A=_.GetHttpHeadersAndClear(b),N="HTTPUploadThroughPostDirectly",Y=!0;if(!1===v||""===v)return e.Errors.ParameterCannotEmpty(b),e.isFunction(B)&&B(b.ErrorCode,b.ErrorString),!1;if(e.isFunction(F)||(Y=!1),!e.License.checkProductKey(b,{Core:!0}))return e.isFunction(B)&&B(b.ErrorCode,b.ErrorString),!1;e.cancelFrome=1;var _e=function(){return e.needShowTwiceShowDialog=!1,P&&e.closeProgress(N),e.isFunction(B)&&B(b.ErrorCode,b.ErrorString),!1};return e.needShowTwiceShowDialog=!0,P&&e.showProgress(b,N,!1),(ne=f.replaceLocalFilename(T))&&""!=ne?R&&R.bCancel?(R.st=2,_e()):b.__SaveLocalFileToBytes(ne,Y,E,function(ce){return e.needShowTwiceShowDialog=!1,R&&R.bCancel?(R.st=2,_e()):ce&&(e.dlgRef>0||0==b.__IfShowCancelDialogWhenImageTransfer||0==Y||!1===P)?(ce instanceof File?ce.fileName=D:ce.name=D,f.setBtnCancelVisibleForProgress(b,!0),f.httpPostUpload(b,v,ce,Y,0,A,!0,M,O,R,function(q){P&&e.closeProgress(N),e.isFunction(F)&&p(F,q)},_e)):(_e(),!1)},_e):(e.Errors.InvalidFile(b),_e(),!1)},s._innerUploadFilesDirectly=function(v,T,D,P,E,M,O,R,F){var ne,B=this,b=_.GetHttpHeadersAndClear(B),A="HTTPUploadThroughPostDirectly",N=!0,Y=[];if(!1===v||""===v)return e.Errors.ParameterCannotEmpty(B),e.isFunction(F)&&F(B.ErrorCode,B.ErrorString,T),!1;if(e.isFunction(R)||(N=!1),!e.License.checkProductKey(B,{Core:!0}))return e.isFunction(F)&&F(B.ErrorCode,B.ErrorString,T),!1;e.cancelFrome=1;var Ie=function(){return e.needShowTwiceShowDialog=!1,P&&e.closeProgress(A),e.isFunction(F)&&F(T),!1};e.needShowTwiceShowDialog=!0,P&&e.showProgress(B,A,!1),e.each(T,function(he){var ie=f.replaceLocalFilename(he);if(!ie||""==ie)return e.Errors.InvalidFile(B),Ie(),!1;Y.push(ie)});var _e=[],ce=Y.length,q=0;return e.each(Y,function(he,ie){ne=B.__SaveLocalFileToBytes(he,N,E,function(V){if(e.needShowTwiceShowDialog=!1,!V||!(e.dlgRef>0||0==B.__IfShowCancelDialogWhenImageTransfer||0==N||!1===P))return P&&e.closeProgress(A),e.isFunction(Ie)&&Ie(),!1;var J=f.cformat(D,ie+1);return V instanceof File?V.fileName=J:V.name=J,_e[ie]=V,++q==ce?(f.setBtnCancelVisibleForProgress(B,!0),f.httpPostUploadFiles(B,v,_e,N,0,b,P,M,O,function(te){P&&e.closeProgress(A),e.isFunction(R)&&p(R,te)},function(){P&&e.closeProgress(A),e.isFunction(Ie)&&Ie()})):void 0},function(){P&&e.closeProgress(A),e.isFunction(Ie)&&Ie()})}),ne},s.HTTPUploadThroughPost=function(v,T,D,P,E,M,O){var R=this;if(R._resetErr(),!R._isValid())return!1;if(R._isMobileMode())return R._mobileNotSupport("HTTPUploadThroughPost",M);var F=f.getImageType(P),B=arguments,b=!1,A=function(N){return e.isFunction(M)&&C(M,R,R.__HTTPPostResponseString,N,B),!1};return e.isString(P)&&""!=P?(E&&e.isFunction(E)&&(b=function(N,Y){return p(E,R.__HTTPPostResponseString,Y,B),!0}),!!c(R,T,F,A)&&R.innerHTTPUploadPost(v,T,D,P,F,b,A,O)):(e.Errors.UploadFileCannotEmpty(R),A())},s.HTTPUploadThroughPostEx=function(v,T,D,P,E,M,O,R){var F=this;if(F._resetErr(),!F._isValid())return!1;if(F._isMobileMode())return F._mobileNotSupport("HTTPUploadThroughPostEx",O);var B=arguments,b=!1,A=function(N){return e.isFunction(O)&&C(O,F,F.__HTTPPostResponseString,N,B),!1};return e.isString(P)&&""!=P?(M&&e.isFunction(M)&&(b=function(N,Y){return p(M,F.__HTTPPostResponseString,Y,B),!0}),!!c(F,T,E,A)&&F.innerHTTPUploadPost(v,T,D,P,E,b,A,R)):(e.Errors.UploadFileCannotEmpty(F),A())},s.innerHTTPUploadPost=function(v,T,D,P,E,M,O,R){var ce,F=this,B="HTTPUploadThroughPostEx",b=f.combineUrl(F,v,D),A=!0,N=!1,ne=[],Ie=function(te){return e.isFunction(O)&&O(te),!1};if(F.__HTTPPostResponseString="",e.isNumber(T)){if(T<-2)return e.Errors.IndexOutOfRange(F),Ie(T)}else if(!e.isArray(T))return e.Errors.IndexOutOfRange(F),Ie(T);if(!e.isString(P)||""==P)return e.Errors.UploadFileCannotEmpty(F),Ie();if(e.isUndefined(E))return e.Errors.InvalidImageType(F),Ie(T);if(E==w.DWT.EnumDWT_ImageType.IT_BMP||E==w.DWT.EnumDWT_ImageType.IT_JPG||E==w.DWT.EnumDWT_ImageType.IT_PNG||E==w.DWT.EnumDWT_ImageType.IT_J2K){if(-1==T&&F._ImgManager.count()>1||e.isArray(T)&&T.length>1)return e.Errors.UploadIndexMoreThanOne(F),Ie(T);e.isArray(T)?ne.push(T[0]):ne.push(-1==T?0:T)}else{if(E!=w.DWT.EnumDWT_ImageType.IT_TIF&&E!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(F),Ie(T);if(-1==T){if(0==F._ImgManager.count())return e.Errors.NoImage(F),Ie();for(ce=0;ce<F._ImgManager.count();ce++)ne.push(ce)}else if(-2==T)ne=F._ImgManager.getSelectedClientIndexArray();else if(e.isArray(T))for(ce=0;ce<T.length;ce++)ne.push(T[ce]);else ne.push(T)}if(F._isMobileMode()?A=!0:e.isFunction(M)||(A=!1),""===v)return e.Errors.HttpServerCannotEmpty(F),Ie(ne);if(e.isUndefined(b)||""===b)return e.Errors.ParameterCannotEmpty(F),Ie(ne);if(!e.isString(b))return e.Errors.InvalidUrl(F),Ie(ne);if(0!=b.indexOf("http://")&&0!=b.indexOf("https://")&&(b=e.detect.ssl?"https://"+b:"http://"+b),!F._isMobileMode()&&f.isServerInvalid(F)||!F._checkIndices(ne)&&-1!=ne)return Ie(ne);var he=[];if(e.isArray(ne)&&e.each(ne,function(te){var oe=F._ImgManager.convertClientIndexToServerId(te);-1!=oe&&he.push(oe)}),F._resetErr(),!F._isValid())return!1;if(A)return e._asyncUploadCmd({bOnlyUploadForm:i,method:"HTTPUploadThroughPostEx",_this:F,url:b,serverIds:he,enumImageType:E,saveSetup:!1,fileName:P,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,dataFormat:w.DWT.EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:M,asyncFailureFunc:Ie}),!0;e.cancelFrome=1;var ie=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(B),Ie(ne),!1};e.needShowTwiceShowDialog=!0,e.showProgress(F,B,!1);var V=_.GetHttpHeadersAndClear(F);return F._OnPercentDone([0,-1,w.MSG.Encoding,"http"]),F.__innerConvertToBlob(E,he,!1,A,4,function(te,oe,Ee){if(e.needShowTwiceShowDialog=!1,te&&(e.dlgRef>0||0==F.__IfShowCancelDialogWhenImageTransfer||0==A)){var ge=F.MaxUploadImageSize,G=w.DWT;return te.size>ge&&-1!=ge?(e.Errors.UploadExceededMaxSize(F),ie()):(G.IfAddMD5InUploadHeader&&oe&&""!=oe&&(V["dwt-md5"]=oe),te instanceof File?te.fileName=P:te.name=P,f.setBtnCancelVisibleForProgress(F,!0),f.httpPostUpload(F,b,te,A,0,V,!0,0,!0,!1,function(H){return e.closeProgress(B),N=!0,!0},ie))}return ie()},ie),N},s._checkIndices=function(v){var D,P,T=this;if(!e.isArray(v))return e.Errors.IndicesNotArray(T),!1;if(0==v.length)return e.Errors.IndicesCannotEmpty(T),!1;if(w.DWT.ConnectWithSocket)return!0;for(D=T._ImgManager.count(),P=0;P<v.length;P++){var E=v[P];if(e.isUndefined(E)||null===E)return e.Errors.IndexNullOrUndefined(T),!1;if(E=parseInt(E),isNaN(E))return e.Errors.InvalidIndex(T),!1;if(E<0||E>=D)return e.Errors.IndicesOutOfRange(T),!1}return!0},s.SetUploadSegment=function(v,T){var D=this;return D._resetErr(),!!D._isValid()&&(D._isMobileMode()?D._mobileNotSupport("SetUploadSegment"):!e.isNumber(v)||v<0?(e.Errors.InvalidSegmentUploadThreshold(D),!1):!e.isNumber(T)||T<=0?(e.Errors.InvalidModuleSize(D),!1):(D._segementUploadThreshold=1024*v*1024,D._moduleSize=1024*T,!0))},s.HTTPUpload=function(v,T,D,P,E,M,O){var R=this;if(R._resetErr(),!R._isValid())return!1;if(e.isUndefined(v))return e.Errors.InvalidParameter(R),e.isFunction(O)&&O(R.ErrorCode,R.ErrorString),!1;var F,B,b,A=arguments;if(arguments.length<=3)B=!!e.isFunction(T)&&function(){T(R.__HTTPPostResponseString,v,A)},F={bOnlyUploadForm:u,_this:R,url:v,asyncSuccessFunc:B,asyncFailureFunc:b=function(){e.isFunction(D)&&C(D,R,R.__HTTPPostResponseString,v,A)}};else{var N,Y=[],ne=!1;if(e.isFunction(E)?(N="RemoteFile",B=function(Ie,_e){E(R.__HTTPPostResponseString,_e,A)},b=function(Ie){e.isFunction(M)&&C(M,R,R.__HTTPPostResponseString,Ie,A)}):(N=e.isString(E)?E:"RemoteFile",B=!!e.isFunction(M)&&function(Ie,_e){p(M,R.__HTTPPostResponseString,_e,A)},b=function(Ie){e.isFunction(O)&&C(O,R,R.__HTTPPostResponseString,Ie,A)}),!R._checkIndices(T))return b(T),!1;if(e.isArray(T)&&e.each(T,function(Ie){var _e=R._ImgManager.convertClientIndexToServerId(Ie);-1!=_e&&Y.push(_e)}),0==Y.length)return e.Errors.InvalidIndex(R),b(T),!1;if(e.isUndefined(D))return e.Errors.InvalidImageType(R),b(T),!1;if(D==w.DWT.EnumDWT_ImageType.IT_BMP||D==w.DWT.EnumDWT_ImageType.IT_JPG||D==w.DWT.EnumDWT_ImageType.IT_PNG){if(Y.length>1)return e.Errors.UploadIndexMoreThanOne(R),b(T),!1}else if(D!=w.DWT.EnumDWT_ImageType.IT_TIF&&D!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(R),b(T),!1;if(e.isUndefined(P)||P!=w.DWT.EnumDWT_UploadDataFormat.Binary&&P!=w.DWT.EnumDWT_UploadDataFormat.Base64)return e.Errors.InvalidDataFormat(R),b(T),!1;F={bOnlyUploadForm:i,method:"HTTPUpload",_this:R,url:v,serverIds:Y,enumImageType:D,saveSetup:ne,dataFormat:P,fileName:N,retry:0,bOnlyEmptyIsOK:!0,objUploadFileStatus:!1,asyncSuccessFunc:B,asyncFailureFunc:b}}return e._asyncUploadCmd(F),!0},s._innerHTTPUpload=function(v,T,D,P,E,M,O,R,F,B,b){var oe,A=this,N=parseInt(D),Y=parseInt(P),ne=E,Ie="HTTPUpload",_e=v,q=!1,he=A._moduleSize,ie=A._segementUploadThreshold;if(A.__HTTPPostResponseString="",e.isUndefined(D))return e.Errors.InvalidImageType(A),e.isFunction(b)&&b(),!1;e.cancelFrome=1;var Ee,ge=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(Ie),e.isFunction(b)&&b(),!1};if(oe=function(H){var ee=0===H.total?100:Math.round(100*H.loaded/H.total);[H.loaded," / ",H.total].join(""),A._OnPercentDone([0,ee,"","http",ne])},ne=f.addImageFileExt(ne,N),e.needShowTwiceShowDialog=!0,e.showProgress(A,Ie,!1),!A._isMobileMode()&&f.isServerInvalid(A))return ge();if(Y==w.DWT.EnumDWT_UploadDataFormat.Binary){if(F&&F.bCancel)return F.st=2,ge();A._OnPercentDone([0,-1,w.MSG.Encoding,"http"]),q=A.__innerConvertToBlob(N,T,M,!0,4,function(H,ee,ye){if(Ee=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(Ie),e.isFunction(B)&&p(B,H),!0},F&&F.bCancel)return F.st=2,ge();if(!H||H.size<=0)return e.Errors.UploadFileCannotEmpty(A),ge();var Z=A.MaxUploadImageSize;if(H.size>Z&&-1!=Z)return e.Errors.UploadExceededMaxSize(A),ge();if(0!=A._errorCode)return ge();if(ie>0&&H.size>ie){var le=_.GetHttpHeadersAndClear(A);w.DWT.IfAddMD5InUploadHeader&&ee&&""!=ee&&(le["dwt-md5"]=ee),A._OnPercentDone([0,-1,w.MSG.Uploading,"http",ne]),q=_.UploadBinary(A,_e,N,H,ne,le,0,he,oe,O,R,F,Ee,ge)}else q=A.__innnerHTTPUploadBinaryFull(_e,ee,H,N,ne,O,R,F,Ee,ge)},ge)}else if(Y==w.DWT.EnumDWT_UploadDataFormat.Base64){var U;q=A._convertToBase64ByServerIds(T,N,M,4,function(H){if(!H||H.getLength()<=0)return e.Errors.UploadFileCannotEmpty(A),ge();if(Ee=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(Ie),e.isFunction(B)&&p(B,H),!0},ie>0&&H.getLength()>ie){var ye=_.GetHttpHeadersAndClear(A),Z=w.DWT;U=H.getMD5(),Z.IfAddMD5InUploadHeader&&(ye["dwt-md5"]=U),A._OnPercentDone([0,-1,w.MSG.Uploading,"http"]),_.UploadBase64(A,_e,N,H,ne,ye,0,he,oe,Ee,ge)}else{var Q;if(U=H.getMD5(),!(Q=H.getData(0,H.getLength()))||""==Q)return e.Errors.UploadFileCannotEmpty(A),ge();A.__innnerHTTPUploadBase64Full(_e,U,Q,N,ne,O,R,Ee,ge)}},ge)}return q},s._innerFormFieldHTTPUpload=function(v,T,D){var E,P=this,M="HTTPUpload",O=v;if(P.__HTTPPostResponseString="",E=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(M),e.isFunction(D)&&g(D,P,P.__HTTPPostResponseString),!1},e.isUndefined(O)||""===O)return e.Errors.ParameterCannotEmpty(P),E();if(!e.isString(O))return e.Errors.InvalidUrl(P),E();0!=O.indexOf("http://")&&0!=O.indexOf("https://")&&(O=e.detect.ssl?"https://"+O:"http://"+O),P.__HTTPPostResponseString="",e.cancelFrome=1,e.showProgress(P,M,!1),e.needShowTwiceShowDialog=!0;var B=_.GetHttpHeadersAndClear(P);return P._OnPercentDone([0,-1,w.MSG.Uploading,"http"]),f.httpUploadByBIO(P,O,i,0,!0,B,!0,0,!0,!1,function(A){e.needShowTwiceShowDialog=!1,e.closeProgress(M),e.isFunction(T)&&p(T,A)},E)};var _={UploadBinary:function(v,T,D,P,E,M,O,R,F,B,b,A,N,Y){var ne,Ie,q,ce=P.size;return(ne=ce-O)>0?(ne>=R?(ne-=R,Ie=R):(Ie=ne,ne=0),(q=0==O&&Ie==ce?P:P.slice(O,O+Ie))?e.dlgRef>0||0==v.__IfShowCancelDialogWhenImageTransfer?(q.name=E,f.setBtnCancelVisibleForProgress(v,!0),M["Content-Range"]=["bytes ",O,"-",O+q.size-1,"/",ce].join(""),F({total:ce,loaded:O}),f.httpPostUpload(v,T,q,!0,0,M,!1,B,b,A,function(he){0==ne?(e.needShowTwiceShowDialog=!1,F({total:ce,loaded:ce}),e.isFunction(N)&&p(N,he)):(O+=Ie,setTimeout(function(){e.cancelFrome=1,_.UploadBinary(v,T,D,P,E,M,O,R,F,B,b,A,N,Y)},100))},Y),!0):(e.Errors.UploadError(v,!0),Y()):(e.Errors.UploadFileCannotEmpty(v),Y())):(e.needShowTwiceShowDialog=!1,e.closeProgress("HttpUpload"),e.isFunction(N)&&N(""),!0)},UploadBase64:function(v,T,D,P,E,M,O,R,F,B,b){var Y,ne,A=P.getLength();if((Y=A-O)>0){Y>=R?(Y-=R,ne=R):(ne=Y,Y=0);var _e=P.getData(O,R);return _e&&""!=_e?e.dlgRef>0||0==v.__IfShowCancelDialogWhenImageTransfer?(f.setBtnCancelVisibleForProgress(v,!0),M["Content-Range"]=["bytes ",O,"-",O+ne-1,"/",A].join(""),F({total:A,loaded:O}),f.httpPostUploadString(v,T,_e,E,0,M,!1,0,!0,function(ce){0==Y?(e.needShowTwiceShowDialog=!1,F({total:A,loaded:A}),e.isFunction(B)&&p(B,ce)):(O+=ne,setTimeout(function(){e.cancelFrome=1,_.UploadBase64(v,T,D,P,E,M,O,R,F,B,b)},100))},b),!0):(e.Errors.UploadError(v,!0),b()):(e.Errors.UploadFileCannotEmpty(v),b())}return e.needShowTwiceShowDialog=!1,e.closeProgress("HttpUpload"),e.isFunction(B)&&B(""),!0},GetHttpHeadersAndClear:function(v){var T=v.__httpHeaderMap;return v.__httpHeaderMap={},T||(T=v.__httpHeaderMap),T}};s.__innnerHTTPUploadBinaryFull=function(v,T,D,P,E,M,O,R,F,B){var b=this,A=_.GetHttpHeadersAndClear(b),Y=E,ne=v;return w.DWT.IfAddMD5InUploadHeader&&T&&""!=T&&(A["dwt-md5"]=T),e.dlgRef>0||0==b.__IfShowCancelDialogWhenImageTransfer?(D instanceof File?D.fileName=Y:D.name=Y,f.setBtnCancelVisibleForProgress(b,!0),f.httpPostUpload(b,ne,D,!0,0,A,!0,M,O,R,function(te){e.isFunction(F)&&p(F,te)},B)):(e.Errors.UploadError(b,!0),B())},s.__innnerHTTPUploadBase64Full=function(v,T,D,P,E,M,O,R,F){var B=this,b=_.GetHttpHeadersAndClear(B),N=E,Y=v;return e.dlgRef>0||0==B.__IfShowCancelDialogWhenImageTransfer?(w.DWT.IfAddMD5InUploadHeader&&b&&T&&""!=T&&(b["dwt-md5"]=T),f.setBtnCancelVisibleForProgress(B,!0),f.httpPostUploadString(B,Y,D,N,0,b,!0,M,O,function(V){e.isFunction(R)&&p(R,V)},F)):(e.Errors.UploadError(B,!0),F())},s.ConvertToBase64=function(v,T,D,P){var E=this;if(E._resetErr(),!E._isValid())return!1;var M=[],O=arguments,R=parseInt(T),b=!1;if(!e.License.checkProductKey(E,{Core:!0}))return e.isFunction(P)&&P(E.ErrorCode,E.ErrorString),!1;if(!E._isMobileMode()&&f.isServerInvalid(E)||!E._checkIndices(v))return e.isFunction(P)&&C(P,E,v,T,O),!1;if(R==w.DWT.EnumDWT_ImageType.IT_BMP||R==w.DWT.EnumDWT_ImageType.IT_JPG||R==w.DWT.EnumDWT_ImageType.IT_PNG){if(v.length>1)return e.Errors.ConvertBase64IndexMoreThanOne(E),e.isFunction(P)&&C(P,E,v,T,O),!1}else if(R!=w.DWT.EnumDWT_ImageType.IT_TIF&&R!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(E),e.isFunction(P)&&C(P,E,v,T,O),!1;e.isArray(v)&&e.each(v,function(ne){var Ie=E._ImgManager.convertClientIndexToServerId(ne);-1!=Ie&&M.push(Ie)});var A=function(ne){var Ie=[];return e.isArray(M)&&e.each(M,function(_e){var ce=E._ImgManager.convertServerIdToClientIndex(_e);ce>-1&&Ie.push(ce)}),e.isFunction(D)&&p(D,ne,Ie,T,O),!1},N=function(){var ne=[];return e.isArray(M)&&e.each(M,function(Ie){var _e=E._ImgManager.convertServerIdToClientIndex(Ie);_e>-1&&ne.push(_e)}),e.isFunction(P)&&C(P,E,ne,T,O),!1},Y=3;return E._convertToBase64ByServerIds(M,R,b,Y,A,N)},s._convertToBase64ByServerIds=function(v,T,D,P,E,M){var O=this,R="ConvertToBase64",B=D;e.showProgress(O,R,!1);var b=function(){return e.closeProgress(R),e.isFunction(M)&&M(),!1},A=function(Y){var he,ce=Y&&Y.result,q=[];e.isArray(v)&&e.each(v,function(ie){var V=O._ImgManager.convertServerIdToClientIndex(ie);V>-1&&q.push(V)}),0==O.ErrorCode?ce&&e.isArray(ce)&&3==ce.length?(he=new e.html5.Base64Result(O,ce[1],ce[2],ce[0]),e.closeProgress(R),e.isFunction(E)&&p(E,he)):(e.Errors.ConvertBase64Failed(O),b()):b()};if(O._isMobileMode())return T==w.DWT.EnumDWT_ImageType.IT_BMP?(e.closeProgress(R),O._mobileNotSupport("Convert to bmp",M)):O.__innerConvertToBase64ByMobile("",v,T,P,A,b);(!e.isString(B)||""==B)&&(B="{}");var N=["[",T,',"',v.join(","),'",',B,",1]"].join("");return O._innerFunRaw(R,N,!0,!1,!0,A,b)},s.ClearAllHTTPFormField=function(){var v=this;return v._resetErr(),!!v._isValid()&&(v.httpFormFields={},!0)},s.SetHTTPFormField=function(v,T,D){var P=this;if(P._resetErr(),!P._isValid())return!1;var E=v;return e.isString(E)||(E=""+E),T instanceof Blob&&(T.name=D),P.httpFormFields[E]=T,!0},s.HTTPUploadAllThroughPostAsMultiPageTIFF=function(v,T,D,P,E,M){var O=this;if(O._resetErr(),!O._isValid())return!1;if(O._isMobileMode())return O._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",E);var R=-1,F=2,B=arguments,b=!1,A=function(N){return e.isFunction(E)&&C(E,O,O.__HTTPPostResponseString,N,B),!1};return e.isString(D)&&""!=D?(P&&e.isFunction(P)&&(b=function(N,Y){return p(P,O.__HTTPPostResponseString,Y,B),!0}),O.innerHTTPUploadPost(v,R,T,D,F,b,A,M)):(e.Errors.UploadFileCannotEmpty(O),A())},s.HTTPUploadThroughPostAsMultiPageTIFF=function(v,T,D,P,E,M){var O=this;if(O._resetErr(),!O._isValid())return!1;if(O._isMobileMode())return O._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",E);var R=-2,F=2,B=arguments,b=!1,A=function(N){return e.isFunction(E)&&C(E,O,O.__HTTPPostResponseString,N,B),!1};return e.isString(D)&&""!=D?(P&&e.isFunction(P)&&(b=function(N,Y){return p(P,O.__HTTPPostResponseString,Y,B),!0}),O.innerHTTPUploadPost(v,R,T,D,F,b,A,M)):(e.Errors.UploadFileCannotEmpty(O),A())},s.HTTPUploadAllThroughPostAsPDF=function(v,T,D,P,E,M){var O=this;if(O._resetErr(),!O._isValid())return!1;if(O._isMobileMode())return O._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",E);var R=-1,F=4,B=arguments,b=!1,A=function(N){return e.isFunction(E)&&C(E,O,O.__HTTPPostResponseString,N,B),!1};return e.isString(D)&&""!=D?(P&&e.isFunction(P)&&(b=function(N,Y){return p(P,O.__HTTPPostResponseString,Y,B),!0}),O.innerHTTPUploadPost(v,R,T,D,F,b,A,M)):(e.Errors.UploadFileCannotEmpty(O),A())},s.HTTPUploadThroughPostAsMultiPagePDF=function(v,T,D,P,E,M){var O=this;if(O._resetErr(),!O._isValid())return!1;if(O._isMobileMode())return O._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",E);var R=-2,F=4,B=arguments,b=!1,A=function(N){return e.isFunction(E)&&C(E,O,O.__HTTPPostResponseString,N,B),!1};return e.isString(D)&&""!=D?(P&&e.isFunction(P)&&(b=function(N,Y){return p(P,O.__HTTPPostResponseString,Y,B),!0}),O.innerHTTPUploadPost(v,R,T,D,F,b,A,M)):(e.Errors.UploadFileCannotEmpty(O),A())},s.HTTPDownloadThroughPost=function(v,T,D,P,E,M){var b,O=this,R=_.GetHttpHeadersAndClear(O),F=arguments,B=f.combineUrl(O,v,T);if(B===i)return e.Errors.ParameterCannotEmpty(O),i;if(f.isServerInvalid(O)||!e.License.checkProductKey(O,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(O,D))return e.isFunction(E)&&g(E,O,F),i;e.cancelFrome=2,e.showProgress(O,"HttpDownloadThroughPost",u),b="post";var N=function(ne){var Ie=0===ne.total?100:Math.round(100*ne.loaded/ne.total);[ne.loaded," / ",ne.total].join(""),O._OnPercentDone([0,Ie,"","http"])},Y=u;return O._OnPercentDone([0,-1,w.MSG.Downloading,"http"]),e.isFunction(P)||(Y=i),f.loadHttpBlob(O,b,B,Y,function(ne){O._OnPercentDone([0,-1,w.MSG.Loading]);var _e=D;_e!=w.DWT.EnumDWT_ImageType.IT_BMP&&_e!=w.DWT.EnumDWT_ImageType.IT_JPG&&_e!=w.DWT.EnumDWT_ImageType.IT_TIF&&_e!=w.DWT.EnumDWT_ImageType.IT_PNG&&_e!=w.DWT.EnumDWT_ImageType.IT_PDF&&_e!=w.DWT.EnumDWT_ImageType.IT_J2K&&(_e=-1),O.__LoadImageFromBytes(ne,_e,"",Y,P,E)},function(){e.closeProgress("HttpDownloadThroughPost"),e.isFunction(E)&&g(E,O,F)},N,R)},s.HTTPDownloadThroughGet=function(v,T,D,P,E){var M=this,O=_.GetHttpHeadersAndClear(M),R=f.combineUrl(M,v,T);if(R===i)return e.Errors.ParameterCannotEmpty(M),e.isFunction(E)&&g(E,M),i;if(M._isMobileMode()){if(!e.License.checkProductKey(M,{Core:!0}))return e.isFunction(E)&&g(E,M),i}else if(f.isServerInvalid(M)||!e.License.checkProductKey(M,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(M,D))return e.isFunction(E)&&g(E,M),i;e.cancelFrome=2,e.showProgress(M,"HTTPDownloadThroughGet",u);var b=function(Y){var ne=0===Y.total?100:Math.round(100*Y.loaded/Y.total);[Y.loaded," / ",Y.total].join(""),M._OnPercentDone([0,ne,"","http"])},A=u;M._OnPercentDone([0,-1,w.MSG.Downloading,"http"]),e.isFunction(P)||(A=i);var N=M.GetCurrentFileName();return""==N&&(N=M._ImgManager.getWebViewer().GetDefaultFileName()),M._isMobileMode()?f.loadHttpBlob(M,"get",R,A,function(Y){M._OnPercentDone([0,-1,w.MSG.Loading]),Y.currentFileName=N,M.LoadImageFromBinary(Y,function(){w.Lib.closeProgress(""),e.isFunction(P)&&P()},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&g(E,M)})},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&g(E,M)},b,O):f.loadHttpBlob(M,"get",R,A,function(Y){M._OnPercentDone([0,-1,w.MSG.Loading]);var Ie=D;Ie!=w.DWT.EnumDWT_ImageType.IT_BMP&&Ie!=w.DWT.EnumDWT_ImageType.IT_JPG&&Ie!=w.DWT.EnumDWT_ImageType.IT_TIF&&Ie!=w.DWT.EnumDWT_ImageType.IT_PNG&&Ie!=w.DWT.EnumDWT_ImageType.IT_PDF&&Ie!=w.DWT.EnumDWT_ImageType.IT_J2K&&(Ie=-1),Y.currentFileName=N,M.__LoadImageFromBytes(Y,Ie,"",A,function(){w.Lib.closeProgress(""),e.isFunction(P)&&P()},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&g(E,M)})},function(){e.closeProgress("HTTPDownloadThroughGet"),e.isFunction(E)&&g(E,M)},b,O)},s.HTTPUploadThroughPut=function(v,T,D,P,E){var M=f.getImageType(D);return this.HTTPUploadThroughPutEx(v,T,D,M,P,E)},s.HTTPUploadThroughPutEx=function(v,T,D,P,E,M){var O=this,R=_.GetHttpHeadersAndClear(O),F="HTTPUploadThroughPutEx",B=f.combineUrl(O,v,D),b=!0,A=[];if(!1===B)return e.Errors.ParameterCannotEmpty(O),e.isFunction(M)&&C(M,O,"",[T],D,P),!1;e.isFunction(E)||(b=!1),e.cancelFrome=1;var ne,Y=function(){return e.needShowTwiceShowDialog=!1,e.closeProgress(F),e.isFunction(M)&&C(M,O,O.__HTTPPostResponseString,A,D,P),!1};switch(e.needShowTwiceShowDialog=!0,e.showProgress(O,F,!1),T){case-1:for(var Ie=0;Ie<O._ImgManager.count();Ie++)A.push(Ie);break;case-2:A=O._ImgManager.getSelectedClientIndexArray();break;default:if(A.push(T),!(T>=0))return e.Errors.IndexOutOfRange(O),Y()}if(""===v)return e.Errors.HttpServerCannotEmpty(O),Y();var _e=[];e.isArray(A)&&e.each(A,function(ie){var V=O._ImgManager.convertClientIndexToServerId(ie);-1!=V&&_e.push(V)});var ce=w.DWT;return O._OnPercentDone([0,-1,w.MSG.Encoding,"http"]),O.__innerConvertToBlob(P,_e,!1,b,4,function(ie,V,J){if(ce.IfAddMD5InUploadHeader&&V&&""!=V&&(R["dwt-md5"]=V),e.needShowTwiceShowDialog=!1,ie&&(e.dlgRef>0||0==O.__IfShowCancelDialogWhenImageTransfer||0==b)){var te=O.MaxUploadImageSize;return ie.size>te&&-1!=te?(e.Errors.UploadExceededMaxSize(O),Y()):(ne=function(Ee){var ge=0===Ee.total?100:Math.round(100*Ee.loaded/Ee.total);[Ee.loaded," / ",Ee.total].join(""),O._OnPercentDone([0,ge,"","http"])},O._OnPercentDone([0,-1,w.MSG.Uploading,"http"]),f.setBtnCancelVisibleForProgress(O,!0),f.httpPutImage(O,B,ie,b,function(Ee){if(O.__HTTPPostResponseString=Ee,e.closeProgress(F),e.isFunction(E)){var ge=[];e.isArray(_e)&&e.each(_e,function(Re){var G=O._ImgManager.convertServerIdToClientIndex(Re);G>-1&&ge.push(G)}),p(E,O.__HTTPPostResponseString,ge,D,P)}return!0},Y,ne))}return e.closeProgress(F),!1},Y)},s.HTTPUploadAllThroughPutAsMultiPageTIFF=function(v,T,D,P){return this.HTTPUploadThroughPutEx(v,-1,T,2,D,P)},s.HTTPUploadThroughPutAsMultiPageTIFF=function(v,T,D,P){return this.HTTPUploadThroughPutEx(v,-2,T,2,D,P)},s.HTTPUploadAllThroughPutAsPDF=function(v,T,D,P){return this.HTTPUploadThroughPutEx(v,-1,T,4,D,P)},s.HTTPUploadThroughPutAsMultiPagePDF=function(v,T,D,P){return this.HTTPUploadThroughPutEx(v,-2,T,4,D,P)},s.GetSelectedImagesSize=function(v){var T=this;if(T._resetErr(),!T._isValid())return!1;if(T._isMobileMode())return T._mobileNotSupport("GetSelectedImagesSize");var D=l(T);return T._innerFun("GetSelectedImagesSize",f.makeParams(v,D.join(",")))},s.SetHTTPHeader=function(v,T){var D=this;if(D._resetErr(),!D._isValid())return!1;var E,M,O=v;if(D.__httpHeaderMap||(D.__httpHeaderMap={}),!O||!e.isString(O))return e.isUndefined(O)?e.Errors.HttpHeaderIsUndefined(D):""===O?e.Errors.HttpHeaderIsEmpty(D):null===O?e.Errors.HttpHeaderIsNull(D):e.Errors.HttpHeaderIsInvalid(D),!1;for(E=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],O=O.toLowerCase(),M=0;M<E.length;M++)if(E[M]==O)return e.Errors.HttpHeaderNotAllowed(D),!1;return e.isUndefined(T)||null===T||""===T?(v in D.__httpHeaderMap&&delete D.__httpHeaderMap[v],!0):(e.isNumber(T)&&(T=""+T),D.__httpHeaderMap[v]=T,!0)},e.html5.Base64Result=function(v,T,D,P){var E=this;E._stwain=v,E._md5=D,E._length=T,E._content=P},e.html5.Base64Result.prototype.getLength=function(){return this._length},e.html5.Base64Result.prototype.getMD5=function(){return this._md5},e.html5.Base64Result.prototype.getData=function(v,T){var D=this,P=T;return!e.isNumber(v)||!e.isNumber(T)||v<0||T<=0?"":0==v&&P==D._length?D._content:(v+P>D._length&&(P=D._length-v),D._content.substr(v,P))},s._ConvertToBlob=function(v,T,D,P,E){var M=this,O="ConvertToBlob",R=!0,B=arguments;e.isFunction(P)||(R=!1),e.cancelFrome=0,e.showProgress(M,O,!1);var b=function(){if(e.needShowTwiceShowDialog=!1,e.closeProgress(O),e.isFunction(E)){var N=[];e.isArray(v)&&e.each(v,function(Y){var ne=M._ImgManager.convertServerIdToClientIndex(Y);ne>-1&&N.push(ne)}),C(E,M,N,T,B)}return!1},A=2;return M._OnPercentDone([0,-1,w.MSG.Encoding]),M.__innerConvertToBlob(T,v,D,R,A,function(N,Y,ne){if(!N||N.size<=0)return e.Errors.ConvertBlobIsEmpty(M),b();var Ie=M.MaxUploadImageSize;if(N.size>Ie&&-1!=Ie)return e.Errors.UploadExceededMaxSize(M),b();if(e.needShowTwiceShowDialog=!1,e.closeProgress(O),e.isFunction(P)){var ce=[];e.isArray(v)&&e.each(v,function(q){var he=M._ImgManager.convertServerIdToClientIndex(q);he>-1&&ce.push(he)});try{P(N,ce,B)}catch{}N=null}return!!R||N},b)},s.ConvertToBlob=function(v,T,D,P,E){var M=this;if(M._resetErr(),!M._isValid())return!1;var O=parseInt(T),R=arguments,F=function(N,Y){return e.isFunction(D)&&p(D,N,Y,T,R),N=Y=null,!0},B=function(N){return e.isFunction(P)&&C(P,M,N,T,R),N=null,!1},b=!1;if(!e.License.checkProductKey(M,{Core:!0}))return e.isFunction(P)&&P(M.ErrorCode,M.ErrorString),!1;if(!M._isMobileMode()&&f.isServerInvalid(M)||!M._checkIndices(v))return B(v);if(O==w.DWT.EnumDWT_ImageType.IT_BMP||O==w.DWT.EnumDWT_ImageType.IT_JPG||O==w.DWT.EnumDWT_ImageType.IT_PNG||O==w.DWT.EnumDWT_ImageType.IT_J2K){if(v.length>1)return e.Errors.ConvertBinaryIndexMoreThanOne(M),B(v)}else if(O!=w.DWT.EnumDWT_ImageType.IT_TIF&&O!=w.DWT.EnumDWT_ImageType.IT_PDF)return e.Errors.InvalidImageType(M),B(v);var A=[];return e.isArray(v)&&e.each(v,function(N){var Y=M._ImgManager.convertClientIndexToServerId(N);-1!=Y&&A.push(Y)}),e.isFunction(D)?(M._ConvertToBlob(A,O,b,F,B),!0):M._ConvertToBlob(A,O,b)},e._asyncUploadCmd=function(v){var T=v._this,P=v.url,E=v.asyncSuccessFunc,M=v.asyncFailureFunc;if(!v.bOnlyUploadForm){var O=v.serverIds,R=v.enumImageType,F=v.dataFormat,B=v.fileName,b=v.saveSetup,A=v.retry,N=v.bOnlyEmptyIsOK,Y=v.objUploadFileStatus,ne=function(){if(e.isFunction(M)){var Ie=[];e.isArray(O)&&e.each(O,function(_e){var ce=T._ImgManager.convertServerIdToClientIndex(_e);ce>-1&&Ie.push(ce)});try{M(Ie)}catch{}}return!1};return e.isNumber(A)&&A>0||(A=0),0!=T._errorCode?ne():T._innerHTTPUpload(P,O,R,F,B,b,A,N,Y,function(Ie){if(e.isFunction(E)){var _e=[];e.isArray(O)&&e.each(O,function(ce){var q=T._ImgManager.convertServerIdToClientIndex(ce);q>-1&&_e.push(q)});try{p(E,Ie,_e)}catch{}}return!0},ne)}T._innerFormFieldHTTPUpload(P,function(){if(e.isFunction(E))try{E()}catch{}},function(){if(e.isFunction(M))try{M()}catch{}})},s._asyncUploadFilesCmd=function(v,T,D,P,E,M,O,R,F,B){var b=this,A=parseInt(D),N="HTTPUpload",Y=v,Ie=!1,q=[];b.__HTTPPostResponseString="",e.cancelFrome=1;var he=function(){if(b._bServerPercentDone=!0,e.needShowTwiceShowDialog=!1,M&&e.closeProgress(N),q=null,e.isFunction(B)){var Re=[];e.isArray(T)&&e.each(T,function(G){var k=b._ImgManager.convertServerIdToClientIndex(G);k>-1&&Re.push(k)});try{B(Re)}catch{}}return!1};if(e.needShowTwiceShowDialog=!0,M&&e.showProgress(b,N,!1),f.isServerInvalid(b))return he();var J=T.length,te=0,oe=0,ge="";return b._bServerPercentDone=!1,b._OnPercentDone([0,-1,w.MSG.Encoding,"http"]),e.each(T,function(Re,G){Ie=b.__innerConvertToBlob(A,[Re],E,!0,4,function(k,U,H){if(!k||k.size<=0)return e.Errors.UploadFileCannotEmpty(b),he();var ee=b.MaxUploadImageSize;if(k.size>ee&&-1!=ee)return e.Errors.UploadExceededMaxSize(b),he();var Z=f.cformat(P,G+1);if(oe=(te+1)/J*100,ge=[te+1,"/",J].join(""),b._OnPercentDone([0,oe,ge,"http",Z]),k.name=Z,q.push(k),++te>=J){var le=_.GetHttpHeadersAndClear(b);w.DWT.IfAddMD5InUploadHeader&&U&&""!=U&&(le["dwt-md5"]=U),Ie=f.httpPostUploadFiles(b,Y,q,!0,0,le,M,O,R,function(Te){!function(Re){if(b._bServerPercentDone=!0,e.needShowTwiceShowDialog=!1,M&&e.closeProgress(N),q=null,e.isFunction(F)){var G=[];e.isArray(T)&&e.each(T,function(k){var U=b._ImgManager.convertServerIdToClientIndex(k);U>-1&&G.push(U)}),p(F,Re,G)}}(Te)},he)}},he,[Re,G])}),Ie}}}),w.Ready(function(e,t){var i,r=w.navInfo,h=e.html5,s=h.Funs,u=w.DWT,f={upload:"Uploading...",download:"Downloading...",load:"Processing...",decode:"Processing...",decodeTIFF:"Processing tiff...",decodePDF:"Processing pdf...",encodeTIFF:"Processing tiff...",encodePDF:"Processing pdf...",encode:"Processing..."};!e.product.bHTML5Edition||((i=h.STwain.prototype).RegisterEvent=function(a,o){var c=this;return c._resetErr(),!!c._isValid()&&(c[["__",a].join("")]=o,!0)},i.onEvent=function(a,o){this.RegisterEvent(a,o)},i.on=function(a,o){this.RegisterEvent(a,o)},i.OnRefreshUI=function(a,o,c,l){var m=this;return c&&m._ImgManager.refresh(a,m._ImgManager.count(),!0,l),w.Lib.isFunction(m.__OnRefreshUI)&&m.__OnRefreshUI(m._ImgManager.getCurrentImageIndex(),m._ImgManager.count()),!0},i._OnRemoteScanStatusAsync=function(a){var l,o=this;if(a&&a.length>=2){try{var m=new String(a[1]);l=e.parse(m)}catch(D){e.log(D.message),e.log("parse json failed: "+a[1])}l||(l={sequence:0,screen:[]})}if(l&&l.sequence)if(l.sequence>0&&l.screen&&l.screen.length>0){var p,g,C,_,v;if(g=l.sequence,_=l.wnds,e.isString(v=(p=l.screen[0]).img)&&""!=v&&(C=p.wnd),g&&C){var T=e.one(".ds-img-screen");T&&o._acquireDivEL&&(o._acquireDivEL.evtFun&&(e.removeEventListener(T[0],"mouseup",o._acquireDivEL.evtFun),o._acquireDivEL.evtFun=null),T[0].src=v,o._acquireDivEL.evtFun=function(D){_||(_="0");var P=e.stringify({sequence:g,wnds:_,wnd:C+"",type:2,x:D.offsetX,y:D.offsetY});o._innerSendCmd("SendEventToScannerUI",["[",P,"]"].join(""))},e.addEventListener(T[0],"mouseup",o._acquireDivEL.evtFun))}}else o.__closeRemoteScanUI(!1);return e.isFunction(o.__OnRemoteScanStatusAsync)&&o.__OnRemoteScanStatusAsync(l),!0},i._OnConsumed=function(a){},i._OnBitmapChanged=function(a,o,c){var l=this,m="10"==a[0],p="c2"==a[0],g="0"==a[0]||p||m,C=a[1].split(","),_=a[2],v=a[3],T=l.__maxImagesInBuffer,P=c,B=-1,b=[];if(P||""==(P=l.GetCurrentFileName())&&(P=l._ImgManager.getWebViewer().GetDefaultFileName()),m){if(a.length>5){var A=a[5];b.push(A),l._blts&&(1==_||2==_)&&(w.Lib.isUndef(A.verify)||(B=w.DWT.lgct(A.verify),e.isFunction(l.__OnLtsverify)&&l.__OnLtsverify(B,1,w.DWT.EnumInstance.dwt_browser),w.DWT.lavrf(B,1,w.DWT.EnumInstance.dwt_browser)))}}else if(p)a.length>5&&(b=a[5]),e.isArray(b)||(b=[]);else{var N={};if(a.length>5&&(N.width=a[5]),a.length>6&&(N.height=a[6]),a.length>7&&(N.bitDepth=a[7]),a.length>8&&(N.resolutionX=a[8]),a.length>9&&(N.resolutionY=a[9]),a.length>10&&(B=a[10]),b.push(N),B>-1&&l._blts&&(1==_||2==_)){var Y=w.DWT.lgct(B);e.isFunction(l.__OnLtsverify)&&l.__OnLtsverify(Y,1)}}if(e.log("OnBitmapChanged:"+a),2==_||1==_&&!l.__IfAppendImage)e.each(C,function(he,ie){var te,V=parseInt(he),J=l._ImgManager.getCurrentImageIndex();if((te=ie<b.length&&b[ie]?b[ie]:{}).currentFileName=P,isNaN(V)||V<0)return!0;if(g)l._aryBitmapCache.push(V);else for(var oe=0;oe<l._aryBitmapCache.length;oe++)if(l._aryBitmapCache[oe]==V)return l._aryBitmapCache.splice(oe,1),!0;if(l._ImgManager.exists(V))return!0;l.__insertingIndex>-1&&(J=l.__insertingIndex),-1==J&&(J=0),l._ImgManager.insertBefore(J,T,V,te),l.__insertingIndex>-1&&(l.__insertingIndex=l.__insertingIndex+1)}),e.isFunction(l.__OnRefreshUI)&&l.__OnRefreshUI(l._ImgManager.getCurrentImageIndex(),l._ImgManager.count());else if(1==_&&l.__IfAppendImage)e.each(C,function(he,ie){var J,V=parseInt(he);if(isNaN(V)||V<0)return!0;if((J=ie<b.length&&b[ie]?b[ie]:{}).currentFileName=P,g)l._aryBitmapCache.push(V);else for(var te=0;te<l._aryBitmapCache.length;te++)if(l._aryBitmapCache[te]==V)return l._aryBitmapCache.splice(te,1),!0;if(l._ImgManager.exists(V))return!0;l._ImgManager.append(T,V,J)}),e.isFunction(l.__OnRefreshUI)&&l.__OnRefreshUI(l._ImgManager.getCurrentImageIndex(),l._ImgManager.count());else if(3==_&&g){var ne=!1;1==C.length&&-1==C[0]?ne=!0:1==C.length&&l._ImgManager.count()<=1&&""!=C[0]&&(ne=l._ImgManager.convertClientIndexToServerId(0)==C[0]),ne?l._ImgManager.clear():e.each(C,function(he,ie){var V=parseInt(he);if(isNaN(V)||V<0)return!0;l._ImgManager.removeByServerId(V)}),e.isFunction(l.__OnRefreshUI)&&l.__OnRefreshUI(l._ImgManager.getCurrentImageIndex(),l._ImgManager.count())}else if(4==_)e.each(C,function(he,ie){var J,V=parseInt(he);if(isNaN(V)||V<0)return!0;if((J=ie<b.length&&b[ie]?b[ie]:{}).currentFileName=P,V>=0&&!l.__bLoadingImage){l._isBindViewer()&&(0==l._ImgManager.bImageJustChangedInEditor?l._ImgManager.bImageChangedInViewer=!0:(l._ImgManager.bImageJustChangedInEditor=!1,l._ImgManager.bImageChangedInViewer=!1));var te=l._ImgManager.convertServerIdToClientIndex(V);te>-1&&l.OnRefreshUI(te,l._ImgManager.count(),!0,J)}});else if(5==_&&v>=0&&!l.__bLoadingImage){var Ie;(Ie=0<b.length&&b[0]?b[0]:{}).currentFileName=P,0==l.__IfAppendImage&&l.OnRefreshUI(v,l._ImgManager.count(),!0,Ie),l._ImgManager.refresh(v,l._ImgManager.count(),!1,Ie)}if(e.isFunction(l.__OnBitmapChanged)){if(!m){if(w.navInfo.bFirefox&&!g)return!0;if(!w.navInfo.bFirefox&&g)return!0}var _e=[];e.each(C,function(he){var V,ie=parseInt(he);if(isNaN(ie)||ie<0)return!0;(V=l._ImgManager.convertServerIdToClientIndex(ie))>-1&&_e.push(V)});var ce=l._ImgManager.getCurrentImageIndex(),q=_;1==_&&(q=l.__IfAppendImage?1:2),l.__OnBitmapChanged(_e,q,ce,l._ImgManager.count())}},i._OnPostLoad=function(a,o){var m,p,g,C,c=this;void 0!==o&&void 0!==o.exception&&void 0!==o.description&&(c._errorCode=o.exception,c._errorString=o.description),e.log("OnPostLoad Results:"),p=a[1].split(","),m=e.base64.decode(p[0]),g=e.base64.decode(p[1]),e.log(m),e.log(g),e.log(p[2]),s.autoDiscardBlankImage(c,"On PostLoad"),(C=c._ImgManager.getCurrentImageIndex())>=0&&c.OnRefreshUI(C),e.isFunction(c.__OnPostLoad)&&c.__OnPostLoad(m,g,p[2])},i._OnPostTransfer=function(a){var o=this;e.log("On PostTransfer Results:"+a),s.autoDiscardBlankImage(o,"On PostTransfer"),e.isFunction(o.__OnPostTransfer)&&o.__OnPostTransfer()},i._OnPostTransferAsync=function(a){var o=this;if(e.log("On PostTransfer Async Results:"+a),e.isFunction(o.__OnPostTransferAsync)){var c;if(a&&a.length>=2)try{var m=String(a[1]).replace(/\\/g,"\\\\");(c=e.parse(m)).imageId&&(c.imageId=o.objImageIndexManager.convertServerIdToGuid(c.imageId))}catch{e.log(a)}c||(c={imageId:-1}),o.__OnPostTransferAsync(c)}},i._OnPreAllTransfersAsync=function(a){var o=this;if(e.isFunction(o.__OnPreAllTransfersAsync)){var c={event:"beforeAcquire",result:{}};try{e.isArray(a)&&a.length>1&&(c=e.parse(a[1]))}catch{}setTimeout(function(){o.__OnPreAllTransfersAsync(c)},10)}},i._OnPostAllTransfers=function(a){var o=this;a.length>=2&&0==o._errorCode&&(o._errorCode=a[1],o._errorString=a[2]),e.log("On PostAllTransfers Results:"+a),o.__bLoadingImage=!1,o.__bAcquireImageNow=!1,o.__closeRemoteScanUI(!0),e.isFunction(o.__OnPostAllTransfers)&&o.__OnPostAllTransfers(),e.License.isLTS()&&w.DWT.lcvrf(o)},i._OnResult=function(a){var c=a[1];e.isFunction(this.__OnResult)&&this.__OnResult(c)},i._OnTransferCancelled=function(a){var o=this;o._ImgManager.getCurrentImageIndex(),o._ImgManager.count(),o.__bLoadingImage=!1,o.__bAcquireImageNow=!1,e.isFunction(o.__OnTransferCancelled)&&o.__OnTransferCancelled()},i._OnTransferError=function(a){e.isFunction(this.__OnTransferError)&&this.__OnTransferError()},i._OnSourceUIClose=function(a){var o=this;o.__closeRemoteScanUI(!0),e.isFunction(o.__OnSourceUIClose)&&o.__OnSourceUIClose()},i._OnPreTransfer=function(a){e.isFunction(this.__OnPreTransfer)&&this.__OnPreTransfer()},i._OnPreAllTransfers=function(a){e.isFunction(this.__OnPreAllTransfers)&&this.__OnPreAllTransfers()},i._OnPercentDone=function(a){var l,p,C,_,v,o=this,c=!1,m=w.Lib,I=!1,g=0;if(m.isArray(a)&&a.length>2&&(p=a[0],C=a[2],a.length>3&&(_=a[3]),a.length>4&&(v=a[4]),l=g=a[1],g<0?l=0:g>100&&(l=100),l=Math.floor(l),(1==m.cancelFrome||2==m.cancelFrome||5==m.cancelFrome)&&(I=v)),o._bServerPercentDone||0==p){if((g>0||0==g)&&((1==m.cancelFrome||2==m.cancelFrome)&&"http"==_&&(c=!0),(3==m.cancelFrome||4==m.cancelFrome)&&"ftp"==v&&(c=!0)),0==m.cancelFrome&&1==o.__IfShowProgressBar||0!=m.cancelFrome&&1==o.__IfShowCancelDialogWhenImageTransfer){var O,D=m.one(".dynamsoft-progressBar"),P=m.one(".dynamsoft-status"),E=m.one(".dynamsoft-finalMessage"),M=m.one(".dynamsoft-desc");if(3==m.cancelFrome||4==m.cancelFrome){var R=_;0==R?s.setBtnCancelVisibleForProgress(o,!1):1==R&&s.setBtnCancelVisibleForProgress(o,!0)}if(g<0?(m.progressMessage=C,O=m.progressMessage):O=""!=C&&"1/1"!=C?m.progressMessage+"("+C+")":m.progressMessage,E&&E.getEL()){var F="",B="";O.indexOf(" ...")&&(O=O.replace(" ...","...")),-1!=O.indexOf("(")?(F=O.substr(0,O.indexOf("(")),B=O.substr(O.indexOf("("))):F=O,m.each(f,function(A,N){-1!=A.indexOf(F)&&(O=u.CustomizableDisplayInfo.customProgressText[N]+B)}),""==O&&(O="&nbsp;"),E.html(O)}0!=I?(""==I||m.isUndef(I)?I="&nbsp;":m.isString(I)&&I.length>30&&(I=I.substring(0,30)+"..."),M.html(I)):M.html("&nbsp;"),(l||0===l)&&(P&&P.getEL()&&P.html(l+"%"),D&&D.getEL()&&(r.bIE?D[0].objProgressBar?D[0].objProgressBar.setValue(l):D[0].value=l:(r.bEdge&&(D[0].style.display=""),D[0].value=l))),l&&(l>=100||m.dlgRef<=0)&&(setTimeout(function(){D&&D.getEL()&&(r.bIE?D[0].objProgressBar?D[0].objProgressBar.setValue(0):D[0].value=0:(r.bEdge&&(D[0].style.display="none"),D[0].value=0))},1e3),m.dlgRef<=0)&&m.closeProgress("OnPercentDone")}1==c&&(m.isFunction(o.__OnInternetTransferPercentage)&&o.__OnInternetTransferPercentage(l,!1),m.isFunction(o.__OnInternetTransferPercentageEx)&&o.__OnInternetTransferPercentageEx(l,!1)),m.isFunction(o.__OnPercentDone)&&o.__OnPercentDone()}},i._OnGetFilePath=function(a){var m,I,p,o=this;m=a[1].split(","),e.log("On GetFilePath Results:"+a),I=e.base64.decode(m[3]),p=e.base64.decode(m[4]),"-1032"==m[2]&&(m[2]="-1",I=p=""),e.isFunction(o.__OnGetFilePath)&&o.__OnGetFilePath(1*m[0],1*m[1],1*m[2],I,p),o.__bOpenFileNow=!1},i.checkErrorString=function(){var o=this.ErrorCode;return-2115===o||(-2003!==o||w.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(this.__HTTPPostResponseString),0===o)},i.__GetLoadEventsNum=function(){var o=0;return e.isFunction(this.__OnPostLoad)&&(o|=1),e.isFunction(this.__OnGetFilePath)&&(o|=2),o},i._OnPageFocus=function(a){var o=this;if(o.bPageFocus=!0,!o._isMobileMode()&&!o.bReady)return w.Lib.connectToWS(o);if(r.bWin&&!o._isMobileMode()&&u.IfAlwaysFocusOnPopupWindow){var c=e.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0});(o.__bAcquireImageNow||a||o.__bOpenFileNow)&&(o.bServerAlwaysFocusOnPopupWindow=!0,o._innerSendCmd("SendEventToScannerUI",["[",c,"]"].join("")))}},i._OnPageBlur=function(a){var o=this;if(r.bWin&&!o._isMobileMode()){if(!o.bReady)return w.Lib.connectToWS(o);var c=e.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});(0!=o.bPageFocus||a)&&(o.bPageFocus=!1,(o.__bAcquireImageNow||a||o.__bOpenFileNow)&&(o.bServerAlwaysFocusOnPopupWindow=!1,o._innerSendCmd("SendEventToScannerUI",["[",c,"]"].join(""))))}})}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var h=e.html5.STwain.prototype,d=e,s=e.html5.Funs,u=!1,f=!0;h.SetCookie=function(a){return this._cookie=a,document.cookie=a,f},h.LoadImageFromBase64Binary=function(a,o,c,l){var m=this;if(m._resetErr(),!m._isValid())return!1;if(!a)return e.Errors.InvalidParameter(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1;var _,v,I=a,p=u,g="LoadImageFromBase64Binary",C=o,T=1;if(I instanceof w.Lib.html5.Base64Result&&e.isFunction(I.getLength)&&e.isFunction(I.getData)&&(I=I.getData(0,I.getLength())),e.isString(I))if(-1!=I.indexOf("data:image/bmp"))C=0;else if(-1!=I.indexOf("data:image/jpeg"))C=1;else if(-1!=I.indexOf("data:image/tif"))C=2;else if(-1!=I.indexOf("data:image/png"))C=3;else if(-1!=I.indexOf("data:application/pdf"))C=4;else if(-1!=I.indexOf("data:image/jp2"))C=14;else{var D=I.substr(0,64),P=w.Lib.base64.decode(D,!0);C=e.html5.Funs.GetFileType(P)}if(C!=w.DWT.EnumDWT_ImageType.IT_BMP&&C!=w.DWT.EnumDWT_ImageType.IT_JPG&&C!=w.DWT.EnumDWT_ImageType.IT_TIF&&C!=w.DWT.EnumDWT_ImageType.IT_PNG&&C!=w.DWT.EnumDWT_ImageType.IT_PDF&&C!=w.DWT.EnumDWT_ImageType.IT_J2K&&(C=-1),!e.License.checkProductKey(m,{Core:!0})||!e.License.checkPDFProductKeyWhenNeeds(m,C))return e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),u;if(m._isMobileMode()){e.cancelFrome=2,e.showProgress(m,g,f),m.__bLoadingImage=f;var E=I;if(d.isString(I)){if(I.indexOf("blob:")>=0||I.indexOf("data:")>=0||(I=[C==w.DWT.EnumDWT_ImageType.IT_PNG?"data:image/png;base64,":C==w.DWT.EnumDWT_ImageType.IT_JPG?"data:image/jpeg;base64,":C==w.DWT.EnumDWT_ImageType.IT_TIF?"data:image/tif;base64,":C==w.DWT.EnumDWT_ImageType.IT_PDF?"data:application/pdf;base64,":C==w.DWT.EnumDWT_ImageType.IT_BMP?"data:image/bmp;base64,":C==w.DWT.EnumDWT_ImageType.IT_J2K?"data:image/jp2;base64,":"data:application/octet-stream;base64,",I].join("")),I.indexOf("data:")>=0&&0==(E=d.MobileFuns.dataURLtoBlob(I)))return w.Lib.closeProgress(g),m.__bLoadingImage=!1,e.Errors.ConvertFromBase64Failed(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString,I,o),!1}else if(I instanceof ArrayBuffer){var O="image/png";C==w.DWT.EnumDWT_ImageType.IT_PNG?O="image/png":C==w.DWT.EnumDWT_ImageType.IT_JPG?O="image/jpeg":C==w.DWT.EnumDWT_ImageType.IT_TIF?O="image/tiff":C==w.DWT.EnumDWT_ImageType.IT_PDF?O="application/pdf":C==w.DWT.EnumDWT_ImageType.IT_BMP?O="image/bmp":C==w.DWT.EnumDWT_ImageType.IT_J2K&&(O="image/jp2"),E=new Blob([I],{type:O})}var R=m.GetCurrentFileName();return""==R&&(R=m._ImgManager.getWebViewer().GetDefaultFileName()),_=m._innerSendToMobile("LoadImageFromBinary",d.MobileFuns.makeParams(E,!1,null,R),0,function(){if(w.Lib.closeProgress(g),m.__bLoadingImage=!1,m._isBindViewer()){var F=m._ImgManager.getCurrentImageIndex();F>=0&&m.OnRefreshUI(F)}return c&&c(I,o),!0},function(){w.Lib.closeProgress(g),m.__bLoadingImage=!1,e.isFunction(l)&&l(m.ErrorCode,m.ErrorString,I,o)}),!0}if(e.isFunction(c)&&(p=f),e.isString(I)&&-1!=I.indexOf("base64,")&&(I=I.substr(I.indexOf("base64,")+7)),v=m.__GetLoadEventsNum(),p){if(s.isServerInvalid(m))return e.isFunction(l)&&l(m.ErrorCode,m.ErrorString,I,o),u;e.cancelFrome=2,e.showProgress(m,g,f),m.__bLoadingImage=f,_=m._innerSend(g,s.makeParams(I,C,v,T=0),f,function(){if(w.Lib.closeProgress(g),m.__bLoadingImage=!1,m._isBindViewer()){var F=m._ImgManager.getCurrentImageIndex();F>=0&&m.OnRefreshUI(F)}return c&&c(I,o),!0},function(){w.Lib.closeProgress(g),m.__bLoadingImage=!1,e.isFunction(l)&&l(m.ErrorCode,m.ErrorString,I,o)})}else _=m.__innerLoadImageFun(g,s.makeParams(I,C,v,T),T,R);return _},h.SaveSelectedImagesToBytes=function(a,o){return e.Errors.HTML5NotSupport(this),u},h.LoadImageFromBytes=function(a,o,c){return e.Errors.HTML5NotSupport(this),u},h.UnregisterEvent=function(a,o){var c=this;return c._resetErr(),!!c._isValid()&&(c[["__",a].join("")]=null,f)},h.SetCancel=function(a,o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("SetCancel",o):this._innerSend("SetCancel",null,f,a,o))},h._asyncSetImageWidth=function(a,o,c,l){var m=this,g=parseInt(a);return m._innerSendToMobile("SetImageWidth",d.MobileFuns.makeParams(g,o),0,function(){s.refreshImageAfterInvokeFun(m,a),e.isFunction(c)&&setTimeout(c,30)},function(){e.isFunction(l)&&l(m.ErrorCode,m.ErrorString)})},h.SetImageWidth=function(a,o,c,l){var p,m=this;if(m._resetErr(),!m._isValid())return!1;var g=parseInt(a);if(isNaN(g))return e.Errors.InvalidIndex(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1;if(g<0||g>=m._ImgManager.count())return e.Errors.IndexOutOfRange(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1;if(e.isUndefined(o))return e.Errors.InvalidParameter(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1;if(m._isMobileMode())return m._asyncSetImageWidth(g,o,c,l);var C=m._ImgManager.convertClientIndexToServerId(g);return-1==C?(e.Errors.IndexOutOfRange(m),e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),!1):((p=1==m._innerFun("SetImageWidth",s.makeParams(C,o)))?e.isFunction(c)&&c():e.isFunction(l)&&l(m.ErrorCode,m.ErrorString),p)},h.HTTPDownloadStreamThroughPost=function(a,o){return e.Errors.HTML5NotSupport(this),u},h.HTTPUploadStreamThroughPost=function(a,o,c,l,m){return e.Errors.HTML5NotSupport(this),u},h.HTTPUploadThroughPutDirectly=function(a,o,c,l,m){return e.Errors.HTML5NotSupport(this),!1},h.SetCustomDSDataEx=function(a){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("SetCustomDSDataEx"):this._innerFun("SetCustomDSDataEx",s.makeParams(a)))},h.SetCustomDSData=function(a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("SetCustomDSData");var c=s.replaceLocalFilename(a);return this._innerFun("SetCustomDSData",s.makeParams(c))},h.GetCustomDSDataEx=function(){var a=this;return a._resetErr(),!!a._isValid()&&(a._isMobileMode()?a._mobileNotSupport("GetCustomDSDataEx"):a._innerFun("GetCustomDSDataEx"))},h.GetCustomDSData=function(a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("GetCustomDSData");var c=s.replaceLocalFilename(a);return o._innerFun("GetCustomDSData",s.makeParams(c))},h._asyncConvertToBW=function(a,o,c){var l=this,p=parseInt(a);return l._innerSendToMobile("ConvertToBWScale",d.MobileFuns.makeParams(p),0,function(){s.refreshImageAfterInvokeFun(l,a),e.isFunction(o)&&o()},function(){e.isFunction(c)&&c(l.ErrorCode,l.ErrorString)})},h.ConvertToBW=function(a,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(!e.License.checkProductKey(l,{Core:!0}))return e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;var m=parseInt(a);if(isNaN(m))return e.Errors.InvalidIndex(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(m<0||m>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(l._isMobileMode())return l._asyncConvertToBW(m,o,c);var I=l.ChangeBitDepth(a,1,!0);return I?e.isFunction(o)&&o():e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),I},h.LoadImageFromBinary=function(a,o,c){var m,l=this;if(!e.License.checkProductKey(l,{Core:!0}))return e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(!a||""==a)return e.Errors.ParameterCannotEmpty(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;var I=a.currentFileName;if(I||(I=l.GetCurrentFileName())||(I=l._ImgManager.getWebViewer().GetDefaultFileName()),a instanceof FileList){if(1==a.length)return a[0].currentFileName=I,l.LoadImageFromBinary(a[0],o,c);if(a.length>1){var p;for(p=0;p<a.length;p++)a[p].currentFileName=I,e.asyncQueue.pushToDo(l,"LoadImageFromBinary",[a[p],o,c]);return e.asyncQueue.start(),!0}return e.Errors.ParameterCannotEmpty(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1}if(window.ReadableStream&&a instanceof ReadableStream?m=new Response(a):window.Response&&a instanceof Response&&(m=a),l._bLocalService)if(m)m.arrayBuffer().then(function(D){var P=new Blob([D]);l.__LoadImageFromBytes(P,-1,"",!0,o,c)});else{var g=a;(g instanceof ArrayBuffer||g instanceof Uint8Array)&&((g=new Blob([a])).currentFileName=a.currentFileName);var _=-1,T=w.DWT.EnumDWT_ImageType;e.isString(g.type)&&("application/pdf"==g.type?_=T.IT_PDF:"image/png"==g.type?_=T.IT_PNG:"image/jpeg"==g.type||"image/jpg"==g.type?_=T.IT_JPG:"image/bmp"==g.type?_=T.IT_BMP:"image/tiff"==g.type||"image/tif"==g.type?_=T.IT_TIF:"image/jp2"==g.type&&(_=T.IT_J2K)),l.__LoadImageFromBytes(g,_,"",!0,o,c)}else m?m.arrayBuffer().then(function(D){l._innerSendToMobile("LoadImageFromBinary",d.MobileFuns.makeParams(D,!1,null,I),0,o,c)}):l._innerSendToMobile("LoadImageFromBinary",d.MobileFuns.makeParams(a,!1,null,I),0,o,c);return!0},h.EnableSourceUI=function(a,o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isMobileMode()?c._mobileNotSupport("EnableSourceUI",o):c._innerSend("EnableSourceUI",null,!0,a,o))},h.getCapabilities=function(a,o){var c=this;return c._bLocalService?c._innerFunRaw("GetCapabilities",null,!0,!1,!1,function(l){var m,I;l.length>0&&(I=l[0]);try{d.isString(I)?(I=d.removeNonPrintableChar(I),I=d.replaceAll(I,"\\\\","\\\\"),m=JSON.parse(I)):m={}}catch(p){return c._errorCode=-2302,c._errorString=p,void(d.isFunction(o)&&o(c.ErrorCode,c.ErrorString))}0==m.errorCode?d.isFunction(a)&&a(m.response):(c._errorCode=m.errorCode,c._errorString=m.errorString,d.isFunction(o)&&o(c.ErrorCode,c.ErrorString))},o):c._mobileNotSupport("GetCapabilities",o)},h.setCapabilities=function(a,o,c){var l=this;if(l._bLocalService){if(e.isObject(a)&&!e.isArray(a)){var m=["[",e.stringify(a),"]"].join("");return l._innerSend("SetCapabilities",m,0,function(p){e.isFunction(o)&&o(p)},c)}return e.Errors.InvalidParameter(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1}return l._mobileNotSupport("SetCapabilities",c)},h.BindViewer=function(a){var o=this,c=!1,l=a;return w.DWT.UseDefaultViewer?(e.isString(a)&&(l=e.get(a)),o.config.container!=l&&(o.config.container=l,o.config.ifBindViewer=!0,e.html5.ui.init(o,o.config)),c=o._ImgManager.BindView(a),o._bBindViewer=!0,o.config.ifBindViewer=!1,c):(e.Errors.CannotBindViewerWhenNoViewerJS(o),!1)},h.UnbindViewer=function(){var a=this;return a.__funResize&&(e.removeEventListener(window,"resize",a.__funResize),a.__funResize=u),a._bBindViewer=!1,a.config.container=null,a._ImgManager?a._ImgManager.UnbindView():u},h.GetIfShowVideoContainer=function(){return this._ImgManager.GetIfShowVideoContainer()},h.ShowVideoContainer=function(a){return this._ImgManager.ShowVideoContainer(a)},h.UpdateVideoContainer=function(a){return this._ImgManager.UpdateVideoContainer(a)},h.ChangeBitDepth=function(a,o,c){var m,l=this;if(l._resetErr(),!l._isValid())return!1;if(l._isMobileMode())return l._mobileNotSupport("ChangeBitDepth");if(m=parseInt(a),isNaN(m))return e.Errors.InvalidIndex(l),!1;if(m<0||m>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),!1;var I=l._ImgManager.convertClientIndexToServerId(m);return-1==I?(e.Errors.IndexOutOfRange(l),!1):l._innerFun("ChangeBitDepth",s.makeParams(I,o,c))},h._asyncConvertToGrayScale=function(a,o,c){var l=this,I=function(){e.isFunction(c)&&c(l.ErrorCode,l.ErrorString)};if(!e.License.checkProductKey(l,{Core:!0}))return I(),!1;var p=parseInt(a);return l._innerSendToMobile("ConvertToGrayScale",d.MobileFuns.makeParams(p),0,function(){s.refreshImageAfterInvokeFun(l,a),e.isFunction(o)&&setTimeout(o,30)},I)},h.ConvertToGrayScale=function(a,o,c){var I,l=this;if(l._resetErr(),!l._isValid())return!1;var p=parseInt(a);if(isNaN(p))return e.Errors.InvalidIndex(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(p<0||p>=l._ImgManager.count())return e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1;if(l._isMobileMode())return l._asyncConvertToGrayScale(p,o,c);var g=l._ImgManager.convertClientIndexToServerId(p);return-1==g?(e.Errors.IndexOutOfRange(l),e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1):((I=1==l._innerFun("ConvertToGrayScale",s.makeParams(g)))?(s.refreshImageAfterInvokeFun(l,p),e.isFunction(o)&&o()):e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),I)},h.ClearTiffCustomTag=function(){var a=this;return a._resetErr(),!!a._isValid()&&(a._aryTiffTag.splice(0,a._aryTiffTag.length),!!a._isMobileMode()||a._innerFun("ClearTiffCustomTag"))},h.SetTiffCustomTag=function(a,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(e.isUndef(a)||e.isUndef(o))return e.Errors.InvalidParameter(l),!1;var m,I=1*a;if(m=e.isString(o)?e.replaceAll(o,'"','\\"'):o,I<=0||I>2147483647)return e.Errors.InvalidTiffTagError(l),!1;var g,p=0,C=!1,_=l._aryTiffTag.length;for(p=0;p<_;p++)(g=l._aryTiffTag[p]).tag==I&&(g.Content=o,g.UseBase64Encoding=c,C=!0);return!C&&_>=32?(e.Errors.TiffTagCountExceedError(l),!1):l._isMobileMode()?(C||l._aryTiffTag.push({tag:a,content:o,UseBase64Encoding:c}),!0):l._innerFun("SetTiffCustomTag",s.makeParams(I,m,c))},h.IsBlankImage=function(a){var c,o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("IsBlankImage");if(c=parseInt(a),isNaN(c))return e.Errors.InvalidIndex(o),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var l=o._ImgManager.convertClientIndexToServerId(c);return-1==l?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("IsBlankImage",s.makeParams(l,u))},h.IsBlankImageExpress=function(a){var o=this;if(o._resetErr(),!o._isValid())return!1;if(o._isMobileMode())return o._mobileNotSupport("IsBlankImageExpress");var c=parseInt(a);if(isNaN(c))return e.Errors.InvalidIndex(o),!1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),!1;var l=o._ImgManager.convertClientIndexToServerId(c);return-1==l?(e.Errors.IndexOutOfRange(o),!1):o._innerFun("IsBlankImage",s.makeParams(l,f))},h.SetOpenSourceTimeout=function(a){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("SetOpenSourceTimeout"):o._innerFun("SetOpenSourceTimeout",s.makeParams(a)))},h.GetImageURL=function(a,o,c,l,m){var I=this;if(I._resetErr(),!I._isValid())return!1;if(I._isMobileMode()){if(!e.isFunction(o))return I._mobileNotSupport("GetImageURL");I._ImgManager.getWebViewer().GetImageData(I._ImgManager.getWebViewer().GetUidByIndex(a)).then(function(P){o(P.oriData)},function(P){c(P.message)})}var _,v,T,p=a,g=parseInt(o),C=parseInt(c);if(l?(_="",v="dwt://"):(_=I.httpUrl,v="dwt/"),T=[_,v,e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/img?id=",I.clientId],e.isUndefined(p)||null===p)return e.Errors.IndexNullOrUndefined(I),"";if(m)T.push("&index=-1&width=-1&height=-1&webcam="),T.push(m);else{if(p=parseInt(p),isNaN(p))return e.Errors.InvalidIndex(I),"";if(p<-1||p>=I._ImgManager.count())return e.Errors.IndexOutOfRange(I),"";var D=I._ImgManager.convertClientIndexToServerId(p);if(-1==D)return"";T.push("&index="),T.push(D),g>0&&C>0&&(T.push("&width="),T.push(g),T.push("&height="),T.push(C))}return T.push("&t="),T.push((new Date).getTime()),T.join("")},h.GetImagePartURL=function(a,o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(l._isMobileMode())return l._mobileNotSupport("GetImagePartURL");var m=parseInt(a);return isNaN(m)?(e.Errors.InvalidIndex(l),""):m<0||m>=l._ImgManager.count()?(e.Errors.IndexOutOfRange(l),""):this.GetImageURL(m,o,c,!0)},h.SetLanguage=function(a){var o=this;return o._resetErr(),!!o._isValid()&&(o._isMobileMode()?o._mobileNotSupport("SetLanguage"):o._innerFun("SetLanguageForSecurity",s.makeParams(a)))},h._wasmGetLicenseInfo=function(a,o){var c=this;return c._innerSendToMobile("GetLicenseInfo",d.MobileFuns.makeParams(),0,function(m){if(m)if(m.exception)o&&o(m.exception);else{if(c.__licenseInfo=m,e.detect.wasmScriptLoaded&&!e.detect.wasmPdfReaderLoaded)try{w.WasmEnv.loadPdfReader(),e.detect.wasmPdfReaderLoaded=!0}catch(I){I&&console.log(I.message)}a&&a(c.__licenseInfo)}else o&&o()},o)},h.GetLicenseInfo=function(a,o){var c=this;if(c.__licenseInfo)e.isFunction(a)&&a(c.__licenseInfo);else{if(c._isMobileMode())return c._wasmGetLicenseInfo(a,o);if(s.isHttpServerInvalid(c))return u;c._innerFunRaw("GetLicenseInfo",null,f,u,f,function(m){if(m)if(m.exception)e.isFunction(o)&&o(m.exception);else{if(c.__licenseInfo=m,e.detect.wasmScriptLoaded&&!e.detect.wasmPdfReaderLoaded)try{w.WasmEnv.loadPdfReader(),e.detect.wasmPdfReaderLoaded=!0}catch(I){I&&console.log(I.message)}e.isFunction(a)&&a(c.__licenseInfo)}else e.isFunction(o)&&o()},o)}return f},h.IndexToImageID=function(a){var o=this;if(o._resetErr(),!o._isValid())return!1;var c=parseInt(a);if(isNaN(c))return e.Errors.InvalidIndex(o),-1;if(c<0||c>=o._ImgManager.count())return e.Errors.IndexOutOfRange(o),-1;var l=o._ImgManager.convertClientIndexToServerId(c);return o.objImageIndexManager.convertServerIdToGuid(l)},h.ImageIDToIndex=function(a){var c,o=this,l=-1;return o._resetErr(),!!o._isValid()&&((c=o.objImageIndexManager.convertGuidToServerId(a))>0&&(l=o._ImgManager.convertServerIdToClientIndex(c)),-1==l&&e.Errors.InvalidImageID(o),l)},h._setProductKeyV2=function(a){var o=this,c=a;if(o._resetErr(),!o._isValid())return!1;if(s.isHttpServerInvalid(o))return e.Promise.reject({code:o._errorCode,message:o._errorString});if(!e.isString(c)||"******"==c)return e.Errors.LicenseEmptyOrInvalid(o),e.Promise.reject({code:o._errorCode,message:o._errorString});var l,m=w.DWT.ProductKey;return(l=(l=o._innerFunRawV2("ProductKey",s.makeParams(c))).then(function(I){if(I){if(void 0!==I.exception&&void 0!==I.description)throw o._errorCode=I.exception,o._errorString=I.description,w.DWT.ProductKey=m,l.context=null,{code:o._errorCode,message:o._errorString};return w.DWT.ProductKey=l.context.productKey,l.context=null,o._innerFunRawV2("GetLicenseInfo")}throw e.Errors.LicenseEmptyOrInvalid(o),w.DWT.ProductKey=m,l.context=null,{code:o._errorCode,message:o._errorString}})).context={productKey:c},l},h.SetProductKeyAsync=function(a){var o=this;return o._resetErr(),o._isValid()?e.isUndefined(a)?(e.Errors.LicenseEmptyOrInvalid(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):(o._isMobileMode()?o._innerSendToMobileV2("GetLicenseInfo",d.MobileFuns.makeParams(a)):o._setProductKeyV2(a)).then(function(l){var m=l;if(!m||m.message)throw e.Errors.LicenseEmptyOrInvalid(o),m&&m.message&&(o._errorString=m.message),{code:o._errorCode,message:o._errorString};if(e.License.isLTS()||(w.DWT.ProductKey=a),o.__licenseInfo=m,e.detect.wasmScriptLoaded&&!e.detect.wasmPdfReaderLoaded)try{w.WasmEnv.loadPdfReader(),e.detect.wasmPdfReaderLoaded=!0}catch(I){I&&console.log(I.message)}return m}):e.Promise.reject({code:o.ErrorCode,message:o.ErrorString})},h.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")},h.isUsingActiveX=function(){return!1},h._setLTSLic=function(a){var o=this,c=a;return o._resetErr(),!!o._isValid()&&(s.isHttpServerInvalid(o)?e.Promise.reject({code:o._errorCode,message:o._errorString}):e.isString(c)?o._innerFunRawV2("LTSLicense",s.makeParams(c)).then(function(l){if(l){if(void 0!==l.exception&&void 0!==l.description)throw o._errorCode=l.exception,o._errorString=l.description,{code:o._errorCode,message:o._errorString};return o._innerFunRawV2("GetLicenseInfo")}throw e.Errors.LicenseEmptyOrInvalid(o),{code:o._errorCode,message:o._errorString}}):(e.Errors.LicenseEmptyOrInvalid(o),e.Promise.reject({code:o._errorCode,message:o._errorString})))},h.SetLTSLicenseAsync=function(a){var o=this;return o._resetErr(),o._isValid()?e.isString(a)?(o._isMobileMode()?o._innerSendToMobileV2("GetLicenseInfo",d.MobileFuns.makeParams(a)):o._setLTSLic(a)).then(function(l){var m=l;if(!m||m.message)throw e.Errors.LicenseEmptyOrInvalid(o),m&&m.message&&(o._errorString=m.message),{code:o._errorCode,message:o._errorString};if(o.__licenseInfo=m,e.detect.wasmScriptLoaded&&!e.detect.wasmPdfReaderLoaded)try{w.WasmEnv.loadPdfReader(),e.detect.wasmPdfReaderLoaded=!0}catch(I){I&&console.log(I.message)}return o.__licenseInfo&&(o.__licenseInfo.LTS=!0),m}):(e.Errors.LicenseEmptyOrInvalid(o),e.Promise.reject({code:o._errorCode,message:o._errorString})):e.Promise.reject({code:o._errorCode,message:o._errorString})}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=w.navInfo,h=e.html5.Funs2={getImageUrl:function(c,l,m,I,p){var g=[c];return e.isNumber(l)&&l<0?"":(null!=l&&(g.push("&index="),g.push(l)),g.push("&width="),g.push(m),g.push("&height="),g.push(I),g.push("&ticks="),g.push(p||Date.now()),g.join(""))},getUrlByAct:function(c,l,m){var I=[c];return null!=l&&(I.push("&index="),I.push(l)),m&&(I.push("&act="),I.push(m)),I.push("&ticks="),I.push(Date.now()),I.join("")},output:function(c,l){w.DWT.Debug&&e.log(l)},print:function(c){var m=850,I=1120,p=0,g=0,C=0,_="";for(e.product.bHTML5Edition&&(r.bIE&&(I=1160),r.bFirefox&&(I=1150)),p=0;p<c.length;p++){var v=I,T=c[p],D=T.Width,P=T.Height,E=T.Url;D<=0&&(D=m),P<=0&&(P=v);var M=m/D,O=v/P;M<O?v=parseInt(P*M):M>O&&(m=parseInt(D*O)),g+=D,C+=P,_=_+'<div style="width:850px;height:'+I+'px"><img id="D_img'+p+'" src="'+E+'" style="position:relative;left:0px;top:0px;width: '+m+"px;height: "+v+'px" /></div>'}var R,F=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",g,",height=",C].join(""),B=window.open("about:blank","_blank",F);B&&(B.document.write('<html><body id="D_img">'+_+"</body></html>"),B.document.close(),B.focus(),(R=B.document.getElementById("D_img"))?R.onload=function(){B.print(),e.log("print image...ok")}:e.log("cannot find image"))}},i_output=function(c){w.DWT.Debug&&e.log(c)},f=u.prototype;f._Init=function(c,l){var m=this;l.mapModelImageControl=c._ifBindViewer?m.getView().mapModelImageControl:{},l.onTopImageInTheViewChanged=function(I){w.Lib.isFunction(c.__OnTopImageInTheViewChanged)&&c.__OnTopImageInTheViewChanged(I.index,I.bByScrollBar)},l.onGetImageInfo=function(I){return{width:m.GetImageWidth(I),height:-1}},m._UIView?m._UIView._Init(l):m._UIView=new e.UI.ImageUIView(m,l)},f.getUidByIndex=function(c){return this.getWebViewer().GetUidByIndex(c)},f.getIndexByUid=function(c){return this.getWebViewer().GetIndexByUid(c)},f.getCurrentImageIndex=function(){return this.getWebViewer().GetCurrentIndex()},f.convertServerIdToClientIndex=function(c){var I,p,m=-1;return(p=this._UIView.GetDataImageControl(c))&&(I=p.uuid),I&&(m=this.getWebViewer().GetIndexByUid(I)),e.isNumber(m)||(m=-1),m},f.convertClientIndexToServerId=function(c){var m=this.getWebViewer().GetCustomDataByIndex(c);return m?m.imageId:-1},f.getWebViewer=function(){return this.getView()._webViewer},f.getTwain=function(){return this._stwain},f.getView=function(){return this._UIView},f.OnReady=function(){return this.getView().BaseUrl=[(c=this._stwain).httpUrl,"dwt/",e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/img?id=",c.clientId].join(""),!0;var c},f.count=function(){return this.getView().GetWebViewer().GetHowManyImagesInBuffer()},f.clear=function(){return this.getView().RemoveAllImages(),!0},f.dispose=function(){var c=this;return c._UIView&&(c._UIView.dispose(),c._UIView=null),!0},f.unshift=function(c,l,m){return this.getView(),this._updateUIAfterAdd(0,l,m)},f.append=function(c,l,m){var g,C,_,v,I=this,p=I.getView();C=p.GetWebViewer().GetHowManyImagesInBuffer(),_=p.GetWebViewer().GetCurrentIndex();for(var T=C-1;T>=c;T--)v=I.convertClientIndexToServerId(T),p.RemoveImage(T,v);return C<c?I._updateUIAfterAdd(g=C,l,m,!0):(v=I.convertClientIndexToServerId(g=_>=C-1?0:_+1),p.RemoveImage(g,v),I._updateUIAfterAdd(g,l,m,g==c-1))},f.exists=function(c){return this.getView().exists(c)},f.insertBefore=function(c,l,m,I){var _,C=1*c;return(C<0||C>l)&&(C=-1),C>=(_=this.getView().GetWebViewer().GetHowManyImagesInBuffer())&&(C=_),this._updateUIAfterAdd(C,m,I,!1)},f.insert=function(c,l,m,I){var _,C=1*c;return(C<0||C>l)&&(C=-1),C>=(_=this.getView().GetWebViewer().GetHowManyImagesInBuffer())&&(C=_),this._updateUIAfterAdd(C,m,I,!1)},f._updateUIAfterAdd=function(c,l,m,I){var g=this.getView();return!(l<0)&&g.AddImage(c,l,m,I)},f.removeByServerId=function(c){return this.getView(),this.remove(c)},f.remove=function(c){var m=this.getView(),I=this.convertServerIdToClientIndex(c);return m.RemoveImage(I,c)},f.MoveImage=function(c,l){return this.getView().MoveImage(c,l)},f.SwitchImage=function(c,l){return this.getView().SwitchImage(c,l)},f.GetImageHeight=function(c){var I,p,g,_,l=this,m=1*c;if(p=l.getView(),I=l.count(),m<0||m>I)return 0;if(l._stwain._isMobileMode()){var v=p._webViewer.GetMetaDataByIndex(m);return v&&v.height?v.height:0}return _=l.convertClientIndexToServerId(m),(g=p.GetDataImageControl(_))&&g.imageHeight?g.imageHeight:l._stwain.GetImageHeight(m)},f.GetImageWidth=function(c){var I,p,g,_,l=this,m=1*c;if(p=l.getView(),I=l.count(),m<0||m>I)return 0;if(l._stwain._isMobileMode()){var v=p._webViewer.GetMetaDataByIndex(m);return v&&v.width?v.width:0}return _=l.convertClientIndexToServerId(m),(g=p.GetDataImageControl(_))&&g.imageWidth?g.imageWidth:l._stwain.GetImageWidth(m)},f.get=function(c){var I,p,g,l=this,m=parseInt(c);return p=l.getView(),I=l.count(),!(m<0||m>I)&&(g=l.convertClientIndexToServerId(m),p.GetDataImageControl(g))},f.refresh=function(c,l,m,I){var C,p=this,g=1*c;if(m){var _,v;if(v=p.getView(),_=p.count(),g<0||g>_)return!1;C=p.convertClientIndexToServerId(g),v.SetDataImageControl(g,C,I)}return!0},f.Go=function(c){return this.getView().Go(c)},f.__Next=function(){return this.getView().__Next()},f.__Previous=function(){return this.getView().__Previous()},f.SetSelectedClientIndexArray=function(c){return this.getView().SetSelectedindexes(c)},f.getSelectedClientIndexArray=function(){return this.getView().GetSelectedindexes()},f.GetZoom=function(){return this.getView().GetZoom()},f.SetZoom=function(c){return this.getView().SetZoom(c)},f.__GetPrintUrl=function(c,l,m){var C,v,I=this,p=0,g=0;return!(C=I.getView().GetDataImageControl(l)).width||C.width<=0?C.width=I.GetImageWidth(m):p=C.width,!C.height||C.height<=0?C.height=I.GetImageHeight(m):g=C.height,v=new e.UI.PrintUrl(c,C.width,C.height),C.width=p,C.height=g,v},f.__GetPrintUrlforHttp=function(c,l){var m=this,I=m.getView();e.each(c,function(p){var g=m.convertClientIndexToServerId(p);if(-1!=g){var C=h.getImageUrl(I.BaseUrl,g,-1,-1),_=m.__GetPrintUrl(C,g,p);l.push(_)}}),h.print(l)},f.__GetPrintUrlforSocket=function(c,l){var I,m=this,p=e.Promise.resolve(0),g=0;return e.each(c,function(C){p=p.then(function(){var _=m.convertClientIndexToServerId(C);if(-1!=_){var v=m.getWebViewer().GetUidByIndex(C);m.getWebViewer().GetImageData(v).then(function(T){g++,I=T.oriData instanceof ArrayBuffer?URL.createObjectURL(new Blob([T.oriData])):T.oriData instanceof Blob?URL.createObjectURL(T.oriData):T.oriData;var D=m.__GetPrintUrl(I,_,C);l.push(D),c.length==g&&h.print(l)})}})}),!0},f.__GetPrintUrlforMobileEx=function(c,l){var I,m=this,p=e.Promise.resolve(0),g=0;return e.each(c,function(C){p=p.then(function(){var _=m.convertClientIndexToServerId(C);if(-1!=_){var v=m.getWebViewer().GetUidByIndex(C);m.getWebViewer().GetImageData(v).then(function(T){g++,I=T.oriData instanceof ArrayBuffer?URL.createObjectURL(new Blob([T.oriData])):T.oriData instanceof Blob?URL.createObjectURL(T.oriData):T.oriData;var D=m.__GetPrintUrl(I,_,C);l.push(D),c.length==g&&h.print(l)})}})}),!0},f.PrintEx=function(c){var l=this;if(!(l.count()<=0)){var m=[];return l._stwain._isMobileMode()?l.__GetPrintUrlforMobileEx(c,m):w.DWT.ConnectWithSocket?l.__GetPrintUrlforSocket(c,m):l.__GetPrintUrlforHttp(c,m),!0}},f.Print=function(){var c=this;if(c.count()<=0)return!1;var l,m=[];for(l=0;l<c.count();l++)m.push(l);return c.PrintEx(m)},f._isNoViewer=function(){return!this._stwain._bBindViewer},f.ChangeSize=function(c,l){return this.getView().ChangeImageViewSize(c,l)},f.GetWidth=function(){return this.getView().GetWidth()},f.SetWidth=function(c,l){return!!this._isNoViewer()||this.getView().SetWidth(c)},f.GetHeight=function(){return this.getView().GetHeight()},f.SetHeight=function(c,l){return!!this._isNoViewer()||this.getView().SetHeight(c)},f.SetViewMode=function(c,l){var m=this;return m._isNoViewer()?m._nouiNotSupport("SetViewMode"):m.getView().SetViewMode(c,l)},f.ShowImageEditorEx=function(c,l,m,I,p,g,C,_){var v=this;if(v._isNoViewer())return v._nouiNotSupport("ShowImageEditorEx");switch(p){case 0:case 1:case 2:case 4:break;case 3:if(v.getWebViewer().OnCloseImageEditor())return!0}var M,R,P=document;R=v.getView(),v.getTwain()._containerElement==C&&(g=!1,i_output("warning: cannot use the same DIV for the main viewer and the editor viewer."));for(var F=0;F<w.DWT.DynamicContainers.length;F++)if(w.DWT.DynamicContainers[F].ContainerId==C){g=!1,i_output("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}if(g&&C&&(e.isDOM(C)?M=C:e.isShadowRoot(C)?(M=document.createElement("div"),C.appendChild(M)):(M=P.getElementById(C))&&"DIV"!=M.nodeName&&(i_output("warning: cannot create the editor viewer in a non-DIV element."),g=!1)),g&&C&&e.isDOM(C)){var B=e.getShadowRoot(C);if(B){var A,N,b=w.Lib.timestamp;return(A=P.createElement("link")).href=[w.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",b].join(""),A.rel="stylesheet",A.async=!0,(N=P.createElement("link")).href=[w.DWT.ResourcesPath,"/src/dynamsoft.webtwain.css",b].join(""),N.rel="stylesheet",N.async=!0,e.scriptOnload(A,function(){e.scriptOnload(N,function(){return R.GetWebViewer().ShowImageEditor(M,g,m,I)}),B.appendChild(N)}),B.appendChild(A),!0}}return R.GetWebViewer().ShowImageEditor(M,g,m,I)},f.SetSelectionRectAspectRatio=function(c){return this.getView().SetSelectionRectAspectRatio(c)},f.GetSelectionRectAspectRatio=function(){return this.getView().GetSelectionRectAspectRatio()},f.GetSelectionImageBorderColor=function(){return this.getView().GetSelectionImageBorderColor()},f.SetSelectionImageBorderColor=function(c){var m=c;return this.getView().SetSelectionImageBorderColor(m)},f.GetBackgroundColor=function(){return this.getView().GetBackgroundColor()},f.SetBackgroundColor=function(c,l){var g;return!!this._isNoViewer()||(g=this.getView(),l?g.SetBackgroundColor(c,!0):g.SetBackgroundColor(c))},f.GetAllowMultiSelect=function(){var l=this.getView();return!this._isNoViewer()&&l.GetAllowMultiSelect()},f.SetAllowMultiSelect=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetAllowMultiSelect(c)},f.GetFitWindowType=function(){var l=this.getView();return this._isNoViewer()?0:l.GetFitWindowType()},f.SetFitWindowType=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetFitWindowType(c)},f.GetIfFitWindow=function(){var l=this.getView();return!!this._isNoViewer()||l.GetIfFitWindow()},f.SetIfFitWindow=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetIfFitWindow(c)},f.GetImageMargin=function(){var l=this.getView();return this._isNoViewer()?0:l.GetImageMargin()},f.SetImageMargin=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetImageMargin(c)},f.GetMouseShape=function(){var l=this.getView();return this._isNoViewer()?0:l.GetMouseShape()},f.SetMouseShape=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetMouseShape(c)},f.GetShowPageNumber=function(){var l=this.getView();return!this._isNoViewer()&&l.GetShowPageNumber()},f.SetShowPageNumber=function(c){var m=this.getView();return!!this._isNoViewer()||m.SetShowPageNumber(c)},f.GetIfAutoScroll=function(){return this.getView().GetIfAutoScroll()},f.SetIfAutoScroll=function(c){return this.getView().SetIfAutoScroll(c)},f.OverlayRectangle=function(c,l,m,I,p,g,C){return!!this._isNoViewer()||this.getView().OverlayRectangle(c,l,m,I,p,g,C)},f.SetSelectedImageArea=function(c,l,m,I,p){var C=this.getView();return c==C.GetWebViewer().GetCurrentIndex()&&(!!this._isNoViewer()||C.SetSelectedImageArea(l,m,I,p))},f.ShowImagesByFilter=function(c,l,m){return this.getView().FilterImagesByTag(c,l,m)},f.ClearFilter=function(){return this.getView().ClearFilter()},f.GetServerIdListByTag=function(c){return this.getView().GetServerIdListByTag(c)},f.GetAllServerIdList=function(){return this.getView().GetServerIdList()},f.RemoveImageTag=function(c){return this.getView().RemoveImageTag(c)},f.SetDefaultTag=function(c){return this.getView().SetDefaultTag(c)},f.AddImageTag=function(c,l){return this.getView().AddImageTag(c,l)},f.GetCurrentTag=function(){return this.getView().GetCurrentTag()},f.RenameTag=function(c,l){return this.getView().RenameTag(c,l)},f.RemoveTag=function(c,l){return this.getView().RemoveTag(c,l)},f.GetTagList=function(){return this.getView().GetTagList()},f.GetTagListByIndex=function(c){return this.getView().GetTagListByIndex(c)},f.OpenFile=function(c){return this.getView().OpenFile(c)},f.CreateFile=function(c){return this.getView().CreateFile(c)},f.GetCurrentFileName=function(){return this.getView().GetCurrentFileName()},f.RemoveFile=function(c){return this.getView().RemoveFile(c)},f.GetFileInfoList=function(){return this.getView().GetFileInfoList()},f.GetImageIdsByFileName=function(c){return this.getView().GetImageIdsByFileName(c)},f.BindView=function(c){var m=this.getView(),I=c;return e.isString(c)?I=e.get(c):e.isDOM(I)&&(!I.id||""==I.id)&&(I.id=["dwt_",e.getRandom()].join("")),m.BindView(I)},f.UnbindView=function(){return this.getView().UnbindView()},f.GetIfShowVideoContainer=function(){return this.getView().GetIfShowVideoContainer()},f.ShowVideoContainer=function(c){return this.getView().ShowVideoContainer(c)},f.UpdateVideoContainer=function(c){return this.getView().UpdateVideoContainer(c)},f.GetImageData=function(c){var l=this,m=l.getView(),I=l.convertServerIdToClientIndex(c);return I>=0?m.GetImageData(l.getUidByIndex(I)):NaN},f.RegistLoadCallback=function(c){return this.getView().RegistLoadCallback(c)},a.prototype.Clear=function(){var c=this;c.imageUrl="",c.minImageUrl="",c.serverId=-1,c.aryOverlayRectangleData=[]},e.UI=e.UI||{},e.UI.ImageManager=u,e.UI.ModelImageControl=a,e.UI.PrintUrl=function o(c,l,m){var I=this;I.Url=c,I.Width=l,I.Height=m}}function u(c,l){var m=this;m._stwain=c,m.__BackgroundFillColor=16777215,m.bImageJustChangedInEditor=!1,m.bImageChangedInViewer=!1,m._Init(c,l)}function a(){var c=this;c.bIsDirty=!1,c.imageWidth=0,c.imageHeight=0,c.iImageControlWidth=0,c.iImageControlHeight=0,c.imageUrl="",c.minImageUrl="",c.uuid=-1,c.serverId=-1,c.aryOverlayRectangleData=[],c.ticks=Date.now()}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=e.html5.STwain,h=e.html5.Funs,s={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14},i=function(u,f){if(!e.isUndef(u)&&!e.isUndef(f)&&null!=u&&null!=f){for(var a in f)u.hasOwnProperty(a)?"object"==typeof u[a]&&i(u[a],f[a]):u[a]=f[a];return u}};r.prototype.checkStartScanParams=function(u,f){var a=this;if(!u)return e.Errors.ScanUploader_InvalidScanSetup(a),!1;if(!e.isUndefined(f.transferMode)&&0!=u.transferMode&&1!=u.transferMode&&2!=u.transferMode)return e.Errors.ScanUploader_InvalidTransferMode(a),!1;if(u.transferMode==w.DWT.EnumDWT_TransferMode.TWSX_FILE){if(!u.fileXfer)return e.Errors.ScanUploader_InvalidFileXfer(a),!1;if(!e.isString(u.fileXfer.fileName)||""==u.fileXfer.fileName)return e.Errors.ScanUploader_InvalidFileXferFilename(a),!1;if(!e.isNumber(u.fileXfer.fileFormat)||u.fileXfer.fileFormat<0||u.fileXfer.fileFormat>16)return e.Errors.ScanUploader_InvalidFileXferFileFormat(a),!1}if(f){if(!e.isString(f.type)||""==f.type)return e.Errors.ScanUploader_InvalidHttpType(a),!1;if(!f.httpParams)return e.Errors.ScanUploader_InvalidHttpParams(a),!1;if(u.transferMode!=w.DWT.EnumDWT_TransferMode.TWSX_FILE&&e.isUndefined(f.format))return e.Errors.ScanUploader_InvalidOutputFormat(a),!1;if(!e.isString(f.httpParams.url)||""==f.httpParams.url)return e.Errors.ScanUploader_InvalidHttpUrl(a),!1;if(!e.isString(f.httpParams.fileName)||""==f.httpParams.fileName)return e.Errors.ScanUploader_InvalidHttpFilename(a),!1}return!0},r.prototype.startScan=function(u){var f=this,a=u;if(f._resetErr(),!f._isValid())return!1;if(f._isMobileMode())return f._mobileNotSupportAsync("startScan");if(1==f.startScanFlag)return e.Errors.StartScanFailed(f),e.Promise.reject({code:f.ErrorCode,message:f.ErrorString});f.startScanFlag=!0,e.isObject(a)||(a={});var P,E,M,o=!1,c=!1,l=!0,m=!0,I=!0,p=!1,g=a.onFinally,C=[],_=[],v=0,T=1,D=[],O={type:"http",format:w.DWT.EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:!1,singlePost:!0,showProgressBar:!0,removeAfterOutput:!0,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},R=e.clone(a),F=a;if(M=R.funcScanStatus,delete R.funcScanStatus,R.bfuncScanStatus=!!e.isFunction(M),R.outputSetup){var B={pdfSetup:{},tiffSetup:{}};i(R.outputSetup,O),E=R.outputSetup,delete R.outputSetup,E.pdfSetup&&(E.format==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||E.format==w.DWT.EnumDWT_ImageType.IT_PDF)&&e.mix(B.pdfSetup,E.pdfSetup),E.tiffSetup&&(E.format==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF||E.format==w.DWT.EnumDWT_ImageType.IT_TIF)&&e.mix(B.tiffSetup,E.tiffSetup),(E.format==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||E.format==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)&&(E.singlePost=!0),e.isNumber(E.httpParams.threads)&&(T=E.httpParams.threads),o=e.stringify(B),c=f.checkStartScanParams(R,E)}else(E=O).type="",c=f.checkStartScanParams(R,!1);if(!c)return new e.Promise(function(ee,ye){l&&(ye({code:f.ErrorCode,message:f.ErrorString,response:""}),l=!1,f.startScanFlag=!1)});E.funcHttpUploadStatus&&(p=E.funcHttpUploadStatus);var b=f.HttpFieldNameOfUploadedImage,A=f.MaxUploadImageSize,N=f.IfShowProgressBar,Y=f.__IfShowCancelDialogWhenImageTransfer,ne=f.__OnPostTransferAsync,Ie=f.__OnPostAllTransfers,_e=f.__OnHttpUploadStatus,ce=f.__insertingIndex,q=f.__IfAppendImage,he=f.httpFormFields,ie=f._tiffCompressionType,V=!1,J=E.showProgressBar,te=function(ee){var ye=!0;e.each(D,function(Z,Q){-1==Z.st&&(ye=!1)}),ye?oe(ee):setTimeout(function(){te(ee)},200)},oe=function(ee){ee.__OnPostTransferAsync=ne,ee.__OnPostAllTransfers=Ie,ee.__OnHttpUploadStatus=_e,ee.HttpFieldNameOfUploadedImage=b,ee.__maxUploadImageSize=A,ee.IfShowProgressBar=N,ee.__IfShowCancelDialogWhenImageTransfer=Y,ee.__insertingIndex=ce,ee.__IfAppendImage=q,ee.httpFormFields=he,ee._tiffCompressionType=ie,ee.__OnCancel=!1,w.FileUploader&&(w.FileUploader.nextLoopTime=600),ee.startScanFlag=!1},Ee=function(ee,ye,Z){m?(ye(Z),te(ee)):setTimeout(function(){Ee(ee,ye,Z)},200)},ge=function(ee,ye){V=!0,l&&(l=!1,m||f._innerSendCmd("CancelAllPendingTransfers"),Ee(f,ee,ye))},Re=function(ee,ye,Z,Q){if(e.isFunction(p)){var pe,se=ye,le=0;e.isNumber(Q)&&Q>0&&(le=Q),pe={fileName:se,percentage:Z,statusCode:le,responseString:ee.__HTTPPostResponseString},setTimeout(function(){p(pe)},10)}};if(f.__OnCancel=!1,f.__HTTPPostResponseString="",f.IfShowProgressBar=J,f.__IfShowCancelDialogWhenImageTransfer=J,e.isNumber(R.insertingIndex)&&R.insertingIndex>-1&&(f.__insertingIndex=R.insertingIndex,f.__IfAppendImage=!1),f.__OnHttpUploadStatus=!!e.isFunction(p)&&p,E.useUploader&&!w.FileUploader)return new e.Promise(function(ye,Z){e.Errors.Uploader_ModuleError(f),m=!0,ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:""})});if(P=E.reTries,E.useUploader){var G=E.httpParams.url;if(!e.startsWith(G,"http://")&&!e.startsWith(G,"https://")){var k=window.location.href,U=k.lastIndexOf("/");k=k.substring(0,U+1),E.httpParams.url=k+G}}else e.each(E.httpParams.headers,function(ee,ye){f.SetHTTPHeader(ye,ee)}),e.each(E.httpParams.formFields,function(ee,ye){f.SetHTTPFormField(ye,ee)});return""!==E.httpParams.remoteName&&(f.HttpFieldNameOfUploadedImage=E.httpParams.remoteName),new e.Promise(function(ee,ye){E.useUploader?w.FileUploader.Init(0,function(Z){ee({uploadManager:Z})},function(Z,Q){f._errorCode=Z,f._errorString=Q,m=!0,ge(ye,{code:Z,message:Q,response:f.__HTTPPostResponseString})}):ee({})}).then(function(ee){return new e.Promise(function(ye,Z){var Q=function(){(R.transferMode==w.DWT.EnumDWT_TransferMode.TWSX_FILE?v==_.length:v==C.length)?(e.closeProgress("Scan Upload"),V=!0,ye(F),oe(f)):setTimeout(Q,100)};M&&e.isFunction(M)&&(f.__OnPreAllTransfersAsync=function(le){M(le)}),f.RegisterEvent("OnPostTransferAsync",function(le){var pe,Oe,ze,ot,ve,Ce=E.httpParams.url,Te=f.objImageIndexManager.convertGuidToServerId(le.imageId),Be=E.singlePost,xe=R.transferMode==w.DWT.EnumDWT_TransferMode.TWSX_FILE,me=E.removeAfterOutput,Me=0;if(I&&(m=!1,I=!1),xe?(Me=_.length,_.push(le.path)):(Me=C.length,C.push(Te)),M&&e.isFunction(M)){var Ze={event:"postTransfer",bScanCompleted:!1,result:{currentPageNum:Me+1}};setTimeout(function(){M(Ze)},10)}if(V)return!1;if("http"==E.type&&(Oe=h.cformat(E.httpParams.fileName,Me+1),ze=h.cformat(E.httpParams.remoteName,Me+1),!Be&&"http"==E.type))if(e.isNumber(E.httpParams.maxSizeLimit)&&(f.__maxUploadImageSize=E.httpParams.maxSizeLimit),E.useUploader){J&&(w.FileUploader.nextLoopTime=300,e.showProgress(f,"Scan Upload",!0)),ot=function(He,Ke){return f.__HTTPPostResponseString=Ke,Re(f,He._fileName,100,200),f._OnPercentDone([0,100,"","http",He._fileName]),J&&e.closeProgress("Scan Upload"),!xe&&E.removeAfterOutput?setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1?f._removeImageById(Te,function(){v++},function(){v++}):v++},100):v++,!0};var Fe,Ve,Ye=ee.uploadManager;if(Fe=function(){if(J){var Ke,He;for(He=xe?_.length:C.length,Ke=0;Ke<He;Ke++)e.closeProgress("Scan Upload")}return!xe&&E.removeAfterOutput&&setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1&&f._removeImageById(Te)},100),Ye.CancelAllUpload(),ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString}),!1},ve=function(He,Ke,rt,st){var ht=303;Ke==s.TRANS_SERVICE_ERROR_404?ht=404:Ke==s.TRANS_SERVICE_ERROR_500?ht=500:Ke==s.TRANS_SERVICE_ERROR_503&&(ht=503),f._errorCode=Ke,f._errorString=rt,f.__HTTPPostResponseString=st,Re(f,Oe,100,ht),Fe()},f.__OnCancel=function(){ve(null,-1032,"User cancelled the operation.","")},Ve=function(){f.__HTTPPostResponseString="",Re(f,Oe,100,303),Fe()},xe){var Ne=Ye.CreateJob(),Je=Ne.FormField;e.each(E.httpParams.headers,function(He,Ke){Ne.HttpHeader[Ke]=He}),e.each(E.httpParams.formFields,function(He,Ke){Je.Add(Ke,He)}),Ne.ServerUrl=Ce,Ne.bDeleteFile=me,Ne.reTries=P,e.isNumber(E.httpParams.maxSizeLimit)&&(Ne.maxSizeLimit=E.httpParams.maxSizeLimit),Ne._fileName=Oe,Ne.SourceValue.Add(le.path,Oe,ze),Ne.ImageType=R.fileXfer.fileFormat,Ne.ThreadNum=T,Ne.OnRunSuccess=ot,Ne.OnRunFailure=ve,(J||e.isFunction(p))&&(Ne.OnUploadTransferPercentage=function(He,Ke){Ke>0&&Ke<=100&&(100==Ke&&(Ke=99),J&&f._OnPercentDone([0,Ke,"","http",He._fileName]),e.isFunction(p)&&Re(f,He._fileName,Ke,0))},e.cancelFrome=5,J&&f._OnPercentDone([0,-1,w.MSG.Uploading,"http",Oe]),Re(f,Oe,0,0)),Ye.Run(Ne)}else(pe=E.format)==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?pe=w.DWT.EnumDWT_ImageType.IT_PDF:pe==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(pe=w.DWT.EnumDWT_ImageType.IT_TIF),J&&(e.cancelFrome=5,f._OnPercentDone([0,-1,w.MSG.Encoding,"http",Oe])),f._asyncGenerateURLForUploadData([Te],pe,o,function(He){var Ke=Ye.CreateJob(),rt=Ke.FormField;e.each(E.httpParams.headers,function(st,ht){Ke.HttpHeader[ht]=st}),e.each(E.httpParams.formFields,function(st,ht){rt.Add(ht,st)}),Ke.ServerUrl=Ce,Ke.bDeleteFile=me,Ke.reTries=P,e.isNumber(E.httpParams.maxSizeLimit)&&(Ke.maxSizeLimit=E.httpParams.maxSizeLimit),Ke._fileName=Oe,Ke.SourceValue.Add(He,Oe,ze),Ke.ImageType=pe,Ke.ThreadNum=T,Ke.OnRunSuccess=ot,Ke.OnRunFailure=ve,(J||e.isFunction(p))&&(Ke.OnUploadTransferPercentage=function(st,ht){ht>0&&ht<=100&&(100==ht&&(ht=99),J&&f._OnPercentDone([0,ht,"","http",st._fileName]),e.isFunction(p)&&Re(f,st._fileName,ht,0))},e.cancelFrome=5,J&&f._OnPercentDone([0,-1,w.MSG.Uploading,"http",Oe]),Re(f,Oe,0,0)),Ye.Run(Ke)},Ve)}else{var we={id:Te,st:-1,bCancel:!1};if(D.push(we),0==Me&&e.showProgress(f,"Scan Upload",!0),xe)ot=function(He){return we.st=0,!xe&&E.removeAfterOutput?setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1?f._removeImageById(Te,function(){v++},function(){v++}):v++},100):v++,!0},ve=function(){!xe&&E.removeAfterOutput&&setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1&&f._removeImageById(Te)},100);var He={code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString};return e.closeProgress("Scan Upload"),2==we.st||(we.st=1,e.each(D,function(Ke,rt){-1==Ke.st&&(Ke.bCancel=!0)}),ge(Z,He)),!1},f._innerUploadDirectly(Ce,le.path,Oe,J,me,P,!1,we,ot,ve);else{if(ot=function(He,Ke){return we.st=0,!xe&&E.removeAfterOutput?setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1?f._removeImageById(Te,function(){v++},function(){v++}):v++},100):v++,!0},ve=function(He){!xe&&E.removeAfterOutput&&setTimeout(function(){f._ImgManager.convertServerIdToClientIndex(Te)>-1&&f._removeImageById(Te)},100);var Ke={code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString};return e.closeProgress("Scan Upload"),2==we.st||(we.st=1,e.each(D,function(rt,st){-1==rt.st&&(rt.bCancel=!0)}),ge(Z,Ke)),!1},e.isUndefined(pe=E.format)){var Ae=f._ImgManager.convertServerIdToClientIndex(Te);return e.Errors.InvalidImageType(f),ve([Ae]),!1}pe==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?pe=w.DWT.EnumDWT_ImageType.IT_PDF:pe==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(pe=w.DWT.EnumDWT_ImageType.IT_TIF),e._asyncUploadCmd({bOnlyUploadForm:!1,method:"startScan",_this:f,url:Ce,serverIds:[Te],enumImageType:pe,saveSetup:o,fileName:Oe,dataFormat:w.DWT.EnumDWT_UploadDataFormat.Binary,retry:P,bOnlyEmptyIsOK:!1,objUploadFileStatus:we,asyncSuccessFunc:ot,asyncFailureFunc:ve})}}}),f.__OnPostAllTransfers=function(){var le,me,Me,pe=w.DWT.EnumDWT_UploadDataFormat.Binary,Ce=E.httpParams.url,Te=E.singlePost,Be=R.transferMode==w.DWT.EnumDWT_TransferMode.TWSX_FILE,xe=E.removeAfterOutput;if(M&&e.isFunction(M)&&(Me={event:"postTransfer",bScanCompleted:!0,result:{currentPageNum:me=Be?_.length:C.length}},setTimeout(function(){M(Me)},10)),0==me)return e.Errors.SourceHasNothingToCapture(f),void setTimeout(function(){m=!0,g&&e.isFunction(g)&&g(),ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString})},1e3);if(me>0&&-1029==f.ErrorCode)f._errorCode=0;else if(0!=f.ErrorCode)return m=!0,g&&e.isFunction(g)&&g(),void ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString});if("http"==E.type&&Te&&"http"==E.type){var ze,Ze,ve=C;if(e.isNumber(E.httpParams.maxSizeLimit)&&(f.__maxUploadImageSize=E.httpParams.maxSizeLimit),E.useUploader){var Je,we,Ve=ee.uploadManager,Ye=Ve.CreateJob(),Ne=Ye.FormField;if(J&&(w.FileUploader.nextLoopTime=300,e.showProgress(f,"Scan Upload",!0)),ze=function(ft,pt){var Ct=ft._fileName;return Ct||(Ct=""),f._bServerPercentDone=!0,f.__HTTPPostResponseString=pt,Re(f,Ct,100,200),f._OnPercentDone([0,100,"","http"]),J&&e.closeProgress("Scan Upload"),!Be&&E.removeAfterOutput?setTimeout(function(){v=0,e.each(ve,function(St){f._ImgManager.convertServerIdToClientIndex(St)>-1?f._removeImageById(St,function(){v++},function(){v++}):v++}),setTimeout(Q,100)},100):(V=!0,ye(F),oe(f)),!0},Je=function(){return f._OnPercentDone([0,100,"","http"]),J&&e.closeProgress("Scan Upload"),f._bServerPercentDone=!0,ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString}),!Be&&E.removeAfterOutput&&setTimeout(function(){e.each(ve,function(pt){f._ImgManager.convertServerIdToClientIndex(pt)>-1&&f._removeImageById(pt)})},100),!1},Ze=function(ft,pt,Ct,St){var At=303;pt==s.TRANS_SERVICE_ERROR_404?At=404:pt==s.TRANS_SERVICE_ERROR_500?At=500:pt==s.TRANS_SERVICE_ERROR_503&&(At=503),f._errorCode=pt,f._errorString=Ct,f.__HTTPPostResponseString=St,Re(f,"",100,At),Je()},f.__OnCancel=function(){Ze(null,-1032,"User cancelled the operation.","")},we=function(){f.__HTTPPostResponseString="",Re(f,"",100,303),Je()},Be)e.each(E.httpParams.headers,function(ft,pt){Ye.HttpHeader[pt]=ft}),e.each(E.httpParams.formFields,function(ft,pt){Ne.Add(pt,ft)}),Ye.ServerUrl=Ce,Ye.bDeleteFile=xe,Ye.reTries=P,e.isNumber(E.httpParams.maxSizeLimit)&&(Ye.maxSizeLimit=E.httpParams.maxSizeLimit),e.each(_,function(ft,pt){var Ct=h.cformat(E.httpParams.fileName,pt+1),St=h.cformat(E.httpParams.remoteName,pt+1);Ye.SourceValue.Add(ft,Ct,St)}),Ye.ImageType=R.fileXfer.fileFormat,Ye.ThreadNum=T,Ye.OnRunSuccess=ze,Ye.OnRunFailure=Ze,(J||e.isFunction(p))&&(Ye.OnUploadTransferPercentage=function(ft,pt){pt>0&&pt<=100&&(100==pt&&(pt=99),J&&f._OnPercentDone([0,pt,"","http"]),e.isFunction(p)&&(pt>99&&(pt=99),Re(f,"",pt,0)))},J&&f._OnPercentDone([0,-1,w.MSG.Uploading,"http"]),Re(f,"",0,0)),Ve.Run(Ye);else if((le=E.format)==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF)le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?le=w.DWT.EnumDWT_ImageType.IT_PDF:le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(le=w.DWT.EnumDWT_ImageType.IT_TIF),J&&f._OnPercentDone([0,-1,w.MSG.Encoding,"http"]),f._asyncGenerateURLForUploadData(ve,le,o,function(ft){e.each(E.httpParams.headers,function(St,At){Ye.HttpHeader[At]=St}),e.each(E.httpParams.formFields,function(St,At){Ne.Add(At,St)}),Ye.ServerUrl=Ce,Ye.bDeleteFile=xe,Ye.reTries=P,e.isNumber(E.httpParams.maxSizeLimit)&&(Ye.maxSizeLimit=E.httpParams.maxSizeLimit);var pt=h.cformat(E.httpParams.fileName,1),Ct=h.cformat(E.httpParams.remoteName,1);Ye._fileName=pt,Ye.SourceValue.Add(ft,pt,Ct),Ye.ImageType=le,Ye.ThreadNum=T,Ye.OnRunSuccess=ze,Ye.OnRunFailure=Ze,(J||e.isFunction(p))&&(Ye.OnUploadTransferPercentage=function(St,At){At>0&&At<=100&&(100==At&&(At=99),J&&f._OnPercentDone([0,At,"","http",pt]),e.isFunction(p)&&Re(f,pt,At,0))},e.cancelFrome=5,J&&f._OnPercentDone([0,-1,w.MSG.Uploading,"http",pt])),Ve.Run(Ye)},we);else{var Ae=ve.length,Ue=0,He=0,Ke="";J&&(f._bServerPercentDone=!1,f._OnPercentDone([0,-1,w.MSG.Encoding,"http"])),e.each(ve,function(ft,pt){var Ct=h.cformat(E.httpParams.fileName,pt+1),St=h.cformat(E.httpParams.remoteName,pt+1);f._asyncGenerateURLForUploadData([ft],le,o,function(At){He=(Ue+1)/Ae*100,Ke=[Ue+1,"/",Ae].join(""),f._OnPercentDone([0,He,Ke,"http"]),Ye.SourceValue.Add(At,Ct,St),++Ue>=Ae&&(J&&(f._bServerPercentDone=!0),e.each(E.httpParams.headers,function(En,mn){Ye.HttpHeader[mn]=En}),e.each(E.httpParams.formFields,function(En,mn){Ne.Add(mn,En)}),Ye.ServerUrl=Ce,Ye.bDeleteFile=xe,Ye.reTries=P,e.isNumber(E.httpParams.maxSizeLimit)&&(Ye.maxSizeLimit=E.httpParams.maxSizeLimit),Ye.ImageType=le,Ye.ThreadNum=T,Ye.OnRunSuccess=ze,Ye.OnRunFailure=Ze,(J||e.isFunction(p))&&(Ye.OnUploadTransferPercentage=function(En,mn){mn>0&&mn<=100&&(100==mn&&(mn=99),J&&f._OnPercentDone([0,mn,"","http"]),e.isFunction(p)&&(mn>99&&(mn=99),Re(f,"",mn,0)))},J&&f._OnPercentDone([0,-1,w.MSG.Uploading,"http"])),Ve.Run(Ye))},we)})}}else if(Be)ze=function(ft){return f._bServerPercentDone=!0,!Be&&E.removeAfterOutput?setTimeout(function(){v=0,e.each(ve,function(pt){f._ImgManager.convertServerIdToClientIndex(pt)>-1?f._removeImageById(pt,function(){v++},function(){v++}):v++}),setTimeout(Q,100)},100):(V=!0,ye(F),oe(f)),!0},Ze=function(ft){return f._bServerPercentDone=!0,ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString}),!Be&&E.removeAfterOutput&&setTimeout(function(){e.each(ve,function(Ct){f._ImgManager.convertServerIdToClientIndex(Ct)>-1&&f._removeImageById(Ct)})},100),!1},f._innerUploadFilesDirectly(Ce,_,E.httpParams.fileName,J,xe,P,!1,ze,Ze);else if(ze=function(ft,pt){return f._bServerPercentDone=!0,!Be&&E.removeAfterOutput?setTimeout(function(){v=0,e.each(ve,function(Ct){f._ImgManager.convertServerIdToClientIndex(Ct)>-1?f._removeImageById(Ct,function(){v++},function(){v++}):v++}),setTimeout(Q,100)},100):(V=!0,ye(F),oe(f)),!0},Ze=function(ft){return f._bServerPercentDone=!0,ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString}),!Be&&E.removeAfterOutput&&setTimeout(function(){e.each(ve,function(Ct){f._ImgManager.convertServerIdToClientIndex(Ct)>-1&&f._removeImageById(Ct)})},100),!1},(le=E.format)==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF||le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF){le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_PDF?le=w.DWT.EnumDWT_ImageType.IT_PDF:le==w.DWT.EnumDWT_ImageType.IT_MULTIPAGE_TIF&&(le=w.DWT.EnumDWT_ImageType.IT_TIF);var rt=h.cformat(E.httpParams.fileName,1);h.cformat(E.httpParams.remoteName,1),e._asyncUploadCmd({bOnlyUploadForm:!1,method:"startScan",_this:f,url:Ce,serverIds:ve,enumImageType:le,saveSetup:o,fileName:rt,dataFormat:pe,retry:P,bOnlyEmptyIsOK:!1,objUploadFileStatus:!1,asyncSuccessFunc:ze,asyncFailureFunc:Ze})}else f._asyncUploadFilesCmd(Ce,ve,le,E.httpParams.fileName,o,J,P,!1,ze,Ze)}m=!0,g&&e.isFunction(g)&&g()};var se=function(){"http"!=E.type?(V=!0,ye(F),oe(f)):E.singlePost||setTimeout(Q,100)};f._startScan(R,se,function(le){if(-1029==f.ErrorCode&&(R.transferMode==w.DWT.EnumDWT_TransferMode.TWSX_FILE?_.length>0:C.length>0))return f._errorCode=0,se();ge(Z,{code:f.ErrorCode,message:f.ErrorString,response:f.__HTTPPostResponseString})})})})}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=w.DWT,d=w.navInfo,s=e.each;e.env.WSVersion="12.0.0",e.env.WSSession=(new Date).getTime(),e.getHttpUrl=function(u){return u.ssl?["https://",u.host,":",u.port,"/"].join(""):["http://",u.host,":",u.port,"/"].join("")},e.getWSUrl=function(u,f,a){return a?["wss://",u,":",f].join(""):["ws://",u,":",f].join("")},e.getWS_bywsurl=function(u){var a,o=e.product.wsProtocol,c=window.MozWebSocket;if(this.detect.OnCreatWS&&this.detect.OnCreatWS(u,o),typeof c<"u")a=o?new c(u,o):new c(u);else{var l=window.WebSocket;if(d.bEdge){var m=window,I=parent;try{for(;m!=I&&I.WebSocket;)l=I.WebSocket,m=I.window,I=I.parent}catch{l=window.WebSocket}}a=o?new l(u,o):new l(u)}return w.DWT.globalWS.push(a),a},e.getWS=function(u,f,a){var o=e.getWSUrl(u,f,a);return e.getWS_bywsurl(o)},e._init=function(u){var l,f=w.Lib,a=w.dcp,o=f.LS.item("DWT_port"),c=f.LS.item("DWT_ssl");if(a.bEnhancedMode||(f.detect.urls.splice(0),f.detect.cUrlIndex=0,!u.bLocalService))return!0;o!==t&&c!==t&&(l={port:o,ssl:"true"==c});var m=function(g){return!(l&&(!g||g.port==l.port&&g.ssl==l.ssl))};1===f.detect.detectType?(l!==t&&l.ssl&&f.detect.urls.push(l),s(f.detect.ports,function(g){g.ssl&&m(g)&&f.detect.urls.push(g)})):0===f.detect.detectType?(l!==t&&!l.ssl&&f.detect.urls.push(l),s(f.detect.ports,function(g){!1===g.ssl&&m(g)&&f.detect.urls.push(g)})):(l!==t&&f.detect.urls.push(l),s(f.detect.ports,function(g){m(g)&&f.detect.urls.push(g)}))},e._reconnect=function(){var u=r.ContainerMap;u&&e.each(u,function(f,a){e._reconnectDWT(f)})},e._reconnectDWT=function(u){var f,a,o;if(u&&!u.__bConnecting&&!u.bReady){var c;u.__bConnecting=!0,f=u._host,o=u._ssl,a=u._port;try{(c=e.getWS(f,a,o)).onopen=function(){1==c.readyState?(u._objWS=c,c.clientId=u.clientId,u.bReady||u._OnReady(!0),u.__bConnecting=!1,e.detect.hideMask(),e.detect.bOK=!0):0==c.readyState?setTimeout(c.onopen,100):u.__bConnecting=!1},c.onclose=c.onerror=function(){c.onopen=null,u.__bConnecting=!1,u.bReady?(e.closeProgress("Reconnect"),e.detect.hideMask()):(u.__wsRetry++,u.__wsRetry<5?setTimeout(e._reconnect,500):(e.closeProgress("Reconnect"),e.Errors.Server_Restarted(u))),w.Lib.each(w.DWT.globalWS,function(l,m){if(l==c)return w.DWT.globalWS.splice(m,1),!1})}}catch(l){e.log(l),c&&w.Lib.each(w.DWT.globalWS,function(m,I){if(m==c)return w.DWT.globalWS.splice(I,1),!1}),u.__bConnecting=!1,u.bReady?e.detect.hideMask():(u.__wsRetry++,u.__wsRetry<5&&setTimeout(e._reconnect,500))}}},e._checkAndReconnect=function(u,f){w.DWT.CheckConnectToTheService(u,f,function(){setTimeout(e._reconnect,500)},function(){setTimeout(function(){e._checkAndReconnect(u,f)},500)})},e.connectToWS=function(u){if(!u.bReady&&!u.__bConnecting){var f;u.__bConnecting=!0;try{f=e.getWS(e.product.host,u._port,u._ssl),e.log(["connecting ... [port:",u._port,"]"].join("")),f.onopen=function(){u.__bConnecting=!1,1==f.readyState?(u._objWS=f,f.clientId=u.clientId,u.bReady||u._OnReady(!0)):0==f.readyState&&setTimeout(f.onopen,100)},f.onclose=f.onerror=function(){f.onopen=null,u.__bConnecting=!1,u.bReady&&e.detect.hideMask(),w.Lib.each(w.DWT.globalWS,function(a,o){if(a==f)return w.DWT.globalWS.splice(o,1),!1})}}catch(a){e.log(a),f&&w.Lib.each(w.DWT.globalWS,function(o,c){if(o==f)return w.DWT.globalWS.splice(c,1),!1}),u.__bConnecting=!1,u.bReady&&e.detect.hideMask()}}},e.startWS=function(){var f,u=e.detect,a=!0;if(e.product.bHTML5Edition)if(e.IsNeedLoadWasm()&&(a=!1),a&&u.tryTimes>5)e.log("Failed more than 5 times.");else{var o,c,l;if(u.OnDetectNext&&u.OnDetectNext(),0==u.tryTimes&&u.cUrlIndex>0&&u.arySTwains.length>0&&!u.bNoControlEvent)u.hideMask(),e.isFunction(u.onNoControl)&&((c=(o=u.arySTwains[0])._width)<=0&&(c=270),(l=o._height)<=0&&(l=350),u.onNoControl(o._containerElement,c,l,o)),u.bNoControlEvent=!0;if(a&&u.cUrlIndex>=u.urls.length&&(u.cUrlIndex=0,u.tryTimes++),!(u.arySTwains.length>0))return e.closeLoadingMsg(),void(u.bOK=!0);var m=(f=u.arySTwains[0])._getWebTwainId();if(r.ContainerMap[m]?(f._OnReady(),f.dispose()):0==f._bLocalService&&(f.bReady=!0,f._OnReady()),f.bReady||f._destroy)return u.arySTwains.splice(0,1),void(u.arySTwains.length<=0?u.bOK=!0:setTimeout(e.startWS,100));if(u.bNoControlEvent||u.showMask(),!f.__bConnecting){f.__bConnecting=!0;var I=u.urls[u.cUrlIndex];return i(e.product.host,I.port,I.ssl).then(function(p){f.__bConnecting=!1,f._objWS=p.ws,p.ws.clientId=f.clientId,f._host=p.host,f._port=p.port,f._ssl=p.ssl,w.DWT.IfUseWSPool&&e._addToWSPool(f),f.bReady||(f.bReady=!0,f._OnReady()),u.arySTwains.splice(0,1),u.arySTwains.length<=0?(u.hideMask(),u.bOK=!0):setTimeout(e.startWS,100)},function(p){e.log(p),f.__bConnecting=!1,f.bReady?u.hideMask():(u.cUrlIndex++,setTimeout(e.startWS,100))})}}else e.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},e.startWSByIP=function(){var f,u=e.detect;if(e.product.bHTML5Edition){if(!(u.arySTwainsByIP.length>0))return u.hideMask(),void(u.bOK=!0);var a=(f=u.arySTwainsByIP[0])._getWebTwainId();if(r.ContainerMap[a]?(f._OnReady(),f.dispose()):0==f._bLocalService&&(f.bReady=!0,f._OnReady()),f.bReady||f._destroy)return u.arySTwainsByIP.splice(0,1),void(u.arySTwainsByIP.length<=0?(u.hideMask(),u.bOK=!0):setTimeout(e.startWSByIP,100));if(u.bNoControlEvent||u.showMask(),!f.__bConnecting){var o,c;if(f.__wsRetry>0&&!u.bNoControlEvent)u.hideMask(),e.isFunction(u.onNoControl)&&((o=f._width)<=0&&(o=270),(c=f._height)<=0&&(c=350),u.onNoControl(f._containerElement,o,c,f)),u.bNoControlEvent=!0;return f.__bConnecting=!0,i(f._host,f._port,f._ssl).then(function(l){f.__bConnecting=!1,f._objWS=l.ws,l.ws.clientId=f.clientId,w.DWT.IfUseWSPool&&e._addToWSPool(f),f.bReady||(f.bReady=!0,f._OnReady()),u.arySTwainsByIP.splice(0,1),u.arySTwainsByIP.length<=0?(u.hideMask(),u.bOK=!0):setTimeout(e.startWSByIP,100)},function(l){e.log(l),f.__bConnecting=!1,f.bReady?u.hideMask():(f.__wsRetry++,setTimeout(e.startWSByIP,100))})}}else e.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!")},e.html5.closeAll=function(){var u,f,a,o,c,l,m,I;for(e.dlgProgress=!1,e.detect.bOK=!1,e.detect.bFirst=!0,u=e.detect.arySTwains.length-1;u>=0;u--)if(a=e.detect.arySTwains[u]){for(l=a._id,a._containerElement&&(c=a._containerElement,o=a._containerElement.id),I=!1,f=0;f<w.DWT.Containers.length;f++)if((m=w.DWT.Containers[f])&&(l==m.WebTwainId||o&&o==m.ContainerId||c==m.Container)){I=!0;break}I&&(a.__unload(),e.detect.arySTwains.splice(u,1)),a._isMobileMode()}},e.bio=!1,e.progressMessage="",e.dialogShowStatus=!1,e.needShowTwiceShowDialog=!1,e.dlgProgress=!1,e.cancelFrome=0,e.dlgRef=0,e.initProgress=function(){var f,a;if(!e.dlgProgress){(a=[]).push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">'),a.push('<h3 class="dynamsoft-finalMessage"> </h3>'),a.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>'),a.push(d.bIE?'<div class="dynamsoft-progressBar" value="" max="100"></div>':'<progress class="dynamsoft-progressBar" value="" max="100"></progress>'),a.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>'),a.push("</div></dialog>"),(f=e.one(".dynamsoft-dwt-dialogProgress"))&&f.getEL()&&f.remove();var o=e.parseHTML(a.join(""));if(o&&o.length>0&&document.body.appendChild(o[0]),d.bIE){var c=e.one(".dynamsoft-progressBar"),l=c&&c.getEL();l&&(l.objProgressBar=new e.ProgressBar(l,{width:280,height:20}))}(f=e.one(".dynamsoft-dwt-dialogProgress"))&&f.getEL()&&(e.dlgProgress=f[0],e.dialog.setup(e.dlgProgress)),e.dlgRef=0,e.dialogShowStatus=!1,e.cancelFrome=0}},e.setBtnCancelVisibleForProgress=function(u){if(!(e.dlgRef<=0||0==e.dialogShowStatus)){var f=e.one(".dynamsoft-btnCancel"),a=f&&f.getEL();a&&(a.style.display=u?"":"none")}},e.showProgressMsg=function(u,f,a){if(!(e.dlgRef<=0||0==e.dialogShowStatus)){var o=e.one(".dynamsoft-progressBar"),c=e.one(".dynamsoft-status"),l=e.one(".dynamsoft-finalMessage"),m=e.one(".dynamsoft-desc"),I=u;u<0?I=0:u>100&&(I=100),I=Math.floor(I),l&&l.getEL()&&l.html(f),m&&m.getEL()&&m.html(a),(I||0===I)&&(c&&c.getEL()&&c.html(I+"%"),o&&o.getEL()&&(d.bIE?o[0].objProgressBar?o[0].objProgressBar.setValue(I):o[0].value=I:(d.bEdge&&(o[0].style.display=""),o[0].value=I))),I&&(I>=100||e.dlgRef<=0)&&(setTimeout(function(){o&&o.getEL()&&(d.bIE?o[0].objProgressBar?o[0].objProgressBar.setValue(0):o[0].value=0:(d.bEdge&&(o[0].style.display="none"),o[0].value=0))},300),e.dlgRef<=0)&&e.closeProgress("OnPercentDone")}},e.showProgress=function(u,f,a){var o=u;if(e.log("showProgress:"+f+",bCancel:"+a),0==e.cancelFrome&&1==o.__IfShowProgressBar||0!=e.cancelFrome&&1==o.__IfShowCancelDialogWhenImageTransfer){var c=e.one(".dynamsoft-btnCancel"),l=c&&c.getEL();if(l&&(l.style.display=0==a?"none":""),0==e.dialogShowStatus){e.dlgProgress&&e.dlgProgress.showModal(),e.dialogShowStatus=!0;var m=e.one(".dynamsoft-finalMessage"),I=e.one(".dynamsoft-progressBar"),p=I&&I.getEL(),g=e.one(".dynamsoft-status");m&&m.getEL()&&m.html(""),g&&g.getEL()&&g.html("0%"),p&&(d.bIE&&p.objProgressBar?p.objProgressBar.setValue(0):p.value=0)}e.dlgRef++}},e.closeProgress=function(u){e.log("closeProgress:"+u);var f=e.one(".dynamsoft-btnCancel");e.dlgRef--,e.dlgRef<=0&&(e.dlgRef=0),1==e.needShowTwiceShowDialog&&1==e.cancelFrome?f&&f.getEL()&&(f[0].innerHTML="Cancel"):(f&&f.getEL()&&(f[0].innerHTML="Cancel"),0==e.dlgRef&&(1==e.dialogShowStatus&&(e.dlgProgress&&e.dlgProgress.close(),e.dialogShowStatus=!1),e.needShowTwiceShowDialog=!1,e.cancelFrome=0))},e.html5.CreateDWTObject=function(u){var f,a;for(a=0;a<e.detect.arySTwains.length;a++)if(e.detect.arySTwains[a]._id==u.id)return!1;return f=new e.html5.STwain(u),u.customIP?(e.detect.arySTwainsByIP.push(f),f):(e.detect.arySTwains.push(f),e.detect.bFirst&&e._init(u),e.detect.bFirst=!1,f)},r.RemoveAllAuthorizations=function(){var c,u=e.LS.item("DWT_port"),a="http://";return"true"==e.LS.item("DWT_ssl")&&(a="https://"),c=[a,e.product.host,":",u,"/dwt/",e.product.getDWTPrefix(),e.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",e.now()].join(""),e.ajax({method:"GET",xhrFields:{withCredentials:!0},url:c,async:!0}),!0},e._reconnectWSPool=function(){e.each(e.detect.aryWSPool,function(u){u&&!u.bOK&&!u.__bConnecting&&e._reconnectWSElement(u)})},e._reconnectWSElement=function(u){var f,a;if(u&&!u.bOK&&!u.__bConnecting){f=u.wsurl,u.__bConnecting=!0,u.__wsRetry=0;var o=function(){a&&(w.Lib.each(w.DWT.globalWS,function(c,l){if(c==a)return w.DWT.globalWS.splice(l,1),!1}),a.onopen=null),u.__wsRetry++,u.__wsRetry<5?setTimeout(e._reconnectWSPool,500):(u.__bConnecting=!1,e.closeProgress("Reconnect"),e.each(u.list,function(c,l){e.Errors.Server_Restarted(c)}))};try{(a=e.getWS_bywsurl(f)).onopen=function(){1==a.readyState?(a.onopen=null,e.each(u.list,function(c,l){c._objWS=a,a.clientId=c.clientId,c.bReady||c._OnReady(!0)}),u.__bConnecting=!1,u.bOK=!0,e.detect.hideMask()):0==a.readyState?setTimeout(a.onopen,300):u.__bConnecting=!1},a.onclose=o}catch(c){e.log(c),a&&w.Lib.each(w.DWT.globalWS,function(l,m){if(l==a)return w.DWT.globalWS.splice(m,1),!1}),setTimeout(o,500)}}},e._deliverMsg=function(u,f){var a=f.id,o=[];f.indexOf('"method" : "EnableBuffer"')>=0||f.indexOf('"method" : "GetBuffer"')>=0?w.DWT.lwsproc(f):(e.each(e.detect.aryWSPool,function(c,l){if(c.wsurl==u)return o=c.list,!1}),e.each(o,function(c,l){if(c.clientId==a)return c._OnRecieveMsg&&c._OnRecieveMsg(f),!1}))},e._addToWSPool=function(u){var f,a=u._objWS.url;e.each(e.detect.aryWSPool,function(o,c){if(o.wsurl==a)return f=o,!1}),f&&e.isArray(f.list)?f.list.push(u):e.detect.aryWSPool.push({wsurl:a,list:[u]})},e._removeFromWSPool=function(u){var f,a,o;u&&u._objWS&&(a=u._objWS.url),e.each(e.detect.aryWSPool,function(c,l){if(c.wsurl==a)return f=c,!1}),f&&e.isArray(f.list)&&((o=f.list.indexOf(u))>-1&&f.list.splice(o,1),0==f.list.length&&(f.ws.close(),f.wsurl="",delete f.ws,(o=e.detect.aryWSPool.indexOf(f))>-1&&e.detect.aryWSPool.splice(o,1)))}}function i(u,f,a){var o={host:u,port:f,ssl:a,ws:null};return new Promise(function(c,l){if(e.product.bHTML5Edition)try{o.ws=e.getWS(o.host,o.port,o.ssl),e.log(["connecting ... [host ssl port:",o.host,o.ssl,o.port,"]"].join(" ")),o.ws.onopen=function(){1==o.ws.readyState?c(o):0==o.ws.readyState&&setTimeout(o.ws.onopen,100)},o.ws.onclose=o.ws.onerror=function(){w.Lib.each(w.DWT.globalWS,function(I,p){if(I==o.ws)return w.DWT.globalWS.splice(p,1),!1}),o.ws.onopen=null,o.ws.onclose=null,o.ws.onerror=null,o.ws=null,l("WebSocket closed.")}}catch(I){e.log(I),o.ws&&(w.Lib.each(w.DWT.globalWS,function(p,g){if(p==o.ws)return w.DWT.globalWS.splice(g,1),!1}),o.ws.onopen=null,o.ws.onclose=null,o.ws.onerror=null,o.ws=null),l(I.message)}else l("This browser is currently not supported. Please try Chrome or Firefox!")})}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var l,r=document,d=window,s=w.DWT,u=s.CustomizableDisplayInfo.dialogText,f=e.html5.Funs2,a="transparent",o="#F0EFF4",m={isFunction:function(g){return g&&"function"==typeof g},addClass:function(g,C){var _=e.one(g);_&&_.length>0&&_.addClass(C)},removeClass:function(g,C){var _=e.one(g);_&&_.length>0&&_.removeClass(C)},output:function(g,C){w.DWT.Debug&&e.log(C)},getTop:function(g){var C=g.offsetTop;return null!=g.offsetParent&&(C+=m.getTop(g.offsetParent)),C},getLeft:function(g){var C=g.offsetLeft;return null!=g.offsetParent&&(C+=m.getLeft(g.offsetParent)),C}};e._safePromptCustomMsg(function(){u=s.CustomizableDisplayInfo.dialogText,s.CustomizableDisplayInfo.buttons,l={toolbars:{header:!1,bottomMenu:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},dynamsoftDocumentTopGroup:{visibility:!0,location:"topMenu",sequence:1},dynamsoftDocumentBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},close:{visibility:!0,location:"dynamsoftDocumentTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left ds-dwt-ui-mobile-icon-left",sequence:1,onButtonClick:"OnClose"},rotateLeft:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage ds-dwt-ui-icon-color",sequence:1,onButtonClick:"OnRotateLeft"},flip:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage ds-dwt-ui-icon-color",sequence:1,onButtonClick:"OnFlip"},mirror:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"OnMirror"},crop:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-cropImage-grey",sequence:3,onButtonClick:"OnCrop"},cut:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-erase-grey",sequence:4,onButtonClick:"OnErase"},hand:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand ds-dwt-ui-icon-color",sequence:5,onButtonClick:"OnHand"},select:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select ds-dwt-ui-icon-color",sequence:6,onButtonClick:"OnSelect"},save:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:7,onButtonClick:"OnSave"},restore:{visibility:!0,location:"dynamsoftDocumentBottomGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore ds-dwt-ui-icon-color",sequence:8,onButtonClick:"OnRestore"},documentCrop:{visibility:!0,location:"dynamsoftDocumentTopGroup",iconClass:"d-icon-font ds-dwt-ui-icon-color ds-dwt-ui-icon-cropImage ds-dwt-ui-icon-right",sequence:2,onButtonClick:"OnDocumentCrop"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)",backgroundColor:"#fff"},tipsConfig:{},canvasConfig:{selectedPageBackground:a,selectedPageBorder:"",hoverPageBackground:a,canvasBorder:"",canvasBackground:o},allowSlide:!1,outerBorder:"",topMenuBorder:""}}),I.prototype.show=function(){return this._documentEditorInner.show()},I.prototype.hide=function(){return this._documentEditorInner.hide()},I.prototype.dispose=function(){return this._documentEditorInner.OnCloseInner(!0)},e.UI=e.UI||{},e.UI.DocumentEditor=I,p.prototype.showMenu=function(g){var C=this,_=document.getElementById("documentCrop"+C.myDocumentEditor.postfix),v=document.getElementById("crop"+C.myDocumentEditor.postfix),T=document.getElementById("cut"+C.myDocumentEditor.postfix),D=document.getElementById("hand"+C.myDocumentEditor.postfix),P=document.getElementById("select"+C.myDocumentEditor.postfix),E=document.getElementById("restore"+C.myDocumentEditor.postfix);g?(_&&(_.style.display=""),v&&(v.style.display="none"),T&&(T.style.display="none"),D&&(D.style.display="none"),P&&(P.style.display="none"),E&&(E.style.display="none")):(_&&(_.style.display="none"),v&&(v.style.display=""),T&&(T.style.display=""),D&&(D.style.display=""),P&&(P.style.display=""),E&&(E.style.display=""))},p.prototype.updateWebviewerConfig=function(g,C,_){var T=g;return C&&(this.editorSettings=C,e.isUndefined(C.dialogText)||(s.CustomizableDisplayInfo.dialogText=u=C.dialogText),e.isUndefined(C.promptToSaveChange)||(this.promptToSaveChange=C.promptToSaveChange),e.isUndefined(C.border)||(T.outerBorder=C.border),e.isUndefined(C.topMenuBorder)||(T.topMenuBorder=C.topMenuBorder),e.isUndefined(C.innerBorder)||(T.canvasConfig.canvasBorder=C.innerBorder),e.isUndefined(C.background)||(T.canvasConfig.canvasBackground=C.background)),T},p.prototype._bindView=function(){var C,g=this;if(!g.myDocumentEditor)return g.bDispose?e.Errors.DocumentEditorDispose(g._stwain):e.Errors.DocumentEditorNotExist(g._stwain),!1;var _=e.one(".dynamsoft-cvs-container");if(_&&_.getEL()?(g.cvsContainer=_,g.cvsParentId=_.parent()[0].id,g._stwain&&g._stwain.Addon&&g._stwain.Addon.Camera&&(g.cvsStatus=g._stwain.Addon.Camera.getStatus())):(g.cvsContainer="",g.cvsParentId="",g.cvsStatus=""),g.editorSettings&&g.editorSettings.element&&0==g.editorSettings.bFullScreen){if(C=r.createElement("div"),g.editorSettings.element.appendChild(C),g.editorSettings.element.insertBefore(C,g.editorSettings.element.firstElementChild),g.UIEditor=C,g.bFullScreen=!1,C.style.float="left",C.style.position="absolute",C.style.zIndex="9999",g.myDocumentEditor.width=g.editorSettings.width,g.myDocumentEditor.height=g.editorSettings.height,g.SetWidthInner(g.editorSettings.width,!0),g.SetHeightInner(g.editorSettings.height,!0),g.myDocumentEditor.bindView(g.UIEditor),g.hide(),g.cvsParentId){var v=document.getElementById(g.cvsParentId);v&&v.appendChild(g.cvsContainer[0])}}else C=r.createElement("div"),r.body.appendChild(C),document.body.insertBefore(C,document.body.firstElementChild),g.UIEditor=C,g.bFullScreen=!0,g.UIEditor.className="D_ImageUIEditor",g.UIEditor.style.width="100%",g.UIEditor.style.height="100%",g.UIEditor.style.position="fixed",g.UIEditor.style.left="0px",g.UIEditor.style.top="0px",g.UIEditor.style.zIndex="9999",g.UIEditor.style.display="none",g.SetWidthInner("100%",!0),g.SetHeightInner("100%",!0),g.myDocumentEditor.bindView(g.UIEditor),g.hide();if(g.updateMode(),g.SetSelectionRectAspectRatio(g.editorSettings&&g.editorSettings.selectionRectAspectRatio?g.editorSettings.selectionRectAspectRatio:0),g.HideEditorButtonForPad(),g.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],g._stwain._isMobileMode()){var T,D=e.one(".ds-dwt-ui-icon-acquire");if(D&&D.getEL()&&(D[0].style.display="none"),g.dwtMobileFileId="dwtmobilefile",g.UIEditor&&"DIV"==g.UIEditor.nodeName)(T=document.createElement("div")).innerHTML=g.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+g.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+g.dwtMobileFileId+"' type='file' style='display:none' />",g.UIEditor.appendChild(T);else{var P=document.getElementById(g.UIEditor);(T=document.createElement("div")).innerHTML=g.bMobile?"<input id ='"+g.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+g.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",P.appendChild(T)}}return g.myDocumentEditor.off("slideSwitch"),g.myDocumentEditor.on("slideSwitch",function(E){"left"==E?g._webViewer.myViewer.previous():"right"==E&&g._webViewer.myViewer.next()}),!0},p.prototype.dispose=function(){var C,g=this;return(C=g.mydvs.ViewControl.removeViewer(g.myDocumentEditor))&&(g.UIEditor.lastChild&&g.UIEditor.removeChild(g.UIEditor.lastChild),g.myDocumentEditor=void 0,g._webViewer._documentEditor=void 0,g._webViewer._documentEditorInner=void 0,g.mydvs=null,g._stwain=null,g.bDispose=!0),C},p.prototype.show=function(){var g=this;return g.myDocumentEditor?(g.bFullScreen&&(g.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),g.myDocumentEditor.showViewer=!0,!0):(g.bDispose?e.Errors.DocumentEditorDispose(g._webViewer._stwain):e.Errors.DocumentEditorNotExist(g._webViewer._stwain),!1)},p.prototype.hide=function(){var g=this;return g.myDocumentEditor?(g.myDocumentEditor.showViewer=!1,g.bFullScreen&&(g.UIEditor.style.display="none"),!0):(g.bDispose?e.Errors.DocumentEditorDispose(g._webViewer._stwain):e.Errors.DocumentEditorNotExist(g._webViewer._stwain),!1)},p.prototype._BindDocumentEditorEvents=function(){var g=this;e.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","OnDocumentCrop","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(C){g.myDocumentEditor.on(C,function(_,v){g[C](_,v)})})},p.prototype.HideEditorButtonForPad=function(){var C=this.myDocumentEditor,_=this.bPadViewer,v=document.getElementById("rotateBtn"+C.postfix);v&&(v.style.display=_?"none":"");var T=document.getElementById("deskewBtn"+C.postfix);T&&(T.style.display=_?"none":"");var D=document.getElementById("changeImageSizeBtn"+C.postfix);D&&(D.style.display=_?"none":"")},p.prototype.BackImageData=function(){var g=this;if(g._stwain._isMobileMode()){var C=g._webViewer.GetCurrentIndex();C>=0&&g._webViewer.GetImageData(g._webViewer.GetUidByIndex(C)).then(function(_){g.BackImageBuffer=_.oriData;var v=g._webViewer.GetMetaDataByIndex(C);v&&(g.BackModelImageControl={},g.BackModelImageControl.width=v.width,g.BackModelImageControl.height=v.height,g.BackModelImageControl.bitDepth=v.bitDepth,g.BackModelImageControl.resolutionX=v.resolutionX,g.BackModelImageControl.resolutionY=v.resolutionY)})}},p.prototype.CloseShowDocumentEditor=function(){var g=this;if(!g.myDocumentEditor)return g.bDispose?e.Errors.DocumentEditorDispose(g._stwain):e.Errors.DocumentEditorNotExist(g._stwain),!1;if(g.cvsContainer&&""!=g.cvsContainer&&g.cvsParentId&&""!=g.cvsParentId){var C=document.getElementById(g.cvsParentId);C&&C.appendChild(g.cvsContainer[0]),"playing"==g.cvsStatus&&g._stwain&&g._stwain.Addon&&g._stwain.Addon.Camera&&g._stwain.Addon.Camera.resume()}return!0},p.prototype.UpdateInfo=function(){w.Lib.hideMask()},p.prototype.clearSelectedAreas=function(){var g=this,C=!1;return g._webViewer.GetHowManyImagesInBuffer()<=0||((C=g.myDocumentEditor.clearSelectedBoxes())||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C)},p.prototype.SetSelectionRectAspectRatio=function(g){return this.myDocumentEditor.selectionBoxAspectRatio=g,!0},p.prototype.ZoomIn=function(){var C,g=this;return(C=g.myDocumentEditor.zoomIn())||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C},p.prototype.ZoomOut=function(){var C,g=this;return(C=g.myDocumentEditor.zoomOut())||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C},p.prototype.SetZoom=function(g,C,_){var T,v=this;return(T=C&_?v.myDocumentEditor.zoomTo(g,C,_):v.myDocumentEditor.zoomTo(g))||e.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode),T},p.prototype.GetZoom=function(){return this.myDocumentEditor.zoom},p.prototype.SetFitType=function(g){var _="window";return e.isUndefined(g)||("width"==g||"height"==g)&&(_=g),this.myDocumentEditor.fitType=_,!0},p.prototype.SetMouseShape=function(g){var _;switch(g){case w.DWT.EnumDWT_MouseShape.Default:_="default";break;case w.DWT.EnumDWT_MouseShape.Hand:_="pointer";break;case w.DWT.EnumDWT_MouseShape.Crosshair:_="crosshair";break;case w.DWT.EnumDWT_MouseShape.Zoom:_="zoom-in";break;default:_="crosshair"}return this.SetCursor(_),!0},p.prototype.SetCursor=function(g){var C=this;if(!C._webViewer._NouiNotSupport("cursor"))return!1;var _="default";switch(g){case"default":_="default",C.SetOperationMode(1);break;case"pointer":_="pointer",C.SetOperationMode(0);break;case"crosshair":_="crosshair",C.SetOperationMode(1);break;case"zoom-in":_="zoom-in",C.SetOperationMode(2);break;default:_="crosshair"}return C.myDocumentEditor.canvasMouseShape=_,!0},p.prototype.SetSelectionImageBorderColor=function(g){return this.myDocumentEditor.selectedPageBorderColor=g,!0},p.prototype.SetBackgroundColor=function(g){return this.myDocumentEditor.imageBackgroundColor=g,!0},p.prototype.SetWidth=function(g){return this.myDocumentEditor.width=g,!0},p.prototype.SetWidthInner=function(g,C){var _=this;if(C)_.myDocumentEditor.width=g;else if(e.isString(g)&&g.indexOf("%")>=0){var v=e.one("#"+_._stwain._containerID);_.myDocumentEditor.width=parseInt(e.css(v,"width")*parseInt(g)/100)}else _.myDocumentEditor.width=g;return!0},p.prototype.SetHeight=function(g){return this.myDocumentEditor.height=g,!0},p.prototype.SetHeightInner=function(g,C){var _=this;if(C)_.myDocumentEditor.height=g;else if(e.isString(g)&&g.indexOf("%")>=0){var v=e.one(_._stwain._containerElement);_.myDocumentEditor.height=parseInt(e.css(v,"height")*parseInt(g)/100)}else _.myDocumentEditor.height=g;return!0},p.prototype.SetIfAutoScroll=function(g){return this.myDocumentEditor.showLatestPage=g,!0},p.prototype.ChangeButtonClass=function(g,C){return this.myDocumentEditor.setButtonClass(g,C)},p.prototype.SetOperationMode=function(g){this.myDocumentEditor.operationMode=g},p.prototype.UnbindContent=function(g){this.myDocumentEditor.unbindContent()},p.prototype.SetSelectedPageBackground=function(g){this.myDocumentEditor.selectedPageBackground=g},p.prototype.GetRealTimeMetadataByIndex=function(g){var C=this;if(!(g<0||g>=C._webViewer.GetHowManyImagesInBuffer()))return C.myDocumentEditor.getRealTimeMetadataByIndex(g);e.Errors.IndexOutOfRange(C._stwain)},p.prototype.DVSRotate=function(g){var _,C=this;return C.myDocumentEditor.rotateMode=0,(_=C.myDocumentEditor.rotate(g))||e.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode),_},p.prototype.DVSFlip=function(){var C,g=this;return(C=g.myDocumentEditor.flip())||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C},p.prototype.DVSMirror=function(){var C,g=this;return(C=g.myDocumentEditor.mirror())||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C},p.prototype.DVSCrop=function(g,C,_,v){var D,T=this;return(D=T.myDocumentEditor.crop(g,C,_-g,v-C))||e.Errors.WebviewerError(T._stwain,T.mydvs.Error.errorMessage,T.mydvs.Error.errorCode),D},p.prototype.DVSErase=function(g,C,_,v){var D,T=this;return(D=T.myDocumentEditor.erase(g,C,_-g,v-C,T._webViewer._UIView.BackgroundFillColor))||e.Errors.WebviewerError(T._stwain,T.mydvs.Error.errorMessage,T.mydvs.Error.errorCode),D},p.prototype.DVSSaveTransformResult=function(g){var C=this;return C.myDocumentEditor.saveTransformation().then(function(){g(null,-1,null)},function(_){e.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}),!0},p.prototype.DVSRotateEx=function(g,C){var v,_=this;return _.myDocumentEditor.rotateMode=C?1:0,(v=_.myDocumentEditor.rotate(g))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),v},p.prototype.DVSChangeImageSize=function(g,C,_){var T,v=this;return(T=v.myDocumentEditor.changePageSize(parseInt(g),parseInt(C),_))||e.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode),T},p.prototype.DVSSkewAngle=function(){var g=this;return g._stwain._asyncGetSkewAngleOnly(g._webViewer.GetCurrentIndex(),function(C){g.DVSRotateEx(C,!0),g.UpdateInfo(),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()}),!0},p.prototype.updateButtons=function(){var g=this;1==g._IfChangedWithinTheEditor?(g.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),g.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(g.ChangeButtonClass("save","ds-dwt-ui-icon-color-grey"),g.ChangeButtonClass("restore","ds-dwt-ui-icon-color-grey"))},p.prototype.updateMode=function(g){var v,C=this;switch((v=C._webViewer.GetHowManyImagesInBuffer())>1?(C._webViewer.GetCurrentIndex()==v-1||C._webViewer.GetHowManyImagesInBuffer()<=1?C.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):C.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),C._webViewer.GetCurrentIndex()<=0||C._webViewer.GetHowManyImagesInBuffer()<=1?C.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):C.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(C.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),C.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),C.updateButtons(),C.__SetCropButtonGrey(!0),C.__SetEraseButtonGrey(!0),C.cursorStatus){case"rectselect":C.OnSelect();break;case"zoom":C.OnClicktozoomin();break;default:C.OnHand()}if(g){var T=C._webViewer.GetCurrentIndex();1==C._IfChangedWithinTheEditor&&T!=C.iChangedIndex&&C.ShowDialogForSaveImage(C._webViewer.GetCurrentIndex(),!1)}},p.prototype.__SaveImageInner=function(g,C){var _=this;if(-1==_.iChangedIndex&&0==_._IfSaveChangesOutSideOfTheEditor)return _._IfChangedWithinTheEditor=!1,C&&C(),!1;if(1!=_._IfChangedWithinTheEditor&&0==_._IfSaveChangesOutSideOfTheEditor)return alert(s.CustomizableDisplayInfo.errorMessages.imageNotChanged),_._IfChangedWithinTheEditor=!1,C&&C(),!1;_._IfSaveChangesOutSideOfTheEditor&&(_.iChangedIndex=_._webViewer.GetCurrentIndex());var D=!0;if(1==_._IfChangedWithinTheEditor||1==_._IfSaveChangesOutSideOfTheEditor){var P=_.getImageManager().convertClientIndexToServerId(_.iChangedIndex);if(-1==P)return C&&C(),!1;_.OnGetImageFromServerForEdit(_._webViewer._UIView.mapModelImageControl[P],_.iChangedIndex,2,function(E,M,O){if(E){if(1==g&&(e.log("__SaveImageInner: "+[E.guid].join(",")),_._webViewer.GetCurrentIndex()==M&&(_._stwain._isMobileMode()?_._webViewer.MobileUpdateImage(E,O):_._webViewer.UpdateImage(E,O))),_._IfChangedWithinTheEditor=!1,_.iChangedIndex=-1,-1==E.serverId)return C&&C(),!1}else _._IfChangedWithinTheEditor=!1,_.iChangedIndex=-1;return _.updateButtons(),C&&C(),!0}),D=!1}return _._IfSaveChangesOutSideOfTheEditor=!1,D&&(_._IfChangedWithinTheEditor=!1,C&&C()),!0},p.prototype.ShowDialogForSaveImage=function(g,C,_,v){var T=this,D=function(){T.__SaveImageInner(!0,function(){d.DCP_DWT_OnClickCloseInstall(T._stwain._containerID),e.bChangeImage=1,-1==g?T.OnClose():T._webViewer.__goInner(g),C&&(document.body.style.overflow=""),m.isFunction(_)&&_()})};if(T.promptToSaveChange){w.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"<div>",u.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',u.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',u.saveChangedImage[2],'" /></div>',"</div>"].join(""),T.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1});var E=e.one(".dynamsoft_btnSave").getEL();E&&(E.onclick=function(){D()});var M=e.one(".dynamsoft_btnCancel").getEL();M&&(M.onclick=function(){T.__RestoreImageInner(g,function(){d.DCP_DWT_OnClickCloseInstall(T._stwain._containerElement),e.bChangeImage=0,-1==g?T.OnClose():T._webViewer.__goInner(g),C&&(document.body.style.overflow=""),m.isFunction(v)&&v()})})}else D()},p.prototype.__SetCropButtonGrey=function(g){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),g&&this.clearSelectedAreas()},p.prototype.__SetEraseButtonGrey=function(g){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),g&&this.clearSelectedAreas()},p.prototype.__SetZoomInButtonEnable=function(g){this.ChangeButtonClass("zoomin",1==g?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")},p.prototype.__SetZoomOutButtonEnable=function(g){this.ChangeButtonClass("zoomout",1==g?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")},p.prototype.pageChange=function(g){var _,C=this,v=C._webViewer.GetHowManyImagesInBuffer();e.log("OnPagination"),v<=0?m.output(C,"No image in Buffer"):1!=v&&(!/^\d+$/.test(g)||g<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((_=parseInt(g)-1)<0?_=0:_>=v&&(_=v-1),_!=C._webViewer.GetCurrentIndex()&&C.go(_)))},p.prototype.bufferChanged=function(g){var C=this,_=C._webViewer.GetCurrentIndex();return C.updateMode(),"shift"!=g.action||1!=C._IfChangedWithinTheEditor||(C.ShowDialogForSaveImage(_,!1),!1)},p.prototype.pageRendered=function(g){},p.prototype.OnFirstImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()},p.prototype.OnLastImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()},p.prototype.OnPreviousImage=function(){var C=e.one(".ds-dwt-ui-icon-preImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!C||!C.getEL())&&this._webViewer.previous()},p.prototype.OnNextImage=function(){var C=e.one(".ds-dwt-ui-icon-nextImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!C||!C.getEL())&&this._webViewer.next()},p.prototype.go=function(g){var C=this;if(C._webViewer.GetHowManyImagesInBuffer()<=0)return m.output(C,"No image in Buffer"),!1;if(1==C._IfChangedWithinTheEditor)return C.ShowDialogForSaveImage(g,!1),!1;if(typeof g<"u"){if(-1==g)return!1;C.bCouldBeTimeConsuming=!0,C.myDocumentEditor.gotoPage(g),C.updateMode()}return!0},p.prototype.OnAcquire=function(){var g=this,C=function(){g._stwain.SelectSource(function(){g._stwain.CloseSource(),g._stwain.OpenSource(),g._stwain.IfShowUI=!0,1==w.DWT.IfConfineMaskWithinTheViewer?(w.DWT.IfConfineMaskWithinTheViewer=!1,g._stwain.AcquireImage({},function(){w.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){g._stwain.ShowDocumentEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){g._stwain.ShowDocumentEditorEx(-1,-1,-1,-1)})})):g._stwain.AcquireImage()},function(){e.log("User did not select a source")})};e.Errors.ClearErrorInfo(g._stwain),g._IfChangedWithinTheEditor?g.ShowDialogForSaveImage(g._webViewer.GetCurrentIndex(),!1,C,C):C()},p.prototype.OnLoadImage=function(){var g=this,C=null,_=function(){if(g._stwain._isMobileMode()){var v=document.getElementById(g.dwtMobileFileId);return v.value="",void v.click()}if(g._stwain.IfShowFileDialog=!0,g._stwain.Addon&&g._stwain.Addon.PDF){var E,P=!1;(g._stwain._isMobileMode()?e.License.checkProductKey(g._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(g._stwain,{PDFRasterizer:!0},!0))&&(C=g._stwain.Addon.PDF.GetConvertMode(),E=g._stwain._innerFun("GetAddOnVersion",w.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&E==w.DWT.PdfMacVersion||e.env.bLinux&&E==w.DWT.PdfLinuxVersion||E==w.DWT.PdfVersion)&&(P=!0),P&&g._stwain.Addon.PDF.SetConvertMode(3))}g._stwain.LoadImageEx("",5,function(){e.log("Loaded an image successfully."),null!=C&&g._stwain.Addon.PDF.SetConvertMode(C)},function(O,R){e.log("Loading failed with the error: "+R),null!=C&&g._stwain.Addon.PDF.SetConvertMode(C)})};e.Errors.ClearErrorInfo(g._stwain),g._IfChangedWithinTheEditor?g.ShowDialogForSaveImage(g._webViewer.GetCurrentIndex(),!1,_,_):_()},p.prototype.OnPrint=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetCurrentIndex()<0?m.output(g,"No image in Buffer"):g._webViewer._UIView.Print()},p.prototype.OnRemoveAll=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):g._stwain.RemoveAllImages()},p.prototype.OnRemove=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):g._stwain.RemoveAllSelectedImages()},p.prototype.OnRotateLeft=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._stwain._isMobileMode()?(g.DVSRotate(270),g.UpdateInfo()):g._stwain.RotateLeft(g._webViewer.GetCurrentIndex()),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSRotate(270),g.UpdateInfo()):g._stwain.RotateLeft(g._webViewer.GetCurrentIndex())),g.updateMode())},p.prototype.RotateEx=function(g,C,_){var v=this;v._webViewer.GetHowManyImagesInBuffer()<=0?m.output(v,"No image in Buffer"):(typeof g>"u"||typeof C>"u"||typeof _>"u"?alert(s.CustomizableDisplayInfo.errorMessages.insufficientParas):1==v._webViewer._ImgManager.bImageChangedInViewer?(v._IfSaveChangesOutSideOfTheEditor=!0,v._webViewer._ImgManager.bImageChangedInViewer=!1,v.__SaveImageInner(!1,function(){v.bCouldBeTimeConsuming=!0,w.Lib.showMask(),v._webViewer._ImgManager.bImageJustChangedInEditor=!0,v._stwain._isMobileMode()?(v.DVSRotateEx(g,C,_),v.UpdateInfo()):v._stwain.RotateEx(v._webViewer.GetCurrentIndex(),g,C,_),v._IfChangedWithinTheEditor=!0,v.iChangedIndex=v._webViewer.GetCurrentIndex(),v.updateButtons()})):(v.bCouldBeTimeConsuming=!0,w.Lib.showMask(),v._IfSaveChangesOutSideOfTheEditor=!1,v._webViewer._ImgManager.bImageJustChangedInEditor=!0,v._IfChangedWithinTheEditor=!0,v.iChangedIndex=v._webViewer.GetCurrentIndex(),v._stwain._isMobileMode()?(v.DVSRotateEx(g,C,_),v.UpdateInfo()):v._stwain.RotateEx(v._webViewer.GetCurrentIndex(),g,C,_)),v.updateMode())},p.prototype.OnRotate=function(g){var C=this;if(e.Errors.ClearErrorInfo(C._stwain),C._webViewer.GetHowManyImagesInBuffer()<=0)m.output(C,"No image in Buffer");else{if(e.hide("dynamsoft_ImgSizeEditor"),!e.get("dynamsoft_RotateAnyAngle")){var _=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',u.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',u.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',u.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',u.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',u.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];e.one("body").append(_.join(""))}var v=e.get("dynamsoft_Angle_InterpolationMethod");v.options.length=0,v.options.add(new Option("NearestNeighbor",1)),v.options.add(new Option("Bilinear",2)),v.options.add(new Option("Bicubic",3)),v=null,e.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var F=e.get("dynamsoft_Angle").value;if(e.get("dynamsoft_Angle").className="",!/^\d+$/.test(F)||F<=0)return e.get("dynamsoft_Angle").className+=" invalid",e.get("dynamsoft_Angle").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidAngle);var A=e.get("dynamsoft_KeepSize").checked;C.bCouldBeTimeConsuming=!0,w.Lib.showMask();var N=parseInt(F);C.RotateEx(N,A,e.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0!=C._stwain.ErrorCode||e.hide("dynamsoft_RotateAnyAngle")},e.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){e.hide("dynamsoft_RotateAnyAngle")};var P=e.get("dynamsoft_RotateAnyAngle");e.toggle("dynamsoft_RotateAnyAngle");var E=g.srcElement||g.target,M=E.y;M||(M=E.offsetTop+1);var O=E.x;if(O||(O=E.offsetLeft+1),C.UIEditor&&"DIV"==C.UIEditor.nodeName)P.style.top=g.clientY+document.documentElement.scrollTop+"px",P.style.left=g.clientX+document.documentElement.scrollLeft+"px";else{var R=r.getElementById(C.UIEditor);P.style.top=M+E.offsetHeight+m.getTop(R)+"px",P.style.left=O+m.getLeft(R)+"px"}e.get("dynamsoft_Angle").value="45"}},p.prototype.OnRotateRight=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSRotate(90),g.UpdateInfo()):g._stwain.RotateRight(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSRotate(90),g.UpdateInfo()):g._stwain.RotateRight(g._webViewer.GetCurrentIndex())),g.updateMode())},p.prototype.OnDeskew=function(){var g=this;if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)m.output(g,"No image in Buffer");else if(1==g._webViewer._ImgManager.bImageChangedInViewer)g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){if(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._stwain._isMobileMode())g.DVSSkewAngle();else{var _=g._webViewer.GetCurrentIndex();_>=0&&g._stwain.GetSkewAngleAsync(_).then(function(v){g.RotateEx(v,!0,1)}),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()}});else if(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode())g.DVSSkewAngle();else{var C=g._webViewer.GetCurrentIndex();C>=0&&g._stwain.GetSkewAngleAsync(C).then(function(_){g.RotateEx(_,!0,1)})}},p.prototype.OnCrop=function(){e.Errors.ClearErrorInfo(this._stwain);var _=e.one(".ds-dwt-ui-icon-template-cropImage");_&&_.getEL()&&this.Crop()},p.prototype.Crop=function(){var g=this;if(g._webViewer.GetHowManyImagesInBuffer()<=0)m.output(g,"No image in Buffer");else{var C=g.actualSelectedCanvasAreas;if(2==C.length){var _=C[1],v=_.left,T=_.top,D=_.right,P=_.bottom;parseInt(v)-parseInt(D)!=0&&parseInt(T)-parseInt(P)!=0&&(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSCrop(parseInt(v),parseInt(T),parseInt(D),parseInt(P)),g.UpdateInfo()):g._stwain.Crop(g._webViewer.GetCurrentIndex(),parseInt(v),parseInt(T),parseInt(D),parseInt(P)),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0),g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSCrop(parseInt(v),parseInt(T),parseInt(D),parseInt(P)),g.UpdateInfo()):g._stwain.Crop(g._webViewer.GetCurrentIndex(),parseInt(v),parseInt(T),parseInt(D),parseInt(P)),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0)),g.updateMode())}else m.output(g,"No area selected for cropping")}},p.prototype.OnErase=function(){var _=e.one(".ds-dwt-ui-icon-template-erase");e.Errors.ClearErrorInfo(this._stwain),_&&_.getEL()&&this.Erase()},p.prototype.Erase=function(){var g=this,C=!1;if(g._webViewer.GetHowManyImagesInBuffer()<=0)m.output(g,"No image in Buffer");else{var _=g.actualSelectedCanvasAreas;if(1!=_.length){if(1==g._webViewer._ImgManager.bImageChangedInViewer)g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){for(var O=1;O<_.length;O++){var R=_[O],F=R.left,B=R.top,b=R.right,A=R.bottom;parseInt(F)-parseInt(b)!=0&&parseInt(B)-parseInt(A)!=0&&(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSErase(parseInt(F),parseInt(B),parseInt(b),parseInt(A)),g.UpdateInfo()):g._stwain.CutFrameToClipboard(g._webViewer.GetCurrentIndex(),parseInt(F),parseInt(B),parseInt(b),parseInt(A)),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons(),C=!0)}g.__SetEraseButtonGrey(C),g.__SetCropButtonGrey(C)});else{g._IfSaveChangesOutSideOfTheEditor=!1,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex();for(var v=1;v<_.length;v++){var T=_[v],D=T.left,P=T.top,E=T.right,M=T.bottom;parseInt(D)-parseInt(E)!=0&&parseInt(P)-parseInt(M)!=0&&(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSErase(parseInt(D),parseInt(P),parseInt(E),parseInt(M)),g.UpdateInfo()):g._stwain.CutFrameToClipboard(g._webViewer.GetCurrentIndex(),parseInt(D),parseInt(P),parseInt(E),parseInt(M)),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),C=!0)}g.__SetEraseButtonGrey(C),g.__SetCropButtonGrey(C)}g.updateMode()}else m.output(g,"No area selected for erasing")}},p.prototype.ChangeImageSize=function(g,C,_){var v=this;v._webViewer.GetHowManyImagesInBuffer()<=0?m.output(v,"No image in Buffer"):(1==v._webViewer._ImgManager.bImageChangedInViewer?(v._IfSaveChangesOutSideOfTheEditor=!0,v._webViewer._ImgManager.bImageChangedInViewer=!1,v.__SaveImageInner(!1,function(){v.bCouldBeTimeConsuming=!0,w.Lib.showMask(),v._webViewer._ImgManager.bImageJustChangedInEditor=!0,v._stwain._isMobileMode()?(v.DVSChangeImageSize(g,C,_),v.UpdateInfo()):v._stwain.ChangeImageSize(v._webViewer.GetCurrentIndex(),g,C,_),v._IfChangedWithinTheEditor=!0,v.iChangedIndex=v._webViewer.GetCurrentIndex(),v.updateButtons()})):(v.bCouldBeTimeConsuming=!0,w.Lib.showMask(),v._IfSaveChangesOutSideOfTheEditor=!1,v._webViewer._ImgManager.bImageJustChangedInEditor=!0,v._IfChangedWithinTheEditor=!0,v.iChangedIndex=v._webViewer.GetCurrentIndex(),v._stwain._isMobileMode()?(v.DVSChangeImageSize(g,C,_),v.UpdateInfo()):v._stwain.ChangeImageSize(v._webViewer.GetCurrentIndex(),g,C,_)),v.updateMode())},p.prototype.OnChangeImageSize=function(g){var C=this;if(e.Errors.ClearErrorInfo(C._stwain),!(C._webViewer.GetHowManyImagesInBuffer()<=0)){if(e.hide("dynamsoft_RotateAnyAngle"),!e.get("dynamsoft_ImgSizeEditor")){var _=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',u.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',u.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",u.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',u.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',u.dlgChangeImageSize[4],'"/></span></div>',"</div>"];e.one("body").append(_.join(""))}var v=e.get("dynamsoft_InterpolationMethod");v.options.length=0,v.options.add(new Option("NearestNeighbor",1)),v.options.add(new Option("Bilinear",2)),v.options.add(new Option("Bicubic",3)),v=null,e.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var ne=e.get("dynamsoft_img_width").value,Ie=e.get("dynamsoft_img_height").value;e.get("dynamsoft_img_width").className="",e.get("dynamsoft_img_height").className="";var _e=/^\d+$/;return!_e.test(Ie)||Ie<=0?(e.get("dynamsoft_img_height").className+=" invalid",e.get("dynamsoft_img_height").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!_e.test(ne)||ne<=0?(e.get("dynamsoft_img_width").className+=" invalid",e.get("dynamsoft_img_width").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(C.ChangeImageSize(ne,Ie,e.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0!=C._stwain.ErrorCode||e.hide("dynamsoft_ImgSizeEditor")))},e.get("dynamsoft_btnCancelChange").onclick=function(){e.hide("dynamsoft_ImgSizeEditor")};var P=e.get("dynamsoft_ImgSizeEditor");e.toggle("dynamsoft_ImgSizeEditor");var M=g.srcElement||g.target,O=M.y;O||(O=M.offsetTop+1);var R=M.x;if(R||(R=M.offsetLeft+1),C.UIEditor&&"DIV"==C.UIEditor.nodeName)P.style.top=g.clientY+document.documentElement.scrollTop+"px",P.style.left=g.clientX+document.documentElement.scrollLeft+"px";else{var F=r.getElementById(C.UIEditor);P.style.top=O+M.offsetHeight+m.getTop(F)+"px",P.style.left=R+m.getLeft(F)+"px"}var B=C._webViewer.GetCurrentIndex(),b=C.getImageManager().convertClientIndexToServerId(B);if(-1==b)return!1;if(C._webViewer._UIView.mapModelImageControl[b]){if(C._stwain._isMobileMode()){var A,N=0,Y=0;(A=C.GetRealTimeMetadataByIndex())&&A.width&&(N=A.width),A&&A.height&&(Y=A.height),e.get("dynamsoft_img_width").value=parseInt(N),e.get("dynamsoft_img_height").value=parseInt(Y)}else e.get("dynamsoft_img_width").value=parseInt(C.getImageManager().GetImageWidth(B)),e.get("dynamsoft_img_height").value=parseInt(C.getImageManager().GetImageHeight(B));return!0}return!1}m.output(C,"No image in Buffer")},p.prototype.OnFlip=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSFlip(),g.UpdateInfo()):g._stwain.Flip(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSFlip(),g.UpdateInfo()):g._stwain.Flip(g._webViewer.GetCurrentIndex())),g.updateMode())},p.prototype.OnMirror=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(1==g._webViewer._ImgManager.bImageChangedInViewer?(g._IfSaveChangesOutSideOfTheEditor=!0,g._webViewer._ImgManager.bImageChangedInViewer=!1,g.__SaveImageInner(!1,function(){g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._stwain._isMobileMode()?(g.DVSMirror(),g.UpdateInfo()):g._stwain.Mirror(g._webViewer.GetCurrentIndex()),g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g.updateButtons()})):(g.bCouldBeTimeConsuming=!0,w.Lib.showMask(),g._IfSaveChangesOutSideOfTheEditor=!1,g._webViewer._ImgManager.bImageJustChangedInEditor=!0,g._IfChangedWithinTheEditor=!0,g.iChangedIndex=g._webViewer.GetCurrentIndex(),g._stwain._isMobileMode()?(g.DVSMirror(),g.UpdateInfo()):g._stwain.Mirror(g._webViewer.GetCurrentIndex())),g.updateMode())},p.prototype.OnZoomin=function(){var g=this,C=e.one(".ds-dwt-ui-icon-zoomin-grey");if(!C||!C.getEL()){if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)return void m.output(g,"No image in Buffer");var _=Math.floor(100*g.GetZoom()*g._webViewer._UIView.zoomInStep)+1;!_||1<_&&_<2501?(g.ZoomIn(),g.__SetZoomInButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),g.__SetZoomInButtonEnable(!1)),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0)}},p.prototype.OnOriginalsize=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(g.SetZoom(1),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))},p.prototype.OnZoomout=function(){var g=this,C=e.one(".ds-dwt-ui-icon-zoomout-grey");if(!C||!C.getEL()){if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)return void m.output(g,"No image in Buffer");var _=Math.floor(100*g.GetZoom()*g._webViewer._UIView.zoomOutStep)-1;!_||1<_&&_<6501?(g.ZoomOut(),g.__SetZoomOutButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),g.__SetZoomOutButtonEnable(!1)),g.__SetZoomInButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0)}},p.prototype.OnFitPage=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(g.SetFitType(),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))},p.prototype.OnFitWidth=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(g.SetFitType("width"),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))},p.prototype.OnFitHeight=function(){var g=this;e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0?m.output(g,"No image in Buffer"):(g.SetFitType("height"),g.__SetZoomInButtonEnable(!0),g.__SetZoomOutButtonEnable(!0),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0))},p.prototype.OnHand=function(){var C=w.DWT.EnumDWT_MouseShape.Hand;this.clearSelectedAreas(),this.SetMouseSelectInner(C)},p.prototype.OnSelect=function(){this.SetMouseSelectInner(w.DWT.EnumDWT_MouseShape.Crosshair)},p.prototype.OnClicktozoomin=function(){var C=w.DWT.EnumDWT_MouseShape.Zoom;this.clearSelectedAreas(),this.SetMouseSelectInner(C)},p.prototype.SetMouseSelectInner=function(g){var C=this;if(e.Errors.ClearErrorInfo(C._stwain),C._webViewer.GetHowManyImagesInBuffer()<=0)m.output(C,"No image in Buffer");else if(C.SetMouseShape(g),C.__EnableMouseShapButtons(g),C.bMobile)switch(g){case w.DWT.EnumDWT_MouseShape.Crosshair:C.cursorStatus="rectselect";break;case w.DWT.EnumDWT_MouseShape.Zoom:C.cursorStatus="zoom";break;default:C.cursorStatus="hand"}else switch(g){case w.DWT.EnumDWT_MouseShape.Hand:C.cursorStatus="hand";break;case w.DWT.EnumDWT_MouseShape.Zoom:C.cursorStatus="zoom";break;default:C.cursorStatus="rectselect"}},p.prototype.OnRestore=function(){var g=this,C=e.one(".ds-dwt-ui-icon-color-grey");if(!C||!C.getEL()){if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)return void m.output(g,"No image in Buffer");g.__RestoreImageInner(-1)}},p.prototype.OnDocumentCrop=function(){var C,g=this;(C=g._webViewer.GetUidByIndex(g._webViewer.GetCurrentIndex()))&&(g.editorSettings&&g.editorSettings.element&&0==g.editorSettings.bFullScreen?(g.editorSettings.element.style.width=g._webViewer.GetWidth()+"px",g.editorSettings.element.style.height=g._webViewer.GetHeight()+"px",g._webViewer.showEditPage(C,{element:g.editorSettings.element,filterViewer:{filter:{valueList:g._webViewer.getDefaultFilterValueList()}}})):g._webViewer.showEditPage(C))},p.prototype.__RestoreImageInner=function(g,C){var _=this;if(-1==_.iChangedIndex)return _._IfChangedWithinTheEditor=!1,void(C&&C());if(_._stwain._isMobileMode())_.Reset(),_._IfChangedWithinTheEditor=!1,_.iChangedIndex=-1,_.updateButtons(),C&&C();else{var D=!0;if(1==_._IfChangedWithinTheEditor){var P=_.getImageManager().convertClientIndexToServerId(_.iChangedIndex);-1!=P&&_.OnGetImageFromServerForEdit(_._webViewer._UIView.mapModelImageControl[P],_.iChangedIndex,1,function(E,M,O){E&&(e.log("__RestoreImageInner: "+[E.guid].join(",")),_._stwain._isMobileMode()?_._webViewer.MobileUpdateImage(E,O):_._webViewer.UpdateImage(E,O)),_._IfChangedWithinTheEditor=!1,_.iChangedIndex=-1;var R=E&&E.serverId;return-1==R?(_.updateButtons(),C&&C(),!1):(_.updateButtons(),-1==g&&-1==(R=_.getImageManager().convertClientIndexToServerId(_._webViewer.GetCurrentIndex()))?(e.Errors.IndexOutOfRange(_._stwain),C&&C(),!1):void(C&&C()))}),D=!1}D&&(_._IfChangedWithinTheEditor=!1,C&&C())}},p.prototype.OnGetImageFromServerForEdit=function(g,C,_,v){var D,T=this;if(v&&T._webViewer._UIView.BaseUrl){var E=T.getImageManager().convertClientIndexToServerId(C);if(-1==E)return!1;if(T._stwain._isMobileMode())if(1==_){var M=T._webViewer.GetMetaDataByIndex(C);M&&(M.width=T.BackModelImageControl.width,M.height=T.BackModelImageControl.height,M.bitDepth=T.BackModelImageControl.bitDepth,M.resolutionX=T.BackModelImageControl.resolutionX,M.resolutionY=T.BackModelImageControl.resolutionY),g.ticks=Date.now(),g.imageUrl=T.BackImageBuffer,v(g,C,{metaData:M})}else T.DVSSaveTransformResult(v);else w.DWT.ConnectWithSocket?v():(D=f.getUrlByAct(T._webViewer._UIView.BaseUrl,E,_),e.ajax({method:"GET",xhrFields:{withCredentials:!0},url:D,onSuccess:function(O){g.ticks=Date.now(),g.imageUrl=f.getImageUrl(T._webViewer._UIView.BaseUrl,E,-1,-1,g.ticks),g.minImageUrl=f.getImageUrl(T._webViewer._UIView.BaseUrl,E,parseInt(g.iImageControlWidth),parseInt(g.iImageControlHeight),g.ticks);var R=T._webViewer.GetMetaDataByIndex(C);if(R){var F=T._webViewer._UIView.GetDataImageControl(E);R.width=F&&F.width?F.width:T._stwain.GetImageWidth(C),R.height=F&&F.height?F.height:T._stwain.GetImageHeight(C)}v(g,C,R)},onError:function(){}}))}return!0},p.prototype.OnSave=function(){var g=this,C=e.one(".ds-dwt-ui-icon-color-grey");if(!C||!C.getEL()){if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)return void m.output(g,"No image in Buffer");g.__SaveImageInner(!0,function(){if(-1==g.getImageManager().convertClientIndexToServerId(g._webViewer.GetCurrentIndex()))return e.Errors.IndexOutOfRange(g._stwain),!1})}},p.prototype.OnClose=function(){var g=this;return e.Errors.ClearErrorInfo(g._stwain),1==g._IfChangedWithinTheEditor?(g.ShowDialogForSaveImage(-1,!0),!1):g._webViewer._documentEditor.hide()},p.prototype.OnCloseInstall=function(){0==this._IfChangedWithinTheEditor&&d.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)},p.prototype.Reset=function(g){return this.myDocumentEditor.reset()},p.prototype.OnCloseInner=function(g){var v,C=this;if(e.Errors.ClearErrorInfo(C._stwain),1==C._IfChangedWithinTheEditor){if(!g)return C.ShowDialogForSaveImage(-1,!0),!1;d.DCP_DWT_OnClickCloseInstall(C._stwain._containerElement),e.bChangeImage=0,C.__RestoreImageInner(-1)}return C.UIEditor&&1==C.bFullScreen?C.UIEditor.childNodes.length>0&&C.UIEditor.parentNode.removeChild(C.UIEditor):(C.UIEditor.childNodes.length>0&&C.UIEditor.parentNode.removeChild(C.UIEditor),C.myDocumentEditor&&C.myDocumentEditor.unbindView(C.UIEditor)),C.CloseShowDocumentEditor(),e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle"),(v=e.get("dynamsoft_ImgSizeEditor"))&&v.parentNode.removeChild(v),(v=e.get("dynamsoft_RotateAnyAngle"))&&v.parentNode.removeChild(v),w.Lib.dialog.selectsourcedlg&&w.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",e.isFunction(C._stwain.__CloseDocumentEditorUI)&&C._stwain.__CloseDocumentEditorUI(),C.dispose()},p.prototype.__EnableMouseShapButtons=function(g){var C=this;C.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),C.ChangeButtonClass("select","ds-dwt-ui-icon-select"),C.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),g==w.DWT.EnumDWT_MouseShape.Hand?C.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):g==w.DWT.EnumDWT_MouseShape.Crosshair?C.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):g==w.DWT.EnumDWT_MouseShape.Zoom&&C.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")},p.prototype.click=function(g){e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle")},p.prototype.imageClick=function(g,C){this.UpdateInfo()},p.prototype.pageAreaSelected=function(g,C){var _=this,v=1;if(C&&C.length>0){var T=C[C.length-1];T.index&&(v=parseInt(T.index)+1),v>0&&v<_.actualSelectedCanvasAreas.length?_.actualSelectedCanvasAreas[v]={left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height}:v==_.actualSelectedCanvasAreas.length&&_.actualSelectedCanvasAreas.push({left:T.x,top:T.y,right:T.x+T.width,bottom:T.y+T.height}),2==_.actualSelectedCanvasAreas.length&&T.width>0&&T.height>0?(_.ChangeButtonClass("crop","ds-dwt-ui-icon-template-cropImage"),_.ChangeButtonClass("cut","ds-dwt-ui-icon-template-erase")):(_.__SetCropButtonGrey(!1),_.__SetEraseButtonGrey(!1))}},p.prototype.pageAreaUnselected=function(g){var C=this;C.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],C.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),C.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")},p.prototype.onDrop=function(g){this._webViewer.dropEvent(g)},p.prototype.getImageManager=function(){return this._webViewer._ImgManager},e.UI=e.UI||{},e.UI.DocumentEditorInner=p}function I(g,C){var _=this;_._documentEditorInner=new e.UI.DocumentEditorInner(g,C),_.myDocumentEditor=_._documentEditorInner.myDocumentEditor}function p(g,C){var _=this;_._webViewer=g,_.mydvs=g.mydvs,_._stwain=g._stwain,_.bCouldBeTimeConsuming=!1,_.promptToSaveChange=!0;var v=l;_.bMobile=!1;var T=!1;_._stwain._isPC()||(_.bPadViewer||(v=l,T=!0),_.bMobile=!0),v=_.updateWebviewerConfig(v,C,T),_.myDocumentEditor=_.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:v,scrollerConfig:{}},_._webViewer.myViewer.uid),0!=_._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(_._webViewer._stwain,_._webViewer.mydvs.Error.errorMessage,_._webViewer.mydvs.Error.errorCode),_.bDispose=!1,_._BindDocumentEditorEvents(),_._bindView(),_.showMenu(!0);var P=document.getElementById("bottomMenu"+_.myDocumentEditor.postfix);P&&(P.style.border="0")}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var o,c,r=document,d=window,s=w.DWT,i=s.CustomizableDisplayInfo.buttons,u=s.CustomizableDisplayInfo.dialogText,f=e.html5.Funs2,a="transparent",l={isFunction:function(p){return p&&"function"==typeof p},addClass:function(p,g){var C=e.one(p);C&&C.length>0&&C.addClass(g)},removeClass:function(p,g){var C=e.one(p);C&&C.length>0&&C.removeClass(g)},output:function(p,g){w.DWT.Debug&&e.log(g)},getTop:function(p){var g=p.offsetTop;return null!=p.offsetParent&&(g+=l.getTop(p.offsetParent)),g},getLeft:function(p){var g=p.offsetLeft;return null!=p.offsetParent&&(g+=l.getLeft(p.offsetParent)),g}};e._safePromptCustomMsg(function(){u=s.CustomizableDisplayInfo.dialogText,o={toolbars:{bottomMenu:!1,header:!1,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1}},buttonResize:{ifResize:!0,maxSize:22,minSize:16},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},previousImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:!0,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:!0,location:"myGroup",sequence:3},acquire:{visibility:1==(i=s.CustomizableDisplayInfo.buttons).visibility.scan,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:1==i.visibility.load,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:1==i.visibility.print,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:!!(i.visibility.scan||i.visibility.load||i.visibility.print),location:"myGroup",sequence:7},removeAll:{visibility:1==i.visibility.removeall,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:1==i.visibility.removeselected,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:!(!i.visibility.removeall&&!i.visibility.removeselected),location:"myGroup",sequence:10},rotateLeft:{visibility:1==i.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:1==i.visibility.rotate,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:1==i.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:1==i.visibility.deskew,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:!!(i.visibility.rotateleft||i.visibility.rotate||i.visibility.rotateright||i.visibility.deskew),location:"myGroup",sequence:15},crop:{visibility:1==i.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:1==i.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:1==i.visibility.changeimagesize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:1==i.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:1==i.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:!!(i.visibility.crop||i.visibility.cut||i.visibility.changeimagesize||i.visibility.flip||i.visibility.mirror),location:"myGroup",sequence:21},zoomin:{visibility:1==i.visibility.zoomin,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:1==i.visibility.originalsize,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:1==i.visibility.zoomout,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:!!(i.visibility.zoomin||i.visibility.originalsize||i.visibility.zoomout||i.visibility.stretch),location:"myGroup",sequence:26},fitPage:{visibility:1==i.visibility.fit,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:1==i.visibility.fitw,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:1==i.visibility.fith,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:!!(i.visibility.fit||i.visibility.fitw||i.visibility.fith),location:"myGroup",sequence:30},hand:{visibility:1==i.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:1==i.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:1==i.visibility.zoom,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:!!(i.visibility.hand||i.visibility.rectselect||i.visibility.zoom),location:"myGroup",sequence:34},restore:{visibility:1==i.visibility.restore,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:1==i.visibility.save,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:1==i.visibility.close,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:i.titles.previous,nextImage:i.titles.next,acquire:i.titles.scan,loadImages:i.titles.load,print:i.titles.print,removeAll:i.titles.removeall,remove:i.titles.removeselected,rotateLeft:i.titles.rotateleft,rotate:i.titles.rotate,rotateRight:i.titles.rotateright,deskew:i.titles.deskew,crop:i.titles.crop,cut:i.titles.cut,changeImageSize:i.titles.changeimagesize,flip:i.titles.flip,mirror:i.titles.mirror,zoomin:i.titles.zoomin,originalsize:i.titles.originalsize,zoomout:i.titles.zoomout,stretch:i.titles.stretch,fitPage:i.titles.fit,fitWidth:i.titles.fitw,fitHeight:i.titles.fith,hand:i.titles.hand,select:i.titles.rectselect,clicktozoomin:i.titles.zoom,restore:i.titles.restore,save:i.titles.save,close:i.titles.close},canvasConfig:{selectedPageBackground:a,selectedPageBorder:"",hoverPageBackground:a,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""},c={toolbars:{header:!0,bottomMenu:!0,topMenu:!0,asideMenu:!1},groups:{viewMenu:{visibility:!1},global:{visibility:!1},viewChange:{visibility:!1},viewerCorner:{visibility:!1},pager:{visibility:!1},myGroup:{visibility:!0,location:"topMenu",sequence:1},myGroup2:{visibility:!0,location:"bottomMenu",sequence:1},myGroup3:{visibility:!0,location:"header",sequence:1},myGroup4:{visibility:!0,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:!0,maxSize:32,minSize:26},buttons:{loadImage:{visibility:!1},readDirection:{visibility:!1},panelChange:{visibility:!1},print:{visibility:!1},loadImages:{visibility:1==i.visibility.load,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:1==i.visibility.close,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:1==i.visibility.rotateleft,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:1==i.visibility.rotateright,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:1==i.visibility.flip,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:1==i.visibility.mirror,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:1==i.visibility.crop,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:1==i.visibility.cut,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:1==i.visibility.hand,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:1==i.visibility.rectselect,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:!0,location:"myGroup2",sequence:3},nextPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:!0,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:1==i.visibility.removeall,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:1==i.visibility.removeselected,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:1==i.visibility.restore,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:1==i.visibility.save,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:!1,showThumbnailControl:!1,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:i.titles.previous,nextImage:i.titles.next,acquire:i.titles.scan,loadImages:i.titles.load,print:i.titles.print,removeAll:i.titles.removeall,remove:i.titles.removeselected,rotateLeft:i.titles.rotateleft,rotate:i.titles.rotate,rotateRight:i.titles.rotateright,deskew:i.titles.deskew,crop:i.titles.crop,cut:i.titles.cut,changeImageSize:i.titles.changeimagesize,flip:i.titles.flip,mirror:i.titles.mirror,zoomin:i.titles.zoomin,originalsize:i.titles.originalsize,zoomout:i.titles.zoomout,stretch:i.titles.stretch,fitPage:i.titles.fit,fitWidth:i.titles.fitw,fitHeight:i.titles.fith,hand:i.titles.hand,select:i.titles.rectselect,clicktozoomin:i.titles.zoom,restore:i.titles.restore,save:i.titles.save,close:i.titles.close},canvasConfig:{selectedPageBackground:a,selectedPageBorder:"",hoverPageBackground:a,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}}),m.prototype.show=function(){return this._imageEditorInner.show()},m.prototype.hide=function(){return this._imageEditorInner.hide()},m.prototype.dispose=function(){return this._imageEditorInner.OnCloseInner(!0)},e.UI=e.UI||{},e.UI.ImageEditor=m,I.prototype.updateWebviewerConfig=function(p,g,C){var v=p;return g&&(this.editorSettings=g,e.isUndefined(g.buttons)||(e.isUndefined(g.buttons.titles)||(e.isUndefined(g.buttons.titles.previous)||(v.tipsConfig.previousImage=g.buttons.titles.previous),e.isUndefined(g.buttons.titles.next)||(v.tipsConfig.nextImage=g.buttons.titles.next),e.isUndefined(g.buttons.titles.print)||(v.tipsConfig.print=g.buttons.titles.print),e.isUndefined(g.buttons.titles.scan)||(v.tipsConfig.acquire=g.buttons.titles.scan),e.isUndefined(g.buttons.titles.load)||(v.tipsConfig.loadImages=g.buttons.titles.load),e.isUndefined(g.buttons.titles.rotateleft)||(v.tipsConfig.rotateLeft=g.buttons.titles.rotateleft),e.isUndefined(g.buttons.titles.rotate)||(v.tipsConfig.rotate=g.buttons.titles.rotate),e.isUndefined(g.buttons.titles.rotateright)||(v.tipsConfig.rotateRight=g.buttons.titles.rotateright),e.isUndefined(g.buttons.titles.deskew)||(v.tipsConfig.deskew=g.buttons.titles.deskew),e.isUndefined(g.buttons.titles.crop)||(v.tipsConfig.crop=g.buttons.titles.crop),e.isUndefined(g.buttons.titles.cut)||(v.tipsConfig.cut=g.buttons.titles.cut),e.isUndefined(g.buttons.titles.changeimagesize)||(v.tipsConfig.changeImageSize=g.buttons.titles.changeimagesize),e.isUndefined(g.buttons.titles.flip)||(v.tipsConfig.flip=g.buttons.titles.flip),e.isUndefined(g.buttons.titles.mirror)||(v.tipsConfig.mirror=g.buttons.titles.mirror),e.isUndefined(g.buttons.titles.zoomin)||(v.tipsConfig.zoomin=g.buttons.titles.zoomin),e.isUndefined(g.buttons.titles.originalsize)||(v.tipsConfig.originalsize=g.buttons.titles.originalsize),e.isUndefined(g.buttons.titles.zoomout)||(v.tipsConfig.zoomout=g.buttons.titles.zoomout),e.isUndefined(g.buttons.titles.stretch)||(v.tipsConfig.stretch=g.buttons.titles.stretch),e.isUndefined(g.buttons.titles.fit)||(v.tipsConfig.fitPage=g.buttons.titles.fit),e.isUndefined(g.buttons.titles.fitw)||(v.tipsConfig.fitWidth=g.buttons.titles.fitw),e.isUndefined(g.buttons.titles.fith)||(v.tipsConfig.fitHeight=g.buttons.titles.fith),e.isUndefined(g.buttons.titles.hand)||(v.tipsConfig.hand=g.buttons.titles.hand),e.isUndefined(g.buttons.titles.rectselect)||(v.tipsConfig.select=g.buttons.titles.rectselect),e.isUndefined(g.buttons.titles.zoom)||(v.tipsConfig.clicktozoomin=g.buttons.titles.zoom),e.isUndefined(g.buttons.titles.restore)||(v.tipsConfig.restore=g.buttons.titles.restore),e.isUndefined(g.buttons.titles.save)||(v.tipsConfig.save=g.buttons.titles.save),e.isUndefined(g.buttons.titles.close)||(v.tipsConfig.close=g.buttons.titles.close),e.isUndefined(g.buttons.titles.removeall)||(v.tipsConfig.removeAll=g.buttons.titles.removeall),e.isUndefined(g.buttons.titles.removeselected)||(v.tipsConfig.remove=g.buttons.titles.removeselected)),e.isUndefined(g.buttons.visibility)||(C?(v.buttons.loadImages.visibility=!!e.isUndefined(g.buttons.visibility.load)||1==g.buttons.visibility.load,v.buttons.close.visibility=!!e.isUndefined(g.buttons.visibility.close)||1==g.buttons.visibility.close,v.buttons.rotateLeft.visibility=!!e.isUndefined(g.buttons.visibility.rotateleft)||1==g.buttons.visibility.rotateleft,v.buttons.rotateRight.visibility=!!e.isUndefined(g.buttons.visibility.rotateright)||1==g.buttons.visibility.rotateright,v.buttons.flip.visibility=!!e.isUndefined(g.buttons.visibility.flip)||1==g.buttons.visibility.flip,v.buttons.mirror.visibility=!!e.isUndefined(g.buttons.visibility.mirror)||1==g.buttons.visibility.mirror,v.buttons.crop.visibility=!!e.isUndefined(g.buttons.visibility.crop)||1==g.buttons.visibility.crop,v.buttons.cut.visibility=!!e.isUndefined(g.buttons.visibility.cut)||1==g.buttons.visibility.cut,v.buttons.hand.visibility=!!e.isUndefined(g.buttons.visibility.hand)||1==g.buttons.visibility.hand,v.buttons.select.visibility=!!e.isUndefined(g.buttons.visibility.rectselect)||1==g.buttons.visibility.rectselect,v.buttons.removeAll.visibility=!!e.isUndefined(g.buttons.visibility.removeall)||1==g.buttons.visibility.removeall,v.buttons.remove.visibility=!!e.isUndefined(g.buttons.visibility.removeselected)||1==g.buttons.visibility.removeselected,v.buttons.restore.visibility=!!e.isUndefined(g.buttons.visibility.restore)||1==g.buttons.visibility.restore,v.buttons.save.visibility=!!e.isUndefined(g.buttons.visibility.save)||1==g.buttons.visibility.save):(v.buttons.acquire.visibility=!!e.isUndefined(g.buttons.visibility.scan)||1==g.buttons.visibility.scan,v.buttons.loadImages.visibility=!!e.isUndefined(g.buttons.visibility.load)||1==g.buttons.visibility.load,v.buttons.print.visibility=!!e.isUndefined(g.buttons.visibility.print)||1==g.buttons.visibility.print,v.buttons.blank2.visibility=!!(v.buttons.acquire.visibility||v.buttons.loadImages.visibility||v.buttons.print.visibility),v.buttons.removeAll.visibility=!!e.isUndefined(g.buttons.visibility.removeall)||1==g.buttons.visibility.removeall,v.buttons.remove.visibility=!!e.isUndefined(g.buttons.visibility.removeselected)||1==g.buttons.visibility.removeselected,v.buttons.blank3.visibility=!(!v.buttons.removeAll.visibility&&!v.buttons.remove.visibility),v.buttons.rotateLeft.visibility=!!e.isUndefined(g.buttons.visibility.rotateleft)||1==g.buttons.visibility.rotateleft,v.buttons.rotate.visibility=!!e.isUndefined(g.buttons.visibility.rotate)||1==g.buttons.visibility.rotate,v.buttons.rotateRight.visibility=!!e.isUndefined(g.buttons.visibility.rotateright)||1==g.buttons.visibility.rotateright,v.buttons.deskew.visibility=!!e.isUndefined(g.buttons.visibility.deskew)||1==g.buttons.visibility.deskew,v.buttons.blank4.visibility=!!(v.buttons.rotateLeft.visibility||v.buttons.rotate.visibility||v.buttons.rotateRight.visibility||v.buttons.deskew.visibility),v.buttons.crop.visibility=!!e.isUndefined(g.buttons.visibility.crop)||1==g.buttons.visibility.crop,v.buttons.cut.visibility=!!e.isUndefined(g.buttons.visibility.cut)||1==g.buttons.visibility.cut,v.buttons.changeImageSize.visibility=!!e.isUndefined(g.buttons.visibility.changeimagesize)||1==g.buttons.visibility.changeimagesize,v.buttons.flip.visibility=!!e.isUndefined(g.buttons.visibility.flip)||1==g.buttons.visibility.flip,v.buttons.mirror.visibility=!!e.isUndefined(g.buttons.visibility.mirror)||1==g.buttons.visibility.mirror,v.buttons.blank5.visibility=!!(v.buttons.crop.visibility||v.buttons.cut.visibility||v.buttons.changeImageSize.visibility||v.buttons.flip.visibility||v.buttons.mirror.visibility),v.buttons.zoomin.visibility=!!e.isUndefined(g.buttons.visibility.zoomin)||1==g.buttons.visibility.zoomin,v.buttons.originalsize.visibility=!!e.isUndefined(g.buttons.visibility.originalsize)||1==g.buttons.visibility.originalsize,v.buttons.zoomout.visibility=!!e.isUndefined(g.buttons.visibility.zoomout)||1==g.buttons.visibility.zoomout,v.buttons.blank6.visibility=!!(v.buttons.zoomin.visibility||v.buttons.originalsize.visibility||v.buttons.zoomout.visibility),v.buttons.fitPage.visibility=!!e.isUndefined(g.buttons.visibility.fit)||1==g.buttons.visibility.fit,v.buttons.fitWidth.visibility=!!e.isUndefined(g.buttons.visibility.fitw)||1==g.buttons.visibility.fitw,v.buttons.fitHeight.visibility=!!e.isUndefined(g.buttons.visibility.fith)||1==g.buttons.visibility.fith,v.buttons.blank7.visibility=!!(v.buttons.fitPage.visibility||v.buttons.fitWidth.visibility||v.buttons.fitHeight.visibility),v.buttons.hand.visibility=!!e.isUndefined(g.buttons.visibility.hand)||1==g.buttons.visibility.hand,v.buttons.select.visibility=!!e.isUndefined(g.buttons.visibility.rectselect)||1==g.buttons.visibility.rectselect,v.buttons.clicktozoomin.visibility=!!e.isUndefined(g.buttons.visibility.zoom)||1==g.buttons.visibility.zoom,v.buttons.blank7.visibility=!!(v.buttons.hand.visibility||v.buttons.select.visibility||v.buttons.clicktozoomin.visibility),v.buttons.restore.visibility=!!e.isUndefined(g.buttons.visibility.restore)||1==g.buttons.visibility.restore,v.buttons.save.visibility=!!e.isUndefined(g.buttons.visibility.save)||1==g.buttons.visibility.save,v.buttons.close.visibility=!!e.isUndefined(g.buttons.visibility.close)||1==g.buttons.visibility.close))),e.isUndefined(g.dialogText)||(s.CustomizableDisplayInfo.dialogText=u=g.dialogText),e.isUndefined(g.promptToSaveChange)||(this.promptToSaveChange=g.promptToSaveChange),e.isUndefined(g.border)||(v.outerBorder=g.border),e.isUndefined(g.topMenuBorder)||(v.topMenuBorder=g.topMenuBorder),e.isUndefined(g.innerBorder)||(v.canvasConfig.canvasBorder=g.innerBorder),e.isUndefined(g.background)||(v.canvasConfig.canvasBackground=g.background)),v},I.prototype._bindView=function(){var p=this;if(p.bShowImageEdit)return!0;if(!p.myImageEditor)return p.bDispose?e.Errors.ImageEditorDispose(p._stwain):e.Errors.ImageEditorNotExist(p._stwain),!1;var g=e.one(".dynamsoft-cvs-container");if(g&&g.getEL()?(p.cvsContainer=g,p.cvsParentId=g.parent()[0].id,p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera&&(p.cvsStatus=p._stwain.Addon.Camera.getStatus())):(p.cvsContainer="",p.cvsParentId="",p.cvsStatus=""),p.bShowImageEdit=!0,p.editorSettings&&p.editorSettings.element&&p.editorSettings.width&&p.editorSettings.height){if(p.UIEditor=p.editorSettings.element,p.bFullScreen=!1,p.myImageEditor.width=p.editorSettings.width,p.myImageEditor.height=p.editorSettings.height,p.SetWidthInner(p.editorSettings.width,!0),p.SetHeightInner(p.editorSettings.height,!0),p.myImageEditor.bindView(p.UIEditor),p.hide(),p.cvsParentId){var C=document.getElementById(p.cvsParentId);C&&C.appendChild(p.cvsContainer[0])}}else{var _=r.createElement("div");r.body.appendChild(_),document.body.insertBefore(_,document.body.firstElementChild),p.UIEditor=_,p.bFullScreen=!0,p.UIEditor.className="D_ImageUIEditor",p.UIEditor.style.width="100%",p.UIEditor.style.height="100%",p.UIEditor.style.position="fixed",p.UIEditor.style.left="0px",p.UIEditor.style.top="0px",p.UIEditor.style.zIndex="9999",p.UIEditor.style.display="none",p.SetWidthInner("100%",!0),p.SetHeightInner("100%",!0),p.myImageEditor.bindView(p.UIEditor),p.hide(),p.bShowImageEditForFullScreen=!0}if(p.updateMode(),p.SetSelectionRectAspectRatio(p.editorSettings&&p.editorSettings.selectionRectAspectRatio?p.editorSettings.selectionRectAspectRatio:0),p.HideEditorButtonForPad(),p.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],p._stwain._isMobileMode()){var v,T=e.one(".ds-dwt-ui-icon-acquire");if(T&&T.getEL()&&(T[0].style.display="none"),p.dwtMobileFileId="dwtmobilefile",p.UIEditor&&"DIV"==p.UIEditor.nodeName)(v=document.createElement("div")).innerHTML=p.bMobile?"<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+p.dwtMobileFileId+"' type='file' style='display:none' />":"<input multiple accept='image/*,.pdf' id ='"+p.dwtMobileFileId+"' type='file' style='display:none' />",p.UIEditor.appendChild(v);else{var D=document.getElementById(p.UIEditor);(v=document.createElement("div")).innerHTML=p.bMobile?"<input id ='"+p.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />":"<input id ='"+p.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />",D.appendChild(v)}e.get(p.dwtMobileFileId).onchange=function(){for(var E=0;E<this.files.length;E++)p._stwain.LoadImageFromBinary(this.files[E]);document.getElementById(p.dwtMobileFileId).value=""}}return p.myImageEditor.off("slideSwitch"),p.myImageEditor.on("slideSwitch",function(E){"left"==E?p._webViewer.myViewer.previous():"right"==E&&p._webViewer.myViewer.next()}),!0},I.prototype.dispose=function(){var g,p=this;return(g=p.mydvs.ViewControl.removeViewer(p.myImageEditor))&&(p.UIEditor.lastChild&&p.UIEditor.removeChild(p.UIEditor.lastChild),p.myImageEditor=void 0,p._webViewer._imageEditor=void 0,p._webViewer._imageEditorInner=void 0,p.mydvs=null,p._stwain=null,p.bDispose=!0),g},I.prototype.show=function(){var p=this;return p.myImageEditor?(p.bFullScreen&&(p.UIEditor.style.display="",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.style.overflow="hidden"),p.myImageEditor.showViewer=!0,!0):(p.bDispose?e.Errors.ImageEditorDispose(p._webViewer._stwain):e.Errors.ImageEditorNotExist(p._webViewer._stwain),!1)},I.prototype.hide=function(){var p=this;return p.myImageEditor?(p.myImageEditor.showViewer=!1,p.bFullScreen&&(p.UIEditor.style.display="none"),!0):(p.bDispose?e.Errors.ImageEditorDispose(p._webViewer._stwain):e.Errors.ImageEditorNotExist(p._webViewer._stwain),!1)},I.prototype._BindImageEditorEvents=function(){var p=this;e.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(g){p.myImageEditor.on(g,function(C,_){p[g](C,_)})})},I.prototype.HideEditorButtonForPad=function(){var g=this.myImageEditor,C=this.bPadViewer,_=document.getElementById("rotateBtn"+g.postfix);_&&(_.style.display=C?"none":"");var v=document.getElementById("deskewBtn"+g.postfix);v&&(v.style.display=C?"none":"");var T=document.getElementById("changeImageSizeBtn"+g.postfix);T&&(T.style.display=C?"none":"")},I.prototype.BackImageData=function(){var p=this;if(p._stwain._isMobileMode()&&p.bShowImageEdit){var g=p._webViewer.GetCurrentIndex();g>=0&&p._webViewer.GetImageData(p._webViewer.GetUidByIndex(g)).then(function(C){p.BackImageBuffer=C.oriData;var _=p._webViewer.GetMetaDataByIndex(g);_&&(p.BackModelImageControl={},p.BackModelImageControl.width=_.width,p.BackModelImageControl.height=_.height,p.BackModelImageControl.bitDepth=_.bitDepth,p.BackModelImageControl.resolutionX=_.resolutionX,p.BackModelImageControl.resolutionY=_.resolutionY)})}},I.prototype.CloseShowImageEditor=function(){var p=this;if(!p.myImageEditor)return p.bDispose?e.Errors.ImageEditorDispose(p._stwain):e.Errors.ImageEditorNotExist(p._stwain),!1;if(p.cvsContainer&&""!=p.cvsContainer&&p.cvsParentId&&""!=p.cvsParentId){var g=document.getElementById(p.cvsParentId);g&&g.appendChild(p.cvsContainer[0]),"playing"==p.cvsStatus&&p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera&&p._stwain.Addon.Camera.resume()}return!0},I.prototype.UpdateInfo=function(){w.Lib.hideMask()},I.prototype.clearSelectedAreas=function(){var p=this,g=!1;return p._webViewer.GetHowManyImagesInBuffer()<=0||((g=p.myImageEditor.clearSelectedBoxes())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),g)},I.prototype.SetSelectionRectAspectRatio=function(p){return this.myImageEditor.selectionBoxAspectRatio=p,!0},I.prototype.ZoomIn=function(){var g,p=this;return(g=p.myImageEditor.zoomIn())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),g},I.prototype.ZoomOut=function(){var g,p=this;return(g=p.myImageEditor.zoomOut())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),g},I.prototype.SetZoom=function(p,g,C){var v,_=this;return(v=g&C?_.myImageEditor.zoomTo(p,g,C):_.myImageEditor.zoomTo(p))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),v},I.prototype.GetZoom=function(){return this.myImageEditor.zoom},I.prototype.SetFitType=function(p){var C="window";return e.isUndefined(p)||("width"==p||"height"==p)&&(C=p),this.myImageEditor.fitType=C,!0},I.prototype.SetMouseShape=function(p){var C;switch(p){case w.DWT.EnumDWT_MouseShape.Default:C="default";break;case w.DWT.EnumDWT_MouseShape.Hand:C="pointer";break;case w.DWT.EnumDWT_MouseShape.Crosshair:C="crosshair";break;case w.DWT.EnumDWT_MouseShape.Zoom:C="zoom-in";break;default:C="crosshair"}return this.SetCursor(C),!0},I.prototype.SetCursor=function(p){var g=this;if(!g._webViewer._NouiNotSupport("cursor"))return!1;var C="default";switch(p){case"default":C="default",g.SetOperationMode(1);break;case"pointer":C="pointer",g.SetOperationMode(0);break;case"crosshair":C="crosshair",g.SetOperationMode(1);break;case"zoom-in":C="zoom-in",g.SetOperationMode(2);break;default:C="crosshair"}return g.myImageEditor.canvasMouseShape=C,!0},I.prototype.SetSelectionImageBorderColor=function(p){return this.myImageEditor.selectedPageBorderColor=p,!0},I.prototype.SetBackgroundColor=function(p){return this.myImageEditor.imageBackgroundColor=p,!0},I.prototype.SetWidth=function(p){return this.myImageEditor.width=p,!0},I.prototype.SetWidthInner=function(p,g){var C=this;if(g)C.myImageEditor.width=p;else if(e.isString(p)&&p.indexOf("%")>=0){var _=e.one("#"+C._stwain._containerID);C.myImageEditor.width=parseInt(e.css(_,"width")*parseInt(p)/100)}else C.myImageEditor.width=p;return!0},I.prototype.SetHeight=function(p){return this.myImageEditor.height=p,!0},I.prototype.SetHeightInner=function(p,g){var C=this;if(g)C.myImageEditor.height=p;else if(e.isString(p)&&p.indexOf("%")>=0){var _=e.one(C._stwain._containerElement);C.myImageEditor.height=parseInt(e.css(_,"height")*parseInt(p)/100)}else C.myImageEditor.height=p;return!0},I.prototype.SetIfAutoScroll=function(p){return this.myImageEditor.showLatestPage=p,!0},I.prototype.ChangeButtonClass=function(p,g){var _;return this.myImageEditor&&(_=this.myImageEditor.setButtonClass(p,g)),_},I.prototype.SetOperationMode=function(p){this.myImageEditor.operationMode=p},I.prototype.UnbindContent=function(p){this.myImageEditor.unbindContent()},I.prototype.SetSelectedPageBackground=function(p){this.myImageEditor.selectedPageBackground=p},I.prototype.GetRealTimeMetadataByIndex=function(p){var g=this;if(!(p<0||p>=g._webViewer.GetHowManyImagesInBuffer()))return g.myImageEditor.getRealTimeMetadataByIndex(p);e.Errors.IndexOutOfRange(g._stwain)},I.prototype.DVSRotate=function(p){var C,g=this;return g.myImageEditor.rotateMode=0,(C=g.myImageEditor.rotate(p))||e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode),C},I.prototype.DVSFlip=function(){var g,p=this;return(g=p.myImageEditor.flip())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),g},I.prototype.DVSMirror=function(){var g,p=this;return(g=p.myImageEditor.mirror())||e.Errors.WebviewerError(p._stwain,p.mydvs.Error.errorMessage,p.mydvs.Error.errorCode),g},I.prototype.DVSCrop=function(p,g,C,_){var T,v=this;return(T=v.myImageEditor.crop(p,g,C-p,_-g))||e.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode),T},I.prototype.DVSErase=function(p,g,C,_){var T,v=this;return(T=v.myImageEditor.erase(p,g,C-p,_-g,v._webViewer._UIView.BackgroundFillColor))||e.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode),T},I.prototype.DVSSaveTransformResult=function(p){var g=this;return g.myImageEditor.saveTransformation().then(function(){p(null,-1,null)},function(C){e.Errors.WebviewerError(g._stwain,g.mydvs.Error.errorMessage,g.mydvs.Error.errorCode)}),!0},I.prototype.DVSRotateEx=function(p,g){var _,C=this;return C.myImageEditor.rotateMode=g?1:0,(_=C.myImageEditor.rotate(p))||e.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode),_},I.prototype.DVSChangeImageSize=function(p,g,C){var v,_=this;return(v=_.myImageEditor.changePageSize(parseInt(p),parseInt(g),C))||e.Errors.WebviewerError(_._stwain,_.mydvs.Error.errorMessage,_.mydvs.Error.errorCode),v},I.prototype.DVSSkewAngle=function(){var p=this;return p._stwain._asyncGetSkewAngleOnly(p._webViewer.GetCurrentIndex(),function(g){p.DVSRotateEx(g,!0),p.UpdateInfo(),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()}),!0},I.prototype.updateButtons=function(){var p=this;1==p._IfChangedWithinTheEditor?(p.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage"),p.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")):(p.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey"),p.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey"))},I.prototype.updateMode=function(p){var _,g=this;if(g.bShowImageEdit){if((_=g._webViewer.GetHowManyImagesInBuffer())>1?(g._webViewer.GetCurrentIndex()==_-1||g._webViewer.GetHowManyImagesInBuffer()<=1?g.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"):g.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage"),g._webViewer.GetCurrentIndex()<=0||g._webViewer.GetHowManyImagesInBuffer()<=1?g.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey"):g.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")):(g.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey"),g.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")),g.updateButtons(),g.__SetCropButtonGrey(!0),g.__SetEraseButtonGrey(!0),g.bMobile)switch(g.cursorStatus){case"rectselect":g.OnSelect();break;case"zoom":g.OnClicktozoomin();break;default:g.OnHand()}else switch(g.cursorStatus){case"hand":g.OnHand();break;case"zoom":g.OnClicktozoomin();break;default:g.OnSelect()}if(p){var v=g._webViewer.GetCurrentIndex();1==g._IfChangedWithinTheEditor&&v!=g.iChangedIndex&&g.ShowDialogForSaveImage(g._webViewer.GetCurrentIndex(),!1)}}},I.prototype.__SaveImageInner=function(p,g){var C=this;if(-1==C.iChangedIndex&&0==C._IfSaveChangesOutSideOfTheEditor)return C._IfChangedWithinTheEditor=!1,g&&g(),!1;if(1!=C._IfChangedWithinTheEditor&&0==C._IfSaveChangesOutSideOfTheEditor)return alert(s.CustomizableDisplayInfo.errorMessages.imageNotChanged),C._IfChangedWithinTheEditor=!1,g&&g(),!1;C._IfSaveChangesOutSideOfTheEditor&&(C.iChangedIndex=C._webViewer.GetCurrentIndex());var T=!0;if(1==C._IfChangedWithinTheEditor||1==C._IfSaveChangesOutSideOfTheEditor){var D=C.getImageManager().convertClientIndexToServerId(C.iChangedIndex);if(-1==D)return g&&g(),!1;C.OnGetImageFromServerForEdit(C._webViewer._UIView.mapModelImageControl[D],C.iChangedIndex,2,function(P,E,M){if(P){if(1==p&&(e.log("__SaveImageInner: "+[P.guid].join(",")),C._webViewer.GetCurrentIndex()==E&&(C._stwain._isMobileMode()?C._webViewer.MobileUpdateImage(P,M):C._webViewer.UpdateImage(P,M))),C._IfChangedWithinTheEditor=!1,C.iChangedIndex=-1,-1==P.serverId)return g&&g(),!1}else C._IfChangedWithinTheEditor=!1,C.iChangedIndex=-1;return C.updateButtons(),g&&g(),!0}),T=!1}return C._IfSaveChangesOutSideOfTheEditor=!1,T&&(C._IfChangedWithinTheEditor=!1,g&&g()),!0},I.prototype.ShowDialogForSaveImage=function(p,g,C,_){var v=this,T=function(){v.__SaveImageInner(!0,function(){d.DCP_DWT_OnClickCloseInstall(v._stwain._containerID),e.bChangeImage=1,-1==p?v.OnClose():v._webViewer.__goInner(p),g&&(document.body.style.overflow=""),l.isFunction(C)&&C()})};if(v.promptToSaveChange){w.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"<div>",u.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',u.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',u.saveChangedImage[2],'" /></div>',"</div>"].join(""),v.bMobile?{width:300,headerStyle:1}:{width:420,headerStyle:1});var P=e.one(".dynamsoft_btnSave").getEL();P&&(P.onclick=function(){T()});var E=e.one(".dynamsoft_btnCancel").getEL();E&&(E.onclick=function(){v.__RestoreImageInner(p,function(){d.DCP_DWT_OnClickCloseInstall(v._stwain._containerElement),e.bChangeImage=0,-1==p?v.OnClose():v._webViewer.__goInner(p),g&&(document.body.style.overflow=""),l.isFunction(_)&&_()})})}else T()},I.prototype.__SetCropButtonGrey=function(p){this.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),p&&this.clearSelectedAreas()},I.prototype.__SetEraseButtonGrey=function(p){this.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey"),p&&this.clearSelectedAreas()},I.prototype.__SetZoomInButtonEnable=function(p){this.ChangeButtonClass("zoomin",1==p?"ds-dwt-ui-icon-zoomin":"ds-dwt-ui-icon-zoomin-grey")},I.prototype.__SetZoomOutButtonEnable=function(p){this.ChangeButtonClass("zoomout",1==p?"ds-dwt-ui-icon-zoomout":"ds-dwt-ui-icon-zoomout-grey")},I.prototype.pageChange=function(p){var C,g=this,_=g._webViewer.GetHowManyImagesInBuffer();e.log("OnPagination"),_<=0?l.output(g,"No image in Buffer"):1!=_&&(!/^\d+$/.test(p)||p<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((C=parseInt(p)-1)<0?C=0:C>=_&&(C=_-1),C!=g._webViewer.GetCurrentIndex()&&g.go(C)))},I.prototype.bufferChanged=function(p){var g=this,C=g._webViewer.GetCurrentIndex();return g.updateMode(),"shift"!=p.action||1!=g._IfChangedWithinTheEditor||(g.ShowDialogForSaveImage(C,!1),!1)},I.prototype.pageRendered=function(p){},I.prototype.OnFirstImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.first()},I.prototype.OnLastImage=function(){e.Errors.ClearErrorInfo(this._stwain),this._webViewer.last()},I.prototype.OnPreviousImage=function(){var g=e.one(".ds-dwt-ui-icon-preImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!g||!g.getEL())&&this._webViewer.previous()},I.prototype.OnNextImage=function(){var g=e.one(".ds-dwt-ui-icon-nextImage-grey");e.Errors.ClearErrorInfo(this._stwain),(!g||!g.getEL())&&this._webViewer.next()},I.prototype.go=function(p){var g=this;if(g._webViewer.GetHowManyImagesInBuffer()<=0)return l.output(g,"No image in Buffer"),!1;if(1==g._IfChangedWithinTheEditor)return g.ShowDialogForSaveImage(p,!1),!1;if(g.bShowImageEdit&&typeof p<"u"){if(-1==p)return!1;g.bCouldBeTimeConsuming=!0,g.myImageEditor.gotoPage(p),g.updateMode()}return!0},I.prototype.OnAcquire=function(){var p=this,g=function(){p._stwain.SelectSource(function(){p._stwain.CloseSource(),p._stwain.OpenSource(),p._stwain.IfShowUI=!0,1==w.DWT.IfConfineMaskWithinTheViewer?(w.DWT.IfConfineMaskWithinTheViewer=!1,p._stwain.AcquireImage({},function(){w.DWT.IfConfineMaskWithinTheViewer=!0,null==window.onresize&&(window.onresize=function(){p._stwain.ShowImageEditorEx(-1,-1,-1,-1)})},function(){null==window.onresize&&(window.onresize=function(){p._stwain.ShowImageEditorEx(-1,-1,-1,-1)})})):p._stwain.AcquireImage()},function(){e.log("User did not select a source")})};e.Errors.ClearErrorInfo(p._stwain),p._IfChangedWithinTheEditor?p.ShowDialogForSaveImage(p._webViewer.GetCurrentIndex(),!1,g,g):g()},I.prototype.OnLoadImage=function(){var p=this,g=null,C=function(){if(p._stwain._isMobileMode()){var _=document.getElementById(p.dwtMobileFileId);return _.value="",void _.click()}if(p._stwain.IfShowFileDialog=!0,p._stwain.Addon&&p._stwain.Addon.PDF){var P,D=!1;(p._stwain._isMobileMode()?e.License.checkProductKey(p._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(p._stwain,{PDFRasterizer:!0},!0))&&(g=p._stwain.Addon.PDF.GetConvertMode(),P=p._stwain._innerFun("GetAddOnVersion",w.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&P==w.DWT.PdfMacVersion||e.env.bLinux&&P==w.DWT.PdfLinuxVersion||P==w.DWT.PdfVersion)&&(D=!0),D&&p._stwain.Addon.PDF.SetConvertMode(3))}p._stwain.LoadImageEx("",5,function(){e.log("Loaded an image successfully."),null!=g&&p._stwain.Addon.PDF.SetConvertMode(g)},function(M,O){e.log("Loading failed with the error: "+O),null!=g&&p._stwain.Addon.PDF.SetConvertMode(g)})};e.Errors.ClearErrorInfo(p._stwain),p._IfChangedWithinTheEditor?p.ShowDialogForSaveImage(p._webViewer.GetCurrentIndex(),!1,C,C):C()},I.prototype.OnPrint=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetCurrentIndex()<0?l.output(p,"No image in Buffer"):p._webViewer._UIView.Print()},I.prototype.OnRemoveAll=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):p._stwain.RemoveAllImages()},I.prototype.OnRemove=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):p._stwain.RemoveAllSelectedImages()},I.prototype.OnRotateLeft=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._stwain._isMobileMode()?(p.DVSRotate(270),p.UpdateInfo()):p._stwain.RotateLeft(p._webViewer.GetCurrentIndex()),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSRotate(270),p.UpdateInfo()):p._stwain.RotateLeft(p._webViewer.GetCurrentIndex())),p.updateMode())},I.prototype.RotateEx=function(p,g,C){var _=this;_._webViewer.GetHowManyImagesInBuffer()<=0?l.output(_,"No image in Buffer"):(typeof p>"u"||typeof g>"u"||typeof C>"u"?alert(s.CustomizableDisplayInfo.errorMessages.insufficientParas):1==_._webViewer._ImgManager.bImageChangedInViewer?(_._IfSaveChangesOutSideOfTheEditor=!0,_._webViewer._ImgManager.bImageChangedInViewer=!1,_.__SaveImageInner(!1,function(){_.bCouldBeTimeConsuming=!0,w.Lib.showMask(),_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._stwain._isMobileMode()?(_.DVSRotateEx(p,g,C),_.UpdateInfo()):_._stwain.RotateEx(_._webViewer.GetCurrentIndex(),p,g,C),_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_.updateButtons()})):(_.bCouldBeTimeConsuming=!0,w.Lib.showMask(),_._IfSaveChangesOutSideOfTheEditor=!1,_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_._stwain._isMobileMode()?(_.DVSRotateEx(p,g,C),_.UpdateInfo()):_._stwain.RotateEx(_._webViewer.GetCurrentIndex(),p,g,C)),_.updateMode())},I.prototype.OnRotate=function(p){var g=this;if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)l.output(g,"No image in Buffer");else{if(e.hide("dynamsoft_ImgSizeEditor"),!e.get("dynamsoft_RotateAnyAngle")){var C=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',u.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',u.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',u.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',u.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',u.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];e.one("body").append(C.join(""))}var _=e.get("dynamsoft_Angle_InterpolationMethod");_.options.length=0,_.options.add(new Option("NearestNeighbor",1)),_.options.add(new Option("Bilinear",2)),_.options.add(new Option("Bicubic",3)),_=null,e.get("dynamsoft_btnRotateAnyAngleOK").onclick=function(){var R=e.get("dynamsoft_Angle").value;if(e.get("dynamsoft_Angle").className="",!/^\d+$/.test(R)||R<=0)return e.get("dynamsoft_Angle").className+=" invalid",e.get("dynamsoft_Angle").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidAngle);var b=e.get("dynamsoft_KeepSize").checked;g.bCouldBeTimeConsuming=!0,w.Lib.showMask();var A=parseInt(R);g.RotateEx(A,b,e.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1),0!=g._stwain.ErrorCode||e.hide("dynamsoft_RotateAnyAngle")},e.get("dynamsoft_btnCancelRotateAnyAngle").onclick=function(){e.hide("dynamsoft_RotateAnyAngle")};var D=e.get("dynamsoft_RotateAnyAngle");e.toggle("dynamsoft_RotateAnyAngle");var P=p.srcElement||p.target,E=P.y;E||(E=P.offsetTop+1);var M=P.x;if(M||(M=P.offsetLeft+1),g.UIEditor&&"DIV"==g.UIEditor.nodeName)D.style.top=p.clientY+document.documentElement.scrollTop+"px",D.style.left=p.clientX+document.documentElement.scrollLeft+"px";else{var O=r.getElementById(g.UIEditor);D.style.top=E+P.offsetHeight+l.getTop(O)+"px",D.style.left=M+l.getLeft(O)+"px"}e.get("dynamsoft_Angle").value="45"}},I.prototype.OnRotateRight=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSRotate(90),p.UpdateInfo()):p._stwain.RotateRight(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSRotate(90),p.UpdateInfo()):p._stwain.RotateRight(p._webViewer.GetCurrentIndex())),p.updateMode())},I.prototype.OnDeskew=function(){var p=this;if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)l.output(p,"No image in Buffer");else if(1==p._webViewer._ImgManager.bImageChangedInViewer)p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){if(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._stwain._isMobileMode())p.DVSSkewAngle();else{var C=p._webViewer.GetCurrentIndex();C>=0&&p._stwain.GetSkewAngleAsync(C).then(function(_){p.RotateEx(_,!0,1)}),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()}});else if(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode())p.DVSSkewAngle();else{var g=p._webViewer.GetCurrentIndex();g>=0&&p._stwain.GetSkewAngleAsync(g).then(function(C){p.RotateEx(C,!0,1)})}},I.prototype.OnCrop=function(){e.Errors.ClearErrorInfo(this._stwain);var C=e.one(".ds-dwt-ui-icon-cropImage");C&&C.getEL()&&this.Crop()},I.prototype.Crop=function(){var p=this;if(p._webViewer.GetHowManyImagesInBuffer()<=0)l.output(p,"No image in Buffer");else{var g=p.actualSelectedCanvasAreas;if(2==g.length){var C=g[1],_=C.left,v=C.top,T=C.right,D=C.bottom;parseInt(_)-parseInt(T)!=0&&parseInt(v)-parseInt(D)!=0&&(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSCrop(parseInt(_),parseInt(v),parseInt(T),parseInt(D)),p.UpdateInfo()):p._stwain.Crop(p._webViewer.GetCurrentIndex(),parseInt(_),parseInt(v),parseInt(T),parseInt(D)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0),p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSCrop(parseInt(_),parseInt(v),parseInt(T),parseInt(D)),p.UpdateInfo()):p._stwain.Crop(p._webViewer.GetCurrentIndex(),parseInt(_),parseInt(v),parseInt(T),parseInt(D)),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)),p.updateMode())}else l.output(p,"No area selected for cropping")}},I.prototype.OnErase=function(){var C=e.one(".ds-dwt-ui-icon-erase");e.Errors.ClearErrorInfo(this._stwain),C&&C.getEL()&&this.Erase()},I.prototype.Erase=function(){var p=this,g=!1;if(p._webViewer.GetHowManyImagesInBuffer()<=0)l.output(p,"No image in Buffer");else{var C=p.actualSelectedCanvasAreas;if(1!=C.length){if(1==p._webViewer._ImgManager.bImageChangedInViewer)p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){for(var M=1;M<C.length;M++){var O=C[M],R=O.left,F=O.top,B=O.right,b=O.bottom;parseInt(R)-parseInt(B)!=0&&parseInt(F)-parseInt(b)!=0&&(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSErase(parseInt(R),parseInt(F),parseInt(B),parseInt(b)),p.UpdateInfo()):p._stwain.CutFrameToClipboard(p._webViewer.GetCurrentIndex(),parseInt(R),parseInt(F),parseInt(B),parseInt(b)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons(),g=!0)}p.__SetEraseButtonGrey(g),p.__SetCropButtonGrey(g)});else{p._IfSaveChangesOutSideOfTheEditor=!1,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex();for(var _=1;_<C.length;_++){var v=C[_],T=v.left,D=v.top,P=v.right,E=v.bottom;parseInt(T)-parseInt(P)!=0&&parseInt(D)-parseInt(E)!=0&&(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSErase(parseInt(T),parseInt(D),parseInt(P),parseInt(E)),p.UpdateInfo()):p._stwain.CutFrameToClipboard(p._webViewer.GetCurrentIndex(),parseInt(T),parseInt(D),parseInt(P),parseInt(E)),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),g=!0)}p.__SetEraseButtonGrey(g),p.__SetCropButtonGrey(g)}p.updateMode()}else l.output(p,"No area selected for erasing")}},I.prototype.ChangeImageSize=function(p,g,C){var _=this;_._webViewer.GetHowManyImagesInBuffer()<=0?l.output(_,"No image in Buffer"):(1==_._webViewer._ImgManager.bImageChangedInViewer?(_._IfSaveChangesOutSideOfTheEditor=!0,_._webViewer._ImgManager.bImageChangedInViewer=!1,_.__SaveImageInner(!1,function(){_.bCouldBeTimeConsuming=!0,w.Lib.showMask(),_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._stwain._isMobileMode()?(_.DVSChangeImageSize(p,g,C),_.UpdateInfo()):_._stwain.ChangeImageSize(_._webViewer.GetCurrentIndex(),p,g,C),_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_.updateButtons()})):(_.bCouldBeTimeConsuming=!0,w.Lib.showMask(),_._IfSaveChangesOutSideOfTheEditor=!1,_._webViewer._ImgManager.bImageJustChangedInEditor=!0,_._IfChangedWithinTheEditor=!0,_.iChangedIndex=_._webViewer.GetCurrentIndex(),_._stwain._isMobileMode()?(_.DVSChangeImageSize(p,g,C),_.UpdateInfo()):_._stwain.ChangeImageSize(_._webViewer.GetCurrentIndex(),p,g,C)),_.updateMode())},I.prototype.OnChangeImageSize=function(p){var g=this;if(e.Errors.ClearErrorInfo(g._stwain),!(g._webViewer.GetHowManyImagesInBuffer()<=0)){if(e.hide("dynamsoft_RotateAnyAngle"),!e.get("dynamsoft_ImgSizeEditor")){var C=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',u.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',u.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",u.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',u.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',u.dlgChangeImageSize[4],'"/></span></div>',"</div>"];e.one("body").append(C.join(""))}var _=e.get("dynamsoft_InterpolationMethod");_.options.length=0,_.options.add(new Option("NearestNeighbor",1)),_.options.add(new Option("Bilinear",2)),_.options.add(new Option("Bicubic",3)),_=null,e.get("dynamsoft_btnChangeImageSizeOK").onclick=function(){var Y=e.get("dynamsoft_img_width").value,ne=e.get("dynamsoft_img_height").value;e.get("dynamsoft_img_width").className="",e.get("dynamsoft_img_height").className="";var Ie=/^\d+$/;return!Ie.test(ne)||ne<=0?(e.get("dynamsoft_img_height").className+=" invalid",e.get("dynamsoft_img_height").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):!Ie.test(Y)||Y<=0?(e.get("dynamsoft_img_width").className+=" invalid",e.get("dynamsoft_img_width").focus(),void alert(s.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth)):(g.ChangeImageSize(Y,ne,e.get("dynamsoft_InterpolationMethod").selectedIndex+1),void(0!=g._stwain.ErrorCode||e.hide("dynamsoft_ImgSizeEditor")))},e.get("dynamsoft_btnCancelChange").onclick=function(){e.hide("dynamsoft_ImgSizeEditor")};var D=e.get("dynamsoft_ImgSizeEditor");e.toggle("dynamsoft_ImgSizeEditor");var E=p.srcElement||p.target,M=E.y;M||(M=E.offsetTop+1);var O=E.x;if(O||(O=E.offsetLeft+1),g.UIEditor&&"DIV"==g.UIEditor.nodeName)D.style.top=p.clientY+document.documentElement.scrollTop+"px",D.style.left=p.clientX+document.documentElement.scrollLeft+"px";else{var R=r.getElementById(g.UIEditor);D.style.top=M+E.offsetHeight+l.getTop(R)+"px",D.style.left=O+l.getLeft(R)+"px"}var F=g._webViewer.GetCurrentIndex(),B=g.getImageManager().convertClientIndexToServerId(F);if(-1==B)return!1;if(g._webViewer._UIView.mapModelImageControl[B]){if(g._stwain._isMobileMode()){var b,A=0,N=0;(b=g.GetRealTimeMetadataByIndex())&&b.width&&(A=b.width),b&&b.height&&(N=b.height),e.get("dynamsoft_img_width").value=parseInt(A),e.get("dynamsoft_img_height").value=parseInt(N)}else e.get("dynamsoft_img_width").value=parseInt(g.getImageManager().GetImageWidth(F)),e.get("dynamsoft_img_height").value=parseInt(g.getImageManager().GetImageHeight(F));return!0}return!1}l.output(g,"No image in Buffer")},I.prototype.OnFlip=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSFlip(),p.UpdateInfo()):p._stwain.Flip(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSFlip(),p.UpdateInfo()):p._stwain.Flip(p._webViewer.GetCurrentIndex())),p.updateMode())},I.prototype.OnMirror=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(1==p._webViewer._ImgManager.bImageChangedInViewer?(p._IfSaveChangesOutSideOfTheEditor=!0,p._webViewer._ImgManager.bImageChangedInViewer=!1,p.__SaveImageInner(!1,function(){p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._stwain._isMobileMode()?(p.DVSMirror(),p.UpdateInfo()):p._stwain.Mirror(p._webViewer.GetCurrentIndex()),p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p.updateButtons()})):(p.bCouldBeTimeConsuming=!0,w.Lib.showMask(),p._IfSaveChangesOutSideOfTheEditor=!1,p._webViewer._ImgManager.bImageJustChangedInEditor=!0,p._IfChangedWithinTheEditor=!0,p.iChangedIndex=p._webViewer.GetCurrentIndex(),p._stwain._isMobileMode()?(p.DVSMirror(),p.UpdateInfo()):p._stwain.Mirror(p._webViewer.GetCurrentIndex())),p.updateMode())},I.prototype.OnZoomin=function(){var p=this,g=e.one(".ds-dwt-ui-icon-zoomin-grey");if(!g||!g.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void l.output(p,"No image in Buffer");var C=Math.floor(100*p.GetZoom()*p._webViewer._UIView.zoomInStep)+1;!C||1<C&&C<2501?(p.ZoomIn(),p.__SetZoomInButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),p.__SetZoomInButtonEnable(!1)),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)}},I.prototype.OnOriginalsize=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(p.SetZoom(1),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},I.prototype.OnZoomout=function(){var p=this,g=e.one(".ds-dwt-ui-icon-zoomout-grey");if(!g||!g.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void l.output(p,"No image in Buffer");var C=Math.floor(100*p.GetZoom()*p._webViewer._UIView.zoomOutStep)-1;!C||1<C&&C<6501?(p.ZoomOut(),p.__SetZoomOutButtonEnable(!0)):(alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),p.__SetZoomOutButtonEnable(!1)),p.__SetZoomInButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0)}},I.prototype.OnFitPage=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(p.SetFitType(),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},I.prototype.OnFitWidth=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(p.SetFitType("width"),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},I.prototype.OnFitHeight=function(){var p=this;e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0?l.output(p,"No image in Buffer"):(p.SetFitType("height"),p.__SetZoomInButtonEnable(!0),p.__SetZoomOutButtonEnable(!0),p.__SetCropButtonGrey(!0),p.__SetEraseButtonGrey(!0))},I.prototype.OnHand=function(){var g=w.DWT.EnumDWT_MouseShape.Hand;this.clearSelectedAreas(),this.SetMouseSelectInner(g)},I.prototype.OnSelect=function(){this.SetMouseSelectInner(w.DWT.EnumDWT_MouseShape.Crosshair)},I.prototype.OnClicktozoomin=function(){var g=w.DWT.EnumDWT_MouseShape.Zoom;this.clearSelectedAreas(),this.SetMouseSelectInner(g)},I.prototype.SetMouseSelectInner=function(p){var g=this;if(e.Errors.ClearErrorInfo(g._stwain),g._webViewer.GetHowManyImagesInBuffer()<=0)l.output(g,"No image in Buffer");else if(g.SetMouseShape(p),g.__EnableMouseShapButtons(p),g.bMobile)switch(p){case w.DWT.EnumDWT_MouseShape.Crosshair:g.cursorStatus="rectselect";break;case w.DWT.EnumDWT_MouseShape.Zoom:g.cursorStatus="zoom";break;default:g.cursorStatus="hand"}else switch(p){case w.DWT.EnumDWT_MouseShape.Hand:g.cursorStatus="hand";break;case w.DWT.EnumDWT_MouseShape.Zoom:g.cursorStatus="zoom";break;default:g.cursorStatus="rectselect"}},I.prototype.OnRestore=function(){var p=this,g=e.one(".ds-dwt-ui-icon-saveImage-grey");if(!g||!g.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void l.output(p,"No image in Buffer");p.__RestoreImageInner(-1)}},I.prototype.__RestoreImageInner=function(p,g){var C=this;if(-1==C.iChangedIndex)return C._IfChangedWithinTheEditor=!1,void(g&&g());if(C._stwain._isMobileMode())C.Reset(),C._IfChangedWithinTheEditor=!1,C.iChangedIndex=-1,C.updateButtons(),g&&g();else{var T=!0;if(1==C._IfChangedWithinTheEditor){var D=C.getImageManager().convertClientIndexToServerId(C.iChangedIndex);-1!=D&&C.OnGetImageFromServerForEdit(C._webViewer._UIView.mapModelImageControl[D],C.iChangedIndex,1,function(P,E,M){P&&(e.log("__RestoreImageInner: "+[P.guid].join(",")),C._stwain._isMobileMode()?C._webViewer.MobileUpdateImage(P,M):C._webViewer.UpdateImage(P,M)),C._IfChangedWithinTheEditor=!1,C.iChangedIndex=-1;var O=P&&P.serverId;return-1==O?(C.updateButtons(),g&&g(),!1):(C.updateButtons(),-1==p&&-1==(O=C.getImageManager().convertClientIndexToServerId(C._webViewer.GetCurrentIndex()))?(e.Errors.IndexOutOfRange(C._stwain),g&&g(),!1):void(g&&g()))}),T=!1}T&&(C._IfChangedWithinTheEditor=!1,g&&g())}},I.prototype.OnGetImageFromServerForEdit=function(p,g,C,_){var T,v=this;if(_&&v._webViewer._UIView.BaseUrl){var P=v.getImageManager().convertClientIndexToServerId(g);if(-1==P)return!1;if(v._stwain._isMobileMode())if(1==C){var E=v._webViewer.GetMetaDataByIndex(g);E&&(E.width=v.BackModelImageControl.width,E.height=v.BackModelImageControl.height,E.bitDepth=v.BackModelImageControl.bitDepth,E.resolutionX=v.BackModelImageControl.resolutionX,E.resolutionY=v.BackModelImageControl.resolutionY),p.ticks=Date.now(),p.imageUrl=v.BackImageBuffer,_(p,g,{metaData:E})}else v.DVSSaveTransformResult(_);else w.DWT.ConnectWithSocket?_():(T=f.getUrlByAct(v._webViewer._UIView.BaseUrl,P,C),e.ajax({method:"GET",xhrFields:{withCredentials:!0},url:T,onSuccess:function(M){p.ticks=Date.now(),p.imageUrl=f.getImageUrl(v._webViewer._UIView.BaseUrl,P,-1,-1,p.ticks),p.minImageUrl=f.getImageUrl(v._webViewer._UIView.BaseUrl,P,parseInt(p.iImageControlWidth),parseInt(p.iImageControlHeight),p.ticks);var O=v._webViewer.GetMetaDataByIndex(g);if(O){var R=v._webViewer._UIView.GetDataImageControl(P);O.width=R&&R.width?R.width:v._stwain.GetImageWidth(g),O.height=R&&R.height?R.height:v._stwain.GetImageHeight(g)}_(p,g,O)},onError:function(){}}))}return!0},I.prototype.OnSave=function(){var p=this,g=e.one(".ds-dwt-ui-icon-saveImage-grey");if(!g||!g.getEL()){if(e.Errors.ClearErrorInfo(p._stwain),p._webViewer.GetHowManyImagesInBuffer()<=0)return void l.output(p,"No image in Buffer");p.__SaveImageInner(!0,function(){if(-1==p.getImageManager().convertClientIndexToServerId(p._webViewer.GetCurrentIndex()))return e.Errors.IndexOutOfRange(p._stwain),!1})}},I.prototype.OnClose=function(){var p=this;return e.Errors.ClearErrorInfo(p._stwain),1==p._IfChangedWithinTheEditor?(p.ShowDialogForSaveImage(-1,!0),!1):p.OnCloseInner()},I.prototype.OnCloseInstall=function(){0==this._IfChangedWithinTheEditor&&d.DCP_DWT_OnClickCloseInstall(this._stwain._containerElement)},I.prototype.Reset=function(p){return this.myImageEditor.reset()},I.prototype.OnCloseInner=function(p){var _,g=this;if(e.Errors.ClearErrorInfo(g._stwain),1==g._IfChangedWithinTheEditor){if(!p)return g.ShowDialogForSaveImage(-1,!0),!1;d.DCP_DWT_OnClickCloseInstall(g._stwain._containerElement),e.bChangeImage=0,g.__RestoreImageInner(-1)}return g.UIEditor&&1==g.bFullScreen?g.UIEditor.childNodes.length>0&&g.UIEditor.parentNode.removeChild(g.UIEditor):g.myImageEditor&&g.myImageEditor.unbindView(g.UIEditor),g.bShowImageEdit=!1,g._webViewer.bShowImageEdit=!1,g.bShowImageEditForFullScreen=!1,g.CloseShowImageEditor(),e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle"),(_=e.get("dynamsoft_ImgSizeEditor"))&&_.parentNode.removeChild(_),(_=e.get("dynamsoft_RotateAnyAngle"))&&_.parentNode.removeChild(_),w.Lib.dialog.selectsourcedlg&&w.Lib.dialog.selectsourcedlg.close(),window.onresize=null,document.body.style.overflow="",e.isFunction(g._stwain.__CloseImageEditorUI)&&g._stwain.__CloseImageEditorUI(),g.dispose()},I.prototype.__EnableMouseShapButtons=function(p){var g=this;g.ChangeButtonClass("hand","ds-dwt-ui-icon-hand"),g.ChangeButtonClass("select","ds-dwt-ui-icon-select"),g.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin"),p==w.DWT.EnumDWT_MouseShape.Hand?g.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected"):p==w.DWT.EnumDWT_MouseShape.Crosshair?g.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected"):p==w.DWT.EnumDWT_MouseShape.Zoom&&g.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")},I.prototype.click=function(p){e.hide("dynamsoft_ImgSizeEditor"),e.hide("dynamsoft_RotateAnyAngle")},I.prototype.imageClick=function(p,g){this.UpdateInfo()},I.prototype.pageAreaSelected=function(p,g){var C=this,_=1;if(g&&g.length>0){var v=g[g.length-1];v.index&&(_=parseInt(v.index)+1),_>0&&_<C.actualSelectedCanvasAreas.length?C.actualSelectedCanvasAreas[_]={left:v.x,top:v.y,right:v.x+v.width,bottom:v.y+v.height}:_==C.actualSelectedCanvasAreas.length&&C.actualSelectedCanvasAreas.push({left:v.x,top:v.y,right:v.x+v.width,bottom:v.y+v.height}),2==C.actualSelectedCanvasAreas.length&&v.width>0&&v.height>0?(C.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage"),C.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")):(C.__SetCropButtonGrey(!1),C.__SetEraseButtonGrey(!1))}},I.prototype.pageAreaUnselected=function(p){var g=this;g.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}],g.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey"),g.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")},I.prototype.onDrop=function(p){this._webViewer.dropEvent(p)},I.prototype.getImageManager=function(){return this._webViewer._ImgManager},e.UI=e.UI||{},e.UI.ImageEditorInner=I}function m(p,g){var C=this;C._imageEditorInner=new e.UI.ImageEditorInner(p,g),C.myImageEditor=C._imageEditorInner.myImageEditor}function I(p,g){var C=this;C._webViewer=p,C.mydvs=p.mydvs,C._stwain=p._stwain,C.bShowImageEditForFullScreen=!1,C.bCouldBeTimeConsuming=!1,C.bShowImageEdit=!1,C.promptToSaveChange=!0;var _=o;C.bMobile=!1;var v=!1;C._stwain._isPC()||(C.bPadViewer||(_=c,v=!0),C.bMobile=!0),_=C.updateWebviewerConfig(_,g,v),C.myImageEditor=C.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:_,scrollerConfig:{}},C._webViewer.myViewer.uid),0!=C._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(C._webViewer._stwain,C._webViewer.mydvs.Error.errorMessage,C._webViewer.mydvs.Error.errorCode),C.bDispose=!1,C._BindImageEditorEvents(),C._bindView()}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var m="#F0EFF4",I="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjQuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzMDAgMzAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAgMzAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0NDQ0NDQzt9Cgkuc3Qxe2ZpbGw6I0YwRUZGNDt9Cjwvc3R5bGU+CjxnIGlkPSJHcm91cF8xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyOS42NjggLTE3OC41ODkpIj4KCTxnIGlkPSJSZWN0YW5nbGVfMTciPgoJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik01OTgsMzQ3LjloLTQuMnYtMmgyLjJ2LTEuOGgyVjM0Ny45eiBNNTg3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTU3NS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01NjMuOSwzNDcuOQoJCQloLTZ2LTJoNlYzNDcuOXogTTU1MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE01MzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNTI3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTUxNS45LDM0Ny45aC02di0yaDYKCQkJVjM0Ny45eiBNNTAzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQ5MS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00NzkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDY3LjksMzQ3LjloLTZ2LTJoNlYzNDcuOXoKCQkJIE00NTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDQzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTQzMS45LDM0Ny45aC02di0yaDZWMzQ3Ljl6IE00MTkuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNNDA3LjksMzQ3LjkKCQkJaC02di0yaDZWMzQ3Ljl6IE0zOTUuOSwzNDcuOWgtNnYtMmg2VjM0Ny45eiBNMzgzLjksMzQ3LjloLTZ2LTJoNlYzNDcuOXogTTM3OC42LDM0MS4xaC0ydi02aDJWMzQxLjF6IE01OTgsMzM4LjFoLTJ2LTZoMlYzMzguMXoKCQkJIE0zNzguNiwzMjkuMWgtMnYtNmgyVjMyOS4xeiBNNTk4LDMyNi4xaC0ydi02aDJWMzI2LjF6IE0zNzguNiwzMTcuMWgtMnYtNmgyVjMxNy4xeiBNNTk4LDMxNC4xaC0ydi02aDJWMzE0LjF6IE0zNzguNiwzMDUuMWgtMgoJCQl2LTZoMlYzMDUuMXogTTU5OCwzMDIuMWgtMnYtNmgyVjMwMi4xeiBNMzc4LjYsMjkzLjFoLTJ2LTZoMlYyOTMuMXogTTU5OCwyOTAuMWgtMnYtNmgyVjI5MC4xeiBNMzc4LjYsMjgxLjFoLTJ2LTZoMlYyODEuMXoKCQkJIE01OTgsMjc4LjFoLTJ2LTZoMlYyNzguMXogTTM3OC42LDI2OS4xaC0ydi02aDJWMjY5LjF6IE01OTgsMjY2LjFoLTJ2LTZoMlYyNjYuMXogTTM3OC42LDI1Ny4xaC0ydi02aDJWMjU3LjF6IE01OTgsMjU0LjFoLTJ2LTYKCQkJaDJWMjU0LjF6IE0zNzguNiwyNDUuMWgtMnYtNmgyVjI0NS4xeiBNNTk4LDI0Mi4xaC0ydi02aDJWMjQyLjF6IE0zNzguNiwyMzMuMWgtMnYtNmgyVjIzMy4xeiBNNTk4LDIzMC4xaC0ydi02aDJWMjMwLjF6CgkJCSBNMzc4LjYsMjIxLjFoLTJ2LTYuN2g3djJoLTVWMjIxLjF6IE01OTgsMjE4LjFoLTJ2LTEuNmgtMi40di0yaDQuNFYyMTguMXogTTU4Ny42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NzUuNiwyMTYuNWgtNnYtMmg2CgkJCVYyMTYuNXogTTU2My42LDIxNi41aC02di0yaDZWMjE2LjV6IE01NTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNTM5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUyNy42LDIxNi41aC02di0yaDZWMjE2LjV6CgkJCSBNNTE1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTUwMy42LDIxNi41aC02di0yaDZWMjE2LjV6IE00OTEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDc5LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ2Ny42LDIxNi41CgkJCWgtNnYtMmg2VjIxNi41eiBNNDU1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXogTTQ0My42LDIxNi41aC02di0yaDZWMjE2LjV6IE00MzEuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNNDE5LjYsMjE2LjVoLTZ2LTJoNgoJCQlWMjE2LjV6IE00MDcuNiwyMTYuNWgtNnYtMmg2VjIxNi41eiBNMzk1LjYsMjE2LjVoLTZ2LTJoNlYyMTYuNXoiLz4KCTwvZz4KCTxnIGlkPSJGaWxlcy1Gb2xkZXJzX0NvbW1vbi1GaWxlc19jb21tb24tZmlsZS10ZXh0LWFkZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zNjIgMi4xMzkpIj4KCQk8ZyBpZD0iR3JvdXBfNDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Ny44MDYgMjAxLjk1KSI+CgkJCTxnIGlkPSJjb21tb24tZmlsZS10ZXh0LWFkZCI+CgkJCQk8ZyBpZD0iT3ZhbF8xOCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwNy4yLDExOC40TDEwNy4yLDExOC40TDEwNy4yLDExOC40Yy0xMi4zLDAtMjIuMy0xMC0yMi4zLTIyLjNjMC0xMi4zLDEwLTIyLjMsMjIuMy0yMi4zYzAsMCwwLDAsMCwwCgkJCQkJCWMxMi4zLDAsMjIuMywxMCwyMi4zLDIyLjNjMCw1LjktMi4zLDExLjUtNi41LDE1LjdDMTE4LjgsMTE2LjEsMTEzLjIsMTE4LjQsMTA3LjIsMTE4LjR6IE0xMDcuMiw3NS45CgkJCQkJCUMxMDcuMiw3NS45LDEwNy4yLDc1LjksMTA3LjIsNzUuOUM5Ni4xLDc1LjksODcsODUsODcsOTYuMmMwLDExLjIsOS4xLDIwLjMsMjAuMywyMC4zbDAsMXYtMWM1LjQsMCwxMC41LTIuMSwxNC4zLTUuOQoJCQkJCQljMy44LTMuOCw1LjktOC45LDUuOS0xNC4zQzEyNy41LDg1LDExOC40LDc1LjksMTA3LjIsNzUuOXoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzMiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDcuMiwxMDcuOGMtMC42LDAtMS0wLjQtMS0xVjg1LjVjMC0wLjYsMC40LTEsMS0xczEsMC40LDEsMXYyMS4zQzEwOC4yLDEwNy4zLDEwNy44LDEwNy44LDEwNy4yLDEwNy44egoJCQkJCQkiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzQiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMTcuOSw5Ny4ySDk2LjZjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTMTE4LjQsOTcuMiwxMTcuOSw5Ny4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzNSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTk0LjgsNjUuM0g2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDMzLjdjMC42LDAsMSwwLjQsMSwxUzk1LjQsNjUuMyw5NC44LDY1LjN6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCw3NS45SDYxLjFjLTAuNiwwLTEtMC40LTEtMXMwLjQtMSwxLTFoMjEuM2MwLjYsMCwxLDAuNCwxLDFTODMsNzUuOSw4Mi40LDc1Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTM3Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODYsNTQuNkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xSDg2YzAuNiwwLDEsMC40LDEsMVM4Ni41LDU0LjYsODYsNTQuNnoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJTaGFwZV8xMzgiPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03NS4zLDg2LjVINjEuMWMtMC42LDAtMS0wLjQtMS0xczAuNC0xLDEtMWgxNC4yYzAuNiwwLDEsMC40LDEsMVM3NS45LDg2LjUsNzUuMyw4Ni41eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzEzOSI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTc1LjMsOTcuMkg2MS4xYy0wLjYsMC0xLTAuNC0xLTFzMC40LTEsMS0xaDE0LjJjMC42LDAsMSwwLjQsMSwxUzc1LjksOTcuMiw3NS4zLDk3LjJ6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfMTQwIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODIuNCwxMTguNEg1MC41Yy0yLjUsMC00LjUtMi00LjUtNC41VjM5LjRjMC0yLjUsMi00LjUsNC41LTQuNWg0Ny4xYzEuMiwwLDIuNCwwLjUsMy4yLDEuM0wxMTQsNDkuNAoJCQkJCQljMC45LDAuOSwxLjMsMiwxLjMsMy4ydjExLjdjMCwwLjYtMC40LDEtMSwxcy0xLTAuNC0xLTFWNTIuNmMwLTAuNy0wLjMtMS4zLTAuNy0xLjhMOTkuNCwzNy42Yy0wLjUtMC41LTEuMS0wLjctMS44LTAuN0g1MC41CgkJCQkJCWMtMS40LDAtMi41LDEuMS0yLjUsMi41djc0LjRjMCwxLjQsMS4xLDIuNSwyLjUsMi41aDMxLjljMC42LDAsMSwwLjQsMSwxUzgzLDExOC40LDgyLjQsMTE4LjR6Ii8+CgkJCQk8L2c+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBpZD0iQXJyb3dzLURpYWdyYW1zX0RpYWdyYW1zX2RpYWdyYW0tZGFzaC1kb3duLWZhc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yIDQpIj4KCQk8ZyBpZD0iR3JvdXBfMTY1Ij4KCQkJPGcgaWQ9IkxpZ2h0XzE2NSI+CgkJCQk8ZyBpZD0iU2hhcGVfNTM5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjEsNDQzbC00LjItNC4ybDEuNC0xLjRsNC4yLDQuMkw0ODQuMSw0NDN6IE00ODkuNyw0NDIuN2wtMS40LTEuNGw0LjItNC4ybDEuNCwxLjRMNDg5LjcsNDQyLjd6CgkJCQkJCSBNNDc1LjYsNDM0LjVsLTQuMi00LjJsMS40LTEuNGw0LjIsNC4yTDQ3NS42LDQzNC41eiBNNDk4LjIsNDM0LjJsLTEuNC0xLjRsMy45LTMuOWwxLjQsMS40TDQ5OC4yLDQzNC4yeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MCI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQwMi43LDM0Ny42djQuMiIvPgoJCQkJCTxyZWN0IHg9IjQwMS43IiB5PSIzNDcuNiIgY2xhc3M9InN0MCIgd2lkdGg9IjIiIGhlaWdodD0iNC4yIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQxIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAyLjcsMzYwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDAxLjciIHk9IjM2MC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQyIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDAzLjMsMzc3LjRjMC44LDIuOCwyLjIsNS4zLDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDA1LjEsMzgzLjNjLTEuMy0xLjctMi4yLTMuNi0yLjgtNS43bDEuOS0wLjVjMC41LDEuOCwxLjMsMy41LDIuNSw1TDQwNS4xLDM4My4zeiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0MyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQxNC44LDM4OWMyLjgsMC42LDUuNywwLjksOC41LDAuNyIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MjAuNywzOTAuN2MtMi4xLDAtNC4xLTAuMy02LjItMC43bDAuNC0xLjljMS45LDAuNCwzLjgsMC43LDUuNywwLjdMNDIwLjcsMzkwLjd6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ0Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDMxLjgsMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDMxLjgiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ1Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDQ4LjksMzg5LjZoOC42Ii8+CgkJCQkJPHJlY3QgeD0iNDQ4LjkiIHk9IjM4OC42IiBjbGFzcz0ic3QwIiB3aWR0aD0iNiIgaGVpZ2h0PSIyIi8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ2Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDY2LDM4OS42YzIuOS0wLjIsNS43LDAsOC41LDAuNiIvPgoJCQkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NzEuOCwzOTAuOGMtMS45LTAuMy0zLjgtMC4zLTUuOC0wLjJsLTAuMS0yYzIuMS0wLjEsNC4yLTAuMSw2LjIsMC4yTDQ3MS44LDM5MC44eiIvPgoJCQkJPC9nPgoJCQkJPGcgaWQ9IlNoYXBlXzU0NyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ4MS43LDM5NC41YzIsMiwzLjUsNC41LDQuMyw3LjMiLz4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDg0LjIsMzk5LjljLTAuOC0xLjctMS45LTMuMy0zLjItNC42bDEuNC0xLjRjMS41LDEuNSwyLjcsMy4zLDMuNiw1LjJMNDg0LjIsMzk5Ljl6Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ4Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDEwLjN2OC42Ii8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQxMC4zIiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI2Ii8+CgkJCQk8L2c+CgkJCQk8ZyBpZD0iU2hhcGVfNTQ5Ij4KCQkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNDg2LjcsNDI3LjR2NC4yIi8+CgkJCQkJPHJlY3QgeD0iNDg1LjciIHk9IjQyNy40IiBjbGFzcz0ic3QwIiB3aWR0aD0iMiIgaGVpZ2h0PSI0LjIiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCTwvZz4KCTwvZz4KPC9nPgo8L3N2Zz4K) center /auto no-repeat,#F0EFF4",p=["click","onExitFunc","onMultiSelectionFunc","onAddDocumentFunc","onMultiSelectionCencelFunc","onAllSelectionFunc","onCancelAllSelectionFunc","onSaveFunc","onUploadFunc","bufferChanged","onRemoveSelectedFunc"],g={toolbars:{topMenu:!0,bottomMenu:!0},groups:{viewMenu:!1,global:!1,viewChange:!1,viewerCorner:!1,pager:!1,myMainTopGroup:{visibility:!0,location:"topMenu",sequence:1},myMainBottomGroup:{visibility:!0,location:"bottomMenu",sequence:1},myMultiSelectionTopGroup:{visibility:!0,location:"topMenu",sequence:2},myMultiSelectionBottomGroup:{visibility:!0,location:"bottomMenu",sequence:2},myGroup3:{visibility:!0,location:"header",sequence:1}},cropStyle:{cropMask:!1,cropBar:!1},buttonResize:{ifResize:!0,maxSize:18,minSize:12},buttons:{exit:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onExitFunc"},fileName:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dvs-ui-pagePre1 ds-dwt-ui-icon-color",sequence:2,text:""},addDocument:{visibility:!0,location:"myMainBottomGroup",iconClass:"ds-dwt-ui-icon-addImageFromCamera  ds-dwt-ui-icon-color",sequence:1,onButtonClick:"onAddDocumentFunc"},multiSelection:{visibility:!0,location:"myMainTopGroup",iconClass:"ds-dwt-ui-icon-selectAll ds-dwt-ui-icon-color ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onMultiSelectionFunc"},cancel:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre ds-dwt-ui-icon-color ds-dwt-ui-icon-left",sequence:1,onButtonClick:"onMultiSelectionCencelFunc"},selectCount:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dvs-ui-pagePre2 ds-dwt-ui-icon-color",sequence:2,text:"selected count: "},selectAll:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-unselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:2,onButtonClick:"onAllSelectionFunc"},cancelAllSelect:{visibility:!0,location:"myMultiSelectionTopGroup",iconClass:"ds-dwt-ui-mobile-icon-a-allselected ds-dwt-ui-icon-color dynamsoft-dwt-selectColor ds-dwt-ui-icon-right",sequence:3,onButtonClick:"onCancelAllSelectionFunc"},save:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-icon-saveImage ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onSaveFunc"},upload:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-a-uploadfromserver ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onUploadFunc"},removeSelected:{visibility:!0,location:"myMultiSelectionBottomGroup",iconClass:"ds-dwt-ui-mobile-icon-delete ds-dwt-ui-icon-color",sequence:2,onButtonClick:"onRemoveSelectedFunc"}},content:{besides:{visibility:!1,sequence:4},thumbnail:{backgroundColor:"#fff"}},canvasConfig:{columns:2,rows:2,background:m,pageBackground:"rgb(255,255,255)",checkboxColor:"#FE8E14",showPageNumber:!0,allowPageDragging:!0},thumbnail:{showThumbnailControl:!1,selectedBorderColor:"#7DA2CE",selectedBackgroundColor:"rgb(199, 222, 252)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)"}};C.prototype.getCustomElement=function(){return this._documentTemplate.getCustomElement()},C.prototype.onExitFunc=function(){this._webViewer.hide()},C.prototype.onAddDocumentFunc=function(){var v=this;""==v._webViewer._documentScanConfiguration?0==v._documentTemplate.bFullScreen?(v._documentTemplate.newContainer.style.width=v._webViewer.GetWidth()+"px",v._documentTemplate.newContainer.style.height=v._webViewer.GetHeight()+"px",v._webViewer.showVideoInner({element:v._documentTemplate.newContainer})):v._webViewer.showVideoInner():v._webViewer.showVideoInner(v._webViewer._documentScanConfiguration)},C.prototype.onRemoveSelectedFunc=function(){this._ImgManager._stwain.SelectedImagesIndices.length>0&&this._ImgManager._stwain.RemoveAllSelectedImages()},e.UI=e.UI||{},e.UI.Template=C,_.prototype.BindView=function(v){var P,T=this;P=v&&"DIV"==v.nodeName?v:document.getElementById(v),e.isUndefined(P)||e.isNull(P)?(T.newContainer=document.createElement("div"),document.body.appendChild(T.newContainer),document.body.insertBefore(T.newContainer,document.body.firstElementChild),T.newContainer.style.width="100%",T.newContainer.style.height="100%",T.newContainer.style.position="fixed",T.newContainer.style.left="0px",T.newContainer.style.top="0px",T.bFullScreen=!0):(T.newContainer=P,T.bFullScreen=!1);var E=document.createElement("div");E.id="btnCapture"+T._webViewer.myViewer.postfix,E.className="ds-dwt-ui-icon-addImageFromCamera dynamsoft-dwt-btnCapture",E.onclick=function(){T._webViewer.myViewer.emit("onAddDocumentFunc")},T._webViewer.BindView(T.newContainer),T._webViewer.updateUISettings(g),0==T._webViewer.GetHowManyImagesInBuffer()&&T._webViewer.SetBackground(I);var M=document.getElementById("WebViewer"+T._webViewer.myViewer.postfix);M&&M.appendChild(E),T.setMultiSelectMode(!1),T.__bindButtonEvents(),T._webViewer.SetCursor("pointer"),T.DWTCustomWrapper=document.createElement("div");var O=w.Lib.env.isMobileViewer(),R=w.Lib.env.isPadViewer();O||R?T.customElement=T._webViewer.createCustomElement(T.DWTCustomWrapper,"right",!0):(T.DWTCustomWrapper.style.height="100%",T.DWTCustomWrapper.style.width="20%",T.customElement=T._webViewer.createCustomElement(T.DWTCustomWrapper,"right",!1));var F=document.getElementById("fileName"+T._webViewer.myViewer.postfix);F&&(F.style.width="80%",F.style.whiteSpace="nowrap");var B=document.getElementById("selectCount"+T._webViewer.myViewer.postfix);B&&(B.style.width="200px",B.style.whiteSpace="nowrap");var b=document.getElementById("bottomMenu"+T._webViewer.myViewer.postfix);b&&(b.style.border="0",b.style.display="none")},_.prototype.UnbindView=function(){var v=this;v._unbindButtonEvents(),v._documentEditor&&v._documentEditor.dispose();var D=document.getElementById("btnCapture"+v._webViewer.myViewer.postfix);return D&&(D.onclick=function(){}),v.newContainer&&1==v.bFullScreen&&v.newContainer.childNodes.length>0&&v.newContainer.parentNode.removeChild(v.newContainer),v.newContainer="",v.DWTCustomWrapper="",!0},_.prototype.setMultiSelectMode=function(v){var T=this,D=document.getElementById("myMainTopGroup"+T._webViewer.GetIdPostfix()),P=document.getElementById("myMainBottomGroup"+T._webViewer.GetIdPostfix()),E=document.getElementById("myMultiSelectionTopGroup"+T._webViewer.GetIdPostfix()),M=document.getElementById("myMultiSelectionBottomGroup"+T._webViewer.GetIdPostfix());v?(D.style.display="none",P.style.display="none",E.style.display="",M.style.display=""):(D.style.display="",P.style.display="",E.style.display="none",M.style.display="none")},_.prototype.__bindButtonEvents=function(){var v=this;w.Lib.each(p,function(T){v._webViewer.on(T,function(D,P){v[T](D,P)})})},_.prototype._unbindButtonEvents=function(){var v=this;e.each(p,function(T){v._webViewer.off(T)})},_.prototype.bufferChanged=function(v){var T=this;if("shift"==v.action||"remove"==v.action||"add"==v.action){var D=document.getElementById("selectCount"+T._webViewer.GetIdPostfix());D&&(D.innerText="selected count: "+v.selectedIds.length),T.setSelectAllButtonEnable(v.selectedIds.length!=T._stwain.HowManyImagesInBuffer||0==T._stwain.HowManyImagesInBuffer)}0==v.selectedIds.length?(T._webViewer.setButtonClass("save","ds-dwt-ui-icon-color-grey"),T._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color-grey"),T._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color-grey")):(T._webViewer.setButtonClass("save","ds-dwt-ui-icon-color"),T._webViewer.setButtonClass("upload","ds-dwt-ui-icon-color"),T._webViewer.setButtonClass("removeSelected","ds-dwt-ui-icon-color"));var P=document.getElementById("btnCapture"+T._webViewer.myViewer.postfix);P&&""==P.style.display&&(e.isUndefined(v.imageIds)||v.imageIds&&0==v.imageIds.length)?T._webViewer.SetBackground(I):T._webViewer.SetBackground(m)},_.prototype.Dynamsoft_DocumentTemplate_OnVideoClosed=function(){this._webViewer.OpenFile(this._webViewer.currentFileName)},_.prototype.click=function(v){var T=this;if(-1!=v.index&&1!=T._webViewer.GetMultipleMode()&&T._stwain.HowManyImagesInBuffer>0){var D=T._webViewer.createDocumentEditor({element:T.newContainer,bFullScreen:T.bFullScreen,width:T._webViewer.GetWidth(),height:T._webViewer.GetHeight()});D&&D.show()}},_.prototype.onExitFunc=function(){this._template.onExitFunc()},_.prototype.ifShowDocumentTemplate=function(v){this.newContainer&&(this.newContainer.style.display=v?"":"none")},_.prototype.setTemplateTitle=function(v){var D=document.getElementById("fileName"+this._webViewer.myViewer.postfix);D&&(D.innerText=v.length>25?v.substring(0,10)+"..."+v.substring(v.length-14,v.length):v)},_.prototype.onMultiSelectionFunc=function(){this._MultiSelectionInner([])},_.prototype._MultiSelectionInner=function(v){var T=this,D=document.getElementById("bottomMenu"+T._webViewer.myViewer.postfix);if(D&&(D.style.display=""),T._stwain.SelectImages(v),T.setMultiSelectMode(!0),!T._webViewer.GetMultipleMode()){document.getElementById("selectCount"+T._webViewer.GetIdPostfix()).innerText="selected count: "+T._stwain.SelectedImagesIndices.length,T._webViewer.SetMultipleMode(!0),T.setSelectAllButtonEnable(T._stwain.SelectedImagesIndices.length!=T._stwain.HowManyImagesInBuffer||0==T._stwain.HowManyImagesInBuffer);var E=document.getElementById("btnCapture"+T._webViewer.myViewer.postfix);if(E&&(E.style.display="none",T._webViewer.SetBackground(m)),T._template&&!w.Lib.isFunction(T._template.onSaveFunc)){var M=document.getElementById("save"+T._webViewer.myViewer.postfix);M&&(M.style.display="none")}if(T._template&&!w.Lib.isFunction(T._template.onUploadFunc)){var O=document.getElementById("upload"+T._webViewer.myViewer.postfix);O&&(O.style.display="none")}}},_.prototype.onAddDocumentFunc=function(){this._template.onAddDocumentFunc()},_.prototype.onMultiSelectionCencelFunc=function(){var v=this;v.setMultiSelectMode(!1),v._webViewer.SetMultipleMode(!1),v._stwain.SelectImages([]);var T=document.getElementById("bottomMenu"+v._webViewer.myViewer.postfix);T&&(T.style.border="0",T.style.display="none");var D=document.getElementById("btnCapture"+v._webViewer.myViewer.postfix);D&&(D.style.display="",0==v._webViewer.GetHowManyImagesInBuffer()?v._webViewer.SetBackground(I):v._webViewer.SetBackground(m))},_.prototype.onAllSelectionFunc=function(){this._stwain.SelectAllImages(),this.setSelectAllButtonEnable(!1)},_.prototype.onCancelAllSelectionFunc=function(){this._stwain.SelectImages([]),this.setSelectAllButtonEnable(!0)},_.prototype.setSelectAllButtonEnable=function(v){var D=document.getElementById("cancelAllSelect"+this._webViewer.GetIdPostfix()),P=document.getElementById("selectAll"+this._webViewer.GetIdPostfix());P&&D&&(v?(P.style.display="",D.style.display="none"):(P.style.display="none",D.style.display=""))},_.prototype.onSaveFunc=function(){var v=this;v._stwain.SelectedImagesIndices.length>0&&w.Lib.isFunction(v._template.onSaveFunc)&&v._template.onSaveFunc()},_.prototype.onUploadFunc=function(){var v=this;v._stwain.SelectedImagesIndices.length>0&&w.Lib.isFunction(v._template.onUploadFunc)&&v._template.onUploadFunc()},_.prototype.onRemoveSelectedFunc=function(){this._stwain.SelectedImagesIndices.length>0&&this._template.onRemoveSelectedFunc()},_.prototype.getCustomElement=function(){return this.customElement},e.UI=e.UI||{},e.UI.DocumentTemplate=_}function C(v,T){var D=this;D._webViewer=v,D._ImgManager=T,D._documentTemplate=new e.UI.DocumentTemplate(v,T,D)}function _(v,T,D){var P=this;P._ImgManager=T,P._stwain=T._stwain,P._webViewer=v,P._template=D}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=document,s=(window,w.DWT),i=e.html5.Funs.DEF,u="dynamsoft-dvs-file",o="rgb(255, 255, 255)",c="transparent",l="1px solid rgb(238, 238, 238)",m="rgb(239, 246, 253)",I="1px solid rgb(238, 238, 238)",p="rgb(251, 236, 136)",g="1px solid rgb(125,162,206)",C="rgb(199, 222, 252)",v=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],T={toolbars:{header:!1,topMenu:!1,asideMenu:!1,bottomMenu:!1},groups:{},buttons:{},thumbnail:{showThumbnailControl:!1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,showPageNumber:!1,border:"",background:o,pageBackground:c,pageBorder:l,hoverPageBackground:m,hoverPageBorder:I,placeholderBackground:p,selectedPageBorder:g,selectedPageBackground:C,autoChangeIndex:!1},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:o,canvasBorder:"",selectedPageBorder:g,pageBorder:l,pageMargin:10,pageBackground:c,selectedPageBackground:C,hoverPageBorder:I,hoverPageBackground:m,placeholderBackground:p,autoChangeIndex:!1,allowPageDragging:!0,showPageNumber:!1,columns:1,rows:1,scrollDirection:"vertical"},showSidebar:!1,showMain:!0,showViewer:!0,sidebarWidth:"180",outerBorder:"1px solid rgb(204, 204, 204)",topMenuBorder:"",selectedAreaBorderColor:"rgb(42, 29, 43)",selectionRectAspectRatio:0,ifAutoScroll:!0,useOuterDrop:!0,allowSlide:!0},D={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:s.CustomizableDisplayInfo.buttons,dialogText:s.CustomizableDisplayInfo.dialogText},P={background:"#F0EFF4",topMenuBorder:"",innerBorder:"",promptToSaveChange:!0,buttons:s.CustomizableDisplayInfo.buttons,dialogText:s.CustomizableDisplayInfo.dialogText},E={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:c,pageBorder:l,hoverPageBackground:m,hoverPageBorder:I,placeholderBackground:p,autoChangeIndex:!1},M={scannerViewer:{fullScreen:!1,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},resolution:{visibility:!0,valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoScan:{visibility:!0,enableAutoScan:!1},autoDetect:{visibility:!0,enableAutoDetect:!1,acceptedPolygonConfidence:80,fpsLimit:3,acceptedBlurryScore:0,autoCaptureDelay:1e3},continuousScan:{visibility:!0,enableContinuousScan:!0},switchCamera:{visibility:!0},loadLocalFile:{visibility:!0}},filterViewer:{visibility:!0,insert:{visibility:!0,position:"before"},remove:{visibility:!0},rotateLeft:{visibility:!0},filter:{visibility:!0,valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original"},exitDocumentScanAfterSave:!1},cropViewer:{visibility:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid "},rotateLeft:{visibility:!0},rotateRight:{visibility:!0},autoDetectBorder:{visibility:!0}}},O={isFunction:function(b){return b&&"function"==typeof b},addClass:function(b,A){var N=e.one(b);N&&N.length>0&&N.addClass(A)},removeClass:function(b,A){var N=e.one(b);N&&N.length>0&&N.removeClass(A)},output:function(b,A){w.DWT.Debug&&e.log(A)},getTop:function(b){var A=b.offsetTop;return null!=b.offsetParent&&(A+=O.getTop(b.offsetParent)),A},getLeft:function(b){var A=b.offsetLeft;return null!=b.offsetParent&&(A+=O.getLeft(b.offsetParent)),A}};e._safePromptCustomMsg(function(){D.buttons=s.CustomizableDisplayInfo.buttons,D.dialogText=s.CustomizableDisplayInfo.dialogText}),R.prototype.dispose=function(){var b=this;b.containerElement=null,b.myViewer&&(b.myViewer.off("bufferChanged"),b.mydvs.ViewControl.removeViewer(b.myViewer),b.myViewer=null),b.mydvs&&(b.mydvs.dispose(),b.mydvs=null),b._UIView=null,b._ImgManager=null,b._stwain.Viewer&&(b._stwain.Viewer.dispose(),b._stwain.Viewer=null),b._stwain=null},R.prototype._Init=function(b){var A=this;b.Container&&(e.isNodeList(b.Container)||e.isArray(b.Container)&&b.Container.length>0)?A.containerElement=b.Container[0]||"":A.containerElement="";if(A.mydvs)""!=A.containerElement&&(A.BindView(A.containerElement),A.show());else{A.initWidth=b.Width,A.initHeight=b.Height;var Y=T;Y.width=A.initWidth,Y.height=A.initHeight,A._stwain._isPC()||(Y.canvasConfig.canvasMouseShape="pointer"),A.mydvs=new w.ViewModel({uiConfig:Y,displayMode:"continuous",fitType:"window",scrollerConfig:{}}),A._bindViewUi=!1,A.myViewer=A.mydvs.ViewControl.getViewerByUid(),w.DWT.UseDefaultViewer&&A.containerElement&&A.mydvs.ViewControl&&(A.mydvs.ViewControl.bindViewUiConstructor(w.ViewUi),A.myViewer.bindView(A.containerElement),A._bindViewUi=!0),A.myViewer&&(A._stwain._isPC()?A.SetOperationMode(1):A.SetOperationMode(0)),A.containerElement&&A._InitDVS();try{A.mydvs&&(A.mydvs.bindLicenseCallback&&A.mydvs.bindLicenseCallback(function(){return A._stwain._checkWebcamWasmLicense()}),A.mydvs.bindSavePhotoCallback&&A.mydvs.bindSavePhotoCallback(function(ne){return A._stwain._saveImageCallback(ne)}))}catch{}A._bindViewUi?A._BindViewerEvents():A.myViewer.on("bufferChanged",function(ne,Ie){e.isFunction(A.bufferChanged)&&A.bufferChanged(ne,Ie)}),A._bRegistedLoad=!1}},R.prototype.BindView=function(b){var N,Y,A=this;return A.OnCloseImageEditor(),Y=b&&"DIV"==b.nodeName?b:r.getElementById(b),0==A._bindViewUi&&A.mydvs.ViewControl&&(A.mydvs.ViewControl.bindViewUiConstructor(w.ViewUi),A.myViewer.bindView(A.containerElement),e.html5.ui.initProgress(A._stwain),A._bindViewUi=!0),e.isUndefined(A.myViewer.width)&&(A.initWidth=100),e.isUndefined(A.myViewer.height)&&(A.initHeight=100),(N=A.myViewer.bindView(b))?(A.myViewer.showViewer=!1,A.containerElement=Y,A._stwain._containerElement=Y,A._stwain._bBindViewer=!0,A._InitDVS(),A.SetAcceptDrop(!0),A.SetAllowSlide(!0),A.myViewer.off("bufferChanged"),A.resetUISettingsInner(!1,A.GetWidth(),A.GetHeight()),A._BindViewerEvents(),A.hide(),N):(e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),!1)},R.prototype.CreateTemplate=function(b){var A=this;return A._stwain.Template=new e.UI.Template(A,A._ImgManager),A._stwain.Template},R.prototype.BindTemplate=function(b,A){var Y=!1;return A&&A._documentTemplate&&(Y=A._documentTemplate.BindView(b)),Y},R.prototype.show=function(){var b=this;if(!b._NouiNotSupport("show"))return!1;if(b._stwain.Template&&b._stwain.Template._documentTemplate){b._stwain.Template._documentTemplate.ifShowDocumentTemplate(!0);var A=document.getElementById("btnCapture"+b.myViewer.postfix);A&&(A.style.display="")}return b.myViewer.showViewer=!0,!0},R.prototype.hide=function(){var b=this;if(!b._NouiNotSupport("hide"))return!1;if(b._stwain.Template&&b._stwain.Template._documentTemplate){b._stwain.Template._documentTemplate.ifShowDocumentTemplate(!1);var A=document.getElementById("btnCapture"+b.myViewer.postfix);A&&(A.style.display="none")}return b.myViewer.showViewer=!1,!0},R.prototype.UnbindView=function(){var A,b=this;return b._stwain&&b._stwain.Addon&&b._stwain.Addon.Camera&&b._stwain.Addon.Camera._viewer&&""!=b._stwain.Addon.Camera.getStatus()&&b._stwain.Addon.Camera.closeSource(),(A=b.myViewer.unbindView())?(b._bindViewUi=!1,b._UnbindViewerEvents(),b._imageEditor&&b._imageEditor.dispose(),b._documentEditor&&b._documentEditor.dispose(),b._thumbnailViewer&&b._thumbnailViewer.dispose(),b._customElement&&b._customElement.dispose(),b.containerElement=""):e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),b._stwain._bBindViewer=!1,A},R.prototype.SetUIView=function(b){this._UIView=b},R.prototype._BindViewerEvents=function(){var b=this;!b.myViewer||(b.myViewer.off("bufferChanged"),e.each(v,function(A){b.myViewer.on(A,function(N,Y){b[A](N,Y)})}))},R.prototype._UnbindViewerEvents=function(){var b=this;e.each(v,function(A){"bufferChanged"!=A&&b.myViewer.off(A)})},R.prototype._InitDVS=function(){var b=this;b.ifWebviewerInit=!0,b.myViewer.showHeader=!1,b.myViewer.showTopMenu=!1,b.myViewer.showFooter=!1,b.myViewer.showMain=!0,b.myViewer.bOnlyShowThumbnailsView=!1,b.myViewer.showThumbnailControl=!1,b.myViewer.showLatestPage=!0,b.myViewer.minZoom=b._UIView.MIN_ZOOM,b.myViewer.maxZoom=b._UIView.MAX_ZOOM},R.prototype.ShowImageEditor=function(b,A,N,Y){var ne=this;return b&&N&&Y?(D.element=b,D.width=N,D.height=Y):(D.element=void 0,D.width=void 0,D.height=void 0),D.border=ne.GetBorder(),D.selectionRectAspectRatio=ne.GetSelectionRectAspectRatio(),ne.createImageEditor(D),0!=ne._stwain._errorCode&&(ne._imageEditor.dispose(),ne.createImageEditor(D)),ne._imageEditor.show(),!0},R.prototype.OnCloseImageEditor=function(){var b=this;return!!b.bShowImageEdit&&(b._imageEditor&&b._imageEditor.dispose(),b.bShowImageEdit=!1,b._imageEditor=void 0,b._imageEditorInner=void 0,!0)},R.prototype.GetUidByIndex=function(b){var A=this;return b<0||b>=A.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(A._stwain),-1):A.myViewer.getUidByIndex(b)},R.prototype.GetIndexByUid=function(b){return b&&""!=b&&-1!=b?this.myViewer.getIndexByUid(b):(e.Errors.IndexOutOfRange(this._stwain),-1)},R.prototype.SetMetaDataByIndex=function(b,A){var N=this;if(!(b<0||b>=N.GetHowManyImagesInBuffer()))return N.myViewer.setMetadataByIndex(b,A);e.Errors.IndexOutOfRange(N._stwain)},R.prototype.GetMetaDataByIndex=function(b){var A=this;if(!(b<0||b>=A.GetHowManyImagesInBuffer()))return A.myViewer.getMetadataByIndex(b);e.Errors.IndexOutOfRange(A._stwain)},R.prototype.GetCustomDataByIndex=function(b){var N,A=this;if(!(b<0||b>=A.GetHowManyImagesInBuffer()))return N=e.isArray(b)?b[0]:b,A.myViewer.getCustomDataByIndex(N);e.Errors.IndexOutOfRange(A._stwain)},R.prototype.GetHowManyImagesInBuffer=function(){return e.isUndefined(this.myViewer.currentPageCount)?0:this.myViewer.currentPageCount},R.prototype.UpdateInfo=function(b,A,N){var Y=this;A&&w.Lib.hideMask(),b&&Y.bShowImageEdit&&Y._imageEditorInner&&Y._imageEditorInner.updateMode(N)},R.prototype.AppendImage=function(b,A){var q,ie,N=this,Y=b.imageUrl,ne=b.minImageUrl,Ie=b.serverId,_e=b.bAppendImage,ce=b.index,he={},V=N.currentFileName;if(A&&(e.isUndef(A.currentFileName)||(V=A.currentFileName),e.isUndef(A.width)||(he.width=A.width),e.isUndef(A.height)||(he.height=A.height),e.isUndef(A.bitDepth)||(he.bitDepth=A.bitDepth),e.isUndef(A.resolutionX)||(he.resolutionX=A.resolutionX),e.isUndef(A.resolutionY)||(he.resolutionY=A.resolutionY),e.isUndef(A.oriBlobData)||(ie=A.oriBlobData)),0==N.ifFileNameExist(V))return!1;if(e.log("AppendImage_oriData:"+Y),_e||0==_e&&0==N.GetHowManyImagesInBuffer()){if(ie){var te,J={imageId:Ie};for(te in ie)ie.hasOwnProperty(te)&&(J[te]=ie[te]);q=N.mydvs.DataControl.appendSync(V,[{oriData:Y,minData:ne,metadata:he,customData:J}])}else q=N.mydvs.DataControl.appendSync(V,[{oriData:Y,minData:ne,metadata:he,customData:{imageId:Ie}}]);return b.uuid=q[0],N.UpdateInfo(!0),q[0]}return q=N.mydvs.DataControl.insertSync(V,[{oriData:Y,minData:ne,metadata:he,customData:{imageId:Ie}}],ce),b.uuid=q[0],N.UpdateInfo(!0),q[0]},R.prototype.MobileAppendImage=function(b,A){var _e,N=this,Y=b.bAppendImage,ne=b.index,Ie={},ce=N.currentFileName;return A.imageId=b.serverId,A&&A.currentFileName&&(ce=A.currentFileName),0!=N.ifFileNameExist(ce)&&(A&&A.metadata&&(e.isUndef(A.metadata.width)||(Ie.width=A.metadata.width),e.isUndef(A.metadata.imageWidth)||(Ie.width=A.metadata.imageWidth),e.isUndef(A.metadata.height)||(Ie.height=A.metadata.height),e.isUndef(A.metadata.imageHeight)||(Ie.height=A.metadata.imageHeight),e.isUndef(A.metadata.bitDepth)||(Ie.bitDepth=A.metadata.bitDepth),e.isUndef(A.metadata.imageBitDepth)||(Ie.bitDepth=A.metadata.imageBitDepth),e.isUndef(A.metadata.resolutionX)||(Ie.resolutionX=A.metadata.resolutionX),e.isUndef(A.metadata.imageXResolution)||(Ie.resolutionX=A.metadata.imageXResolution),e.isUndef(A.metadata.resolutionY)||(Ie.resolutionY=A.metadata.resolutionY),e.isUndef(A.metadata.imageYResolution)||(Ie.resolutionY=A.metadata.imageYResolution),e.isUndef(A.metadata.oriBlobData)||(Ie.oriBlobData=A.metadata.oriBlobData),delete A.metadata),"url"!=A.dataType&&"srcId"in A?0==Y&&0==N.GetHowManyImagesInBuffer()?(_e=N.mydvs.DataControl.appendSync(ce,[{oriData:null,minData:null,metadata:Ie,customData:A}]),b.uuid=_e[0],N.UpdateInfo(!0),_e[0]):(_e=N.mydvs.DataControl.insertSync(ce,[{oriData:null,minData:null,metadata:Ie,customData:A}],ne),b.uuid=_e[0],N.UpdateInfo(!0),_e[0]):("src"in A&&(b.imageUrl=A.src,delete A.src),"imageUrl"in A&&(b.imageUrl=A.imageUrl,delete A.imageUrl),Ie.currentFileName=ce,N.AppendImage(b,Ie)))},R.prototype.UpdateImage=function(b,A){var N=this,Y=b.imageUrl,ne=b.minImageUrl,Ie=b.serverId,_e=b.uuid,ce={};return A&&(e.isUndef(A.width)||(ce.width=A.width),e.isUndef(A.height)||(ce.height=A.height),e.isUndef(A.bitDepth)||(ce.bitDepth=A.bitDepth),e.isUndef(A.resolutionX)||(ce.resolutionX=A.resolutionX),e.isUndef(A.resolutionY)||(ce.resolutionY=A.resolutionY)),_e&&""!=_e&&-1!=_e?(N._UpdateImageInner(_e,{oriData:Y,minData:ne,customData:{imageId:Ie},metadata:ce}),N.UpdateInfo(!1,!0),_e):(e.Errors.IndexOutOfRange(N._stwain),!1)},R.prototype.MobileUpdateImage=function(b,A){var N=this,Y=b.index,ne=b.uuid,Ie={},_e={};if(!ne||""==ne||-1==ne)return e.Errors.IndexOutOfRange(N._stwain),!1;if((Ie=N.GetMetaDataByIndex(Y))&&"metadata"in A&&A.metadata&&(e.isUndef(A.metadata.width)||(Ie.width=A.metadata.width),e.isUndef(A.metadata.imageWidth)||(Ie.width=A.metadata.imageWidth),e.isUndef(A.metadata.height)||(Ie.height=A.metadata.height),e.isUndef(A.metadata.imageHeight)||(Ie.height=A.metadata.imageHeight),e.isUndef(A.metadata.bitDepth)||(Ie.bitDepth=A.metadata.bitDepth),e.isUndef(A.metadata.imageBitDepth)||(Ie.bitDepth=A.metadata.imageBitDepth),e.isUndef(A.metadata.resolutionX)||(Ie.resolutionX=A.metadata.resolutionX),e.isUndef(A.metadata.imageXResolution)||(Ie.resolutionX=A.metadata.imageXResolution),e.isUndef(A.metadata.resolutionY)||(Ie.resolutionY=A.metadata.resolutionY),e.isUndef(A.metadata.imageYResolution)||(Ie.resolutionY=A.metadata.imageYResolution)),"url"==A.dataType||!("srcId"in A))return"src"in A&&(b.imageUrl=A.src),"imageUrl"in A&&(b.imageUrl=A.imageUrl),N.UpdateImage(b,Ie);if(A&&A.src&&A.srcId){if(_e=N.myViewer.getCustomDataByIndex(Y)){_e.src=A.src,_e.srcId=A.srcId,e.isUndef(A.imgType)||(_e.imgType=A.imgType);var ce={};_e&&(ce.customData=_e,ce.metadata=Ie,N._UpdateImageInner(ne,ce))}N.UpdateInfo(!1,!0)}return ne},R.prototype._UpdateImageInner=function(b,A){this.mydvs.DataControl.updateSync(b,A)},R.prototype.RemoveByIndex=function(b){var N,A=this;if(b<0||b>=A.GetHowManyImagesInBuffer())return e.Errors.IndexOutOfRange(A._stwain),!1;A.bShowImageEdit&&A._imageEditorInner&&1==A._imageEditorInner._IfChangedWithinTheEditor&&(A._imageEditorInner.iChangedIndex!=b?A._imageEditorInner.iChangedIndex>b&&A._imageEditorInner.iChangedIndex--:(A._imageEditorInner._IfChangedWithinTheEditor=!1,A._imageEditorInner.iChangedIndex=-1,A._imageEditorInner.OnCloseInstall()));var Y=[];return Y.push(b),(N=A.myViewer.removeSync(Y))?A.UpdateInfo(!0):e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.RemoveAllImages=function(){var A,b=this;return b.bShowImageEdit&&b._imageEditorInner&&1==b._imageEditorInner._IfChangedWithinTheEditor&&(b._imageEditorInner._IfChangedWithinTheEditor=!1,b._imageEditorInner.iChangedIndex=-1,b._imageEditorInner.OnCloseInstall()),(A=b.myViewer.removeAllSync())?(b.UpdateInfo(),b.bShowImageEdit&&b._imageEditorInner&&b._imageEditorInner.updateMode()):e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A},R.prototype.SetCurrentIndex=function(b){var A=this,N=!1;return b<0||b>=A.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(A._stwain),w.Lib.hideMask(),!1):!/^(\d+)$/.test(b)||b<0?(e.Errors.MobileServer_InvalidIndex(A._stwain),w.Lib.hideMask(),!1):((N=A.myViewer.setCurrentIndex(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),A.UpdateInfo(!0,!0),N)},R.prototype.OnlySetCurrentIndex=function(b){var A=this,N=!1;return b<0||b>=A.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(A._stwain),!1):((N=A.myViewer.setCurrentIndex(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N)},R.prototype.GetCurrentIndex=function(){var b=this,A=-1;return b.GetHowManyImagesInBuffer()>0&&(A=b.myViewer.getCurrentIndex(),(e.isUndef(A)||A<0)&&e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode)),A},R.prototype.SetSelectedindexes=function(b){var N,A=this;return(N=A.myViewer.setSelectedIndexes(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.GetSelectedindexes=function(){return this.myViewer.getSelectedIndexes()},R.prototype.GoToPage=function(b){var A=this,N=!1;return b<0||b>=A.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(A._stwain),w.Lib.hideMask(),-1):!/^(\d+)$/.test(b)||b<0?(e.Errors.MobileServer_InvalidIndex(A._stwain),w.Lib.hideMask(),-1):((N=A.myViewer.gotoPage(b))<0&&e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),A.UpdateInfo(!0,!0),N)},R.prototype.SetSelectedImageArea=function(b,A,N,Y){var Ie,ne=this,_e=[];if(!ne._NouiNotSupport("setSelectedAreas"))return!1;var ce={};return ce.left=b,ce.top=A,ce.width=N-b,ce.height=Y-A,_e.push(ce),(Ie=ne.myViewer.setSelectedBoxes(_e,!1))||e.Errors.WebviewerError(ne._stwain,ne.mydvs.Error.errorMessage,ne.mydvs.Error.errorCode),Ie},R.prototype.SetSelectionRectAspectRatio=function(b){return!!this._NouiNotSupport("selectionRectAspectRatio")&&(this.myViewer.selectionBoxAspectRatio=b,!0)},R.prototype.GetSelectionRectAspectRatio=function(){return this._NouiNotSupport("selectionRectAspectRatio")?this.myViewer.selectionBoxAspectRatio:""},R.prototype.ZoomIn=function(){var A,b=this;return(A=b.myViewer.zoomIn())||e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A},R.prototype.ZoomOut=function(){var A,b=this;return(A=b.myViewer.zoomOut())||e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A},R.prototype.SetZoom=function(b,A,N){var Y=this,ne=!1;return!!Y._NouiNotSupport("zoom")&&((ne=A&N?Y.myViewer.zoomTo(b,A,N):Y.myViewer.zoom=b)||e.Errors.WebviewerError(Y._stwain,Y.mydvs.Error.errorMessage,Y.mydvs.Error.errorCode),ne)},R.prototype.GetZoom=function(){return this._NouiNotSupport("zoom")?this.myViewer.zoom:""},R.prototype.SetFitType=function(b){var A=this,N="window";if(!A._NouiNotSupport("fitType"))return!1;if(!e.isUndefined(b)){if("width"!=b&&"height"!=b&&"window"!=b)return e.Errors.InvalidValue(A._stwain),!1;N=b}return A.myViewer.fitType=N,!0},R.prototype.GetMouseShape=function(){var A;switch(this.GetCursor()){case"default":A=w.DWT.EnumDWT_MouseShape.Default;break;case"pointer":A=w.DWT.EnumDWT_MouseShape.Hand;break;case"crosshair":default:A=w.DWT.EnumDWT_MouseShape.Crosshair;break;case"zoom-in":A=w.DWT.EnumDWT_MouseShape.Zoom}return A},R.prototype.SetMouseShape=function(b){var N;switch(b){case w.DWT.EnumDWT_MouseShape.Default:N="default";break;case w.DWT.EnumDWT_MouseShape.Hand:N="pointer";break;case w.DWT.EnumDWT_MouseShape.Crosshair:N="crosshair";break;case w.DWT.EnumDWT_MouseShape.Zoom:N="zoom-in";break;default:N="crosshair"}return this.SetCursor(N),!0},R.prototype.SetImageMargin=function(b){return this.SetPageMargin(b)},R.prototype.GetImageMargin=function(){return this.GetPageMargin()},R.prototype.SetSelectionImageBorderColor=function(b){var N=b;return w.Lib.isNumber(N)&&(N=w.Lib.getColor(N)),-1==N.indexOf("1px solid")&&(N="1px solid "+N),this.SetSelectedPageBorder(N)},R.prototype.GetSelectedPageBorder=function(){return this._NouiNotSupport("selectedPageBorder")?this.myViewer.selectedPageBorder:""},R.prototype.SetSelectedPageBorder=function(b){var A=this;return!!A._NouiNotSupport("selectedPageBorder")&&(A.myViewer.selectedPageBorder=b,A._thumbnailViewer&&A.SetThumSelectedPageBorder(b),!0)},R.prototype.GetSelectedPageBackground=function(){return this._NouiNotSupport("selectedPageBackground")?this.myViewer.selectedPageBackground:""},R.prototype.SetSelectedPageBackgroundInner=function(b){return this.myViewer.selectedPageBackground=b,!0},R.prototype.SetSelectedPageBackground=function(b){var A=this;return!!A._NouiNotSupport("selectedPageBackground")&&(A.SetSelectedPageBackgroundInner(b),A._thumbnailViewer&&A.SetThumSelectedPageBackground(b),!0)},R.prototype.GetShowPageNumber=function(){return this._NouiNotSupport("showPageNumber")?this.myViewer.showPageNumber:""},R.prototype.SetShowPageNumberInner=function(b){return this.myViewer.showPageNumber=b,!0},R.prototype.SetShowPageNumber=function(b){var A=this;return!!A._NouiNotSupport("showPageNumber")&&(e.isBoolean(b)?(A.SetShowPageNumberInner(b),A._thumbnailViewer&&A.SetThumShowPageNumber(b),!0):(e.Errors.InvalidValue(A._stwain),!1))},R.prototype.GetAutoChangeIndex=function(){return this._NouiNotSupport("autoChangeIndex")?this.myViewer.autoChangeIndex:""},R.prototype.SetAutoChangeIndex=function(b){var A=this;return!!A._NouiNotSupport("autoChangeIndex")&&(e.isBoolean(b)?(A.myViewer.autoChangeIndex=b,!0):(e.Errors.InvalidValue(A._stwain),!1))},R.prototype.GetMultipleMode=function(){return this._NouiNotSupport("multipleMode")?this.myViewer.multipleMode:0},R.prototype.SetMultipleMode=function(b){var A=this;return!!A._NouiNotSupport("multipleMode")&&(A.myViewer.multipleMode=b,A._thumbnailViewer&&A.SetThumMultipleMode(b),!0)},R.prototype.SetHoverPageBackground=function(b){return this.myViewer.hoverPageBackground=b,!0},R.prototype.SetBackground=function(b){var A=this,N=b;return!!A._NouiNotSupport("background")&&(w.Lib.isNumber(N)&&(N=w.Lib.getColor(N)),A.myViewer.canvasBackground=N,A._thumbnailViewer&&A.SetThumBackground(N),!0)},R.prototype.GetBackground=function(){return this._NouiNotSupport("background")?this.myViewer.canvasBackground:""},R.prototype.SetViewerBorder=function(b){return this.SetBorder("1px solid"+b)},R.prototype.SetWidth=function(b){var A=this;return!!A._NouiNotSupport("width")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(b)||b<=0?(e.Errors.MobileServer_InvalidWidth(A._stwain),!1):(A.myViewer.width=b,!0))},R.prototype.GetWidth=function(){return this._NouiNotSupport("width")?this.myViewer.width:""},R.prototype.SetWidthInner=function(b,A){var N=this;if(A)N.myViewer.width=b;else if(e.isString(b)&&b.indexOf("%")>=0){var Y=e.one("#"+N._stwain._containerID);N.myViewer.width=parseInt(e.css(Y,"width")*parseInt(b)/100)}else N.myViewer.width=b;return!0},R.prototype.GetHeight=function(){return this._NouiNotSupport("height")?this.myViewer.height:""},R.prototype.SetHeight=function(b){var A=this;return!!A._NouiNotSupport("height")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(b)||b<=0?(e.Errors.MobileServer_InvalidHeight(A._stwain),!1):(A.myViewer.height=b,!0))},R.prototype.GetIdPostfix=function(){return this._NouiNotSupport("idPostfix")?this.myViewer.postfix:""},R.prototype.SetHeightInner=function(b,A){var N=this;if(A)N.myViewer.height=b;else if(e.isString(b)&&b.indexOf("%")>=0){var Y=e.one("#"+N._stwain._containerID);N.myViewer.height=parseInt(e.css(Y,"height")*parseInt(b)/100)}else N.myViewer.height=b;return!0},R.prototype.SwitchImage=function(b,A){var N=this,Y=!1;return b<0||b>=N.GetHowManyImagesInBuffer()||A<0||A>=N.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(N._stwain),!1):((Y=N.myViewer.switchPage(b,A))||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y)},R.prototype.MoveImage=function(b,A){var N=this,Y=!1;return b<0||b>=N.GetHowManyImagesInBuffer()||A<0||A>=N.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(N._stwain),!1):((Y=N.myViewer.movePage(b,A))||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y)},R.prototype.SetIfSinglePageMode=function(b){return!!this._NouiNotSupport("singlePageMode")&&(this.myViewer.displayMode=b?"single":"continuous",!0)},R.prototype.GetIfSinglePageMode=function(){return!(!this._NouiNotSupport("singlePageMode")||"continuous"==this.myViewer.displayMode)},R.prototype.SetAcceptDrop=function(b){var A=this;return!!A._NouiNotSupport("acceptDrop")&&(e.isBoolean(b)?(A.acceptDrop=b,!0):(e.Errors.InvalidValue(A._stwain),!1))},R.prototype.GetAcceptDrop=function(){return this._NouiNotSupport("acceptDrop")?this.acceptDrop:""},R.prototype.SetAllowSlide=function(b){var A=this;return!!A._NouiNotSupport("allowSlide")&&(e.isBoolean(b)?(A.myViewer.allowSlide=b,!0):(e.Errors.InvalidValue(A._stwain),!1))},R.prototype.GetAllowSlide=function(){return this._NouiNotSupport("allowSlide")?this.myViewer.allowSlide:""},R.prototype.SetViewMode=function(b,A){var N=this,Y=!1,ne="vertical";return!!N._NouiNotSupport("setViewMode")&&(e.isNumber(b)&&e.isNumber(A)?(N._thumbnailViewer&&N._thumbnailViewer.hide(),N.clearSelectedAreas(),-1==b&&-1==A?(N.SetIfSinglePageMode(!0),A=0-A,b=0-b,Y=!0):(A<0&&(ne="horizontal",A=0-A),b<0&&(b=0-b),N.myViewer.scrollDirection=ne,(Y=N.myViewer.setViewMode(b,A))||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),N.SetIfSinglePageMode(!1),"zoom-in"==N.GetCursor()&&N.SetCursor("crosshair")),Y):(e.Errors.InvalidValue(N._stwain),!1))},R.prototype.RemoveImageTag=function(b){var N,A=this,Y=!1;return b<0||b>=A.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(A._stwain),!1):(N=A.GetUidByIndex(b))&&""!=N&&-1!=N?((Y=A.mydvs.Tag.removePageTag(N))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),Y):(e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),!1)},R.prototype.FilterImagesByTag=function(b,A,N){var Y=this;if(e.isUndefined(b)||0==b.length){Y._currentTag="";var Ie=Y.GetCurrentFileName();0==Ie.length&&(Ie=u),Y.mydvs.File.openFile(Ie)?(Y.mydvs.Tag.setDefaultTag(""),e.isFunction(A)&&A()):(e.Errors.WebviewerError(Y._stwain,Y.mydvs.Error.errorMessage,Y.mydvs.Error.errorCode),e.isFunction(N)&&N(Y.mydvs.Error.errorCode,Y.mydvs.Error.errorMessage))}else Y._currentTag=b,Y.mydvs.Tag.openTag(b)?e.isFunction(A)&&A():(e.Errors.WebviewerError(Y._stwain,Y.mydvs.Error.errorMessage,Y.mydvs.Error.errorCode),e.isFunction(N)&&N(Y.mydvs.Error.errorCode,Y.mydvs.Error.errorMessage));return!0},R.prototype.ClearFilter=function(){var A,b=this;b._currentTag="";var N=b.GetCurrentFileName();return 0==N.length&&(N=u),(A=b.mydvs.File.openFile(N))||e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A},R.prototype.GetServerIdList=function(){var A,N,Y,b=this,ne=[];if(A=b.myViewer.getCurrentPageUids())for(var Ie=0;Ie<A.length;Ie++)(N=A[Ie])&&(Y=b.myViewer.getCustomDataByUid(N))&&ne.push(Y.imageId);else e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode);return ne},R.prototype.GetTagContents=function(b){var N,A=this;return(N=b&&b.length>0?A.mydvs.Tag.getTagContents(b):A.myViewer.getCurrentPageUids())||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.SetDefaultTag=function(b){var N,A=this;return A._currentTag=b,A.mydvs.Tag.addTag(b),(N=A.mydvs.Tag.setDefaultTag(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.AddImageTag=function(b,A){var Y,ne,N=this;N.mydvs.Tag.addTag(A);for(var Ie=0;Ie<b.length;Ie++)(Y=b[Ie])>=0&&(ne=N.GetUidByIndex(Y))&&""!=ne&&-1!=ne&&N.mydvs.Tag.addPageTag(ne,A);return!0},R.prototype.GetCurrentTag=function(){return this._currentTag},R.prototype.RenameTag=function(b,A){var Y,N=this;return N._currentTag=A,(Y=N.mydvs.Tag.renameTag(b,A))?N.mydvs.Tag.setDefaultTag(A):e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y},R.prototype.RemoveTag=function(b,A){var Ie,N=this,Y=!1,ne=!1;if((Ie=N.mydvs.Tag.getCurrentTag())&&(ne=Ie.name==b),e.isUndefined(A))Y=N.mydvs.Tag.removeTag(b),ne&&N.ClearFilter();else{if(!e.isArray(A))return e.Errors.IndicesNotArray(N),!1;if(!N._stwain._checkIndices(A))return!1;var _e=[];e.each(A,function(ce){var q=N.GetUidByIndex(ce);-1!=q&&_e.push(q)}),e.each(_e,function(ce){if(!(Y=N.mydvs.Tag.removePageTag(ce,b)))return!1})}return Y||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y},R.prototype.GetTagList=function(){var A,Y,ne,b=this,N=[];return(A=b.mydvs.Tag.getTagList())?e.each(A,function(Ie){if(Y=[],ne={},Ie.uids)for(var _e=0;_e<Ie.uids.length;_e++){var ce=Ie.uids[_e];ce&&(ne=b.myViewer.getCustomDataByUid(ce))&&Y.push(b._stwain.objImageIndexManager.convertServerIdToGuid(ne.imageId))}Ie.imageIds=Y,delete Ie.uids,N.push(Ie)}):N=[],N},R.prototype.GetTagListByIndex=function(b){var N=[],Y=[],ne=this.GetUidByIndex(b);return ne&&((N=this.mydvs.Tag.getTagList())?e.each(N,function(Ie){if(Ie.uids)for(var _e=0;_e<Ie.uids.length;_e++){var ce=Ie.uids[_e];ce&&ce==ne&&Y.push(Ie.name)}}):Y=[]),Y},R.prototype.CreateFile=function(b){var A=this,N=!1;return b&&(A.mydvs.File.createFile(b)?80032==A.mydvs.Error.errorCode?e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode):N=!0:e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode)),N},R.prototype.OpenFile=function(b){var A=this,N=!1;return A.mydvs.File.openFile(b)?(N=!0,A.currentFileName=b,A._stwain.Template&&A._stwain.Template._documentTemplate&&A._stwain.Template._documentTemplate.setTemplateTitle(A.currentFileName)):e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.GetCurrentFileName=function(){var A,b=this,N="";return(A=b.mydvs.File.getCurrentFileList())&&e.each(A,function(Y){Y.name==b.currentFileName&&(N=b.currentFileName)}),N},R.prototype.GetDefaultFileName=function(){return u},R.prototype.RemoveFile=function(b){var N,A=this;return(N=A.mydvs.File.removeFile(b))?A.currentFileName==b&&(A.currentFileName=u,A._stwain.Template&&A._stwain.Template._documentTemplate&&A._stwain.Template._documentTemplate.setTemplateTitle("")):e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.GetFileInfoList=function(){var A,Y,ne,Ie,b=this,N=[];return(A=b.mydvs.File.getCurrentFileList())?e.each(A,function(_e){if(Y=[],ne={},Ie={},_e.chs)for(var ce=0;ce<_e.chs.length;ce++){var q=_e.chs[ce];q&&(ne=b.myViewer.getCustomDataByUid(q))&&Y.push(b._stwain.objImageIndexManager.convertServerIdToGuid(ne.imageId))}Ie.imageIds=Y,Ie.name=_e.name,N.push(Ie)}):N=[],N},R.prototype.GetImageIdsByFileName=function(b){var N,ne,A=this,Y=[];return(N=A.mydvs.File.getCurrentFileList())?e.each(N,function(Ie){if(b==Ie.name){if(ne={},Ie.chs)for(var _e=0;_e<Ie.chs.length;_e++){var ce=Ie.chs[_e];ce&&(ne=A.myViewer.getCustomDataByUid(ce))&&Y.push(ne.imageId)}return!1}}):Y=[],Y},R.prototype.ifFileNameExist=function(b){var N,Y=!1;return(N=this.mydvs.File.getCurrentFileList())&&(0==N.length?b==u&&(Y=!0):(e.each(N,function(ne){if(ne.name==b)return Y=!0,!0}),0==Y&&b==u&&(Y=!0))),Y},R.prototype.OverlayRectangle=function(b,A,N,Y,ne,Ie,_e){var ce=this,q=!1,he=Ie;return b<0||b>=ce.GetHowManyImagesInBuffer()?(e.Errors.IndexOutOfRange(ce._stwain),!1):(e.isNumber(he)&&(he=e.getColor(he)),(q=ce.myViewer.overlayRectangle(b,A,N,Y-A,ne-N,he,_e))||e.Errors.WebviewerError(ce._stwain,ce.mydvs.Error.errorMessage,ce.mydvs.Error.errorCode),q)},R.prototype.SetOperationMode=function(b){this.myViewer.operationMode=b},R.prototype.GetIfShowVideoContainer=function(){return this.myViewer.showVideoContainer},R.prototype.ShowVideoContainer=function(b){var A=this;return A.myViewer.showVideoContainer==b||(A._thumbnailViewer&&(b?(A.OldShowThumbnail=A.myThumbnailViewer.showThumbnail,A.myThumbnailViewer.showThumbnail=!1):A.myThumbnailViewer.showThumbnail=A.OldShowThumbnail),A.myViewer.showVideoContainer=b),!0},R.prototype.UpdateVideoContainer=function(b){var N,A=this;return(N=A.myViewer.updateVideoContainer(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.GetImageData=function(b){return this.mydvs.DataControl.getData(b)},R.prototype.UpdateImageData=function(b,A){return this.mydvs.DataControl.updateData(b,A)},R.prototype.GetMinPageData=function(b){return this._imageEditorInner?this._imageEditorInner.myImageEditor.getMinPageData():NaN},R.prototype.SetLogLevel=function(b){this.mydvs.Log.setLogLevel(b)},R.prototype.SetLogFunc=function(b){this.mydvs.Log.setLogFunc(b)},R.prototype.SetThumLocation=function(b){var A=this;if(!A._NouiNotSupport("ThumbnailViewer.location"))return!1;if(A.myThumbnailViewer){switch(b){case"left":default:A.myThumbnailViewer.location="horizontal",A.myThumbnailViewer.sequence=-1;break;case"right":A.myThumbnailViewer.location="horizontal",A.myThumbnailViewer.sequence=1;break;case"top":A.myThumbnailViewer.location="vertical",A.myThumbnailViewer.sequence=-1;break;case"bottom":A.myThumbnailViewer.location="vertical",A.myThumbnailViewer.sequence=1}return!0}return A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1},R.prototype.GetThumLocation=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.location")&&(b.myThumbnailViewer?"vertical"==b.myThumbnailViewer.location?b.myThumbnailViewer.sequence>0?"bottom":"top":b.myThumbnailViewer.sequence>0?"right":"left":(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumSize=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.size")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(b)||b<0?(e.Errors.InvalidValue(A._stwain),!1):A.myThumbnailViewer?(A.myThumbnailViewer.size=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumSize=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.size")&&(b.myThumbnailViewer?b.myThumbnailViewer.size:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),0))},R.prototype.SetThumScrollDirection=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.scrollDirection")&&("horizontal"!=b&&(b="vertical"),A.myThumbnailViewer?(A.myThumbnailViewer.scrollDirection=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumScrollDirection=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.scrollDirection")&&(b.myThumbnailViewer?b.myThumbnailViewer.scrollDirection:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumShowPageNumber=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.showPageNumber")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.showPageNumber=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumShowPageNumber=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.showPageNumber")&&(b.myThumbnailViewer?b.myThumbnailViewer.showPageNumber:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),-1))},R.prototype.SetThumMultipleMode=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.showCheckbox")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.multipleMode=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumMultipleMode=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.showCheckbox")&&(b.myThumbnailViewer?b.myThumbnailViewer.multipleMode:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),-1))},R.prototype.SetThumMargin=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.margin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(b)||b<0?(e.Errors.InvalidValue(A._stwain),!1):A.myThumbnailViewer?(A.myThumbnailViewer.pageMargin=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumMargin=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.margin")&&(b.myThumbnailViewer?b.myThumbnailViewer.columns==b.myThumbnailViewer.rows&&1==b.myThumbnailViewer.rows?0:b.myThumbnailViewer.pageMargin:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),0))},R.prototype.SetThumBorder=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.border")&&(A.myThumbnailViewer?(A.myThumbnailViewer.border=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumBorder=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.border")&&(b.myThumbnailViewer?b.myThumbnailViewer.border:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumBackground=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.background")&&(A.myThumbnailViewer?(A.myThumbnailViewer.background=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumBackground=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.background")&&(b.myThumbnailViewer?b.myThumbnailViewer.background:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumPageBackground=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.pageBackground")&&(A.myThumbnailViewer?(A.myThumbnailViewer.pageBackground=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumPageBackground=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.pageBackground")&&(b.myThumbnailViewer?b.myThumbnailViewer.pageBackground:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumPageBorder=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.pageBorder")&&(A.myThumbnailViewer?(A.myThumbnailViewer.pageBorder=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumPageBorder=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.pageBorder")&&(b.myThumbnailViewer?b.myThumbnailViewer.pageBorder:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumHoverBackground=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(A.myThumbnailViewer?(A.myThumbnailViewer.hoverPageBackground=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),""))},R.prototype.GetThumHoverBackground=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.hoverPageBackground")&&(b.myThumbnailViewer?b.myThumbnailViewer.hoverPageBackground:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumHoverBorder=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(A.myThumbnailViewer?(A.myThumbnailViewer.hoverPageBorder=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumHoverBorder=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.hoverPageBorder")&&(b.myThumbnailViewer?b.myThumbnailViewer.hoverPageBorder:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumPlaceholderBackground=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(A.myThumbnailViewer?(A.myThumbnailViewer.placeholderBackground=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumPlaceholderBackground=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.placeholderBackground")&&(b.myThumbnailViewer?b.myThumbnailViewer.placeholderBackground:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumSelectedPageBorder=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(A.myThumbnailViewer?(A.myThumbnailViewer.selectedPageBorder=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumSelectedPageBorder=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.selectedPageBorder")&&(b.myThumbnailViewer?b.myThumbnailViewer.selectedPageBorder:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumSelectedPageBackground=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(A.myThumbnailViewer?(A.myThumbnailViewer.selectedPageBackground=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumSelectedPageBackground=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.selectedPageBackground")&&(b.myThumbnailViewer?b.myThumbnailViewer.selectedPageBackground:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumAllowKeyboardControl=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.allowKeyboardControl=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumAllowKeyboardControl=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")&&(b.myThumbnailViewer?b.myThumbnailViewer.allowKeyboardControl:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),!1))},R.prototype.SetThumAllowDrag=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.allowDrag")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.allowPageDragging=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumAllowDrag=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.allowPageDragging")&&(b.myThumbnailViewer?b.myThumbnailViewer.allowPageDragging:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),!1))},R.prototype.SetThumAllowResize=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.allowResizing")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.allowResizing=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumAllowResize=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.allowResizing")&&(b.myThumbnailViewer?b.myThumbnailViewer.allowResizing:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),!1))},R.prototype.SetThumAutoChangeIndex=function(b){var A=this;return!!A._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(A.myThumbnailViewer?(A.myThumbnailViewer.autoChangeIndex=b,!0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),!1))},R.prototype.GetThumAutoChangeIndex=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.autoChangeIndex")&&(b.myThumbnailViewer?b.myThumbnailViewer.autoChangeIndex:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),""))},R.prototype.SetThumMultipleMode=function(b){var A=this;return!(!A._NouiNotSupport("ThumbnailViewer.multipleMode")||(e.isBoolean(b)?A.myThumbnailViewer?(A.myThumbnailViewer.multipleMode=b,0):(A.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(A._stwain):e.Errors.ThumbnailViewerNotExist(A._stwain),1):(e.Errors.InvalidValue(A._stwain),1)))},R.prototype.GetThumMultipleMode=function(){var b=this;return!!b._NouiNotSupport("ThumbnailViewer.multipleMode")&&(b.myThumbnailViewer?b.myThumbnailViewer.multipleMode:(b.bThumbnailDispose?e.Errors.ThumbnailViewerDispose(b._stwain):e.Errors.ThumbnailViewerNotExist(b._stwain),-1))},R.prototype.render=function(){return!!this._NouiNotSupport("render")&&this.myViewer.render()},R.prototype.getUISettings=function(){if(!this._NouiNotSupport("getUISettings"))return!1;var A=w.Lib.clone(this.myViewer.uiConfig);return delete A.tag,delete A.tree,delete A.cropStyle,delete A.thumbnail,A},R.prototype.resetUISettings=function(){var N={};return this.resetUISettingsInner(!0)&&(N=this.getUISettings()),N},R.prototype.resetUISettingsInner=function(b,A,N){var ne,Y=this;if(!Y._NouiNotSupport("resetUISetting"))return!1;var _e=T;b?(_e.width=Y.initWidth,_e.height=Y.initHeight):(_e.width=e.isUndefined(A)?Y.initWidth:A,_e.height=e.isUndefined(N)?Y.initHeight:N);var ce=Y.myViewer.showViewer;return(ne=Y.myViewer.updateUISetting(_e))?(ce||Y.hide(),Y.SetFitType("window"),Y.SetIfSinglePageMode(!1),Y._stwain._isPC()?Y.SetOperationMode(1):Y.SetOperationMode(0),Y.OnlySetCurrentIndex(Y.GetCurrentIndex())):e.Errors.WebviewerError(Y._stwain,Y.mydvs.Error.errorMessage,Y.mydvs.Error.errorCode),ne},R.prototype.updateUISettings=function(b){var A=this,Y={};if(!A._NouiNotSupport("updateUISettings"))return!1;var ne=A.myViewer.showViewer;return A.myViewer.updateUISetting(b)?(ne||A.hide(),Y=A.getUISettings(),A.SetOperationMode("crosshair"==Y.canvasConfig.canvasMouseShape?1:0)):e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),Y},R.prototype.bindCamera=function(){var A,b=this;if(!w.CameraViewer)return e.Errors.CameraRequired(b._stwain),!1;if(A=b.mydvs.bindCamera(w.CameraViewer,w.ViewUi)){if(b.mydvs){var N=e.html5.STwain;b.mydvs.bindAreaDetectFunction&&b.mydvs.bindAreaDetectFunction(N._areaDetectCallback),b.mydvs.bindPerspectiveFunction&&b.mydvs.bindPerspectiveFunction(N._perspectiveCallback),b.mydvs.bindFilterHandleList&&b.mydvs.bindFilterHandleList([{label:"grayscale",handler:N._convertToGrayScaleFilterCallback},{label:"blackAndWhite",handler:N._convertToBWScaleFilterCallback},{label:"saveToner",handler:N._saveTonerFilterCallback},{label:"clean",handler:N._cleanFilterCallback},{label:"brightening",handler:N._brightenFilterCallback}]),b.mydvs.bindImageDataToBlobHandle&&b.mydvs.bindImageDataToBlobHandle(N._imageDataToBlob),b.mydvs.bindFreeHandle&&b.mydvs.bindFreeHandle(N._freeCallback)}}else e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode);return A},R.prototype.showVideo=function(b,A,N,Y){var Ie,ne=this;if(!ne._NouiNotSupport("showVideo"))return!1;var _e={scannerViewer:{devicedId:b,fullScreen:Y,enableBorderDetection:!0,resolution:{visibility:!1},autoScan:{visibility:!1},autoDetect:{visibility:!0,enableAutoDetect:!1},continuousScan:{visibility:!1,enableContinuousScan:!1},switchCamera:{visibility:!1},loadLocalFile:{visibility:!1}},filterViewer:{rotateLeft:{visibility:!1},filter:{visibility:!1,valueList:[]},exitDocumentScanAfterSave:!1},cropViewer:{visibility:!0,rotateLeft:{visibility:!1},rotateRight:{visibility:!1},autoDetectBorder:{visibility:!1}}};return A&&(_e.scannerViewer.resolution.valueList=[],_e.scannerViewer.resolution.valueList.push({label:"resolution",value:A}),_e.scannerViewer.resolution.defaultValue=A),N&&"document"==N?_e.scannerViewer.enableBorderDetection=!0:(_e.scannerViewer.enableBorderDetection=!1,_e.scannerViewer.autoDetect.visibility=!1,_e.cropViewer.visibility=!1),e.isUndefined(ne.mydvs.camera)&&ne.bindCamera(),(Ie=ne.showVideoEx(_e))||e.Errors.WebviewerError(ne._stwain,ne.mydvs.Error.errorMessage,ne.mydvs.Error.errorCode),Ie},R.prototype.getDefaultFilterValueList=function(b){return M.filterViewer.filter.valueList},R.prototype.showVideoEx=function(b){var Y=w.Lib.clone(b);return b&&b.element&&(Y.element=b.element),this.showVideoInner(Y)},R.prototype.showVideoInner=function(b){var N,A=this;if(!A._NouiNotSupport("scanDocument"))return!1;if(w.Lib.env.bMobile&&0==A.addCSSForShowVideo){var Y=document.createElement("style"),ne="*{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select:none;-ms-user-select:none;user-select:none;}";Y.type="text/css";try{Y.appendChild(document.createTextNode(ne))}catch{Y.styleSheet.cssText=ne}document.body.appendChild(Y),A.addCSSForShowVideo=!0}if(A._stwain.Template&&A._stwain.Template._documentTemplate&&A._stwain.Template._documentTemplate.setTemplateTitle(A.currentFileName),b){if(b.scannerViewer){if(e.isUndefined(b.scannerViewer.fullScreen)&&(b.scannerViewer.fullScreen=M.scannerViewer.fullScreen),e.isUndefined(b.scannerViewer.enableBorderDetection)&&(b.scannerViewer.enableBorderDetection=M.scannerViewer.enableBorderDetection),e.isUndefined(b.scannerViewer.polygonStyle)?b.scannerViewer.polygonStyle=M.scannerViewer.polygonStyle:(e.isUndefined(b.scannerViewer.polygonStyle.stroke)&&(b.scannerViewer.polygonStyle.stroke=M.scannerViewer.polygonStyle.stroke),e.isUndefined(b.scannerViewer.polygonStyle.strokeWidth)&&(b.scannerViewer.polygonStyle.strokeWidth=M.scannerViewer.polygonStyle.strokeWidth),e.isUndefined(b.scannerViewer.polygonStyle.dash)&&(b.scannerViewer.polygonStyle.dash=M.scannerViewer.polygonStyle.dash)),e.isUndefined(b.scannerViewer.resolution)?b.scannerViewer.resolution=M.scannerViewer.resolution:(e.isUndefined(b.scannerViewer.resolution.visibility)&&(b.scannerViewer.resolution.visibility=M.scannerViewer.resolution.visibility),e.isUndefined(b.scannerViewer.resolution.valueList)&&(b.scannerViewer.resolution.valueList=M.scannerViewer.resolution.valueList),e.isUndefined(b.scannerViewer.resolution.defaultValue)&&b.scannerViewer.resolution.valueList&&b.scannerViewer.resolution.valueList.length>0&&(b.scannerViewer.resolution.defaultValue=b.scannerViewer.resolution.valueList[0].value)),e.isUndefined(b.scannerViewer.autoScan)?b.scannerViewer.autoScan=M.scannerViewer.autoScan:(e.isUndefined(b.scannerViewer.autoScan.visibility)&&(b.scannerViewer.autoScan.visibility=M.scannerViewer.autoScan.visibility),e.isUndefined(b.scannerViewer.autoScan.enableAutoScan)&&(b.scannerViewer.autoScan.enableAutoScan=M.scannerViewer.autoScan.enableAutoScan)),e.isUndefined(b.scannerViewer.autoDetect))b.scannerViewer.autoDetect=M.scannerViewer.autoDetect;else{if(e.isUndefined(b.scannerViewer.autoDetect.visibility)&&(b.scannerViewer.autoDetect.visibility=M.scannerViewer.autoDetect.visibility),e.isUndefined(b.scannerViewer.autoDetect.enableAutoDetect)&&(b.scannerViewer.autoDetect.enableAutoDetect=M.scannerViewer.autoDetect.enableAutoDetect),e.isUndefined(b.scannerViewer.autoDetect.fpsLimit)&&(b.scannerViewer.autoDetect.fpsLimit=M.scannerViewer.autoDetect.fpsLimit),e.isUndefined(b.scannerViewer.autoDetect.acceptedPolygonConfidence))b.scannerViewer.autoDetect.acceptedPolygonConfidence=M.scannerViewer.autoDetect.acceptedPolygonConfidence;else{var Ie=parseInt(b.scannerViewer.autoDetect.acceptedPolygonConfidence);b.scannerViewer.autoDetect.acceptedPolygonConfidence=Ie>=0?Ie:M.scannerViewer.autoDetect.acceptedPolygonConfidence}if(e.isUndefined(b.scannerViewer.autoDetect.acceptedBlurryScore))b.scannerViewer.autoDetect.acceptedBlurryScore=M.scannerViewer.autoDetect.acceptedBlurryScore;else{var _e=parseInt(b.scannerViewer.autoDetect.acceptedBlurryScore);b.scannerViewer.autoDetect.acceptedBlurryScore=_e>=0?_e:M.scannerViewer.autoDetect.acceptedBlurryScore}if(e.isUndefined(b.scannerViewer.autoDetect.autoCaptureDelay))b.scannerViewer.autoDetect.autoCaptureDelay=M.scannerViewer.autoDetect.autoCaptureDelay;else{var ce=parseInt(b.scannerViewer.autoDetect.autoCaptureDelay);b.scannerViewer.autoDetect.autoCaptureDelay=ce>=0?ce:M.scannerViewer.autoDetect.autoCaptureDelay}}e.isUndefined(b.scannerViewer.continuousScan)?b.scannerViewer.continuousScan=M.scannerViewer.continuousScan:(e.isUndefined(b.scannerViewer.continuousScan.visibility)&&(b.scannerViewer.continuousScan.visibility=M.scannerViewer.continuousScan.visibility),e.isUndefined(b.scannerViewer.continuousScan.enableContinuousScan)&&(b.scannerViewer.continuousScan.enableContinuousScan=M.scannerViewer.continuousScan.enableContinuousScan)),e.isUndefined(b.scannerViewer.switchCamera)?b.scannerViewer.switchCamera=M.scannerViewer.switchCamera:e.isUndefined(b.scannerViewer.switchCamera.visibility)&&(b.scannerViewer.switchCamera.visibility=M.scannerViewer.switchCamera.visibility),e.isUndefined(b.scannerViewer.loadLocalFile)?b.scannerViewer.loadLocalFile=M.scannerViewer.loadLocalFile:e.isUndefined(b.scannerViewer.loadLocalFile.visibility)&&(b.scannerViewer.loadLocalFile.visibility=M.scannerViewer.loadLocalFile.visibility)}else b.scannerViewer=M.scannerViewer;if(b.filterViewer)if(e.isUndefined(b.filterViewer.visibility)&&(b.filterViewer.visibility=M.filterViewer.visibility),e.isUndefined(b.filterViewer.insert)?b.filterViewer.insert=M.filterViewer.insert:(e.isUndefined(b.filterViewer.insert.visibility)&&(b.filterViewer.insert.visibility=M.filterViewer.insert.visibility),e.isUndefined(b.filterViewer.insert.position)&&(b.filterViewer.insert.position=M.filterViewer.insert.position)),e.isUndefined(b.filterViewer.remove)?b.filterViewer.remove=M.filterViewer.remove:e.isUndefined(b.filterViewer.remove.visibility)&&(b.filterViewer.remove.visibility=M.filterViewer.remove.visibility),e.isUndefined(b.filterViewer.rotateLeft)?b.filterViewer.rotateLeft=M.filterViewer.rotateLeft:e.isUndefined(b.filterViewer.rotateLeft.visibility)&&(b.filterViewer.rotateLeft.visibility=M.filterViewer.rotateLeft.visibility),e.isUndefined(b.filterViewer.exitDocumentScanAfterSave)&&(b.filterViewer.exitDocumentScanAfterSave=M.filterViewer.exitDocumentScanAfterSave),e.isUndefined(b.filterViewer.filter))b.filterViewer.filter=M.filterViewer.filter;else{if(e.isUndefined(b.filterViewer.filter.visibility)&&(b.filterViewer.filter.visibility=M.filterViewer.filter.visibility),e.isUndefined(b.filterViewer.filter.valueList))b.filterViewer.filter.valueList=M.filterViewer.filter.valueList;else{for(var q=[],he=0;he<b.filterViewer.filter.valueList.length;he++){for(var ie=!1,V=b.filterViewer.filter.valueList[he].value,J=0;J<M.filterViewer.filter.valueList.length;J++)if(V==M.filterViewer.filter.valueList[J].value){ie=!0;break}ie&&(e.isUndefined(b.filterViewer.filter.valueList[he].option)&&(b.filterViewer.filter.valueList[he].option=M.filterViewer.filter.valueList[0].option),q.push(b.filterViewer.filter.valueList[he]))}b.filterViewer.filter.valueList=q}if(e.isUndefined(b.filterViewer.filter.defaultValue))b.filterViewer.filter.defaultValue=M.filterViewer.filter.defaultValue;else{var oe=!1,Ee=b.filterViewer.filter.defaultValue;for(he=0;he<b.filterViewer.filter.valueList.length;he++)if(Ee==b.filterViewer.filter.valueList[he].value){oe=!0;break}0==oe&&(b.filterViewer.filter.defaultValue=M.filterViewer.filter.defaultValue)}}else b.filterViewer=M.filterViewer;b.cropViewer?(e.isUndefined(b.cropViewer.visibility)&&(b.cropViewer.visibility=M.cropViewer.visibility),e.isUndefined(b.cropViewer.polygonStyle)?b.cropViewer.polygonStyle=M.cropViewer.polygonStyle:(e.isUndefined(b.cropViewer.polygonStyle.stroke)&&(b.cropViewer.polygonStyle.stroke=M.cropViewer.polygonStyle.stroke),e.isUndefined(b.cropViewer.polygonStyle.strokeWidth)&&(b.cropViewer.polygonStyle.strokeWidth=M.cropViewer.polygonStyle.strokeWidth),e.isUndefined(b.cropViewer.polygonStyle.dash)&&(b.cropViewer.polygonStyle.dash=M.cropViewer.polygonStyle.dash)),e.isUndefined(b.cropViewer.rotateLeft)?b.cropViewer.rotateLeft=M.cropViewer.rotateLeft:e.isUndefined(b.cropViewer.rotateLeft.visibility)&&(b.cropViewer.rotateLeft.visibility=M.cropViewer.rotateLeft.visibility),e.isUndefined(b.cropViewer.rotateRight)?b.cropViewer.rotateRight=M.cropViewer.rotateRight:e.isUndefined(b.cropViewer.rotateRight.visibility)&&(b.cropViewer.rotateRight.visibility=M.cropViewer.rotateRight.visibility),e.isUndefined(b.cropViewer.autoDetectBorder)?b.cropViewer.autoDetectBorder=M.cropViewer.autoDetectBorder:e.isUndefined(b.cropViewer.autoDetectBorder.visibility)&&(b.cropViewer.autoDetectBorder.visibility=M.cropViewer.autoDetectBorder.visibility)):b.cropViewer=M.cropViewer}else b=M;return e.isUndefined(b.scannerViewer.maxDocuments)&&(b.scannerViewer.maxDocuments=A._stwain.MaxImagesInBuffer-A.GetHowManyImagesInBuffer()),A._documentScanConfiguration=b,e.isUndefined(A.mydvs.camera)&&A.bindCamera(),0==A.GetCurrentFileName().length&&(A.CreateFile(u),A.OpenFile(u)),(N=A.mydvs.showVideo(b))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N},R.prototype.closeVideo=function(){var A,b=this;return!!b._NouiNotSupport("closeVideo")&&((A=b.mydvs.closeVideo())||e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A)},R.prototype.camera_on=function(b,A){if(b){if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(this._stwain);this.mydvs.on(b,A)}},R.prototype.camera_off=function(b,A){var N=this;if(b)if(e.isUndefined(A))N.mydvs.off(b),v.indexOf(b)>=0&&N.mydvs.on(b,function(Y,ne){e.isFunction(N[b])&&N[b](Y,ne)});else{if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(N._stwain);N.mydvs.off(b,A)}},R.prototype.showEditPage=function(b,A){var Y,N=this;return!!N._NouiNotSupport("showEditPage")&&(e.isUndefined(N.mydvs.camera)&&N.bindCamera(),(Y=N.mydvs.camera.showEditPage(b,A))||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y)},R.prototype.GetBorder=function(){return this._NouiNotSupport("border")?this.myViewer.outerBorder:""},R.prototype.SetBorder=function(b){return!!this._NouiNotSupport("border")&&(this.myViewer.outerBorder=b,!0)},R.prototype.GetInnerBorder=function(){return this._NouiNotSupport("innerBorder")?this.myViewer.canvasBorder:""},R.prototype.SetInnerBorder=function(b){return!!this._NouiNotSupport("innerBorder")&&(this.myViewer.canvasBorder=b,!0)},R.prototype.GetSelectedAreaBorderColor=function(){return this._NouiNotSupport("selectedAreaBorderColor")?this.myViewer.selectedBoxLineColor:""},R.prototype.SetSelectedAreaBorderColor=function(b){return!!this._NouiNotSupport("selectedAreaBorderColor")&&(this.myViewer.selectedBoxLineColor=b,!0)},R.prototype.GetCursor=function(){return this._NouiNotSupport("cursor")?this.myViewer.canvasMouseShape:""},R.prototype.SetCursor=function(b){var A=this;if(!A._NouiNotSupport("cursor"))return!1;if("zoom-in"==b&&!A.GetIfSinglePageMode())return e.Errors.CursorInvalidMode(A._stwain),!1;var N="default";switch(b){case"default":N="default",A.SetOperationMode(0);break;case"pointer":N="pointer",A.SetOperationMode(0);break;case"crosshair":default:N="crosshair",A.SetOperationMode(1);break;case"zoom-in":N="zoom-in",A.SetOperationMode(2)}return A.myViewer.canvasMouseShape=N,!0},R.prototype.GetIfAutoScroll=function(){return this._NouiNotSupport("ifAutoScroll")?this.myViewer.showLatestPage:""},R.prototype.SetIfAutoScroll=function(b){var A=this;return!!A._NouiNotSupport("ifAutoScroll")&&(e.isBoolean(b)?(A.myViewer.showLatestPage=b,A._imageEditorInner&&A._imageEditorInner.SetIfAutoScroll(),!0):(e.Errors.InvalidValue(A._stwain),!1))},R.prototype.GetPageMargin=function(){return this._NouiNotSupport("pageMargin")?this.myViewer.pageMargin:0},R.prototype.SetPageMargin=function(b){var A=this;return!!A._NouiNotSupport("pageMargin")&&(!/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/.test(b)||b<0?(e.Errors.InvalidValue(A._stwain),!1):(A.myViewer.pageMargin=b,!0))},R.prototype.setButtonClass=function(b,A){var Y,N=this;return!!N._NouiNotSupport("setButtonClass")&&((Y=N.myViewer.setButtonClass(b,A))||e.Errors.WebviewerError(N._stwain,N.mydvs.Error.errorMessage,N.mydvs.Error.errorCode),Y)},R.prototype.clearSelectedAreas=function(){var A,b=this;return!!b._NouiNotSupport("clearSelectedAreas")&&(b.GetHowManyImagesInBuffer()<=0||((A=b.myViewer.clearSelectedBoxes())||e.Errors.WebviewerError(b._stwain,b.mydvs.Error.errorMessage,b.mydvs.Error.errorCode),A))},R.prototype.setSelectedAreas=function(b){var N,ne,A=this,Y=[];if(!A._NouiNotSupport("setSelectedAreas"))return!1;if(e.isUndefined(b)||0==b.length)return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(A._stwain),!1;if(b.length&&b.length>0){for(var Ie=0;Ie<b.length;Ie++)if(ne={},!(e.isUndefined(b[Ie])||e.isUndefined(b[Ie].left)||e.isUndefined(b[Ie].top)||e.isUndefined(b[Ie].right)||e.isUndefined(b[Ie].bottom))){if(b[Ie].left<0||b[Ie].top<0||b[Ie].right<0||b[Ie].bottom<0||(ne.left=b[Ie].left,ne.top=b[Ie].top,b[Ie].right-b[Ie].left<0||b[Ie].bottom-b[Ie].top<0))continue;ne.width=b[Ie].right-b[Ie].left,ne.height=b[Ie].bottom-b[Ie].top,Y.push(ne)}}else if(ne={},!(e.isUndefined(b)||e.isUndefined(b.left)||e.isUndefined(b.top)||e.isUndefined(b.right)||e.isUndefined(b.bottom))){if(b.left<0||b.top<0||b.right<0||b.bottom<0||(ne.left=b.left,ne.top=b.top,b.right-b.left<0||b.bottom-b.top<0))return e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(A._stwain),!1;ne.width=b.right-b.left,ne.height=b.bottom-b.top,Y.push(ne)}return 0==Y.length?(e.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(A._stwain),!1):((N=A.myViewer.setSelectedBoxes(Y,!0))||e.Errors.WebviewerError(A._stwain,A.mydvs.Error.errorMessage,A.mydvs.Error.errorCode),N)},R.prototype._NouiNotSupport=function(b){var A=this;return A._stwain._resetErr(),!(!A._stwain._isValid()||A._stwain._isNoViewer()&&(A._stwain._nouiNotSupport(b),1))},R.prototype.pageChange=function(b){var N,A=this,Y=A.GetHowManyImagesInBuffer();if(e.log("OnPagination"),Y<=0)return e.Errors.NoImage(A._stwain),void O.output(A,"No image in Buffer");1!=Y&&(!/^\d+$/.test(b)||b<=0?alert(s.CustomizableDisplayInfo.errorMessages.invalidIndex):((N=parseInt(b)-1)<0?N=0:N>=Y&&(N=Y-1),N!=A.GetCurrentIndex()&&A.go(N)))},R.prototype.first=function(){var b=this,N=b.GetHowManyImagesInBuffer();return b._NouiNotSupport("first")?N<=0?(e.Errors.NoImage(b._stwain),O.output(b,"No image in Buffer"),-1):(1==N||b.go(0),0):-1},R.prototype.last=function(){var A,b=this,N=b.GetHowManyImagesInBuffer();return b._NouiNotSupport("last")?N<=0?(e.Errors.NoImage(b._stwain),O.output(b,"No image in Buffer"),-1):1==N?0:(b.go(A=N-1),A):-1},R.prototype.previous=function(){var A,b=this,N=b.GetHowManyImagesInBuffer();return b._NouiNotSupport("previous")?N<=0?(e.Errors.NoImage(b._stwain),O.output(b,"No image in Buffer"),-1):1==N?0:((A=b.GetCurrentIndex()-1)<0&&(A=0),b.go(A),A):-1},R.prototype.next=function(){var A,b=this,N=b.GetHowManyImagesInBuffer();return b._NouiNotSupport("next")?N<=0?(e.Errors.NoImage(b._stwain),O.output(b,"No image in Buffer"),-1):1==N?0:((A=b.GetCurrentIndex()+1)>=N&&(A=N-1),b.go(A),A):-1},R.prototype.go=function(b){var A=this,Y=b;return A._NouiNotSupport("go")?A.GetHowManyImagesInBuffer()<=0?(e.Errors.NoImage(A._stwain),O.output(A,"No image in Buffer"),-1):(A._imageEditorInner?A._imageEditorInner.go(b):Y=A.__goInner(b),Y):-1},R.prototype.__goInner=function(b){var N;if(typeof b<"u"){if(-1==b)return e.Errors.IndexOutOfRange(this._stwain),-1;w.Lib.showMask(),N=this.GoToPage(b)}return N},R.prototype.topPageChanged=function(b,A){this._UIView.__fireEvent("onTopImageInTheViewChanged",{index:b,bByScrollBar:A})},R.prototype.bufferChanged=function(b){for(var N,A=this,Y=[],ne=-1,Ie=[],_e=0;_e<A.GetHowManyImagesInBuffer();_e++)(N=A.GetCustomDataByIndex(_e))&&N.imageId&&Y.push(A._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId));if(Y.length>0&&(b.imageIds=Y),b.currentUid){var ce=A.GetIndexByUid(b.currentUid);if(ce>=0&&(N=A.GetCustomDataByIndex(ce))&&N.imageId){ne=A._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId);var q=A._stwain._ImgManager._UIView.GetDataImageControl(N.imageId);-1==q.uuid&&(q.uuid=b.currentUid)}}if(b.currentId=ne,b.selectedUids)for(var he=0;he<b.selectedUids.length;he++)if(b.selectedUids[he]){var V=A.GetIndexByUid(b.selectedUids[he]);if(V>=0&&(N=A.GetCustomDataByIndex(V))&&N.imageId){Ie.push(A._stwain.objImageIndexManager.convertServerIdToGuid(N.imageId));var J=A._stwain._ImgManager._UIView.GetDataImageControl(N.imageId);-1==J.uuid&&(J.uuid=b.currentUid)}}b.selectedIds=Ie,delete b.uids,delete b.currentUid,delete b.selectedUids,A._UIView.__fireEvent("onBufferChanged",b)},R.prototype.click=function(b){var A=this;A.UpdateInfo(!0,!1,!0),A._UIView.__fireEvent("onMouseClick",{e:b,x:b.imageX,y:b.imageY,index:A.GetCurrentIndex()})},R.prototype.rightclick=function(b){this._UIView.__fireEvent("onMouseRightClick",{e:b,x:b.imageX,y:b.imageY,index:this.GetCurrentIndex()})},R.prototype.dblclick=function(b){this._UIView.__fireEvent("onMouseDoubleClick",{e:b,x:b.imageX,y:b.imageY,index:this.GetCurrentIndex()})},R.prototype.mousemove=function(b){this._UIView.__fireEvent("onMouseMove",{e:b,x:b.imageX,y:b.imageY,index:this.GetCurrentIndex()})},R.prototype.pageAreaSelected=function(b,A){var Y=1;if(A&&A.length>0){var ne=A[A.length-1];ne.index&&(Y=parseInt(ne.index)+1),this._UIView.__fireEvent("onImageAreaSelected",{index:b,left:parseInt(ne.x),top:parseInt(ne.y),right:parseInt(ne.x+ne.width),bottom:parseInt(ne.y+ne.height),areaIndex:Y})}},R.prototype.pageAreaUnselected=function(b){this._UIView.__fireEvent("onImageAreaDeSelected",b)},R.prototype.dragdone=function(b){e.isFunction(this._stwain.__OnIndexChangeDragDropDone)&&this._stwain.__OnIndexChangeDragDropDone(b)},R.prototype.RegistLoadCallback=function(b){return this._bRegistedLoad||(this._bRegistedLoad=!0),!0},R.prototype.onDrop=function(b){this.acceptDrop&&this.dropEvent(b)},R.prototype.dropEvent=function(b){var N,Y,A=this,ne=null,Ie=function(Ee){Ee&&e.html5.Funs2.output(null,Ee+" was loaded successfully!"),null!=ne&&A._stwain.Addon.PDF.SetConvertMode(ne)},_e=function(Ee,ge,Re){Re&&e.html5.Funs2.output(null,Re+" failed to load. Error code: "+Ee+"Error String: "+ge),null!=ne&&A._stwain.Addon.PDF.SetConvertMode(ne)};try{for(var ce=b.dataTransfer.files,q=0;q<ce.length;q++){if(0==(N=ce[q]).type.length){var he,ie=N.name.indexOf(".");switch(ie>0&&(he=N.name.substring(ie+1)),he){case"bmp":Y=w.DWT.EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":Y=w.DWT.EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":Y=w.DWT.EnumDWT_ImageType.IT_TIF;break;case"png":Y=w.DWT.EnumDWT_ImageType.IT_PNG;break;case"pdf":Y=w.DWT.EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":Y=w.DWT.EnumDWT_ImageType.IT_J2K;break;default:e.html5.Funs2.output(null,N.name+" failed to load because the file type is not supported!"),Y=-1,e.Errors.UnrecognizedExt(A._stwain)}}else switch(N.type){case"image/bmp":Y=w.DWT.EnumDWT_ImageType.IT_BMP;break;case"image/jpg":case"image/jpeg":Y=w.DWT.EnumDWT_ImageType.IT_JPG;break;case"image/tif":case"image/tiff":Y=w.DWT.EnumDWT_ImageType.IT_TIF;break;case"image/png":Y=w.DWT.EnumDWT_ImageType.IT_PNG;break;case"application/pdf":Y=w.DWT.EnumDWT_ImageType.IT_PDF;break;case"image/jp2":Y=w.DWT.EnumDWT_ImageType.IT_J2K;break;default:e.html5.Funs2.output(null,N.name+" failed to load because the file type is not supported!"),Y=-1,e.Errors.UnrecognizedExt(A._stwain)}if(-1!=Y){if(e.showProgress(A._stwain,"DropLoading",!0),A._stwain._OnPercentDone([0,-1,w.MSG.Loading]),A._stwain.Addon&&A._stwain.Addon.PDF){var J,V=!1;(A._stwain._isMobileMode()?e.License.checkProductKey(A._stwain,{PDFRasterizer:!0,Wasm:!0},!0):e.License.checkProductKey(A._stwain,{PDFRasterizer:!0},!0))&&(A._stwain._isMobileMode()?V=!0:(ne=A._stwain.Addon.PDF.GetConvertMode(),J=A._stwain._innerFun("GetAddOnVersion",w.Lib.html5.Funs.makeParams("pdf")),(e.env.bMac&&J==w.DWT.PdfMacVersion||e.env.bLinux&&J==w.DWT.PdfLinuxVersion||J==w.DWT.PdfVersion)&&(V=!0)),V&&A._stwain.Addon.PDF.SetConvertMode(3))}A._stwain._isMobileMode()?A._stwain.LoadImageFromBinary(N,function(){w.Lib.closeProgress()},function(){w.Lib.closeProgress()}):function(Ee){var ge=new FileReader;ge.readAsDataURL(Ee),ge.onload=function(){A._stwain.__LoadImageFromBytes(Ee,Y,"",!0,Ie,_e,0,Ee.size)},ge.onerror=function(Re){w.Lib.closeProgress(),w.Lib.Errors.InvalidFile(A._stwain),A._stwain._errorString=this.error,_e({code:A._stwain._errorCode,message:A._stwain._errorString})}}(ce[q])}}}catch(Ee){e.log(Ee.stack||Ee,"error"),setTimeout(function(){throw Ee},0)}},R.prototype.getImageManager=function(){return this._ImgManager},R.prototype.on=function(b,A){if(b){if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(this._stwain);this.myViewer.on(b,A)}},R.prototype.off=function(b,A){var N=this;if(b)if(e.isUndefined(A))N.myViewer.off(b),v.indexOf(b)>=0&&N.myViewer.on(b,function(Y,ne){e.isFunction(N[b])&&N[b](Y,ne)});else{if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(N._stwain);N.myViewer.off(b,A)}},R.prototype.initDialogText=function(b,A){var Y=b;return e.isUndefined(Y)?Y=A:(e.isUndefined(Y.dlgChangeImageSize)?Y.dlgChangeImageSize=A.dlgChangeImageSize:(0==Y.dlgChangeImageSize[0].length&&(Y.dlgChangeImageSize[0]=A.dlgChangeImageSize[0]),0==Y.dlgChangeImageSize[1].length&&(Y.dlgChangeImageSize[1]=A.dlgChangeImageSize[1]),0==Y.dlgChangeImageSize[2].length&&(Y.dlgChangeImageSize[2]=A.dlgChangeImageSize[2]),0==Y.dlgChangeImageSize[3].length&&(Y.dlgChangeImageSize[3]=A.dlgChangeImageSize[3]),0==Y.dlgChangeImageSize[4].length&&(Y.dlgChangeImageSize[4]=A.dlgChangeImageSize[4])),e.isUndefined(Y.dlgRotateAnyAngle)?Y.dlgRotateAnyAngle=A.dlgRotateAnyAngle:(0==Y.dlgRotateAnyAngle[0].length&&(Y.dlgRotateAnyAngle[0]=A.dlgRotateAnyAngle[0]),0==Y.dlgRotateAnyAngle[1].length&&(Y.dlgRotateAnyAngle[1]=A.dlgRotateAnyAngle[1]),0==Y.dlgRotateAnyAngle[2].length&&(Y.dlgRotateAnyAngle[2]=A.dlgRotateAnyAngle[2]),0==Y.dlgRotateAnyAngle[3].length&&(Y.dlgRotateAnyAngle[3]=A.dlgRotateAnyAngle[3]),0==Y.dlgRotateAnyAngle[4].length&&(Y.dlgRotateAnyAngle[4]=A.dlgRotateAnyAngle[4])),e.isUndefined(Y.saveChangedImage)?Y.saveChangedImage=A.saveChangedImage:(0==Y.saveChangedImage[0].length&&(Y.saveChangedImage[0]=A.saveChangedImage[0]),0==Y.saveChangedImage[1].length&&(Y.saveChangedImage[1]=A.saveChangedImage[1]),0==Y.saveChangedImage[2].length&&(Y.saveChangedImage[2]=A.saveChangedImage[2])),e.isUndefined(Y.selectSource)?Y.selectSource=A.selectSource:(0==Y.selectSource[0].length&&(Y.selectSource[0]=A.selectSource[0]),0==Y.selectSource[1].length&&(Y.selectSource[1]=A.selectSource[1]),0==Y.selectSource[2].length&&(Y.selectSource[2]=A.selectSource[2]),0==Y.selectSource[3].length&&(Y.selectSource[3]=A.selectSource[3]))),Y},R.prototype.createDocumentEditor=function(b){var A=this;return A._NouiNotSupport("createImageEditor")?(A._documentEditor?e.Errors.DocumentEditorExist(A._stwain):(b?(e.isUndefined(b.border)&&(b.border=A.GetBorder()),e.isUndefined(b.selectionRectAspectRatio)&&(b.selectionRectAspectRatio=A.GetSelectionRectAspectRatio()),e.isUndefined(b.background)&&(b.background=D.background),e.isUndefined(b.topMenuBorder)&&(b.topMenuBorder=D.topMenuBorder),e.isUndefined(b.innerBorder)&&(b.innerBorder=D.innerBorder),e.isUndefined(b.promptToSaveChange)&&(b.promptToSaveChange=D.promptToSaveChange),e.isUndefined(b.buttons)&&(b.buttons=D.buttons),b.dialogText=A.initDialogText(b.dialogText,D.dialogText)):((b=P).border=A.GetBorder(),b.selectionRectAspectRatio=A.GetSelectionRectAspectRatio()),A._documentEditor=new e.UI.DocumentEditor(A,b)),A._documentEditorInner=A._documentEditor._documentEditorInner,A.bShowDocumentEdit=A._documentEditorInner.bShowDocumentEdit,A._documentEditor):NaN},R.prototype.createImageEditor=function(b){var A=this;return A._NouiNotSupport("createImageEditor")?(A._imageEditor?e.Errors.ImageEditorExist(A._stwain):(b?(e.isUndefined(b.border)&&(b.border=A.GetBorder()),e.isUndefined(b.selectionRectAspectRatio)&&(b.selectionRectAspectRatio=A.GetSelectionRectAspectRatio()),e.isUndefined(b.background)&&(b.background=D.background),e.isUndefined(b.topMenuBorder)&&(b.topMenuBorder=D.topMenuBorder),e.isUndefined(b.innerBorder)&&(b.innerBorder=D.innerBorder),e.isUndefined(b.promptToSaveChange)&&(b.promptToSaveChange=D.promptToSaveChange),e.isUndefined(b.buttons)&&(b.buttons=D.buttons),b.dialogText=A.initDialogText(b.dialogText,D.dialogText)):((b=D).border=A.GetBorder(),b.selectionRectAspectRatio=A.GetSelectionRectAspectRatio()),A._imageEditor=new e.UI.ImageEditor(A,b)),A._imageEditorInner=A._imageEditor._imageEditorInner,A.bShowImageEdit=A._imageEditorInner.bShowImageEdit,A._imageEditor):NaN},R.prototype.createThumbnailViewer=function(b){var A=this;return A._NouiNotSupport("createThumbnailViewer")?(b&&!e.isUndefined(b.showCheckbox)&&(b.multipleMode=b.showCheckbox),A._thumbnailViewer?e.Errors.ThumbnailViewerExist(A._stwain):A._thumbnailViewer=new e.UI.ThumbnailViewer(A,b),A.myThumbnailViewer=A._thumbnailViewer.myThumbnailViewer,A.myThumbnailViewer.on("click",function(N,Y){A.UpdateInfo(!0,!1,!0)}),A._thumbnailViewer):NaN},R.prototype.createCustomElement=function(b,A,N){var Y=this,ne="right",Ie=!1;return Y._NouiNotSupport("createCustomElement")?e.isUndefined(b)?(e.Errors.ElementRequired(Y._stwain),NaN):b?(e.isUndefined(A)||(ne=A),!e.isUndefined(N)&&e.isBoolean(N)&&(Ie=N),Y._customElement?e.Errors.CustomElementExist(Y._stwain):(Y._customElement=new e.UI.CustomElement(Y,b,ne,Ie),Y._customElement.myCustomElemet||(Y._customElement=void 0)),Y._customElement):(e.Errors.ElementNotExist(Y._stwain),NaN):NaN},e.UI=e.UI||{},e.UI.WebViewer=R,F.prototype.show=function(){var b=this;return!!b._webViewer._NouiNotSupport("show")&&(b.myThumbnailViewer?(b._webViewer.myViewer.setViewMode(1,1),b._webViewer.SetIfSinglePageMode(!0),b.myThumbnailViewer.showThumbnail=!0,!0):(b.bDispose?e.Errors.ThumbnailViewerDispose(b._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(b._webViewer._stwain),!1))},F.prototype.hide=function(){var b=this;return!!b._webViewer._NouiNotSupport("hide")&&(b.myThumbnailViewer?(b.myThumbnailViewer.showThumbnail=!1,!0):(b.bDispose?e.Errors.ThumbnailViewerDispose(b._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(b._webViewer._stwain),!1))},F.prototype.dispose=function(){var b=this,A=!1;return!!b.bDispose||((A=b._webViewer.myViewer.removeThumbnailView(b.myThumbnailViewer))&&(b.bDispose=!0,b._webViewer._thumbnailViewer=void 0,b._webViewer.myThumbnailViewer=void 0,b.myThumbnailViewer=void 0,b._webViewer.bThumbnailDispose=!0),A)},F.prototype.updateViewMode=function(b){var A=this;if(!A.myThumbnailViewer)return A.bDispose?e.Errors.ThumbnailViewerDispose(A._webViewer._stwain):e.Errors.ThumbnailViewerNotExist(A._webViewer._stwain),!1;if(b&&b.columns&&b.rows){if(b.columns<0||b.rows<0)return e.Errors.InvalidPropertyValue(A._webViewer._stwain),!1;A.myThumbnailViewer.showThumbnail=!1,A.myThumbnailViewer.setViewMode(b.columns,b.rows),b.scrollDirection&&("horizontal"==b.scrollDirection||"vertical"==b.scrollDirection)&&(A.myThumbnailViewer.scrollDirection=b.scrollDirection),A.myThumbnailViewer.showThumbnail=!0}},e.attachViewerPropertyThumbnailUI=function(b){i(b,"location",{get:function(){return b._webViewer.GetThumLocation()},set:function(A){return b._webViewer.SetThumLocation(A)}}),i(b,"size",{get:function(){return b._webViewer.GetThumSize()},set:function(A){return b._webViewer.SetThumSize(A)}}),i(b,"scrollDirection",{get:function(){return b._webViewer.GetThumScrollDirection()},set:function(A){return b._webViewer.SetThumScrollDirection(A)}}),i(b,"showPageNumber",{get:function(){return b._webViewer.GetThumShowPageNumber()},set:function(A){return b._webViewer.SetThumShowPageNumber(A)}}),i(b,"showCheckbox",{get:function(){return b._webViewer.GetThumMultipleMode()},set:function(A){return b._webViewer.SetThumMultipleMode(A)}}),i(b,"pageMargin",{get:function(){return b._webViewer.GetThumMargin()},set:function(A){return b._webViewer.SetThumMargin(A)}}),i(b,"border",{get:function(){return b._webViewer.GetThumBorder()},set:function(A){return b._webViewer.SetThumBorder(A)}}),i(b,"background",{get:function(){return b._webViewer.GetThumBackground()},set:function(A){return b._webViewer.SetThumBackground(A)}}),i(b,"pageBackground",{get:function(){return b._webViewer.GetThumPageBackground()},set:function(A){return b._webViewer.SetThumPageBackground(A)}}),i(b,"pageBorder",{get:function(){return b._webViewer.GetThumPageBorder()},set:function(A){return b._webViewer.SetThumPageBorder(A)}}),i(b,"hoverPageBackground",{get:function(){return b._webViewer.GetThumHoverBackground()},set:function(A){return b._webViewer.SetThumHoverBackground(A)}}),i(b,"hoverPageBorder",{get:function(){return b._webViewer.GetThumHoverBorder()},set:function(A){return b._webViewer.SetThumHoverBorder(A)}}),i(b,"placeholderBackground",{get:function(){return b._webViewer.GetThumPlaceholderBackground()},set:function(A){return b._webViewer.SetThumPlaceholderBackground(A)}}),i(b,"selectedPageBorder",{get:function(){return b._webViewer.GetThumSelectedPageBorder()},set:function(A){return b._webViewer.SetThumSelectedPageBorder(A)}}),i(b,"selectedPageBackground",{get:function(){return b._webViewer.GetThumSelectedPageBackground()},set:function(A){return b._webViewer.SetThumSelectedPageBackground(A)}}),i(b,"allowKeyboardControl",{get:function(){return b._webViewer.GetThumAllowKeyboardControl()},set:function(A){return b._webViewer.SetThumAllowKeyboardControl(A)}}),i(b,"allowPageDragging",{get:function(){return b._webViewer.GetThumAllowDrag()},set:function(A){return b._webViewer.SetThumAllowDrag(A)}}),i(b,"allowResizing",{get:function(){return b._webViewer.GetThumAllowResize()},set:function(A){return b._webViewer.SetThumAllowResize(A)}}),i(b,"autoChangeIndex",{get:function(){return b._webViewer.GetThumAutoChangeIndex()},set:function(A){return b._webViewer.SetThumAutoChangeIndex(A)}}),i(b,"multipleMode",{get:function(){return b._webViewer.GetThumMultipleMode()},set:function(A){return b._webViewer.SetThumMultipleMode(A)}})},F.prototype.on=function(b,A){if(b){if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(this._webViewer._stwain);this.myThumbnailViewer.on(b,A)}},F.prototype.off=function(b,A){var N=this;if(b)if(e.isUndefined(A))N.myThumbnailViewer.off(b),"click"==b&&N.myThumbnailViewer.on("click",function(Y,ne){N._webViewer.UpdateInfo(!0,!1,!0)});else{if(!e.isFunction(A))return void e.Errors.CallbackNotAFunction(N._webViewer._stwain);N.myThumbnailViewer.off(b,A)}},e.UI=e.UI||{},e.UI.ThumbnailViewer=F,B.prototype.show=function(){var b=this;return b.myCustomElemet?(b.myCustomElemet.show(),!0):(b.bDispose?e.Errors.CustomElementDispose(b._webViewer._stwain):e.Errors.CustomElementNotExist(b._webViewer._stwain),!1)},B.prototype.hide=function(){var b=this;return b.myCustomElemet?(b.myCustomElemet.hide(),!0):(b.bDispose?e.Errors.CustomElementDispose(b._webViewer._stwain):e.Errors.CustomElementNotExist(b._webViewer._stwain),!1)},B.prototype.dispose=function(){var b=this,A=!1;return!!b.bDispose||(b.myCustomElemet?(A=b.myCustomElemet.dispose())&&(b.bDispose=!0,b._webViewer._customElement=void 0,b.myCustomElemet=void 0,b.myViewer=null,b.element=null):(b.bDispose=!0,A=!0),A)},e.UI=e.UI||{},e.UI.CustomElement=B}function R(b,A,N){var Y=this;Y._ImgManager=b,Y._stwain=b._stwain,Y._UIView=N,Y._currentTag="",Y.bShowImageEdit=!1,Y.acceptDrop=!0,Y.currentFileName=u,Y._documentScanConfiguration="",Y.addCSSForShowVideo=!1,Y.ifWebviewerInit=!1,Y._Init(A),e.UI.DWTViewer&&w.DWT.UseDefaultViewer&&(Y._stwain.Viewer=new e.UI.DWTViewer(Y,b))}function F(b,A){var N=this;if(N._webViewer=b,A){if(A.location)switch(A.location){case"left":default:A.location="horizontal",A.sequence=-1;break;case"right":A.location="horizontal",A.sequence=1;break;case"top":A.location="vertical",A.sequence=-1;break;case"bottom":A.location="vertical",A.sequence=1}else A.location="horizontal",A.sequence=-1;e.isUndefined(A.size)&&(A.size=E.size),e.isUndefined(A.columns)&&(A.columns=E.columns),e.isUndefined(A.rows)&&(A.rows=E.rows),(e.isUndefined(A.scrollDirection)||"horizontal"!=A.scrollDirection)&&(A.scrollDirection=E.scrollDirection),e.isUndefined(A.pageMargin)&&(A.pageMargin=E.pageMargin),e.isUndefined(A.allowKeyboardControl)&&(A.allowKeyboardControl=E.allowKeyboardControl),e.isUndefined(A.allowPageDragging)&&(A.allowPageDragging=E.allowPageDragging),e.isUndefined(A.allowResizing)&&(A.allowResizing=E.allowResizing),e.isUndefined(A.border)&&(A.border=E.border),e.isUndefined(A.pageBackground)&&(A.pageBackground=E.pageBackground),e.isUndefined(A.pageBorder)&&(A.pageBorder=E.pageBorder),e.isUndefined(A.hoverPageBackground)&&(A.hoverPageBackground=E.hoverPageBackground),e.isUndefined(A.hoverPageBorder)&&(A.hoverPageBorder=E.hoverPageBorder),e.isUndefined(A.placeholderBackground)&&(A.placeholderBackground=E.placeholderBackground),e.isUndefined(A.autoChangeIndex)&&(A.autoChangeIndex=E.autoChangeIndex)}else A=E;if(e.isUndefined(A.background)&&(A.background=N._webViewer.GetBackground()),e.isUndefined(A.showPageNumber)&&(A.showPageNumber=N._webViewer.GetShowPageNumber()),e.isUndefined(A.multipleMode)&&(A.multipleMode=N._webViewer.GetMultipleMode()),e.isUndefined(A.selectedPageBorder)){var ne=N._webViewer.GetSelectedPageBorder();A.selectedPageBorder=e.isUndef(ne)?E.selectedPageBorder:ne}if(e.isUndefined(A.selectedPageBackground)){var Ie=N._webViewer.GetSelectedPageBackground();A.selectedPageBackground=e.isUndef(Ie)?E.selectedPageBackground:Ie}A.showThumbnail=!1,N.myThumbnailViewer=N._webViewer.myViewer.createThumbnailView(A),0!=N._webViewer.mydvs.Error.errorCode&&e.Errors.WebviewerError(N._webViewer._stwain,N._webViewer.mydvs.Error.errorMessage,N._webViewer.mydvs.Error.errorCode),e.attachViewerPropertyThumbnailUI(N),N.bDispose=!1,N._webViewer.bThumbnailDispose=!1}function B(b,A,N,Y){var ne=this,Ie=1;ne._webViewer=b,ne.myViewer=ne._webViewer.myViewer,ne.element=A,e.isUndefined(N)||(Ie="left"==N?-1:1),e.isUndefined(Y)&&(Y=!1),ne.myCustomElemet=ne.myViewer.createCustomElement(A,Ie,Y),ne.myCustomElemet&&(ne.hide(),ne.bDispose=!1)}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var f=e.html5.Funs.DEF;a.prototype.dispose=function(){var o=this;o._stwain=null,o._ImgManager=null,o._webViewer&&(o._webViewer=null),o._elements=[]},e.attachViewerPropertyUI=function(o){f(o,"width",{get:function(){return o._webViewer.GetWidth()},set:function(c){return o._webViewer.SetWidth(c)}}),f(o,"height",{get:function(){return o._webViewer.GetHeight()},set:function(c){return o._webViewer.SetHeight(c)}}),f(o,"idPostfix",{get:function(){return o._webViewer.GetIdPostfix()}}),f(o,"background",{get:function(){return o._webViewer.GetBackground()},set:function(c){return o._webViewer.SetBackground(c)}}),f(o,"border",{get:function(){return o._webViewer.GetBorder()},set:function(c){return o._webViewer.SetBorder(c)}}),f(o,"innerBorder",{get:function(){return o._webViewer.GetInnerBorder()},set:function(c){return o._webViewer.SetInnerBorder(c)}}),f(o,"selectedPageBorder",{get:function(){return o._webViewer.GetSelectedPageBorder()},set:function(c){return o._webViewer.SetSelectedPageBorder(c)}}),f(o,"selectedPageBackground",{get:function(){return o._webViewer.GetSelectedPageBackground()},set:function(c){return o._webViewer.SetSelectedPageBackground(c)}}),f(o,"showPageNumber",{get:function(){return o._webViewer.GetShowPageNumber()},set:function(c){return o._webViewer.SetShowPageNumber(c)}}),f(o,"selectedAreaBorderColor",{get:function(){return o._webViewer.GetSelectedAreaBorderColor()},set:function(c){return o._webViewer.SetSelectedAreaBorderColor(c)}}),f(o,"selectionRectAspectRatio",{get:function(){return o._webViewer.GetSelectionRectAspectRatio()},set:function(c){return o._webViewer.SetSelectionRectAspectRatio(c)}}),f(o,"cursor",{get:function(){return o._webViewer.GetCursor()},set:function(c){return o._webViewer.SetCursor(c)}}),f(o,"ifAutoScroll",{get:function(){return o._webViewer.GetIfAutoScroll()},set:function(c){return o._webViewer.SetIfAutoScroll(c)}}),f(o,"pageMargin",{get:function(){return o._webViewer.GetPageMargin()},set:function(c){return o._webViewer.SetPageMargin(c)}}),f(o,"zoom",{get:function(){return o._webViewer.GetZoom()},set:function(c){return o._webViewer.SetZoom(c)}}),f(o,"singlePageMode",{get:function(){return o._webViewer.GetIfSinglePageMode()},set:function(c){return o._webViewer.SetIfSinglePageMode(c)}}),f(o,"acceptDrop",{get:function(){return o._webViewer.GetAcceptDrop()},set:function(c){return o._webViewer.SetAcceptDrop(c)}}),f(o,"allowSlide",{get:function(){return o._webViewer.GetAllowSlide()},set:function(c){return o._webViewer.SetAllowSlide(c)}}),f(o,"autoChangeIndex",{get:function(){return o._webViewer.GetAutoChangeIndex()},set:function(c){return o._webViewer.SetAutoChangeIndex(c)}}),f(o,"showCheckbox",{get:function(){return o._webViewer.GetMultipleMode()},set:function(c){return o._webViewer.SetMultipleMode(c)}})},a.prototype.next=function(){return this._webViewer.next()},a.prototype.previous=function(){return this._webViewer.previous()},a.prototype.first=function(){return this._webViewer.first()},a.prototype.last=function(){return this._webViewer.last()},a.prototype.gotoPage=function(o){return this._webViewer.go(o)},a.prototype.render=function(){return this._webViewer.render()},a.prototype.createDocumentEditor=function(o){return this._webViewer.createDocumentEditor(o)},a.prototype.createImageEditor=function(o){return this._webViewer.createImageEditor(o)},a.prototype.createThumbnailViewer=function(o){return this._webViewer.createThumbnailViewer(o)},a.prototype.getUISettings=function(){return this._webViewer.getUISettings()},a.prototype.resetUISettings=function(){return this._webViewer.resetUISettings()},a.prototype.updateUISettings=function(o){return this._webViewer.updateUISettings(o)},a.prototype.clearSelectedAreas=function(){return this._webViewer.clearSelectedAreas()},a.prototype.setSelectedAreas=function(o){return this._webViewer.setSelectedAreas(o)},a.prototype.createCustomElement=function(o,c,l){return this._webViewer.createCustomElement(o,c,l)},a.prototype.fitWindow=function(o){return this._webViewer.SetFitType(o)},a.prototype.setButtonClass=function(o,c){return this._webViewer.setButtonClass(o,c)},a.prototype.setViewMode=function(o,c){return this._webViewer.SetViewMode(o,c)},a.prototype.bind=function(o,c){var l=this,m=o;if(e.isShadowRoot(m)){var I=document.createElement("div");m.appendChild(I),l._elements.push(I),m=I}if(e.isDOM(m)){var p=e.getShadowRoot(m);if(p){var g=w.Lib.timestamp,C=document.createElement("style");C.innerHTML=['@import url("',w.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",g,'")'].join(""),p.appendChild(C),l._elements.push(C)}else p=!1;(!m.id||""==m.id)&&(m.id=["dwt_",e.getRandom()].join(""))}return c?l._webViewer.BindTemplate(m,c):l._webViewer.BindView(m)},a.prototype.createTemplate=function(o){return this._webViewer.CreateTemplate(o)},a.prototype.show=function(){return this._webViewer.show()},a.prototype.hide=function(){return this._webViewer.hide()},a.prototype.unbind=function(){var o=this;return o._webViewer._stwain.Template&&o._stwain.Template._documentTemplate.UnbindView(),e.each(o._elements,function(c){c.parentNode&&c.parentNode.removeChild(c)}),o._webViewer.UnbindView()},a.prototype.on=function(o,c){this._webViewer.on(o,c)},a.prototype.off=function(o,c){this._webViewer.off(o,c)},e.UI=e.UI||{},e.UI.DWTViewer=a}function a(o,c){var l=this;l._ImgManager=c,l._stwain=c._stwain,l._webViewer=o,l._elements=[],e.attachViewerPropertyUI(l)}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){document;var d=e.html5.Funs2,s=w.DWT;u.prototype._Init=function(f){var a=this;a.borderWidth=e.isUndefined(f.borderWidth)?1:f.borderWidth,a.BackgroundColorByDefault=f.BackgroundColor?f.BackgroundColor:"#FFFFFF",f.BackgroundColor=a.BackgroundColorByDefault,a.BackgroundFillColor=a.BackgroundColorByDefault,a._webViewer?a._webViewer._Init(f):a._webViewer=new e.UI.WebViewer(a._ImgManager,f,a),a.mapModelImageControl=f.mapModelImageControl,a.__InitEvents(f)},u.prototype.dispose=function(){var f=this;f._webViewer&&(f._webViewer.dispose(),f._webViewer=null)},u.prototype.__InitEvents=function(f){var a=this;e.isFunction(f.onTopImageInTheViewChanged)&&(a.onTopImageInTheViewChanged=f.onTopImageInTheViewChanged),e.isFunction(f.onGetImageInfo)&&(a.onGetImageInfo=f.onGetImageInfo),e.isFunction(f.onZoomChanged)&&(a.onZoomChanged=f.onZoomChanged),e.isFunction(f.onMouseMove)&&(a.onMouseMove=f.onMouseMove),e.isFunction(f.onMouseClick)&&(a.onMouseClick=f.onMouseClick),e.isFunction(f.onMouseRightClick)&&(a.onMouseRightClick=f.onMouseRightClick),e.isFunction(f.onMouseDoubleClick)&&(a.onMouseDoubleClick=f.onMouseDoubleClick),e.isFunction(f.onImageAreaDeSelected)&&(a.onImageAreaDeSelected=f.onImageAreaDeSelected),e.isFunction(f.onImageAreaSelected)&&(a.onImageAreaSelected=f.onImageAreaSelected),e.isFunction(f.onBufferChanged)&&(a.onBufferChanged=f.onBufferChanged),e.isFunction(f.onSelected)&&(a.onSelected=f.onSelected),e.isFunction(f.onRefreshUI)&&(a.onRefreshUI=f.onRefreshUI),e.isFunction(f.onResetCurrentIndex)&&(a.onResetCurrentIndex=f.onResetCurrentIndex)},u.prototype.SetMetaDataByIndex=function(f,a){return this.GetWebViewer().SetMetaDataByIndex(f,a)},u.prototype.GetMetaDataByIndex=function(f){return this.GetWebViewer().GetMetaDataByIndex(f)},u.prototype.GetDataImageControl=function(f){return this.mapModelImageControl[f]},u.prototype.SetDataImageControl=function(f,a,o){var l,c=this;return-1!=a&&((l=c.mapModelImageControl[a])||((l=new e.UI.ModelImageControl).serverId=a,c.mapModelImageControl[a]=l),null!=l&&(l.bIsDirty=!0),c.__GetImageAndAttach(l,a,!0,!1,!1,f,o),!0)},u.prototype.AttachImagesForControl=function(f,a){var c=this.GetWebViewer();return f.bAddImage?c.AppendImage(f,a):c.UpdateImage(f,a),c._ImageEditorInner&&c._ImageEditorInner.bCouldBeTimeConsuming&&(c._ImageEditorInner.bCouldBeTimeConsuming=!1,w.Lib.hideMask()),!0},u.prototype.MobileAttachImagesForControl=function(f,a){var c=this.GetWebViewer();return f.bAddImage?c.MobileAppendImage(f,a):c.MobileUpdateImage(f,a),c._ImageEditorInner&&c._ImageEditorInner.bCouldBeTimeConsuming&&(c._ImageEditorInner.bCouldBeTimeConsuming=!1,w.Lib.hideMask()),!0},u.prototype.GetWebViewer=function(){return this._webViewer},u.prototype.__GetWebViewerUuid=function(f){return this.mapModelImageControl[f].uuid},u.prototype.SetSelectedImageArea=function(f,a,o,c){var m=this.GetWebViewer();return null!=m&&m.SetSelectedImageArea(f,a,o,c)},u.prototype.OverlayRectangle=function(f,a,o,c,l,m,I){var g=this.GetWebViewer();return null!=g&&g.OverlayRectangle(f,a,o,c,l,m,I)},u.prototype.ChangeImageViewSize=function(f,a){var l=this.GetWebViewer();return f>=0&&(l.GetWidth(),l.SetWidth(f)),a>=0&&(l.GetHeight(),this.GetWebViewer().SetHeight(a)),!0},u.prototype.GetWidth=function(){return this.GetWebViewer().GetWidth()},u.prototype.SetWidth=function(f){var o=f;return this.GetWebViewer().SetWidth(o),!0},u.prototype.GetHeight=function(){return this.GetWebViewer().GetHeight()},u.prototype.SetHeight=function(f){var o=f;return this.GetWebViewer().SetHeight(o),!0},u.prototype.RefreshAllImages=function(f,a){var c,l,m,o=this,I=o.GetWebViewer();if(!o._stwain._isMobileMode()&&o.mapModelImageControl)for(var p=0;p<I.GetHowManyImagesInBuffer();p++){c=o.getImageManager().convertClientIndexToServerId(p);var g=o.mapModelImageControl[c];g&&(l=d.getImageUrl(o.BaseUrl,c,f,a,Date.now()),g.minImageUrl=l,m=I.GetMetaDataByIndex(p),I.UpdateImage(g,m))}},u.prototype.SetViewMode=function(f,a){return this.GetWebViewer().SetViewMode(f,a)},u.prototype.RemoveAllImages=function(){var a,o,c,l,f=this;for(c=f._ImgManager.count(),l=Object.keys(f.mapModelImageControl).length,a=0;a<c;a++)-1!=(o=f.getImageManager().convertClientIndexToServerId(a))&&f.mapModelImageControl[o]&&(f.mapModelImageControl[o].Clear(),delete f.mapModelImageControl[o]);return c==l&&(f.mapModelImageControl={}),f.GetWebViewer().RemoveAllImages(),!0},u.prototype.__GetImageAndAttach=function(f,a,o,c,l,m,I){var _,p=this,g=p.GetWebViewer().GetWidth(),C=p.GetWebViewer().GetHeight();_=!(!o&&1!=f.bIsDirty);var v=p.__GetWebViewerUuid(a);v&&f.iImageControlWidth==g&&f.iImageControlHeight==C&&0==f.bIsDirty||p.__SetArrayControlLoadImage(v,a,f,g,C,p.AttachImagesForControl,_,c,l,m,I)},u.prototype.__SetArrayControlLoadImage=function(f,a,o,c,l,m,I,p,g,C,_){var v=this;v._stwain._isMobileMode()?v.OnGetImageFromMobileServer(a,o,c,l,p,g,C,_):I?v.OnGetImageFromServer(a,o,c,l,p,g,C,_):v.OnGetImageByURL(a,o,c,l,p,g,C,_)},u.prototype.OnGetImageByURL=function(f,a,o,c,l,m,I,p){var g=this;return a.imageUrl&&""!=a.imageUrl?(a.iImageControlWidth=o,a.iImageControlHeight=c,a.bAddImage=l,a.bAppendImage=m,a.index=I,g._stwain._isMobileMode()?g.MobileAttachImagesForControl(a,p):g.AttachImagesForControl(a,p),!0):g.OnGetImageFromServer(f,a,o,c,l,m,I,p)},u.prototype.OnGetImageFromMobileServer=function(f,a,o,c,l,m,I,p){a.iImageControlWidth=o,a.iImageControlHeight=c,a.bAddImage=l,a.bAppendImage=m,a.index=I,this.MobileAttachImagesForControl(a,p)},u.prototype.OnGetImageFromServer=function(f,a,o,c,l,m,I,p){var C,_,g=this,v=g.BaseUrl;if(v){if(-1==f)return!1;a.bIsDirty&&(a.ticks=Date.now()),e.isUndefined(o)&&(o=-1),e.isUndefined(c)&&(c=-1),a.iImageControlWidth=o,a.iImageControlHeight=c,a.bAddImage=l,a.bAppendImage=m,a.index=I,w.DWT.ConnectWithSocket&&g._stwain._bBindViewer?g._stwain.__innerConvertToBlob(w.DWT.EnumDWT_ImageType.IT_PNG,[f],!1,!0,4,function(T){a.imageUrl=URL.createObjectURL(T),a.minImageUrl=URL.createObjectURL(T),g.AttachImagesForControl(a,p)},function(T){}):(C=d.getImageUrl(v,f,-1,-1,a.ticks),_=d.getImageUrl(v,f,o,c,a.ticks),a.imageUrl=C,a.minImageUrl=_,g.AttachImagesForControl(a,p))}return!0},u.prototype.SetIfFitWindowAndType=function(f){var o,c=this.GetWebViewer();if(null!=c){switch(f){case 1:o="height";break;case 2:o="width";break;default:o="window"}c.SetFitType(o)}return!0},u.prototype.GetAllowMultiSelect=function(){return this.AllowMultiSelect},u.prototype.SetAllowMultiSelect=function(f){return this.AllowMultiSelect=f,!0},u.prototype.GetFitWindowType=function(){return 0},u.prototype.SetSelectionRectAspectRatio=function(f){return this.GetWebViewer().SetSelectionRectAspectRatio(f),!0},u.prototype.GetSelectionRectAspectRatio=function(f){return this.GetWebViewer().GetSelectionRectAspectRatio()},u.prototype.SetFitWindowType=function(f){return this.SetIfFitWindowAndType(f),!0},u.prototype.GetIfFitWindow=function(){return!0},u.prototype.SetIfFitWindow=function(f){return f?this.GetWebViewer().SetFitType():this.GetWebViewer().SetZoom(1),!0},u.prototype.GetImageMargin=function(){return this.GetWebViewer().GetImageMargin()},u.prototype.SetImageMargin=function(f){return this.GetWebViewer().SetImageMargin(f),!0},u.prototype.GetSelectionImageBorderColor=function(){return this.GetWebViewer().GetSelectedPageBorder()},u.prototype.SetSelectionImageBorderColor=function(f){var o=f;return this.GetWebViewer().SetSelectionImageBorderColor(o),!0},u.prototype.GetZoom=function(){return this.GetWebViewer().GetZoom()},u.prototype.SetZoom=function(f){var a=this;return f<a.MIN_ZOOM&&(f=a.MIN_ZOOM),f>a.MAX_ZOOM&&(f=a.MAX_ZOOM),a.GetWebViewer()?.SetZoom(f),!0},u.prototype.ZoomIn=function(f,a){var o=this,l=o.mapModelImageControl[o.getImageManager().convertClientIndexToServerId(o._webViewer.GetCurrentIndex())],m=o.GetWebViewer().GetZoom(),I=Math.floor(100*m*o.zoomInStep)+1;return 1<I&&I<2501?parseInt(l.imageWidth*m)>15e3||parseInt(l.imageHeight*m)>15e3?(d.output(o,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1):(o.SetZoom(I/100,f,a),!0):(d.output(o,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn),!1)},u.prototype.ZoomOut=function(){var f=this,a=f.GetWebViewer().GetZoom(),o=Math.floor(100*a*f.zoomOutStep)-1;return 1<o&&o<6501?(f.SetZoom(o/100),!0):(d.output(f,s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),alert(s.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut),!1)},u.prototype.GetMouseShape=function(){return this.GetWebViewer().GetMouseShape()},u.prototype.SetMouseShape=function(f){return this.GetWebViewer().SetMouseShape(f),!0},u.prototype.GetShowPageNumber=function(){return this.GetWebViewer().GetShowPageNumber()},u.prototype.SetShowPageNumber=function(f){return this.GetWebViewer().SetShowPageNumber(f),!0},u.prototype.SetBackgroundFillColor=function(f){return this.BackgroundFillColor=f,!0},u.prototype.GetBackgroundColor=function(){return this.GetWebViewer().GetBackground()},u.prototype.SetBackgroundColor=function(f){var o=f;return this.GetWebViewer().SetBackground(o),!0},u.prototype.Go=function(f){return this.GetWebViewer().go(f)},u.prototype.SetSelectedindexes=function(f){return this.GetWebViewer().SetSelectedindexes(f)},u.prototype.GetSelectedindexes=function(f){return this.GetWebViewer().GetSelectedindexes()},u.prototype.__Previous=function(){return this.Go(this.GetWebViewer().GetCurrentIndex()-1),!0},u.prototype.__Next=function(){return this.Go(this.GetWebViewer().GetCurrentIndex()+1),!0},u.prototype.__fireEvent=function(f,a){return!e.isFunction(this[f])||this[f](a)},u.prototype.AddImage=function(f,a,o,c){var p,m=1*f;return-1!=a&&((p=new e.UI.ModelImageControl).bIsDirty=!0,p.serverId=a,this.mapModelImageControl[a]=p,a>=0&&this.__GetImageAndAttach(p,a,!1,!0,c,m,o),!0)},u.prototype.RemoveImage=function(f,a){var o=this,l=parseInt(f);return isNaN(l)?(e.Errors.InvalidIndex(o),!1):l<0||l>=o._ImgManager.count()?(e.Errors.IndexOutOfRange(o),!1):(o._ImgManager.count(),-1!=a&&o.mapModelImageControl[a]&&(o.mapModelImageControl[a].Clear(),delete o.mapModelImageControl[a]),o.GetWebViewer().RemoveByIndex(l))},u.prototype.MoveImage=function(f,a,o){return this.GetWebViewer().MoveImage(f,a)},u.prototype.SwitchImage=function(f,a){return this.GetWebViewer().SwitchImage(f,a)},u.prototype.GetIfAutoScroll=function(){return this._webViewer.GetIfAutoScroll()},u.prototype.SetIfAutoScroll=function(f){return this._webViewer.SetIfAutoScroll(f),!0},u.prototype.Print=function(){var a,f=this;if(!((a=f.GetWebViewer().GetCurrentIndex())<0)){var o,c;if(-1==(c=f.getImageManager().convertClientIndexToServerId(a)))return e.Errors.IndexOutOfRange(f),!1;if(!f._stwain._isMobileMode())return o=d.getImageUrl(f.BaseUrl,c,-1,-1),f.__PrintInner(o,c,a);var l=f.GetWebViewer().GetUidByIndex(a);return f.GetWebViewer().GetImageData(l).then(function(m){return m.oriData instanceof ArrayBuffer?f.__PrintInner(URL.createObjectURL(new Blob([m.oriData])),c,a):m.oriData instanceof Blob?f.__PrintInner(URL.createObjectURL(m.oriData),c,a):f.__PrintInner(m.oriData,c,a)}),!0}},u.prototype.__PrintInner=function(f,a,o){var c=this,l=c.mapModelImageControl[a],m=[];if(!l)return!1;l.width<=0&&(l.width=c.getImageManager().GetImageWidth(o)),l.height<=0&&(l.height=c.getImageManager().GetImageHeight(o));var I=new e.UI.PrintUrl(f,l.width,l.height);return m.push(I),d.print(m),!0},u.prototype.GetHowManyImagesInBuffer=function(){return this.GetWebViewer().GetHowManyImagesInBuffer()},u.prototype.RemoveImageTag=function(f){return this.GetWebViewer().RemoveImageTag(f)},u.prototype.FilterImagesByTag=function(f,a,o){return this.GetWebViewer().FilterImagesByTag(f,a,o)},u.prototype.ClearFilter=function(){return this.GetWebViewer().ClearFilter()},u.prototype.GetServerIdList=function(){return this.GetWebViewer().GetServerIdList()},u.prototype.GetServerIdListByTag=function(f){var o,l,m,I,a=this,c=[];if(f&&0==f.length)for(l=0;l<a.GetHowManyImagesInBuffer();l++)(I=a.GetWebViewer().GetCustomDataByIndex(l))&&c.push(I.imageId);else if(o=a.GetWebViewer().GetTagContents(f))for(l=0;l<o.length;l++)(m=a.GetWebViewer().GetIndexByUid(o[l]))>=0&&(I=a.GetWebViewer().GetCustomDataByIndex(m))&&c.push(I.imageId);return c},u.prototype.SetDefaultTag=function(f){return this.GetWebViewer().SetDefaultTag(f)},u.prototype.AddImageTag=function(f,a){return this.GetWebViewer().AddImageTag(f,a)},u.prototype.GetCurrentTag=function(){var a;return 0==(a=this.GetWebViewer().GetCurrentTag())?"":a},u.prototype.RenameTag=function(f,a){return this.GetWebViewer().RenameTag(f,a)},u.prototype.RemoveTag=function(f,a){return this.GetWebViewer().RemoveTag(f,a)},u.prototype.GetTagList=function(){return this.GetWebViewer().GetTagList()},u.prototype.GetTagListByIndex=function(f){return this.GetWebViewer().GetTagListByIndex(f)},u.prototype.CreateFile=function(f){return this.GetWebViewer().CreateFile(f)},u.prototype.OpenFile=function(f){return this.GetWebViewer().OpenFile(f)},u.prototype.GetCurrentFileName=function(){return this.GetWebViewer().GetCurrentFileName()},u.prototype.RemoveFile=function(f){return this.GetWebViewer().RemoveFile(f)},u.prototype.GetFileInfoList=function(){return this.GetWebViewer().GetFileInfoList()},u.prototype.GetImageIdsByFileName=function(f){return this.GetWebViewer().GetImageIdsByFileName(f)},u.prototype.BindView=function(f){var o,c=this.GetWebViewer();return(o=c.BindView(f))&&c.show(),o},u.prototype.UnbindView=function(){return this.GetWebViewer().UnbindView()},u.prototype.GetIfShowVideoContainer=function(){return this.GetWebViewer().GetIfShowVideoContainer()},u.prototype.ShowVideoContainer=function(f){return this.GetWebViewer().ShowVideoContainer(f)},u.prototype.UpdateVideoContainer=function(f){return this.GetWebViewer().UpdateVideoContainer(f)},u.prototype.__AttachImages=function(){var a,o,f=this;o=f.GetWebViewer().GetHowManyImagesInBuffer();for(var l=0;l<o;l++)(a=f._ImgManager.convertClientIndexToServerId(l))>=0&&f.__GetImageAndAttach(f.mapModelImageControl[a],a,!0,!1,!1,0)},u.prototype.exists=function(f){return!e.isUndefined(this.mapModelImageControl[f])},u.prototype.getImageManager=function(){return this._ImgManager},u.prototype.GetImageData=function(f){this.GetWebViewer().GetImageData(f)},u.prototype.RegistLoadCallback=function(f){return this.GetWebViewer().RegistLoadCallback(f)},u.prototype.UpdateData=function(f,a){var c=this.GetWebViewer(),l=this.GetDataImageControl(f);return l&&c.UpdateImage(l,a),!0},e.UI=e.UI||{},e.UI.ImageUIView=u}function u(f,a){var o=this;o._ImgManager=f,o._stwain=f._stwain,o.zoomInStep=1.2,o.zoomOutStep=.8,o.MIN_ZOOM=.02,o.MAX_ZOOM=65,o.BaseUrl=!1,o.MAX_ROWS=128,o.MAX_COLUMNS=128,o.AllowMultiSelect=!0,o.__MousewheelValue=0,this._Init(a)}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){e.getNavInfo();var h=e.html5.Funs,d=!1,s=!0,i=function(a){e.dlgProgress||e.initProgress();var o=e.one(".dynamsoft-btnCancel");o&&o.getEL()&&e.addEventListener(o[0],"mousedown",function(){var l=e.cancelFrome;e.closeProgress(0),1==l||2==l?e.bio&&(e.bio.abort(),e.bio=d):3==l||4==l?a.SetCancel():5==l&&e.isFunction(a.__OnCancel)&&a.__OnCancel()})};e.mix(h,{changeImageUISize:function(a,o,c){var l,m,v,T,g=o,C=c,_=d;l=e.one(a._containerElement),e.isString(o)&&o.indexOf("%")>=0?(0==(v=e.css(l,"width"))&&(l[0].style.width="100%"),v=e.css(l,"width")*parseInt(o)/100,_=s):g=[(v=parseInt(o))+2,"px"].join(""),e.isString(c)&&c.indexOf("%")>=0?(0==(T=e.css(l,"height"))&&(l[0].style.height="100%"),T=e.css(l,"height")*parseInt(c)/100,_=s):C=[(T=parseInt(c))+2,"px"].join(""),l&&(m=e.one(".dynamsoft-dwt-container-box",l))&&m.getEL()&&(m.style("width",g),m.style("height",C)),_?(a.__funResize||(a.__funResize=function(){if(a._ImgManager&&a._containerElement){var P=h.__innerGetUIViewRealSize(a._containerElement,a._width,a._height);return a._ImgManager.ChangeSize(P.width,P.height)}return s}),e.removeEventListener(window,"resize",a.__funResize),e.addEventListener(window,"resize",a.__funResize)):a.__funResize&&(e.removeEventListener(window,"resize",a.__funResize),a.__funResize=d);var D=h.__innerGetUIViewRealSize(a._containerElement,v,T);return a._ImgManager?a._ImgManager.ChangeSize(D.width,D.height):s},__innerGetUIViewRealSize:function(a,o,c){var l,m=-1,I=-1;return l=e.one(a),e.isString(o)&&o.indexOf("%")>=0&&(m=e.css(l,"width")*parseInt(o)/100),m<0&&o&&(m=parseInt(o)),e.isString(c)&&c.indexOf("%")>=0&&(I=e.css(l,"height")*parseInt(c)/100),I<0&&c&&(I=parseInt(c)),{width:m,height:I}},bindUIViewEvents:function(a,o){var c=a;o.onSelected=function(m){if(!c._isNoViewer()){var p,I=m.length;I>0&&(c._ImgManager.SetSelectedImageCount(I),p=m[I-1],e.isFunction(c.__OnRefreshUI)&&c.__OnRefreshUI(p))}},o.onRefreshUI=function(m){c._isNoViewer()||h.__innerRefreshFromUIView(c,m)},o.onResetCurrentIndex=function(m){if(!c._isNoViewer()){var I=c._ImgManager.getCurrentImageIndex();m>=0&&m<c._ImgManager.count()&&I!=m&&e.isFunction(c.__OnIndexChangeDuringDragDrop)&&c.__OnIndexChangeDuringDragDrop(I,m)}},o.onMouseMove=function(m){if(!c._isNoViewer()){var I=m.index;if(m){var g=m.y;c.__MouseX=m.x,c.__MouseY=g}e.isFunction(c.__OnMouseMove)&&c.__OnMouseMove(I)}},o.onMouseClick=function(m){if(!c._isNoViewer()){var I=m.index;if(m){var g=m.y;c.__MouseX=m.x,c.__MouseY=g}e.isFunction(c.__OnMouseClick)&&c.__OnMouseClick(I)}},o.onMouseDoubleClick=function(m){if(!c._isNoViewer()){var I=m.index;e.isFunction(c.__OnMouseDoubleClick)&&c.__OnMouseDoubleClick(I)}},o.onMouseRightClick=function(m){if(!c._isNoViewer()){var I=m.index;if(m){var g=m.y;c.__MouseX=m.x,c.__MouseY=g}return e.isFunction(c.__OnMouseRightClick)?c.__OnMouseRightClick(I):s}},o.onImageAreaSelected=function(m){c._isNoViewer()||e.isFunction(c.__OnImageAreaSelected)&&c.__OnImageAreaSelected(m.index,m.left,m.top,m.right,m.bottom,m.areaIndex)},o.onImageAreaDeSelected=function(m){c._isNoViewer()||e.isFunction(c.__OnImageAreaDeSelected)&&c.__OnImageAreaDeSelected(m)},o.onBufferChanged=function(m){e.isFunction(c.__OnBufferChanged)&&c.__OnBufferChanged(m)}},__innerRefreshFromUIView:function(a,o){var c=a;e.isFunction(c.__OnRefreshUI)&&c.__OnRefreshUI(o)}}),e.html5.ui={init:function(a,o){var c;a._isBindViewer()?(o.container?a._containerElement=o.container:o.containerID&&(a._containerElement=e.get(o.containerID)),a._width=o.width,a._height=o.height,i(a),c=e.one(a._containerElement)):a._containerElement=null,a._ifBindViewer=o.ifBindViewer,function u(a,o){var c={Stwain:a};if(a._isBindViewer()){var l,m=a._width,I=a._height,p=d;l=e.one(a._containerElement),e.isString(m)&&m.indexOf("%")>=0?(m=e.css(l,"width")*parseInt(m)/100,p=s):m=parseInt(m),e.isString(I)&&I.indexOf("%")>=0?(I=e.css(l,"height")*parseInt(I)/100,p=s):I=parseInt(I),c={Stwain:a,Container:o,Width:m,Height:I}}h.bindUIViewEvents(a,c),a._ImgManager?(a._ImgManager&&a._ImgManager._UIView&&a._ImgManager._UIView.BackgroundColor&&(c.BackgroundColor=a._ImgManager._UIView.BackgroundColor),a._ImgManager._Init(a,c)):a._ImgManager=new e.UI.ImageManager(a,c),p&&h.changeImageUISize(a,a._width,a._height)}(a,c),a._ifBindViewer||(function f(a,o){var c=o||{};a.__OnImageAreaDeSelected=c.onImageAreaDeSelected||"",a.__OnImageAreaSelected=c.onImageAreaSelected||"",a.__OnMouseClick=c.onMouseClick||"",a.__OnMouseDoubleClick=c.onMouseDoubleClick||"",a.__OnMouseMove=c.onMouseMove||"",a.__OnMouseRightClick=c.onMouseRightClick||"",a.__OnTopImageInTheViewChanged=c.onTopImageInTheViewChanged||"",a.__OnBufferChanged=c.onBufferChanged||""}(a,a.config),a.__OnMouseClick=o.onMouseClick||"",a.__OnThumbnailMouseClick="",a.__OnKeyDown=o.onKeyDown||"",a.__OnMouseWheel=o.onMouseWheel||"",a.__OnMouseDoubleClick=o.onMouseDoubleClick||"",a.__OnMouseRightClick=o.onMouseRightClick||"",a.__OnMouseMove=o.onMouseMove||"",a.__OnImageAreaSelected=o.onImageAreaSelected||"",a.__OnImageAreaDeSelected=o.onImageAreaDeSelected||"",a.__OnRefreshUI=o.onRefreshUI||"",a.__OnBufferChanged=o.onBufferChanged||"",a.__MouseX=0,a.__MouseY=0,a.__style=new e.html5.STwainStyle(a),a.__fSelectionRectAspectRatio=0)},unLoad:function(a){var o=a._containerElement;o&&(o.innerHTML="")},initProgress:function(a){i(a)},addMethods:function(a){e.mix(a,{OverlayRectangle:function(o,c,l,m,I,p,g){var _,C=this;return C._resetErr(),!!C._isValid()&&(C._isNoViewer()?C._nouiNotSupport("OverlayRectangle"):c>m||l>I||c==m&&l==I?(e.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(C),!1):(_=e.isNumber(p)?e.getColor(p):p,C._ImgManager.OverlayRectangle(o,c,l,m,I,_,g)))},SetViewMode:function(o,c){var l=this;if(l._resetErr(),!l._isValid())return!1;if(l._isNoViewer())return l._nouiNotSupport("SetViewMode");if(e.isString(o)||e.isString(c)||o<-1&&c<-1)return e.Errors.InvalidValue(l),d;var m=Math.floor(o),I=Math.floor(c);return l._ImgManager.SetViewMode(m,I),!0},Print:function(o){var c=this;return c._resetErr(),!!c._isValid()&&(c._isNoViewer()?c._nouiNotSupport("Print"):!c._isMobileMode()&&o?c._innerSend("PrintEx",h.makeParams(!0),!0,function(){},function(){}):(c._ImgManager.Print(),!0))},PrintEx:function(o){var c=this;return c._resetErr(),!!c._isValid()&&(e.isArray(o)?c._isNoViewer()?c._nouiNotSupport("Print"):!!c._checkIndices(o)&&(c._ImgManager.PrintEx(o),!0):(e.Errors.IndicesNotArray(c),!1))},ShowImageEditor:function(o,c,l,m){var I=this;return I._resetErr(),!!I._isValid()&&(I._isNoViewer()?I._nouiNotSupport("ShowImageEditor"):!I._isMobileMode()&&h.isServerInvalid(I)?d:I._ImgManager.getWebViewer().bShowImageEdit?I.ShowImageEditorEx(-1,-1,-1,-1,3):o&&c&&l?I.ShowImageEditorEx(-1,-1,c,l,0,!0,o,m):I.ShowImageEditorEx(-1,-1,-1,-1,0,!1))},ShowImageEditorEx:function(o,c,l,m,I,p,g,C){var _=this;return _._resetErr(),!!_._isValid()&&(_._isNoViewer()?_._nouiNotSupport("ShowImageEditorEx"):_._ImgManager.ShowImageEditorEx(o,c,l,m,I,p,g,C))},SetSelectedImageArea:function(o,c,l,m,I){var p=this;if(p._resetErr(),!p._isValid())return!1;if(p._isNoViewer())return p._nouiNotSupport("SetSelectedImageArea");var g=parseInt(o);return isNaN(g)||g<0||g>=p._ImgManager.count()?(e.Errors.IndexOutOfRange(p),!1):!(!p._isMobileMode()&&h.isServerInvalid(p))&&p._ImgManager.SetSelectedImageArea(g,c,l,m,I)},first:function(){var o=this,c=o._ImgManager.count();return o._resetErr(),!!o._isValid()&&(o._isNoViewer()?o._nouiNotSupport("first"):(c>0&&(o._ImgManager.Go(0),h.__innerRefreshFromUIView(o,o._ImgManager.getCurrentImageIndex())),s))},previous:function(){var o=this,c=o._ImgManager.count();return o._resetErr(),!!o._isValid()&&(o._isNoViewer()?o._nouiNotSupport("previous"):(c>0&&(o._ImgManager.__Previous(),h.__innerRefreshFromUIView(o,o._ImgManager.getCurrentImageIndex())),s))},next:function(){var o=this,c=o._ImgManager.count();return o._resetErr(),!!o._isValid()&&(o._isNoViewer()?o._nouiNotSupport("next"):(c>0&&(o._ImgManager.__Next(),h.__innerRefreshFromUIView(o,o._ImgManager.getCurrentImageIndex())),s))},last:function(){var o=this,c=o._ImgManager.count();return o._resetErr(),!!o._isValid()&&(o._isNoViewer()?o._nouiNotSupport("last"):(c>0&&(o._ImgManager.Go(c-1),h.__innerRefreshFromUIView(o,o._ImgManager.getCurrentImageIndex())),s))}})}}}}),w.Ready(function(e,t){if(e.product.bHTML5Edition){var r=e.html5.Funs,f=r.DEF;e.attachPropertyUI=function(a){f(a,"Width",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("Width"),""):a._ImgManager.GetWidth():""},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("Width"):a._ImgManager.SetWidth(o))}}),f(a,"Height",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("Height"),""):a._ImgManager.GetHeight():""},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("Height"):a._ImgManager.SetHeight(o))}}),f(a,"AllowMultiSelect",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?a._nouiNotSupport("AllowMultiSelect"):a._ImgManager.GetAllowMultiSelect():""},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("AllowMultiSelect"):void a._ImgManager.SetAllowMultiSelect(o))}}),f(a,"BackgroundColor",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("BackgroundColor"),""):a._ImgManager.GetBackgroundColor():""},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("BackgroundColor"):a._ImgManager.SetBackgroundColor(o))}}),f(a,"BackgroundFillColor",{get:function(){if(a._resetErr(),!a._isValid())return"";if(a._isNoViewer())return a._nouiNotSupport("BackgroundFillColor"),"";if(a._isMobileMode()){var o=a.__BackgroundFillColor;return e.isUndefined(o)&&(o=a._ImgManager._UIView.BackgroundFillColor),e.isNumber(o)?e.getColor(o):parseInt(o.slice(1),16)}var l=a._innerFun("BackgroundFillColor");return e.BGR2RGB(l)},set:function(o){if(a._resetErr(),!a._isValid())return!1;if(a._isNoViewer())return a._nouiNotSupport("BackgroundFillColor");var l,c=1*o;return!e.isNumber(c)||isNaN(c)?(e.Errors.InvalidValue(a),!1):a._isMobileMode()?(a._ImgManager._UIView.SetBackgroundFillColor(e.getColor(c)),a.__BackgroundFillColor=e.getColor(c),!0):(l=e.RGB2BGR(c),a._innerFun("BackgroundFillColor",r.makeParams(l)))}}),f(a,"FitWindowType",{get:function(){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?(a._nouiNotSupport("FitWindowType"),0):a._ImgManager.GetFitWindowType())},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("FitWindowType"):a._ImgManager.SetFitWindowType(1*o))}}),f(a,"IfFitWindow",{get:function(){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("IfFitWindow"):a._ImgManager.GetIfFitWindow())},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("IfFitWindow"):a._ImgManager.SetIfFitWindow(!!o))}}),f(a,"ImageMargin",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("ImageMargin"),0):a._ImgManager.GetImageMargin():0},set:function(o){if(a._resetErr(),!a._isValid())return!1;if(a._isNoViewer())return a._nouiNotSupport("ImageMargin");var c=parseInt(o);return!isNaN(c)&&a._ImgManager.SetImageMargin(c)}}),f(a,"MouseX",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("MouseX"),0):a.__MouseX:0}}),f(a,"MouseY",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("MouseY"),0):a.__MouseY:0}}),f(a,"SelectionImageBorderColor",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("SelectionImageBorderColor"),""):a._ImgManager.GetSelectionImageBorderColor():""},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("SelectionImageBorderColor"):a._ImgManager.SetSelectionImageBorderColor(o))}}),f(a,"Zoom",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("Zoom"),0):a._ImgManager.GetZoom():0},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("Zoom"):a._ImgManager.SetZoom(o))}}),f(a,"MouseShape",{get:function(){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("MouseShape"):a._ImgManager.GetMouseShape()==w.DWT.EnumDWT_MouseShape.Hand)},set:function(o){if(a._resetErr(),!a._isValid())return!1;if(a._isNoViewer())return a._nouiNotSupport("MouseShape");var c=w.DWT.EnumDWT_MouseShape.Crosshair;return o&&(c=w.DWT.EnumDWT_MouseShape.Hand),a._ImgManager.SetMouseShape(c)}}),f(a,"SelectionRectAspectRatio",{get:function(){return a._resetErr(),a._isValid()?a._isNoViewer()?(a._nouiNotSupport("SelectionRectAspectRatio"),0):a._ImgManager.GetSelectionRectAspectRatio():0},set:function(o){if(a._resetErr(),!a._isValid())return!1;if(a._isNoViewer())return a._nouiNotSupport("SelectionRectAspectRatio");var c=parseFloat(o);return c>=0&&(a._ImgManager.SetSelectionRectAspectRatio(c),!0)}}),f(a,"ShowPageNumber",{get:function(){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("ShowPageNumber"):a._ImgManager.GetShowPageNumber())},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("ShowPageNumber"):a._ImgManager.SetShowPageNumber(o))}}),f(a,"IfAutoScroll",{get:function(){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("IfAutoScroll"):a._ImgManager.GetIfAutoScroll())},set:function(o){return a._resetErr(),!!a._isValid()&&(a._isNoViewer()?a._nouiNotSupport("IfAutoScroll"):a._ImgManager.SetIfAutoScroll(o))}})},e.detect.viewerScriptLoaded=!0}}),w.Ready(function(e,t){if(e.product.bPluginEdition||e.product.bActiveXEdition){var r=w.navInfo,h=!0,d=!1,s={isFunction:function(c){return c&&"function"==typeof c},isReturnSuccess:function(c){return-2115===c._errorCode?h:(-2003!==c._errorCode||w.DWT.IfHttpPostErrorNoWindow||window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no").document.writeln(c.HTTPPostResponseString),0==c._errorCode?h:d)},setErrorString:function(c){c._errorCode=c.getSWebTwain().ErrorCode,c._errorString=c.getSWebTwain().ErrorString},checkErrorString:function(c){return s.setErrorString(c),s.isReturnSuccess(c)},wrapperRet:function(c,l,m,I,p,g){if(s.checkErrorString(c)){if(s.isFunction(m))if(p)m(c.getSWebTwain().HTTPPostResponseString);else{if(g)return m(l),!0;m()}}else s.isFunction(I)&&(p?I(c._errorCode,c._errorString,c.getSWebTwain().HTTPPostResponseString):I(c._errorCode,c._errorString));return l},wrapperPromise:function(c,l){return l?e.Promise.resolve(!0):e.Promise.reject({errorCode:c._errorCode,errorString:c._errorString})},getImageType:function(c){if(c.length<4)return-1;var m=c.lastIndexOf(".");if(-1===m)return-1;var I=c.slice(m).toLowerCase();return".bmp"===I||".dib"===I?0:".jpg"===I||".jpe"===I||".jpeg"===I||".jfif"===I?1:".tif"===I||".tiff"===I?2:".png"===I?3:".pdf"===I?4:".gif"===I?5:-1},replaceLocalFilename:function(c){var l=c;return w.navInfoSync.bFileSystem&&(l=decodeURI(l)),l},makeParams:function(){var c=arguments;if(void 0!==c&&0!==c.length)return c}};e.checkErrorString=s.checkErrorString,e.wrapperRet=s.wrapperRet,e.setErrorString=s.setErrorString,e.DynamicLoadAddonFuns=[],e.attachAddon=function(c){if(r.bWin){var I,l=!r.bOSx64||r.bWOW64,m=c.getSWebTwain();I=l?"DynamicPdfCore_"+w.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+w.DWT.PdfVersion+".dll";try{m.GetAddOnVersion("pdf",I)}catch{}}e.each(e.DynamicLoadAddonFuns,function(p){e.isFunction(p)&&p(c)})},e.attachProperty=function(c){var l=c,m=function(I,p,g){var C;0!==p&&1!==p?C=p:(C={},p&&(C.set=1==g?function(_){return!e.isNumber(_*=1)||isNaN(_)?(e.Errors.InvalidValue(l),d):(l.getSWebTwain()[I]=_,s.checkErrorString(l))}:2==g?function(_){return e.isBoolean(_)?(l.getSWebTwain()[I]=_,s.checkErrorString(l)):(e.Errors.InvalidValue(l),d)}:function(_){return e.isString(_)?(l.getSWebTwain()[I]=_,s.checkErrorString(l)):(e.Errors.InvalidValue(l),d)})),C.get||(C.get=function(){var _=l.getSWebTwain()[I];return l._errorCode=l.getSWebTwain().ErrorCode,l._errorString=l.getSWebTwain().ErrorString,_}),I in l||Object.defineProperty(l,I,C)};m("ErrorCode",{get:function(I){return l._errorCode}}),m("ErrorString",{get:function(I){return l._errorString}}),m("LogLevel",1,1),m("Manufacturer",1),m("ProductFamily",1),m("ProductKey",{get:function(){return w.DWT.ProductKey},set:function(I){var p=h,g=I,C=w.DWT;return(!e.isString(g)||"******"==g)&&(g=""),C.ProductKey=g,l.__licenseInfo=d,""==g?(p=d,e.License.checkProductKey(l,{Core:h},d,h)):(l.GetLicenseInfo(g),p=s.checkErrorString(l)),p}}),m("ProductName",1),m("VersionInfo",1),m("BitDepth",1,1),m("Brightness",1,1),m("Contrast",1,1),m("CurrentSourceName",0),m("DataSourceStatus",0),m("DefaultSourceName",0),m("Duplex",0),m("IfAppendImage",1,2),m("IfAutoBright",1,2),m("IfAutoDiscardBlankpages",1,2),m("IfAutoFeed",1,2),m("IfAutomaticBorderDetection",1,2),m("IfAutomaticDeskew",1,2),m("IfAutoScan",1,2),m("IfDisableSourceAfterAcquire",1,2),m("IfDuplexEnabled",1,2),m("IfFeederEnabled",1,2),m("IfModalUI",1,2),m("IfScanInNewThread",1,2),m("IfShowCancelDialogWhenImageTransfer",1,2),m("IfShowUI",1,2),m("IfShowIndicator",1,2),m("IfUseTwainDSM",1,2),m("IfFeederLoaded",0,2),m("IfPaperDetectable",0,2),m("IfUIControllable",0,2),m("ImageBitsPerPixel",0),m("ImageCaptureDriverType",1,1),m("ImageLayoutDocumentNumber",0),m("ImageLayoutFrameBottom",0),m("ImageLayoutFrameLeft",0),m("ImageLayoutFrameNumber",0),m("ImageLayoutFrameRight",0),m("ImageLayoutFrameTop",0),m("ImageLayoutPageNumber",0),m("ImageLength",0),m("ImagePixelType",0),m("ImageWidth",0),m("ImageXResolution",0),m("ImageYResolution",0),m("MagData",0),m("MagType",0),m("PageSize",1,1),m("PendingXfers",0),m("PixelFlavor",1,1),m("PixelType",1,1),m("Resolution",1,1),m("SourceCount",0),m("TransferMode",1,1),m("Unit",1,1),m("XferCount",1,1),m("Capability",1,1),m("CapCurrentIndex",1,1),m("CapCurrentValue",1,1),m("CapDefaultIndex",0),m("CapDefaultValue",0),m("CapDescription",1),m("CapMaxValue",1,1),m("CapMinValue",1,1),m("CapNumItems",1,1),m("CapStepSize",1,1),m("CapType",1,1),m("CapValue",1,1),m("CapValueString",1),m("CapValueType",1,1),m("AllowMultiSelect",1,2),m("BackgroundColor",1,1),m("BackgroundFillColor",1,1),m("BlankImageCurrentStdDev",0),m("BlankImageMaxStdDev",1,1),m("BlankImageThreshold",1,1),m("CurrentImageIndexInBuffer",{set:function(I){return I!=l.getSWebTwain().CurrentImageIndexInBuffer&&(l.getSWebTwain().CurrentImageIndexInBuffer=I),s.checkErrorString(l)}}),m("FitWindowType",1,1),m("HowManyImagesInBuffer",0),m("IfFitWindow",1,2),m("ImageMargin",1,1),m("MaxImagesInBuffer",1,1),m("MouseX",0),m("MouseY",0),m("SelectionImageBorderColor",1),m("Zoom",1,1),m("MouseShape",1,2),m("SelectedImagesIndices",{get:function(){for(var I=[],p=l.getSWebTwain().SelectedImagesCount,g=0;g<p;g++)I.push(l.getSWebTwain().GetSelectedImageIndex(g));return I}}),m("HTTPPostResponseString",0),m("AsyncMode",1,2),m("FTPPassword",1),m("FTPPort",{set:function(I){return""!==I?(I*=1,l.getSWebTwain().FTPPort=I,s.checkErrorString(l)):d}}),m("FTPUserName",1),m("HTTPPort",{set:function(I){return""!==I?(I*=1,l.getSWebTwain().HTTPPort=I,s.checkErrorString(l)):(I=e.detect.ssl?443:80,l.getSWebTwain().HTTPPort=I,s.checkErrorString(l))}}),m("HTTPPassword",1),m("HTTPUserName",1),m("IfPASVMode",1,2),m("IfShowProgressBar",1,2),m("ProxyServer",1),m("IfShowFileDialog",1,2),m("IfTiffMultiPage",1,2),m("PDFAuthor",1),m("PDFCompressionType",1,1),m("PDFCreationDate",1),m("PDFCreator",1),m("PDFKeywords",1),m("PDFModifiedDate",1),m("PDFProducer",1),m("PDFSubject",1),m("PDFTitle",1),m("PDFVersion",1),m("TIFFCompressionType",1,1),m("JPEGQuality",{set:function(I){return(I*=1)>=100?I=100:I<0&&(I=0),l.getSWebTwain().JPEGQuality=I,s.checkErrorString(l)}}),m("HttpContentTypeFieldValue",1),m("SelectionRectAspectRatio",1,1),m("IfAllowLocalCache",1,2),m("_AutoCropMethod",1,2),m("BrokerProcessType",1,1),m("BorderStyle",1,1),m("IfShowPrintUI",1,2),m("VScrollBar",1,2),m("EnableInteractiveZoom",1,2),m("ImageEditorIfEnableEnumerator",1,2),m("ImageEditorIfReadonly",1,2),m("ImageEditorIfModal",1,2),m("ImageEditorWindowTitle",1),m("IfSSL",1,2),m("AllowPluginAuthentication",1,2),m("HttpFieldNameOfUploadedImage",1),m("MaxInternetTransferThreads",1,1),m("MaxUploadImageSize",1,1),m("IfOpenImageWithGDIPlus",1,2),m("BufferMemoryLimit",1,1),m("Width",{get:function(){return l.getSWebTwain().style.width},set:function(I){return l._ChangeWidth(I),s.checkErrorString(l)}}),m("Height",{get:function(){return l.getSWebTwain().style.height},set:function(I){return l._ChangeHeight(I),s.checkErrorString(l)}}),m("IfThrowException",1,2),m("IfAutoScroll",1,2),m("ShowPageNumber",{get:function(){return d},set:function(I){return d}}),m("UseLocalService",{get:function(){return!0}})},e.attachMethod=function(c){var l=c,m=function(_){return e.License.checkProductKey(l,{Core:h})?h:(e.isFunction(_)&&_(l.ErrorCode,l.ErrorString),d)},I=function(_,v){return e.License.checkPDFProductKeyWhenNeeds(l,_)?h:(e.isFunction(v)&&v(l.ErrorCode,l.ErrorString),d)},p=function(_,v){return 0!=_.HowManyImagesInBuffer||(e.Errors.NoImage(_),e.isFunction(v)&&v(_.ErrorCode,_.ErrorString),!1)},g=function(_,v,T){return!(!p(_,T)||(isNaN(v)||!e.isNumber(v)||v<0||v>=_.HowManyImagesInBuffer)&&(e.Errors.IndexOutOfRange(_),e.isFunction(T)&&T(_.ErrorCode,_.ErrorString),1))};c.RegisterEvent=function(_,v){if(!e.isString(_)||"onwsmessage"===_.toLowerCase())return e.Errors.InvalidEventName(l),!1;if("onpostalltransfers"===_.toLowerCase())return e.isFunction(v)&&(l.__OnPostAllTransfers=v),!0;var T=["__",_].join("");return l[T]=v,l.getSWebTwain().RegisterEvent(_,v),s.checkErrorString(l)},c.onEvent=function(_,v){return l.RegisterEvent(_,v)},c.on=function(_,v){return l.RegisterEvent(_,v)},c._isMobileMode=function(){return!1},c.CancelAllPendingTransfers=function(){return l.getSWebTwain().CancelAllPendingTransfers(),s.checkErrorString(l)},c.CloseSource=function(){return l.getSWebTwain().CloseSource(),s.checkErrorString(l)},c.CloseSourceManager=function(){return l.getSWebTwain().CloseSourceManager(),s.checkErrorString(l)},c.DisableSource=function(){return l.getSWebTwain().DisableSource(),s.checkErrorString(l)},c.FeedPage=function(){return l.getSWebTwain().FeedPage(),s.checkErrorString(l)},c.GetDeviceType=function(){var _=l.getSWebTwain().GetDeviceType();return s.setErrorString(l),_},c.GetSourceNameItems=function(_){var v=l.getSWebTwain().GetSourceNameItems(_);return s.setErrorString(l),v},c.SourceNameItems=function(_){var v=l.getSWebTwain().GetSourceNameItems(_);return s.setErrorString(l),v},c.GetSourceNames=function(){return e.Errors.ActiveXNotSupport(l),[]},c.GetSourceType=function(_){var v=l.getSWebTwain().GetSourceType(_);return s.setErrorString(l),v},c.OpenSource=function(){return l.getSWebTwain().OpenSource(),s.checkErrorString(l)},c.OpenSourceManager=function(){return l.getSWebTwain().OpenSourceManager(),s.checkErrorString(l)},c.ResetImageLayout=function(){return l.getSWebTwain().ResetImageLayout(),s.checkErrorString(l)},c.RewindPage=function(){return l.getSWebTwain().RewindPage(),s.checkErrorString(l)},c.SelectSource=function(_,v){return e.isUndefined(_)?(l.getSWebTwain().SelectSource(),s.checkErrorString(l)):(l.getSWebTwain().SelectSource(),s.checkErrorString(l)?(_(),!0):(v(),!1))},c.SelectSourceByIndex=function(_){return l.getSWebTwain().SelectSourceByIndex(_),s.checkErrorString(l)},c.CloseSourceAsync=function(){return s.wrapperPromise(l,l.CloseSource())},c.CloseSourceManagerAsync=function(){return s.wrapperPromise(l,l.CloseSourceManager())},c.GetSourceNamesAsync=function(){return s.wrapperPromise(l,l.GetSourceNames())},c.GetSourceTypeAsync=function(_){return s.wrapperPromise(l,l.GetSourceType(_))},c.OpenSourceAsync=function(){return s.wrapperPromise(l,l.OpenSource())},c.OpenSourceManagerAsync=function(){return s.wrapperPromise(l,l.OpenSourceManager())},c.SelectSourceAsync=function(){return s.wrapperPromise(l,l.SelectSource())},c.SelectSourceByIndexAsync=function(_){return s.wrapperPromise(l,l.SelectSourceByIndex(_))},c.SetFileXferInfo=function(_,v){var T=s.replaceLocalFilename(_);return l.getSWebTwain().SetFileXferInfo(T,v),s.checkErrorString(l)},c.SetImageLayout=function(_,v,T,D){return l.getSWebTwain().SetImageLayout(_,v,T,D),s.checkErrorString(l)},c.CapGet=function(){var _=l.getSWebTwain().CapGet();return s.setErrorString(l),_},c.CapGetCurrent=function(){var _=l.getSWebTwain().CapGetCurrent();return s.setErrorString(l),_},c.CapGetDefault=function(){var _=l.getSWebTwain().CapGetDefault();return s.setErrorString(l),_},c.CapGetFrameBottom=function(_){var v=l.getSWebTwain().CapGetFrameBottom(_);return s.setErrorString(l),v},c.CapGetFrameLeft=function(_){var v=l.getSWebTwain().CapGetFrameLeft(_);return s.setErrorString(l),v},c.CapGetFrameRight=function(_){var v=l.getSWebTwain().CapGetFrameRight(_);return s.setErrorString(l),v},c.CapGetFrameTop=function(_){var v=l.getSWebTwain().CapGetFrameTop(_);return s.setErrorString(l),v},c.CapGetHelp=function(){var _=l.getSWebTwain().CapGetHelp();return s.setErrorString(l),_},c.CapGetLabel=function(){var _=l.getSWebTwain().CapGetLabel();return s.setErrorString(l),_},c.CapGetLabels=function(){var _=l.getSWebTwain().CapGetLabels();return s.setErrorString(l),_},c.CapIfSupported=function(_){var v=l.getSWebTwain().CapIfSupported(_);return s.setErrorString(l),v},c.CapReset=function(){return l.getSWebTwain().CapReset(),s.checkErrorString(l)},c.CapSet=function(){return l.getSWebTwain().CapSet(),s.checkErrorString(l)},c.CapSetFrame=function(_,v,T,D,P){return l.getSWebTwain().CapSetFrame(_,v,T,D,P),s.checkErrorString(l)},c.GetCapItems=function(_){var v=l.getSWebTwain().GetCapItems(_);return s.setErrorString(l),v},c.GetCapItemsString=function(_){var v=l.getSWebTwain().GetCapItemsString(_);return s.setErrorString(l),v},c.SetCapItems=function(_,v){return l.getSWebTwain().SetCapItems(_,v),s.checkErrorString(l)},c.SetCapItemsString=function(_,v){return l.getSWebTwain().SetCapItemsString(_,v),s.checkErrorString(l)},c.AddText=function(_,v,T,D,P,E,M,O){var R=parseInt(_);return isNaN(R)||R<0||R>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().AddText(R,v,T,D,P,E,M,O),s.checkErrorString(l))},c.CreateTextFont=function(_,v,T,D,P,E,M,O,R,F,B,b,A,N){return l.getSWebTwain().CreateTextFont(_,v,T,D,P,E,M,O,R,F,B,b,A,N),s.checkErrorString(l)},c.CopyToClipboard=function(_){var v=parseInt(_);return isNaN(v)||v<0||v>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().CopyToClipboard(v),s.checkErrorString(l))},c.Erase=function(_,v,T,D,P,E,M){var R,O=parseInt(_);return isNaN(O)||O<0||O>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(M)&&M(l.ErrorCode,l.ErrorString),!1):(R=l.getSWebTwain().Erase(O,v,T,D,P),s.wrapperRet(l,R,E,M))},c.GetImageBitDepth=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().GetImageBitDepth(v);return s.setErrorString(l),T},c.GetImageWidth=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().GetImageWidth(v);return s.setErrorString(l),T},c.GetImageHeight=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().GetImageHeight(v);return s.setErrorString(l),T},c.GetImageSize=function(_,v,T){var D=parseInt(_);if(isNaN(D)||D<0||D>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var P=l.getSWebTwain().GetImageSize(D,v,T);return s.setErrorString(l),P},c.GetImageSizeWithSpecifiedType=function(_,v){var T=parseInt(_);if(isNaN(T)||T<0||T>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var D=l.getSWebTwain().GetImageSizeWithSpecifiedType(T,v);return s.setErrorString(l),D},c.GetImageXResolution=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().GetImageXResolution(v);return s.setErrorString(l),T},c.GetImageYResolution=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().GetImageYResolution(v);return s.setErrorString(l),T},c.CopyToClipboardAsync=function(_){return s.wrapperPromise(l,l.CopyToClipboard(_))},c.EraseAsync=function(_,v,T,D,P){return s.wrapperPromise(l,l.Erase(_,v,T,D,P))},c.GetImageBitDepthAsync=function(_){return s.wrapperPromise(l,l.GetImageBitDepth(_))},c.GetImageWidthAsync=function(_){return s.wrapperPromise(l,l.GetImageWidth(_))},c.GetImageHeightAsync=function(_){return s.wrapperPromise(l,l.GetImageHeight(_))},c.GetImageSizeAsync=function(_,v,T){return s.wrapperPromise(l,l.GetImageSize(_,v,T))},c.GetImageSizeWithSpecifiedTypeAsync=function(_,v){return s.wrapperPromise(l,l.GetImageSizeWithSpecifiedType(_,v))},c.GetImageXResolutionAsync=function(_){return s.wrapperPromise(l,l.GetImageXResolution(_))},c.GetImageYResolutionAsync=function(_){return s.wrapperPromise(l,l.GetImageYResolution(_))},c.SelectAllImages=function(){var v,_=l.getSWebTwain().HowManyImagesInBuffer,T=[];for(l.getSWebTwain().SelectedImagesCount=_,v=0;v<_;v++)l.getSWebTwain().SetSelectedImageIndex(v,v),T.push(v);return s.checkErrorString(l),T},c.SelectImages=function(_){var v=_.length;l.getSWebTwain().SelectedImagesCount=v;for(var T=0;T<v;T++)l.getSWebTwain().SetSelectedImageIndex(T,_[T]);return s.checkErrorString(l)},c.GetSelectedImagesSize=function(_){var v=l.getSWebTwain().GetSelectedImagesSize(_);return s.setErrorString(l),v},c.GetSkewAngle=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().GetSkewAngle(D),s.wrapperRet(l,P,v,T,!1,!0))},c.GetSkewAngleEx=function(_,v,T,D,P,E,M){var R,O=parseInt(_);return isNaN(O)||O<0||O>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(M)&&M(l.ErrorCode,l.ErrorString),!1):(R=l.getSWebTwain().GetSkewAngleEx(O,v,T,D,P),s.wrapperRet(l,R,E,M))},c.IsBlankImage=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().IsBlankImage(v);return s.setErrorString(l),T},c.IsBlankImageEx=function(_,v,T,D,P,E){var M=parseInt(_);if(isNaN(M)||M<0||M>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var O=l.getSWebTwain().IsBlankImageEx(M,v,T,D,P,E);return s.setErrorString(l),O},c.Mirror=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().Mirror(D),s.wrapperRet(l,P,v,T))},c.OverlayRectangle=function(_,v,T,D,P,E,M){return l.getSWebTwain().OverlayRectangle(_,v,T,D,P,E,M),s.checkErrorString(l)},c.RemoveAllImages=function(){var _;return l.getSWebTwain().RemoveAllImages(),(_=s.checkErrorString(l))&&l.__innerRefreshImage(),l.Width=parseInt(l.Width)+2,_},c.RemoveAllSelectedImages=function(){var _;return l.getSWebTwain().RemoveAllSelectedImages(),(_=s.checkErrorString(l))&&l.__innerRefreshImage(),_},c.RemoveImage=function(_){var v=parseInt(_);return isNaN(v)||v<0||v>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().RemoveImage(v),s.checkErrorString(l))},c.MirrorAsync=function(_){return s.wrapperPromise(l,l.Mirror(_))},c.RemoveAllImagesAsync=function(){return s.wrapperPromise(l,l.RemoveAllImages())},c.RemoveAllSelectedImagesAsync=function(){return s.wrapperPromise(l,l.RemoveAllSelectedImages())},c.RemoveImageAsync=function(_){return s.wrapperPromise(l,l.RemoveImage(_))},c.Rotate=function(_,v,T,D,P){var M,E=parseInt(_);return isNaN(E)||E<0||E>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(P)&&P(l.ErrorCode,l.ErrorString),!1):(M=l.getSWebTwain().Rotate(E,v,T),s.wrapperRet(l,M,D,P))},c.RotateEx=function(_,v,T,D,P,E){var O,M=parseInt(_);return isNaN(M)||M<0||M>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(E)&&E(l.ErrorCode,l.ErrorString),!1):(O=l.getSWebTwain().RotateEx(M,v,T,D),s.wrapperRet(l,O,P,E))},c.RotateLeft=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().RotateLeft(D),s.wrapperRet(l,P,v,T))},c.RotateRight=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().RotateRight(D),s.wrapperRet(l,P,v,T))},c.ChangeImageSize=function(_,v,T,D,P,E){var O,M=parseInt(_);return isNaN(M)||M<0||M>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(E)&&E(l.ErrorCode,l.ErrorString),!1):v<=0||T<=0?(e.Errors.InvalidWidthOrHeight(l),e.isFunction(E)&&E(l.ErrorCode,l.ErrorString),!1):(O=l.getSWebTwain().ChangeImageSize(M,v,T,D),s.wrapperRet(l,O,P,E))},c.Flip=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().Flip(D),s.wrapperRet(l,P,v,T))},c.Crop=function(_,v,T,D,P,E,M){var R,O=parseInt(_);return isNaN(O)||O<0||O>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(M)&&M(l.ErrorCode,l.ErrorString),!1):(R=l.getSWebTwain().Crop(O,v,T,D,P),s.wrapperRet(l,R,E,M))},c.CropToClipboard=function(_,v,T,D,P){var E=parseInt(_);return isNaN(E)||E<0||E>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().CropToClipboard(E,v,T,D,P),s.checkErrorString(l))},c.CutFrameToClipboard=function(_,v,T,D,P){var E=parseInt(_);return isNaN(E)||E<0||E>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().CutFrameToClipboard(E,v,T,D,P),s.checkErrorString(l))},c.CutToClipboard=function(_){var v=parseInt(_);return isNaN(v)||v<0||v>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().CutToClipboard(v),s.checkErrorString(l))},c.RotateAsync=function(_,v,T){return s.wrapperPromise(l,l.Rotate(_,v,T))},c.RotateExAsync=function(_,v,T,D){return s.wrapperPromise(l,l.RotateEx(_,v,T,D))},c.RotateLeftAsync=function(_){return s.wrapperPromise(l,l.RotateLeft(_))},c.RotateRightAsync=function(_){return s.wrapperPromise(l,l.RotateRight(_))},c.ChangeImageSizeAsync=function(_,v,T,D){return s.wrapperPromise(l,l.ChangeImageSize(_,v,T,D))},c.FlipAsync=function(_){return s.wrapperPromise(l,l.Flip(_))},c.CropAsync=function(_,v,T,D,P){return s.wrapperPromise(l,l.Crop(_,v,T,D,P))},c.CropToClipboardAsync=function(_,v,T,D,P){return s.wrapperPromise(l,l.CropToClipboard(_,v,T,D,P))},c.CutFrameToClipboardAsync=function(_,v,T,D,P){return s.wrapperPromise(l,l.CutFrameToClipboard(_,v,T,D,P))},c.CutToClipboardAsync=function(_){return s.wrapperPromise(l,l.CutToClipboard(_))},c.InvertAsync=function(_){return s.wrapperPromise(l,l.Invert(_))},c.Invert=function(_){var v=parseInt(_);return isNaN(v)||v<0||v>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(e.Errors.ActiveXNotSupport(l),!1)},c.SetDPI=function(_,v,T,D,P,E,M){var R,O=parseInt(_);return isNaN(O)||O<0||O>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(M)&&M(l.ErrorCode,l.ErrorString),!1):(R=l.getSWebTwain().SetDPI(O,v,T,D,P),s.wrapperRet(l,R,E,M))},c.SetViewMode=function(_,v){return l.getSWebTwain().SetViewMode(_,v),s.checkErrorString(l)},c.GetViewModeH=function(){var _=l.getSWebTwain().GetViewModeH();return s.setErrorString(l),_},c.GetViewModeV=function(){var _=l.getSWebTwain().GetViewModeV();return s.setErrorString(l),_},c.MoveImage=function(_,v){var T=parseInt(_),D=parseInt(v);return isNaN(T)||T<0||T>=l.HowManyImagesInBuffer||isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().MoveImage(T,D),s.checkErrorString(l))},c.SwitchImage=function(_,v){var T=parseInt(_),D=parseInt(v);return isNaN(T)||T<0||T>=l.HowManyImagesInBuffer||isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().SwitchImage(T,D),s.checkErrorString(l))},c.Print=function(){return l.getSWebTwain().Print(),s.checkErrorString(l)},c.checkErrorString=function(){return s.isReturnSuccess(l)},c.FileExists=function(_){var v=s.replaceLocalFilename(_),T=l.getSWebTwain().FileExists(v);return s.setErrorString(l),T},c.SaveAllAsMultiPageTIFF=function(_,v,T){if(!p(l,T))return!1;var P,D=s.replaceLocalFilename(_);return P=l.getSWebTwain().SaveAllAsMultiPageTIFF(D),s.wrapperRet(l,P,v,T)},c.SaveAllAsPDF=function(_,v,T){if(!p(l,T))return!1;var P,D=s.replaceLocalFilename(_);return P=l.getSWebTwain().SaveAllAsPDF(D),s.wrapperRet(l,P,v,T)},c.SaveAsBMP=function(_,v,T,D){if(!g(l,v,D))return!1;var E,P=s.replaceLocalFilename(_);return E=l.getSWebTwain().SaveAsBMP(P,v),s.wrapperRet(l,E,T,D)},c.SaveAsJPEG=function(_,v,T,D){if(!g(l,v,D))return!1;var E,P=s.replaceLocalFilename(_);return E=l.getSWebTwain().SaveAsJPEG(P,v),s.wrapperRet(l,E,T,D)},c.SaveAsPDF=function(_,v,T,D){if(!g(l,v,D))return!1;var E,P=s.replaceLocalFilename(_);return E=l.getSWebTwain().SaveAsPDF(P,v),s.wrapperRet(l,E,T,D)},c.SaveAsPNG=function(_,v,T,D){if(!g(l,v,D))return!1;var E,P=s.replaceLocalFilename(_);return E=l.getSWebTwain().SaveAsPNG(P,v),s.wrapperRet(l,E,T,D)},c.SaveAsTIFF=function(_,v,T,D){if(!g(l,v,D))return!1;var E,P=s.replaceLocalFilename(_);return E=l.getSWebTwain().SaveAsTIFF(P,v),s.wrapperRet(l,E,T,D)},c.SaveSelectedImagesAsMultiPagePDF=function(_,v,T){var P,D=s.replaceLocalFilename(_);return P=l.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(D),s.wrapperRet(l,P,v,T)},c.SaveSelectedImagesAsMultiPageTIFF=function(_,v,T){var P,D=s.replaceLocalFilename(_);return P=l.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(D),s.wrapperRet(l,P,v,T)},c.SaveSelectedImagesToBase64Binary=function(_,v){var T=l.getSWebTwain().SaveSelectedImagesToBase64Binary();return s.wrapperRet(l,T,_,v)},c.ShowFileDialog=function(_,v,T,D,P,E,M,O){return l.getSWebTwain().ShowFileDialog(_,v,T,D,P,E,M,O),s.checkErrorString(l)},c.FTPDownload=function(_,v,T,D){if(!m(D))return!1;var P=l.getSWebTwain().FTPDownload(_,v);return P&&e.License.isLTS()&&w.DWT.lcvrf(l),s.wrapperRet(l,P,T,D)},c.FTPDownloadDirectly=function(_,v,T,D,P){if(!m(P))return!1;var E=l.getSWebTwain().FTPDownloadDirectly(_,v,T);return s.wrapperRet(l,E,D,P)},c.FTPDownloadEx=function(_,v,T,D,P){if(!m(P))return!1;if(T!=w.DWT.EnumDWT_ImageType.IT_BMP&&T!=w.DWT.EnumDWT_ImageType.IT_JPG&&T!=w.DWT.EnumDWT_ImageType.IT_TIF&&T!=w.DWT.EnumDWT_ImageType.IT_PNG&&T!=w.DWT.EnumDWT_ImageType.IT_PDF&&T!=w.DWT.EnumDWT_ImageType.IT_J2K&&(T=-1),!I(T,P))return d;var E=l.getSWebTwain().FTPDownloadEx(_,v,T);return s.wrapperRet(l,E,D,P)},c.FTPUpload=function(_,v,T,D,P){if(!m(P))return!1;var E=l.getSWebTwain().FTPUpload(_,v,T);return s.wrapperRet(l,E,D,P)},c.FTPUploadDirectly=function(_,v,T,D,P){if(!m(P))return!1;var E=l.getSWebTwain().FTPUploadDirectly(_,v,T);return s.wrapperRet(l,E,D,P)},c.FTPUploadEx=function(_,v,T,D,P,E){if(!m(E))return!1;var M=l.getSWebTwain().FTPUploadEx(_,v,T,D);return s.wrapperRet(l,M,P,E)},c.FTPUploadAllAsMultiPageTIFF=function(_,v,T,D){if(!m(D))return!1;var P=l.getSWebTwain().FTPUploadAllAsMultiPageTIFF(_,v);return s.wrapperRet(l,P,T,D)},c.FTPUploadAllAsPDF=function(_,v,T,D){if(!m(D))return!1;var P=l.getSWebTwain().FTPUploadAllAsPDF(_,v);return s.wrapperRet(l,P,T,D)},c.FTPUploadAsMultiPagePDF=function(_,v,T,D){var P=l.getSWebTwain().FTPUploadAsMultiPagePDF(_,v);return s.wrapperRet(l,P,T,D)},c.FTPUploadAsMultiPageTIFF=function(_,v,T,D){var P=l.getSWebTwain().FTPUploadAsMultiPageTIFF(_,v);return s.wrapperRet(l,P,T,D)},c.HTTPDownloadDirectly=function(_,v,T,D,P){if(!m(P))return!1;var E=l.getSWebTwain().HTTPDownloadDirectly(_,v,T);return s.wrapperRet(l,E,D,P)},c.HTTPDownload=function(_,v,T,D){var E=s.getImageType(v);return l.HTTPDownloadEx(_,v,E,T,D)},c.HTTPDownloadEx=function(_,v,T,D,P){if(!m(P)||(T!=w.DWT.EnumDWT_ImageType.IT_BMP&&T!=w.DWT.EnumDWT_ImageType.IT_JPG&&T!=w.DWT.EnumDWT_ImageType.IT_TIF&&T!=w.DWT.EnumDWT_ImageType.IT_PNG&&T!=w.DWT.EnumDWT_ImageType.IT_PDF&&T!=w.DWT.EnumDWT_ImageType.IT_J2K&&(T=-1),!I(T,P)))return d;var E=l.getSWebTwain().HTTPDownloadEx(_,v,T);return E&&e.License.isLTS()&&w.DWT.lcvrf(l),s.wrapperRet(l,E,D,P)},c.HTTPDownloadThroughGet=c.HTTPDownloadEx,c.HTTPUploadThroughPostDirectly=function(_,v,T,D,P,E){if(!m(E))return!1;var M=l.getSWebTwain().HTTPUploadThroughPostDirectly(_,v,T,D);return s.wrapperRet(l,M,P,E,!0)},c.HTTPUploadThroughPost=function(_,v,T,D,P,E){if(!e.isNumber(v)||isNaN(v)||v<-2)return e.Errors.IndexOutOfRange(l),e.isFunction(E)&&E(l.ErrorCode,l.ErrorString),!1;var M=l.getSWebTwain().HTTPUploadThroughPost(_,v,T,D);return s.wrapperRet(l,M,P,E,!0)},c.HTTPUploadThroughPostEx=function(_,v,T,D,P,E,M){if(!e.isNumber(v)||isNaN(v)||v<-2)return e.Errors.IndexOutOfRange(l),e.isFunction(M)&&M(l.ErrorCode,l.ErrorString),!1;var O=l.getSWebTwain().HTTPUploadThroughPostEx(_,v,T,D,P);return s.wrapperRet(l,O,E,M,!0)},c.ClearAllHTTPFormField=function(){return l.getSWebTwain().ClearAllHTTPFormField(),s.checkErrorString(l)},c.SetHTTPFormField=function(_,v){return l.getSWebTwain().SetHTTPFormField(_,v),s.checkErrorString(l)},c.HTTPUploadAllThroughPostAsMultiPageTIFF=function(_,v,T,D,P){var E;return E=l.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(_,v,T),s.wrapperRet(l,E,D,P,!0)},c.HTTPUploadThroughPostAsMultiPageTIFF=function(_,v,T,D,P){var E;return E=l.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(_,v,T),s.wrapperRet(l,E,D,P,!0)},c.HTTPUploadAllThroughPostAsPDF=function(_,v,T,D,P){var E;return E=l.getSWebTwain().HTTPUploadAllThroughPostAsPDF(_,v,T),s.wrapperRet(l,E,D,P,!0)},c.HTTPUploadThroughPostAsMultiPagePDF=function(_,v,T,D,P){var E;return E=l.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(_,v,T),s.wrapperRet(l,E,D,P,!0)},c.HTTPUploadThroughPutDirectly=function(_,v,T,D,P){var E;return E=l.getSWebTwain().HTTPUploadThroughPutDirectly(_,v,T),s.wrapperRet(l,E,D,P)},c.HTTPUploadThroughPut=function(_,v,T,D,P){var E=s.getImageType(T);return l.HTTPUploadThroughPutEx(_,v,T,E,D,P)},c.HTTPUploadThroughPutEx=function(_,v,T,D,P,E){var M;return M=l.getSWebTwain().HTTPUploadThroughPutEx(_,v,T,D),s.wrapperRet(l,M,P,E)},c.HTTPUploadAllThroughPutAsMultiPageTIFF=function(_,v,T,D){return l.HTTPUploadThroughPutEx(_,-1,v,2,T,D)},c.HTTPUploadThroughPutAsMultiPageTIFF=function(_,v,T,D){return l.HTTPUploadThroughPutEx(_,-2,v,2,T,D)},c.HTTPUploadAllThroughPutAsPDF=function(_,v,T,D){return l.HTTPUploadThroughPutEx(_,-1,v,4,T,D)},c.HTTPUploadThroughPutAsMultiPagePDF=function(_,v,T,D){return l.HTTPUploadThroughPutEx(_,-2,v,4,T,D)},c.ShowImageEditor=function(){return l.getSWebTwain().ShowImageEditor(),s.checkErrorString(l)},c.SetCookie=function(_){return l.getSWebTwain().SetCookie(_),s.checkErrorString(l)},c.LoadImageFromBase64Binary=function(_,v){if(!m()||(v!=w.DWT.EnumDWT_ImageType.IT_BMP&&v!=w.DWT.EnumDWT_ImageType.IT_JPG&&v!=w.DWT.EnumDWT_ImageType.IT_TIF&&v!=w.DWT.EnumDWT_ImageType.IT_PNG&&v!=w.DWT.EnumDWT_ImageType.IT_PDF&&v!=w.DWT.EnumDWT_ImageType.IT_J2K&&(v=-1),!I(v)))return d;var T=l.getSWebTwain().LoadImageFromBase64Binary(_,v);return s.setErrorString(l),T},c.SaveSelectedImagesToBytes=function(_,v){var T=l.getSWebTwain().SaveSelectedImagesToBytes(_,v);return s.setErrorString(l),T},c.LoadImageFromBytes=function(_,v,T){if(!m()||(T!=w.DWT.EnumDWT_ImageType.IT_BMP&&T!=w.DWT.EnumDWT_ImageType.IT_JPG&&T!=w.DWT.EnumDWT_ImageType.IT_TIF&&T!=w.DWT.EnumDWT_ImageType.IT_PNG&&T!=w.DWT.EnumDWT_ImageType.IT_PDF&&T!=w.DWT.EnumDWT_ImageType.IT_J2K&&(T=-1),!I(T)))return d;var D=l.getSWebTwain().LoadImageFromBytes(_,v,T);return s.setErrorString(l),D},c.UnregisterEvent=function(_,v){return l.getSWebTwain().UnregisterEvent(_,v),s.checkErrorString(l)},c.SetImageWidth=function(_,v,T,D){var E,P=parseInt(_);return isNaN(P)||P<0||P>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(D)&&D(l.ErrorCode,l.ErrorString),!1):(E=l.getSWebTwain().SetImageWidth(P,v),s.wrapperRet(l,E,T,D))},c.HTTPDownloadThroughPost=function(_,v,T,D,P){if(!m(P))return!1;if(T!=w.DWT.EnumDWT_ImageType.IT_BMP&&T!=w.DWT.EnumDWT_ImageType.IT_JPG&&T!=w.DWT.EnumDWT_ImageType.IT_TIF&&T!=w.DWT.EnumDWT_ImageType.IT_PNG&&T!=w.DWT.EnumDWT_ImageType.IT_PDF&&T!=w.DWT.EnumDWT_ImageType.IT_J2K&&(T=-1),!I(T,P))return d;var E=l.getSWebTwain().HTTPDownloadThroughPost(_,v,T);return s.wrapperRet(l,E,D,P)},c.SetCustomDSDataEx=function(_){return l.getSWebTwain().SetCustomDSDataEx(_),s.checkErrorString(l)},c.SetCustomDSData=function(_){return l.getSWebTwain().SetCustomDSData(_),s.checkErrorString(l)},c.GetCustomDSDataEx=function(){var _=l.getSWebTwain().GetCustomDSDataEx();return s.setErrorString(l),_},c.GetCustomDSData=function(_){var v=l.getSWebTwain().GetCustomDSData(_);return s.setErrorString(l),v},c.ChangeBitDepth=function(_,v,T){var D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),!1):(l.getSWebTwain().ChangeBitDepth(D,v,T),s.checkErrorString(l))},c.ConvertToGrayScale=function(_,v,T){var P,D=parseInt(_);return isNaN(D)||D<0||D>=l.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(l),e.isFunction(T)&&T(l.ErrorCode,l.ErrorString),!1):(P=l.getSWebTwain().ConvertToGrayScale(_),s.wrapperRet(l,P,v,T))},c.ShowImageEditorEx=function(_,v,T,D,P){return l.getSWebTwain().ShowImageEditorEx(_,v,T,D,P),s.checkErrorString(l)},c.ClearTiffCustomTag=function(){return l.getSWebTwain().ClearTiffCustomTag(),s.checkErrorString(l)},c.SetTiffCustomTag=function(_,v,T){var D=1*_;return w.Lib.isUndef(_)||w.Lib.isUndef(v)?(w.Lib.Errors.InvalidParameter(l),!1):D<=0||D>2147483647?(w.Lib.Errors.InvalidTiffTagError(l),!1):(l.getSWebTwain().SetTiffCustomTag(_,v,T),s.checkErrorString(l))},c.IsBlankImageExpress=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),!1;var T=l.getSWebTwain().IsBlankImageExpress(v);return s.setErrorString(l),T},c._ChangeWidth=function(_){var T,v=document.getElementById(l._strDWTInnerContainerID);if(e.isString(_)&&_.length>0&&"%"===_.charAt(_.length-1)&&(T=_),!T){var D=parseInt(_);D&&D>2&&(T=D-2+"px")}return T&&(l._strWidth=T,l.getSWebTwain().style.width=T,v&&(v.style.width=T)),h},c._ChangeHeight=function(_){var T,v=document.getElementById(l._strDWTInnerContainerID);if(e.isString(_)&&_.length>0&&"%"===_.charAt(_.length-1)&&(T=_),!T){var D=parseInt(_);D&&(T=D+"px")}return T&&(l._strHeight=T,l.getSWebTwain().style.height=T,v&&(v.style.height=T)),h},c.SetSize=function(_,v){return this._ChangeWidth(_),this._ChangeHeight(v),h},c.SetSelectedImageArea=function(_,v,T,D,P){return l.getSWebTwain().SetSelectedImageArea(_,v,T,D,P),s.checkErrorString(l)},c.SetVideoRotateMode=function(_){return l.getSWebTwain().SetVideoRotateMode(_),s.checkErrorString(l)},c.SetOpenSourceTimeout=function(_){return l.getSWebTwain().SetOpenSourceTimeout(_),s.checkErrorString(l)},c.SetHTTPHeader=function(_,v){return!1},c.GetImageURL=function(_,v,T){return""},c.GetImagePartURL=function(_){var v=parseInt(_);if(isNaN(v)||v<0||v>=l.HowManyImagesInBuffer)return e.Errors.IndexOutOfRange(l),"";var T=l.getSWebTwain().GetDIB(v);return s.setErrorString(l),T},c.GetLicenseInfo=function(_){try{var v=!1;e.License.isLTS()?v=!0:l.getSWebTwain().ProductKey=_;var T=l.getSWebTwain().GetLicenseInfo();if(s.checkErrorString(l)){var D=e.parse(T);D&&D.message?(e.Errors.LicenseEmptyOrInvalid(l),l._errorString=D.message,D=void 0):v&&(D&&e.isArray(D.Detail)&&D.Detail.length>0&&w.DWT.lsexp(w.DWT.EnumInstance.dwt_desktop,D.Detail[0].ExpireDate),D.LTS=!0),l.__licenseInfo=D}else l.__licenseInfo=void 0}catch{l.__licenseInfo=void 0}return Promise.resolve(l.__licenseInfo)},c.LoadDibFromClipboard=function(_,v){var T=l.getSWebTwain().LoadDibFromClipboard();return T&&e.License.isLTS()&&w.DWT.lcvrf(l),s.wrapperRet(l,T,_,v)},c.LoadImage=function(_,v,T){if(!m(T))return!1;var P,D=s.replaceLocalFilename(_);return(P=l.getSWebTwain().LoadImage(D))&&e.License.isLTS()&&w.DWT.lcvrf(l),s.wrapperRet(l,P,v,T)},c.LoadImageEx=function(_,v,T,D){if(!m(D)||(v!=w.DWT.EnumDWT_ImageType.IT_BMP&&v!=w.DWT.EnumDWT_ImageType.IT_JPG&&v!=w.DWT.EnumDWT_ImageType.IT_TIF&&v!=w.DWT.EnumDWT_ImageType.IT_PNG&&v!=w.DWT.EnumDWT_ImageType.IT_PDF&&v!=w.DWT.EnumDWT_ImageType.IT_J2K&&(v=-1),!I(v,D)))return d;var M,P=s.replaceLocalFilename(_),E=v;return E==w.DWT.EnumDWT_ImageType.IT_ALL&&(E=-1),(M=l.getSWebTwain().LoadImageEx(P,E))&&e.License.isLTS()&&w.DWT.lcvrf(l),s.wrapperRet(l,M,T,D)},c.EnableSource=function(_,v,T){return l.AcquireImage(_,v,T),s.checkErrorString(l)},c.AcquireImage=function(_,v,T){var R,D=l.getSWebTwain(),E=null,M=null,O=null;return e.isUndefined(T)&&(e.isFunction(_)&&e.isFunction(v)||e.isFunction(_)&&e.isUndefined(v)||e.isFunction(_)&&null==v||null==_&&e.isFunction(v))?(E=null,e.isFunction(_)&&(M=_),e.isFunction(v)&&(O=v)):(E=e.isUndefined(_)||null==_?{}:e.clone(_),e.isFunction(v)&&(M=function(){v(E)}),e.isFunction(T)&&(O=function(){T(E,l._errorCode,l._errorString)})),!!m(O)&&(null!=E&&(null!=(R=E.SelectSourceByIndex)&&typeof R<"u"&&(D.SelectSourceByIndex(R),D.CloseSource(),D.OpenSource()),null!=(R=E.IfShowUI)&&typeof R<"u"&&(D.IfShowUI=R),null!=(R=E.PixelType)&&typeof R<"u"&&(D.PixelType=R),null!=(R=E.Resolution)&&typeof R<"u"&&(D.Resolution=R),null!=(R=E.IfFeederEnabled)&&typeof R<"u"&&(D.IfFeederEnabled=R),null!=(R=E.IfDuplexEnabled)&&typeof R<"u"&&(D.IfDuplexEnabled=R),null!=(R=E.IfDisableSourceAfterAcquire)&&typeof R<"u"&&(D.IfDisableSourceAfterAcquire=R)),l.getSWebTwain().RegisterEvent("OnPostTransferAsync",function(F){var B;F&&e.isString(F)&&(B=e.parse(F)),e.isFunction(l.__OnPostTransferAsync)&&l.__OnPostTransferAsync(B)}),l.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){s.checkErrorString(l)?(e.License.isLTS()&&w.DWT.lcvrf(l),e.isFunction(M)&&M()):e.isFunction(O)&&O(l._errorCode,l._errorString),e.isFunction(l.__OnPostAllTransfers)&&l.__OnPostAllTransfers()}),D.AcquireImage(),s.checkErrorString(l))},c.GenerateURLForUploadData=function(_,v,T){return s.wrapperRet(l,!0,v,T)},c._innerFun=function(_,v,T){var D=l.getSWebTwain(),P=D[_];return"function"==typeof P?P.apply(D,v):P},c.ActiveUI=function(_,v){},c.startScan=function(){return new Promise(function(_,v){})},c.IndexToImageID=function(_){return _},c.ImageIDToIndex=function(_){return _},c.first=function(){return l.HowManyImagesInBuffer>0&&(l.CurrentImageIndexInBuffer=0,l.__innerRefreshImage()),h},c.previous=function(){var v;return l.HowManyImagesInBuffer>0&&(v=l.CurrentImageIndexInBuffer)>0&&(l.CurrentImageIndexInBuffer=v-1,l.__innerRefreshImage()),h},c.next=function(){var v,_=l.HowManyImagesInBuffer;return _>0&&(v=l.CurrentImageIndexInBuffer)>=0&&v<_-1&&(l.CurrentImageIndexInBuffer=v+1,l.__innerRefreshImage()),h},c.last=function(){var _=l.HowManyImagesInBuffer;return _>0&&(l.CurrentImageIndexInBuffer=_-1,l.__innerRefreshImage()),h},c.isUsingActiveX=function(){return!0},c.show=function(){return c.ShowImageEditor()},c.SetLTSInfo=function(_,v){return l.getSWebTwain().SetLTSInfo(_,v)},c.EnableBuffer=function(_){return l.getSWebTwain().Encrypt(_,0)},c.GetBuffer=function(_){return l.getSWebTwain().GetBuffer(_)},c.GetUUID=function(){return l.getSWebTwain().GetUUID()},c.__OnDispatchThumbnailEvt=function(_,v,T){1==T?e.isFunction(c["__"+_+"_Thumbnail"])&&("OnMouseClick"==_||"OnMouseDoubleClick"==_||"OnMouseMove"==_||"OnMouseWheel"==_||"OnKeyDown"==_?c["__"+_+"_Thumbnail"]():c["__"+_+"_Thumbnail"](v)):e.isFunction(c["__"+_])&&c["__"+_](v)},c._OnImageAreaSelected=function(_,v,T,D,P,E){var M="OnImageAreaSelected";1==E?e.isFunction(c["__"+M+"_Thumbnail"])&&c["__"+M+"_Thumbnail"](_,v,T,D,P):e.isFunction(c["__"+M])&&c["__"+M](_,v,T,D,P)};var C=function(_,v){(e.isFunction(_["__"+v])||e.isFunction(_["__"+v+"_Thumbnail"]))&&("OnImageAreaSelected"==v?_.getSWebTwain().RegisterEvent(v,_._OnImageAreaSelected):_.getSWebTwain().RegisterEvent(v,function(T,D){return _.__OnDispatchThumbnailEvt(v,T,D)}))};c.getSourceCount=function(_){return e.Errors.ActiveXNotSupport(l),e.Promise.resolve(l.getSWebTwain().SourceCount)},c.GetSourceCountAsync=function(_){return e.Errors.ActiveXNotSupport(l),e.Promise.resolve(l.getSWebTwain().SourceCount)},c._resetErr=function(){this._errorCode=0,this._errorString="";var _=w.DWT.licenseException;_.code=0,_.message=""},c._setConvertModeInner=function(_){if(!e.License.checkProductKey(l,{Core:!0}))return!1;var v=1*_;return l._resetErr(),isNaN(v)?(e.Errors.ParameterCannotEmpty(l),!1):1!=v&&2!=v&&3!=v&&4!=v?(e.Errors.InvalidValue(l),!1):(l._pdfConvertMode=v,l._pdfRealConvertMode=2==v||e.License.hasPDFRProductKey(l)?v:2,!0)},c._setConvertMode=function(_){return!!l._setConvertModeInner(_)&&(l.getSWebTwain().SetPDFConvertMode(l._pdfRealConvertMode),!(2==l._pdfRealConvertMode&&1==l._pdfConvertMode||2==l._pdfRealConvertMode&&4==l._pdfConvertMode)||(e.Errors.LicenseNoPDF(l),!1))},c.__innerRefreshImage=function(){var _=l.HowManyImagesInBuffer;_>0&&l.__OnRefreshUI&&l.__OnRefreshUI(l.CurrentImageIndexInBuffer,_)},c.__OnBitmapChangedEx=function(_,v,T,D,P){if(P>-1&&c._blts&&(1==v||2==v)){var b=w.DWT.lgct(P);e.isFunction(l.__OnLtsverify)&&l.__OnLtsverify(b,1)}},c._attachEvents=function(){var v,_=l.getSWebTwain();!((v=w.Lib.detect.getVersionArray(String(l.VersionInfo))).length<=2||v[0]<9||9==v[0]&&v[1]<=2)&&(""!=l.__OnPostTransfer&&_.RegisterEvent("OnPostTransfer",l.__OnPostTransfer),""!=l.__OnPostAllTransfers&&_.RegisterEvent("OnPostAllTransfers",l.__OnPostAllTransfers),""!=l.__OnPostLoad&&_.RegisterEvent("OnPostLoad",l.__OnPostLoad),C(l,"OnMouseClick"),C(l,"OnImageAreaSelected"),C(l,"OnTopImageInTheViewChanged"),C(l,"OnImageAreaDeSelected"),C(l,"OnMouseDoubleClick"),C(l,"OnMouseRightClick"),C(l,"OnMouseMove"),""!=l.__OnGetFilePath&&_.RegisterEvent("OnGetFilePath",l.__OnGetFilePath),""!=l.__OnAfterOperate&&_.RegisterEvent("OnAfterOperate",l.__OnAfterOperate),""!=l.__OnBeforeOperate&&_.RegisterEvent("OnBeforeOperate",l.__OnBeforeOperate),""!=l.__OnOperateStatus&&_.RegisterEvent("OnOperateStatus",l.__OnOperateStatus),""!=l.__OnBitmapChanged&&_.RegisterEvent("OnBitmapChanged",l.__OnBitmapChanged),""!=l.__OnBitmapChangedEx&&_.RegisterEvent("OnBitmapChangedEx",l.__OnBitmapChangedEx),""!=l.__OnPreAllTransfers&&_.RegisterEvent("OnPreAllTransfers",l.__OnPreAllTransfers),""!=l.__OnPreTransfer&&_.RegisterEvent("OnPreTransfer",l.__OnPreTransfer),""!=l.__OnSourceUIClose&&_.RegisterEvent("OnSourceUIClose",l.__OnSourceUIClose),""!=l.__OnTransferCancelled&&_.RegisterEvent("OnTransferCancelled",l.__OnTransferCancelled),""!=l.__OnTransferError&&_.RegisterEvent("OnTransferError",l.__OnTransferError),""!=l.__OnInternetTransferPercentage&&_.RegisterEvent("OnInternetTransferPercentage",l.__OnInternetTransferPercentage),""!=l.__OnInternetTransferPercentageEx&&_.RegisterEvent("OnInternetTransferPercentageEx",l.__OnInternetTransferPercentageEx),C(l,"OnMouseWheel"),C(l,"OnKeyDown"),C(l,"OnPaintDone"))}},e.noControl=function(c){if(w.DWT.IfUseEmbeddedDownloadNoticeForActiveX)if(e.isFunction(e.detect.onNoControl))e.detect.onNoControl(e.get(c._containerID),c._strWidth,c._strHeight);else for(var l=e.detect.arySTwains,m=0;m<l.length;m++){var I=l[m];I._vPluginExist||(o(I),e.show(I._strDWTNonInstallInnerContainerID),e.hide(I._strDWTInnerContainerID))}else{window;var g=e.product,C="";e.isFunction(w.OnWebTwainNotFoundOnWindowsCallback)&&(C=r.bIE||g.bHTML5Edition?w.dcp.getDSPath():g.getMSIPath(),w.OnWebTwainNotFoundOnWindowsCallback(g.name,C,g.bHTML5Edition,r.bIE,r.bSafari,e.detect.ssl,e.env.strIEVersion))}}}function o(c){var p,l=c,m=e.get(l._strDWTNonInstallInnerContainerID),I="";""==m.innerHTML&&(w.DWT.ActiveXInstallWithCAB&&r.bIE?p=["<div style='display: block; border:solid black 1px; text-align:center; width:",l._strWidth,";height:",l._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join(""):(location,I=e.product.bHTML5Edition||r.bIE?w.dcp.getDSPath():r.bWin?e.product.getMSIPath():e.product.getPKGPath(),p=["<div style='display: block; border:solid black 1px; text-align:center; width:",l._strWidth,";height:",l._strHeight,"'>","<ul style='padding-top:100px;list-style:none'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",I,"'>Download</a></li>","</ul></div>"].join("")),m.innerHTML=p)}}),w.Ready(function(e,t){var r=w.navInfoSync.IEVersion<=8;if(e.product.bPluginEdition||e.product.bActiveXEdition){e.attachAxViewerPropertyUI=function(c){var l=function(m,I){m in c||Object.defineProperty(c,m,I)};l("width",{get:function(){return c._stwain.Width},set:function(m){return c._stwain.Width=m,e.checkErrorString(c._stwain)}}),l("height",{get:function(){return c._stwain.Height},set:function(m){return c._stwain.Height=m,e.checkErrorString(c._stwain)}}),l("background",{get:function(){return c._stwain.BackgroundColor},set:function(m){return c._stwain.BackgroundColor=m,m}}),l("cursor",{get:function(){return c._stwain.MouseShape?"pointer":"crosshair"},set:function(m){return c._stwain.MouseShape="pointer"==m,m}}),l("showPageNumber",{get:function(){return!1},set:function(m){return!1}}),l("ifAutoScroll",{get:function(){return c._stwain.IfAutoScroll},set:function(m){return c._stwain.IfAutoScroll=m,m}}),l("pageMargin",{get:function(){return c._stwain.ImageMargin},set:function(m){return c._stwain.ImageMargin=m,m}}),l("zoom",{get:function(){return c._stwain.Zoom},set:function(m){return c._stwain.Zoom=m,m}})},e.attachAxViewerFunctions=function(c){c.next=function(){return this._stwain.next()},c.previous=function(){return this._stwain.previous()},c.first=function(){return this._stwain.first()},c.last=function(){return this._stwain.last()},c.gotoPage=function(l){var m=this,I=1*l;return e.isNaN(I)||!e.isNumber(I)?(e.Errors.InvalidIndex(m._stwain),!1):I<0||I>=m._stwain.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(m._stwain),!1):(m._stwain.CurrentImageIndexInBuffer=I,I)},c.setSelectedAreas=function(l){return this._stwain.SetSelectedImageArea(this._stwain.CurrentImageIndexInBuffer,l.left,l.top,l.right,l.bottom)},c.fitWindow=function(l){var m=this;return"height"==l?(m._stwain.IfFitWindow=!0,m._stwain.FitWindowType=w.DWT.EnumDWT_FitWindowType.enumFitWindowHeight):"width"==l?(m._stwain.IfFitWindow=!0,m._stwain.FitWindowType=w.DWT.EnumDWT_FitWindowType.enumFitWindowWidth):(m._stwain.IfFitWindow=!0,m._stwain.FitWindowType=w.DWT.EnumDWT_FitWindowType.enumFitWindow),!0},c.setViewMode=function(l,m){return this._stwain.SetViewMode(l,m)},c.createImageEditor=function(){return this._stwain},c.on=function(l,m){var p,I=this;return""!=(p=I._convertEvtName(l))&&("OnImageAreaSelected"==p?(I.OnImageAreaSelected=function(g,C,_,v,T){m(g,[{x:C,y:_,width:v-C,height:T-_}])},I._stwain.RegisterEvent(p,I.OnImageAreaSelected)):I._stwain.RegisterEvent(p,m))},c.off=function(l,m){var p,I=this;return""!=(p=I._convertEvtName(l))&&("OnImageAreaSelected"==p?I.OnImageAreaSelected?I._stwain.UnregisterEvent(p,I.OnImageAreaSelected):I._stwain.UnregisterEvent(p):I._stwain.UnregisterEvent(p,m))},c.createThumbnailViewer=function(l){var m=this;if(m._thumbnailViewer)e.Errors.ThumbnailViewerExist(m._stwain);else{var I=new e.UI.ThumbnailViewer(m._stwain,l);m._thumbnailViewer=I.getInstance()}return m._thumbnailViewer},c._convertEvtName=function(l){if(!e.isString(l))return"";var m=e.trim(l).toLowerCase();return"toppagechanged"==m?"OnTopImageInTheViewChanged":"click"==m?"OnMouseClick":"dblclick"==m?"OnMouseDoubleClick":"mousemove"==m?"OnMouseMove":"rightclick"==m?"OnMouseRightClick":"wheel"==m?"OnMouseWheel":"keydown"==m?"OnKeyDown":"pageareaselected"==m?"OnImageAreaSelected":"pageareaunselected"==m?"OnImageAreaDeSelected":e.trim(l)}},h.prototype.getInstance=function(){return r?this.fackControl:this};var a={showThumbnail:!1,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:!0,allowPageDragging:!0,allowResizing:!1,pageBackground:"transparent",pageBorder:"1px solid rgb(238, 238, 238)",hoverPageBackground:"rgb(239, 246, 253)",hoverPageBorder:"1px solid rgb(238, 238, 238)",placeholderBackground:"rgb(251, 236, 136)",autoChangeIndex:!1};o.prototype.getInstance=function(){return r?this.fackControl:this},e.attachViewerFunctionsThumbnailUI=function(c){c.show=function(){c._stwain?(c._stwain.getSWebTwain().SetViewMode(-1,-1),c._stwain.getSWebTwain().ShowThumbnail('{"mode":"show"}')):e.Errors.ThumbnailViewerDispose(c._stwain)},c.hide=function(){c._stwain?c._stwain.getSWebTwain().ShowThumbnail('{"mode":"hide"}'):e.Errors.ThumbnailViewerDispose(c._stwain)},c.dispose=function(){c.hide(),c._stwain=null},c.updateViewMode=function(l){if(c._stwain){if(l&&l.columns&&l.rows){if(l.columns<0||l.rows<0)return e.Errors.InvalidPropertyValue(c._stwain),!1;c._stwain.getSWebTwain().ShowThumbnail('{"columns":'+l.columns+',"rows":'+l.rows+"}")}}else e.Errors.ThumbnailViewerDispose(c._stwain)},c.on=function(l,m){var I=l,p=!1;!e.isFunction(m)||("click"==I&&(I="OnMouseClick"),"rightclick"==I&&(I="OnMouseRightClick"),"dblclick"==I&&(I="OnMouseDoubleClick"),"mousemove"==I&&(I="OnMouseMove"),"wheel"==I&&(I="OnMouseWheel"),"keydown"==I&&(I="OnKeyDown"),"toppagechanged"==I&&(I="OnTopImageInTheViewChanged"),"pageareaselected"==I&&(I="OnImageAreaSelected"),"pageareaunselected"==I&&(I="OnImageAreaDeSelected"),"OnMouseClick"==I||"OnMouseDoubleClick"==I||"OnMouseRightClick"==I||"OnMouseMove"==I||"OnMouseWheel"==I||"OnKeyDown"==I||"OnPaintDone"==I||"OnImageAreaDeSelected"==I||"OnTopImageInTheViewChanged"==I?(!e.isFunction(c._stwain["__"+I])&&!e.isFunction(c._stwain["__"+I+"_Thumbnail"])&&(p=!0),c._stwain["__"+I+"_Thumbnail"]=m,p&&c._stwain.getSWebTwain().RegisterEvent(I,function(g,C){return c._stwain.__OnDispatchThumbnailEvt(I,g,C)})):"OnImageAreaSelected"==I&&(!e.isFunction(c._stwain["__"+I])&&!e.isFunction(c._stwain["__"+I+"_Thumbnail"])&&(p=!0),c._stwain["__"+I+"_Thumbnail"]=m,p&&c._stwain.getSWebTwain().RegisterEvent(I,c._stwain._OnImageAreaSelected)))},c.off=function(l,m){c._stwain["__"+l+"_Thumbnail"]=""}},e.attachViewerPropertyThumbnailUI=function(c){var l=function(m,I){m in c||Object.defineProperty(c,m,I)};l("location",{get:function(){return c._settings.location},set:function(m){c._settings.location=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"location":"'+m+'"}')}}),l("size",{get:function(){return c._settings.size},set:function(m){c._settings.size=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"size":"'+m+'"}')}}),l("pageMargin",{get:function(){return c._settings.pageMargin},set:function(m){c._settings.pageMargin=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"pageMargin":"'+m+'"}')}}),l("background",{get:function(){return c._settings.background},set:function(m){c._settings.background=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"background":"'+m+'"}')}}),l("pageBackground",{get:function(){return c._settings.pageBackground},set:function(m){c._settings.pageBackground=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"pageBackground":"'+m+'"}')}}),l("selectedPageBorder",{get:function(){return c._settings.selectedPageBorder},set:function(m){c._settings.selectedPageBorder=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBorder":"'+m+'"}')}}),l("selectedPageBackground",{get:function(){return c._settings.selectedPageBackground},set:function(m){c._settings.selectedPageBackground=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"selectedPageBackground":"'+m+'"}')}}),l("scrollDirection",{get:function(){return c._settings.scrollDirection},set:function(m){c._settings.scrollDirection=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"scrollDirection":"'+m+'"}')}}),l("showPageNumber",{get:function(){return c._settings.showPageNumber},set:function(m){c._settings.showPageNumber=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"showPageNumber":"'+m+'"}')}}),l("border",{get:function(){return c._settings.border},set:function(m){c._settings.border=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"border":"'+m+'"}')}}),l("pageBorder",{get:function(){return c._settings.pageBorder},set:function(m){c._settings.pageBorder=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"pageBorder":"'+m+'"}')}}),l("hoverPageBackground",{get:function(){return c._settings.hoverPageBackground},set:function(m){c._settings.hoverPageBackground=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBackground":"'+m+'"}')}}),l("hoverPageBorder",{get:function(){return c._settings.hoverPageBorder},set:function(m){c._settings.hoverPageBorder=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"hoverPageBorder":"'+m+'"}')}}),l("placeholderBackground",{get:function(){return c._settings.placeholderBackground},set:function(m){c._settings.placeholderBackground=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"placeholderBackground":"'+m+'"}')}}),l("allowKeyboardControl",{get:function(){return c._settings.allowKeyboardControl},set:function(m){c._settings.allowKeyboardControl=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"allowKeyboardControl":"'+m+'"}')}}),l("allowPageDragging",{get:function(){return c._settings.allowPageDragging},set:function(m){c._settings.allowPageDragging=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"allowPageDragging":"'+m+'"}')}}),l("allowResizing",{get:function(){return c._settings.allowResizing},set:function(m){c._settings.allowResizing=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"allowResizing":"'+m+'"}')}}),l("autoChangeIndex",{get:function(){return c._settings.autoChangeIndex},set:function(m){c._settings.autoChangeIndex=m,c._stwain&&c._stwain.getSWebTwain().ShowThumbnail('{"autoChangeIndex":"'+m+'"}')}})},e.UI=e.UI||{},e.UI.DWTAxViewer=h,e.UI.ThumbnailViewer=o}function h(c){var l=this;if(r){var m=document.createElement("div");document.body.appendChild(m),m._stwain=c._fakeControl,l.fackControl=m,e.attachAxViewerPropertyUI(l.fackControl),e.attachAxViewerFunctions(l.fackControl)}else l._stwain=c,e.attachAxViewerPropertyUI(l),e.attachAxViewerFunctions(l);l._thumbnailViewer=null}function o(c,l){var m=this,I=l;if(I){if(I.location)switch(I.location){case"left":default:I.location="horizontal",I.sequence=-1;break;case"right":I.location="horizontal",I.sequence=1;break;case"top":I.location="vertical",I.sequence=-1;break;case"bottom":I.location="vertical",I.sequence=1}else I.location="horizontal",I.sequence=-1;e.isUndefined(I.size)&&(I.size=a.size),e.isUndefined(I.columns)&&(I.columns=a.columns),e.isUndefined(I.rows)&&(I.rows=a.rows),(e.isUndefined(I.scrollDirection)||"horizontal"!=I.scrollDirection)&&(I.scrollDirection=a.scrollDirection),e.isUndefined(I.pageMargin)&&(I.pageMargin=a.pageMargin),e.isUndefined(I.allowKeyboardControl)&&(I.allowKeyboardControl=a.allowKeyboardControl),e.isUndefined(I.allowPageDragging)&&(I.allowPageDragging=a.allowPageDragging),e.isUndefined(I.allowResizing)&&(I.allowResizing=a.allowResizing),e.isUndefined(I.border)&&(I.border=a.border),e.isUndefined(I.pageBackground)&&(I.pageBackground=a.pageBackground),e.isUndefined(I.pageBorder)&&(I.pageBorder=a.pageBorder),e.isUndefined(I.hoverPageBackground)&&(I.hoverPageBackground=a.hoverPageBackground),e.isUndefined(I.hoverPageBorder)&&(I.hoverPageBorder=a.hoverPageBorder),e.isUndefined(I.placeholderBackground)&&(I.placeholderBackground=a.placeholderBackground),e.isUndefined(I.autoChangeIndex)&&(I.autoChangeIndex=a.autoChangeIndex)}else I=a;if(r){var p=document.createElement("div");document.body.appendChild(p),p._stwain=c,p._settings=I,m.fackControl=p,e.attachViewerPropertyThumbnailUI(m.fackControl),e.attachViewerFunctionsThumbnailUI(m.fackControl)}else m._stwain=c,m._settings=I,e.attachViewerPropertyThumbnailUI(m),e.attachViewerFunctionsThumbnailUI(m);c.getSWebTwain().SetViewMode(-1,-1),c.getSWebTwain().ShowThumbnail(JSON.stringify(I))}}),w.Ready(function(e,t){if(e.product.bActiveXEdition){var n=w.navInfo;r.prototype._createControl=function(){var h,u,d=this,s=d._strWidth,i=d._strHeight;e.isString(s)&&(s=s.indexOf("%")>0?"100%":parseInt(s)+2+"px"),e.isString(i)&&(i=i.indexOf("%")>0?"100%":parseInt(i)+2+"px"),(u=w.DWT.ActiveXInstallWithCAB?['<div id="',d._strDWTInnerContainerID,'" style="width:',s,";height:",i,'">','<object id="',d._strObjectName,'" style="width:',d._strWidth,";height:",d._strHeight,';border:1px solid #AAAAAA"',' codebase="',n.bWin64?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",w.DWT.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]:['<div id="',d._strDWTInnerContainerID,'" style="width:',s,";height:",i,'">','<object id="',d._strObjectName,'" style="width:',d._strWidth,";height:",d._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]).push('<div id="',d._strDWTNonInstallInnerContainerID,'" style="width: ',s,';display:none"></div>'),(h=document.getElementById(d._containerID))&&(h.innerHTML=u.join("")),d._fakeControl._objWebTwain=null,d._fakeControl.getSWebTwain=function(){var f=this;return null===f._objWebTwain&&(f._objWebTwain=document.getElementById(d._strObjectName)),f._objWebTwain}},r.prototype.getInstance=function(){return!!this._fakeControl.getSWebTwain()&&this._fakeControl},r.prototype._isMobileMode=function(){return!1},e.detect._controlDetect=function(){var h=e.detect.arySTwains,d=h[0],s=d&&d._fakeControl&&d._fakeControl.getSWebTwain();if(s){var i=w.DWT,f=!1;if(n.bIE?0==s.ErrorCode&&""!=s.GetAddOnVersion("pdf",!n.bOSx64||n.bWOW64?"DynamicPdfCore_"+i.PdfVersion+".dll":"DynamicPdfCorex64_"+i.PdfVersion+".dll")&&(f=!0):0==s.ErrorCode&&(f=!0),f){clearInterval(e.detect._varSeed);var c=function(m,I,p){var g,C;for(g=0;g<h.length;g++)(C=h[g])._fakeControl.getSWebTwain(),e.__innerInitEvents(C._fakeControl,C.__config),C._fakeControl.__OnRefreshUI=C.__config.onRefreshUI||"",e.attachProperty(C._fakeControl),e.attachMethod(C._fakeControl),C._fakeControl._attachEvents(),e.detect.ssl&&(C._fakeControl.IfSSL=!0,C._fakeControl.HTTPPort=443),0==m?(C._fakeControl.GetLicenseInfo(I),C._setConvertMode(C._pdfConvertMode)):(C._fakeControl._blts=!0,""!=I&&""!=p?(C._fakeControl.SetLTSInfo(I,p),C._setConvertMode(C._pdfConvertMode),C._fakeControl.GetLicenseInfo().then(function(v){w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_desktop,v)})):C._fakeControl.__licenseInfo={LTS:!0,Detail:[]},w.DWT.laddDWTObj(C._fakeControl)),e.attachAddon(C._fakeControl),e.isFunction(C.__OnPluginReady)&&C.__OnPluginReady()};if(e.License.isLTS()){var l=w.DWT.li({instanceMode:w.DWT.EnumInstance.dwt_desktop,axInstance:s});if(!w.DWT.lisValidID(l))return void c(1,"","");w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(m){c(1,m.ar,m.cu)},function(m){m&&(w.DWT.lsetException(m.code||m.ltsErrorCode,m.message),w.DWT.OnLicenseException()),c(1,"","")})}else c(0,i.ProductKey,"")}else e.detect.bNoControlEvent||(e.noControl(d),e.detect.bNoControlEvent=!0),e.isFunction(s.__OnPluginNotReady)&&s.__OnPluginNotReady()}else clearInterval(e.detect._varSeed)},e.ie={},e.ie.DynamicWebTwain=function(h){var d=new r(h);return e.detect.arySTwains.push(d),d},e.ie.closeAll=function(){var d,s,i,h=e.detect.arySTwains;for(d=0;d<h.length;d++)(s=h[d])&&s._fakeControl&&(i=s._fakeControl.getSWebTwain())&&0==i.ErrorCode&&i.RemoveAllImages();e.detect.arySTwains=[]},w.DWT.RemoveAllAuthorizations=function(){return!1}}function r(h){var d=this,s=h||{};d._containerID=s.containerID||"dwtcontrolContainer",d._strWidth=s.width||270,d._strHeight=s.height||350,d._errorCode=0,d._errorString="",d.__licenseInfo=!1,e.isString(d._strWidth)&&d._strWidth.indexOf("%")>0||(d._strWidth=[parseInt(d._strWidth),"px"].join("")),e.isString(d._strHeight)&&d._strHeight.indexOf("%")>0||(d._strHeight=[parseInt(d._strHeight),"px"].join("")),d._strObjectName=d._containerID+"_Obj",d.__config=s,d.__OnPluginReady=s.onPluginReady,d.__OnPluginNotReady=s.onPluginNotReady,d.Addon={},d._pdfConvertMode=3,d._pdfRealConvertMode=3,d._strDWTInnerContainerID=d._containerID+"_CID",d._strDWTNonInstallInnerContainerID=d._containerID+"_NonInstallCID";var i=document.createElement("div");if(document.body.appendChild(i),d._fakeControl=i,e.UI.DWTAxViewer){var u=new e.UI.DWTAxViewer(d);i.Viewer=u.getInstance()}d._createControl()}}),w.Ready(function(e,t){if(e.product.bPluginEdition){var s,r=w.navInfo,h=document;navigator,(s=i.prototype).getSWebTwain=function(){return this._objectWebTwain},s._isMobileMode=function(){return!1},s.getInstance=function(){return!!this._objectWebTwain&&this},s._createControl=function(){var f,c,u=this,a=u._strWidth,o=u._strHeight;if(e.isString(a)&&(a=a.indexOf("%")>0?"100%":parseInt(a)+2+"px"),e.isString(o)&&(o=o.indexOf("%")>0?"100%":parseInt(o)+2+"px"),c=['<div id="',u._strDWTInnerContainerID,'" style="width:',a,";height:",o,'">'],r.bIE)w.DWT.ActiveXInstallWithCAB?c.push('<object id="',u._strObjectName,'" style="width:',u._strWidth,";height:",u._strHeight,';border:1px solid #AAAAAA"',' codebase="',r.bWin64?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",w.DWT.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>"):c.push('<object id="',u._strObjectName,'" style="width:',u._strWidth,";height:",u._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>");else{var l=u._strWidth;e.isString(l)&&-1==l.indexOf("%")&&(l=parseInt(l)-2+"px"),c.push('<embed id="',u._strObjectName,'" style="display: inline; width:',l,";height:",u._strHeight,'" type="',e.product.strMIMEType,'"',' pluginspage="',r.bWin?e.product.getMSIPath():e.product.getPKGPath(),'"></embed>')}c.push('</div><div id="',u._strDWTNonInstallInnerContainerID,'" style="width: ',a,';display:none"></div>'),(f=e.get(u._containerID))&&(f.innerHTML=c.join("")),u._objectWebTwain=e.get(u._strObjectName)},s._notAllowedForChrome=function(){if(r.bChrome){var u=this;u.__OnNotAllowedForChrome?u.__OnNotAllowedForChrome(u._strDWTInnerContainerID):(u._createNonAllowedDivPlugin(),e.get(u._strDWTNonInstallInnerContainerID).style.display="inline",e.get(u._strDWTInnerContainerID).style.display="none")}},s._createNonAllowedDivPlugin=function(){var u=this,f=e.get(u._strDWTNonInstallInnerContainerID);if(""==f.innerHTML){var a=u._strHeight;e.isString(a)&&-1==a.indexOf("%")&&(a=parseInt(a)-10+"px");var o=['<div style="display: block; border:1px solid black; width:',u._strWidth,";height:",a,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");f.innerHTML=o;for(var l=0;l<h.links.length;l++)"DWT_CloseNonAllowedDiv"==h.links[l].className&&(h.links[l].onclick=c)}function c(){e.get(u._strDWTNonInstallInnerContainerID).style.display="none",e.get(u._strDWTInnerContainerID).style.display="inline"}},e.detect._controlDetect=function(){var u=e.detect.arySTwains,f=u[0],a=f&&f._objectWebTwain;if(a){var o=w.DWT,c=!1;if(r.bIE?0==a.ErrorCode&&""!=a.GetAddOnVersion("pdf",!r.bOSx64||r.bWOW64?"DynamicPdfCore_"+o.PdfVersion+".dll":"DynamicPdfCorex64_"+o.PdfVersion+".dll")&&(c=!0):0==a.ErrorCode&&(c=!0),c){clearInterval(e.detect._varSeed);var I=function(T,D,P){var E,M;for(E=0;E<u.length;E++)e.attachProperty(M=u[E]),e.attachMethod(M),M._attachEvents(),e.detect.ssl&&(M.IfSSL=!0,M.HTTPPort=443),0==T?(M.GetLicenseInfo(D),M._setConvertMode(M._pdfConvertMode)):(M._blts=!0,""!=D&&""!=P?(M.SetLTSInfo(D,P),M._setConvertMode(M._pdfConvertMode),M.GetLicenseInfo().then(function(O){w.DWT.lcheckLic(w.DWT.EnumInstance.dwt_desktop,O)})):M.__licenseInfo={LTS:!0,Detail:[]},w.DWT.laddDWTObj(M)),e.attachAddon(M),M._objectWebTwain.BrokerProcessType=e.product._iBrokerProcessType,r.bWin||(M._objectWebTwain.ImageCaptureDriverType=e.product._iImageCaptureDriverType),e.isFunction(M.__OnPluginReady)&&M.__OnPluginReady()};if(e.License.isLTS()){var p=w.DWT.li({instanceMode:w.DWT.EnumInstance.dwt_desktop,axInstance:a});if(!w.DWT.lisValidID(p))return void I(1,"","");w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(T){I(1,T.ar,T.cu)},function(T){T&&(w.DWT.lsetException(T.code||T.ltsErrorCode,T.message),w.DWT.OnLicenseException()),I(1,"","")})}else I(0,o.ProductKey,"")}else{var g,C,_;if(r.bIE)e.detect.bNoControlEvent||(e.noControl(f),e.detect.bNoControlEvent=!0);else{var v=!0;for(g=0;g<mimeTypes.length;g++)if(mimeTypes[g].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1)for(_=0;_<u.length;_++)v=!1,(C=u[_])._vPluginExist=!0,0==C._vNotAllowedForChrome&&(C._notAllowedForChrome(),C._vNotAllowedForChrome=!0);v&&!e.detect.bNoControlEvent&&(e.noControl(f),e.detect.bNoControlEvent=!0)}e.isFunction(f.__OnPluginNotReady)&&f.__OnPluginNotReady()}}else clearInterval(e.detect._varSeed)},e.plugin={},e.plugin.DynamicWebTwain=function(u){var f=new i(u);return f._createControl(),e.detect.arySTwains.push(f),f},e.plugin.closeAll=function(){var f,a,o,u=e.detect.arySTwains;for(f=0;f<u.length;f++)(a=u[f])&&a._objectWebTwain&&(o=a._objectWebTwain)&&0==o.ErrorCode&&o.RemoveAllImages();e.detect.arySTwains=[]},w.DWT.RemoveAllAuthorizations=function(){return!1}}function i(u){var f=this,a=u||{};f._containerID=a.containerID||"dwtcontrolContainer",f._strWidth=a.width||270,f._strHeight=a.height||350,e.isString(f._strWidth)&&f._strWidth.indexOf("%")>0||(f._strWidth=[parseInt(f._strWidth),"px"].join("")),e.isString(f._strHeight)&&f._strHeight.indexOf("%")>0||(f._strHeight=[parseInt(f._strHeight),"px"].join("")),f._strObjectName=f._containerID+"_Obj",e.__innerInitEvents(f,a),f.__OnPluginReady=a.onPluginReady,f.__OnPluginNotReady=a.onPluginNotReady,f.__OnRefreshUI=a.onRefreshUI||"",f._objectWebTwain=null,f._strDWTInnerContainerID=f._containerID+"_CID",f._strDWTNonInstallInnerContainerID=f._containerID+"_NonInstallCID",f._vNotAllowedForChrome=!1,f._vPluginExist=!1,f.Addon={},f._pdfConvertMode=3,f._pdfRealConvertMode=3,e.UI.DWTAxViewer&&(f.Viewer=new e.UI.DWTAxViewer(f))}}),function(e,t,n){window.onbeforeunload=function(){w.DWT.Unload(),e.each(w.DWT.globalWS,function(Q){try{Q.close()}catch{}})};var r=w.navInfoSync,h=e,d=w.dcp,s=h.win,i=!0,u=!1,a=w.Lib.timestamp,o={bConnected:!1,_dwtVersionInfoSuccessCallback:function(Q,se,le,pe){if(e.isFunction(pe)){var Ce=le[0],Te=le.length>1?le[1]:"",Be=le.length>2?le[2]:0,xe=le.length>3?le[3]:"",me=le.length>4?le[4]:"";if(""!==Te?(t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(Te,w.DWT.EnumDWT_InitMsg.Error),v(pe,2,t.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)):(t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage("The WebTwain version is: "+Ce,w.DWT.EnumDWT_InitMsg.Info),"64"==Be&&(w.dcp.b64bit=!0),""!=xe&&w.DWT.lsmid(xe),o.bConnected=!0,pe(0,Q,se,Ce)),e.isFunction(w.OnSSLCertInfo)){var Oe=null;""!=me&&(Oe=Date.parse(me+"T00:00:00"),Oe=isNaN(Oe)?null:new Date(Oe)),w.OnSSLCertInfo(Oe)}}},versionInfo:function(Q,se,le){var pe,Ce=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',e.product.getDWTPrefix(),e.product.getServerVersionInfo(),'","parameter":[]}'].join(""),Te=function(){o.bConnected=!1,t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,w.DWT.EnumDWT_InitMsg.NotInstalledError),le&&v(le,2,t.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)};t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.generalMessages.checkingDWTVersion,w.DWT.EnumDWT_InitMsg.Info),pe=function(xe){var me=d._getJSON(xe);me&&"result"in me&&e.isArray(me=me.result)&&me.length>0?setTimeout(function(){o._dwtVersionInfoSuccessCallback(Q,se,me,le)},0):setTimeout(Te,1e3)},w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition?d.postStringDataByWS(d.getWsUrl(Q,se),Ce,pe,Te):e.ajax({method:"POST",url:[o._getPreUrl(Q,se),"fa/VersionInfo?ts=",e.now()].join(""),data:Ce,onSuccess:pe,onError:Te})},_getPreUrl:function(Q,se){return[r.bSSL?"https://":"http://",Q,":",se,"/"].join("")}};e.DynamicWebTwain=u;var l,c=s.document,m=e.each,I="dwt",v=function(Q,se,le,pe){e.isFunction(Q)&&setTimeout(function(){Q(se,le,pe)},10)};function T(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var Q=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(Q instanceof WebAssembly.Module)return new WebAssembly.Instance(Q)instanceof WebAssembly.Instance}}catch{}return!1}e.__innerInitEvents=function(Q,se){se&&m(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync","onKeyDown","onMouseWheel"],function(le){Q["__O"+le.substring(1)]=se[le]||""})},e.replaceControl=function(Q,se){t.ContainerMap[Q]=se},l=function(Q,se,le,pe){var Be,xe,Ce=e.product,Te=h.getNavInfo();if(pe&&pe._customIP&&!e.isLocalIP(pe._host))e.isFunction(w.OnRemoteWebTwainNotFoundCallback)&&w.OnRemoteWebTwainNotFoundCallback(Ce.name,pe._host,pe._port,pe._ssl,e.env.bMobile);else if(Te.bMac)Q&&(e.one(Q).before(e.install._strNonInstallDIV),(Be=e.get(e.install._divDWTNonInstallContainerID))&&(Be.style.width=se,Be.style.height=le),e.show(e.install._divDWTNonInstallContainerID),e.hide(Q)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(w.OnWebTwainNotFoundOnMacCallback)&&(xe=Ce.bHTML5Edition?w.dcp.getDSPath():e.product.getPKGPath(),w.OnWebTwainNotFoundOnMacCallback(Ce.name,xe,Ce.bHTML5Edition,Te.bIE,Te.bSafari,e.detect.ssl,e.env.strIEVersion));else if(Te.bLinux||Te.bArm64||Te.bMips64||Te.bChromeOS||Te.bHarmonyOS){var Me,Oe,ze;Q&&(e.one(Q).before(e.install._strNonInstallDIV),(Be=e.get(e.install._divDWTNonInstallContainerID))&&(Be.style.width=se,Be.style.height=le),e.show(e.install._divDWTNonInstallContainerID),e.hide(Q)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(w.OnWebTwainNotFoundOnLinuxCallback)&&(Te.bArm64||Te.bMips64||Te.bChromeOS||Te.bHarmonyOS?(Me=w.dcp.getDSPath(),ze=Te.bChromeOS?w.DWT.EnumDWT_PlatformType.enumChromeOS:Te.bHarmonyOS?w.DWT.EnumDWT_PlatformType.enumHarmonyOS:w.DWT.EnumDWT_PlatformType.enumEmbed):(Me=w.dcp.getLinuxHTML5DebPath(),Oe=w.dcp.getLinuxHTML5RpmPath(),ze=w.DWT.EnumDWT_PlatformType.enumLinux),w.OnWebTwainNotFoundOnLinuxCallback(Ce.name,Me,Oe,Ce.bHTML5Edition,Te.bIE,Te.bSafari,e.detect.ssl,e.env.strIEVersion,ze))}else(Te.bChrome||Te.bSafari||Te.bFirefox||Te.bOpera||t.IfUseActiveXForIE10Plus==u||!t.ActiveXInstallWithCAB&&Te.bIE)&&(Q&&(e.one(Q).before(e.install._strNonInstallDIV),(Be=e.get(e.install._divDWTNonInstallContainerID))&&(Be.style.width=se,Be.style.height=le),e.show(e.install._divDWTNonInstallContainerID),e.hide(Q)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),e.isFunction(w.OnWebTwainNotFoundOnWindowsCallback)&&(xe="",xe=Te.bIE||Ce.bHTML5Edition?w.dcp.getDSPath():Ce.getMSIPath(),w.OnWebTwainNotFoundOnWindowsCallback(Ce.name,xe,Ce.bHTML5Edition,Te.bIE,Te.bSafari,e.detect.ssl,e.env.strIEVersion)))},e.detect.getVersionArray=function(Q){var se=Q.toLowerCase().replace(e.product.name.toLowerCase()+" ","");return(se=e.replaceAll(se,"[.]",",")).split(",")},e.detect.isDWTVersionLatest=function(Q){if(e.isUndefined(Q))return u;var pe,Ce,se=Q.toString().toLowerCase(),le=e.detect.getVersionArray(se);pe=w.navInfoSync.bIE&&e.product.bActiveXEdition?t.ActiveXVersion:e.product.getServerVersionInfo(!0),Ce=(pe=e.replaceAll(String(pe),"[.]",",")).split(",");for(var Te=le.length>Ce.length?le.length:Ce.length,Be=0;Be<Te;Be++){if(null==le[Be]&&(le[Be]=0),null==Ce[Be]&&(Ce[Be]=0),parseInt(le[Be])<parseInt(Ce[Be]))return u;if(parseInt(le[Be])>parseInt(Ce[Be]))return i}return i};var P=function(Q){if(!e.detect.bNeedUpgradeEvent&&!e.detect.isDWTVersionLatest(Q.VersionInfo)){if(e.detect.bNeedUpgradeEvent=i,!t.UseDefaultInstallUI&&e.isFunction(t.OnWebTwainNeedUpgrade))return void t.OnWebTwainNeedUpgrade();if(Q&&Q._customIP&&!e.isLocalIP(Q._host))return void(e.isFunction(w.OnRemoteWebTwainNeedUpgradeCallback)&&w.OnRemoteWebTwainNeedUpgradeCallback(e.product.name,Q._host,Q._port,Q._ssl));var le;(e.product.bHTML5Edition&&Q._isBindViewer()||!e.product.bHTML5Edition)&&(e.product.bHTML5Edition?e.isString(le=Q._containerElement)&&(le=e.get(le)):le=e.get(Q._containerID),le&&(e.one(le).before(e.install._strNonInstallDIV),e.show(e.install._divDWTNonInstallContainerID),e.hide(le)),""!=e.install._divDWTemessageContainer&&e.hide(e.install._divDWTemessageContainer),function(Q,se){var le=h.getNavInfo();if(e.isFunction(w.OnWebTwainNeedUpgradeCallback)){var Ce,Te,Be,xe,pe={};if(le.bWin){if(le.bIE)Te=w.dcp.getDSPath();else{var me=e.product;Te=me.bHTML5Edition?w.dcp.getDSPath():me.getMSIPath()}Ce=w.DWT.EnumDWT_PlatformType.enumWindow}else le.bArm64||le.bMips64||le.bChromeOS||le.bHarmonyOS?(Te=Be=w.dcp.getDSPath(),pe.deb=Be,Ce=le.bChromeOS?w.DWT.EnumDWT_PlatformType.enumChromeOS:le.bHarmonyOS?w.DWT.EnumDWT_PlatformType.enumHarmonyOS:w.DWT.EnumDWT_PlatformType.enumEmbed):le.bLinux?(Be=w.dcp.getLinuxHTML5DebPath(),xe=w.dcp.getLinuxHTML5RpmPath(),Te=Be,pe.deb=Be,pe.rpm=xe,Ce=w.DWT.EnumDWT_PlatformType.enumLinux):(Te=e.product.bHTML5Edition?w.dcp.getDSPath():e.product.getPKGPath(),Ce=w.DWT.EnumDWT_PlatformType.enumMac);pe.default=Te;var Me=e.one(".dynamsoft-dialog-license");Me&&Me.getEL()&&(Me.getEL().style.display="none"),e.detect.needUpgrade=i,w.OnWebTwainNeedUpgradeCallback(e.product.name,pe,e.product.bHTML5Edition,Ce,le.bIE,le.bSafari,e.detect.ssl,e.env.strIEVersion,e.detect.bPromptJSOrServerOutdated,Q,se)}}())}},M=function(Q){var pe,Ce,Te,Be,me,se=t.Containers,le=h.getNavInfo(),Me=e.Promise.resolve(0),Oe=w.DWT.licenseException;if(se.length>0){if(0==Oe.code?s.DCP_DWT_OnClickCloseInstall(!1,!0):console&&console.error&&console.error(Oe.message),e.isUndefined(Q))for(Ce=0;Ce<se.length;Ce++)if(e.product.bHTML5Edition){if(R(Te=se[Ce].WebTwainId)&&(me=t.ContainerMap[Te]))break}else{if(se[Ce].Container?Be=se[Ce].Container:se[Ce].ContainerId&&(Be=e.get(se[Ce].ContainerId)),!F(Be)||!Be.id)continue;if((me=t.ContainerMap[Be.id])||(me=t.ContainerMap[Te=se[Ce].WebTwainId]))break}else me=Q;me&&(e.product.bHTML5Edition?me._bLocalService&&(Me=me._innerFunRawV2("LogLevel").then(function(){P(me)},function(){-2207==me.ErrorCode&&(!t.UseDefaultInstallUI&&e.isFunction(t.OnWebTwainNeedUpgradeWebJavascript)?t.OnWebTwainNeedUpgradeWebJavascript(me.ErrorString):e.detect.bPromptJSOrServerOutdated||(e.detect.bPromptJSOrServerOutdated=i)),P(me)})):P(me))}var ze=[],Ze=!1;for(e.License.isLTS()&&e.isNumber(Oe.code)&&0!==Oe.code&&!0===Oe.fromLTS&&(Ze=!0),Ce=0;Ce<se.length;Ce++)e.product.bHTML5Edition?Te=se[Ce].WebTwainId:(pe=t.ContainerMap[Te=se[Ce].ContainerId])||(Te=se[Ce].WebTwainId),(pe=t.ContainerMap[Te])&&(Ze?e.hide(e.product.bHTML5Edition?pe._containerElement:pe._containerID):e.product.bHTML5Edition?(pe._isBindViewer()&&(pe.Width<=0||pe.Height<=0)&&(pe.Width<=0&&(pe.Width=270),pe.Height<=0&&(pe.Height=350)),pe._bLocalService?ze.push(O(pe)):e.License.checkProductKey(pe,{Core:!0})):(pe.IfAllowLocalCache=!0,pe.IfShowFileDialog=!0,pe.IfDisableSourceAfterAcquire=!0,pe.BrokerProcessType=e.product._iBrokerProcessType,0==Ce&&(e.License.checkProductKey(pe,{Core:!0})||e.License.checkProductKey(pe,{Webcam:!0},!0)||e.License.checkProductKey(pe,{Core:!0},!1,!0)),le.bWin||(pe.ImageCaptureDriverType=e.product._iImageCaptureDriverType))),pe=null,ze.length>0&&(Me=Me.then(function(){return w.Lib.Promise.all(ze)}));se=null;var ot=w.initOrder;ot[0]==I&&ot.splice(0,1),Ze?(w.DWT.ContainerMap={},e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0)):Me=Me.then(function(){w.Lib.detect.bAutoLoadDone=!0,e.isFunction(t.OnWebTwainReady)?t.OnWebTwainReady():e.isFunction(s.Dynamsoft_OnReady)&&s.Dynamsoft_OnReady()},function(ve){console&&console.error&&console.error(ve)})},O=function(Q){return e.showLoadingMsg(-1,"",w.MSG.Init_ConfiguringDWT),Q._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var se=h.getNavInfo(),le=w.DWT.EnumDWT_Driver.TWAIN,Ce=!1,Te=!1;Q._bRemoteMode?Q.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumWindow||(Q.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumLinux?Te=!0:Q.__serverPlatform==w.DWT.EnumDWT_PlatformType.enumMac&&(Ce=!0)):(Ce=se.bMac,Te=se.bLinux),Ce?le=w.DWT.EnumDWT_Driver.TWAIN_AND_ICA:Te&&(le=w.DWT.EnumDWT_Driver.SANE),Q._driverType=le}).then(function(){e.License.checkProductKey(Q,{Core:!0})})},R=function(Q){return""==Q||!h.isString(Q)&&!h.isNumber(Q)?u:i},F=function(Q){return Q&&!e.isString(Q)?i:u},B=function(Q){var se;return Q.Container?se=Q.Container.id:Q.ContainerId&&(se=Q.ContainerId),F(e.get(se))?(e.isString(Q.WebTwainId)?t.ContainerMap[Q.WebTwainId]:t.ContainerMap[se])?u:i:u},b=function(){!e.detect.StartWSTimeoutId&&0==e.detect.arySTwains.length&&(e.detect.StartWSTimeoutId=setTimeout(function(){e.detect.StartWSTimeoutId=u,e.startWS()},100))};e.detect.__WebTwainMain=function(Q,se,le){var xe,me,Me,Oe,pe={id:Q.WebTwainId,width:Q.Width,height:Q.Height};if(Q.Container?(pe.container=Q.Container,pe.containerID=Q.Container.id):Q.ContainerId&&(pe.container=e.get(Q.ContainerId),pe.containerID=Q.ContainerId),R(pe.id)||(pe.id=F(e.get(pe.containerID))?pe.containerID:pe.containerID="dwtcontrolContainer"),t.UseDefaultInstallUI?pe.onNoControl=l:(pe.tAllowedForChrome=t.OnWebTwainOldPluginNotAllowed,pe.onNoControl=t.OnWebTwainNotFound),function(Q){var se=Q||{};se.basePath&&(e.env.basePath=se.basePath),se.pathType&&(e.env.pathType=se.pathType),e.isUndefined(se.bDiscardBlankImage)||(e.config.bDiscardBlankImage=se.bDiscardBlankImage),se.msgPrefix&&(e.config.msgPrefix=se.msgPrefix),se.msgSuffix&&(e.config.msgSuffix=se.msgSuffix),se.detectType&&(e.detect.detectType=se.detectType),se.tryTimes&&(e.detect.tryTimes=se.tryTimes),se.onReady&&(t.OnWebTwainReady=se.onReady),se.onNotAllowedForChrome&&(e.detect.onNotAllowedForChrome=se.onNotAllowedForChrome),se.onNoControl&&(e.detect.onNoControl=se.onNoControl)}(pe),e.product.bHTML5Edition){var Ce,Te,Be;for(h.mix(pe,Q.bLocalService?{port:Q.port,HTTPPort:e.detect.ssl?443:80,bLocalService:!0}:{bLocalService:!1}),pe.onReady=function(Ze){if(e.replaceControl(pe.id,Ze),e.isFunction(se)){var ot={stwain:Ze};le&&e.mix(ot,le),se(ot)}},Te=0;Te<e.detect.arySTwains.length;Te++)pe.id==(Be=e.detect.arySTwains[Te])._id&&(pe.id=pe.id+"_"+h.getRandom()),Be._containerElement&&(pe.container==Be._containerElement||pe.containerID==Be._containerElement.id)&&(pe.containerID="");return pe.bNoViewer=!F(e.get(pe.containerID)),Ce=new e.html5.STwain(pe),e.detect.arySTwains.push(Ce),e.detect.bFirst&&e._init(pe),e.detect.bFirst=!1,Ce}for(pe.onPluginReady=function(){e.replaceControl(pe.id,xe.getInstance())},pe.onPluginNotReady=function(){e.isFunction(s.Dynamsoft_OnNotReady)&&s.Dynamsoft_OnNotReady()},xe=new e.DynamicWebTwain(pe),Me=0,me=(Oe=t.Containers).length-1;me>=0;me--){var ze=Oe[me];ze.Container?F(ze.Container)&&Me++:ze.ContainerId&&F(e.get(ze.ContainerId))&&Me++}return e.detect.arySTwains.length==Me&&(e.detect._varSeed=setInterval(e.detect._controlDetect,200)),xe},t.Unload=function(){var Q,se,le,pe,Ce,Te,Be=[t.Containers,t.DynamicContainers];for(w.DWT.lunload(),e.closeAll&&e.closeAll(),Te=t.ContainerMap,se=0;se<2;se++)if(Q=Be[se])if(e.product.bHTML5Edition)for(le=0;le<Q.length;le++)(Ce=Q[le].WebTwainId)&&Ce in Te&&(pe=Te[Ce])&&(pe.__unload(),delete Te[Ce]);else for(le=Q.length-1;le>=0;le--)Q[le].Container?Ce=(pe=Q[le].Container).id:(Ce=Q[le].ContainerId)&&(pe=e.get(Ce)),pe&&(Ce in Te&&Te[Ce]&&delete Te[Ce],pe.innerHTML="");for(e.page.bUnload=i,e.page.OnUnload&&e.page.OnUnload(),t.initQueue.splice(0),le=0;le<w.unloadQueue.length;le++){var xe=w.unloadQueue[le];e.isFunction(xe)&&xe()}w.unloadQueue.splice(0),t.DynamicContainers.splice(0),e.detect.arySTwains.splice(0),e.detect.arySTwainsByIP.splice(0);try{e.closeLoadingMsg(),w.DWT.CloseDialog(),e._zdgb_xkz_dhk(),e.closeProgress(""),e.hideMask()}catch{}return e.MobileFuns?e.MobileFuns.unloadWasm():e.Promise.resolve()};var N=function(){var le,Q=t.Containers;for(le=0;le<Q.length;le++){var Ce;if(F(e.get(Q[le].ContainerId))&&(Ce=Q[le].ContainerId,R(Q[le].WebTwainId)&&(Ce=Q[le].WebTwainId)),Ce&&!t.ContainerMap[Ce])return void setTimeout(N,200)}e.closeLoadingMsg(),Q=null,M()},Y=function(Q){if(Q&&"readyObj"in Q){var se=Q.readyObj;if(se){var le=Q.stwain,pe=se.totalCount;return se.readyCount=se.readyCount+1,void(se.readyCount>=pe&&M(le))}}M(Q)},ne=function(Q){e.detect.urls.splice(0),e.detect.urls.push({port:Q,ssl:r.bSSL}),e.detect.ports=[{port:Q,ssl:r.bSSL}],e.detect.cUrlIndex=0,r.bSSL?w.DWT.SSLPort=Q:w.DWT.Port=Q},Ie=function(Q,se,le){var Ce,Te,pe=t.Containers;if(e.config.usingMainMode)e.closeLoadingMsg();else{if(!pe||0===pe.length)return e.closeLoadingMsg(),void e.log("DEnv.Containers was not set.");d.bEnhancedMode&&(e.isString(Q)&&""!=Q&&(e.product.host=Q),ne(se)),b();var Be={totalCount:pe.length,readyCount:0};for(Ce=0;Ce<pe.length;Ce++)F(e.get((Te=pe[Ce]).ContainerId))||(Te.bNoViewer=!0),le?(Te.bLocalService=!1,Te.ip="",Te.port=0):(Te.bLocalService=!0,d.bEnhancedMode&&(Te.port=se)),e.detect.__WebTwainMain(Te,Y,{readyObj:Be})}},ce=function(Q){var le=Q.bNoViewer,pe=Q.id,Ce=Q.container,Te=Q.containerID,Be=Q.host,xe=Q.port,me=Be&&xe&&xe>0?{host:Be,port:xe}:u,Me=Q.asyncSuccessFunc,Oe=Q.asyncFailureFunc;if(e.detect.onNoControl||(e.detect.onNoControl=l),Q.bNoViewer||e.isString(Te)&&""!=Te&&(Ce||e.get(Te))){if(t.Containers&&!le){var ze,Ze=t.Containers;for(ze=0;ze<Ze.length;ze++)if(Ze[ze].ContainerId==Te)return e.closeLoadingMsg(),e.isFunction(Oe)&&e._safePromptCustomMsg(function(){Oe(t.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)}),u}Ce||(Ce=e.get(Te))}else le=!0,Te=0;if(t.ContainerMap[pe])return e.closeLoadingMsg(),e.isFunction(Oe)&&Oe(t.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),u;if(!Q.bLocalService&&!w.WasmEnv)return e.closeLoadingMsg(),e._safePromptCustomMsg(function(){Oe(t.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)}),u;me?!e.detect.StartWSByIPTimeoutId&&0==e.detect.arySTwainsByIP.length&&(e.detect.StartWSByIPTimeoutId=setTimeout(function(){e.detect.StartWSByIPTimeoutId=u,e.startWSByIP()},100)):b();var ot={id:pe,container:Ce,customIP:!1,width:le?0:300,height:le?0:300,bNoViewer:le,bLocalService:Q.bLocalService};return le||(Ce.style.width&&(ot.width=Ce.style.width),Ce.style.height&&(ot.height=Ce.style.height)),me&&(ot.customIP=!0,ot.host=me.host,ot.port=me.port),ot.onReady=function(ve){if(s.DCP_DWT_OnClickCloseInstall(!1,!0),!ve)return e.closeLoadingMsg(),e.isFunction(Oe)&&Oe(t.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer),!1;if(t.ContainerMap[ve._id])return e.closeLoadingMsg(),ve.dispose(),e.isFunction(Oe)&&Oe(t.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WebTwainIdDuplicated),!1;e.showLoadingMsg(-1,"",w.MSG.Init_ConfiguringDWT);var Fe={};return Fe.WebTwainId=ve._id,ve._containerElement&&ve._containerElement.id&&(Fe.ContainerId=ve._containerElement.id),t.DynamicContainers.push(Fe),t.ContainerMap[ve._id]=ve,!t.IfDisableDefaultSettings&&ve._bLocalService?O(ve).then(function(){e.closeLoadingMsg(),e.isFunction(Me)&&Me(ve),P(ve)},function(){e.closeLoadingMsg(),-2207==ve.ErrorCode&&(e.detect.bPromptJSOrServerOutdated||(e.detect.bPromptJSOrServerOutdated=i)),P(ve)}):(e.closeLoadingMsg(),e.isFunction(Me)&&Me(ve)),!0},new e.html5.CreateDWTObject(ot)};function q(){w.WasmEnv&&(w.WasmEnv.useFastcompEdition=w.Lib.env.isWasmUseFastcomp(),w.DWT.WasmConfig&&(w.DWT.WasmConfig.fetchOptions&&(w.WasmEnv.fetchOptions=w.DWT.WasmConfig.fetchOptions),w.DWT.WasmConfig.maxHeapSize&&(w.WasmEnv.maxHeapSize=w.DWT.WasmConfig.maxHeapSize)))}function he(){w.DWT.ShowMessage(w.MSG.Err_BrowserNotSupportWasm,{width:510,headerStyle:2})}function V(Q,se,le){if(!e.product.bHTML5Edition)return e._safePromptCustomMsg(function(){le&&le(t.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),u;if(!1===Q.UseLocalService&&!T())return e.closeLoadingMsg(),he(),le&&le(w.MSG.Err_BrowserNotSupportWasm),u;J();var me,Me,pe={},Ce=Q.WebTwainId,Te=Q.Host,Be=Q.Port,xe=Q.PortSSL;if(!t._srcUseLocalService&&Q.UseLocalService&&(e.detect.dcpStatus=0,t._srcUseLocalService=!0),Q.Container?(pe.container=Q.Container,pe.bNoViewer=!1,((me=pe.container.id)===n||null===me||""===me)&&(pe.container.id=["dwt_",h.getRandom()].join("")),pe.containerID=pe.container.id,(Ce===n||null===Ce||""===Ce)&&(pe.id=pe.container.id)):Ce===n||null===Ce||""===Ce?(pe.id=["dwt_",h.getRandom()].join(""),pe.bNoViewer=!0):h.get(Ce)?(pe.id=Ce,pe.containerID=Ce,pe.bNoViewer=!1):(pe.id=Ce,pe.bNoViewer=!0),pe.UseLocalService=Q.UseLocalService,0==pe.UseLocalService?(e.detect.bNeedWasm=!0,pe.host="",pe.port=0):((!e.isString(Te)||""==Te)&&(Te=w.dcp.host),pe.host=Te,r.bSSL?(xe||(xe=w.DWT.SSLPort?w.DWT.SSLPort:18623),pe.port=xe):(Be||(Be=w.DWT.Port?w.DWT.Port:18622),pe.port=Be)),se&&(pe.asyncSuccessFunc=se),le&&(pe.asyncFailureFunc=le),e.detect.wasmScriptLoaded&&w.WasmEnv&&!w.WasmEnv.wasmLoad)if(q(),e.License.isLTS())Me=w.DWT.lglic(w.DWT.EnumInstance.dwt_browser).then(function(Oe){try{w.WasmEnv.load(Oe.ar,!0,Oe.cu),w.WasmEnv.wasmLoad=!0}catch(ze){ze&&console.log(ze.message)}},function(Oe){Oe&&(w.DWT.lsetException(Oe.code||Oe.ltsErrorCode,Oe.message),e.closeLoadingMsg(),w.DWT.OnLicenseException())});else{try{w.WasmEnv.load(t.ProductKey),w.WasmEnv.wasmLoad=!0}catch(Oe){Oe&&console.log(Oe.message)}Me=Promise.resolve()}else Me=Promise.resolve();return Me.then(function(){return e.waitForScripts()}).then(function(){return new e.Promise(U)}).then(function(){G({callback:function(){pe.bLocalService=!0,ce(pe)},docViewCallback:function(){pe.bLocalService=!1,ce(pe)},host:pe.host,port:pe.port,UseLocalService:pe.UseLocalService,dcpFailedCallback:function(Oe){pe.asyncFailureFunc&&pe.asyncFailureFunc(Oe),e.closeLoadingMsg()}})},function(){e.closeLoadingMsg()}),i}t.Load=function(){e.openLoadingMsg(),Z(!0),e.waitForScripts().then(function(){return w.DWT.Unload()}).then(function(){if(e.openLoadingMsg(),w.Lib.detect.bNeedWasm=!1,w.Lib.detect.wasmScriptLoaded&&w.WasmEnv&&!w.WasmEnv.wasmLoad){if(q(),w.Lib.License.isLTS())return void w.DWT.lglic(w.DWT.EnumInstance.dwt_browser).then(function(Q){try{w.WasmEnv.load(Q.ar,!0,Q.cu),w.WasmEnv.wasmLoad=!0}catch(se){se&&console.log(se.message)}v(k)},function(Q){Q&&(w.DWT.lsetException(Q.code||Q.ltsErrorCode,Q.message),w.Lib.closeLoadingMsg(),w.DWT.OnLicenseException())});try{w.WasmEnv.load(t.ProductKey),w.WasmEnv.wasmLoad=!0}catch(Q){Q&&console.log(Q.message)}}v(k)},function(){e.closeLoadingMsg()})},t.CheckConnectToTheService=function(Q,se,le,pe){if(e.detect.scriptLoaded)if(e.product.bHTML5Edition){var Ce=0,Te=Q,Be=se,xe=le,me=pe;if(e.isFunction(Te)&&e.isFunction(Be)&&(xe=Te,me=Be,Te=null,Be=null),Te||(Te=w.dcp.host),!Be)for(Ce=0;Ce<w.Lib.detect.ports.length;Ce++)if(w.navInfoSync.bSSL&&w.Lib.detect.ports[Ce].ssl||!w.navInfoSync.bSSL&&!w.Lib.detect.ports[Ce].ssl){Be=w.Lib.detect.ports[Ce].port;break}o.versionInfo(Te,Be,function(Me,Oe,ze,Ze){0===Me&&Ze&&Ze.length>0&&te(Ze,e.product.getServerVersionInfo(!0))?e.isFunction(xe)&&xe(Oe,ze):e.isFunction(me)&&me()},me)}else e.isFunction(pe)&&pe();else setTimeout(function(){t.CheckConnectToTheService(Q,se,le,pe)},500)},t.ConnectToTheService=t.Load,t.CreateDWTObject=function(Q,se,le,pe,Ce,Te){var me,Be=Ce,xe=Te;if(e.openLoadingMsg(),w.Lib.detect.bAutoLoadDone){if(Z(!0),arguments.length<=3?(Be=se,xe=le,me={WebTwainId:Q}):me={WebTwainId:Q,Host:se,Port:le,PortSSL:pe},!e.product.bHTML5Edition)return e.isFunction(xe)&&e._safePromptCustomMsg(function(){xe(t.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)}),u;var Me=Q;if(e.isShadowRoot(Me)){var Oe=document.createElement("div");Me.appendChild(Oe),Me=Oe}if(e.isDOM(Me)){var ze=e.getShadowRoot(Me);if(ze){var Ze=document.createElement("style");Ze.innerHTML=['@import url("',w.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",a,'")'].join(""),ze.appendChild(Ze)}me.Container=Me,(!Me.id||""==Me.id)&&(Me.id=["dwt_",e.getRandom()].join("")),me.WebTwainId=Me.id}else{if(!e.isString(Q))return e.isFunction(xe)&&xe(e.Errors.container_id_not_string()),u;if(!e.get(Q))return e.isFunction(xe)&&xe(e.Errors.container_id_not_exist(Q)),u}return e.isUndefined(me.UseLocalService)&&(me.UseLocalService=e.isUndefined(t.UseLocalService)?!e.env.bMobile:t.UseLocalService),V(me,Be,xe)}w.Lib.domReady(function(){var ot=w.DWT.Containers;e.isArray(ot)&&ot.length>0&&w.DWT.AutoLoad||Z(!0),setTimeout(function(){t.CreateDWTObject(Q,se,le,pe,Ce,Te)},100)})},t.CreateDWTObjectEx=function(Q,se,le){var pe=Q.Container;if(e.openLoadingMsg(),w.Lib.detect.bAutoLoadDone){if(Z(!0),e.isShadowRoot(pe)){var Ce=document.createElement("div");pe.appendChild(Ce),pe=Ce}if(e.isDOM(pe)){var Te=e.getShadowRoot(pe);if(Te){var Be=document.createElement("style");Be.innerHTML=['@import url("',w.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",a,'")'].join(""),Te.appendChild(Be)}Te==pe&&(pe=document.createElement("div"),Te.appendChild(pe),Q.Container=pe),(!pe.id||""==pe.id)&&(pe.id=["dwt_",e.getRandom()].join("")),e.isString(Q.WebTwainId)||(Q.WebTwainId=pe.id)}else if(!e.isString(Q.WebTwainId))return le&&le(e.Errors.webtwain_id_not_string()),u;return e.isUndefined(Q.UseLocalService)&&(Q.UseLocalService=e.isUndefined(t.UseLocalService)?!e.env.bMobile:t.UseLocalService),V(Q,se,le)}w.Lib.domReady(function(){var xe=w.DWT.Containers;e.isArray(xe)&&xe.length>0&&w.DWT.AutoLoad||Z(!0),setTimeout(function(){t.CreateDWTObjectEx(Q,se,le)},100)})};var J=function(){for(var Q=w.initOrder,se=u,le=0;le<Q.length;le++)if(Q[le]==I){se=i;break}se||Q.push(I)},te=function(Q,se){var le=Q.split(","),pe=se.split(",");return le.length>3&&e.trim(le[0])==pe[0]&&(e.trim(le[1])>pe[1]||e.trim(le[1])==pe[1]&&e.trim(le[2])>pe[2]||e.trim(le[1])==pe[1]&&e.trim(le[2])==pe[2]&&parseInt(e.trim(le[3]))>=parseInt(pe[3]))},oe=function(Q,se){e.isLocalIP(Q)&&(e.LS.item("DWT_port",se),e.LS.item("DWT_ssl",r.bSSL?"true":"false"))},ge=function(Q,se,le){var pe=function(Q){var se,le="",pe=Q,Ce="",Te=h.getNavInfo();return se=Te.bMac?"mac/MacDWT_":Te.bLinux?"linux/LinuxDWT_":"win/WinDWT_",r.bFileSystem||(le="?t="+e.getRandom()),pe.length>0&&"/"!=pe[pe.length-1]&&(pe+="/"),Te.bWin&&d.b64bit&&(Ce="_x64"),[pe,"dist/",se,e.product.getServerVersionInfo(),Ce,".zip",le].join("")}(t.ResourcesPath),Te=function(xe){if(e.closeLoadingMsg(),t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED,w.DWT.EnumDWT_InitMsg.DownloadError),e.isFunction(w.OnWebTWAINDllDownloadFailure)){var Oe={};404==xe.httpCode?(e.Errors.WebTwainModuleNotExist(Oe),i):(e.Errors.WebTwainModuleDownloadFailure(Oe),u),w.OnWebTWAINDllDownloadFailure(e.product.name,Oe._errorCode,Oe._errorString)}e.detect.dcpStatus=3,e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback()};t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.generalMessages.downloadingDWTModule,w.DWT.EnumDWT_InitMsg.Info),e.fetch(pe,{mode:"cors",dataType:"arraybuffer"}).then(function(xe){d.loadZip(xe,0,function(){var Me=h.getNavInfo();if(e.closeLoadingMsg(),e.isFunction(w.OnWebTWAINDllDownloadSuccessful)&&w.OnWebTWAINDllDownloadSuccessful(),t.OnWebTwainInitMessage){if(r.bSSL&&Me.bFirefox)return void t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.generalMessages.refreshNeeded,w.DWT.EnumDWT_InitMsg.DownloadNotRestartError);t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded,w.DWT.EnumDWT_InitMsg.Info)}setTimeout(se,3e3)},Te)},Te)},Re=function(Q,se,le){var me,Be=Q.host,xe=Q.port;if(!1===Q.UseLocalService)return e.showLoadingMsg(-1,"",w.MSG.Init_CreatingDWT),e.detect.dcpStatus=2,e.product.host="",oe("",0),void v(Q.docViewCallback);e.showLoadingMsg(-1,"",w.MSG.Init_CheckDWT),me=le>0?le+1:1,xe||e.each(e.detect.ports,function(Me){r.bSSL?Me.ssl&&(xe=Me.port):Me.ssl||(xe=Me.port)}),e.showLoadingMsg(-1,"",w.MSG.Init_CheckDWTVersion),o.versionInfo(Be,xe,function(Me,Oe,ze,Ze){if(0===Me&&Ze&&Ze.length>0&&te(Ze,e.product.getServerVersionInfo(!0)))return e.detect.dcpStatus=2,e.product.host=Oe,oe(Oe,ze),e.showLoadingMsg(-1,"",w.MSG.Init_CreatingDWT),void(e.isFunction(Q.callback)&&Q.callback(Oe,ze));if(se){if(me>3)return e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback({code:Me,message:Oe}));setTimeout(function(){Re(Q,i,me)},1e3)}else{if(!t.IfInstallDWTModuleWithZIP)return e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback({code:Me,message:Oe}));ge(Q,function(){Re(Q,i,me)})}})},G=function(Q){var se=w.initOrder,le=!1;if(se.length>0&&se[0]===I){var pe=function(Oe){t.OnWebTwainInitMessage&&t.OnWebTwainInitMessage(t.CustomizableDisplayInfo.generalMessages.downloadNeeded,w.DWT.EnumDWT_InitMsg.Info),e.isLocalIP(Q.host)?l():e.isFunction(w.OnRemoteWebTwainNotFoundCallback)&&w.OnRemoteWebTwainNotFoundCallback(e.product.name,Q.host,Q.port,r.bSSL,e.env.bMobile),e.isFunction(Q.dcpFailedCallback)&&(Q.dcpFailedCallback(Oe),w.DWT.ConnectToTheService=function(){G(Q)})};if(!t.IfCheckDCP||0==Q.UseLocalService)return Q.dwtFailedCallback||(Q.dwtFailedCallback=pe),void Re(Q,u,0);var Me=function(Oe){var ze=1;if(h.getNavInfo().bWin&&(ze=Oe>0?Oe+1:1)>3)return Me=null,e.closeLoadingMsg(),e.detect.dcpStatus=3,void(e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback());if(!le){if(Q.dwtFailedCallback||(Q.dwtFailedCallback=function(){var Je,we,Ne=h.getNavInfo();e.closeLoadingMsg(),e.isFunction(w.OnWebTWAINModuleDownloadManually)&&(Ne.bLinux?(Je=w.DWT.EnumDWT_PlatformType.enumLinux,we={default:w.dcp.getLinuxHTML5DebPath(),deb:w.dcp.getLinuxHTML5DebPath(),rpm:w.dcp.getLinuxHTML5RpmPath()}):Ne.bMac?(Je=w.DWT.EnumDWT_PlatformType.enumMac,we={default:w.dcp.getDSPath()}):(Je=w.DWT.EnumDWT_PlatformType.enumWindow,we={default:w.dcp.getDSPath()}),w.OnWebTWAINModuleDownloadManually(we,Je,Ne.bIE,Ne.bSafari,e.detect.ssl,e.env.strIEVersion))}),d.bEnhancedMode){var ot=0,ve=function(Ne){if(e.isArray(Ne)&&Ne.length>1){e.closeLoadingMsg();var we,Ae,Je=Ne[1];if(Je&&(d.currentUserPorts=Je,Je.dwt))return Ae=Je.dwt.sslPort,0==(we=Je.dwt.port)||0==Ae?w.dcp.bEnhancedMode?(setTimeout(function(){d.getPorts(d.strSID,ve,Fe)},800),!0):++ot>5?(Me(ze),!1):(setTimeout(function(){d.getPorts(d.strSID,ve,Fe)},300),!0):(Q.port=r.bSSL?Ae:we,ne(Q.port),Re(Q,u,0),!0)}return t.IfInstallDWTModuleWithZIP?(ge(Q,function(){Me(ze)}),!0):(e.detect.dcpStatus=3,void(e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback()))},Fe=function(){return e.closeLoadingMsg(),t.IfInstallDWTModuleWithZIP?(ge(Q,function(){Me(ze)}),!0):(e.detect.dcpStatus=3,void(e.isFunction(Q.dwtFailedCallback)&&Q.dwtFailedCallback()))};return d.getPorts(d.strSID,ve,Fe),!0}return Me=null,Re(Q,u,0),!0}var Ve=e.install._dlgInstall,Ye=500;(!Ve||!Ve.open)&&(le=!1,Ye=0),setTimeout(Me,Ye)};w.managerEnv.IfUpdateService=w.DWT.IfUpdateService,w.managerEnv.IfDownload64bitService=w.DWT.IfDownload64bitService,d.host=Q.host,d.checkDcpV3(t.ProductKey,pe,Me)}else e.env.stopCheckingForService||setTimeout(function(){G(Q)},1e3)},k=function(Q){if(e.page.bUnload=u,e.License.isLTS()&&e.isString(w.DWT.ProductKey)){var se={},le=w.DWT.licenseException;return e.Errors.LongKeyShortKeyMixed(se),le.code=se._errorCode,le.message=se._errorString,le.fromLTS=!1,e.closeLoadingMsg(),void function ie(Q){w.DWT.ShowMessage(Q,{width:510,headerStyle:2})}(se._errorString)}var Ce,Te,Be,me,pe=t.Containers,xe=[];for(Ce=0;Ce<pe.length;Ce++)if(Be=pe[Ce],e.product.bHTML5Edition){if(e.isShadowRoot(me=Be.Container)){var Me=document.createElement("div");me.appendChild(Me),me=Me}if(e.isDOM(me)){var Oe=e.getShadowRoot(me);if(Oe){var ze=document.createElement("style");ze.innerHTML=['@import url("',w.DWT.ResourcesPath,"/src/dynamsoft.viewer.css",a,'")'].join(""),Oe.appendChild(ze)}(!me.id||""==me.id)&&(me.id=["dwt_",e.getRandom()].join("")),Be.ContainerId=me.id}for((!e.isString(Be.WebTwainId)&&!e.isNumber(Be.WebTwainId)||""==Be.WebTwainId)&&(Be.WebTwainId=e.isString(Be.ContainerId)&&""!=Be.ContainerId?Be.ContainerId:["dwt_",e.getRandom()].join("")),Te=0;Te<xe.length;Te++)if(Be.WebTwainId==xe[Te]){Be.WebTwainId=Be.WebTwainId+"_"+h.getRandom();break}xe.push(Be.WebTwainId)}else h.isString(Be.WebTwainId)&&(!h.isString(Be.ContainerId)||""==Be.ContainerId)&&(Be.ContainerId=Be.WebTwainId);if(e.product.bHTML5Edition){if(e.IsNeedLoadWasm()){if(!T())return e.closeLoadingMsg(),void he();e.detect.bNeedWasm=!0,e.showLoadingMsg(-1,"",w.MSG.Init_InitWasm)}else e.showLoadingMsg(-1,"",w.MSG.Init_InitH5);J(),e.waitForScripts().then(function(){return new e.Promise(U)}).then(function(){var Ze=!0;e.isString(t.Host)&&(d.host=t.Host),e.IsNeedLoadWasm()&&(Ze=!1),G({callback:Ie,docViewCallback:function(){Ie("",0,!0)},host:d.host,UseLocalService:Ze})},function(){e.closeLoadingMsg()})}else e.showLoadingMsg(-1,"",w.MSG.Init_InitActiveX),function(){if(e.config.usingMainMode)e.closeLoadingMsg();else{var Q,se=t.Containers;if(se===u||0===se.length)return e.log("DEnv.Containers was not set."),void e.closeLoadingMsg();for(Q=0;Q<se.length;Q++){var le=se[Q];B(le)&&e.detect.__WebTwainMain(le)}setTimeout(N,100)}}()},U=function(Q,se){var le=[w.DWT.ResourcesPath,"/src/dynamsoft.imageio.js",a].join("");if(e.IsNeedLoadWasm()){if(!T())return void Q();if(!e.detect.wasmScriptLoaded){e.showLoadingMsg(-1,"",w.MSG.Init_DownloadingWasm);var pe=function(Te){if(e.detect.wasmScriptLoaded=!0,q(),e.showLoadingMsg(-1,"",w.MSG.Init_CompilingWasm),e.License.isLTS())w.DWT.lglic(w.DWT.EnumInstance.dwt_browser).then(function(Be){try{w.WasmEnv.load(Be.ar,!0,Be.cu),w.WasmEnv.wasmLoad=!0}catch(xe){xe&&console.log(xe.message)}Q()},function(Be){Be&&(w.DWT.lsetException(Be.code||Be.ltsErrorCode,Be.message),e.closeLoadingMsg(),w.DWT.OnLicenseException()),se(Be)});else{try{w.WasmEnv.load(t.ProductKey),w.WasmEnv.wasmLoad=!0}catch(Be){Be&&console.log(Be.message)}Q()}};return void(w.DWT.bNpm?pe():e.getScript(le,!0,pe))}}else if(e.showLoadingMsg(-1,"",w.MSG.Init_InitDynamsoftService),!e.detect.wasmScriptLoaded&&!w.navInfoSync.bFileSystem&&w.DWT.UseCameraAddonWasm){if(!T())return void Q();var Ce=function(Te){if(e.detect.wasmScriptLoaded=!0,q(),e.License.isLTS())w.DWT.lglic(w.DWT.EnumInstance.dwt_browser).then(function(Be){try{w.WasmEnv.load(Be.ar,!0,Be.cu),w.WasmEnv.wasmLoad=!0}catch(xe){xe&&console.log(xe.message)}Q()},function(Be){Be&&(w.DWT.lsetException(Be.code||Be.ltsErrorCode,Be.message),e.closeLoadingMsg(),w.DWT.OnLicenseException()),se(Be)});else{try{w.WasmEnv.load(t.ProductKey),w.WasmEnv.wasmLoad=!0}catch(Be){Be&&console.log(Be.message)}Q()}};return void(w.DWT.bNpm?Ce():e.getScript(le,!0,Ce))}Q()};t.DeleteDWTObject=function(Q){var le,se=t.ContainerMap;if(!e.product.bHTML5Edition)return u;if(se&&Q in se){var pe=se[Q];pe&&(delete se[Q],pe.__unload())}for(le=0;le<t.DynamicContainers.length;le++)if(t.DynamicContainers[le].WebTwainId==Q){t.DynamicContainers.splice(le,1);break}return e.closeLoadingMsg(),i},t.GetWebTwain=function(Q){var se,le,pe,Ce,Te,Be=Q;if(se=t.Containers,e.isString(Be))Be=e.get(Be);else if(!e.isDOM(Be)&&!Be&&se&&se.length>0)for(pe=0;pe<se.length;pe++){if(se[pe].Container){Be=se[pe].Container;break}if(se[pe].ContainerId&&F(e.get(se[pe].ContainerId))){Be=e.get(se[pe].ContainerId);break}}if(Ce=t.ContainerMap,Be&&Ce&&se&&se.length>0)for(pe=0;pe<se.length;pe++)if(Te=!1,(le=se[pe]).Container){if(le.Container==Be&&(Te=R(le.WebTwainId)?le.WebTwainId:le.Container.id)&&Te in Ce)return Ce[Te]}else if(le.ContainerId&&le.ContainerId==Be.id&&(Te=R(le.WebTwainId)?le.WebTwainId:le.ContainerId)&&Te in Ce)return Ce[Te];return t.GetWebTwainEx(Q)},t.GetWebTwainEx=function(Q){var le,pe,se=Q;if(le=t.DynamicContainers,e.isDOM(se))se=se.id;else if(!se&&le&&le.length>0)for(pe=0;pe<le.length;pe++)if(R(le[pe])){se=le[pe];break}if(le=null,se){var Te=t.ContainerMap;if(Te&&se in Te)return Te[se]}return null};var ye=function(){var Q=w.DWT.Containers;e.product.loadResourcePath||e.product.loadingResourcePath||(e.isArray(Q)?Q.length>0&&w.DWT.AutoLoad&&Z():setTimeout(ye,100))},Z=function(Q){if(!e.product.loadResourcePath&&!e.product.loadingResourcePath){if(w.DWT.Port>0||w.DWT.SSLPort>0){var se=[];se.push(w.DWT.Port>0?{port:w.DWT.Port,ssl:!1}:{port:18622,ssl:!1}),se.push(w.DWT.SSLPort>0?{port:w.DWT.SSLPort,ssl:!0}:{port:18623,ssl:!0}),e.detect.ports=se,e.LS.removeItem("DWT_port"),e.LS.removeItem("DWT_ssl")}(function(){if(e.isArray(w.DWT.licenseServer)){if(w.DWT.licenseServer.length>0){var Q=w.DWT.licenseServer[0];(""==Q||0==Q.indexOf("https://mlts.dynamsoft.com"))&&(w.DWT.licenseServer=void 0)}}else w.DWT.licenseServer=void 0;(!e.isString(w.DWT.organizationID)||""==w.DWT.organizationID||"undefined"==w.DWT.organizationID)&&(w.DWT.organizationID=e.isNumber(w.DWT.organizationID)?""+w.DWT.organizationID:void 0),(!e.isString(w.DWT.handshakeCode)||""==w.DWT.handshakeCode||"undefined"==w.DWT.handshakeCode)&&(w.DWT.handshakeCode=e.isNumber(w.DWT.handshakeCode)?""+w.DWT.handshakeCode:void 0),e.isString(w.DWT.ProductKey)||(w.DWT.ProductKey=void 0);var se=w.DWT.defaultEnv.CertificateConfig;if(w.DWT.CertificateConfig){var le=w.DWT.CertificateConfig;e.isString(le.URL)||(le.URL=se.URL),(!e.isNumber(le.UpdateDaysBeforeExpired)||le.UpdateDaysBeforeExpired<=0)&&(le.UpdateDaysBeforeExpired=se.UpdateDaysBeforeExpired)}else w.DWT.CertificateConfig=se})(),function(){var Q=w.DWT.defaultEnv.CustomizableDisplayInfo,se=w.DWT.CustomizableDisplayInfo;e.isString(se.loaderBarSource)&&""!=se.loaderBarSource?e.loaderBarSource=se.loaderBarSource:r.bIE?e.loaderBarSourceIE=Q.loaderBarSource:e.loaderBarSource=Q.loaderBarSource,e.loaderBarClassName=e.isString(se.loaderBarClassName)&&""!=se.loaderBarClassName?se.loaderBarClassName:Q.loaderBarClassName,e.loaderBarBackgroundColor=e.isString(se.loaderBarBackgroundColor)?se.loaderBarBackgroundColor:Q.loaderBarBackgroundColor}(),e._safePromptCustomMsg(),e.each(e._funsAfterConfigLoaded,function(Ce){try{e.isFunction(Ce)&&Ce()}catch{}}),e.showLoadingMsg(-1,"",w.MSG.Init_LookingLicense);var le=e.one(".dynamsoft_waiting").getEL();le&&le.parentNode.removeChild(le),w.Ready(function(){!function(Ce){var Te=h.getNavInfo(),Be=r.bFileSystem,xe=e.env.basePath,me=w.DWT.ResourcesPath;if(!e.product.loadResourcePath&&!e.product.loadingResourcePath){e.product.loadingResourcePath=!0,Be||((typeof me>"u"||""==me)&&(me=xe),me.length>0&&"/"==me.charAt(me.length-1)&&(me=me.substr(0,me.length-1)),w.DWT.ResourcesPath=me),w.managerEnv.resourcesPath=me;var Oe=i,ze=[],Ze=[[me,"/src/dynamsoft.webtwain.css",a].join("")],ot=function(){e.detect.cssLoaded=i};e.product.bHTML5Edition&&w.DWT.UseDefaultViewer&&Ze.push([me,"/src/dynamsoft.viewer.css",a].join("")),Te.bSafari?(e.getAllCss(Ze,ot),ot()):e.getAllCss(Ze,ot),Te.bSafari&&(Oe=u),ze.push([me,"/dynamsoft.webtwain.install.js",a].join("")),w.DWT.bNpm&&(ze=[]),e.product.bHTML5Edition&&w.DWT.UseDefaultViewer&&ze.push([me,"/src/dynamsoft.viewer.js",a].join(""));var ve=!1;w.navInfo.bIE&&(ve=w.navInfo.strBrowserVersion<=7),!ve&&e.License.isLTS()&&ze.push([me,"/src/dynamsoft.lts.js",a].join("")),ze.length>0&&e.showLoadingMsg(-1,"",w.MSG.Init_LoadingViewerJs),e.getScripts(ze,Oe,function(Fe){if(!Fe)return e.log("error: load js failed."),void(e.product.loadingResourcePath=!1);if(e.showLoadingMsg(-1,"",w.MSG.Init_AllJsLoaded),e.detect.scriptLoaded=i,e.isString(t.Host)&&(w.dcp.host=t.Host),e.product.bHTML5Edition?e.closeAll=e.html5.closeAll:e.product.bPluginEdition?(e.DynamicWebTwain=e.plugin.DynamicWebTwain,e.closeAll=e.plugin.closeAll):e.product.bActiveXEdition&&(e.DynamicWebTwain=e.ie.DynamicWebTwain,e.closeAll=e.ie.closeAll),e.isUndefined(t.UseLocalService)&&(t.UseLocalService=!e.env.bMobile),t._srcUseLocalService=t.UseLocalService,e.isArray(w.aryAddonReadyFun)){for(var Ve=0;Ve<w.aryAddonReadyFun.length;Ve++){var Ye=w.aryAddonReadyFun[Ve];if(e.isFunction(Ye))try{Ye(e)}catch(Ne){e.log(Ne.stack||Ne,"error"),setTimeout(function(){throw Ne},0)}}w.aryAddonReadyFun=[]}e.product.loadResourcePath=!0,e.product.loadingResourcePath=!1,Ce?w.Lib.detect.bAutoLoadDone=!0:(e.showLoadingMsg(-1,"",w.MSG.Init_FireBeforeInitEvt),t.OnWebTwainWillInit&&t.OnWebTwainWillInit(),v(k))})}}(Q)})}};t.IsLocalServiceConnected=function(){return new e.Promise(function(Q,se){var pe,le=d.host;e.each(e.detect.ports,function(Ce){r.bSSL?Ce.ssl&&(pe=Ce.port):Ce.ssl||(pe=Ce.port)}),t.CheckConnectToTheService(le,pe,function(Ce,Te,Be){Q(!0)},function(){se(!1)})})},e.domReady(function(){ye(),r.bIE&&s.addEventListener&&s.addEventListener("unload",t.Unload,!1)}),e.waitForScripts=function(){return e.waitForScripts._promise?e.waitForScripts._resolve&&e.detect.scriptLoaded?e.waitForScripts._resolve():setTimeout(e.waitForScripts,60):e.waitForScripts._promise=new Promise(function(Q){e.waitForScripts._resolve=Q,setTimeout(e.waitForScripts,60)}),e.waitForScripts._promise},s.Dynamsoft_OnClickInstallButton||(s.Dynamsoft_OnClickInstallButton=function(){e.hide("dwt-btn-install"),e.hide("dwt-install-url-div")}),s&&(e.addEventListener(s,"focus",function(){var Q=t.ContainerMap;Q&&e.each(Q,function(se,le){se&&se._OnPageFocus&&se._OnPageFocus()})}),e.addEventListener(s,"blur",function(){if(h.getNavInfo().bWin){var se=t.ContainerMap;se&&e.each(se,function(le,pe){le&&le._OnPageBlur&&le._OnPageBlur()})}}),e.addEventListener(c,"visibilitychange",function(){if(h.getNavInfo().bWin&&"hidden"==c.visibilityState){var se=t.ContainerMap;se&&e.each(se,function(le,pe){le&&le._OnPageBlur&&le._OnPageBlur()})}}))}(w.Lib,w.DWT),w.DWT.bNpm=!0,w.DWT.dbrCanvasMaxWH=4096,w.aryAddonReadyFun=[],w.AddonReady=function(e){w.aryAddonReadyFun.push(e)},w.Lib.mix(w,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}),w.AddonReady(function(e,t){var i,r=window.Dynamsoft,n=n||{};n.scope={},n.arrayIteratorImpl=function(s){var i=0;return function(){return i<s.length?{done:!1,value:s[i++]}:{done:!0}}},n.arrayIterator=function(s){return{next:n.arrayIteratorImpl(s)}},n.makeIterator=function(s){var i=typeof Symbol<"u"&&Symbol.iterator&&s[Symbol.iterator];return i?i.call(s):n.arrayIterator(s)},n.getGlobal=function(s){s=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof Rt&&Rt,"object"==typeof global&&global,s];for(var i=0;i<s.length;++i){var u=s[i];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")},n.global=n.getGlobal(this),n.ASSUME_ES5=!1,n.ASSUME_NO_NATIVE_MAP=!1,n.ASSUME_NO_NATIVE_SET=!1,n.SIMPLE_FROUND_POLYFILL=!1,n.defineProperty=n.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(s,i,u){s!=Array.prototype&&s!=Object.prototype&&(s[i]=u.value)},n.polyfill=function(s,i,u,f){if(i){for(u=n.global,s=s.split("."),f=0;f<s.length-1;f++){var a=s[f];a in u||(u[a]={}),u=u[a]}(i=i(f=u[s=s[s.length-1]]))!=f&&null!=i&&n.defineProperty(u,s,{configurable:!0,writable:!0,value:i})}},n.FORCE_POLYFILL_PROMISE=!1,n.polyfill("Promise",function(s){function i(){this.batch_=null}function u(c){return c instanceof a?c:new a(function(l,m){l(c)})}if(s&&!n.FORCE_POLYFILL_PROMISE)return s;i.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var l=this;this.asyncExecuteFunction(function(){l.executeBatch_()})}this.batch_.push(c)};var f=n.global.setTimeout;i.prototype.asyncExecuteFunction=function(c){f(c,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var l=0;l<c.length;++l){var m=c[l];c[l]=null;try{m()}catch(I){this.asyncThrow_(I)}}}this.batch_=null},i.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c})};var a=function(c){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var l=this.createResolveAndReject_();try{c(l.resolve,l.reject)}catch(m){l.reject(m)}};a.prototype.createResolveAndReject_=function(){function c(I){return function(p){m||(m=!0,I.call(l,p))}}var l=this,m=!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}},a.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof a)this.settleSameAsPromise_(c);else{e:switch(typeof c){case"object":var l=null!=c;break e;case"function":l=!0;break e;default:l=!1}l?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}},a.prototype.resolveToNonPromiseObj_=function(c){var l=void 0;try{l=c.then}catch(m){return void this.reject_(m)}"function"==typeof l?this.settleSameAsThenable_(l,c):this.fulfill_(c)},a.prototype.reject_=function(c){this.settle_(2,c)},a.prototype.fulfill_=function(c){this.settle_(1,c)},a.prototype.settle_=function(c,l){if(0!=this.state_)throw Error("Cannot settle("+c+", "+l+"): Promise already settled in state"+this.state_);this.state_=c,this.result_=l,this.executeOnSettledCallbacks_()},a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)o.asyncExecute(this.onSettledCallbacks_[c]);this.onSettledCallbacks_=null}};var o=new i;return a.prototype.settleSameAsPromise_=function(c){var l=this.createResolveAndReject_();c.callWhenSettled_(l.resolve,l.reject)},a.prototype.settleSameAsThenable_=function(c,l){var m=this.createResolveAndReject_();try{c.call(l,m.resolve,m.reject)}catch(I){m.reject(I)}},a.prototype.then=function(c,l){function m(C,_){return"function"==typeof C?function(v){try{I(C(v))}catch(T){p(T)}}:_}var I,p,g=new a(function(C,_){I=C,p=_});return this.callWhenSettled_(m(c,I),m(l,p)),g},a.prototype.catch=function(c){return this.then(void 0,c)},a.prototype.callWhenSettled_=function(c,l){function m(){switch(I.state_){case 1:c(I.result_);break;case 2:l(I.result_);break;default:throw Error("Unexpected state: "+I.state_)}}var I=this;null==this.onSettledCallbacks_?o.asyncExecute(m):this.onSettledCallbacks_.push(m)},a.resolve=u,a.reject=function(c){return new a(function(l,m){m(c)})},a.race=function(c){return new a(function(l,m){for(var I=n.makeIterator(c),p=I.next();!p.done;p=I.next())u(p.value).callWhenSettled_(l,m)})},a.all=function(c){var l=n.makeIterator(c),m=l.next();return m.done?u([]):new a(function(I,p){function g(v){return function(T){C[v]=T,0==--_&&I(C)}}var C=[],_=0;do{C.push(void 0),_++,u(m.value).callWhenSettled_(g(C.length-1),p),m=l.next()}while(!m.done)})},a},"es6","es3"),n.SYMBOL_PREFIX="jscomp_symbol_",n.initSymbol=function(){n.initSymbol=function(){},n.global.Symbol||(n.global.Symbol=n.Symbol)},n.SymbolClass=function(s,i){this.$jscomp$symbol$id_=s,n.defineProperty(this,"description",{configurable:!0,writable:!0,value:i})},n.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_},n.Symbol=(i=0,function s(u){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new n.SymbolClass(n.SYMBOL_PREFIX+(u||"")+"_"+i++,u)}),n.initSymbolIterator=function(){n.initSymbol();var s=n.global.Symbol.iterator;s||(s=n.global.Symbol.iterator=n.global.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[s]&&n.defineProperty(Array.prototype,s,{configurable:!0,writable:!0,value:function(){return n.iteratorPrototype(n.arrayIteratorImpl(this))}}),n.initSymbolIterator=function(){}},n.initSymbolAsyncIterator=function(){n.initSymbol();var s=n.global.Symbol.asyncIterator;s||(s=n.global.Symbol.asyncIterator=n.global.Symbol("Symbol.asyncIterator")),n.initSymbolAsyncIterator=function(){}},n.iteratorPrototype=function(s){return n.initSymbolIterator(),(s={next:s})[n.global.Symbol.iterator]=function(){return this},s},n.underscoreProtoCanBeSet=function(){var i={};try{return i.__proto__={a:!0},i.a}catch{}return!1},n.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:n.underscoreProtoCanBeSet()?function(s,i){if(s.__proto__=i,s.__proto__!==i)throw new TypeError(s+" is not extensible");return s}:null,n.generator={},n.generator.ensureIteratorResultIsObject_=function(s){if(!(s instanceof Object))throw new TypeError("Iterator result "+s+" is not an object")},n.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},n.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},n.generator.Context.prototype.stop_=function(){this.isRunning_=!1},n.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},n.generator.Context.prototype.next_=function(s){this.yieldResult=s},n.generator.Context.prototype.throw_=function(s){this.abruptCompletion_={exception:s,isException:!0},this.jumpToErrorHandler_()},n.generator.Context.prototype.return=function(s){this.abruptCompletion_={return:s},this.nextAddress=this.finallyAddress_},n.generator.Context.prototype.jumpThroughFinallyBlocks=function(s){this.abruptCompletion_={jumpTo:s},this.nextAddress=this.finallyAddress_},n.generator.Context.prototype.yield=function(s,i){return this.nextAddress=i,{value:s}},n.generator.Context.prototype.yieldAll=function(s,i){var u=(s=n.makeIterator(s)).next();if(n.generator.ensureIteratorResultIsObject_(u),!u.done)return this.yieldAllIterator_=s,this.yield(u.value,i);this.yieldResult=u.value,this.nextAddress=i},n.generator.Context.prototype.jumpTo=function(s){this.nextAddress=s},n.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},n.generator.Context.prototype.setCatchFinallyBlocks=function(s,i){this.catchAddress_=s,null!=i&&(this.finallyAddress_=i)},n.generator.Context.prototype.setFinallyBlock=function(s){this.catchAddress_=0,this.finallyAddress_=s||0},n.generator.Context.prototype.leaveTryBlock=function(s,i){this.nextAddress=s,this.catchAddress_=i||0},n.generator.Context.prototype.enterCatchBlock=function(s){return this.catchAddress_=s||0,s=this.abruptCompletion_.exception,this.abruptCompletion_=null,s},n.generator.Context.prototype.enterFinallyBlock=function(s,i,u){u?this.finallyContexts_[u]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=s||0,this.finallyAddress_=i||0},n.generator.Context.prototype.leaveFinallyBlock=function(s,i){if(i=this.finallyContexts_.splice(i||0)[0],i=this.abruptCompletion_=this.abruptCompletion_||i){if(i.isException)return this.jumpToErrorHandler_();null!=i.jumpTo&&this.finallyAddress_<i.jumpTo?(this.nextAddress=i.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=s},n.generator.Context.prototype.forIn=function(s){return new n.generator.Context.PropertyIterator(s)},n.generator.Context.PropertyIterator=function(s){for(var i in this.object_=s,this.properties_=[],s)this.properties_.push(i);this.properties_.reverse()},n.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var s=this.properties_.pop();if(s in this.object_)return s}return null},n.generator.Engine_=function(s){this.context_=new n.generator.Context,this.program_=s},n.generator.Engine_.prototype.next_=function(s){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,s,this.context_.next_):(this.context_.next_(s),this.nextStep_())},n.generator.Engine_.prototype.return_=function(s){this.context_.start_();var i=this.context_.yieldAllIterator_;return i?this.yieldAllStep_("return"in i?i.return:function(u){return{value:u,done:!0}},s,this.context_.return):(this.context_.return(s),this.nextStep_())},n.generator.Engine_.prototype.throw_=function(s){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,s,this.context_.next_):(this.context_.throw_(s),this.nextStep_())},n.generator.Engine_.prototype.yieldAllStep_=function(s,i,u){try{var f=s.call(this.context_.yieldAllIterator_,i);if(n.generator.ensureIteratorResultIsObject_(f),!f.done)return this.context_.stop_(),f;var a=f.value}catch(o){return this.context_.yieldAllIterator_=null,this.context_.throw_(o),this.nextStep_()}return this.context_.yieldAllIterator_=null,u.call(this.context_,a),this.nextStep_()},n.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var s=this.program_(this.context_);if(s)return this.context_.stop_(),{value:s.value,done:!1}}catch(i){this.context_.yieldResult=void 0,this.context_.throw_(i)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(s=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,s.isException)throw s.exception;return{value:s.return,done:!0}}return{value:void 0,done:!0}},n.generator.Generator_=function(s){this.next=function(i){return s.next_(i)},this.throw=function(i){return s.throw_(i)},this.return=function(i){return s.return_(i)},n.initSymbolIterator(),this[Symbol.iterator]=function(){return this}},n.generator.createGenerator=function(s,i){return i=new n.generator.Generator_(new n.generator.Engine_(i)),n.setPrototypeOf&&n.setPrototypeOf(i,s.prototype),i},n.asyncExecutePromiseGenerator=function(s){function i(f){return s.next(f)}function u(f){return s.throw(f)}return new Promise(function(f,a){!function o(c){c.done?f(c.value):Promise.resolve(c.value).then(i,u).then(o,a)}(s.next())})},n.asyncExecutePromiseGeneratorFunction=function(s){return n.asyncExecutePromiseGenerator(s())},n.asyncExecutePromiseGeneratorProgram=function(s){return n.asyncExecutePromiseGenerator(new n.generator.Generator_(new n.generator.Engine_(s)))},n.iteratorFromArray=function(s,i){n.initSymbolIterator(),s instanceof String&&(s+="");var u=0,f={next:function(){if(u<s.length){var a=u++;return{value:i(a,s[a]),done:!1}}return f.next=function(){return{done:!0,value:void 0}},f.next()}};return f[Symbol.iterator]=function(){return f},f},n.polyfill("Array.prototype.keys",function(s){return s||function(){return n.iteratorFromArray(this,function(i){return i})}},"es6","es3"),n.checkStringArgs=function(s,i,u){if(null==s)throw new TypeError("The 'this' value for String.prototype."+u+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+u+" must not be a regular expression");return s+""},n.polyfill("String.prototype.startsWith",function(s){return s||function(i,u){var f=n.checkStringArgs(this,i,"startsWith"),a=f.length,o=(i+="").length;u=Math.max(0,Math.min(0|u,f.length));for(var c=0;c<o&&u<a;)if(f[u++]!=i[c++])return!1;return c>=o}},"es6","es3"),n.polyfill("String.prototype.endsWith",function(s){return s||function(i,u){var f=n.checkStringArgs(this,i,"endsWith");i+="",void 0===u&&(u=f.length),u=Math.max(0,Math.min(0|u,f.length));for(var a=i.length;0<a&&0<u;)if(f[--u]!=i[--a])return!1;return 0>=a}},"es6","es3"),(r=typeof r<"u"?r:(typeof r<"u"?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}).error=r.error||{},r.error.code=r.error.code||{},r.error.code.wasmBase=-4e3,r.error.code.wasmException=r.error.code.wasmBase-1,r.error.code.wasmNoModule=r.error.code.wasmBase-1,r.error.code.wasmJsBase=-4100,r.error.code.wasmJsObjectNotInit=r.error.code.wasmJsBase-1,r.error.code.wasmJsObjectTerminated=r.error.code.wasmJsBase-1,r.error.code.wasmJsObjectInitFailed=r.error.code.wasmJsBase-1,r.error.code.wasmJsNotLoaded=r.error.code.wasmJsBase-1,r.error.code.wasmJsInvalidJson=r.error.code.wasmJsBase-1,r.error.code.wasmJsWorkerRunException=r.error.code.wasmJsBase-1,r.error.code.wasmJsWorkerRunFailed=r.error.code.wasmJsBase-1,r.error.code.wasmJsReadFileFailed=r.error.code.wasmJsBase-1,r.error.code.wasmJsCoreTaskException=r.error.code.wasmJsBase-1,r.error.code.wasmJsProcTaskException=r.error.code.wasmJsBase-1,r.error.code.wasmJsSavePdfFailed=r.error.code.wasmJsBase-1,r.error.code.wasmJsSaveTiffFailed=r.error.code.wasmJsBase-1,r.conststring={version:"1.7.2.2",logInfo:"logInfo",logDebug:"logDebug",logAll:"logAll",initPending:"pending",initReady:"ready",initFailed:"failed",imgIO:"imgIO",core:"imgCore",imgProc:"imgProc",pdfR:"pdfReader",pdfW:"pdfWriter",crypto:"crypto",binaryBlobType:"application/octet-stream",wasmExtension:".wasm"},r.constDefine={mainIndex:0,pdfReaderIndex:1,wasmDefHeapSize:28},r.WasmEnv={wasmJSs:["dynamsoft.imageio_wasm-"+r.conststring.version+".js","dynamsoft.pdfReader_wasm-"+r.conststring.version+".js"],wasmHeap:[{maxHeapSize:300,initHeapSize:280},{maxHeapSize:200,initHeapSize:r.constDefine.wasmDefHeapSize}],moduleNames:[r.conststring.imgIO,r.conststring.crypto,r.conststring.core,r.conststring.imgProc,r.conststring.pdfR,r.conststring.pdfW],imgIO:{name:r.conststring.imgIO,autoLoad:!0,ver:r.conststring.version,status:"",prefixName:"dynamsoft.imageio-",wasmModule:null,wasmJSIndex:r.constDefine.mainIndex},imgCore:{name:r.conststring.core,autoLoad:!0,ver:r.conststring.version,status:"",prefixName:"dynamsoft.imagecore-",wasmModule:null,wasmJSIndex:r.constDefine.mainIndex},imgProc:{name:r.conststring.imgProc,autoLoad:!0,ver:r.conststring.version,status:"",prefixName:"dynamsoft.imageProc-",wasmModule:null,wasmJSIndex:r.constDefine.mainIndex},pdfReader:{name:r.conststring.pdfR,autoLoad:!1,ver:r.conststring.version,status:"",prefixName:"dynamsoft.pdfReader-",wasmModule:null,wasmJSIndex:r.constDefine.pdfReaderIndex},pdfWriter:{name:r.conststring.pdfW,autoLoad:!0,ver:r.conststring.version,status:"",prefixName:"dynamsoft.pdfWriter-",wasmModule:null,wasmJSIndex:r.constDefine.mainIndex},crypto:{name:r.conststring.crypto,autoLoad:!0,ver:r.conststring.version,status:"",prefixName:"dynamsoft.crypto-",wasmModule:null,wasmJSIndex:r.constDefine.mainIndex}},r.WasmEnv.buildWasmFileName=function(s,i,u,f){return s+(f?"sn-":"")+i+u},r.WasmEnv.fetchRetry=function(s,i,u,f){var a=i.retries,o=i.retryDelay;return new Promise(function(c,l){var I=function(p){fetch(s,i).then(function(g){c(g)}).catch(function(g){p<a?function m(p,g,C){u&&u(f,g),setTimeout(function(){I(++p)},o)}(p,g):l(g)})};I(0)})},r.Enum_ImageType={IT_DIB:-1,IT_RGBA:-2,IT_BGRA:-3,IT_BMP:0,IT_JPG:1,IT_PNG:3,IT_ALL:5},r.Enum_ReturnType={RT_AUTO:-1,RT_BINARY:1,RT_BASE64:2},r.Enum_ErrorMessage={PARAMETER_TYPE_ERROR:"Parameter Type not Supported: ",TIMEOUT:"Timeout no Response: ",FILE_STREAM_ERROR:"File Stream Error: ",WASM_EXCEPTION_ERROR:"An WASM exception occurred."},r.Enum_SimdFlag={SF_DEF:0,SF_ENABLE:1,SF_DISABLE:2},r.Lib=r.Lib||{},r.Lib.env=r.Lib.env||{},r.b64ToUint6=function(s){return 64<s&&91>s?s-65:96<s&&123>s?s-71:47<s&&58>s?s+4:43===s?62:47===s?63:0},r.base64DecToArr=function(s,i){var u=(s=s.replace(/[^A-Za-z0-9\+\/]/g,"")).length;i=i?Math.ceil((3*u+1>>>2)/i)*i:3*u+1>>>2;for(var a,f=new Uint8Array(i),o=0,c=0,l=0;l<u;l++)if(a=3&l,o|=r.b64ToUint6(s.charCodeAt(l))<<18-6*a,3===a||u-l==1){for(a=0;3>a&&c<i;a++,c++)f[c]=o>>>(16>>>a&24)&255;o=0}return f},r.isWasmSupport=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var s=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(s instanceof WebAssembly.Module)return new WebAssembly.Instance(s)instanceof WebAssembly.Instance}}catch{}return!1},r.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)},r.readFile=function(s){return new Promise(function(i,u){var f=Object.prototype.toString.call(s);if("[object String]"===f)0===s.indexOf("blob:")||0<s.indexOf(".jpg")||0<s.indexOf(".jpeg")||0<s.indexOf(".png")||0<s.indexOf(".bmp")||0<s.indexOf(".dib")||0<s.indexOf(".pdf")||0<s.indexOf(".tiff")||0<s.indexOf(".tif")?fetch(s,{mode:"cors"}).then(function(o){return o.arrayBuffer()}).then(function(o){return i(o)}).catch(function(o){return Promise.reject(o)}):u("Error url: Can not read the file URL");else if("[object Blob]"===f||"[object FileList]"===f||"[object File]"===f){u=s,("[object FileList]"===f||"[object File]"===f)&&(u=s[0]?s[0]:s);var a=new FileReader;a.readAsArrayBuffer(u),a.onload=function(){i(a.result)}}else"[object ArrayBuffer]"===f||"[object Uint8ClampedArray]"===f?i(s):u("Not support source type: "+f)})},r.base64Decode=function(s){function i(f){var c,a=[],o=f.length;for(c=0;c<o;c++){var l=f.charCodeAt(c);if(0==(l>>7&255))a.push(f.charAt(c));else if(6==(l>>5&255)){var m=f.charCodeAt(++c);l=(31&l)<<6,l|=m&=63,a.push(String.fromCharCode(l))}else 14==(l>>4&255)&&(l=(255&(l=l<<4|(m=f.charCodeAt(++c))>>2&15))<<8|(m=(3&m)<<6|63&f.charCodeAt(++c)),a.push(String.fromCharCode(l)))}return a.join("")}var u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return function(f){for(var l,m,a=[],o=0,c=f.length;o<c;){do{l=u[255&f.charCodeAt(o++)]}while(o<c&&-1==l);if(-1==l)break;do{m=u[255&f.charCodeAt(o++)]}while(o<c&&-1==m);if(-1==m)break;a.push(String.fromCharCode(l<<2|(48&m)>>4));do{if(61==(l=255&f.charCodeAt(o++)))return i(a.join(""));l=u[l]}while(o<c&&-1==l);if(-1==l)break;a.push(String.fromCharCode((15&m)<<4|(60&l)>>2));do{if(61==(m=255&f.charCodeAt(o++)))return i(a.join(""));m=u[m]}while(o<c&&-1==m);if(-1==m)break;a.push(String.fromCharCode((3&l)<<6|m))}return i(a.join(""))}(s)},r.WasmEnv=r.WasmEnv||{},r.WasmEnv.lastInstanceId=0,r.WasmEnv.worker={maxWorkers:1,liveTime:60},r.WasmEnv.resourceDir=r.DWT.ResourcesPath+"/src/",r.WasmEnv.logLevel=r.DWT.Debug?r.conststring.logDebug:0,r.WasmEnv.logFunc=null,r.WasmEnv.productKey="",r.WasmEnv.licMode=0,r.WasmEnv.uuid="",r.WasmEnv.fetchOptions={mode:"cors",credentials:"same-origin",retries:3,retryDelay:500},r.WasmEnv.simdFlag=r.Enum_SimdFlag.SF_DEF,r.WasmEnv.useFastcompEdition=!1,r.WasmEnv.log=function(s,i){var u=r.WasmEnv;u.logLevel===i&&("function"==typeof u.logFunc?u.logFunc(s):console.log(s))},r.WasmEnv.clear=function(s){for(var i=n.makeIterator(r.WasmEnv.moduleNames),u=i.next();!u.done;u=i.next())(r.WasmEnv[u=u.value].wasmJSIndex==s||null==s)&&(r.WasmEnv[u].status="",delete r.WasmEnv[u].error)},r.WasmEnv.setLoglevel=function(s,i){r.WasmEnv.logLevel=1===s?r.conststring.logDebug:0,r.WasmEnv.logFunc=i},r.WorkerHandler=function(s,i){function u(a){f.terminated=!0,f.options.log("[js]["+Date.now()/1e3+"] worker error "+JSON.stringify(a),f.context),f.terminating&&f.terminationHandler&&f.terminationHandler(f),f.terminating=!1,f.cancelAllTasks()}var f=this;this.options=i||{},this.script=s,this.worker=function(a){if("function"!=typeof Worker&&("object"!=typeof Worker||"function"!=typeof Worker.prototype.constructor))throw Error("Web Workers not supported");return(a=new Worker(a)).on=function(o,c){this.addEventListener(o,function(l){c(l.data)})},a.send=function(o){if(null!=o&&null!=o.params&&null!=o.params.input){var c=Object.prototype.toString.call(o.params.input);if("[object Array]"===Object.prototype.toString.call(o.params.input)){if("[object ArrayBuffer]"===(c=Object.prototype.toString.call(o.params.input[0]))||"[object Uint8ClampedArray]"===c||"[object Uint8Array]"===c)return void this.postMessage(o,[null!=o.params.input[0].buffer?o.params.input[0].buffer:o.params.input[0]])}else if("[object ArrayBuffer]"===c||"[object Uint8ClampedArray]"===c||"[object Uint8Array]"===c)return void this.postMessage(o,[null!=o.params.input.buffer?o.params.input.buffer:o.params.input])}this.postMessage(o)},a}(this.script),this.requestQueue=[],this.terminated=this.terminating=!1,f.tasks=Object.create(null),this.objectToError=function(a){for(var o=Error(""),c=Object.keys(a),l=0;l<c.length;l++)o[c[l]]=a[c[l]];return o},this.dispatchQueuedRequests=function(){f.requestQueue.forEach(f.worker.send.bind(f.worker)),f.requestQueue=[]},this.logDebug=function(a){r.WasmEnv.logLevel===r.conststring.logDebug&&"function"==typeof f.options.log&&f.options.log("[js]["+Date.now()/1e3+"] "+a,f.context)},this.worker.on("message",function(a){if("function"==typeof f.options.log&&f.options.log(a.log?a.log:a,f.context),"string"==typeof a&&"ready"===a)f.worker.ready=!0,f.dispatchQueuedRequests();else if(!a.log){if("object"==typeof a){var o=a.result;"object"==typeof o?(null!=o.errorCode&&(o.code=o.errorCode,delete o.errorCode),null!=o.errorMessage&&(o.message=o.errorMessage,delete o.errorMessage)):"string"==typeof o&&(o=(o=(o=(o=o.replace('"errorCode"','"code"')).replace("'errorCode'","'code'")).replace('"errorMessage"','"message"')).replace("'errorMessage'","'message'"),a.result=o),null!=a.memSize&&(f.memSize=a.memSize)}var c=f.tasks[o=a.id];void 0!==c?(delete f.tasks[o],f.logDebug(a.func+" received"),!0===f.terminating&&f.terminate(),"loadWasm"===a.func&&null!=a.result&&(f.worker.wasmReady=!0,f.dispatchQueuedRequests()),a.error?c.resolver.reject(f.objectToError(a.error)):a.result&&c.resolver.resolve(a.result)):"loadWasm"===a.func&&null!=a.result&&r.WasmEnv._handleWasmLoad(a.result,f)}}),this.worker.on("error",u),this.worker.on("exit",function(a,o){a="Worker terminated Unexpectedly\n exitCode: `"+a+"`\n signalCode: `"+o+"`\n script: `"+f.script+"`\n",u(Error(a))}),this.terminated=this.terminating=!1,this.terminationHandler=null,this.lastTaskId=0},r.WorkerHandler.prototype.exec=function(s,i,u){u||((u={}).promise=new Promise(function(a,o){u.resolve=a,u.reject=o}));var f=++this.lastTaskId;return this.tasks[f]={id:f,resolver:u},i={id:f,func:s,params:i},r.WasmEnv.logLevel===r.conststring.logDebug&&(i.params.logLevel=r.conststring.logDebug,this.logDebug(s+" send")),this.terminated?u.reject(Error("Worker is terminated")):this.terminating?u.reject(Error("Worker is terminating")):this.worker.wasmReady||this.worker.ready&&"loadWasm"===s?this.worker.send(i):this.requestQueue.push(i),u.promise},r.WorkerHandler.prototype.busy=function(){return 0<this.howManyTasks()},r.WorkerHandler.prototype.howManyTasks=function(){return Object.keys(this.tasks).length},r.WorkerHandler.prototype.cancelAllTasks=function(s){for(var i in this.tasks)void 0!==this.tasks[i]&&this.tasks[i].resolver.reject(Error(s));this.tasks=Object.create(null)},r.WorkerHandler.prototype.alive=function(){return!(this.terminating||this.terminated)},r.WorkerHandler.prototype.terminate=function(s,i){if(this.logDebug("worker terminate "+s),s&&this.cancelAllTasks("Worker has been terminated"),"function"==typeof i&&(this.terminationHandler=i),this.busy())this.terminating=!0;else{if(this.worker){if("function"!=typeof this.worker.terminate)throw Error("Failed to terminate worker");this.worker.terminate(),this.worker=null}this.terminating=!1,this.terminated=!0,this.terminationHandler&&this.terminationHandler(this)}},r.WorkerHandler.prototype.setLogCallback=function(s,i){this.options.log=s,this.context=i},r.WorkerPool=function(s,i,u,f){var a=this;this.workers=[],this.options=s,this.maxWorkers=1,this.script=this.options.resourceDir+u,this.ready=!1,this.pdfReaderInstance=null,this.terminated=!1,this.wasmLoaderPromise=Object.create(null),this.poolIndex=f,this.crossScript=!1,this._getMaxWorkers=function(){var o=2;return"hardwareConcurrency"in Rt.navigator&&(o=Rt.navigator.hardwareConcurrency),Math.max(Math.min(a.options.worker.maxWorkers,Math.max(a.options.worker.maxWorkers,o/2)),1)},this._logAll=function(o){r.WasmEnv.log(o,r.conststring.logAll)},this._log=function(o,c){r.WasmEnv.log(o,r.conststring.logDebug)},this._createWorker=function(){a.ready&&(a.maxWorkers=a._getMaxWorkers());var o=a.workers;if(o.length<a.maxWorkers){var c=new r.WorkerHandler(a.script);return o.push(c),c.id=o.length,c.module={},c.module.modulesInfo=[],c.instances=Object.create(null),c.setLogCallback(this._log,a),a._logAll(o),a.log("get new worker "+c.id+" succeed!"),c}return null},this._getContainedModuleWorkers=function(o){a._removeTerminatedWorker();var c=a.workers;a._logAll(c);for(var l=[],m=n.makeIterator(c),I=m.next();!I.done;I=m.next())!(I=I.value).module.modulesInfo[o.name]||I.busy()&&c.length<a.maxWorkers||l.push(I);return a._logAll("get workers for module "+o.name),a._logAll(l),l},this._checkWorkerValid=function(){a._removeTerminatedWorker(),0==a.workers.length&&a.data&&(a.log("no worker ready, reinit"),a.crossScript?a._initAsync(a.data):a._init(a.data))},this._getIdleWorker=function(){a._removeTerminatedWorker();for(var o=n.makeIterator(a.workers),c=o.next();!c.done;c=o.next())if(!1===(c=c.value).busy())return c;return a._createWorker()},this._busy=function(){a._removeTerminatedWorker();for(var o=n.makeIterator(a.workers),c=o.next();!c.done;c=o.next())if(c.value.busy())return!0;return!1},this._removeTerminatedWorker=function(){a.workers=a.workers.filter(function(o){return!o.terminated})},this._getWorkerByIntanceId=function(o,c){a._logAll("_getWorkerByIntanceId"),a._logAll(o);for(var l=9007199254740991,m=null,I=n.makeIterator(o),p=I.next();!p.done;p=I.next()){if(null!=(p=p.value).instances[c]){m=p;break}var g=p.howManyTasks();g<l&&(m=p,l=g)}return m?(m.instances[c]="",a._logAll(o),a.log("get worker "+c+" in "+m.id+" succeed!"),m):(a._logAll("_getWorkerByIntanceId: no suitable worker"),null)},this._initWorkerInner=function(o,c,l){try{c.params&&(c.params.resourceDir=this.resourceDir,c.params.fetchOptions=r.WasmEnv.fetchOptions);for(var m=n.makeIterator(c.params.module.modulesInfo),I=m.next();!I.done;I=m.next())r.WasmEnv[I.value.name].status=r.conststring.initPending;o.exec(c.func,c.params).then(function(p){void 0===p.code||p.modules?r.WasmEnv._handleWasmLoad(p,o):a.log(p),l()}).catch(function(p){a.log(p),l()})}catch(p){a.log(p),l()}},this._removeInstanceInWorker=function(o,c){var l=a.workers;a._logAll("removeInstanceInWorker"),a._logAll(l);for(var m=n.makeIterator(l),I=m.next();!I.done;I=m.next())if((I=I.value)===o){null!=I.instances[c]?(delete I.instances[c],a._logAll(l),a.log("removeInstanceInWorker "+c+" in "+I.id+" succeed!")):a.log("not found instance "+c);break}},this._hasInstanceInWorker=function(){for(var o=n.makeIterator(a.workers),c=o.next();!c.done;c=o.next())if(0!=Object.keys(c.value.instances).length)return!0;return null!=a.pdfReaderInstance},this._getWorker=function(o,c){if(r.WasmEnv[o.name].status==r.conststring.initPending)return this._checkWorkerValid(),null;var l=a._getContainedModuleWorkers(o);if(0!=l.length)return a._getWorkerByIntanceId(l,c);if(l=a._getIdleWorker()){if(l.module.modulesInfo[o.name])return l;a.log("_getWorker: try to recreate worker "+c),o={id:0,func:"loadWasm",params:{priority:0,key:a.options.productKey,licMode:r.WasmEnv.licMode,uuid:r.WasmEnv.uuid,module:{modulesInfo:[],poolIndex:a.poolIndex,useFastcompEdition:r.WasmEnv.useFastcompEdition}}};for(var m=(c=n.makeIterator(r.WasmEnv.moduleNames)).next();!m.done;m=c.next())null!=r.WasmEnv[m=m.value].poolIndex&&r.WasmEnv[m].poolIndex==a.poolIndex&&o.params.module.modulesInfo.push({name:m,ver:r.WasmEnv[m].ver,wasmModule:r.WasmEnv[m].wasmModule,poolIndex:r.WasmEnv[m].poolIndex,useSimd:r.WasmEnv[m].useSimd});a._initWorkerInner(l,o,function(){})}return null},this._init=function(o){var c=a._createWorker();c&&(c.setLogCallback(function(l,m){m.log(l)},a),o.params.callback=null,a._initWorkerInner(c,o,function(l){a.maxWorkers=a._getMaxWorkers(),a.ready=!0}))},this._initAsync=function(o){var l,c=this;return n.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return l=a,m.yield(r.WasmEnv.fetchRetry(a.script,r.WasmEnv.fetchOptions,c._log,c).then(function(I){return I.blob()}).then(function(I){return URL.createObjectURL(I)}),2);l.script=m.yieldResult,a._init(o),m.jumpToEnd()})},this._getPath=function(){this.script.startsWith("http://")||this.script.startsWith("https://")?this.resourceDir=this.options.resourceDir:this.options.resourceDir.startsWith("/")?null!=location.origin&&(this.resourceDir=location.origin+this.options.resourceDir):null!=location.href&&(this.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+this.options.resourceDir),this.resourceDir.endsWith("/")||(this.resourceDir+="/"),f==r.constDefine.mainIndex&&r.WasmEnv.useFastcompEdition&&(this.resourceDir+="fastcomp/",this.script=this.resourceDir+u)},this._getPath(),i&&0<i.params.module.modulesInfo.length?(!this.script.startsWith("http://")&&!this.script.startsWith("https://")||this.script.startsWith(location.origin)||(this.crossScript=!0),this.data=i,this.crossScript?this._initAsync(i):this._init(i)):(a.maxWorkers=a._getMaxWorkers(),a.ready=!0)},r.WorkerPool.prototype.getWorker=function(s,i){if(!this.ready)return null;var u=s.name===r.WasmEnv.pdfReader.name;if(u&&this.pdfReaderInstance)return null;if((s=this._getWorker(s,i))&&u){if(this.pdfReaderInstance)return this._removeInstanceInWorker(s,i),null;this.pdfReaderInstance=i}return s},r.WorkerPool.prototype.removeInstanceInWorker=function(s,i,u,f){this._removeInstanceInWorker(i,u),s.name===r.WasmEnv.pdfReader.name&&this.pdfReaderInstance&&(this.pdfReaderInstance=null),f&&i&&null!=i.memSize&&(r.WasmEnv.log("current memSize="+i.memSize+", max="+(s=1048576*r.WasmEnv.wasmHeap[this.poolIndex].maxHeapSize),r.conststring.logDebug),i.memSize>s&&0!=s&&!this._hasInstanceInWorker()&&(r.WasmEnv.log("reload wasm auto",r.conststring.logDebug),r.WasmEnv.load(void 0,void 0,void 0,this.poolIndex,!0)))},r.WorkerPool.prototype.log=function(s){r.WasmEnv.log(s,r.conststring.logDebug)},r.WorkerPool.prototype.terminate=function(s){r.WasmEnv.log("worker pool terminate "+s,r.conststring.logDebug),this.terminated=!0;var i=[],u=this.workers.slice();return this.workers=[],u.forEach(function(f){var a={};a.promise=new Promise(function(o,c){a.resolve=o,a.reject=c}),i.push(a.promise),f.terminate(s,function(o){a.resolve(o)})}),Promise.all(i)},r.WorkerPool.prototype.getMemoryUsed=function(){for(var s=[],i=0,u=n.makeIterator(this.workers),f=u.next();!f.done;f=u.next())(f=f.value)&&null!=f.memSize&&(s[i++]=f.memSize);return s},r.WasmEnv.loadPdfReader=function(s,i,u){r.WasmEnv.load(s,i,u,r.constDefine.pdfReaderIndex,!0)},r.WasmEnv.loadMain=function(s,i,u){r.WasmEnv.load(s,i,u,r.constDefine.mainIndex,!0)},r.WasmEnv.load=function(s,i,u,f,a){r.WasmEnv.unload(f),r.WasmEnv.productKey=s??r.WasmEnv.productKey,null!=i&&(r.WasmEnv.licMode=i?1:0),a=a??!1,r.WasmEnv.uuid=u??r.WasmEnv.uuid,r.WasmEnv.licenseInfo=void 0,r.WasmEnv.loadingPromise={},r.WasmEnv.loadingPromise.promise=new Promise(function(c,l){r.WasmEnv.loadingPromise.resolve=c,r.WasmEnv.loadingPromise.reject=l});var o=r.WasmEnv;for(o.clear(f),void 0===r.WorkerPool.Instances&&(r.WorkerPool.Instances=[]),null!=f?r.WorkerPool.Instances[f]=null:r.WorkerPool.Instances=[],i=0;i<o.wasmJSs.length;i++)(null==f||f==i)&&(u={id:0,func:"loadWasm",params:{priority:0,key:s,licMode:r.WasmEnv.licMode,uuid:r.WasmEnv.uuid,module:{modulesInfo:[],poolIndex:i,useFastcompEdition:r.WasmEnv.useFastcompEdition},callback:function(c){o.logLevel===r.conststring.logDebug&&("function"==typeof o.logFunc?o.logFunc(c):console.log(c))}}},(a||o.imgCore.autoLoad)&&o.imgCore.wasmJSIndex==i&&(u.params.module.modulesInfo.push({name:o.imgIO.name,ver:o.imgIO.ver,wasmModule:o.imgIO.wasmModule,poolIndex:i}),o.imgIO.poolIndex=i,1===r.WasmEnv.licMode&&(u.params.module.modulesInfo.push({name:o.crypto.name,ver:o.crypto.ver,wasmModule:o.crypto.wasmModule,poolIndex:i}),o.crypto.poolIndex=i)),(a||o.imgCore.autoLoad||o.imgCore.wasmModule)&&o.imgCore.wasmJSIndex==i&&(u.params.module.modulesInfo.push({name:o.imgCore.name,ver:o.imgCore.ver,wasmModule:o.imgCore.wasmModule,poolIndex:i}),o.imgCore.poolIndex=i),(a||o.imgProc.autoLoad||o.imgProc.wasmModule)&&o.imgProc.wasmJSIndex==i&&(o.imgProc.useSimd=r.WasmEnv.getUseSimd(),u.params.module.modulesInfo.push({name:o.imgProc.name,ver:o.imgProc.ver,wasmModule:o.imgProc.wasmModule,poolIndex:i,useSimd:o.imgProc.useSimd}),o.imgProc.poolIndex=i),(a||o.pdfReader.autoLoad||o.pdfReader.wasmModule)&&o.pdfReader.wasmJSIndex==i&&(u.params.module.modulesInfo.push({name:o.pdfReader.name,ver:o.pdfReader.ver,wasmModule:o.pdfReader.wasmModule,poolIndex:i}),o.pdfReader.poolIndex=i),(a||o.pdfWriter.autoLoad||o.pdfWriter.wasmModule)&&o.pdfWriter.wasmJSIndex==i&&(u.params.module.modulesInfo.push({name:o.pdfWriter.name,ver:o.pdfWriter.ver,wasmModule:o.pdfWriter.wasmModule,poolIndex:i}),o.pdfWriter.poolIndex=i),r.WorkerPool.Instances[i]=0!=u.params.module.modulesInfo.length?new r.WorkerPool(o,u,o.wasmJSs[i],i,r.WasmEnv.maxHeapSize,r.WasmEnv.initH):null)},r.WasmEnv.unloadMain=function(){return r.WasmEnv.unload(r.constDefine.mainIndex)},r.WasmEnv.unloadPdfReader=function(){return r.WasmEnv.unload(r.constDefine.pdfReaderIndex)},r.WasmEnv.getUseSimd=function(){if(r.WasmEnv.useFastcompEdition)return!1;if(r.WasmEnv.simdFlag===r.Enum_SimdFlag.SF_DEF){if(null!=navigator.userAgentData&&null!=navigator.userAgentData.brands)for(var s=n.makeIterator(navigator.userAgentData.brands),i=s.next();!i.done;i=s.next())if((i=i.value).brand&&("Chromium"==i.brand||"Google Chrome"==i.brand)&&i.version&&94<=parseInt(i.version,10))return!0}else if(r.WasmEnv.simdFlag===r.Enum_SimdFlag.SF_ENABLE)return!0;return!1},r.WasmEnv.unload=function(s){var i=r.WorkerPool.Instances;if(null!=i){if(null!=s)return!i[s]||i[s].terminate(!0);s=[];for(var u=(i=n.makeIterator(i)).next();!u.done;u=i.next())s.push(u.value.terminate(!0));return s}return Promise.resolve()},r.WasmEnv.getWorkerPool=function(s){var i=r.WorkerPool.Instances;return i?!(s=i[s])||s.terminated?null:s:null},r.WasmEnv.busy=function(s){var i=r.WorkerPool.Instances;if(i){if(null!=s)return!!i[s]&&i[s].busy();for(i=(s=n.makeIterator(i)).next();!i.done;i=s.next())if(i.value._busy())return!0}return!1},r.WasmEnv._handleWasmLoad=function(s,i){if(r.WasmEnv.log("handleWasmLoad:",r.conststring.logDebug),r.WasmEnv.log(s,r.conststring.logDebug),"object"!=typeof s||null==s.modules)"object"==typeof s&&r.WasmEnv.loadingPromise.reject({code:s.code,message:s.message});else{for(var u=n.makeIterator(s.modules),f=u.next();!f.done;f=u.next())f=f.value,s.code?(r.WasmEnv[f.name].error={code:s.code,message:s.message},i.module.modulesInfo[f.name]=!1):(delete r.WasmEnv[f.name].error,r.WasmEnv[f.name].status=r.conststring.initReady,r.WasmEnv[f.name].wasmModule=f.wasmModule,i.module.modulesInfo[f.name]=!0);s.licenseInfo&&("string"==typeof(s=s.licenseInfo)&&(s=JSON.parse(s),r.WasmEnv.licenseInfo=s),r.WasmEnv.loadingPromise.resolve(s)),null!=r.WasmEnv.imgIO.error&&r.WasmEnv.loadingPromise.reject(r.WasmEnv.imgIO.error)}},r.ImageIoBase=function(s,i,u,f){var a=this;this.moduleInfo=i,this.name=this.moduleInfo.name,this.outputType=r.Enum_ImageType.IT_JPG,this.inputType=r.Enum_ImageType.IT_ALL,this.tiffFormat=0,this.jpegQuality=80,this.tasksQueue=[],this.worker=null,this.lastTaskId=0,this.logFunc=u,this.context=f,this.instanceId=++r.WasmEnv.lastInstanceId,this.timer=null,this.nv=JSON.parse(JSON.stringify(r.navInfo)),this.mb=r.Lib.env.bMobile,this.dm=location.origin,this.initStatus="",this.terminated=!1,this.license=s||r.license,this.license||(this.license=""),this.licMode=r.WasmEnv.licMode,this.uuid=r.WasmEnv.uuid,this._getWorker=function(){if(a.timer&&clearTimeout(a.timer),a.worker&&a.worker.alive())return a.worker;var o=r.WasmEnv.getWorkerPool(a.moduleInfo.poolIndex);if(o){if(a.worker=o.getWorker(a.moduleInfo,a.instanceId),a.worker&&a.worker.alive())0<a.tasksQueue.length&&a._dispatchQueuedTasks();else{if(r.WasmEnv[a.name].error)return a._cancelAllTasks(r.error.code.wasmJsNotLoaded,r.WasmEnv[a.name].error),a.worker;0<a.tasksQueue.length&&(a.timer=setTimeout(a._getWorker,50))}return a.worker}a._cancelAllTasks(r.error.code.wasmJsNotLoaded,"wasm env not loaded")},this._dispatchQueuedTasks=function(){if(a._logAll(a.tasksQueue,a),a.worker&&a.worker.alive()){if(0<a.tasksQueue.length){var o=a.tasksQueue[0];(a.initStatus===r.conststring.initReady||"init"===o.func)&&(delete a.tasksQueue[0],a.tasksQueue.splice(0,1),a._exec(o))}}else a.worker&&!a.worker.alive()&&0<a.tasksQueue.length&&"init"!=a.tasksQueue[0].func?(a.worker=null,a._init()):0<a.tasksQueue.length&&a._getWorker()},this._log=function(o,c){"function"==typeof c.logFunc?c.logFunc(o,c.context):r.WasmEnv.log(o,r.conststring.logDebug)},this._logAll=function(o,c){r.WasmEnv.logLevel===r.conststring.logAll&&this._log(o,c)},this._handleReject=function(o,c,l){var m=c;return"object"!=typeof m&&((m={}).code=l,m.message=c),this.terminated?o.resolve(m):o.reject(m)},this._handleBasicResult=function(o,c){return delete o.code,delete o.message,o},this._handleBooleanResult=function(o,c){return!0},this._createImageResult=function(o,c,l){return l?null!=c?new Blob([o],{type:c}):new Blob([o]):o},this._handleImageData=function(o,c){if("object"==typeof o.imageData)if(null!=o.imageCount&&1<o.imageCount)for(var l=0;l<o.imageCount;l++)o.imageData[l]=c.context._createImageResult(o.imageData[l],o.blobType,c.params.returnBlob);else o.imageData=c.context._createImageResult(o.imageData,o.blobType,c.params.returnBlob);return"object"==typeof o.pdfData&&(o.pdfData=c.context._createImageResult(o.pdfData,o.blobType,c.params.returnBlob)),o},this._handleResult=function(o,c){void 0===(o=c.context._getResult(o)).code||!o.code&&"Successful."===o.message?(o=c.handleResult(o,c),a._dispatchQueuedTasks(),(c=c.resolve)(o)):(o={code:o.code,message:o.code===r.error.code.wasmException?r.Enum_ErrorMessage.WASM_EXCEPTION_ERROR:o.message},this.terminated?c.resolve(o):c.reject(o))},this._getResult=function(o){try{return"string"==typeof o?JSON.parse(o):o}catch{return o}},this._exec=function(o){var c=a.worker;c.setLogCallback(a._log,a),a._logAll(o,a);try{c.exec(o.func,o.params).then(function(l){a._log(l,a),a._handleResult(a._getResult(l),o)}).catch(function(l){a._log(l,a),a._dispatchQueuedTasks();var m=l;"object"==typeof l&&null!=l.message&&(m=l.message),l={code:r.error.code.wasmJsWorkerRunFailed,message:m},a.terminated?o.resolve(l):o.reject(l)})}catch(l){a._dispatchQueuedTasks(),a._log(l,a),c={code:r.error.code.wasmJsWorkerRunException,message:l.message,stack:l.stack},a.terminated?o.resolve(c):o.reject(c)}},this._cancelAllTasks=function(o,c){for(var l=n.makeIterator(a.tasksQueue),m=l.next();!m.done;m=l.next())if(void 0!==(m=m.value)){var I={code:o,message:c};a.terminated?m.resolve(I):m.reject(I)}a.tasksQueue=[]},this._createTask=function(o,c,l){var m={id:++this.lastTaskId};return m.promise=new Promise(function(I,p){m.resolve=I,m.reject=p}),m.func=o,m.params={moduleName:this.name,insId:this.instanceId,fetchOptions:r.WasmEnv.fetchOptions,initHeapSize:r.WasmEnv.wasmHeap[this.moduleInfo.poolIndex].initHeapSize},m.context=this,m.handleResult=typeof l<"u"&&l?l:this._handleBasicResult,m.params.input=typeof c<"u"&&c?c:"",m.params.returnType="",m.params.returnBlob=!0,m},this._addTask=function(o,c){return""===this.initStatus?o.reject({code:r.error.code.wasmJsObjectNotInit,message:this.terminated?"object has been disposed":"object not init"}):this.initStatus===r.conststring.initFailed?o.reject({code:r.error.code.wasmJsObjectInitFailed,message:a.initError}):(c?a.tasksQueue.unshift(o):a.tasksQueue.push(o),a._dispatchQueuedTasks()),o.promise},this._init=function(){var o=this._createTask("init");o.params.key=this.license,o.params.uuid=this.uuid,o.params.licMode=this.licMode,o.params.val={nv:this.nv,mb:this.mb,dm:this.dm},o.handleResult=function(c,l){return l.context.initStatus=r.conststring.initReady,c},this.initStatus=r.conststring.initPending,this._addTask(o,!0),o.promise.then(function(c){a._log(a.name+" init return: ",a),a._log(c,a)}).catch(function(c){a.initStatus=r.conststring.initFailed,a.initError=c.message,a._log(a.name+" init failed",a),a._log(c,a),a._cancelAllTasks(r.error.code.wasmJsObjectInitFailed,c.message)})},this._destroy=function(){var o=this._createTask("destroy");return this._addTask(o),o.promise},this._terminate=function(o){var c=this._destroy();this.terminated=!0;var l=r.WasmEnv.getWorkerPool(a.moduleInfo.poolIndex);l&&l.removeInstanceInWorker(a.moduleInfo,a.worker,a.instanceId,o),c.then(function(m){a.worker=null,a._log(a.name+" destroy return: ",a),a._log(m,a)}).catch(function(m){a.worker=null,a._log(a.name+" destroy failed",a),a._log(m,a)}),this.initStatus=""},this._readFile=function(o,c){return new Promise(function(l,m){r.readFile(o).then(function(I){l(I)},function(I){a._handleReject(c,I,r.error.code.wasmJsReadFileFailed)}).catch(function(I){a._handleReject(c,I,r.error.code.wasmJsReadFileFailed)})})},this._init()},r.ImageIoBase.prototype.terminate=function(s){this._terminate(s??!0)},r.ImageIoBase.prototype.downloadData=function(s,i,u,f){return s=s||Date.now()+"",new Promise(function(a,o){if(i){if("base64"===u){var c=r.base64DecToArr(i).buffer;c=new Blob([c],{type:"pdf"==f?"application/pdf":"jpg"==f?"image/jpeg":"image/"+f}),c=URL.createObjectURL(c)}else"blob"===u?c=i:o(r.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!");s=s+"."+f,window.navigator.msSaveBlob&&fetch(c).then(function(l){return l.arrayBuffer()}).then(function(l){l=new Blob([l]),window.navigator.msSaveOrOpenBlob(l,s),a(s)}),(o=document.createElement("a")).href=c,o.download=s,o.click(),a(s)}else o(r.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!")}).catch(function(a){return Promise.reject(a)})},r.Imagecore=function(s,i,u){r.ImageIoBase.call(this,s=s||r.WasmEnv.productKey,r.WasmEnv.imgCore,i,u),this.saveImageInner=function(f,a,o,c,l,m,I,p,g,C){var _=this;a=a??this.inputType,o=o??0,c=c??0,l=l??24,m=m??96,I=I??96,p=p??this.outputType,g=g??this.jpegQuality,C=C??r.Enum_ReturnType.RT_AUTO;var v=_._createTask("SaveImage");return _._readFile(f,v).then(function(T){v.params.input=[T,a,o,c,l,m,I,p,g],v.params.returnType=C,v.params.returnBlob=C!=r.Enum_ReturnType.RT_BASE64,v.handleResult=_._handleImageData,_._addTask(v)}),v.promise}},r.Imagecore.prototype=Object.create(r.ImageIoBase.prototype),r.Imagecore.prototype.constructor=r.Imagecore,r.Imagecore.prototype.getImageFormat=function(s){var i=this,u=i._createTask("GetImageFormat");return i._readFile(s,u).then(function(f){u.params.input=f,i._addTask(u)}),u.promise},r.Imagecore.prototype.readImageInfo=function(s){var i=this,u=i._createTask("ReadImageInfo");return i._readFile(s,u).then(function(f){u.params.input=f,i._addTask(u)}),u.promise},r.Imagecore.prototype.getMD5=function(s){var i=this,u=i._createTask("GetMD5");return i._readFile(s,u).then(function(f){u.params.input=f,u.handleResult=function(a,o){return a.MD5},i._addTask(u)}),u.promise},r.Imagecore.prototype.getLicenseInfo=function(){return this._addTask(this._createTask("GetLicenseInfo"))},r.Imagecore.prototype.getAesResult=function(s){return this._addTask(this._createTask("GetAesResult",[s??""]))},r.Imagecore.prototype.saveImage=function(s,i,u,f,a){return this.saveImageInner(s,null,null,null,null!=a&&a?1:null,null,null,i,u,f)},r.Imagecore.prototype.readImage=function(s,i,u,f){i=i??this.outputType,u=u??this.jpegQuality,f=f??!1;var a=this,o=a._createTask("ReadImage");return a._readFile(s,o).then(function(c){o.params.input=[c,i,u],o.params.returnType=f?r.Enum_ReturnType.RT_BASE64:r.Enum_ReturnType.RT_AUTO,o.params.returnBlob=!f,o.handleResult=a._handleImageData,a._addTask(o)}),o.promise},r.Imagecore.prototype.openTiff=function(s){var i=this,u=i._createTask("LoadTiff");return i._readFile(s,u).then(function(f){u.params.input=f,i._addTask(u)}),u.promise},r.Imagecore.prototype.readTiff=function(s,i,u,f,a,o){return this._readTiff(s,i,u).then(function(c){var l={imageWidth:c.imageWidth,imageHeight:c.imageHeight,imageBitDepth:c.imageBitDepth,imageXResolution:c.imageXResolution,imageYResolution:c.imageYResolution};return o&&(l.imageWidth>o||l.imageHeight>o)?r.ImageProcWrapper.resizeImageWithMeta(c.imageData,l,f,a,o):c})},r.Imagecore.prototype._readTiff=function(s,i,u){s=s??0,i=i??this.outputType,u=u??this.returnImageAsBase64;var f=this._createTask("ReadTiffPage");return f.params.input=[s,i],f.params.returnType=u?r.Enum_ReturnType.RT_BASE64:r.Enum_ReturnType.RT_AUTO,f.params.returnBlob=!u,f.handleResult=this._handleImageData,this._addTask(f)},r.Imagecore.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))},r.Imagecore.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))},r.Imagecore.prototype.appendImage=function(s,i,u,f,a){i=i??this.inputType,u=u??this.tiffFormat,f=f??this.jpegQuality,a=a??!1;var o=this,c=o._createTask("AppendImageToTiff");return o._readFile(s,c).then(function(l){c.params.input=[l,i,u,f,a],c.handleResult=o._handleBooleanResult,o._addTask(c)}),c.promise},r.Imagecore.prototype.addTag=function(s,i,u){return this._addTask(this._createTask("AddTagToNextPage",[s,i,u??!1],this._handleBooleanResult))},r.Imagecore.prototype.getTiff=function(s){var i=this._createTask("GetTiffStream");return i.handleResult=this._handleImageData,i.params.returnType=s??r.Enum_ReturnType.RT_AUTO,i.params.returnBlob=s!=r.Enum_ReturnType.RT_AUTO,this._addTask(i)},r.Imagecore.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(s,i){return s.memoryUsed}))},r.Imagecore.prototype.getMultiPartFile=function(s,i){return this._addTask(this._createTask("ds_get_file",[s,i],function(u,f){return u}))},r.ImageProc=function(s,i,u){r.ImageIoBase.call(this,s=s||r.WasmEnv.productKey,r.WasmEnv.imgProc,i,u)},r.ImageProc.prototype=Object.create(r.ImageIoBase.prototype),r.ImageProc.prototype.constructor=r.ImageProc,r.ImageProc.prototype.initImage=function(s,i,u,f,a){i=i??!1,u=u??0,f=f??0,a=a??!1;var o=this,c=o._createTask("InitImageObject");return c.params.input=[s,u,f],i||a?(c.params.input.push(i?r.Enum_ImageType.IT_RGBA:r.Enum_ImageType.IT_BGRA),o._addTask(c)):o._readFile(s,c).then(function(l){c.params.input[0]=l,c.params.input.push(r.Enum_ImageType.IT_ALL),o._addTask(c)}),c.promise},r.ImageProc.prototype.rotate=function(s,i,u,f){return(0>(s=s??0)||360<s)&&0>(s%=360)&&(s+=360),this._addTask(this._createTask("RotateEx",[s,u??!1,f??3,i??"FFFFFF"],this._handleBooleanResult))},r.ImageProc.prototype.flip=function(s){s=s??1;var i=this._createTask("");return i.handleResult=this._handleBooleanResult,1===s?i.func="Flip":-1===s&&(i.func="Mirror"),this._addTask(i),i.promise},r.ImageProc.prototype.erase=function(s,i,u,f,a){a=a??"FFFFFF";var o=this._createTask("Erase");return o.handleResult=this._handleBooleanResult,o.params.input=[s,i,u,f,a],this._addTask(o),o.promise},r.ImageProc.prototype.crop=function(s,i,u,f){return this._addTask(this._createTask("Crop",[s,i,u,f],this._handleBooleanResult))},r.ImageProc.prototype.resize=function(s,i,u){return this._addTask(this._createTask("ChangeImageSize",[s,i,u??5],this._handleBooleanResult))},r.ImageProc.prototype.toGrayscale=function(s){1>(s=s??1)&&(s=1),3<s&&(s=3);var i="";return 1===s?i="0":2===s?i="3;3;720;1.05":3===s&&(i="3;5;1080;1.05"),this._addTask(this._createTask("ConvertToGrayScale",i,this._handleBooleanResult))},r.ImageProc.prototype.toBinary=function(s,i){1>(i=i??1)&&(i=1),3<i&&(i=3);var u="";return null!=s&&(s?u="1":1===i?u="0":2===i?u="2;3;720;1.05":3===i&&(u="2;5;1080;1.05")),this._addTask(this._createTask("ConvertToBWScale",u,this._handleBooleanResult))},r.ImageProc.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))},r.ImageProc.prototype.setImageWidth=function(s,i){return this._addTask(this._createTask("SetImageWidth",[s,i??"FFFFFF"],this._handleBooleanResult))},r.ImageProc.prototype.setImageHeight=function(s,i){return this._addTask(this._createTask("SetImageHeight",[s,i??"FFFFFF"],this._handleBooleanResult))},r.ImageProc.prototype.setDPI=function(s,i,u,f,a,o){return this._addTask(this._createTask("SetDPI",[s,i,u,f,a??!1,o],this._handleBooleanResult))},r.ImageProc.prototype.getImage=function(s,i,u,f,a,o,c,l){return s=s??this.jpegQuality,i=i??!0,f=f??0,a=a??0,o=o??0,c=c??!0,l=null!=u&&u&&null==l?r.Enum_ImageType.IT_JPG:l??r.Enum_ImageType.IT_ALL,(u=this._createTask("GetCurrentImage")).params.input=[l,f,a,o,!1,s,i],u.params.returnBlob=c,u.handleResult=this._handleImageData,this._addTask(u)},r.ImageProc.prototype.getSkewAngle=function(s){return this._addTask(this._createTask("GetSkewAngle",[s??""],function(i,u){return i.skewAngle}))},r.ImageProc.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))},r.ImageProc.prototype.detectDocument=function(s,i,u,f,a){return this._addTask(this._createTask("DocumentDetect",[s??2,(i??75)/100,u??100,(f??0)/255,a??""]))},r.ImageProc.prototype.perspective=function(s,i,u,f,a,o,c,l){return this._addTask(this._createTask("Perspective",[s,i,u,f,a,o,c,l],this._handleBooleanResult))},r.ImageProc.prototype.changeBrightness=function(s,i){return s=s??0,0!=(i=i??1)&&1!=i&&(i=0),this._addTask(1===i?this._createTask("ChangeBrightnessAndContrast",[s,0],this._handleBooleanResult):this._createTask("ChangeBrightness",[Math.floor(s/1e3*255)],this._handleBooleanResult))},r.ImageProc.prototype.changeContrast=function(s,i){return s=s??0,0!=(i=i??1)&&1!=i&&(i=0),this._addTask(1===i?this._createTask("ChangeBrightnessAndContrast",[0,s],this._handleBooleanResult):this._createTask("ChangeContrast",[1+s/1e3],this._handleBooleanResult))},r.ImageProc.prototype.removeShadow=function(s,i){i=i??1.05,1>(s=s??1)&&(s=1),3<s&&(s=3);var u="5";return 1===s?u+=";3;720;"+i:2===s?u+=";5;1080;"+i:3===s&&(u+=";10;0;"+i),this._addTask(this._createTask("ShadowRemovel",[u],this._handleBooleanResult))},r.ImageProc.prototype.enhanceAndSharpenImage=function(){return this._addTask(this._createTask("EnhanceAndSharpen",[""],this._handleBooleanResult))},r.ImageProc.prototype.brighten=function(){return this._addTask(this._createTask("Brighten",[""],this._handleBooleanResult))},r.ImageProc.prototype.getBlurryScore=function(){return this._addTask(this._createTask("GetBlurScore",[""],function(s,i){return s.blurryScore}))},r.ImageProc.prototype.drawQuadrangle=function(s,i,u,f,a,o,c,l,m,I){return strParameter=(m??"FFFFFF")+";"+(I??5),this._addTask(this._createTask("DrawQuadrangle",[s,i,u,f,a,o,c,l,strParameter],this._handleBooleanResult))},r.ImageProcWrapper={},r.ImageProcWrapper.resize=function(s,i,u,f,a,o){if(0>=f||f>=i&&f>=u)return{imageData:s};o=o??!1;var c=new r.ImageProc(r.WasmEnv.productKey);return c.initImage(s).then(function(){var l=a??5,m=i>u?i/f:u/f,I=Math.floor(i/m+.5);return m=Math.floor(u/m+.5),o?c.resize(I,m,l).then(function(){return c.toBinary(!1)}):c.resize(I,m,l)}).then(function(){return c.getImage()}).then(function(l){return c.terminate(),l},function(l){return c.terminate(),l})},r.ImageProcWrapper.createImage=function(s){var i,u,f,a,o,c,l,m,I,p,g,P,E,M,O,R,F,B,A;return n.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return i=new r.ImageProc(r.WasmEnv.productKey),N.setFinallyBlock(2),u={src:null,result:null,preview:null},o=(f=s.source).imageWidth||f.width,c=f.imageHeight||f.height,l=f.imageData||f.data,null==(a=s.output)||null==a.orgImage&&null==a.previewImage?N.return(u):(p=null!=s.doPerspective&&s.doPerspective,g=f.angle||0,N.yield(i.initImage(l,m=null!=f.rgba&&f.rgba,o,c,I=null!=f.bgra&&f.bgra),4));case 4:if(u.src=N.yieldResult.srcBuffer,!p||!s.polygon){N.jumpTo(5);break}return N.yield(i.perspective(s.polygon.points[0],s.polygon.points[1],s.polygon.points[2],s.polygon.points[3],s.polygon.points[4],s.polygon.points[5],s.polygon.points[6],s.polygon.points[7]),5);case 5:if(0==g){N.jumpTo(7);break}return(0>g||360<g)&&0>(g%=360)&&(g+=360),N.yield(i.rotate(g),7);case 7:if(!a.orgImage){N.jumpTo(9);break}return N.yield(i.getImage(a.orgImage.quality,!1,m|I,null!=f.imageBitDepth?f.imageBitDepth:void 0,null!=f.imageXResolution?f.imageXResolution:void 0,null!=f.imageYResolution?f.imageYResolution:void 0,a.orgImage.returnBlob??!0,a.orgImage.returnType),10);case 10:P=N.yieldResult,a.orgImage.returnType==r.Enum_ImageType.IT_BGRA?P.bgra=!0:a.orgImage.returnType==r.Enum_ImageType.IT_RGBA&&(P.rgba=!0),u.result=P;case 9:if(!a.previewImage){N.jumpTo(11);break}return E=o,M=c,(90==g||270==g)&&(E=c,M=o),O=Math.min(a.previewImage.width/E,a.previewImage.height/M),90==g||270==g?(R=Math.floor(c*O+.5),F=Math.floor(o*O+.5)):(R=Math.floor(o*O+.5),F=Math.floor(c*O+.5)),N.yield(i.resize(R,F,a.previewImage.nInterplationMethod),12);case 12:if(!s.polygon||p){N.jumpTo(13);break}return B=s.polygon.points,0!=g&&(B=function d(s,i,u,f){for(var a=[],o=0;o<s.length;o+=2){var c=s[o],l=s[o+1];if(90==i)var m=u-l;else 180==i?(m=u-c,c=f-l):270==i?(m=l,c=f-c):(m=c,c=l);a.push(m,c)}return a}(B,g,E,M)),N.yield(i.drawQuadrangle(Math.floor(B[0]*O+.5),Math.floor(B[1]*O+.5),Math.floor(B[2]*O+.5),Math.floor(B[3]*O+.5),Math.floor(B[4]*O+.5),Math.floor(B[5]*O+.5),Math.floor(B[6]*O+.5),Math.floor(B[7]*O+.5),s.polygon.strokeColor,s.polygon.lineWidth),13);case 13:return N.yield(i.getImage(a.previewImage.quality,!0,m|I,void 0,void 0,void 0,a.previewImage.returnBlob??!0,a.previewImage.returnType),15);case 15:A=N.yieldResult,a.previewImage.returnType==r.Enum_ImageType.IT_BGRA?A.bgra=!0:a.previewImage.returnType==r.Enum_ImageType.IT_RGBA&&(A.rgba=!0),u.preview=A;case 11:return N.return(u);case 2:N.enterFinallyBlock(),i.terminate(),N.leaveFinallyBlock(0)}})},r.ImageProcWrapper.resizeImageWithMeta=function(s,i,u,f,a){var o,c;return n.asyncExecutePromiseGeneratorProgram(function(l){return o=f||85,c=new r.ImageProc(r.WasmEnv.productKey),l.return(c.initImage(s).then(function(){var m=u??5;if(i.imageWidth>i.imageHeight)var I=a,p=Math.floor(i.imageHeight*a/i.imageWidth+.5);else I=Math.floor(i.imageWidth*a/i.imageHeight+.5),p=a;return 1==i.imageBitDepth?c.resize(I,p,m).then(function(){return c.toBinary(!1)}):c.resize(I,p,m)}).then(function(){var m=i.imageBitDepth;return c.getImage(o,!1,!1,m,i.imageXResolution,i.imageYResolution,!0,1==m?r.Enum_ImageType.IT_PNG:r.Enum_ImageType.IT_JPG)}).then(function(m){return c.terminate(),m},function(m){return c.terminate(),m}))})},r.ImageProcWrapper.getMax4kImage=function(s,i,u,f){var a,o,c,l,m,I,p,g;return n.asyncExecutePromiseGeneratorProgram(function(_){switch(_.nextAddress){case 1:if(a=u||85,!r.navInfo.biPhone&&!r.navInfo.biPad){_.jumpTo(2);break}return c=new r.Imagecore(r.WasmEnv.productKey,1),_.yield(c.readImageInfo(s),3);case 3:o={imageWidth:(l=_.yieldResult).imageWidth,imageHeight:l.imageHeight,imageBitDepth:l.imageBitDepth,imageXResolution:l.imageXResolution,imageYResolution:l.imageYResolution},c.terminate();case 2:return o&&f&&(o.imageWidth>f||o.imageHeight>f)?_.return(r.ImageProcWrapper.resizeImageWithMeta(s,o,i,u,f)):(m=new r.ImageProc(r.WasmEnv.productKey),_.yield(m.initImage(s),5));case 5:return o&&(I=o.imageBitDepth,p=o.imageXResolution,g=o.imageYResolution),_.yield(m.getImage(a,!1,!1,I,p,g,!0,1==I?r.Enum_ImageType.IT_PNG:r.Enum_ImageType.IT_JPG),6);case 6:return _.return(_.yieldResult)}})},r.PdfReader=function(s,i,u){r.ImageIoBase.call(this,s=s||r.WasmEnv.productKey,r.WasmEnv.pdfReader,i,u),this.resolution=200,this.readMode=3,this.outputType=r.Enum_ImageType.IT_ALL},r.PdfReader.prototype=Object.create(r.ImageIoBase.prototype),r.PdfReader.prototype.constructor=r.PdfReader,r.PdfReader.prototype.open=function(s,i){i=i??"";var u=this,f=u._createTask("LoadPdf");return u._readFile(s,f).then(function(a){f.params.input=[a,i],f.handleResult=function(o,c){var l=r.base64Decode(o.infoBase64);try{try{l.replace(/\\/gi,"\\\\");var m=JSON.parse(l)}catch{m=l}return{PdfCount:o.pageCount,PdfInfo:m,isTextBased:o.isTextBased}}catch(I){c.reject({code:r.error.code.wasmJsInvalidJson,message:I.message,stack:I.stack})}},u._addTask(f)}),f.promise},r.PdfReader.prototype.readPage=function(s,i,u,f,a,o,c,l,m){return this._readPage(s,i,u,f,a,o).then(function(I){var p={imageWidth:I.imageWidth,imageHeight:I.imageHeight,imageBitDepth:I.imageBitDepth,imageXResolution:I.imageXResolution,imageYResolution:I.imageYResolution};return m&&(p.imageWidth>m||p.imageHeight>m)?r.ImageProcWrapper.resizeImageWithMeta(I.imageData,p,c,l,m):I})},r.PdfReader.prototype._readPage=function(s,i,u,f,a,o){s=s??0,i=i??this.resolution,u=u??this.readMode,f=f??this.outputType,o=o??this.returnImageAsBase64,a=a??!1;var c=this._createTask("ReadPdfPage");return c.params.input=[s,i,u,f,a],c.params.returnType=o?r.Enum_ReturnType.RT_BASE64:r.Enum_ReturnType.RT_AUTO,c.params.returnBlob=!o,c.handleResult=this._handleImageData,this._addTask(c)},r.PdfReader.prototype.close=function(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))},r.PdfWriter=function(s,i,u){r.ImageIoBase.call(this,s=s||r.WasmEnv.productKey,r.WasmEnv.pdfWriter,i,u),this._setPdfSettings=function(f){var a={};if(null!=f&&"object"==typeof f)for(var o in f)a[o]=f[o];return a}},r.PdfWriter.prototype=Object.create(r.ImageIoBase.prototype),r.PdfWriter.prototype.constructor=r.PdfWriter,r.PdfWriter.prototype.initPdfSetting=function(s){var i=this._createTask("InitPdfWriter");return i.params.input=JSON.stringify(this._setPdfSettings(s)),i.handleResult=this._handleBooleanResult,this._addTask(i)},r.PdfWriter.prototype.appendPage=function(s,i){var u=this,f=u._createTask("AddPageFromImageFileStream");return i=i??!1,u._readFile(s,f).then(function(a){f.params.input=[a,i],f.handleResult=u._handleBooleanResult,u._addTask(f)}),f.promise},r.PdfWriter.prototype.writePdf=function(s){var i=this._createTask("GetPdfContent");return i.params.returnType=s??r.Enum_ReturnType.RT_AUTO,i.params.returnBlob=s!=r.Enum_ReturnType.RT_AUTO,i.handleResult=this._handleImageData,this._addTask(i)},r.pdf=r.pdf||{},r.pdf.IsModuleInstalled=function(){return!!r.isWasmSupport()&&r.WasmEnv.pdfReader.status==r.conststring.initReady&&r.WasmEnv.pdfWriter.status==r.conststring.initReady},r.WasmEnv.getLicenseInfo=function(s,i,u){return r.WasmEnv.productKey==s&&r.WasmEnv.licenseInfo?s=Promise.resolve(r.WasmEnv.licenseInfo):(r.WasmEnv.productKey=s,r.WasmEnv.licMode=null!=i&&i?1:0,r.WasmEnv.uuid=u??"",s=new Promise(function(f,a){var o=new r.Imagecore(r.WasmEnv.productKey);o.getLicenseInfo().then(function(c){o.terminate(),r.WasmEnv.licenseInfo=c,f(c)},function(c){o.terminate(),a(c)})})),s},r.WasmEnv.getWorkerPoolSize=function(){var s=r.WorkerPool.Instances;return s?s.length:0},r.WasmEnv.getMemoryUsed=function(){var s=r.WorkerPool.Instances;if(s){for(var i=[],u=(s=n.makeIterator(s)).next();!u.done;u=s.next())i.push(null===(u=u.value)||u.terminated?0:u.getMemoryUsed());return i}return[]},r.WasmEnv.getWasmNames=function(){for(var s=[],i=n.makeIterator(r.WasmEnv.moduleNames),u=i.next();!u.done;u=i.next())s.push(r.WasmEnv.buildWasmFileName(r.WasmEnv[u=u.value].prefixName,r.WasmEnv[u].ver,r.conststring.wasmExtension,!1));return s}}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.DBR=w.DBR||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},function(){w.BarcodeReaderAddon=w.BarcodeReaderAddon||{};var e=w.BarcodeReaderAddon;e.Version="8.6.0.1026",e._decoding=!1,e._decodeQueue=[],e._decodeNext=function(){if(0!=e._decodeQueue.length){var t=e._decodeQueue[0],n=t.method,r=t.args;e._decodeQueue.splice(0,1),n.apply(null,r)}else e._decoding=!1},e._defaultRuntimeSettingsStr="",e._defaultTemplateStr="",e._wasmInstance=!1,e._activeXInstance=!1,e.BarcodeReaderException=function(){var n,r=arguments[0],h=arguments[1],d=w.DBR.EnumErrorCode.DBR_UNKNOWN;return"number"==typeof r?(d=r,n=new Error(h)):n=new Error(r),n.code=d,n},e.RemoveNonPrintableChar=function(t){return w.Lib.isString(t)?t.replace(/[^\x20-\x7E]|(\\")/g,""):t},e.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."},e._activeXMaxIEVersion=9,e.logLevel=3,w.DBR.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0},w.DBR.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0},w.DBR.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0},w.DBR.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0},w.DBR.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2},w.DBR.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0},w.DBR.EnumClarityCalculationMethod={ECCM_CONTRAST:1},w.DBR.EnumClarityFilterMode={CFM_GENERAL:1},w.DBR.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0},w.DBR.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0},w.DBR.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2},w.DBR.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0},w.DBR.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0},w.DBR.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-1e4,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061,DMERR_FAILED_TO_REACH_LTS:-20200},w.DBR.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0},w.DBR.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12},w.DBR.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0},w.DBR.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32},w.DBR.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4},w.DBR.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192},w.DBR.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64},w.DBR.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4},w.DBR.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3},w.DBR.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0},w.DBR.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2},w.DBR.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3},w.DBR.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0},w.DBR.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32},w.DBR.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0},w.DBR.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0},w.DBR.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0},w.DBR.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}}(),w.AddonReady(function(e,t){var n,r=w.BarcodeReaderAddon;function h(i){return i&&i instanceof ArrayBuffer}r.Class=function(){var i=w.Lib,u=function(){this._runtimeSettings=null,this._initSettingsContent=null,this._tplContentArr=[],this.bWasm=!1};u.prototype._decodeBlob=function(p,g){var C=this;return new Promise(function(_){if(!(p instanceof Blob))throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.");_()}).then(function(){return C._innerDecode(0,p,g)})},u.prototype._decodeArrayBuffer=function(p,g){var C=this;return new Promise(function(_){if(!(p instanceof ArrayBuffer))throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.");_()}).then(function(){return C._innerDecode(0,p,g)})},u.prototype._decodeUint8Array=function(p,g){var C=this;return new Promise(function(_){if(!(p instanceof Uint8Array||Rt.Uint8ClampedArray&&p instanceof Uint8ClampedArray))throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.");_()}).then(function(){return C._innerDecode(0,p,g)})},u.prototype._decodeImage=function(p,g){var C=this;return new Promise(function(_){if(!(p instanceof HTMLImageElement))throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";g=g||"",_()}).then(function(){return"data:image/"==p.src.substring(0,11)?C._decodeBase64(p.src,g):C._decodeUrl(p.src,g).catch(function(_){if(r.logLevel>=3&&console&&console.warn&&(console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead."),console.warn(_)),!Rt.HTMLCanvasElement)return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."));var v=document.createElement("canvas");return v.width=p.naturalWidth,v.height=p.naturalHeight,v.getContext("2d").drawImage(p,0,0),C._decodeCanvas(v,g)})})},u.prototype._decodeCanvas=function(p,g){var C=this;return new Promise(function(_){if(!(p instanceof HTMLCanvasElement))throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";g=g||"",p.toBlob?p.toBlob(function(v){_(v)}):p.msToBlob?p.msToBlob(function(v){_(v)}):_(p.toDataURL())}).then(function(_){return p.toBlob||p.msToBlob?C._decodeBlob(_,g):C._decodeBase64(_,g)})},u.prototype._decodeVideo=function(p){var C,g=this,_=arguments;return new Promise(function(v){if(!(p instanceof HTMLVideoElement))throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.");if(p.crossOrigin&&"anonymous"!=p.crossOrigin)throw"cors";var T,D,P,E,M,O;_.length<=2?(T=D=0,P=M=p.videoWidth,E=O=p.videoHeight):_.length<=4?(T=D=0,P=p.videoWidth,E=p.videoHeight,M=_[1],O=_[2]):(T=_[1],D=_[2],P=_[3],E=_[4],M=_[5],O=_[6]),C="string"==typeof _[_.length-1]?_[_.length-1]:"";var R=document.createElement("canvas");R.width=M,R.height=O,R.getContext("2d").drawImage(p,T,D,P,E,0,0,M,O),v(R)}).then(function(v){return g._decodeCanvas(v,C)})},u.prototype._decodeBase64=u.prototype.decodeBase64String=function(p,g){var C=this;return new Promise(function(_){if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.");"data:image/"==p.substring(0,11)&&(p=p.substring(p.indexOf(",")+1)),_()}).then(function(){return C._innerDecode(1,p,g)})},u.prototype._decodeUrl=function(p,g){var C=this;return p&&p.indexOf&&(0==p.indexOf("dwt://")||0==p.indexOf("dcs://"))?C._decodeDynamsoftServiceInnerUrl(p,g):r._wasmInstance?r._wasmInstance.decode(p):new Promise(function(_,v){var T;if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.");g=g||"",r._activeXInstance?((T=new ActiveXObject("MSXML2.XMLHTTP")).open("GET",p,!0),T.overrideMimeType?T.overrideMimeType("text/plain; charset=x-user-defined"):T.setRequestHeader("Accept-Charset","x-user-defined"),T.onreadystatechange=function(){4==T.readyState&&_(new VBArray(T.responseBody).toArray())},T.send("")):((T=new XMLHttpRequest).open("GET",p,!0),T.responseType="arraybuffer",T.send(),T.onloadend=function(){_(this.response)},T.onerror=function(){v(Error(T.error))})}).then(function(_){return r._activeXInstance?C._activeXDecodeArray(_,g):C._decodeArrayBuffer(_,g)})},u.prototype._decodeDynamsoftServiceInnerUrl=function(p,g){var C=this;return new Promise(function(_){if(!("string"==typeof p||"object"==typeof p&&p instanceof String))throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.");if(0!=p.indexOf("dwt://")&&0!=p.indexOf("dcs://"))throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.");_()}).then(function(){return C._innerDecode(4e3,p,g)})},u.prototype._activeXDecodeArray=function(p,g){var C=this;return new Promise(function(_,v){if(!(p instanceof Array))throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.");g=g||"";try{_(w.Lib.btoa(String.fromCharCode.apply(String,p)))}catch(T){v(T)}}).then(function(_){return C._decodeBase64(_,g)})},u.prototype._activeXDecodeHandle=function(p,g){var C=this;return new Promise(function(_){g=g||"",_()}).then(function(){return C._innerDecode(4001,p,g)})},u.prototype._decode=u.prototype.decode=function(p,g){return r._activeXInstance?"string"==typeof p||p instanceof String?this._activeXDecodeHandle(p,g):Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'.")):r._wasmInstance?r._wasmInstance.decode(p):Rt.Blob&&p instanceof Blob?this._decodeBlob(p,g):Rt.ArrayBuffer&&p instanceof ArrayBuffer?this._decodeArrayBuffer(p,g):Rt.Uint8Array&&p instanceof Uint8Array||Rt.Uint8ClampedArray&&p instanceof Uint8ClampedArray?this._decodeUint8Array(p,g):p instanceof Array?this._activeXDecodeArray(p,g):Rt.HTMLImageElement&&p instanceof HTMLImageElement?this._decodeImage(p,g):Rt.HTMLCanvasElement&&p instanceof HTMLCanvasElement?this._decodeCanvas(p,g):Rt.HTMLVideoElement&&p instanceof HTMLVideoElement?this._decodeVideo(p,g):isNaN(p)?"string"==typeof p||p instanceof String?"data:image/"==p.substring(0,11)?this._decodeBase64(p,g):this._decodeUrl(p,g):Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'.")):this._activeXDecodeHandle(p,g)},u.prototype._innerServiceCmd=function(p,g){return new Promise(function(C,_){var v={method:"ReadBarcode",parameter:[w.DWT.ProductKey,4002,"",""],updateSettings:p,initSettingsContent:g};r._activeXInstance?C(r._activeXInstance.Process(i.stringify(v),location.protocol+"//"+location.host)):(i.License.isLTS()?w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(D){return v.parameter.push(D.ar),v.parameter.push(D.cu),v.parameter.push(0),v.parameter.push(""),i.stringify(v)}):Promise.resolve(i.stringify(v))).then(function(D){return i.fetch(r._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:D,dataType:"arrayBuffer"})}).then(function(D){h(D)?C(String.fromCharCode.apply(null,new Uint8Array(D))):C(D)},function(D){var P="Init template & runtimeSettings failed.";D&&(P=[P," Http info: ",D.errorString," (",D.httpCode,")"].join("")),_(P)})})},u.prototype._innerDecode=function(p,g,C,_){var v=this;return v._runtimeSettings&&0==v._runtimeSettings.expectedBarcodesCount&&(v._runtimeSettings.expectedBarcodesCount=512),new Promise(function(T,D){var P={method:"ReadBarcode",parameter:[w.DWT.ProductKey,p,0!=p?g:null,C||""],updateSettings:v._runtimeSettings,conflictMode:1==v.conflictMode?"ignore":"overwrite",initSettingsContent:v._initSettingsContent,tplContent:function(){if(C)for(var R=0;R<v._tplContentArr.length;++R)if(C==v._tplContentArr[R].ImageParameter.Name)return i.stringify(v._tplContentArr[R]);return null}()},E=function(R,F,B){try{var b=o(R);if((!b||!b.textResults)&&D(new r.BarcodeReaderException(b.exception,b.description)),i.product.bHTML5Edition&&B&&B.config.data){var N,A=i.parse(B.config.data);if(i.isArray(A.parameter)&&A.parameter.length>2&&4e3==A.parameter[1])if(A.parameter.length>4&&A.parameter[4])b.textResults.imageid=A.parameter[4];else{var Y,ne;(ne=(Y=A.parameter[2]).indexOf("&index="))>=0&&(b.textResults.imageid=Y.substring(ne+7,Y.indexOf("&t=")))}}for(N=0;N<b.textResults.length;N++){var Ie=b.textResults[N];Ie.BarcodeText=Ie.barcodeText,b.exception!=w.DBR.EnumErrorCode.DBR_SUCCESS&&(Ie.exception=b.exception)}b.exception!=w.DBR.EnumErrorCode.DBR_SUCCESS&&(b.textResults.exception=b.exception,b.textResults.description=b.description),r._activeXInstance&&b.records&&(w.Lib.each(b.records,function(_e,ce){w.DWT.lavrf(ce,_e,w.DWT.EnumInstance.dwt_desktop)}),w.DWT.lavrf_(1,w.DWT.EnumInstance.dwt_desktop)),T(b.textResults)}catch(_e){D(_e)}};if(r._activeXInstance)i.License.isLTS()?w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(R){P.parameter.push(R.ar),P.parameter.push(R.cu),P.parameter.push(0),P.parameter.push(""),E(r._activeXInstance.Process(i.stringify(P),location.protocol+"//"+location.host))}):E(r._activeXInstance.Process(i.stringify(P),location.protocol+"//"+location.host));else{var M=r._urlRoot+"ReadBarcode";0==p&&(M+="/LoadZipFromBytes?cmd="+encodeURIComponent(i.stringify(P))),(0==p?Promise.resolve(g):i.License.isLTS()?w.DWT.lglic(w.DWT.EnumInstance.dwt_desktop).then(function(R){return P.parameter.push(R.ar),P.parameter.push(R.cu),P.parameter.push(0),P.parameter.push([i.product.getDWTPrefix(),i.product.getServerVersionInfo(),"/verify?id=",_,"&t=",i.getRandom()].join("")),i.stringify(P)}):Promise.resolve(i.stringify(P))).then(function(R){return i.fetch(M,{mode:"cors",method:"post",body:R,dataType:"arrayBuffer"})}).then(function(R,F,B){h(R)?E(String.fromCharCode.apply(null,new Uint8Array(R)),0,B):E(R,0,B)},function(R){var F="ReadBarcode request fail.";R&&(F=[F," Http info: ",R.errorString," (",R.httpCode,")"].join("")),D(Error(F))})}})};var o=r._handleRetJsonString=function(p){var g;if("string"==typeof p||"object"==typeof p&&p instanceof String)try{g=i.parse(p)}catch{g=i.parse(r.RemoveNonPrintableChar(p))}else g=p;if(!g)throw r.BarcodeReaderException(w.DBR.EnumErrorCode.DBR_UNKNOWN,r.errors.decodeResultEmpty);if(!("textResults"in g&&i.isArray(g.textResults)||g.exception==w.DBR.EnumErrorCode.DBR_SUCCESS))throw r.BarcodeReaderException(g.exception,g.description);return g};return u.prototype.getAllParameterTemplateNames=function(){for(var p=[],g=0;g<this._tplContentArr.length;++g)p.push(this._tplContentArr[g].ImageParameter.Name);return p},u.prototype.getRuntimeSettings=function(){var p=this;return p.bWasm?r._wasmInstance.getRuntimeSettings():(p._runtimeSettings||(p._runtimeSettings=i.parse(r._defaultRuntimeSettingsStr)),Promise.resolve(p._runtimeSettings))},u.prototype.updateRuntimeSettings=function(p){var C,g=this;if("string"==typeof p||"object"==typeof p&&p instanceof String){if("speed"==p||"balance"==p||"coverage"==p||"default"==p)return g.initRuntimeSettingsWithString("speed"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"balance"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':"coverage"==p?'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}':'{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}');C=p}else{if("object"!=typeof p)throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.");C=i.stringify(p)}var v=i.parse(C);return g.bWasm?r._wasmInstance.updateRuntimeSettings(v).then(function(){return r._wasmInstance.getRuntimeSettings()}):(g._runtimeSettings=v,g._initSettingsContent=null,g._innerServiceCmd(g._runtimeSettings,null).then(function(T){var D=r._handleRetJsonString(T);return g._runtimeSettings=D.settings,g._runtimeSettings||(g._runtimeSettings=i.parse(r._defaultRuntimeSettingsStr)),D.settings}))},u.prototype.resetRuntimeSettings=function(){var p=this;return p.bWasm?r._wasmInstance.resetRuntimeSettings().then(function(){return r._wasmInstance.getRuntimeSettings()}):(p._runtimeSettings=i.parse(r._defaultRuntimeSettingsStr),p._initSettingsContent=null,p._innerServiceCmd(p._runtimeSettings,null).then(function(g){var C=r._handleRetJsonString(g);return p._runtimeSettings=C.settings,p._runtimeSettings||(p._runtimeSettings=i.parse(r._defaultRuntimeSettingsStr)),C.settings}))},u.prototype.outputSettingsToString=function(p){if(!p)return r._defaultTemplateStr;for(var g=0;g<this._tplContentArr.length;++g)if(p==this._tplContentArr[g].ImageParameter.Name)return i.stringify(this._tplContentArr[g])},u.prototype.initRuntimeSettingsWithString=function(p){var g=this;if(!i.isString(p))throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.");return g.bWasm?r._wasmInstance.initRuntimeSettingsWithString(p).then(function(){return r._wasmInstance.getRuntimeSettings()}):(g._runtimeSettings=null,g._initSettingsContent=i.parse(p),g._innerServiceCmd(null,g._initSettingsContent).then(function(C){var _=r._handleRetJsonString(C);return g._runtimeSettings=_.settings,g._runtimeSettings||(g._runtimeSettings=i.parse(r._defaultRuntimeSettingsStr)),_.settings}))},u}(),r._dbr=!1,r._initH5=function(i,u){return new Promise(function(f,a){r._urlRoot=w.dcp._getPreUrl(w.dcp.detect.curPortIndex)+"dcp/dbr_"+r.Version.replace(/\./g,"")+"/",e.ajax({method:"POST",url:r._urlRoot+"VersionInfo?t="+e.getRandom(),data:'{"method":"VersionInfo"}',onSuccess:function(){f()},onError:function(){return a("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.")},dataType:"json",async:!0,timeout:800})}).then(function(){return r._dbr=new r.Class,r._dbr._innerServiceCmd(null,null)}).then(function(f){try{var a=r._handleRetJsonString(f);r._dbr._runtimeSettings=a.settings,r._defaultRuntimeSettingsStr=e.stringify(a.settings),r._defaultTemplateStr=e.stringify(a.outputSettings),i(r._dbr)}catch(o){u(Error("Init template & runtimeSettings failed: "+o.message)||o)}},function(f){u(f)})},r.dbrInitPromiseFun=function(i,u){var f=w.BarcodeReaderAddon,a=function(){w.DBR&&w.DBR.BarcodeReader&&w.DBR.BarcodeReader.createInstance&&w.DBR.BarcodeReader.createInstance().then(function(p){return w.DBR.EnumErrorCode.DMERR_FAILED_TO_REACH_LTS==w.DBR.BarcodeReader.lastErrorCode&&(w.DWT.licenseException.code=w.DBR.BarcodeReader.lastErrorCode,w.DWT.licenseException.message=w.DBR.BarcodeReader.lastErrorString),w.DBR.BarcodeReader._bNeverShowDialog=!0,w.DWT.dbrCanvasMaxWH&&(p._canvasMaxWH=w.DWT.dbrCanvasMaxWH),f._wasmInstance=p,p.getRuntimeSettings()}).then(function(p){f._dbr._runtimeSettings=p,f._defaultRuntimeSettingsStr=e.stringify(p),i(f._dbr)},u)};if(f._dbr)f._dbr.bWasm&&!f._wasmInstance?a():i(f._dbr);else{var o=w.Lib.timestamp,c=w.DWT.ResourcesPath,l=!w.navInfo.bWin||e.product.bHTML5Edition&&(!w.DWT.UseLocalService||e.env.bMobile||w.DWT.UseBarcodeAddonWasm),m=function(){if(l){if(!(w.DBR&&w.DBR.BarcodeReader||w.BarcodeReader||window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader))return;return w.DBR||(w.BarcodeReader?w.DBR={BarcodeReader:w.BarcodeReader}:window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader&&(w.DBR={BarcodeReader:window.DSBarcodeReader.BarcodeReader})),w.DBR.BarcodeReader.engineResourcePath=w.DWT.ResourcesPath+"/addon/dbrjs/",e.isString(w.DWT.sessionPassword)&&(w.DBR.BarcodeReader.sessionPassword=w.DWT.sessionPassword),e.isArray(w.DWT.licenseServer)&&(w.DBR.BarcodeReader.licenseServer=w.DWT.licenseServer),e.isString(w.DWT.handshakeCode)?w.DBR.BarcodeReader.handshakeCode=w.DWT.handshakeCode:e.isString(w.DWT.organizationID)?w.DBR.BarcodeReader.organizationID=w.DWT.organizationID:e.isString(w.DWT.ProductKey)&&(w.DBR.BarcodeReader.productKeys=w.DWT.ProductKey),e.showLoadingMsg(-1,"",w.MSG.Init_CompilingWasm),w.DBR.BarcodeReader._bUseFullFeature=!0,w.DBR.BarcodeReader._bNeverShowDialog=!0,f._dbr=new f.Class,f._dbr.bWasm=!0,void a()}if(e.product.bHTML5Edition)f._initH5(i,u);else{var g={method:"ReadBarcode",parameter:[w.DWT.ProductKey,4002,"",""]};if(!w.navInfoSync.bIE)return u(Error("The DBR init error."));try{f._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var C=f._activeXInstance.Process(e.stringify(g),location.protocol+"//"+location.host),_=e.parse(C);if(!_)return u(Error("The DBR init error."));if(!("settings"in _))return u(Error(_.description||"The DBR init error."));f._dbr=new f.Class,f._dbr._runtimeSettings=_.settings,f._defaultRuntimeSettingsStr=e.stringify(_.settings),"outputSettings"in _&&(f._defaultTemplateStr=e.stringify(_.outputSettings)),i(f._dbr)}catch(T){return u(Error("The DBR .dll is missing or not accessible: "+(T.message||T)))}}};if(l)if(e.detect.dbrwasmScriptLoaded)m();else{if(!function d(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var i=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(i instanceof WebAssembly.Module)return new WebAssembly.Instance(i)instanceof WebAssembly.Instance}}catch{}return!1}())return void u(Error(w.MSG.Err_BrowserNotSupportWasm));var I=e.getScript([c,"/addon/dbrjs/dbr.js",o].join(""),!0,function(p){e.detect.dbrwasmScriptLoaded=!0,m()});e.isString(w.DWT.handshakeCode)?I.setAttribute("data-productKeys",w.DWT.handshakeCode):e.isString(w.DWT.organizationID)?I.setAttribute("data-organizationID",w.DWT.organizationID):e.isString(w.DWT.ProductKey)&&I.setAttribute("data-productKeys",w.DWT.ProductKey)}else m()}},e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(i){var f,u=e.html5.Funs;n=w.dcp.b64bit?"dbrx64_"+w.BarcodeReaderAddon.Version+".dll":"dbr_"+w.BarcodeReaderAddon.Version+".dll",e.product.bHTML5Edition&&!i._isMobileMode()&&i._innerSend("GetAddOnVersion",u.makeParams("barcodereader",n),!0,!1,!1),f={BarcodeReader:{decode:function(a){return e.License.checkProductKey(i,{Core:!0})?!e.isNumber(a)||a<0||a>=i.HowManyImagesInBuffer?(e.Errors.IndexOutOfRange(i),Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))):new Promise(function(c){r._decoding?r._decodeQueue.push({method:c,args:[a]}):(r._decoding=!0,c(a))}).then(function(c){var l;if(e.product.bHTML5Edition){if(-1==(l=i._ImgManager.convertClientIndexToServerId(c)))throw e.Errors.IndexOutOfRange(i),setTimeout(r._decodeNext,0),r.BarcodeReaderException(i._errorCode,i._errorString)}else l=c;return new Promise(function(m,I){r.dbrInitPromiseFun(function(p){if(p.bWasm){var g=p.getRuntimeSettings();g=g.then(function(T){if(0==T.expectedBarcodesCount)return T.expectedBarcodesCount=512,p.updateRuntimeSettings(T)}),(g=(g=i._isMobileMode()?(g=g.then(function(){var T=i._ImgManager.convertServerIdToClientIndex(l);return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(T))})).then(function(T){return T.oriData?T.oriData:T.originalData}):g.then(function(){var T=i._ImgManager.convertServerIdToClientIndex(l);return i.GetImageURL(T,-1,-1)})).then(function(T){return T instanceof Blob||T instanceof ArrayBuffer?r._wasmInstance.decode(T):e.fetch(T,{mode:"cors",dataType:"blob"}).then(function(D){return r._wasmInstance.decode(D)})})).then(function(T){T.imageid=i.objImageIndexManager.convertServerIdToGuid(l),setTimeout(r._decodeNext,0),m(T)},function(T){var D="decode failed.";T&&(D=[D," ",T.errorString," (",T.httpCode,")"].join("")),setTimeout(r._decodeNext,0),I(Error(D))})}else{var C;if(!e.product.bHTML5Edition){var _=i.GetImagePartURL(C=l,-1,-1);return p._innerDecode(4001,_,"").then(function(T){T.imageid=i.IndexToImageID(C),setTimeout(r._decodeNext,0),m(T)},function(T){setTimeout(r._decodeNext,0),I(T)})}if(!p.bWasm){C=i._ImgManager.convertServerIdToClientIndex(l);var v=i.GetImagePartURL(C,-1,-1);return p._innerDecode(4e3,v,"",i.clientId).then(function(T){T.imageid=i.IndexToImageID(C),setTimeout(r._decodeNext,0),m(T),e.License.isLTS()&&w.DWT.lcvrf(i)},function(T){setTimeout(r._decodeNext,0),I(T)})}}},function(p){setTimeout(r._decodeNext,0),I(p)})})}):Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))},resetRuntimeSettings:function(){return e.License.checkProductKey(i,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(a){return a.resetRuntimeSettings()}):Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))},getRuntimeSettings:function(a){return e.License.checkProductKey(i,{Core:!0})?!e.isString(a)||"speed"!=a&&"balance"!=a&&"coverage"!=a&&"default"!=a?new Promise(r.dbrInitPromiseFun).then(function(o){return o.getRuntimeSettings()}):this.updateRuntimeSettings(a):Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))},updateRuntimeSettings:function(a){return e.License.checkProductKey(i,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(o){return o.updateRuntimeSettings(a)}):Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))},initRuntimeSettingsWithString:function(a){return e.License.checkProductKey(i,{Core:!0})?new Promise(r.dbrInitPromiseFun).then(function(o){return o.initRuntimeSettingsWithString(a)}):Promise.reject(r.BarcodeReaderException(i._errorCode,i._errorString))}}},e.product.bHTML5Edition?(i.__addon=i.__addon||{},e.mix(i.__addon,f)):(i.Addon=i.Addon||{},e.mix(i.Addon,f))}),w.unloadQueue.push(function(){r._wasmInstance&&(r._wasmInstance.destroy(),r._wasmInstance=!1)})}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},function(e){for(var t=[w.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3,CM_RENDERALLWITHANNOTATION:4},r.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBig2:7}}}(typeof window<"u"&&window),w.AddonReady(function(e,t){var n;e.product.bHTML5Edition&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(h){var s,d=e.html5.Funs;n=e.env.bMac?w.dcp.b64bit?"libDynamicPdfCorex64_"+w.DWT.PdfVersion+".dylib":"libDynamicPdfCore_"+w.DWT.PdfVersion+".dylib":e.env.bLinux?"libDynamicPdfCore_"+w.DWT.PdfVersion+".so":w.dcp.b64bit?"DynamicPdfCorex64_"+w.DWT.PdfVersion+".dll":"DynamicPdfCore_"+w.DWT.PdfVersion+".dll",h._isMobileMode()||h._innerSend("GetAddOnVersion",d.makeParams("pdf",n),!0,!1,!1),s={PDF:{IsModuleInstalled:function(){var i=h;return i._resetErr(),i._isMobileMode()?!!w.pdf&&w.pdf.IsModuleInstalled():""!=i._innerFun("GetAddOnVersion",d.makeParams("pdf",n))},IsModuleInstalledAsync:function(){var i=h;return i._resetErr(),i._isMobileMode()?e.Promise.resolve(!!w.pdf&&w.pdf.IsModuleInstalled()):i._innerFunV2("GetAddOnVersion",d.makeParams("pdf",n)).then(function(u){return""!=u})},ConvertToImage:function(i,u,f,a){var o=d.replaceLocalFilename(i),c="ConvertPDFToImage",I=h;return I._resetErr(),I._isMobileMode()||(d.showMask(c),I._innerSend(c,d.makeParams(o,u),!0,function(p){return d.hideMask(c),f&&f(),!0},function(p){return d.hideMask(c),a&&a(),!1})),!0},SetPassword:function(i){var u=h;return u._resetErr(),u._isMobileMode()?(u._pdfPassword=i,!0):u._innerFun("SetPDFPassword",d.makeParams(i))},SetConvertMode:function(i){return h._setConvertMode(i)},SetConvertModeAsync:function(i){return h._setConvertModeAsync(i)},GetConvertMode:function(){var i=h;return i._resetErr(),i._pdfConvertMode},SetResolution:function(i){var u=h;return u._resetErr(),u._isMobileMode()?(u._pdfResolution=1*i,!0):h._innerFun("SetPDFResolution",d.makeParams(i))},SetResolutionAsync:function(i){var u=h;return u._resetErr(),u._isMobileMode()?(u._pdfResolution=1*i,e.Promise.resolve(!0)):h._innerFunV2("SetPDFResolution",d.makeParams(i))},IsTextBasedPDF:function(i,u,f){var a=h;if(a._resetErr(),a._isMobileMode())return a._mobileNotSupport("IsTextBasedPDF",f);var o=d.replaceLocalFilename(i),c=h._innerFun("IsTextBasedPDF",d.makeParams(o));return 0==a.ErrorCode?e.isFunction(u)&&u(c):e.isFunction(f)&&f(a.ErrorCode,a.ErrorString),c},Write:{Setup:function(i){var u=i;u||(u={version:15}),e.stringify(u).length>2&&(e.isNumber(u.version)?u.version>=1&&u.version<2&&(u.version=parseInt(10*u.version)):u.version=15),e.isNumber(u.compression)&&u.compression==w.DWT.EnumDWT_PDFCompressionType.PDF_FAX3&&(u.compression=w.DWT.EnumDWT_PDFCompressionType.PDF_FAX4);var f=h;if(f._resetErr(),f._isMobileMode())return f._pdfWriteSetting=u,!0;var a=e.stringify(u);return a=e.replaceAll(a,'"','\\"'),f._innerFun("SetPDFSettings",['["',a,'"]'].join(""))}}}},h.__addon=h.__addon||{},e.mix(h.__addon,s)}))}),w.AddonReady(function(e,t){(e.product.bPluginEdition||e.product.bActiveXEdition)&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){var h,d,s;if(!r.getSWebTwain()||!r.getSWebTwain().Addon)return!1;w.navInfo.bWin&&(s=!w.navInfo.bOSx64||w.navInfo.bWOW64?"DynamicPdfCore_"+w.DWT.PdfVersion+".dll":"DynamicPdfCorex64_"+w.DWT.PdfVersion+".dll"),d=r.getSWebTwain(),h={PDF:{IsModuleInstalled:function(){var u=d.GetAddOnVersion("pdf",s);return e.setErrorString(r),""!=u},IsModuleInstalledAsync:function(){var u=d.GetAddOnVersion("pdf",s);return e.setErrorString(r),e.Promise.resolve(""!=u)},ConvertToImage:function(u,f,a,o){var c=d.ConvertPDFToImage(u,f);return e.wrapperRet(r,c,a,o)},SetPassword:function(u){var f=d.SetPDFPassword(u);return e.wrapperRet(r,f)},SetConvertMode:function(u){return r._setConvertMode(u)},SetConvertModeAsync:function(u){return Promise.resolve(r._setConvertMode(u))},GetConvertMode:function(){return r._resetErr(),r._pdfConvertMode},SetResolution:function(u){var f=d.SetPDFResolution(u);return e.wrapperRet(r,f)},SetResolutionAsync:function(u){var f=d.SetPDFResolution(u);return e.Promise.resolve(e.wrapperRet(r,f))},IsTextBasedPDF:function(u){var f=d.IsTextBasedPDF(u);return e.wrapperRet(r,f)}}},r.Addon=r.Addon||{},e.mix(r.Addon,h)})}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},w.DWT.OCRVerInName="10.0.0.0618",function(e){for(var t=[w.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"},r.EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10},r.EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4},r.EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1}}}(typeof window<"u"&&window),w.DWT.OCRLanguageData_eng="4113088",w.DWT.OCRLanguageData_ara="1432056",w.DWT.OCRLanguageData_chi_sim="2469156",w.DWT.OCRLanguageData_chi_tra="2366642",w.DWT.OCRLanguageData_hin="1122751",w.DWT.OCRLanguageData_urd="1398718",w.DWT.OCRLanguageData_spa="2294433",w.DWT.OCRLanguageData_fra="1130365",w.DWT.OCRLanguageData_msa="1747801",w.DWT.OCRLanguageData_ind="1122661",w.DWT.OCRLanguageData_rus="3861738",w.DWT.OCRLanguageData_ben="855841",w.DWT.OCRLanguageData_por="1982756",w.DWT.OCRLanguageData_pan="497721",w.DWT.OCRLanguageData_deu="1525436",w.DWT.OCRLanguageData_jpn="2471260",w.DWT.OCRLanguageData_fas="431500",w.DWT.OCRLanguageData_swa="2167651",w.DWT.OCRLanguageData_jav="2982741",w.DWT.OCRLanguageData_tel="2769654",w.DWT.OCRLanguageData_tur="4550554",w.DWT.OCRLanguageData_kor="1677415",w.DWT.OCRLanguageData_mar="2118233",w.DWT.OCRLanguageData_tam="3237963",w.DWT.OCRLanguageData_vie="531275",w.DWT.OCRLanguageData_ita="2701314",w.DWT.OCRLanguageData_tha="1072600",w.DWT.OCRLanguageData={},w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_ENG]=w.DWT.OCRLanguageData_eng,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_ARA]=w.DWT.OCRLanguageData_ara,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=w.DWT.OCRLanguageData_chi_tra,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=w.DWT.OCRLanguageData_chi_sim,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_HIN]=w.DWT.OCRLanguageData_hin,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_URD]=w.DWT.OCRLanguageData_urd,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_SPA]=w.DWT.OCRLanguageData_spa,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_FRA]=w.DWT.OCRLanguageData_fra,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_MSA]=w.DWT.OCRLanguageData_msa,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_IND]=w.DWT.OCRLanguageData_ind,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_RUS]=w.DWT.OCRLanguageData_rus,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_BEN]=w.DWT.OCRLanguageData_ben,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_POR]=w.DWT.OCRLanguageData_por,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_PAN]=w.DWT.OCRLanguageData_pan,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_DEU]=w.DWT.OCRLanguageData_deu,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_JPN]=w.DWT.OCRLanguageData_jpn,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_FAS]=w.DWT.OCRLanguageData_fas,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_SWA]=w.DWT.OCRLanguageData_swa,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_JAV]=w.DWT.OCRLanguageData_jav,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_TEL]=w.DWT.OCRLanguageData_tel,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_TUR]=w.DWT.OCRLanguageData_tur,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_KOR]=w.DWT.OCRLanguageData_kor,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_MAR]=w.DWT.OCRLanguageData_mar,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_TAM]=w.DWT.OCRLanguageData_tam,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_VIE]=w.DWT.OCRLanguageData_vie,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_ITA]=w.DWT.OCRLanguageData_ita,w.DWT.OCRLanguageData[w.DWT.EnumDWT_OCRLanguage.OCRL_THA]=w.DWT.OCRLanguageData_tha,function(e){function t(){var n=this;n._text="",n._fontName="",n._fontSize="",n._left=0,n._top=0,n._right=0,n._bottom=0}t.prototype.GetText=function(){return this._text},t.prototype.GetFontName=function(){return this._fontName},t.prototype.GetFontSize=function(){return this._fontSize},t.prototype.GetWordRect=function(){var n=this;return n._left+","+n._top+","+n._right+","+n._bottom},e.NewWordBasicResult=function(){return new t}}(w.Lib),function(e){function t(){var n=this;n._count=0,n._left=0,n._top=0,n._right=0,n._bottom=0,n._wordlist=[]}t.prototype.GetWordCount=function(){return this._count},t.prototype.GetLineRect=function(){var n=this;return n._left+","+n._top+","+n._right+","+n._bottom},t.prototype.GetWordContent=function(n){var r=this;if(r._errorCode<0)return"";if(null==n||n>=r._wordlist.length||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetWordContent"),"";var d=w.Lib.NewWordBasicResult();return d._text=r._wordlist[n].text,d._fontName=r._wordlist[n].fontname,d._fontSize=r._wordlist[n].fontsize,d._left=r._wordlist[n].rect[0],d._top=r._wordlist[n].rect[1],d._right=r._wordlist[n].rect[2],d._bottom=r._wordlist[n].rect[3],d},e.NewLineBasicResult=function(){return new t}}(w.Lib),function(e){function t(){this._count=0,this._linelist=[]}t.prototype.GetLineCount=function(){return this._count},t.prototype.GetLineContent=function(n){var r=this;if(r._errorCode<0)return"";if(null==n||n>=r._linelist.length||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetLineContent"),"";var d=w.Lib.NewLineBasicResult();return d._count=r._linelist[n].words.length,d._left=r._linelist[n].rect[0],d._top=r._linelist[n].rect[1],d._right=r._linelist[n].rect[2],d._bottom=r._linelist[n].rect[3],d._wordlist=r._linelist[n].words,d},e.NewPageBasicResult=function(){return new t}}(w.Lib),function(e){function t(){this._count=0,this._pagelist=[]}t.prototype.GetPageCount=function(){return this._count},t.prototype.GetPageContent=function(n){var r=this;if(r._errorCode<0)return"";if(null==n||n>=r._pagelist.length||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetPageContent"),"";var d=w.Lib.NewPageBasicResult();return d._count=r._pagelist[n].lines.length,d._linelist=r._pagelist[n].lines,d},e.NewPageSetBasicResult=function(){return new t}}(w.Lib),function(e){function t(n){var r=this;r._errorCode=0,r._errorString="",r._resultlist=[],r._stwain=n}t.prototype.GetErrorCode=function(){return this._errorCode},t.prototype.GetErrorString=function(){return this._errorString},t.prototype.GetFormat=function(){return this._resultlist[0].format},t.prototype.GetInput=function(){var r=this._resultlist[0].input;if(r){var h=Number(r);if(!isNaN(h))return this._stwain._ImgManager.convertServerIdToClientIndex(h)}return r},t.prototype.GetPageSetCount=function(){return this._resultlist[0].pagesets.length},t.prototype.GetPageSetContent=function(n){var r=this;if(r._errorCode<0)return"";if(null==n||n>=r._resultlist[0].pagesets.length||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetPageSetContent"),"";var d=w.Lib.NewPageSetBasicResult();return d._count=r._resultlist[0].pagesets[n].pages.length,d._pagelist=r._resultlist[0].pagesets[n].pages,d},t.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},t.prototype.Save=function(n){var h=e.html5.Funs.replaceLocalFilename(n);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(h))},e.NewOCRBasicResult=function(n){return new t(n)}}(w.Lib),function(e){function t(){var n=this;n.UnicodeFontName="",n.UseDetectedFont=!0,n.MinFontSizeforMoreAccurateResult=0,n.OCRLanguage=w.DWT.EnumDWT_OCRLanguage.OCRL_ENG,n.PageSetMode=w.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO,n.OutputFormat=w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}t.prototype.GetUnicodeFontName=function(){return this.UnicodeFontName},t.prototype.SetUnicodeFontName=function(n){var h=n;return e.isString(h)||(h=""),this.UnicodeFontName=h,!0},t.prototype.GetUseDetectedFont=function(){return!!this.UseDetectedFont},t.prototype.SetUseDetectedFont=function(n){return this.UseDetectedFont=!!n,!0},t.prototype.GetMinFontSizeforMoreAccurateResult=function(){return this.MinFontSizeforMoreAccurateResult},t.prototype.SetMinFontSizeforMoreAccurateResult=function(n){var h=1*n;return h<0&&(h=0),this.MinFontSizeforMoreAccurateResult=h,!0},t.prototype.GetOCRLanguage=function(){return this.OCRLanguage},t.prototype.SetOCRLanguage=function(n){var h=n;return e.isString(h)||(h=""),this.OCRLanguage=h,!0},t.prototype.GetPageSetMode=function(){return this.PageSetMode},t.prototype.SetPageSetMode=function(n){var h=1*n;return(h<0||h>w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR)&&(h=w.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO),this.PageSetMode=h,!0},t.prototype.GetOutputFormat=function(){return this.OutputFormat},t.prototype.SetOutputFormat=function(n){var h=1*n;return(h<0||h>w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX)&&(h=w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT),this.OutputFormat=h,!0},e.NewOptions=function(){return new t}}(w.Lib),w.AddonReady(function(e,t){var n;e.product.bHTML5Edition&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(s){var u,i=e.html5.Funs,f=e.NewOptions();(function r(s){var i=e.html5.Funs;n=e.env.bMac?"DynamicOCR_"+w.DWT.OCRVerInName+".dylib":e.env.bLinux?"DynamicOCR_"+w.DWT.OCRVerInName+".so":w.dcp.b64bit?"DynamicOCRx64_"+w.DWT.OCRVerInName+".dll":"DynamicOCR_"+w.DWT.OCRVerInName+".dll",s._isMobileMode()||s._innerSend("GetAddOnVersion",i.makeParams("ocr",n),!0,!1,!1),s.__innerOCRBasicReadFunction=function(u,f,a,o,c,l,m,I,p,g,C){return e.isFunction(g)?this.__innerOCRBasicAsyncReadFunction(u,f,a,o,c,l,m,I,p,g,C):this.__innerOCRSyncReadFunction(u,p)},s.__innerGetOCRBasicResultAsyncFunction=function(u){var f=w.Lib.NewOCRBasicResult(this);return u&&(f._errorCode=u.exception,f._errorString=u.description,f._resultlist=u.result),f},s.__innerOCRBasicAsyncReadFunction=function(u,f,a,o,c,l,m,I,p,g,C){var _=this;return i.showMask(u),_._innerSend(u,p,!0,function(D){if(0==D.exception){if(e.isFunction(g))if(-1!=f){var P=_.objImageIndexManager.convertServerIdToGuid(f);1==o?g(P,c,l,m,I,_.__innerGetOCRBasicResultAsyncFunction(D)):g(P,_.__innerGetOCRBasicResultAsyncFunction(D))}else""!=a?g(a,_.__innerGetOCRBasicResultAsyncFunction(D)):g(_.__innerGetOCRBasicResultAsyncFunction(D));e.License.isLTS()&&w.DWT.lcvrf(s)}else e.isFunction(C)&&C(D.exception,D.description);i.hideMask(u)},function(D){i.hideMask(u)}),!0},s.__innerOCRSyncReadFunction=function(u,f){var o,c,a=this;return o=a._innerFunRaw(u,f,!1,!1),(c=e.NewOCRBasicResult())._errorCode=a._errorCode,c._errorString=a._errorString,o&&e.isArray(o)&&(c._resultlist=o,c._Count=o.length,e.License.isLTS()&&w.DWT.lcvrf(s)),c},s.__IsOCRBasicModuleInstalled=function(){return""!=s._innerFun("GetAddOnVersion",i.makeParams("ocr",n)).split("|")[0]},s.__innerBasicDownload=function(u,f,a,o,c){var l=s;e.cancelFrome=2,u=u.toString();var I=function(){return e.isFunction(o)&&o(),!0},p=function(){return e.isFunction(c)&&c(l.ErrorCode,l.ErrorString),!1};if(!e.License.checkProductKey(l,{Core:!0})||!e.License.checkProductKey(l,{OCR:!0},!0))return p();f!=w.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll&&l._innerFun("SetOCRLanguage",i.makeParams(a));var C=l._innerFun("GetAddOnVersion",i.makeParams("ocr",n)).split("|");if(f==w.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll){if(""!=C[0])return I(),!0}else{var _=w.DWT.OCRLanguageData[a];if(_&&C[1]==_)return I(),!0}if(!u||""==u)return e.Errors.OCR_InvalidRemoteFilename(l),p(),!1;if(i.isServerInvalid(l))return p(),!1;e.showProgress(l,"Download",!0);var T=!0;l._OnPercentDone(f==w.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll?[0,-1,"Downloading OCR Module...","http"]:[0,-1,"Downloading OCR Language Data...","http"]),e.isFunction(o)||(T=!1),i.loadHttpBlob(l,"get",u,T,function(D){l._OnPercentDone([0,-1,"Loading..."]);var P=100;f==w.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE&&(P=101),l.__LoadImageFromBytes(D,P,"",T,I,p)},function(){e.closeProgress("Download"),p()},function(D){var P=0===D.total?100:Math.round(100*D.loaded/D.total);[D.loaded," / ",D.total].join(""),l._OnPercentDone([0,P,"","http"])})}})(s),u={OCR:{SetUnicodeFontName:function(a){var o=s;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.OCR.SetUnicodeFontName"):f.SetUnicodeFontName(a)},GetUnicodeFontName:function(){var a=s;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.OCR.GetUnicodeFontName"):f.GetUnicodeFontName()},SetIfUseDetectedFont:function(a){var o=s;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont"):f.SetUseDetectedFont(a)},GetIfUseDetectedFont:function(){var a=s;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont"):f.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(a){var o=s;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult"):f.SetMinFontSizeforMoreAccurateResult(a)},GetMinFontSizeforMoreAccurateResult:function(){var a=s;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult"):f.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(a){var o=s;return o._resetErr(),o._isMobileMode()?o._mobileNotSupport("Addon.OCR.SetLanguage"):f.SetOCRLanguage(a)},IsModuleInstalled:function(){var a=s;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.OCR.IsModuleInstalled"):a.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(a){var o=s;if(o._resetErr(),o._isMobileMode())return o._mobileNotSupport("Addon.OCR.SetPageSetMode");var c=1*a;return c==w.DWT.EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_AUTO||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||c==w.DWT.EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR?f.SetPageSetMode(c):(w.Lib.Errors.OCR_InvalidPageSetMode(o),!1)},SetOutputFormat:function(a){var o=s;if(o._resetErr(),o._isMobileMode())return o._mobileNotSupport("Addon.OCR.SetOutputFormat");var c=1*a;return c==w.DWT.EnumDWT_OCROutputFormat.OCROF_TEXT||c==w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||c==w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||c==w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||c==w.DWT.EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX?f.SetOutputFormat(c):(w.Lib.Errors.OCR_InvalidOutputFormat(o),!1)},Recognize:function(a,o,c){var l=s;if(l._resetErr(),l._isMobileMode())return l._mobileNotSupport("Addon.OCR.Recognize");if(!e.License.checkProductKey(l,{OCR:!0},!0))return e.isFunction(c)&&c(l._errorCode,l._errorString),!1;var m=l._ImgManager.convertClientIndexToServerId(a);return l.__innerOCRBasicReadFunction("OCRRecognize",m,"",0,0,0,0,0,i.makeParams(0,m,"",0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat(),""),o,c)},RecognizeRect:function(a,o,c,l,m,I,p){var g=s;if(g._resetErr(),g._isMobileMode())return g._mobileNotSupport("Addon.OCR.RecognizeRect");if(!o&&0!=o||!c&&0!=c||!l&&0!=l||!m&&0!=m){var C=w.Lib.NewOCRBasicResult(g);return w.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(C,"RecognizeRect"),void p(C.GetErrorCode(),C.GetErrorString())}if(!e.License.checkProductKey(g,{OCR:!0},!0))return e.isFunction(p)&&p(g._errorCode,g._errorString),!1;var _=g._ImgManager.convertClientIndexToServerId(a);return g.__innerOCRBasicReadFunction("OCRRecognize",_,"",1,o,c,l,m,i.makeParams(0,_,"",o,c,l,m,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat(),""),I,p)},RecognizeFile:function(a,o,c){var l=s;if(l._resetErr(),l._isMobileMode())return l._mobileNotSupport("Addon.OCR.RecognizeFile");var m=i.replaceLocalFilename(a);return e.License.checkProductKey(l,{OCR:!0},!0)?l.__innerOCRBasicReadFunction("OCRRecognize",-1,m,0,0,0,0,0,i.makeParams(1,-1,m,0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat(),""),o,c):(e.isFunction(c)&&c(l._errorCode,l._errorString),!1)},RecognizeSelectedImages:function(a,o){var c=s;if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("Addon.OCR.RecognizeSelectedImages");if(!e.License.checkProductKey(c,{OCR:!0},!0))return e.isFunction(o)&&o(c._errorCode,c._errorString),!1;var m=function(s){var f,a,i=[];return s._ImgManager.count()<=0||(f=s._ImgManager.getCurrentImageIndex(),s._ImgManager.convertClientIndexToServerId(f),a=s._ImgManager.getSelectedClientIndexArray(),e.isArray(a)&&e.each(a,function(o){var c=s._ImgManager.convertClientIndexToServerId(o);i.push(c)})),i}(c);return c.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,i.makeParams(2,-1,"",0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat(),m.join(",")),a,o)},Download:function(a,o,c){var l=s;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.Download"):l.__innerBasicDownload(a,w.DWT.EnumDWT_OCRDownloadType.OCRDT_Dll,f.GetOCRLanguage(),o,c)},DownloadLangData:function(a,o,c){var l=s;return l._resetErr(),l._isMobileMode()?l._mobileNotSupport("Addon.OCR.DownloadLangData"):l.__innerBasicDownload(a,w.DWT.EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,f.GetOCRLanguage(),o,c)}}},s.__addon=s.__addon||{},e.mix(s.__addon,u)}))}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},w.ProOCRVerInName="1.2.0.0806",function(e){function t(){var n=this;n._text="",n._left=0,n._top=0,n._right=0,n._bottom=0}t.prototype.GetText=function(){return this._text},t.prototype.GetLetterRect=function(){var n=this;return n._left+","+n._top+","+n._right+","+n._bottom},e.NewLetterResult=function(){return new t}}(w.Lib),function(e){function t(){var n=this;n._count=0,n._letterlist=[],n._zoneCount=0,n._zoneWords=[]}t.prototype.GetLettersCount=function(){return this._count},t.prototype.GetZoneCount=function(){return this._zoneCount},t.prototype.GetLetterContent=function(n){var r=this;if(r._errorCode<0)return"";if(null==n||n>=r._count||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetLetterContent"),"";var d=w.Lib.NewLetterResult();return d._text=r._letterlist[n].letter,d._left=r._letterlist[n].boundary[0],d._top=r._letterlist[n].boundary[1],d._right=r._letterlist[n].boundary[2],d._bottom=r._letterlist[n].boundary[3],d},t.prototype.GetZoneContent=function(n){var r=this;return r._errorCode<0?"":null==n||n>=r._zoneCount||n<0?(w.Lib.Errors.OCR_InvalidIndex(r,"GetZoneContent"),""):r._zoneWords[n]},e.NewPageResult=function(){return new t}}(w.Lib),function(e){function t(){var n=this;n._input=0,n._message="",n._page=-1}t.prototype.GetInput=function(){return this._input},t.prototype.GetMessage=function(){return this._message},t.prototype.GetPage=function(){return this._page},e.NewErrorInfo=function(){return new t}}(w.Lib),function(e){function t(n){var r=this;r._errorCode=0,r._errorString="",r._errorlist=[],r._request="",r._ocrTotalCount=0,r._alreadyOCRCount=0,r._resultlist=[],r._resultZoneDetail=[],r._stwain=n}t.prototype.GetErrorCode=function(){return this._errorCode},t.prototype.GetErrorString=function(){return this._errorString},t.prototype.GetInput=function(){var n=this;if(n._request&&n._request.input){var r=n._request.input;if(r){var h=Number(r);if(!isNaN(h))return n._stwain._ImgManager.convertServerIdToClientIndex(h)}return r}return""},t.prototype.GetErrorDetailList=function(){var n=this,r=0;n._errorlist&&(r=n._errorlist.length);for(var h=[],d=0;d<r;d++){var s=w.Lib.NewErrorInfo();s._input=n._errorlist[d].input,s._message=n._errorlist[d].message,s._page=n._errorlist[d].page,h.push(s)}return h},t.prototype.GetOCRTotalCount=function(){return this._ocrTotalCount?this._ocrTotalCount:0},t.prototype.GetAlreadyOCRCount=function(){return this._alreadyOCRCount?this._alreadyOCRCount:0},t.prototype.GetPageCount=function(){var n=this;return n._resultlist&&n._resultlist.length?n._resultlist.length:0},t.prototype.GetPageContent=function(n){var r=this,h=0;if(r._resultlist&&(h=r._resultlist.length),null==n||n>=h||n<0)return w.Lib.Errors.OCR_InvalidIndex(r,"GetPageContent"),"";var d=w.Lib.NewPageResult();return r._resultlist?(d._count=r._resultlist[n].length,d._letterlist=r._resultlist[n]):d._count=0,r._resultZoneDetail?(d._zoneCount=r._resultZoneDetail[n].length,d._zoneWords=r._resultZoneDetail[n]):d._zoneCount=0,d},t.prototype.Get=function(){return this._stwain._innerFun("GetOCRRestult")},t.prototype.Save=function(n){var h=e.html5.Funs.replaceLocalFilename(n);return this._stwain._innerFun("SaveOCRRestult",e.html5.Funs.makeParams(h))},e.NewOCRProResult=function(n){return new t(n)}}(w.Lib),function(e){for(var t=[w.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"},r.EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"},r.EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"},r.EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"},r.EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1},r.EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4},r.EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2}}}(typeof window<"u"&&window),function(e){function t(){var n=this;n.FindText="",n.FindTextFlags=w.DWT.EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD,n.FindTextAction=w.DWT.EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}e.NewRedaction=function(){return new t}}(w.Lib),w.WebTwain={Addon:{OCRPro:{}}},function(e){function t(){var n=this;n.RecognitionModule="",n.Languages="eng",n.OutputFormat="",n.PDFVersion="",n.PDFAVersion="",n.LicenseChecker="",n.Redaction=w.Lib.NewRedaction()}e.NewSettings=function(){return new t}}(w.WebTwain.Addon.OCRPro),function(){function e(t,n,r,h){var d=this;d.left=t,d.top=n,d.right=r,d.bottom=h}w.WebTwain.Addon.OCRPro.NewOCRZone=function(t,n,r,h){return new e(t,n,r,h)}}(),w.AddonReady(function(e,t){if(e.product.bHTML5Edition){var s=function(E,M,O,R){var F=e.NewOCRProResult(E);F._errorCode=M,F._errorString=O;var B=e.NewErrorInfo();return B.input=R,B.message=F._errorString,B.page=0,F._errorlist=[B],F};e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(E){var O,R,M=e.html5.Funs;R=e.env.bMac?"DynamicOCRPro_"+w.ProOCRVerInName+".dylib":e.env.bLinux?"DynamicOCRPro_"+w.ProOCRVerInName+".so":w.dcp.b64bit?"DynamicOCRProx64_"+w.ProOCRVerInName+".dll":"DynamicOCRPro_"+w.ProOCRVerInName+".dll",function h(E){var M=e.html5.Funs;E.__innerGetOCRProResultAsyncFunction=function(O){var R=w.Lib.NewOCRProResult(this);return O&&(R._errorCode=O.code,R._errorString=O.message,R._request=O.request,R._errorlist=O.errorList,R._ocrTotalCount=O.ocrTotalCount,R._alreadyOCRCount=O.alreadyOCRCount,R._resultlist=O.resultDetail,R._resultZoneDetail=O.resultZoneDetail),R},E.__innerIsOCRTrial=function(O,R){var F=this,B=function(){var b=!1;if(F.__licenseInfo.Detail)for(var A=0;A<F.__licenseInfo.Detail.length;A++)"10"==F.__licenseInfo.Detail[A].EnumLicenseType&&"TRUE"==F.__licenseInfo.Detail[A].Trial&&(b=!0);return O(b)};return F.__licenseInfo&&F.__licenseInfo.Detail?B():F.GetLicenseInfo(B,R)},E.__innerOCRReadFunction=function(O,R,F,B,b,A,N,Y){return this.__innerOCRAsyncReadFunction(O,R,F,B,b,A,N,Y)},E.__innerOCRAsyncReadFunction=function(O,R,F,B,b,A,N,Y){var ne=this;return M.showMask(O),ne._innerSend(O,A,!0,function(ce){0==ce.code?(e.isFunction(N)&&(-1!=R?1==B?N(R,b,ne.__innerGetOCRProResultAsyncFunction(ce)):N(R,ne.__innerGetOCRProResultAsyncFunction(ce)):""!=F?N(F,ne.__innerGetOCRProResultAsyncFunction(ce)):N(ne.__innerGetOCRProResultAsyncFunction(ce))),e.License.isLTS()&&w.DWT.lcvrf(E)):e.isFunction(Y)&&Y(ce.code,ce.message,ne.__innerGetOCRProResultAsyncFunction(ce)),M.hideMask(O)},function(ce){M.hideMask(O)}),!0},E.__innerGetRequestJson=function(O,R,F,B,b){var N,Y="[{";for(Y+='"id":"'+E.clientId+'",',Y+='"method":"OCRProRecognize",',Y+='"dllName":"'+b+'",',Y+='"productkey":"'+w.DWT.ProductKey+'",',Y+=O==w.DWT.EnumDWT_OCRProType.OCRDT_File?'"inputType":"file",':'"inputType":"index",',Y+='"input":[',N=0;N<R.length;N++)Y+=O==w.DWT.EnumDWT_OCRProType.OCRDT_File?'"'+R[N]+'"':R[N],N+1<R.length&&(Y+="|");if(Y+="],",Y+='"settings":{',Y+='"recognitionMethod": "Page"',F&&(F.RecognitionModule&&F.RecognitionModule.length>0&&(Y+=',"recognitionModule":"'+F.RecognitionModule+'"'),F.Languages&&F.Languages.length>0&&(Y+=',"languages":"'+F.Languages+'"'),F.OutputFormat&&F.OutputFormat.length>0&&(Y+=',"outputFormat":"'+F.OutputFormat+'"'),F.PDFVersion&&F.PDFVersion.length>0&&(Y+=',"pdfVersion":"'+F.PDFVersion+'"'),F.PDFAVersion&&F.PDFAVersion.length>0&&(Y+=',"pdfAVersion":"'+F.PDFAVersion+'"'),F.Redaction&&F.Redaction.FindText&&F.Redaction.FindText.length>0)){var ne=parseInt(F.Redaction.FindTextFlags),Ie=parseInt(F.Redaction.FindTextAction);if(!isNaN(ne)&&!isNaN(Ie)){Y+=',"redaction":{';var _e=F.Redaction.FindText;Y+='"findText":"'+(_e=_e.replace(/\"/g,'\\"'))+'"',Y+=',"findTextFlags":'+ne,Y+=',"findTextAction":'+Ie,Y+="}"}}for(Y+="},",Y+='"zones":[',N=0;N<B.length;N++)Y+="["+B[N].left+","+B[N].top+","+B[N].right+","+B[N].bottom+"]",N+1<B.length&&(Y+=",");return Y+="],",(Y+='"outputFile":""')+"}]"},E.__LoadImageFromBytesForDownloadInner=function(O,R,F,B,b,A,N,Y,ne){var _e,q,Ie=E;q=O>=B?R.slice(_e=A*B,b):R.slice(_e=O*A,(O+1)*A),Ie.__LoadImageFromBytes(q,F,"",N,function(){O>=B?w.Lib.isFunction(Y)&&Y():Ie.__LoadImageFromBytesForDownloadInner(O+=1,R,F,B,b,A,N,Y,ne)},function(){w.Lib.isFunction(ne)&&ne()},_e,b)},E.__LoadImageFromBytesForDownload=function(O,R,F,B,b,A){var N=E,Y=2e6,ne=O.size||O.length,Ie=parseInt(ne/Y);0==ne%Y&&(Ie-=1),N.__LoadImageFromBytesForDownloadInner(0,O,R,Ie,ne,Y,B,b,A)}}(E),O={OCRPro:{Settings:!1,Recognize:function(F,B,b){var N,Y,A=[],_e=E;if(_e._resetErr(),_e._isMobileMode())return _e._mobileNotSupport("Addon.OCRPro.Recognize");if(N=parseInt(F),e.isNaN(N)||!e.isNumber(N))return Y=s(E,-2201,"Invalid parameter type.",F),e.isFunction(b)?b(Y._errorCode,Y._errorString,Y):e.Errors.WebviewerError(E,Y._errorString,Y._errorCode),!1;var ce=E._ImgManager.convertClientIndexToServerId(N);if(-1==ce)return e.isFunction(b)&&(e.Errors.IndexOutOfRange(E),Y=s(E,E._errorCode,E._errorString,F),b(Y._errorCode,Y._errorString,Y)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(b)&&(Y=s(E,E._errorCode,E._errorString,F),b(Y._errorCode,Y._errorString,Y)),!1;A.push(ce);var q=[],he=this.Settings,ie=E.__innerGetRequestJson(w.DWT.EnumDWT_OCRProType.OCRDT_Index,A,he,q,R);return E.__innerIsOCRTrial(function(V){return V||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",F,"",0,q,ie,B,b):a(he.LicenseChecker,E,"OCRProRecognize",F,"",0,q,ie,B,b)},b)},RecognizeRect:function(F,B,b,A){var Y,ne,N=[],ce=E;if(ce._resetErr(),ce._isMobileMode())return ce._mobileNotSupport("Addon.OCRPro.RecognizeRect");if(Y=parseInt(F),e.isNaN(Y)||!e.isNumber(Y))return ne=s(E,-2201,"Invalid parameter type.",F),e.isFunction(A)?A(ne._errorCode,ne._errorString,ne):e.Errors.WebviewerError(E,ne._errorString,ne._errorCode),!1;var q=E._ImgManager.convertClientIndexToServerId(Y),he=E._ImgManager.GetImageWidth(Y),ie=E.GetImageHeight(Y);if(-1==q)return e.isFunction(A)&&(e.Errors.IndexOutOfRange(E),ne=s(E,E._errorCode,E._errorString,F),A(ne._errorCode,ne._errorString,ne)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(A)&&(ne=s(E,E._errorCode,E._errorString,F),A(ne._errorCode,ne._errorString,ne)),!1;if(he>0&&ie>0)for(var V,J,te,oe,Ee,ge,Re=0;Re<B.length;Re++)(J=(V=B[Re]).left)<0&&(J=0),(te=V.top)<0&&(te=0),(oe=V.right)<0&&(oe=0),(Ee=V.bottom)<0&&(Ee=0),J>oe&&(ge=J,J=oe,oe=ge),te>Ee&&(ge=te,te=Ee,Ee=ge),oe>he&&(oe=he),Ee>ie&&(Ee=ie),V.left=J,V.top=te,V.right=oe,V.bottom=Ee;N.push(q);var G=this.Settings,k=E.__innerGetRequestJson(w.DWT.EnumDWT_OCRProType.OCRDT_Index,N,G,B,R);return E.__innerIsOCRTrial(function(U){return U||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",F,"",1,B,k,b,A):a(G.LicenseChecker,E,"OCRProRecognize",F,"",1,B,k,b,A)},A)},RecognizeFile:function(F,B,b){var N,Y,ne,A=E;if(A._resetErr(),A._isMobileMode())return A._mobileNotSupport("Addon.OCRPro.RecognizeFile");if(0==F.length)return e.isFunction(b)&&((N=w.Lib.NewOCRProResult(E))._errorCode=-2201,N._errorString="File name cannot be empty.",ne=[],(Y=w.Lib.NewErrorInfo()).input=F,Y.message=N._errorString,Y.page=0,ne.push(Y),N._errorlist=ne,b(N._errorCode,N._errorString,N)),!1;if(!e.License.checkProductKey(E,{OCRPro:!0},!0))return e.isFunction(b)&&((N=w.Lib.NewOCRProResult(E))._errorCode=E._errorCode,N._errorString=E._errorString,ne=[],(Y=w.Lib.NewErrorInfo()).input=F,Y.message=N._errorString,Y.page=0,ne.push(Y),N._errorlist=ne,b(N._errorCode,N._errorString,N)),!1;var Ie=M.replaceLocalFilename(F),_e=[];Ie.indexOf("|")>0?_e=Ie.split("|"):Ie.indexOf(";")>0?_e=Ie.split(";"):Ie.indexOf(",")>0&&(_e=Ie.split(","));var ce=[];if(_e.length>0)for(var q=0;q<_e.length;q++)ce.push(_e[q]);else ce.push(Ie);var he=[],ie=this.Settings,V=E.__innerGetRequestJson(w.DWT.EnumDWT_OCRProType.OCRDT_File,ce,ie,he,R);E.__innerIsOCRTrial(function(J){return J||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",-1,F,0,he,V,B,b):a(ie.LicenseChecker,E,"OCRProRecognize",-1,F,0,he,V,B,b)},b)},RecognizeSelectedImages:function(F,B){var b,A,N,Y=E;if(Y._resetErr(),Y._isMobileMode())return Y._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages");if(!e.License.checkProductKey(E,{OCRPro:!0},!0)){if(e.isFunction(B)){var ne=w.Lib.NewOCRProResult(E);ne._errorCode=E._errorCode,ne._errorString=E._errorString,A=[],(N=w.Lib.NewErrorInfo()).input="",N.message=ne._errorString,N.page=0,A.push(N),ne._errorlist=A,B(ne._errorCode,ne._errorString,ne)}return!1}var Ie=[],_e=this.Settings,ce=function(E){var R,F,M=[];return E._ImgManager.count()<=0||(R=E._ImgManager.getCurrentImageIndex(),E._ImgManager.convertClientIndexToServerId(R),F=E._ImgManager.getSelectedClientIndexArray(),e.isArray(F)&&e.each(F,function(B){var b=E._ImgManager.convertClientIndexToServerId(B);M.push(b)})),M}(E),q=E.__innerGetRequestJson(w.DWT.EnumDWT_OCRProType.OCRDT_Index,ce,_e,Ie,R);return E.__innerIsOCRTrial(function(he){b=he||e.License.isLTS()?E.__innerOCRReadFunction("OCRProRecognize",-1,"",0,Ie,q,F,B):a(_e.LicenseChecker,E,"OCRProRecognize",-1,"",0,Ie,q,F,B)},B),b},IsModuleInstalled:function(){var F=E;return F._resetErr(),F._isMobileMode()?F._mobileNotSupport("Addon.OCRPro.IsModuleInstalled"):""!=F._innerFun("GetAddOnVersion",M.makeParams("proocr",R))},Download:function(F,B,b){var A=E;if(A._resetErr(),A._isMobileMode())return A._mobileNotSupport("Addon.OCRPro.Download");var Y=function(){return e.isFunction(B)&&B(),!0},ne=function(){return e.isFunction(b)&&b(A.ErrorCode,A.ErrorString),!1};if(!e.License.checkProductKey(A,{Core:!0})||!e.License.checkProductKey(A,{OCRPro:!0},!0))return ne();if(this.IsModuleInstalled())return Y(),!0;if(!F||""==F||!e.isString(F))return e.Errors.OCR_InvalidRemoteFilename(A),ne(),!1;if(M.isServerInvalid(A))return ne(),!1;e.cancelFrome=2,e.showProgress(A,"Download",!0);var _e=!0;return A._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]),e.isFunction(B)||(_e=!1),M.loadHttpBlob(A,"get",F,_e,function(ce){A._OnPercentDone([0,-1,"Loading..."]),A.__LoadImageFromBytesForDownload(ce,102,"",_e,Y,ne)},function(){e.closeProgress("Download"),ne()},function(ce){var q=0===ce.total?100:Math.round(100*ce.loaded/ce.total);[ce.loaded," / ",ce.total].join(""),A._OnPercentDone([0,q,"","http"])})}}},E.__addon=E.__addon||{},e.mix(E.__addon,O)}),w.WebTwain.Addon.OCRPro.NewOCRReadPara=function(E,M,O,R,F,B,b,A,N,Y){return new u(E,M,O,R,F,B,b,A,N,Y)},w.WebTwain.Addon.OCRPro.NewOCRError=function(){return new l},w.Lib.mix(w.Lib.Errors,{OCR_LicenseCheckerEmpty:function(E){var O="LicenseChecker cannot be empty.";E.errorString=O,E.responseText=D("false;-2601;"+O+";")},OCR_LicenseCheckerNotConnect:function(E){var O="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";E.errorString=O,E.responseText=D("false;-2602;"+O+";")},OCR_AccessDenied:function(E){var O="Access denied.";E.errorString=O,E.responseText=D("false;-2603;"+O+";")},OCR_LicenseCheckerError:function(E,M){var R="Error occured in '"+M+"'.";E.errorString=R,E.responseText=D("false;-2604;"+R+";")},OCR_HTTPError:function(E,M){var R="HTTP Error "+M+".";E.errorString=R,E.responseText=D("false;-2605;"+R+";")},OCR_LicenseCheckerUnauthorized:function(E,M){var R="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+M+"'.";E.errorString=R,E.responseText=D("false;-2606;"+R+";")},__last:!1});var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}function u(E,M,O,R,F,B,b,A,N,Y){var ne=this;ne.STWAIN=M,ne.AjaxFunctionUrl=E,ne.FunctionName=O,ne.ImageIndex=R,ne.FileNames=F,ne.Type=B,ne.AryZone=b,ne.JsonString=A,ne.OnSuccess=N,ne.OnFailure=Y}function f(E,M){var O="",R=E.responseText;if(0==R.length){var F=w.WebTwain.Addon.OCRPro.NewOCRError();w.Lib.Errors.OCR_LicenseCheckerError(F,M.AjaxFunctionUrl),R=F.responseText}O=function P(E){return function T(E){var M,O,R,F,B,b;for(M="",R=E.length,O=0;O<R;)switch(F=E.charCodeAt(O++),F>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=E.charAt(O-1);break;case 12:case 13:B=E.charCodeAt(O++),M+=String.fromCharCode((31&F)<<6|63&B);break;case 14:B=E.charCodeAt(O++),b=E.charCodeAt(O++),M+=String.fromCharCode((15&F)<<12|(63&B)<<6|(63&b)<<0)}return M}(function _(E){var M,O,R,F,B,b,A;for(b=E.length,B=0,A="";B<b;){do{M=g[255&E.charCodeAt(B++)]}while(B<b&&-1==M);if(-1==M)break;do{O=g[255&E.charCodeAt(B++)]}while(B<b&&-1==O);if(-1==O)break;A+=String.fromCharCode(M<<2|(48&O)>>4);do{if(61==(R=255&E.charCodeAt(B++)))return A;R=g[R]}while(B<b&&-1==R);if(-1==R)break;A+=String.fromCharCode((15&O)<<4|(60&R)>>2);do{if(61==(F=255&E.charCodeAt(B++)))return A;F=g[F]}while(B<b&&-1==F);if(-1==F)break;A+=String.fromCharCode((3&R)<<6|F)}return A}(E))}(R);var B=O.split(";");1==B.length?M.OnFailure(-1,R,w.Lib.NewOCRProResult()):"true"==B[0]?M.STWAIN.__innerOCRReadFunction(M.FunctionName,M.ImageIndex,M.FileNames,M.Type,M.AryZone,M.JsonString,function(A,N,Y){w.Lib.isUndefined(Y)?w.Lib.isUndefined(N)?(M.OnSuccess(A),o(M.AjaxFunctionUrl,A.GetPageCount())):(M.OnSuccess(A,N),o(M.AjaxFunctionUrl,N.GetPageCount())):(M.OnSuccess(A,N,Y),o(M.AjaxFunctionUrl,Y.GetPageCount()))},M.OnFailure):M.OnFailure(B[1],B[2],w.Lib.NewOCRProResult())}function a(E,M,O,R,F,B,b,A,N,Y){return I(E,"DTW_AjaxMethod=CheckLicense&Productkey="+D(w.DWT.ProductKey),f,w.WebTwain.Addon.OCRPro.NewOCRReadPara(E,M,O,R,F,B,b,A,N,Y))}function o(E,M){I(E,"DTW_AjaxMethod=WriteOCRCount&OCRCount="+D(M+""),c,null)}function c(E,M){}function l(){this.responseText="",this.errorString=""}function I(E,M,O,R){var F=w.WebTwain.Addon.OCRPro.NewOCRError();if(""==E)return w.Lib.Errors.OCR_LicenseCheckerEmpty(F),alert(F.errorString),O(F,R),!1;var B=function m(){var E=null,M=window;try{E=new M.ActiveXObject("Msxml2.XMLHTTP")}catch{try{E=new M.ActiveXObject("Microsoft.XMLHTTP")}catch{E=new XMLHttpRequest}}return E}();return B.open("POST",E,!0),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),B.onreadystatechange=function(){if(4==B.readyState){if(200!=B.status)return 401==B.status?(w.Lib.Errors.OCR_LicenseCheckerUnauthorized(F,R.AjaxFunctionUrl),O(F,R),!1):404==B.status?(w.Lib.Errors.OCR_LicenseCheckerNotConnect(F),alert(F.errorString),O(F,R),!1):403==B.status?(w.Lib.Errors.OCR_AccessDenied(F),O(F,R),!1):(w.Lib.Errors.OCR_HTTPError(F,B.status),O(F,R),!1);null!=O&&"function"==typeof O&&O(B,R)}},B&&M&&B.send(M),!0}function D(E){return function C(E){var M,O,R,F,B,b;for(R=E.length,O=0,M="";O<R;){if(F=255&E.charCodeAt(O++),O==R){M+=p.charAt(F>>2),M+=p.charAt((3&F)<<4),M+="==";break}if(B=E.charCodeAt(O++),O==R){M+=p.charAt(F>>2),M+=p.charAt((3&F)<<4|(240&B)>>4),M+=p.charAt((15&B)<<2),M+="=";break}b=E.charCodeAt(O++),M+=p.charAt(F>>2),M+=p.charAt((3&F)<<4|(240&B)>>4),M+=p.charAt((15&B)<<2|(192&b)>>6),M+=p.charAt(63&b)}return M}(function v(E){var M,O,R,F;for(M="",R=E.length,O=0;O<R;O++)(F=E.charCodeAt(O))>=1&&F<=127?M+=E.charAt(O):F>2047?(M+=String.fromCharCode(224|F>>12&15),M+=String.fromCharCode(128|F>>6&63),M+=String.fromCharCode(128|F>>0&63)):(M+=String.fromCharCode(192|F>>6&31),M+=String.fromCharCode(128|F>>0&63));return M}(E))}}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},w.WebcamVerForActiveX="15.0.0.0625",w.WebcamVerInName="15.0.0.0625",function(e){for(var t=[w.DWT],n=0;n<1;n++){var r=t[n];r.EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5},r.EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9},r.EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6}}}(typeof window<"u"&&window),function(e){e.WebcamErrors={InvalidParameter:function(t){t._errorCode=-10001,t._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(t){t._errorCode=-10002,t._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(t){t._errorCode=-10003,t._errorString="To get the url for the current frame, the video must be playing."},Success:function(t){t._errorCode=0,t._errorString="Successful."}}}(w.Lib),function(e){function t(n){var r=this;r._Count=0,r._resultlist=[],r._stwain=n}t.prototype.GetCount=function(){return e.WebcamErrors.Success(this._stwain),this._Count-1},t.prototype.Get=function(n){var r=this;return n>=r._resultlist.length-1||n<0?(w.Lib.Errors.Webcam_InvalidIndex(r._stwain,"Get"),""):(e.WebcamErrors.Success(r._stwain),r._resultlist[n])},t.prototype.GetCurrent=function(){var n=this,r=n._resultlist.length;return 0==r?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,"GetCurrent"),""):(e.WebcamErrors.Success(n._stwain),n._resultlist[r-1])},e.NewWebcamValue=function(n){return new t(n)}}(w.Lib),function(e){function t(n){var r=this;r._Count=0,r._resultlist=[],r._stwain=n}t.prototype.GetValue=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),""):(e.WebcamErrors.Success(n._stwain),n._resultlist[0].current)},t.prototype.GetIfAuto=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),!1):(e.WebcamErrors.Success(n._stwain),"true"==n._resultlist[0].auto)},e.NewWebcamSetting=function(n){return new t(n)}}(w.Lib),function(e){function t(n){var r=this;r._Count=0,r._resultlist=[],r._stwain=n}t.prototype.GetMinValue=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),""):n._resultlist[0].min},t.prototype.GetMaxValue=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),""):n._resultlist[0].max},t.prototype.GetSteppingDelta=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),0):n._resultlist[0].step},t.prototype.GetDefaultValue=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),0):n._resultlist[0].defaultValue},t.prototype.GetIfAuto=function(){var n=this;return 0==n._resultlist.length?(w.Lib.Errors.Webcam_InvalidIndex(n._stwain,""),!1):"true"==n._resultlist[0].auto},e.NewWebcamMoreSetting=function(n){return new t(n)}}(w.Lib),w.AddonReady(function(e,t){e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){r._innerSetWebcamValue=function(d){var i;return i=e.NewWebcamValue(r),d&&e.isArray(d)&&(i._resultlist=d,i._Count=d.length),i},r._innerSetWebcamSetting=function(d){var i;return i=e.NewWebcamSetting(r),d&&e.isArray(d)&&(i._resultlist=d,i._Count=d.length),i},r._innerSetWebcamMoreSetting=function(d){var i;return i=e.NewWebcamMoreSetting(r),d&&e.isArray(d)&&(i._resultlist=d,i._Count=d.length),i}}),e.Addon_Events.push("OnFrameCaptured"),e.Addon_Events.push("OnCaptureSuccess"),e.Addon_Events.push("OnCaptureError")}),w.AddonReady(function(e,t){function r(d,s){for(var i=s.length-1;i>=0&&s[i].p1>=d.p1&&!(s[i].p1==d.p1&&s[i].p2<d.p2);)s[i+1]=s[i],i--;s[i+1]=d}e.product.bHTML5Edition&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(d){var i,u,s=e.html5.Funs;u=e.env.bMac?"DynamicWebcam_"+w.WebcamVerInName+".dylib":e.env.bLinux?"DynamicWebcam_"+w.WebcamVerInName+".so":w.dcp.b64bit?"DynamicWebcamx64_"+w.WebcamVerInName+".dll":"DynamicWebcam_"+w.WebcamVerInName+".dll",d._isMobileMode()||d._innerSend("GetAddOnVersion",s.makeParams("webcam",u),!0,!1,!1),function n(d){d._innerWebcamValueFunction=function(i,u){var a;return a=this._innerFunRaw(i,u,!1,!1),this._innerSetWebcamValue(a)},d._innerWebcamSettingFunction=function(i,u){var a;return a=this._innerFunRaw(i,u,!1,!1),this._innerSetWebcamSetting(a)},d._innerWebcamMoreSettingFunction=function(i,u){var a;return a=this._innerFunRaw(i,u,!1,!1),this._innerSetWebcamMoreSetting(a)},d._OnCaptureSuccess=function(i){w.Lib.isFunction(this.__OnCaptureSuccess)&&this.__OnCaptureSuccess()},d._OnCaptureError=function(i){var f=i[1],a=i[2];w.Lib.isFunction(this.__OnCaptureError)&&this.__OnCaptureError(f,a)},d._OnFrameCaptured=function(i){var u=this,f=w.Lib;if(!u.__videoPause){var a=u.__videoQuality;a||(a=60),u.__videoDest&&u.__videoDest.UpdateVideoContainer(u.GetImageURL(-1,-1,-1,0,a))}f.isFunction(u.__OnFrameCaptured)&&u.__OnFrameCaptured(i)}}(d),i={Webcam:{IsModuleInstalled:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.IsModuleInstalled"):""!=f._innerFun("GetAddOnVersion",s.makeParams("webcam",u))},Download:function(f,a,o){var c=d;if(c._resetErr(),c._isMobileMode())return c._mobileNotSupport("Addon.Webcam.Download");w.Lib.cancelFrome=2;var m=function(){return w.Lib.isFunction(a)&&a(),!0},I=function(){return w.Lib.isFunction(o)&&o(d.ErrorCode,d.ErrorString),!1};if(!e.License.checkProductKey(d,{Webcam:!0},!0))return I();if(this.IsModuleInstalled())return m();if(!f||""==f)return w.Lib.Errors.Webcam_InvalidRemoteFilename(c),I();if(s.isServerInvalid(c))return I(),!1;w.Lib.showProgress(c,"Download",!0);var g=!0;return c._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]),w.Lib.isFunction(a)||(g=!1),s.loadHttpBlob(c,"get",f,g,function(C){c._OnPercentDone([0,-1,"Loading..."]),c.__LoadImageFromBytes(C,100,"",g,m,I)},function(){w.Lib.closeProgress("Download"),I()},function(C){var _=0===C.total?100:Math.round(100*C.loaded/C.total);[C.loaded," / ",C.total].join(""),c._OnPercentDone([0,_,"","http"])})},GetSourceList:function(){var f=d;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.Webcam.GetSourceList");if(!e.License.checkProductKey(f,{Webcam:!0},!0))return[];var a=f._innerFunRaw("GetWebcamSourceList");return 0==f.ErrorCode&&a.splice(a.length-1,1),a},SelectSource:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.SelectSource"):!!e.License.checkProductKey(a,{Webcam:!0},!0)&&a._innerFun("SelectWebcam",s.makeParams(f))},CloseSource:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.CloseSource"):(this._clear(),f._innerFun("StopCapture"))},GetFramePartURL:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.GetFramePartURL"):this._isPlaying()?f.GetImageURL(-1,-1,-1,!0,f.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(f),"")},GetFrameURL:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.GetFrameURL"):this._isPlaying()?f.GetImageURL(-1,-1,-1,0,f.__videoQuality):(e.WebcamErrors.VideoNotPlayingWhenGetURL(f),"")},PlayVideo:function(f,a,o,c,l){var m=d;if(m._resetErr(),m._isMobileMode())return m._mobileNotSupport("Addon.Webcam.PlayVideo");var p=w.Lib,g=60,_=this,v=function(){return _._clear(),w.Lib.isFunction(l)&&l(d.ErrorCode,d.ErrorString),!1};return f?e.License.checkProductKey(d,{Webcam:!0},!0)?(m.__videoDest=f,m.__videoDest.ShowVideoContainer(!0),p.isFunction(o)&&(d.__OnFrameCaptured=o),d.__videoPause?(d.__videoPause=!1,e.isFunction(c)&&c(),!0):(d.__videoPause=!1,a?((g=1*a)<1&&(g=60),d.__videoQuality=g):d.__videoQuality=g,d._innerSend("PlayVideo",s.makeParams(!0),!0,c,v))):v():(w.Lib.Errors.ParameterCannotEmpty(d),v())},PauseVideo:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.PauseVideo"):(this._isPlaying()&&(f.__videoPause=!0),!0)},_clear:function(){var f=d;f.__videoPause=!1,f.__OnFrameCaptured=!1,f.__videoQuality=60,f.__videoDest&&f.__videoDest.ShowVideoContainer(!1),f.__videoDest=!1},_isPlaying:function(){return d.GetIfShowVideoContainer()},StopVideo:function(){var f=d;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.Webcam.StopVideo");this._clear();var a=f._innerFun("PlayVideo",s.makeParams(!1,0));return f._innerFun("StopCapture"),a},CaptureImage:function(f,a){var o=d;if(o._resetErr(),o._isMobileMode())return o._mobileNotSupport("Addon.Webcam.CaptureImage"),e.isFunction(a)&&a(o._errorCode,o._errorString),!1;if(!e.License.checkProductKey(o,{Webcam:!0},!0))return e.isFunction(a)&&a(o._errorCode,o._errorString),!1;var c="CaptureImage",m=function(){s.hideMask(c),e.isFunction(a)&&a(o._errorCode,o._errorString)};return s.showMask(c),o.__OnCaptureError=m,o._innerSend(c,s.makeParams(!1),!0,function(){s.hideMask(),0==o.ErrorCode?(s.hideMask(c),e.isFunction(f)&&setTimeout(f,0),e.License.isLTS()&&w.DWT.lcvrf(d)):m()},m)},GetMediaType:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.GetMediaType"):f._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.SetMediaType"):e.isString(f)?a._innerFun("SetMediaType",s.makeParams(f)):(e.Errors.InvalidValue(a),!1)},GetResolution:function(){var f=d;if(f._resetErr(),f._isMobileMode())return f._mobileNotSupport("Addon.Webcam.GetResolution");var a=f._innerWebcamValueFunction("GetResolution");if(a&&a._resultlist){var o,c,p,l=a._resultlist,m=[],I=[];for(l.length>0&&(p=l[l.length-1]),""==p&&l.length>0&&(p=l[0]),o=0;o<l.length-1;o++){var g=(c=l[o]).toLowerCase().split("x");r({value:c,p1:parseInt(g[0]),p2:parseInt(g[1])},m)}for(o=0;o<m.length;o++)I.push(c=m[o].value);p&&I.push(p),a._resultlist=I,m=null,I=null}return a},SetResolution:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.SetResolution"):e.isNumber(f)||e.isString(f)?a._innerFun("SetResolution",s.makeParams(f)):(e.Errors.InvalidValue(a),!1)},GetFrameRate:function(){var f=d;return f._resetErr(),f._isMobileMode()?f._mobileNotSupport("Addon.Webcam.GetFrameRate"):f._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.SetFrameRate"):e.isNumber(f)?d._innerFun("SetFrameRate",s.makeParams(f)):(e.Errors.InvalidValue(a),!1)},GetVideoPropertySetting:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting"):a._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",s.makeParams(f))},GetVideoPropertyMoreSetting:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting"):a._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",s.makeParams(f))},SetVideoPropertySetting:function(f,a,o){var c=d;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting"):c._innerFun("SetWebcamVideoPropertySetting",s.makeParams(f,a,o))},SetVideoRotateMode:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.SetVideoRotateMode"):a._innerFun("SetVideoRotateMode",s.makeParams(f))},GetCameraControlPropertySetting:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting"):a._innerWebcamSettingFunction("GetWebcamCameraControlSetting",s.makeParams(f))},GetCameraControlPropertyMoreSetting:function(f){var a=d;return a._resetErr(),a._isMobileMode()?a._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting"):a._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",s.makeParams(f))},SetCameraControlPropertySetting:function(f,a,o){var c=d;return c._resetErr(),c._isMobileMode()?c._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting"):c._innerFun("SetWebcamCameraControlPropertySetting",s.makeParams(f,a,o))}}},d.__addon=d.__addon||{},e.mix(d.__addon,i)})}),w.AddonReady(function(e,t){var n;(e.product.bPluginEdition||e.product.bActiveXEdition)&&(e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(s){var i,u;if(!s.getSWebTwain()||!s.getSWebTwain().Addon)return!1;w.navInfo.bWin&&(n=!w.navInfo.bOSx64||w.navInfo.bWOW64?"DynamicWebcam_"+w.WebcamVerForActiveX+".dll":"DynamicWebcamx64_"+w.WebcamVerForActiveX+".dll"),i=s.getSWebTwain();try{i.GetAddOnVersion("webcam",n)}catch{}(function r(s){s._innerRead=function(i){var f;try{f=w.Lib.parse(i)}catch{}return f.result},s._innerWebcamValueFunctionPlugin=function(i){var f;return f=this._innerRead(i),this._innerSetWebcamValue(f)},s._innerWebcamSettingFunctionPlugin=function(i){var f;return f=this._innerRead(i),this._innerSetWebcamSetting(f)},s._innerWebcamMoreSettingFunctionPlugin=function(i){var f;return f=this._innerRead(i),this._innerSetWebcamMoreSetting(f)}})(s),u={Webcam:{IsModuleInstalled:function(){var a=i.GetAddOnVersion("webcam",n);return e.setErrorString(s),""!=a},Download:function(a,o,c){var l=function(){return w.Lib.isFunction(o)&&o(),!0},m=function(){return w.Lib.isFunction(c)&&c(s.ErrorCode,s.ErrorString),!1};if(!e.License.checkProductKey(s,{Webcam:!0},!0))return m();if(this.IsModuleInstalled())return l();if(!a||""==a)return w.Lib.Errors.Webcam_InvalidRemoteFilename(s),m();var I=i.DownloadAddon(a);return e.wrapperRet(s,I,l,m)},GetSourceList:function(){if(!e.License.checkProductKey(s,{Webcam:!0},!0))return[];var a=i.GetWebcamSourceList(),o=[];return e.setErrorString(s),0==s.ErrorCode&&(o=s._innerRead(a))&&o.length>1&&o.splice(o.length-1,1),o},SelectSource:function(a){if(!e.License.checkProductKey(s,{Webcam:!0},!0))return!1;var o=i.SelectWebcam(a);return e.setErrorString(s),o},CloseSource:function(){s._playVideoDWT=null;var a=i.StopCapture();return e.setErrorString(s),a},GetFramePartURL:function(){if(!this._isPlaying())return e.WebcamErrors.VideoNotPlayingWhenGetURL(s),"";var a=i.GetDIB(-1);return e.setErrorString(s),a},GetFrameURL:function(){return""},PlayVideo:function(a,o,c,l,m){var I=function(){return s._playVideoDWT=null,w.Lib.isFunction(m)&&m(s.ErrorCode,s.ErrorString),!1};if(!a||!a.getSWebTwain())return w.Lib.WebcamErrors.InvalidParameter(s),I();if(!e.License.checkProductKey(s,{Webcam:!0},!0))return I();var p=a.getSWebTwain().CurrentHWND;return p?(s._playVideoDWT=a,setTimeout(function(){var g=i.RunWebcamCmd("PlayVideo",p,null,null,c);e.wrapperRet(s,g,l,I)},0),!0):(e.WebcamErrors.InvalidParameter(s),I())},PauseVideo:function(){return!0},StopVideo:function(){s._playVideoDWT=null;var a=i.RunWebcamCmd("StopVideo",0,null,null,null);return e.setErrorString(s),i.StopCapture(),a},CaptureImage:function(a,o){var l=function(){return w.Lib.isFunction(o)&&o(s.ErrorCode,s.ErrorString),!1};if(!e.License.checkProductKey(s,{Webcam:!0},!0))return l();var m=i.RunWebcamCmd("Capture",0,function(){e.isFunction(a)&&setTimeout(a,0),e.License.isLTS()&&w.DWT.lcvrf(s)},l,null);return e.setErrorString(s),m},GetMediaType:function(){var a=s._innerWebcamValueFunctionPlugin(i.GetMediaType());return e.setErrorString(s),a},SetMediaType:function(a){if(!e.isString(a))return e.Errors.InvalidValue(s),!1;var o=i.SetMediaType(a);return e.setErrorString(s),o},GetResolution:function(){var a=s._innerWebcamValueFunctionPlugin(i.GetResolution());if(e.setErrorString(s),a&&a._resultlist){var o,c,p,l=a._resultlist,m=[],I=[];for(l.length>0&&(p=l[l.length-1]),o=0;o<l.length-1;o++){var g=(c=l[o]).toLowerCase().split("x");h({value:c,p1:parseInt(g[0]),p2:parseInt(g[1])},m)}for(o=0;o<m.length;o++)I.push(c=m[o].value);p&&I.push(p),a._resultlist=I,m=null,I=null}return a},SetResolution:function(a){if(!e.isNumber(a)&&!e.isString(a))return e.Errors.InvalidValue(s),!1;var o=i.SetResolution(a);return e.setErrorString(s),o},GetFrameRate:function(){var a=s._innerWebcamValueFunctionPlugin(i.GetFrameRate());return e.setErrorString(s),a},SetFrameRate:function(a){if(!e.isNumber(a))return e.Errors.InvalidValue(s),!1;var o=i.SetFrameRate(a);return e.setErrorString(s),o},GetVideoPropertySetting:function(a){var o=i.GetWebcamVideoPropertySetting(a);return e.setErrorString(s),s._innerWebcamSettingFunctionPlugin(o)},GetVideoPropertyMoreSetting:function(a){var o=i.GetWebcamVideoPropertyMoreSetting(a);return e.setErrorString(s),s._innerWebcamMoreSettingFunctionPlugin(o)},SetVideoPropertySetting:function(a,o,c){var l=i.SetWebcamVideoPropertySetting(a,o,c);return e.setErrorString(s),l},SetVideoRotateMode:function(a){var o=i.SetVideoRotateMode(a);return e.setErrorString(s),o},GetCameraControlPropertySetting:function(a){var o=i.GetWebcamCameraControlSetting(a);return e.setErrorString(s),s._innerWebcamSettingFunctionPlugin(o)},GetCameraControlPropertyMoreSetting:function(a){var o=i.GetWebcamCameraControlMoreSetting(a);return e.setErrorString(s),s._innerWebcamMoreSettingFunctionPlugin(o)},SetCameraControlPropertySetting:function(a,o,c){var l=i.SetWebcamCameraControlPropertySetting(a,o,c);return e.setErrorString(s),l},_isPlaying:function(){return!!s._playVideoDWT}}},s.Addon=s.Addon||{},e.mix(s.Addon,u)}));function h(s,i){for(var u=i.length-1;u>=0&&i[u].p1>=s.p1&&!(i[u].p1==s.p1&&i[u].p2<s.p2);)i[u+1]=i[u],u--;i[u+1]=s}}),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},w.CameraVerInName="17.2.0.1026",w.AddonReady(function(e,t){e.product.bHTML5Edition&&!w.navInfoSync.bIE&&function(n){var r={};function h(d){if(r[d])return r[d].exports;var s=r[d]={i:d,l:!1,exports:{}};return n[d].call(s.exports,s,s.exports,h),s.l=!0,s.exports}h.m=n,h.c=r,h.d=function(d,s,i){h.o(d,s)||Object.defineProperty(d,s,{enumerable:!0,get:i})},h.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},h.t=function(d,s){if(1&s&&(d=h(d)),8&s||4&s&&"object"==typeof d&&d&&d.__esModule)return d;var i=Object.create(null);if(h.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:d}),2&s&&"string"!=typeof d)for(var u in d)h.d(i,u,function(f){return d[f]}.bind(null,u));return i},h.n=function(d){var s=d&&d.__esModule?function(){return d.default}:function(){return d};return h.d(s,"a",s),s},h.o=function(d,s){return Object.prototype.hasOwnProperty.call(d,s)},h.p="",h(h.s=18)}([function(n,r,h){n.exports=h(16)},function(n,r){function h(d,s,i,u,f,a,o){try{var c=d[a](o),l=c.value}catch(m){return void i(m)}c.done?s(l):Promise.resolve(l).then(u,f)}n.exports=function(d){return function(){var s=this,i=arguments;return new Promise(function(u,f){var a=d.apply(s,i);function o(l){h(a,u,f,o,c,"next",l)}function c(l){h(a,u,f,o,c,"throw",l)}o(void 0)})}},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r,h){var d,C,s=(C={},function(_){if(void 0===C[_]){var v=document.querySelector(_);if(window.HTMLIFrameElement&&v instanceof window.HTMLIFrameElement)try{v=v.contentDocument.head}catch{v=null}C[_]=v}return C[_]}),i=[];function u(C){for(var _=-1,v=0;v<i.length;v++)if(i[v].identifier===C){_=v;break}return _}function f(C,_){for(var v={},T=[],D=0;D<C.length;D++){var P=C[D],E=_.base?P[0]+_.base:P[0],M=v[E]||0,O="".concat(E," ").concat(M);v[E]=M+1;var R=u(O),F={css:P[1],media:P[2],sourceMap:P[3]};-1!==R?(i[R].references++,i[R].updater(F)):i.push({identifier:O,updater:g(F,_),references:1}),T.push(O)}return T}function a(C){var _=document.createElement("style"),v=C.attributes||{};if(void 0===v.nonce){var T=h.nc;T&&(v.nonce=T)}if(Object.keys(v).forEach(function(P){_.setAttribute(P,v[P])}),"function"==typeof C.insert)C.insert(_);else{var D=s(C.insert||"head");if(!D)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");D.appendChild(_)}return _}var o,c=(o=[],function(C,_){return o[C]=_,o.filter(Boolean).join("\n")});function l(C,_,v,T){var D=v?"":T.media?"@media ".concat(T.media," {").concat(T.css,"}"):T.css;if(C.styleSheet)C.styleSheet.cssText=c(_,D);else{var P=document.createTextNode(D),E=C.childNodes;E[_]&&C.removeChild(E[_]),E.length?C.insertBefore(P,E[_]):C.appendChild(P)}}function m(C,_,v){var T=v.css,D=v.media,P=v.sourceMap;if(D?C.setAttribute("media",D):C.removeAttribute("media"),P&&typeof btoa<"u"&&(T+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(P))))," */")),C.styleSheet)C.styleSheet.cssText=T;else{for(;C.firstChild;)C.removeChild(C.firstChild);C.appendChild(document.createTextNode(T))}}var I=null,p=0;function g(C,_){var v,T,D;if(_.singleton){var P=p++;v=I||(I=a(_)),T=l.bind(null,v,P,!1),D=l.bind(null,v,P,!0)}else v=a(_),T=m.bind(null,v,_),D=function(){!function(E){if(null===E.parentNode)return!1;E.parentNode.removeChild(E)}(v)};return T(C),function(E){if(E){if(E.css===C.css&&E.media===C.media&&E.sourceMap===C.sourceMap)return;T(C=E)}else D()}}n.exports=function(C,_){(_=_||{}).singleton||"boolean"==typeof _.singleton||(_.singleton=(void 0===d&&(d=Boolean(window&&document&&document.all&&!window.atob)),d));var v=f(C=C||[],_);return function(T){if(T=T||[],"[object Array]"===Object.prototype.toString.call(T)){for(var D=0;D<v.length;D++){var P=u(v[D]);i[P].references--}for(var E=f(T,_),M=0;M<v.length;M++){var O=u(v[M]);0===i[O].references&&(i[O].updater(),i.splice(O,1))}v=E}}}},function(n,r,h){n.exports=function(d){var s=[];return s.toString=function(){return this.map(function(i){var u=d(i);return i[2]?"@media ".concat(i[2]," {").concat(u,"}"):u}).join("")},s.i=function(i,u,f){"string"==typeof i&&(i=[[null,i,""]]);var a={};if(f)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var l=0;l<i.length;l++){var m=[].concat(i[l]);f&&a[m[0]]||(u&&(m[2]=m[2]?"".concat(u," and ").concat(m[2]):u),s.push(m))}},s}},function(n,r){function h(){return n.exports=h=Object.assign||function(d){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(d[u]=i[u])}return d},n.exports.default=n.exports,n.exports.__esModule=!0,h.apply(this,arguments)}n.exports=h,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r,h){var d=h(17);n.exports=function(s,i){s.prototype=Object.create(i.prototype),s.prototype.constructor=s,d(s,i)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,".dcs-cameraEditPage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.dcs-cameraEditPage header {\n  width: 100%;\n  height: 40px;\n  flex: 0 0 40px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraEditPage header > div {\n  width: 24px;\n  height: 24px;\n  margin-right: auto;\n  margin-left: 18px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraEditPage header > div > i {\n  font-size: 18px;\n  color: #fff;\n}\n.dcs-cameraEditPage .resultContainer {\n  flex: 1;\n  background: #323232;\n  overflow: hidden;\n  position: relative;\n}\n.dcs-cameraEditPage .resultContainer canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n.dcs-cameraEditPage .resultContainer .dcs-cvsContainer {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  right: 20px;\n  bottom: 20px;\n}\n.dcs-cameraEditPage .footerButtons {\n  height: 48px;\n  flex: 0 0 48px;\n  width: 100%;\n  background: #000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n}\n.dcs-cameraEditPage .footerButtons div {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #fff;\n  width: 9.3333333333vw;\n  height: 9.3333333333vw;\n}\n.dcs-cameraEditPage .footerButtons div > p {\n  font-size: 12px;\n}\n.dcs-cameraEditPage .footerButtons div > i {\n  font-size: 24px;\n}",""]),r.a=s},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,'.dcs-cameraHomePage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.dcs-cameraHomePage header {\n  width: 100%;\n  height: 7.1964017991vh;\n  background: #000;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n.dcs-cameraHomePage header > div {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraHomePage header > div > i {\n  font-size: 24px;\n  color: #fff;\n}\n.dcs-cameraHomePage header > div:first-child {\n  margin-left: 18px;\n}\n.dcs-cameraHomePage header > div:last-child {\n  margin-right: 18px;\n}\n.dcs-cameraHomePage .videoContainer {\n  flex: 1;\n  background: #fff;\n}\n.dcs-cameraHomePage .buttonList {\n  height: 100px;\n  width: 100%;\n  background: #000000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n  position: relative;\n}\n.dcs-cameraHomePage .buttonList .modeTitle {\n  width: 12vw;\n  padding-top: 10px;\n  position: absolute;\n  left: 50%;\n  top: 0;\n  border-top: 0.7496251874vh solid #fe8e14;\n  transform: translate3d(-50%, 0, 0);\n}\n.dcs-cameraHomePage .buttonList > div {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  color: #fff;\n  width: 13.3333333333vw;\n}\n.dcs-cameraHomePage .buttonList > div i {\n  font-size: 26px;\n}\n.dcs-cameraHomePage .buttonList > div p {\n  display: none;\n  margin-top: 10px;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-captureBtn {\n  width: 80px;\n  height: 80px;\n  flex: 0 0 80px;\n  border-radius: 50%;\n  margin: 0 15px;\n  background: #fe8e14;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-captureBtn > i {\n  font-size: 30px;\n}\n.dcs-cameraHomePage .buttonList .activeContinuous {\n  color: #fe8e14;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg {\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  /*border: 2px solid #fe8e14;*/\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg .imgCount {\n  position: absolute;\n  right: -8px;\n  top: -8px;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background: #fe8e14;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg .previewImg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  background: #DDDDDD;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg p,\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg i {\n  display: none;\n}\n.dcs-cameraHomePage .buttonList .dcs-btn-multipleImg .nextArr {\n  position: absolute;\n  right: -16px;\n  top: 50%;\n  font-size: 12px;\n  color: #fe8e14;\n  transform: rotate(180deg) translate(0, 50%);\n}\n.dcs-cameraHomePage .resolutionList {\n  list-style: none;\n  position: absolute;\n  background: #292929;\n  left: 0;\n  top: 100%;\n  margin: 0;\n  z-index: 666;\n  padding: 0;\n  color: white;\n}\n.dcs-cameraHomePage .resolutionList .checkBox {\n  pointer-events: none;\n  width: 16px;\n  height: 16px;\n  border: 1px solid white;\n  border-radius: 50%;\n  margin: 0 10px;\n}\n.dcs-cameraHomePage .resolutionList li + li {\n  border-top: 1px solid #424141;\n}\n.dcs-cameraHomePage .resolutionList > li {\n  height: 35px;\n  display: flex;\n  align-items: center;\n  padding-right: 20px;\n  font-size: 14px;\n}\n.dcs-cameraHomePage .resolutionList > li p {\n  white-space: nowrap;\n  pointer-events: none;\n}\n.dcs-cameraHomePage .resolutionList .selectedItem .checkBox {\n  background-color: #fe8e14;\n}\n\n.dcs-capturing::after {\n  content: "";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  padding: 4px;\n  border-radius: 50%;\n  animation: dcs-glow-keyframe-home 800ms ease-out infinite alternate;\n}\n\n@keyframes dcs-glow-keyframe-home {\n  0% {\n    border: 3px solid transparent;\n  }\n  100% {\n    border: 3px solid #fe8e14;\n  }\n}',""]),r.a=s},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,'.dcs-cameraInsertPage {\n  user-select: none;\n  z-index: 10000;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.dcs-cameraInsertPage header {\n  width: 100%;\n  height: 7.1964017991vh;\n  background: #000;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n.dcs-cameraInsertPage header > div {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraInsertPage header > div > i {\n  font-size: 24px;\n  color: #fff;\n}\n.dcs-cameraInsertPage header > div:first-child {\n  margin-left: 18px;\n}\n.dcs-cameraInsertPage header > div:last-child {\n  margin-right: 18px;\n}\n.dcs-cameraInsertPage .videoContainer {\n  flex: 1;\n  background: #fff;\n}\n.dcs-cameraInsertPage .buttonList {\n  height: 100px;\n  width: 100%;\n  background: #000000;\n  display: flex;\n  justify-content: space-evenly;\n  margin-top: auto;\n  align-items: center;\n  position: relative;\n}\n.dcs-cameraInsertPage .buttonList .modeTitle {\n  width: 12vw;\n  padding-top: 10px;\n  position: absolute;\n  left: 50%;\n  top: 0;\n  border-top: 0.7496251874vh solid #fe8e14;\n  transform: translate3d(-50%, 0, 0);\n}\n.dcs-cameraInsertPage .buttonList > div {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  color: #fff;\n  width: 13.3333333333vw;\n}\n.dcs-cameraInsertPage .buttonList > div i {\n  font-size: 26px;\n}\n.dcs-cameraInsertPage .buttonList > div p {\n  display: none;\n  margin-top: 10px;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-captureBtn {\n  width: 80px;\n  height: 80px;\n  flex: 0 0 80px;\n  border-radius: 50%;\n  margin: 0 15px;\n  background: #fe8e14;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-captureBtn > i {\n  font-size: 30px;\n}\n.dcs-cameraInsertPage .buttonList .activeContinuous {\n  color: #fe8e14;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg {\n  width: 50px;\n  height: 50px;\n  background: #fff;\n  /*border: 2px solid #fe8e14;*/\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg .imgCount {\n  position: absolute;\n  right: -8px;\n  top: -8px;\n  width: 18px;\n  height: 18px;\n  color: #fff;\n  background: #fe8e14;\n  border-radius: 50%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg .previewImg {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n  background: #DDDDDD;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg p,\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg i {\n  display: none;\n}\n.dcs-cameraInsertPage .buttonList .dcs-btn-multipleImg .nextArr {\n  position: absolute;\n  right: -16px;\n  top: 50%;\n  font-size: 12px;\n  color: #fe8e14;\n  transform: rotate(180deg) translate(0, 50%);\n}\n.dcs-cameraInsertPage .resolutionList {\n  list-style: none;\n  position: absolute;\n  background: #292929;\n  left: 0;\n  top: 100%;\n  margin: 0;\n  z-index: 666;\n  padding: 0;\n  color: white;\n}\n.dcs-cameraInsertPage .resolutionList .checkBox {\n  pointer-events: none;\n  width: 16px;\n  height: 16px;\n  border: 1px solid white;\n  border-radius: 50%;\n  margin: 0 10px;\n}\n.dcs-cameraInsertPage .resolutionList li + li {\n  border-top: 1px solid #424141;\n}\n.dcs-cameraInsertPage .resolutionList > li {\n  height: 35px;\n  display: flex;\n  align-items: center;\n  padding-right: 20px;\n  font-size: 14px;\n}\n.dcs-cameraInsertPage .resolutionList > li p {\n  white-space: nowrap;\n  pointer-events: none;\n}\n.dcs-cameraInsertPage .resolutionList .selectedItem .checkBox {\n  background-color: #fe8e14;\n}\n\n.dcs-capturing::after {\n  content: "";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  padding: 4px;\n  border-radius: 50%;\n  animation: dcs-glow-keyframe-insert 800ms ease-out infinite alternate;\n}\n\n@keyframes dcs-glow-keyframe-insert {\n  0% {\n    border: 3px solid transparent;\n  }\n  100% {\n    border: 3px solid #fe8e14;\n  }\n}',""]),r.a=s},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,".dcs-loadingContainer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 666666;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n}\n\n@keyframes dcs-loading-keyframe {\n  0% {\n    opacity: 1;\n    backface-visibility: hidden;\n    transform: translateZ(0) scale(1.5, 1.5);\n  }\n  100% {\n    opacity: 0;\n    backface-visibility: hidden;\n    transform: translateZ(0) scale(1, 1);\n  }\n}\n.dcs-loading-content div > div {\n  position: absolute;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: #fe8e14;\n  animation: dcs-loading-keyframe 1s linear infinite;\n}\n\n.dcs-loading-content div:nth-child(1) > div {\n  left: 148px;\n  top: 88px;\n  animation-delay: -0.875s;\n}\n\n.dcs-loading-content > div:nth-child(1) {\n  transform: rotate(0deg);\n  transform-origin: 160px 100px;\n}\n\n.dcs-loading-content div:nth-child(2) > div {\n  left: 130px;\n  top: 130px;\n  animation-delay: -0.75s;\n}\n\n.dcs-loading-content > div:nth-child(2) {\n  transform: rotate(45deg);\n  transform-origin: 142px 142px;\n}\n\n.dcs-loading-content div:nth-child(3) > div {\n  left: 88px;\n  top: 148px;\n  animation-delay: -0.625s;\n}\n\n.dcs-loading-content > div:nth-child(3) {\n  transform: rotate(90deg);\n  transform-origin: 100px 160px;\n}\n\n.dcs-loading-content div:nth-child(4) > div {\n  left: 46px;\n  top: 130px;\n  animation-delay: -0.5s;\n}\n\n.dcs-loading-content > div:nth-child(4) {\n  transform: rotate(135deg);\n  transform-origin: 58px 142px;\n}\n\n.dcs-loading-content div:nth-child(5) > div {\n  left: 28px;\n  top: 88px;\n  animation-delay: -0.375s;\n}\n\n.dcs-loading-content > div:nth-child(5) {\n  transform: rotate(180deg);\n  transform-origin: 40px 100px;\n}\n\n.dcs-loading-content div:nth-child(6) > div {\n  left: 46px;\n  top: 46px;\n  animation-delay: -0.25s;\n}\n\n.dcs-loading-content > div:nth-child(6) {\n  transform: rotate(225deg);\n  transform-origin: 58px 58px;\n}\n\n.dcs-loading-content div:nth-child(7) > div {\n  left: 88px;\n  top: 28px;\n  animation-delay: -0.125s;\n}\n\n.dcs-loading-content > div:nth-child(7) {\n  transform: rotate(270deg);\n  transform-origin: 100px 40px;\n}\n\n.dcs-loading-content div:nth-child(8) > div {\n  left: 130px;\n  top: 46px;\n  animation-delay: 0s;\n}\n\n.dcs-loading-content > div:nth-child(8) {\n  transform: rotate(315deg);\n  transform-origin: 142px 58px;\n}\n\n.dcs-loading-wrapper {\n  width: 200px;\n  height: 200px;\n  display: inline-block;\n  overflow: hidden;\n  background: none;\n}\n\n.dcs-loading-content {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform: translateZ(0) scale(1);\n  backface-visibility: hidden;\n  transform-origin: 0 0;\n  /* see note above */\n}\n\n.dcs-loading-content div {\n  box-sizing: content-box;\n}",""]),r.a=s},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,".dcs-cameraContainer {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.dcs-cameraCvs,\n.dcs-cameraVideo {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n\n.dcs-display-none {\n  display: none !important;\n}\n\n.dcs-hidden {\n  visibility: hidden !important;\n}\n\n.dcs-disable {\n  color: gray !important;\n  pointer-events: none;\n}\n.dcs-disable > i {\n  color: gray !important;\n}\n\n.dcs-overflowHidden {\n  overflow: hidden;\n}\n\n.dcs-relative {\n  position: relative;\n}\n\n.dcs-fixed-full {\n  position: fixed !important;\n  left: 0 !important;\n  top: 0 !important;\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.dcs-dropdownStyle, .dcs-filterDropDown, .dcs-footerButtons .dropdown {\n  list-style: none;\n  background: #292929;\n  bottom: 100%;\n  z-index: 666;\n  padding-left: 10px;\n  align-items: center;\n  display: flex;\n  bottom: 48px;\n  width: 100%;\n  height: 100px;\n  left: 0;\n  position: absolute;\n  overflow: auto;\n  box-sizing: border-box;\n  margin: 0;\n}\n.dcs-dropdownStyle .checkBox, .dcs-filterDropDown .checkBox, .dcs-footerButtons .dropdown .checkBox {\n  display: none;\n}\n.dcs-dropdownStyle img, .dcs-filterDropDown img, .dcs-footerButtons .dropdown img {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.dcs-dropdownStyle > li, .dcs-filterDropDown > li, .dcs-footerButtons .dropdown > li {\n  box-sizing: border-box;\n  border: 2px solid #292929;\n  width: 70px;\n  height: 70px;\n  flex: 0 0 70px;\n  margin-right: 8px;\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  background: #fff;\n  position: relative;\n}\n.dcs-dropdownStyle > li p, .dcs-filterDropDown > li p, .dcs-footerButtons .dropdown > li p {\n  white-space: nowrap;\n  pointer-events: none;\n  position: absolute;\n  bottom: -2px;\n  width: calc(100% + 4px);\n  margin-left: -2px;\n  background: rgba(0, 0, 0, 0.5);\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.dcs-dropdownStyle > li img, .dcs-filterDropDown > li img, .dcs-footerButtons .dropdown > li img {\n  pointer-events: none;\n}\n.dcs-dropdownStyle .selectedItem, .dcs-filterDropDown .selectedItem, .dcs-footerButtons .dropdown .selectedItem {\n  border: 2px solid #fe8e14;\n}\n\n.dcs-filterDropDown p {\n  margin: 0;\n}\n\n.dcs-selected i {\n  color: #fe8e14 !important;\n}\n\n.dcs-block {\n  visibility: hidden;\n}",""]),r.a=s},function(n,r,h){var d=h(3),s=h.n(d)()(function(i){return i[1]});s.push([n.i,'@font-face {\n  font-family: "dcs-font";\n  /* Project id 2721323 */\n  src: url("data:font/ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwR1NVQiCLJXoAAAE4AAAAVE9TLzI8GUmLAAABjAAAAGBjbWFwtRi5hQAAAmgAAAMWZ2x5ZisdxxsAAAXAAAAdRGhlYWQh1NDqAAAA4AAAADZoaGVhCskGjAAAALwAAAAkaG10eIUm//YAAAHsAAAAfGxvY2GEUIqUAAAFgAAAAEBtYXhwATYA2QAAARgAAAAgbmFtZRCjPLAAACMEAAACZ3Bvc3QEYVVaAAAlbAAAAcEAAQAAA4D/gABcBu7//f/+Bu0AAQAAAAAAAAAAAAAAAAAAAB8AAQAAAAEAAEvuCuFfDzz1AAsEAAAAAADd5cZ3AAAAAN3lxnf//f99Bu0DggAAAAgAAgAAAAAAAAABAAAAHwDNAA0AAAAAAAIAAAAKAAoAAAD/AAAAAAAAAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAQESwGQAAUAAAKJAswAAACPAokCzAAAAesAMgEIAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAwOYB5nADgP+AAAAD3ACDAAAAAQAAAAAAAAAAAAAAAAACBAAAAAQAAAAEAP//BKz//QSq//8EAAAABAAAAAQAAAAFRwAABRAAAAbuAAAEPQAABAD//wQA//8GQv//BAX//wQAAAAEAAAABAAAAAQAAAAEAAAABAD//wQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAUAAAADAAAALAAAAAQAAAGeAAEAAAAAAJgAAwABAAAALAADAAoAAAGeAAQAbAAAAAgACAACAADmAeZa5nD//wAA5gHmUOZf//8AAAAAAAAAAQAIAAgAHAAAAAEAHgAdABoAGwAcABcAGAAZABQAFQAWABMAEgARAA4AEAAPAAwADQAJAAoACwAGAAQABQADAAgABwACAAABBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAF4AAAAAAAAAB4AAOYBAADmAQAAAAEAAOZQAADmUAAAAB4AAOZRAADmUQAAAB0AAOZSAADmUgAAABoAAOZTAADmUwAAABsAAOZUAADmVAAAABwAAOZVAADmVQAAABcAAOZWAADmVgAAABgAAOZXAADmVwAAABkAAOZYAADmWAAAABQAAOZZAADmWQAAABUAAOZaAADmWgAAABYAAOZfAADmXwAAABMAAOZgAADmYAAAABIAAOZhAADmYQAAABEAAOZiAADmYgAAAA4AAOZjAADmYwAAABAAAOZkAADmZAAAAA8AAOZlAADmZQAAAAwAAOZmAADmZgAAAA0AAOZnAADmZwAAAAkAAOZoAADmaAAAAAoAAOZpAADmaQAAAAsAAOZqAADmagAAAAYAAOZrAADmawAAAAQAAOZsAADmbAAAAAUAAOZtAADmbQAAAAMAAOZuAADmbgAAAAgAAOZvAADmbwAAAAcAAOZwAADmcAAAAAIAAAAAAAAAsAG8AtoDdgQCBCIESAT0Bb4GfAeaCAwIuAm6CpgKzgr+CxYLeguwC+YMIAxWDHQNMg1kDbgN3A42DqIAAgAA/7YEAAOBACkAeAAAATY1NCcmJyYiBwYHBhUUFw4BBwYVFBcWFxYzMjY3HgEzMjc2NzY1NC4BAyImJyYnJjU0NzY3JicGBwYVFBYXDgEjBi4BNTQ2NzY/ATIWFxYXNjcmJy4BIyIHJjU0PgEyHgEVFAcGBw4BBwYHFhc2Nz4BNx4BFRQOAQM4AysqR0msSUcqKwM7WhkaKypHSlU3ZSkpZTdVSkcqKzNbrShJHiAWKQEFESYmDwYDIh4eSSdBbkBPQSMpEihJHiAWFiAYHillNxMVAUBtgm1AAQQSEj8oJCgRBSUmO1wZQFBAbgIXFhhVSkcqKysqR0pVGRUXWDk8QVZJSCorJCIiJCsqSElWQXVY/gMZFxghO0sMDigkAhAjJxYYNWEpFxgBQG5BSHcbEAMBGRcYICEXIBghJAMPDEFtQEBuQAwPJyQoPBEQAyMoBA8YWjscd0hAbkAAAA3///9/BAIDggAUACgAPABRAGEAcQB9AIkAmQCdAKkAtQDBAAATFjY9ATQ2OwEyPgEmKwEiBh0BFBYBIyIGFBY7ATIWHQEUFjI2PQE0JgEjIiY9ATQmIgYdARQWOwEyNjQmASYGHQEUBisBIgYUFjsBMjYnNTQmAREUFjMhMjY1ETQmIyEiBgURFAYjISImNREmNjMhMhYBITI2NCYjISIOARYXITI2NCYjISIOARY3MzI2PQE0JisBIgYdAR4BNzMVIzczMjY0JisBIgYeAQMhMjY0JiMhIg4BFhMzPgE0JisBIgYeARYJDRkS8AgMAQwJ9CEwDAOf9AkMDAn0ERkNEQ0z/Xj0ERkMEQwxIvQJDAwCmgkMGBLyCQwMCfQiMQIM/LMdFAJUFB0dFP2sFB0CjQUD/awDBQEGAwJUAwb+DwGJCAwMCP53CAwBDAkBiQgMDAj+dwgMAQwXVQ8UFA9VDhUBFBRJSb63CAwMCLcJDAEMygGJCAwMCP53CAwBDNu3CAwMCLcJDAEMAiUBDAn1EhkKEQwwIvUIDAFbDBEMGRH0CA0NCPUjMPwtGRHyCA0NCPUiMA0RDQEwAQ0I9RIYDRIMMiP1CA0BzP2tFB0dFAJTFR0dFf2tAwUEBAJTBAUF/rUMEQwMEQxiDBEMDBEMvhQOVQ8UFA9VDhRxSDgMEQwMEQz+fgwRDAwRDAEwAQwQDAwRDAAACP/9/30ErgOAAAcAFwA0AE8AZAB2AKEAxgAAEwMzNzMXMwMHNzY3ND8BNjcUHwEWHwIFFAcGBwYnBicmNzUjFQYXFhcWNzI+ATczFzM1IxciJyY3NTM1IzUjDwEVMxUGFx4BMxY2NzUOATcuAQYHBhcUFx4CPgI3NjU2JyYHDgEiJicmNSY3PgEXMhYXFhQTIyIvASYnJicmKwEiBwYHBg8CBgcjIgcGFREGHgI3IRY+AicRNCcmExQGIyEiJjURNDc2OwE+AT8BNjc2OwEyFhcWHwEeATsBMhcWFfl4IyV7JiR2QiQDBAICAgMCAgIEAyQBEQcGEBIWFxAPAiMBCgkTFRYQHBYHAwQdI7YPCwsBQ0MUDiAgAQkJHxEKEwgHENgZOzMMDQEHBxwoLSgcBwcBDg0SBiIqIgYIAhMJHQ8VIgYIQrAPCBkeDhQTFBj7FxMSFA0dCBcHDbJDHhcDECUwGQOzGTEjEQIXHgonKvxNKSgOEjCwER4KHSUNEhP7DhkRDBwXCR4RsDASDQHg/s9gYAExsmAHBQQHBQcKAgYHBwoJZBQXFhIKCwECEBMYk5YYFxIJCQEIEQsg5M0LDhKGHDUyDhGHFhQPDQECBBoCAsQOAR4ZHyEaGBUgEAEQIBQZGiEeGYkTGBgUFxgkHQ0MARcTFzEB1Q0mLBEaDA0MCxkPKQwiCwImHTH9lRowJREDAxIkMBoCazEdJv0hKikpKgJrIRAWARAOLDcPFBIWESohDhEWECIAAAAG////fwSrA4EADwAfADwASwBZAGUAAAEhIgYVERQWMyEyNjURNCYTFAYjISImNRE0NjMhMhYVAyMDJicmIgcGBwMnLgEOAQ8BIw4BFBYXIT4BNCYlPgEfARY2NxM2NxYXEyETMj4BLgIOARUUHgI3Mh4BDgIuATU0NgRV/AAjMjIjBAAkMjIHGRL8ABEZGREEABIZcFaeCA4KFgoPCnNcCh4iHAiVVQcJCQcDdAcJCf2WBRgGdAgZBIMCAgMBmP2ZNiQ7Gw0yRUInESEqFxYlEQgfKykYKgOAMiP8qiMyMiMDViMy/FURGRkRA1YRGRkR/RIBjxUKBwYJFf8Abw4PAhMP+QIMDwwCAgwPDOYLAQuMCgQLASAEBAQE/oABnydBRjIOGzsjFyshEbwYKCsfCREkFh4qAAAGAAD/gAOrA4AAGwAtAD8ASwBXAGMAAAEnJiMhIgYdASMiBhURFBYzITI2PQEzMjY1ESYDFAYjISImNRE0NjsBERQWMyE3FAYjISImNRE0NjMhMh8BFhUFMzI2NCYrASIGFBYFISIGFBYzITI2NCYHISIGFBYzITI2NCYDmJISG/48GiZAGiYmGgJWGiZAGiYBqgwJ/aoJDAwJQCYaAeuADAn9qgkMDAkBxAkGkgb+HN0JDQ0J3QkMDAFY/qoJDAwJAVYJDAwJ/qoJDAwJAVYJDAwC3JETJRtAJRv9ABslJRtAJRsCbxr89wkMDAkDAAkM/WsbJUAJDAwJAwAJDAaSBghADBINDRIMcg0SDAwSDasNEQ0NEQ0AAgAA/4AEAAOAAAQADQAAEyMRIREBBiIvATcXARcBAQQA/dYHFge8SIYBBUsDgPwABAD9QQgIvEuGAQhKAAAAAAEAAP9/Aw8DfgASAAAFIicmNDcJASY0NjIXARYUBwEGARERBggIAc3+MwgRFwgB5AgI/hwGgAYIFwkB0gHNCBcRCP4cCBcJ/h0GAAAEAAD/fwVGA4EARwBcAGUAdAAABSEiLgQ1ETQ+BDsBFjc+ATc2PwE2NzY3PgE3ITIXFhcWHwEWHwEWFx4BFzI7ATIeAhcVFhcWFREUDgEHBgcGKwEBIgcGBwYUFxYXHgE3Njc2NCcmJyYlIgYUFj4CJgEiLgE0PgIeARUWDgIEw/uyDyAcFg8FBQ8WHB8QoQ8QEiANDAYJAgQQIhAkEQErEhIkGg0JBgIFAgYMDSASCgqvEB8cFwcGAgMGDgsXIBAQDv3hUkhFKCopKEVHpUhFKSopKUVHATMRGBgiGAEY/mlDcUNCcYVyQgElRVuABQ8WHSAQAlsQHx0XDgUBAQQRDBUXGAgHIxIIBgEDBhsNEA8GDgcWEw0RBAUOFw4ECgwSEv2lEB8dCxcGAgLwKShFR6ZHRSkqASooREemR0YpKgQYIxgBFyIZ/dZCcYZxQgFCcUMxWkYmAAQAAP+ABQEDgQAkAEgAbgCSAAAlDgIrAS4BJxUUBiImPQE0NjsBMhYUBisBHgM+ATc+AR4BNxQGKwEiJjQ2OwEuAw4BBw4BLgE3PgIyHgEXNTQ2MhYVNyMiLwEmJyYnJiMhIgcGBwYPAQYrASIHBhURFBYzITI2NRE0JyYTFCMhIjURNDc2OwEyNj8BNjc+ATMhMhYXFh8BHgE7ATIXFhUDjxRPazsfUH0aDBINDQmhCQ0NCWwLPltpYEgRAxARBxoNCaEJDQ0JbAs+W2lgSBEEDw8IARROa3ZqTxMMEg3VvREJGyAOFxMWGv70GhcTFw8gGwkQvEggGERAA/hARBghDln8CFkOFDO+EiAKGR8MEhsPAQwQGhIOHhgKIBO9MxQOzzhVMApmTGEJDAwJogkMDBIMNFMyBydKMggIBhCUCQwMEgw0UzIHJksyBwYFDgg3Vi8vVjdiCQwMCdANJS0QGwwNDgwbES4iDSYdMf2UPUBAPQJsMR0m/SBSUgJsIRAWEQ4jKw8XEhIXECohDxAWECIABwAA/38G7QOBABcAJwA+AFMAXwBvAH8AAAEhIg4CFREUHgIzITI+AjURNC4CExYGIyEiJjURNDYzITIWFQUuAQcFDgEVERQWFwUWMzI3PgE1ETQmAxQOAiclLgE1ETQ2NyU2MzIeARUBIzUjETMRMxEzESMFJgcjETMWNzY3Nic1NicmAxQHBgcGJyMRMzYXFhcWBwQz/DEUJRwPDxwlFAPRFCQcDw8dJR4BHhX8MRUeHhUD0RUeAlcWNRf+1RodHhkBKxUXHRcWGRgVDBcaDP7SDQ8PDQEsCw0OFw37OK40NK40NAFoKzB3fC8oIgwPAQEPDRwGAxUdI0dDIh0WBggBA4APHCUU/MgUJRwPDxwlFAM4FCYcDvxkFh8dFQM7FR4eFSQOAgyWDTEc/ugcMA2XCw8OLRoCRhot/XMOFw4CBpgGGg4BGA4aBpcFDxYO/v70/dcBDf7zAikUGAL91QIYFSYsLtwsKiX+siUkHRQVAwHZAxIQGiMjAAAHAAD/fgQ9A4EAFwA2AG4ApgCzAL8AzAAABSEiJjURNDY7AT4BFzM2FhczMhYVERQGASIGBxEUFjMhPgE3ES4BJyMGLwEuASsBIgcGDwEGIwUiJjQ2Mz4BNxEuAScjIi8BJicmKwEiBwYPAQYrAQ4BBxQGIiY1NDY7AT4BFzM2FhczMhYVERQGNyImNDYzMjY1ETQmJyMiLwEmJyYrASIHBg8BBisBJgYXDgEiJic0NjsBPgE7ATIWFzMyFhURFAYBIi4BPgIeARUUDgEnIg4BHgI+ATU0JiUiJj0BNDYyFh0BFAYCkP2/IS4uIdoIKxyDGywHSiEuMP2dEBcBFxECQQ8WAQEWD1YMBwMMDxCDEAgHDAMGDQIJCQwMCQ8VAQEVD1cNBQMNBgkQghAJBg0DBQ3nEBUBDBEMLiHaCCwbgxssCEohLjGMCAwMCA8WFRBXDAYDDAcIEIMQCAcNAgYN5xEXAQILDgsCLyDbBywbgxwrCEohLjH9nSlFIBA7UUwuJT4lHTAWCyk4NiA3/rcIDAwRDAyALiEBWiEuGiABASAaLiH+piIuAdAWEP6mERcBFg8BXA8WAQEKBxgPCAcYBwvmDBEMARUPAVsPFgELBhkGCQkGGQUMARUPCQwMCSAuGiEBASEaLiD+pSIu6QwRDBYPAVoQFwELBhkHCAkGGQYLARgRBggIBiEuGiAgGi4h/qYiLv6nLkxROxAgRSklPyTnIDU5KQsWMB0nOHQMCFcIDQwJVwgMAAAAAAP///9/BAEDgQAbADQASQAAJRYUBiIvAQcGIiY0PwEnJjQ2Mh8BNzYyFhQPAQMiBw4BBwYUFx4BFxYyNz4BNzY0Jy4BJyYDIicmJyY0NzY3NjIXFhcWFRQOAgLPBg0SB6+vBxINBq+vBw4SB6+vBxIOB68gaF9cjicoKCeOXF/QX1yOJygoJ45cX2h/bmo+QEA+am7+bmo+QEeErdEHEg0Gr68GDRIHr68HEg4Hr68HDhIHrwIAKCeOXF/QX1yOJygoJ45cX9BfXI4nKPwrQD5qbv5uaj5AQD5qbn9drYRHAAAAAAb///9/BAADgQAzAEIATwBcAGkAdgAAJSEiJjURNDY7ATIWHwEeATMhMhYdARQGIiY9ATQmIyEiJi8BLgErAQ4BBxEeATMhMhYUBgEiLgE0PgEyHgEVFA4CAyIOARQeAj4CLgEDIiY1ETQ2MhYVERQGJy4BND8BNjIWFA8BBhciLwEmNDYyHwEWFAYBav7UGiQkGucRHggnAwwHAagaJAsQCw4K/lkSHggnAw0G5wkNAQEOCQErCAsLAXpLfkpKfpZ/SipOZTdAbEA/bIBtQAFAbEEICwsQCwtpBwwGYQUQCwZgBrkHBmAGCxAFYQULgSQaAoMaJBIQUQcHJBqrCAsLCKsKDhMQUQYGAQ0J/X0KDgsQC/7/Sn+WfkpKfks3ZU4qAgI/bIBtQAE/bIBtQf5/CwgBAQgLCwj+/wgLoAELDwZgBgsQBmAFAQZgBhALBmAGDwsAAAAADP///38GQwOAADsASABXAGAAagB9AJIApQCmAKkAqgCsAAAFISIuATURND4BNzM2PwE2NzMWHwEWFzMyFhcWDgEmJy4BKwEmLwEmJyMGDwEGByMOARURBhY3IR4BFAYlIi4BPgIeARUUDgEDIg4BFB4CPgE1NC4CBSImNDYyFhQGJyIGFRQyNTYmIwEiLgI0PgMeAhUGBwYHBgMiBwYHBhQXFhcWMjc2NzY0JyYnJgMiLgE3NSY+ATIfAR4BFAYPAQYnNxU3Fyc1A1X9ISA2IB41Ia0YE1oeKJQnH10TGKoYLBAFAQ4TBgkdD6snH10SGI8YE1seJqshLAEtHwLfBwkJ/tlKfDodapKKU0JxQzZcNjZdbVw3HzlK/mgQFhYgFhYQAwMMAgUDBCRFf2E1NGJ/iYBgNQEvLU5RXVFGQygpKShDRqJGQygoKChDRqMLFAkBAQoTFwrJCgwMCswJDQi1EMUrIDYgAjUhOCQDAQ9VGQICGVUPARUTBxIMAgcMDQIZVg4BAQ9WGAIDMSH9yx8tAQIMDwy+UoqTaR05fEpDcUIBwDZdbVw2ATZcNyhLOR9iFx8XFx8XKwQDBQUEBf1fNWCAiX5iNAE2YX5FXlBOLi8ChSknREWjRUQnKSknREWjRUQnKf47DBULwQsTDAdkBBIWEQRmBiu5tFoIbgIAAAAABv///38EAgOCABQAKAA8AFEAfQCpAAATFjY9ATQ2OwEyPgEmKwEiBh0BFBYBIyIGFBY7ATIWHQEUFjI2PQE0JgEjIiY9ATQmIgYdARQWOwEyNjQmASYGHQEUBisBIgYUFjsBMjYnNTQmJzMyNjQmKwEuAic1NCYiBh0BDgIHIyIGFBY7AR4CFxUUFjI2PQE+AiUzMjY0JisBPgI3FRQWMjY9AR4CFyMiBhQWOwEOAgc1NCYiBh0BLgIWCQ0ZEvAIDAEMCfQhMAwDn/QJDAwJ9BEZDRENM/149BEZDBEMMSL0CQwMApoJDBgS8gkMDAn0IjECDNNQCQ0NCVAFSXZHDBIMRndIBU8JDQ0JUAVJdkcMEgxGdkj98E8JDAwJTwU+YzwMEgw7ZD4EUAkMDAlPBT5jPAwSDDtjPQIlAQwJ9RIZChEMMCL1CAwBWwwRDBkR9AgNDQj1IzD8LRkR8ggNDQj1IjANEQ0BMAENCPUSGA0SDDIj9QgNjg0RDUZ2SQVPCQwMCVEFSXZGDBIMR3ZJBVAJDQ0JUAZJd0YNEQ07Yz4FUAkMDAlOBD5kOwwSDDxjPgVRCA0NCE8FPmMAAQAA/4ADHAOCABsAAAUiJicBIiYnLgE2NwE2FhcWBgcBBhcBHgEHDgEC4QkWCP5aBAYCGQ4XHAGmES0REAUR/loICAGsEAINDRSACQgBigkCHEZFGQGKEQIVEC0S/nYXEP52ES0RCQgAAAAAAwAA/4AEAAOAAAUAEAAbAAABESERAyEBIREjNTMnBzMVIwczFSMXNyM1MxMhAzP9ms0EAP0aAczATXNzTcAKyk1zc03KofzeAZQB7P4U/ewDs/6Hk3Nzk02aeXma/mAAAQAAAAAEAAL2AAgAAAkBBwEhFSEBFwQA/os2ARj8kwNt/ug2AYABdTb+50z+5zYACQAA/4AEAAOAABQAGAAcACgALAAwADUANgBCAAABIxUhNSMVMxEjFTM1IRUzNSMRMzUFNTMVESM1MyUVITUjETM1IRUzERcVIzUTIzUzAScHIS8BIxQeATI+ATU0JiIGA7Og/drtUFDtAibtUFD8TVNTUwJz/dpQUAImUFBTU1NT/ixdbAHdi5Q/ER0iHRElNCUDgFBQ7f3a7VBQ7QIm7aBTU/ztU01QUAImUFD92k1TUwLAU/3VcqrnWhEdEREdERolJQAAAAADAAD/gAQBA4AAFgAaAB4AAAE1NCcmJyYjIgc1DQE1NzYzMhYXFh0BASERIRchESEEADAvUVJgDQ3+8QEPARAJUIooKvw2Ayb82k0Cjf1zAQ50ZFdUMTMBjKuqigEBVEZIVHP+cgJtTf4tAAAD////gAQAA4AAFgAaAB4AAAEVLQEVJiMiBwYHBh0BMzU0NzY3NjMyBxEhEQMhESEBfAEP/vENDWBSUS8wNiooREZQDpYDJk39cwKNArWKqquMATMxVFdkcnBUSUYpK8r9kwJt/eAB0wAAAAAFAAD/gAQAA4AABAAMABAAFAAhAAABIREhESUzFTM1MxUjASE1ITUhNSETIxEhESMRMxEhETMXAxn85wQA/YNcbDL6AX3+AAIA/gACALNm/WZm6gGTL7oDgPwAAxadZma6/VTWTUP+mgGz/k0DZv76AQa9AAQAAP9/BAADgAAIABAAFgAaAAABFwEXAQYiLwEBNSERMxUhEQEjESEVIQEhESEBooMBAEr+yAcVCLcB1/zNzQMz/M2AApn95wLm/WcCmQFeggECSP7GCAi5AZ7N/M3NAzP95wKZgP0aApkAAAMAAP+ABAADgAADAAcACwAAATMRIwERIREDIREhA58BAfxhBABg/L8DQQMg/MADoPwABAD8YANAAAAAAA0AAP9/BAADgAAIABEAGgAjAC8ARABKAFMAYABkAGgAdQCCAAA3IiY0NjIWFAYzIiY0NjIWFAYDMhYUBiImNDYjMhYUBiImNDYBLwEHOQEXNxUzNRc3NSERIQYHIREhHgEzMjc2NzY1NCYBNSEVFBcBNSEVJiMiBgcTIi4BND4BMh4BFA4BEyERISchNSEBIgYVMRQWMjY1MTQmMyIGFTEUFjI2NTE0Jp0PFRUeFRVoDxUVHhUVDw8VFR4VFWgPFRUeFRUC5182lTY4TTmB/EAB1AUF/jYCKiZdM05DQSYoIvxqAXgr/l0DMEVTQ3co4jtkOztkdmQ6OmSl/EADwEj80AMw/SUPFRUeFRVoDxUVHhUVNBUdFRUdFRUdFRUdFQLaFB4VFR4UFB4VFR4U/aRfNpU2OLq6ONnh/tQNEP7UHyInJkFETjJd/tqcBVJFAUmcWiw7M/51OmR2ZDs7ZHZkOgO5/tRInP6MFQ8PFRUPDxUVDw8VFQ8PFQAAAwAA/4AEAAOAAAUAEAAbAAABIREhBREBIzUHFzUzFSERIQElNTMVNycVIzUlAez+FAHsAhT9xpNzc5P+hwF5Ae3+YJp5eZoBoAKz/ZrNBAD+Jk1zc03AAcz9iaHKTXNzTcqhAAkAAP+AA/8DgAADAAcACwAPABMAFwApAC4AMgAAATMRIwMzESMDMxEjETMRIxMzESMTMxEjEzUjNSEVIxUjFTMRIRUzETM1JTUhFSEBIREhAp1NTcNNTcBNTU1NwE1Nw01NYhb+KRP/cwLMTXP9TQFm/poB8/2BAn8CQf3AAkD9wAJA/cACQP3AAkD9wAJA/cAC2aUBAaVZ/QABAwFZJidN/PQCswAAAAIAAP9/BAADgAARABUAADcRIREzESEVMxEzMSEVMzUzNQEzFSPmAjRM/JqZOgJHTJr8mU1NZgI0/gACTU39gJqaTAMaZgAAAAUAAP+ABAADgQAPABQAIQAuADoAAAUhESE3ISIVERQzITI1EQcFByEDBwEiDgEUHgEyPgE0LgEDIi4BND4BMh4BFA4BNyM1IxUjFTMVMzUzA039AAGwIP3kAQEDlwFM/dmMAma3qgF6Pmo+Pmp9aj4+aj8yVDIyVGRVMjJVWnUudHQudTMDAE0B/GkBAQIbHVbdASPbAus+an1qPj5qfWo+/mEyVWRUMjJUZFUy0HR0LnV1AAcAAP+ABAADgAAMABkAGgAnADUAOQBFAAABIg4BFB4BMj4BNC4BAyIuATQ+ATIeARQOAQEjFB4BMj4BNC4BIg4BNychByMRITUhESEVMxEhNyEXEyMVIxUzFTM1MzUjAeA4YDg4YHBgODhgOCM6IiI7RDsiIjoBFDMOGBsYDg4YGxgON1z+gl3kAgD+TQNmTf02NAErNJ1MmppMmpoCEThfcWA4OGBxXzj+sSI6RTsiIjtFOiIBLA4YDQ0YGxgODhjBxMT9BEwCY88BHHd3/kSZTZqaTQAAAAAAEgDeAAEAAAAAAAAAEwAAAAEAAAAAAAEACAATAAEAAAAAAAIABwAbAAEAAAAAAAMACAAiAAEAAAAAAAQACAAqAAEAAAAAAAUACwAyAAEAAAAAAAYACAA9AAEAAAAAAAoAKwBFAAEAAAAAAAsAEwBwAAMAAQQJAAAAJgCDAAMAAQQJAAEAEACpAAMAAQQJAAIADgC5AAMAAQQJAAMAEADHAAMAAQQJAAQAEADXAAMAAQQJAAUAFgDnAAMAAQQJAAYAEAD9AAMAAQQJAAoAVgENAAMAAQQJAAsAJgFjQ3JlYXRlZCBieSBpY29uZm9udGljb25mb250UmVndWxhcmljb25mb250aWNvbmZvbnRWZXJzaW9uIDEuMGljb25mb250R2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwByAGUAYQB0AGUAZAAgAGIAeQAgAGkAYwBvAG4AZgBvAG4AdABpAGMAbwBuAGYAbwBuAHQAUgBlAGcAdQBsAGEAcgBpAGMAbwBuAGYAbwBuAHQAaQBjAG8AbgBmAG8AbgB0AFYAZQByAHMAaQBvAG4AIAAxAC4AMABpAGMAbwBuAGYAbwBuAHQARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABzAHYAZwAyAHQAdABmACAAZgByAG8AbQAgAEYAbwBuAHQAZQBsAGwAbwAgAHAAcgBvAGoAZQBjAHQALgBoAHQAdABwADoALwAvAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAAACAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8BAgEDAQQBBQEGAQcBCAEJAQoBCwEMAQ0BDgEPARABEQESARMBFAEVARYBFwEYARkBGgEbARwBHQEeAR8BIAATYS1pb3MtY29sb3ItZmlsdGVyMRBib3JkZXItZGV0ZWN0aW9uDGF1dG8tY2FwdHVyZQ1pbWFnZS1nYWxsZXJ5CG11bHRpcGxlDWEtYWxsc2VsZWN0ZWQFYXJyb3cHY2FwdHVyZQxhLXR1cm5jYW1lcmEKcmVzb2x1dGlvbhFhLW11bHRpcGxlY2FwdHVyZQVjbG9zZQ1hLWxvY2FsdXBsb2FkDWEtYXV0b2NhcHR1cmUPYS1hdXRvZGV0ZWN0aW9uBWJhY2sxBm1pcnJvcgRuZXh0EmEtZnVsbGRldGV0ZWRpbWFnZQtyb3RhdGVfbGVmdAxyb3RhdGVfcmlnaHQEc2F2ZQpzZWxlY3RfYWxsCnVuc2VsZWN0ZWQSYS11cGxvYWRmcm9tc2VydmVyBGZsaXAGZGVsZXRlBGNyb3AKYS1hZGRpbWFnZRRhLWFkZGltYWdlZnJvbWNhbWVyYQAAAAAA") format("truetype");\n}\n.dcs-font {\n  font-family: "dcs-font" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.dcs-i-arrow:before {\n  content: "\\e66f";\n}\n\n.dcs-i-filter:before {\n  content: "\\e601";\n}\n\n.dcs-i-close1:before {\n  content: "\\e627";\n}\n\n.dcs-i-switch1:before {\n  content: "\\e70b";\n}\n\n.dcs-i-capture:before {\n  content: "\\e66e";\n}\n\n.dcs-i-insert:before {\n  content: "\\e651";\n}\n\n.dcs-i-delete:before {\n  content: "\\e653";\n}\n\n.dcs-i-crop:before {\n  content: "\\e654";\n}\n\n.dcs-i-rotateLeft:before {\n  content: "\\e658";\n}\n\n.dcs-i-rotateRight:before {\n  content: "\\e659";\n}\n\n.dcs-i-save:before {\n  content: "\\e65a";\n}\n\n.dcs-i-leftUnable:before {\n  content: "\\e65b";\n}\n\n.dcs-i-nextPage:before {\n  content: "\\e65c";\n}\n\n.dcs-i-prePage:before {\n  content: "\\e65d";\n}\n\n.dcs-i-nextUnable:before {\n  content: "\\e65e";\n}\n\n.dcs-i-fullCrop:before {\n  content: "\\e65f";\n}\n\n.dcs-i-next:before {\n  content: "\\e660";\n}\n\n.dcs-i-back:before {\n  content: "\\e663";\n}\n\n.dcs-i-old-autoCapture:before {\n  content: "\\e662";\n}\n\n.dcs-i-autoCapture:before {\n  content: "\\e66d";\n}\n\n.dcs-i-old-autoDetect:before {\n  content: "\\e664";\n}\n\n.dcs-i-autoDetect:before {\n  content: "\\e670";\n}\n\n.dcs-i-close:before {\n  content: "\\e665";\n}\n\n.dcs-i-old-load:before {\n  content: "\\e666";\n}\n\n.dcs-i-load:before {\n  content: "\\e66b";\n}\n\n.dcs-i-switch:before {\n  content: "\\e667";\n}\n\n.dcs-i-resolution:before {\n  content: "\\e668";\n}\n\n.dcs-i-old-continuous:before {\n  content: "\\e669";\n}\n\n.dcs-i-continuous:before {\n  content: "\\e66c";\n}',""]),r.a=s},function(n,r){n.exports=function(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r){n.exports=function(h,d){if(null==h)return{};var s,i,u={},f=Object.keys(h);for(i=0;i<f.length;i++)d.indexOf(s=f[i])>=0||(u[s]=h[s]);return u},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r){n.exports=function(h){var d;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(d=h[Symbol.asyncIterator]),null==d&&Symbol.iterator&&(d=h[Symbol.iterator])),null==d&&(d=h["@@asyncIterator"]),null==d&&(d=h["@@iterator"]),null==d)throw new TypeError("Object is not async iterable");return d.call(h)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r){function h(d,s){for(var i=0;i<s.length;i++){var u=s[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(d,u.key,u)}}n.exports=function(d,s,i){return s&&h(d.prototype,s),i&&h(d,i),d},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r,h){var d=function(s){var i,u=Object.prototype,f=u.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function m(ce,q,he){return Object.defineProperty(ce,q,{value:he,enumerable:!0,configurable:!0,writable:!0}),ce[q]}try{m({},"")}catch{m=function(q,he,ie){return q[he]=ie}}function I(ce,q,he,ie){var oe,Ee,ge,Re,J=Object.create((q&&q.prototype instanceof D?q:D).prototype),te=new ne(ie||[]);return J._invoke=(oe=ce,Ee=he,ge=te,Re=g,function(G,k){if(Re===_)throw new Error("Generator is already running");if(Re===v){if("throw"===G)throw k;return _e()}for(ge.method=G,ge.arg=k;;){var U=ge.delegate;if(U){var H=A(U,ge);if(H){if(H===T)continue;return H}}if("next"===ge.method)ge.sent=ge._sent=ge.arg;else if("throw"===ge.method){if(Re===g)throw Re=v,ge.arg;ge.dispatchException(ge.arg)}else"return"===ge.method&&ge.abrupt("return",ge.arg);Re=_;var ee=p(oe,Ee,ge);if("normal"===ee.type){if(Re=ge.done?v:C,ee.arg===T)continue;return{value:ee.arg,done:ge.done}}"throw"===ee.type&&(Re=v,ge.method="throw",ge.arg=ee.arg)}}),J}function p(ce,q,he){try{return{type:"normal",arg:ce.call(q,he)}}catch(ie){return{type:"throw",arg:ie}}}s.wrap=I;var g="suspendedStart",C="suspendedYield",_="executing",v="completed",T={};function D(){}function P(){}function E(){}var M={};m(M,o,function(){return this});var O=Object.getPrototypeOf,R=O&&O(O(Ie([])));R&&R!==u&&f.call(R,o)&&(M=R);var F=E.prototype=D.prototype=Object.create(M);function B(ce){["next","throw","return"].forEach(function(q){m(ce,q,function(he){return this._invoke(q,he)})})}function b(ce,q){function he(V,J,te,oe){var Ee=p(ce[V],ce,J);if("throw"!==Ee.type){var ge=Ee.arg,Re=ge.value;return Re&&"object"==typeof Re&&f.call(Re,"__await")?q.resolve(Re.__await).then(function(G){he("next",G,te,oe)},function(G){he("throw",G,te,oe)}):q.resolve(Re).then(function(G){ge.value=G,te(ge)},function(G){return he("throw",G,te,oe)})}oe(Ee.arg)}var ie;this._invoke=function(V,J){function te(){return new q(function(oe,Ee){he(V,J,oe,Ee)})}return ie=ie?ie.then(te,te):te()}}function A(ce,q){var he=ce.iterator[q.method];if(he===i){if(q.delegate=null,"throw"===q.method){if(ce.iterator.return&&(q.method="return",q.arg=i,A(ce,q),"throw"===q.method))return T;q.method="throw",q.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var ie=p(he,ce.iterator,q.arg);if("throw"===ie.type)return q.method="throw",q.arg=ie.arg,q.delegate=null,T;var V=ie.arg;return V?V.done?(q[ce.resultName]=V.value,q.next=ce.nextLoc,"return"!==q.method&&(q.method="next",q.arg=i),q.delegate=null,T):V:(q.method="throw",q.arg=new TypeError("iterator result is not an object"),q.delegate=null,T)}function N(ce){var q={tryLoc:ce[0]};1 in ce&&(q.catchLoc=ce[1]),2 in ce&&(q.finallyLoc=ce[2],q.afterLoc=ce[3]),this.tryEntries.push(q)}function Y(ce){var q=ce.completion||{};q.type="normal",delete q.arg,ce.completion=q}function ne(ce){this.tryEntries=[{tryLoc:"root"}],ce.forEach(N,this),this.reset(!0)}function Ie(ce){if(ce){var q=ce[o];if(q)return q.call(ce);if("function"==typeof ce.next)return ce;if(!isNaN(ce.length)){var he=-1,ie=function V(){for(;++he<ce.length;)if(f.call(ce,he))return V.value=ce[he],V.done=!1,V;return V.value=i,V.done=!0,V};return ie.next=ie}}return{next:_e}}function _e(){return{value:i,done:!0}}return P.prototype=E,m(F,"constructor",E),m(E,"constructor",P),P.displayName=m(E,l,"GeneratorFunction"),s.isGeneratorFunction=function(ce){var q="function"==typeof ce&&ce.constructor;return!!q&&(q===P||"GeneratorFunction"===(q.displayName||q.name))},s.mark=function(ce){return Object.setPrototypeOf?Object.setPrototypeOf(ce,E):(ce.__proto__=E,m(ce,l,"GeneratorFunction")),ce.prototype=Object.create(F),ce},s.awrap=function(ce){return{__await:ce}},B(b.prototype),m(b.prototype,c,function(){return this}),s.AsyncIterator=b,s.async=function(ce,q,he,ie,V){void 0===V&&(V=Promise);var J=new b(I(ce,q,he,ie),V);return s.isGeneratorFunction(q)?J:J.next().then(function(te){return te.done?te.value:J.next()})},B(F),m(F,l,"Generator"),m(F,o,function(){return this}),m(F,"toString",function(){return"[object Generator]"}),s.keys=function(ce){var q=[];for(var he in ce)q.push(he);return q.reverse(),function ie(){for(;q.length;){var V=q.pop();if(V in ce)return ie.value=V,ie.done=!1,ie}return ie.done=!0,ie}},s.values=Ie,ne.prototype={constructor:ne,reset:function(ce){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(Y),!ce)for(var q in this)"t"===q.charAt(0)&&f.call(this,q)&&!isNaN(+q.slice(1))&&(this[q]=i)},stop:function(){this.done=!0;var ce=this.tryEntries[0].completion;if("throw"===ce.type)throw ce.arg;return this.rval},dispatchException:function(ce){if(this.done)throw ce;var q=this;function he(Ee,ge){return J.type="throw",J.arg=ce,q.next=Ee,ge&&(q.method="next",q.arg=i),!!ge}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var V=this.tryEntries[ie],J=V.completion;if("root"===V.tryLoc)return he("end");if(V.tryLoc<=this.prev){var te=f.call(V,"catchLoc"),oe=f.call(V,"finallyLoc");if(te&&oe){if(this.prev<V.catchLoc)return he(V.catchLoc,!0);if(this.prev<V.finallyLoc)return he(V.finallyLoc)}else if(te){if(this.prev<V.catchLoc)return he(V.catchLoc,!0)}else{if(!oe)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return he(V.finallyLoc)}}}},abrupt:function(ce,q){for(var he=this.tryEntries.length-1;he>=0;--he){var ie=this.tryEntries[he];if(ie.tryLoc<=this.prev&&f.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var V=ie;break}}V&&("break"===ce||"continue"===ce)&&V.tryLoc<=q&&q<=V.finallyLoc&&(V=null);var J=V?V.completion:{};return J.type=ce,J.arg=q,V?(this.method="next",this.next=V.finallyLoc,T):this.complete(J)},complete:function(ce,q){if("throw"===ce.type)throw ce.arg;return"break"===ce.type||"continue"===ce.type?this.next=ce.arg:"return"===ce.type?(this.rval=this.arg=ce.arg,this.method="return",this.next="end"):"normal"===ce.type&&q&&(this.next=q),T},finish:function(ce){for(var q=this.tryEntries.length-1;q>=0;--q){var he=this.tryEntries[q];if(he.finallyLoc===ce)return this.complete(he.completion,he.afterLoc),Y(he),T}},catch:function(ce){for(var q=this.tryEntries.length-1;q>=0;--q){var he=this.tryEntries[q];if(he.tryLoc===ce){var ie=he.completion;if("throw"===ie.type){var V=ie.arg;Y(he)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(ce,q,he){return this.delegate={iterator:Ie(ce),resultName:q,nextLoc:he},"next"===this.method&&(this.arg=i),T}},s}(n.exports);try{regeneratorRuntime=d}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},function(n,r){function h(d,s){return n.exports=h=Object.setPrototypeOf||function(i,u){return i.__proto__=u,i},n.exports.default=n.exports,n.exports.__esModule=!0,h(d,s)}n.exports=h,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,r,h){h.r(r);var d=h(4),s=h.n(d),i=h(1),u=h.n(i),f=h(0),a=h.n(f),o=function(){function Ge(){this._events=[]}var de=Ge.prototype;return de.on=function(z,X){this._events[z]||(this._events[z]=[]),this._events[z].push(X)},de.once=function(z,X){X._once=!0,this.on(z,X)},de.emit=function(z){var X=this._events[z];if(X&&0!==X.length){for(var ae=arguments.length,fe=new Array(ae>1?ae-1:0),be=1;be<ae;be++)fe[be-1]=arguments[be];for(var Pe=0;Pe<X.length;Pe++){var We=X[Pe];We.call.apply(We,[null].concat(fe)),We._once&&(X.splice(Pe,1),Pe--)}}},de.emitEx=function(z){var X=this._events[z];if(X&&0!==X.length){for(var ae=[],fe=arguments.length,be=new Array(fe>1?fe-1:0),Pe=1;Pe<fe;Pe++)be[Pe-1]=arguments[Pe];for(var We=0;We<X.length;We++){var Le=X[We],je=Le.call.apply(Le,[null].concat(be));je instanceof Promise&&ae.push(je),Le._once&&(X.splice(We,1),We--)}return Promise.all(ae)}},de.off=function(z,X){var ae=this._events[z];if(ae)if(X)for(var fe=ae.length,be=0;be<fe;be++)ae[be]===X&&ae.splice(be,1);else ae&&(ae.length=0)},Ge}(),c=new o,l=h(12),m=h.n(l),I=h(5),p=h.n(I),g=window.Dynamsoft;function C(Ge){return"[object Object]"===Object.prototype.toString.call(Ge)}function _(Ge){return"function"==typeof Ge}function v(Ge){return"string"==typeof Ge}function T(Ge){return"number"==typeof Ge&&!Number.isNaN(Ge)}function D(Ge,de){for(var z in Ge)void 0===de[z]?de[z]=Ge[z]:C(Ge[z])&&C(de[z])?D(Ge[z],de[z]):void 0!==Ge[z]&&(de[z]=Ge[z])}function P(Ge){c.emit("error",Ge)}function E(Ge,de){c.emit("typeError",Ge,de)}function M(Ge,de,z){var ae=Ge[1],fe=Ge[2],be=Ge[3],Pe=Ge[4],We=Ge[5],Le=Ge[6],je=Ge[7];return O(Ge[0],0)&&O(ae,0)&&O(fe,de)&&O(be,0)&&O(Pe,de)&&O(We,z)&&O(Le,0)&&O(je,z)}function O(Ge,de,z){return void 0===z&&(z=1),Math.abs(Ge-de)<=z}function R(Ge,de){return de.split(".").reduce(function(z,X){return z[X]||{}},Ge)}function F(Ge){var de,z,X;return(g.navInfo.biPhone||g.navInfo.biPad)&&(de=5,z=85,X=3840),g.ImageProcWrapper.getMax4kImage(Ge,de,z,X)}function B(Ge){return g.ImageProcWrapper.createImage({source:Ge,output:{orgImage:!1,previewImage:{quality:85,width:200,height:200,returnType:g.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}}}).then(function(z){return Ge.imageData=z.src,z.preview})}var b=function(Ge){window.Dynamsoft&&window.Dynamsoft.Lib.log(Ge)},A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",N=function(){function Ge(z){var X=this;this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.leftEdge=0,this.topEdge=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.dpr=1,this.zoom=z.zoom||1,Object.keys(z).forEach(function(ae){X[ae]=z[ae]}),this._initBox()}var de=Ge.prototype;return de.getRect=function(){if("free"===this.mode)return null;var z=this._getMaxPoint(),X=z.minX,ae=z.maxX,fe=z.minY,be=z.maxY;return{x:Math.floor(X),y:Math.floor(fe),width:Math.floor(ae-X),height:Math.floor(be-fe)}},de._initBox=function(){this.midpoints=Y(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=ne(this.vertexes)},de._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},de.checkPointPosition=function(z){var X=this._getMaxPoint(),ae=X.minX,fe=X.maxX,be=X.minY,Pe=X.maxY,We=this.probePoints[2*z],Le=this.probePoints[2*z+1];return z<4?We===fe&&Le===Pe?"se":We===fe&&Le===be?"ne":We===ae&&Le===be?"nw":We===ae&&Le===Pe?"sw":null:We===fe?"e":Le===Pe?"s":We===ae?"w":Le===be?"n":null},de.onStartHandler=function(z,X,ae){var fe=this.isBoxSelected(z,X);if(void 0!==ae&&(fe=ae),null!==fe&&(this._startX=z,this._startY=X,this._lastX=z,this._lastY=X,-1===fe?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=fe,this.isMoveBox=!1),"free"===this.mode&&fe>3)){var be=fe-4;this.k1=this.slopeRatio[(be+1)%4],this.b1=this.probePoints[(2*be+3)%8]-this.k1*this.probePoints[(2*be+2)%8],this.k2=this.slopeRatio[(be+3)%4],this.b2=this.probePoints[(2*be+1)%8]-this.k2*this.probePoints[(2*be+0)%8]}},de.onMoveHandler=function(z,X,ae){if(this.isPointSelected||this.isMoveBox){var fe=this.probePoints.slice();if(this.isPointSelected){var be=this.activeProbePoint;void 0!==ae&&(be=ae),"normal"===this.mode?fe=this._movePointNormal(fe,be,z,X):(fe=this._movePointFree(fe,be,z,X),this.slopeRatio=ne(this.probePoints).slice(0,4)),this.probePoints=fe.slice(),this._checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var Pe=z-this._lastX,We=X-this._lastY;if(0===Pe&&0===We)return;fe=this._moveBox(fe,Pe,We),this.probePoints=fe.slice()}var Le=Y(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(Le),this.midpoints=Le,this._lastX=z,this._lastY=X}},de.onEndHandler=function(){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var z=this._startX,X=this._startY;this._startX=0,this._startY=0;var ae=this._lastX,fe=this._lastY;if(this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var be=this._checkRectConvexity(this.probePoints);(z===ae&&X===fe||!be)&&(this.probePoints=this.vertexes.slice().concat(this.midpoints)),this.vertexes=this.probePoints.slice(0,8),this.midpoints=Y(this.probePoints),this.probePoints=this.probePoints.slice(0,8).concat(this.midpoints),this.slopeRatio=ne(this.probePoints).slice(0,4)}},de._checkEdge=function(z,X){return z>=0&&z<=this.width&&X>=0&&X<this.height},de._movePointNormal=function(z,X,ae,fe){ae=Math.max(this.leftEdge,Math.min(this.width,ae)),fe=Math.max(this.topEdge,Math.min(this.height,fe));var be=0,Pe=0;if(this.keepAspectRatio){var We=this._getMaxPoint(),Le=We.minX,je=We.maxX,Qe=We.minY,tt=We.maxY,qe=this.checkPointPosition(X),at=(je-Le)/(tt-Qe);0===at||at===1/0||at===-1/0||Number.isNaN(at)?at=this._lastWhr:this._lastWhr=at,be=0,Pe=0;var it="width";if(X<4){if(Pe=fe-z[2*X+1],0==(be=ae-z[2*X])||0===Pe)return z;it="width"}else{var dt=X-4;if("e"===qe?(X=(dt+1)%4,it="width"):"s"===qe?(X=dt,it="height"):"w"===qe?(X=dt,it="width"):"n"===qe&&(X=(dt+1)%4,it="height"),Pe=fe-z[2*dt+1],0==(be=ae-z[2*dt])||0===Pe)return z}"height"===it?(be=Pe*at,"ne"!==qe&&"sw"!==qe&&"n"!==qe&&"w"!==qe||(be=-be)):(Pe=be/at,"ne"!==qe&&"sw"!==qe&&"n"!==qe&&"w"!==qe||(Pe=-Pe));var mt=z[2*X]+be,yt=z[2*X+1]+Pe;mt<0?(be=0-z[2*X],Pe=0):mt>this.width?(be=this.width-z[2*X],Pe=0):yt<0?(Pe=0-z[2*X+1],be=0):yt>this.height&&(Pe=this.height-z[2*X+1],be=0),z[2*X]+=be,z[2*X+1]+=Pe;var gt=(X+1)%4,xt=(X+3)%4;X%2?(z[2*gt]+=be,z[2*xt+1]+=Pe):(z[2*gt+1]+=Pe,z[2*xt]+=be)}else if(X<4){if(Pe=fe-z[2*X+1],0==(be=ae-z[2*X])&&0===Pe)return z;z[2*X]=ae,z[2*X+1]=fe;var Lt=(X+1)%4,Nt=(X+3)%4;X%2?(z[2*Lt]=ae,z[2*Nt+1]=fe):(z[2*Lt+1]=fe,z[2*Nt]=ae)}else{var _t=X-4,Yt=this.slopeRatio[_t%4];0===Yt?(z[(2*_t+3)%8]=fe,z[(2*_t+1)%8]=fe):Yt!==1/0&&Yt!==-1/0||(z[(2*_t+2)%8]=ae,z[(2*_t+0)%8]=ae)}return z},de._movePointFree=function(z,X,ae,fe){ae=Math.max(this.leftEdge,Math.min(this.width,ae)),fe=Math.max(this.topEdge,Math.min(this.height,fe));var be=z.slice();if(X<4){if(0==ae-z[2*X]&&0==fe-z[2*X+1])return z;z[2*X]=ae,z[2*X+1]=fe}else{var Le=X-4,je=this.slopeRatio[Le%4],Qe=fe-je*ae,tt=-Qe/je,qe=Qe,at=z[(2*Le+9)%8]-je*z[(2*Le+8)%8],it=-at/je,dt=this.k1,mt=this.b1,yt=this.k2,gt=this.b2;0===je?(z[(2*Le+3)%8]=fe,dt!==1/0&&dt!==-1/0&&(z[(2*Le+2)%8]=(fe-mt)/dt),z[(2*Le+1)%8]=fe,yt!==1/0&&yt!==-1/0&&(z[(2*Le+0)%8]=(fe-gt)/yt)):je===1/0||je===-1/0?(z[(2*Le+2)%8]=ae,z[(2*Le+3)%8]=dt*ae+mt,z[(2*Le+0)%8]=ae,z[(2*Le+1)%8]=yt*ae+gt):(0===dt?z[(2*Le+2)%8]+=tt-it:dt===1/0||dt===-1/0?z[(2*Le+3)%8]+=qe-at:(z[(2*Le+2)%8]=(mt-Qe)/(je-dt),z[(2*Le+3)%8]=(je*mt-dt*Qe)/(je-dt)),0===yt?z[(2*Le+0)%8]+=tt-it:yt===1/0||yt===-1/0?z[(2*Le+1)%8]+=qe-at:(z[(2*Le+0)%8]=(gt-Qe)/(je-yt),z[(2*Le+1)%8]=(je*gt-yt*Qe)/(je-yt)));for(var xt=0;xt<4;xt++){var Lt=z[2*xt],Nt=z[2*xt+1];if(Lt<this.leftEdge||Lt>this.width||Nt<this.topEdge||Nt>this.height)return be}}return z},de._moveBox=function(z,X,ae){if("normal"===this.mode){var fe=Math.min(z[0],z[2],z[4],z[6]),be=Math.max(z[0],z[2],z[4],z[6]),Pe=Math.min(z[1],z[3],z[5],z[7]),We=Math.max(z[1],z[3],z[5],z[7]);fe+X<0&&(X=-fe),be+X>this.width&&(X=this.width-be),Pe+ae<0&&(ae=-Pe),We+ae>this.height&&(ae=this.height-We);for(var Le=0;Le<4;Le++)z[2*Le]+=X,z[2*Le+1]+=ae}return z},de._isPointOnBox=function(z,X){if("normal"===this.mode){var ae=this._getMaxPoint();return z>=ae.minX&&z<=ae.maxX&&X>=ae.minY&&X<=ae.maxY}return!1},de.isBoxSelected=function(z,X){var ae=this._isPointOnBox(z,X),fe=this.isCtrlPointSelected(z,X);return null!==fe?fe:ae?-1:null},de.isCtrlPointSelected=function(z,X){var ae=this.sensorRadius,fe=this._getMaxPoint(),We=fe.minY,Le=fe.maxY,je=Math.min(Math.max(ae,.1*(fe.maxX-fe.minX)),3*ae)*this.dpr,Qe=Math.min(Math.max(ae,.1*(Le-We)),3*ae)*this.dpr,tt=8;"free"===this.mode&&(tt=8);for(var qe=0;qe<tt;qe++){var at=this.probePoints[2*qe],it=this.probePoints[2*qe+1];if(z<=at+je&&z>=at-je&&X<=it+Qe&&X>=it-Qe)return qe}return null},de._checkRectConvexity=function(z){var X=(z[6]-z[0])*(z[3]-z[1])-(z[7]-z[1])*(z[2]-z[0]),ae=(z[0]-z[2])*(z[5]-z[3])-(z[1]-z[3])*(z[4]-z[2]),fe=(z[2]-z[4])*(z[7]-z[5])-(z[3]-z[5])*(z[6]-z[4]),be=(z[4]-z[6])*(z[1]-z[7])-(z[5]-z[7])*(z[0]-z[6]);if(X*ae*fe*be<0)return!1;var Pe=z.slice().concat(z.slice(0,2));if(this.slopeRatio.length)for(var We=0;We<2;We++)if(this.slopeRatio[We]!==this.slopeRatio[We+2]&&Ie(Pe.slice(2*We,2*We+2),Pe.slice(2*We+2,2*We+4),Pe.slice(2*We+4,2*We+6),Pe.slice(2*We+6,2*We+8)))return!1;return X*ae*fe*be>0},Ge}();function Y(Ge){for(var de=Ge.slice(0,8).concat(Ge[0],Ge[1]),z=[],X=0;X<4;X++)z.push((de[2*X]+de[2*X+2])/2,(de[2*X+1]+de[2*X+3])/2);return z}function ne(Ge){for(var de=[],X=Ge.slice(0,8).concat(Ge[0],Ge[1]),ae=0;ae<4;ae++)de.push(X[2*ae+3]-X[2*ae+1]==0&&X[2*ae+2]-X[2*ae]==0?0:(X[2*ae+3]-X[2*ae+1])/(X[2*ae+2]-X[2*ae]));return de}function Ie(Ge,de,z,X){if(qe=Ge,at=de,it=z,dt=X,mt=Math.min,yt=Math.max,mt(qe[0],at[0])<=yt(it[0],dt[0])&&mt(it[0],dt[0])<=yt(qe[0],at[0])&&mt(qe[1],at[1])<=yt(it[1],dt[1])&&mt(it[1],dt[1])<=yt(qe[1],at[1])&&function(qe,at,it,dt){var mt,yt;return!(((mt=qe[0]*(it[1]-at[1])+at[0]*(qe[1]-it[1])+it[0]*(at[1]-qe[1]))^(yt=qe[0]*(dt[1]-at[1])+at[0]*(qe[1]-dt[1])+dt[0]*(at[1]-qe[1])))>=0&&0!==mt&&0!==yt||((mt=it[0]*(qe[1]-dt[1])+dt[0]*(it[1]-qe[1])+qe[0]*(dt[1]-it[1]))^(yt=it[0]*(at[1]-dt[1])+dt[0]*(it[1]-at[1])+at[0]*(dt[1]-it[1])))>=0&&0!==mt&&0!==yt)}(Ge,de,z,X)){var ae,fe;if(fe=(Ge[1]-z[1])*(de[0]-Ge[0])*(X[0]-z[0])+z[0]*(X[1]-z[1])*(de[0]-Ge[0])-Ge[0]*(de[1]-Ge[1])*(X[0]-z[0]),0==(ae=(X[0]-z[0])*(Ge[1]-de[1])-(de[0]-Ge[0])*(z[1]-X[1]))||0===fe){var be=_e(Ge,de),Pe=_e(z,X),We=be[0],Le=be[1],je=Pe[0],Qe=Pe[1];if(Le[0]===je[0]&&Le[1]===je[1])return Le;if(We[0]===Qe[0]&&We[1]===Qe[1])return We;if(ce(Le,Pe)&&ce(je,be))return[je,Le];if(ce(We,Pe)&&ce(Qe,be))return[We,Qe];if(ce(We,Pe)&&ce(Le,Pe))return[We,Le];if(ce(je,Pe)&&ce(Qe,Pe))return[je,Qe]}return[fe/ae,(fe=de[1]*(Ge[0]-de[0])*(X[1]-z[1])+(X[0]-de[0])*(X[1]-z[1])*(Ge[1]-de[1])-X[1]*(z[0]-X[0])*(de[1]-Ge[1]))/(ae=(Ge[0]-de[0])*(X[1]-z[1])-(de[1]-Ge[1])*(z[0]-X[0]))]}var qe,at,it,dt,mt,yt;return!1}function _e(Ge,de){return Ge[0]===de[0]?Ge[1]<de[1]?[Ge,de]:[de,Ge]:Ge[0]<de[0]?[Ge,de]:[de,Ge]}function ce(Ge,de){return de[0][0]===de[1][0]?Ge[1]>=de[0][1]&&Ge[1]<=de[1][1]:Ge[0]>=de[0][0]&&Ge[0]<=de[1][0]}var q=function(){function Ge(z){this._cvs=null,this._cropBox=null,this._isCropping=!1,this._zoom=1,this._edgeMargin=20,this._cropStyle={cornerColor:"#FE8E14",lineColor:"#FE8E14",lineWidth:2,lineDash:"solid"},this._cvs=z,this._initEvent()}var de=Ge.prototype;return de.dispose=function(){this._cvs.removeEventListener("touchstart",null),this._cvs.removeEventListener("touchmove",null),this._cvs.removeEventListener("touchend",null),this._cvs.removeEventListener("mousedown",null),document.removeEventListener("mousemove",null),document.removeEventListener("mouseup",null),this._cvs=null,this.onAreaChanged=null},de.setCropMode=function(z){z!==this._isCropping&&(z||(this._cropBox=null),this._isCropping=z)},de.setZoom=function(z){this._zoom=z,this._cropBox&&(this._cropBox.zoom=z)},de.setCropArea=function(z,X){if(z){this._limitArea=X;var ae=this._cvs,fe=this._zoom,be=this._edgeMargin,Pe=z.map(function(We,Le){return Le%2==0?We/fe+X.relLeft+be:We/fe+X.relTop+be});this._cropBox=new N({zoom:fe,vertexes:Pe,width:ae.width-be-X.relLeft,height:ae.height-be-X.relTop,leftEdge:be+X.relLeft,topEdge:be+X.relTop,mode:"free",dpr:window.devicePixelRatio}),this._isCropping&&this._drawCropArea()}},de.getCropArea=function(){var z=this._cropBox,X=this._zoom,ae=this._edgeMargin,fe=this._limitArea;return z?z.vertexes.map(function(be,Pe){return Pe%2==0?(be-fe.relLeft-ae)*X:(be-fe.relTop-ae)*X}):[]},de.setCropStyle=function(z){D(z,this._cropStyle),this._isCropping&&this._drawCropArea()},de.resize=function(z){var X=this._cropBox,ae=this._edgeMargin;if(X){var fe=this._cvs,Pe=fe.height;X.width=fe.width-ae-z.relLeft,X.height=Pe-ae-z.relTop,X.leftEdge=ae+z.relLeft,X.topEdge=ae+z.relTop}},de._initEvent=function(){var z=this,X=this._cvs;function ae(Pe){this._cvsBoundingRect=this._cvs.getBoundingClientRect();var Le=this._cvsBoundingRect;this._cropBox&&this._cropBox.onStartHandler(Pe.clientX-Le.left,Pe.clientY-Le.top)}function fe(Pe){if(this._cropBox&&this._cropBox.isPointSelected){var We=this._cvsBoundingRect;this._cropBox.onMoveHandler(Pe.clientX-We.left,Pe.clientY-We.top),this._drawCropArea()}}function be(){var Pe;this._cropBox&&this._cropBox.isPointSelected&&(this._cropBox.onEndHandler(),this._drawCropArea(),null===(Pe=this.onAreaChanged)||void 0===Pe||Pe.call(this,this.getCropArea()))}X.addEventListener("touchstart",function(Pe){var We=Pe.touches;We.length>1||ae.call(z,We[0])}),X.addEventListener("mousedown",ae.bind(this)),X.addEventListener("touchmove",function(Pe){var We=Pe.touches;We.length>1||z._cropBox.isPointSelected&&(fe.call(z,We[0]),Pe.preventDefault())}),document.addEventListener("mousemove",fe.bind(this)),X.addEventListener("touchend",be.bind(this)),document.addEventListener("mouseup",be.bind(this))},de._drawCropArea=function(){var z=this._cropBox,X=this._cvs,ae=this._cropStyle;if(z){var fe=z.probePoints.slice(),be=X.getContext("2d");be.clearRect(0,0,X.width,X.height);var Pe=ae.lineWidth;if(Pe%2!=0)for(var We=0;We<fe.length;We++)fe[We]=Math.floor(fe[We])-Pe/2;var Le=fe.slice(0,8);be.fillStyle="rgba(0, 0, 0, 0.2)",be.fillRect(0,0,X.width,X.height),function(je,Qe,tt){je.save(),je.beginPath(),je.strokeStyle=tt.lineColor,je.lineWidth=tt.lineWidth,"dashed"===tt.lineDash&&je.setLineDash([5,5]),je.moveTo(Qe[0],Qe[1]);for(var qe=0;qe<Qe.length;qe+=2){var at=(qe+2)%8;je.lineTo.apply(je,[Qe[at],Qe[at+1]])}je.closePath(),je.globalCompositeOperation="destination-out",je.fillStyle="rgba(0,0,0)",je.fill(),je.globalCompositeOperation="source-over",je.stroke(),je.closePath(),je.restore()}(be,Le,ae),function(je,Qe,tt){var qe=Math.floor(8);je.save(),je.strokeStyle=tt.cornerColor,je.lineWidth=tt.lineWidth;for(var at=0;at<Qe.length;at+=2){var it=[Qe[at],Qe[at+1]];je.clearRect(it[0]-qe/2,it[1]-qe/2,qe,qe),je.strokeRect(it[0]-qe/2,it[1]-qe/2,qe,qe)}je.restore()}(be,fe,ae)}},Ge}(),he=function(){function Ge(z,X){this._obElement=null,this._callback=null,this._unbindFn=null,this._callback=X,this._obElement=z,this._initObserver()}var de=Ge.prototype;return de._initObserver=function(){var z=this._callback,X=this._obElement;if(void 0!==window.ResizeObserver){var ae=new window.ResizeObserver(function(be){z(be[0].contentRect)});ae.observe(X),this._unbindFn=function(){ae.unobserve(X),ae.disconnect(),ae=null}}else{var fe=document.createElement("iframe");fe.id="fm",fe.style.cssText="width:100%;height:100%;z-index:-1;",fe.onresize=function(){var be=X.getBoundingClientRect();z(be)},this._unbindFn=function(){fe.remove(),fe=null}}},de.dispose=function(){this._unbindFn(),this._unbindFn=null,this._callback=null,this._obElement=null},Ge}(),ie=function(){function Ge(z,X){this.name="",this.icon="",this.text="",this.className="",this.onclick=null,this.element=null,this.options=z,this.context=X,this.element=this._initEl()}var de=Ge.prototype;return de._initEl=function(){var xt,Lt,Nt,_t,z=this.options,X=z.icon,ae=z.text,fe=z.className,be=z.onclick,Pe=z.name,We=z.onmount,Le=z.onunmount,je=z.dropdown,Qe=z.order,tt=void 0===Qe?0:Qe,qe=z.onSelected,at=z.isSelected,it=void 0!==at&&at,dt=z.visibility,mt=void 0===dt||dt,yt=this.context,gt=document.createElement("div");if(this.name=Pe,fe){if(!1===mt)return gt.className=fe+" dcs-block",gt;gt.className=fe}return gt.style.order=String(tt),function(xt,Lt){if(Lt){var Nt=document.createElement("i");Nt.className=Lt,xt.appendChild(Nt)}}(gt,X),function(xt,Lt){if(Lt){var Nt=document.createElement("p");Nt.innerText=Lt,xt.appendChild(Nt)}}(gt,ae),xt=gt,Nt=yt,_t=it,(Lt=We)&&setTimeout(function(){Lt(xt,Nt,_t)},0),Le&&(this._unmount=Le.bind(null,gt,yt)),function(xt,Lt,Nt){xt.addEventListener("click",function(_t){v(Lt)?c.emit(Lt,_t,Nt):_(Lt)&&Lt(_t,Nt)})}(gt,be,yt),function(xt,Lt,Nt,_t){var Yt=xt;Yt.bSelected=_t,Lt&&(_t&&xt.classList.add("dcs-selected"),xt.addEventListener("click",function(xn){Yt.bSelected=!Yt.bSelected,xt.classList[Yt.bSelected?"add":"remove"]("dcs-selected"),Lt?.(Yt.bSelected,Nt)}))}(gt,qe,yt,it),function(xt,Lt,Nt){V.apply(this,arguments)}(gt,yt,je),gt},de.destroy=function(){var z;null===(z=this._unmount)||void 0===z||z.call(this),this.element=null},de.update=function(){if(this.element){var z,X=this._initEl();null===(z=this.element.parentElement)||void 0===z||z.insertBefore(X,this.element),this.element.remove(),this.element=X}},de.setSelected=function(z){var X=this.options.onSelected;X&&X(z,this.context)},Ge}();function V(){return(V=u()(a.a.mark(function Ge(de,z,X){var ae,fe,be,We,Le,je,Qe,tt;return a.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(qe.prev=0,tt=function(at,it,dt){it.dataset.showDropdown="false",at.onclick=function(mt){"true"!=it.dataset.showDropdown&&(it.classList.remove("dcs-display-none"),at.classList.add("dcs-selected"),it.dataset.showDropdown="true",mt.stopPropagation(),dt.dcs.addGlobalClickEvent(it,function(){return!(!it||"true"!=it.dataset.showDropdown||(it.classList.add("dcs-display-none"),it.parentElement.classList.remove("dcs-selected"),it.dataset.showDropdown="false",dt.dcs.emit("hideResolutionList"),0))}))}},Qe=function(at,it,dt,mt){void 0===it&&(it=!1);for(var yt=[],gt=at.children,xt=0;xt<gt.length;xt++)gt[xt].classList.contains("selectedItem")&&yt.push(gt[xt]);var Lt=!0;function Nt(_t,Yt){_t.classList[Yt?"add":"remove"]("selectedItem")}at.onclick=function(_t){var Yt,xn,ji=!1;if(_t instanceof MouseEvent){if(_t.stopPropagation(),!Lt)return;xn=_t.target,ji=!0}else xn=_t;if("LI"===(null===(Yt=xn)||void 0===Yt?void 0:Yt.tagName)){Lt=!1;var _r=yt.indexOf(xn);if(_r>-1){if(!it)return void(Lt=!0);yt.splice(_r,1),Nt(xn,!0)}else if(it)yt.push(xn),Nt(xn,!0);else{for(;yt.length;)Nt(yt.pop(),!1);Nt(xn,!0),yt.push(xn),at&&(at.parentNode.classList.remove("dcs-selected"),at.classList.add("dcs-display-none"),at.dataset.showDropdown="false",mt.dcs.emit("hideResolutionList",at,mt))}if(ji){var bi=dt?.(xn,xn.customData,mt);Promise.resolve(bi).then(function(){Lt=!0})}}}},je=function(at){var it=document.createDocumentFragment();return at.forEach(function(dt,mt){var yt=document.createElement("li"),xt=dt.innerHtml;if(yt.customData=dt.value,dt.isSelected&&yt.classList.add("selectedItem"),xt)yt.innerHTML=xt;else{var Lt=document.createElement("i");Lt.style.pointerEvents="none",Lt.className=dt.icon||"";var Nt=document.createElement("p");Nt.style.pointerEvents="none",Nt.innerText=dt.text||"",yt.appendChild(Lt),yt.appendChild(Nt)}it.appendChild(yt)}),it},X){qe.next=6;break}return qe.abrupt("return");case 6:return ae=X.list,fe=X.multiple,be=X.onclick,qe.next=9,ae(de,z);case 9:if(qe.t0=qe.sent,qe.t0){qe.next=12;break}qe.t0=[];case 12:We=je(qe.t0),(Le=de.querySelector("dropdown"))?(Le.removeEventListener("click",null),Le.childNodes.forEach(function(at){at.remove()}),Le.appendChild(We)):((Le=document.createElement("ul")).className="resolutionList dropdown dcs-display-none",Le.appendChild(We),de.appendChild(Le)),tt(de,Le,z),Qe(Le,fe,be,z),qe.next=29;break;case 20:return qe.prev=20,qe.t1=qe.catch(0),b("Error Begin---"),b(qe.t1),b(de),b(z),b(X),b("Error End---"),qe.abrupt("return",null);case 29:case"end":return qe.stop()}},Ge,null,[[0,20]])}))).apply(this,arguments)}var J=h(13),te=h.n(J),oe={code:-4201,message:"HTTPS is required for accessing cameras."},Ee={code:-4202,message:"The current browser has not implemented the MediaDevices interface."},ge={code:-4203,message:"The current browser has not implemented the getUserMedia interface."},Re={code:-4205,message:"No camera is selected."},G={code:-4206,message:"A Video element is required for this operation."},k={code:-4207,message:"The camera is not plugged in."},U={code:-4208,message:"The camera is not open."},H={code:-4210,message:"Failed to get camera input."},ee={code:-4211,message:"The camera source can not be found."},ye={code:-4214,message:"The video must be playing for the capture operation to work."},Z={code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},Q={code:-4216,message:"No camera is found."},se={code:-4217,message:"The license is invalid."},le={code:-4218,message:"The number of images processed at one time exceeds the maximum limit."},pe={code:-4220,message:"No image is found for the capture operation."},Ce={code:-4221,message:"The image format is not support."},Te={code:-4222,message:"The resolution is not support."},Be=function(){return{icon:"dcs-font dcs-i-load",onclick:(Ge=u()(a.a.mark(function de(z,X){var ae,fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if((ae=X.dcs).emit("blurPage"),!ae.loadFn){be.next=9;break}return be.next=5,ae.loadFn(X);case 5:(fe=be.sent)&&!X.page.isDestroyed&&Me(fe,ae),be.next=11;break;case 9:return be.next=11,xe(z.target,X);case 11:ae.emit("focusPage");case 12:case"end":return be.stop()}},de)})),function(de,z){return Ge.apply(this,arguments)}),className:"dcs-btn-loadBtn",text:"Load"};var Ge};function xe(Ge,de){return me.apply(this,arguments)}function me(){return(me=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be;return a.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return X=!1,ae=!1,(fe=document.createElement("input")).type="file",fe.multiple=!0,fe.accept="image/png,image/jpeg",be=function(){fe.value=null,fe.files=null,fe.onchange=null,fe=null,ae=!1,X=!1,z.dcs.removeGlobalBlurEvent(de),z.dcs.removeGlobalFocusEvent(de)},ae=!0,fe.click(),X=!0,Pe.abrupt("return",new Promise(function(We){z.dcs.addGlobalFocusEvent(de,function(){setTimeout(function(){!ae&&X&&(on.log("select file canceled"),be(),de.onblur=null,We(!0))},200)}),z.dcs.addGlobalBlurEvent(de,function(){ae&&X&&(on.log("selecting file"),ae=!1)}),fe.onchange=u()(a.a.mark(function Le(){var je,Qe,tt,qe,at,it;return a.a.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if((je=z.dcs).showLoading("load local image"),mt.prev=2,X=!1,""!==fe.value){mt.next=7;break}mt.next=25;break;case 7:Qe=fe.files,tt=[],qe=!1,at=0;case 11:if(!(at<Qe.length)){mt.next=24;break}if("application/pdf"!=(it=Qe[at]).type&&"image/tiff"!=it.type){mt.next=17;break}return 0==qe&&c.emit("video-error",Ce),qe=!0,mt.abrupt("continue",21);case 17:return mt.next=19,F(Qe[at]);case 19:tt.push(mt.sent);case 21:at++,mt.next=11;break;case 24:tt.length>0&&!z.page.isDestroyed&&Me(tt,je);case 25:return mt.prev=25,je.hideLoading("load local image"),be(),de.onblur=null,We(!0),mt.finish(25);case 31:case"end":return mt.stop()}},Le,null,[[2,,25,31]])}))}));case 11:case"end":return Pe.stop()}},Ge)}))).apply(this,arguments)}function Me(Ge,de){return Oe.apply(this,arguments)}function Oe(){return(Oe=u()(a.a.mark(function Ge(de,z){return a.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:z.showLoading("handleBlobList"),oi(z,de).finally(function(){z.hideLoading("handleBlobList")});case 2:case"end":return X.stop()}},Ge)}))).apply(this,arguments)}function ze(Ge,de){return Ze.apply(this,arguments)}function Ze(){return(Ze=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be,Pe,We;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ae=z.dcs,be=(X=z.page).options,!(fe=de.currentTarget).classList.contains("dcs-selected")){Le.next=22;break}if(Pe=!1,be.file&&be.file.blobList&&be.file.blobList.length>0&&(Pe=!0),!ae.config.scannerViewer.funcConfirmExitContinuousScan||0!=ae.config.scannerViewer.funcConfirmExitContinuousScan(Pe)){Le.next=9;break}return Le.abrupt("return");case 9:fe.classList.remove("dcs-selected"),be.continuous=!1,be.file.blobList=[],(We=document.querySelector(".previewImg")).src&&(Yn.revokeObjectURL(We.src),We.src=A),We.parentElement.classList.add("dcs-hidden"),ae.multipleHandleFn([],{page:X,dcs:ae}),ae.multipleView=!1,ae._dvs.camera&&ae._dvs.camera._cameraDvs&&ae._dvs.camera._cameraDvs.ViewControl&&ae._dvs.camera._cameraDvs.ViewControl.getViewerByIndex(0).removeAllSync(),ae.config.scannerViewer.maxDocuments>0&&(ae.config.scannerViewer.autoScan.enableAutoScan||ae.config.scannerViewer.autoDetect.enableAutoDetect)&&(ae.captureLoop.changeStyle(),ae.captureLoop.setEnable(),ae.config.scannerViewer.autoScan.enableAutoScan?ae.captureLoop.setAutoScan():ae.captureLoop.setAutoDetect()),Le.next=25;break;case 22:fe.classList.add("dcs-selected"),be.continuous=!0,ae.multipleView=!1;case 25:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}var ot=function(){return{icon:"dcs-font dcs-i-close",className:"dcs-btn-closeBtn",onclick:(Ge=u()(a.a.mark(function de(z,X){var ae,fe,be;return a.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(ae=X.dcs,!(fe=X.page)._isClosed){Pe.next=4;break}return ae.navigateBack(),Pe.abrupt("return");case 4:if(fe._isClosed=!0,ae.emit("blurPage"),!ae.multipleCloseHandleFn){Pe.next=9;break}return Pe.next=9,ae.multipleCloseHandleFn();case 9:if(be=!1,fe.options&&fe.options.file&&fe.options.file.blobList&&fe.options.file.blobList.length>0&&(be=!0),"homePage"!=fe.pageName||!ae.config.scannerViewer.funcConfirmExit||0!=ae.config.scannerViewer.funcConfirmExit(be)){Pe.next=13;break}return Pe.abrupt("return");case 13:ae.navigateBack();case 14:case"end":return Pe.stop()}},de)})),function(de,z){return Ge.apply(this,arguments)})};var Ge},ve=function(){return{icon:"dcs-font dcs-i-resolution",className:"dcs-btn-resBtn",dropdown:{multiple:!1,list:function(Ge,de){var z=de.dcs;return new Promise(function(X,ae){z.once("onPlayed",u()(a.a.mark(function fe(){var be,Pe,We,je,Qe;return a.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(be=R(z,"config.scannerViewer.resolution"),Pe=be.valueList,We=be.defaultValue,z.showLoading("resolution list"),tt.prev=3,Pe&&Pe.length){tt.next=12;break}return tt.next=7,z.getResolution();case 7:We=We||{width:1280,height:720},Pe=tt.sent.map(function(qe){return{label:qe.width+"\xd7"+qe.height,value:qe}}),tt.next=13;break;case 12:We=We||Pe[Pe.length-1].value;case 13:if(!((je=Fe(We,Pe))<0)){tt.next=31;break}return tt.next=17,z.getCurrentResolution();case 17:if(!(Qe=tt.sent)||Qe.width==We.width||Qe.height==We.height){tt.next=30;break}return tt.prev=19,tt.next=22,z.setResolution(We);case 22:je<0&&(Pe.push({value:Qe,label:Qe.width+"\xd7"+Qe.height}),je=Pe.length-1),tt.next=28;break;case 25:tt.prev=25,tt.t0=tt.catch(19);case 28:tt.next=31;break;case 30:je<0&&(Pe.push({value:Qe,label:Qe.width+"\xd7"+Qe.height}),je=Pe.length-1);case 31:X(Pe.map(function(qe,at){return{value:qe.value,text:qe.label,icon:"checkBox",isSelected:at===je}}));case 32:return tt.prev=32,z.hideLoading("resolution list"),tt.finish(32);case 35:case"end":return tt.stop()}},fe,null,[[3,,32,35],[19,25]])}))),z.on("resetResolution",function(){var be=z.config.scannerViewer.resolution.defaultValue,Pe=z.config.scannerViewer.resolution.valueList,We=Fe(be,Pe);We<0&&(Pe.push({value:be,label:be.width+"\xd7"+be.height}),We=Pe.length-1);var Le=document.getElementsByClassName("resolutionList");if(Le&&Le.length>0)for(var je=Le[0],Qe=0;Qe<je.childNodes.length;Qe++)Qe==We&&je.onclick(je.childNodes[Qe])}),z.on("resetRealResolution",function(){var fe=z.config.scannerViewer.resolution.defaultValue;z.showLoading("resolution button click"),z.setResolution(fe).then(function(be){z.hideLoading("resolution button click")})})})},onclick:function(Ge,de,z){var X=z.dcs;X.showLoading("resolution button click"),X.setResolution(de).then(function(ae){de.width!=ae.width&&de.height!=ae.height&&c.emit("video-error",Te),X.config.scannerViewer.resolution.defaultValue=de,X.hideLoading("resolution button click"),X.getCameraView().resetVideoInfo()})}},onclick:function(Ge,de){var z=de.dcs;z.emit("blurPage"),z.once("hideResolutionList",function(){z.emit("focusPage")})}}};function Fe(Ge,de){var z=Ge.width,X=Ge.height,ae=de.findIndex(function(fe){var be=fe.value||{};return be.width===z&&be.height===X});return ae<0&&(ae=de.findIndex(function(fe){var be=fe.value||{};return be.width===X&&be.height===z})),ae}function Ve(Ge,de){return Ye.apply(this,arguments)}function Ye(){return(Ye=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be,Pe,We;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:fe=(ae=z.page).options,(X=z.dcs).multipleHandleFn&&(be=fe.file.blobList,X.hideLoading("handle multiple image"),X.emit("blurPage"),X.stop(),X.multipleHandleFn(be,{page:ae,dcs:X}),Pe=document.querySelector(".dcs-btn-multipleImg"),We=Pe.querySelector(".previewImg"),Yn.revokeObjectURL(We.src),We.src=A,We.onload=null,We.onerror=null);case 3:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}function Ne(){return(Ne=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be,Pe,We,Le,je,Qe,tt,qe,at,it;return a.a.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(!(X=de.options).isFilterPage){dt.next=6;break}return dt.next=4,Je(de,z,X.onSave,X.file);case 4:dt.next=53;break;case 6:if(z.showLoading("save button click"),ae=X.file,fe=X.onSave,We=void 0===(Pe=(void 0===(be=z.config)?{}:be).filterViewer)?{}:Pe,dt.prev=10,Le=de.getOriBlob(),je=de.getAngle(),!ae.isFull||0!=je){dt.next=26;break}return dt.next=16,ao(Le);case 16:if(Qe=dt.sent,!We.visibility){dt.next=21;break}z.showFilterPage({blob:Le,iImageData:Qe,angle:0,onSave:fe,file:ae}),dt.next=24;break;case 21:return de.options.iImageData=Qe,dt.next=24,Je(de,z,X.onSave,X.file);case 24:dt.next=49;break;case 26:return ae.detectArea=de.getDetectAreaForNotRotate(),dt.next=29,ao(Le);case 29:return tt=dt.sent,dt.next=32,oo(tt,0,ae.detectArea);case 32:return qe=dt.sent,dt.next=35,No(qe);case 35:if(at=dt.sent,!We.visibility){dt.next=40;break}z.showFilterPage({blob:at,iImageData:qe,angle:je,onSave:fe,file:ae}),dt.next=49;break;case 40:if("original"==We.filter.defaultValue){dt.next=45;break}return dt.next=43,ko(qe,at,z.filterHandleList,We.filter.valueList,We.filter.defaultValue);case 43:(it=dt.sent)&&(at=it);case 45:return de.options.blob=at,de.options.iImageData=qe,dt.next=49,Je(de,z,X.onSave,X.file);case 49:return dt.prev=49,z.hideLoading("save button click"),ks(z),dt.finish(49);case 53:case"end":return dt.stop()}},Ge,null,[[10,,49,53]])}))).apply(this,arguments)}function Je(Ge,de,z,X){return we.apply(this,arguments)}function we(){return(we=u()(a.a.mark(function Ge(de,z,X,ae){var fe,be,Pe,We,Le,je,Qe,tt,qe,at;return a.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(z.showLoading("save filter page"),fe=de.options.blob,be=de.options.iImageData,it.prev=3,Pe=de.options.file.filterValue,(We=de.getAngle())!=(void 0===(Le=ae.oriAngle)?0:Le)||0!=We||"original"!=Pe){it.next=12;break}return it.next=10,ou(z,fe,X,ae);case 10:it.next=31;break;case 12:if(ae.angle=We,0==We){it.next=20;break}return it.next=16,Ls(be,We);case 16:return be=it.sent,it.next=19,No(be);case 19:fe=it.sent;case 20:if(je=R(z.config,"filterViewer.filter"),Qe=je.valueList,!((tt=z.filterHandleList).length>0)){it.next=29;break}if("original"==Pe){it.next=29;break}return it.next=27,ko(be,fe,tt,Qe,Pe);case 27:(qe=it.sent)&&(fe=qe);case 29:return it.next=31,ou(z,fe,X,ae);case 31:it.next=36;break;case 33:it.prev=33,it.t0=it.catch(3),b(it.t0);case 36:if(it.prev=36,fe=null,be=null,z.hideLoading("save filter page"),ks(z),!z.config.filterViewer.exitDocumentScanAfterSave){it.next=48;break}z.emit("video-closed"),z.captureLoop&&z.captureLoop.setIsLooping(!1),z.emit("focusPage"),z.navigateBack(3),it.next=63;break;case 48:if(z.showLoading("play camera"),"playing"!=(at=z.getStatus())){it.next=53;break}it.next=60;break;case 53:if("paused"!=at){it.next=57;break}z.hidden()||z.resume(),it.next=60;break;case 57:if(z.hidden()){it.next=60;break}return it.next=60,z.play();case 60:z.hidden()||z.emit("resetResolution"),z.hideLoading("play camera"),z.emit("focusPage");case 63:return it.finish(36);case 64:case"end":return it.stop()}},Ge,null,[[3,33,36,64]])}))).apply(this,arguments)}var Ae=function(Ge){function de(z){var X=Ge.getCurrentPage(),ae=X.imageEl,be=ae.naturalWidth,Pe=ae.naturalHeight;M([].concat(X.options.detectArea),be,Pe)&&z.classList.add("dcs-selected")}return{icon:"dcs-font dcs-i-fullCrop",className:"dcs-btn-toggleFullArea",onclick:function(z,X){var fe=X.page.toggleFullAreaButton(),be=z?.currentTarget;be&&be.classList[fe?"remove":"add"]("dcs-selected")},onmount:function(z){var X=Ge.getCurrentPage();X.imageEl.addEventListener("load",function(){de(z)}),de(z),X.getCropManage().onAreaChanged=function(ae){var fe=X.isAreaFulfilled(ae);X.options.file.isFull=fe,z&&z.classList[fe?"add":"remove"]("dcs-selected")}}}},Ue=function(Ge){return{icon:"dcs-font dcs-i-filter",className:"dcs-btn-filterBtn",onclick:function(de,z){var X=z.page;if(de){var ae=de.target;ae&&(de.stopPropagation(),function(fe,be,Pe){Ke.apply(this,arguments)}(ae,Ge,X))}}}},He=null;function Ke(){return(Ke=u()(a.a.mark(function Ge(de,z,X){var ae,fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(ae=document.querySelector(".dcs-filterDropDown")){be.next=9;break}return be.next=4,ht(z,X);case 4:return(fe=be.sent).dataset.showDropdown="true",de.appendChild(fe),rt(z,ae),be.abrupt("return");case 9:if("true"!==ae.dataset.showDropdown){be.next=11;break}return be.abrupt("return");case 11:st(ae,!0),rt(z,ae),ae.dataset.showDropdown="true",X.render();case 15:case"end":return be.stop()}},Ge)}))).apply(this,arguments)}function rt(Ge,de){Ge.addGlobalClickEvent(de,function(z){var X=document.querySelector(".dcs-filterDropDown");return!(!X||"true"!==X.dataset.showDropdown||(X.classList.add("dcs-display-none"),X.dataset.showDropdown="false",0))})}function st(Ge,de){Ge.classList[de?"remove":"add"]("dcs-display-none"),de&&He&&(Ge.scrollLeft=He.offsetLeft)}function ht(Ge,de){return ft.apply(this,arguments)}function ft(){return(ft=u()(a.a.mark(function Ge(de,z){var X,fe,be,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt,yt,gt,xt,Lt,Nt,_t;return a.a.wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:if(de.showLoading("create filter list"),(X=document.createElement("ul")).className="dcs-filterDropDown dropdown",Yt.prev=3,be=void 0===(fe=de.filterHandleList)?[]:fe,Pe=R(de.config,"filterViewer.filter"),We=Pe.valueList,Le=z.options,je=z.getAngle(),Qe=Pe.defaultValue,We.find(function(xn){return"original"===xn.value})||We.unshift({value:"original",label:"original"}),tt=Le.blob,!(qe=Le.iImageData)){Yt.next=24;break}return Yt.next=17,dp(qe,0);case 17:return at=Yt.sent,Yt.next=20,No(at);case 20:it=Yt.sent,qe=null,Yt.next=31;break;case 24:return Yt.next=27,Ns(tt,0);case 27:return it=Yt.sent,Yt.next=30,ao(it);case 30:at=Yt.sent;case 31:We.some(function(xn){return xn.value===Qe})||(Qe="original"),dt=document.createDocumentFragment(),mt=0;case 34:if(!(mt<We.length)){Yt.next=48;break}if(xt=(yt=We[mt]).label,Lt=void 0,"original"!==(gt=yt.value)){Yt.next=41;break}Lt=tt,Yt.next=44;break;case 41:return Yt.next=43,ko(at,tt,be,We,gt);case 43:Lt=Yt.sent;case 44:Lt&&(Nt=document.createElement("li"),_t={value:gt,url:Yn.createURL(Lt),label:xt},Nt.innerHTML='<img class="preFilter" src="'+_t.url+'" style="transform:rotate('+je+'deg)"><p>'+_t.label+"</p>",dt.appendChild(Nt),Nt.dataset.filterValue=_t.value,_t.value===Qe&&(Nt.classList.add("selectedItem"),He=Nt));case 45:mt++,Yt.next=34;break;case 48:at=null,X.appendChild(dt),dt=null,X.addEventListener("click",function(){var xn=u()(a.a.mark(function ji(_r){return a.a.wrap(function(bi){for(;;)switch(bi.prev=bi.next){case 0:pt(_r,{dcs:de,page:z});case 1:case"end":return bi.stop()}},ji)}));return function(ji){return xn.apply(this,arguments)}}());case 52:return Yt.prev=52,de.hideLoading("create filter list"),Yt.finish(52);case 55:return Yt.abrupt("return",X);case 56:case"end":return Yt.stop()}},Ge,null,[[3,,52,55]])}))).apply(this,arguments)}function pt(Ge,de){return Ct.apply(this,arguments)}function Ct(){return(Ct=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be,Pe,We,je,Qe,tt;return a.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(X=z.dcs,ae=z.page,de.stopPropagation(),(fe=de.target)!==He&&"LI"===fe.tagName){qe.next=5;break}return qe.abrupt("return");case 5:if(He&&He.classList.remove("selectedItem"),He=fe,fe.classList.add("selectedItem"),be=R(X.config,"filterViewer.filter"),Pe=be.valueList,(We=X.filterHandleList).length){qe.next=13;break}return qe.abrupt("return");case 13:if(je=ae.options.blob,"original"!==(Qe=fe.dataset.filterValue)){qe.next=20;break}return ae.options.file.filterValue=Qe,ae.updateImage(je),qe.abrupt("return");case 20:return X.showLoading("filter button click"),qe.prev=21,qe.next=24,Vi(X,je,We,Pe,Qe);case 24:(tt=qe.sent)&&(ae.options.file.filterValue=Qe,ae.updateImage(tt));case 26:return qe.prev=26,X.hideLoading("filter button click"),qe.finish(26);case 29:case"end":return qe.stop()}},Ge,null,[[21,,26,29]])}))).apply(this,arguments)}var St=function(){function Ge(de){this._updateData(de)}return Ge.prototype._updateData=function(de){var z=this;Object.keys(de).forEach(function(X){z[X]=de[X]})},Ge}(),At=["blobList"];function En(Ge){Ge&&!Ge.isDestroyed&&Ge.destroy()}function mn(){return(mn=u()(a.a.mark(function Ge(de){var z,X,ae,fe,be,Pe,We,Le;return a.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(de){je.next=3;break}return document.body.classList.remove("dcs-overflowHidden"),je.abrupt("return");case 3:if(!de||!de.element){je.next=33;break}if(z=de._dcs.config.element,X=de.container||z){je.next=20;break}if(document.body.appendChild(de.element),document.body.classList.add("dcs-overflowHidden"),de.element.classList.add("dcs-fixed-full"),de.container=document.body,!(de.options.file&&!de.options.file.filterValue||de.options.file.filterValue&&"original"==de.options.file.filterValue)){je.next=15;break}null===(ae=(fe=de).render)||void 0===ae||ae.call(fe),je.next=19;break;case 15:return je.next=17,Vi(de._dcs,de.options.blob,de._dcs.filterHandleList,de._dcs.config.filterViewer.filter.valueList,de.options.file.filterValue);case 17:(be=je.sent)&&de.updateImage(be);case 19:return je.abrupt("return");case 20:if(v(X)&&(X=document.getElementById(X)),!X){je.next=33;break}if("static"===window.getComputedStyle(X).position&&X.classList.add("dcs-relative"),X.appendChild(de.element),de.container=X,!(de.options.file&&!de.options.file.filterValue||de.options.file.filterValue&&"original"==de.options.file.filterValue)){je.next=29;break}null===(Pe=(We=de).render)||void 0===Pe||Pe.call(We),je.next=33;break;case 29:return je.next=31,Vi(de._dcs,de.options.blob,de._dcs.filterHandleList,de._dcs.config.filterViewer.filter.valueList,de.options.file.filterValue);case 31:(Le=je.sent)&&de.updateImage(Le);case 33:case"end":return je.stop()}},Ge)}))).apply(this,arguments)}function oo(Ge,de,z){return so.apply(this,arguments)}function so(){return(so=u()(a.a.mark(function Ge(de,z,X){var ae,fe,be,Pe;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return fe=!1,X&&(ae=Ui(X),fe=M(ae,de.imageWidth,de.imageHeight)),Pe=!1,fe||!X||(be={points:ae},Pe=!0),Le.abrupt("return",si(de,z,be,Pe,{quality:85,returnType:g.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(je){return de.imageData=je.src,je.result}));case 5:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}function Fs(Ge){var de=Ge.config,z=R(void 0===de?{}:de,"filterViewer.filter"),X=z.defaultValue,ae=void 0===X?"original":X;return"original"!==ae&&z.valueList.some(function(be){return be.value===ae})?ae:"original"}function nc(Ge,de,z){return rc.apply(this,arguments)}function rc(){return(rc=u()(a.a.mark(function Ge(de,z,X){var ae,fe,be,Pe;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if("original"!==(ae=Fs(de))){Le.next=3;break}return Le.abrupt("return",{filterValue:ae,filterBlob:X});case 3:return be=R(void 0===(fe=de.config)?{}:fe,"filterViewer.filter"),Pe=be.valueList,Le.next=8,ko(z,X,de.filterHandleList,Pe,ae);case 8:return Le.abrupt("return",{filterValue:ae,filterBlob:Le.sent});case 10:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}function nu(Ge,de,z,X,ae,fe){return ic.apply(this,arguments)}function ic(){return(ic=u()(a.a.mark(function Ge(de,z,X,ae,fe,be){var Pe,Le,je,Qe,tt,at,it,mt,yt,gt,xt,Nt;return a.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(void 0===X&&(X=!1),void 0===ae&&(ae=!1),void 0===fe&&(fe=!1),!be){_t.next=14;break}if(!fe){_t.next=11;break}return _t.next=7,B(de);case 7:Pe=new St({oriBlob:be,preview:_t.sent}),_t.next=12;break;case 11:Pe=new St({oriBlob:be});case 12:_t.next=20;break;case 14:return fe||(Le=!1),_t.next=17,si(de,void 0,void 0,void 0,void 0,Le);case 17:de.imageData=(je=_t.sent).src,Pe=new St(fe?{oriBlob:je.result,preview:je.preview}:{oriBlob:je.result});case 20:if(Qe=R(z,"config.scannerViewer"),at=de.imageWidth,it=de.imageHeight,void 0!==(tt=Qe.enableBorderDetection)&&!tt){_t.next=39;break}return _t.next=25,Bs(de,!0,z);case 25:if(mt=ac(mt=Ui(_t.sent.cornerPoints),at,it),Pe.detectArea=mt,!ae&&!X){_t.next=37;break}return _t.next=32,oo(de,void 0,Pe.detectArea);case 32:return yt=_t.sent,_t.next=35,No(yt);case 35:gt=_t.sent,X&&(Pe.resImage=yt,Pe.resBlob=gt);case 37:_t.next=42;break;case 39:Pe.detectArea=[0,0,at,0,at,it,0,it],ae&&(yt=de,gt=Pe.oriBlob),X&&(Pe.resImage=de,Pe.resBlob=Pe.oriBlob);case 42:if(!ae){_t.next=50;break}return _t.next=45,nc(z,yt,gt);case 45:Nt=(xt=_t.sent).filterBlob,Pe.filterValue=xt.filterValue,Pe.filterBlob=Nt;case 50:return yt=null,gt=null,_t.abrupt("return",Pe);case 53:case"end":return _t.stop()}},Ge)}))).apply(this,arguments)}function ao(Ge){return b("blobToImageData createObjectURL"),si(Ge,void 0,void 0,void 0,{quality:85,returnType:g.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(de){return de.result})}function No(Ge){return b("blobToImageData createObjectURL"),si(Ge,void 0,void 0,void 0,{quality:85,returnType:g.Enum_ImageType.IT_JPG,returnBlob:!0},!1).then(function(z){return Ge.imageData=z.src,z.result})}function Ls(Ge,de){return b("blobToImageData createObjectURL"),si(Ge,de,void 0,void 0,{quality:85,returnType:g.Enum_ImageType.IT_BGRA,returnBlob:!1},!1).then(function(X){return Ge.imageData=X.src,X.result})}function Ns(Ge,de){return si(Ge,de,void 0,void 0,!1,void 0).then(function(z){return z.preview})}function dp(Ge,de){return si(Ge,de,void 0,void 0,{quality:85,returnType:g.Enum_ImageType.IT_BGRA,returnBlob:!1},void 0).then(function(X){return Ge.imageData=X.src,X.preview})}function ru(Ge,de,z){return iu.apply(this,arguments)}function iu(){return(iu=u()(a.a.mark(function Ge(de,z,X){var ae,fe,be,We;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ae=document.querySelector(".dcs-btn-multipleImg")){Le.next=4;break}return on.log("cannot find the div .dcs-btn-multipleImg"),Le.abrupt("return");case 4:if(ae.querySelector(".imgCount").innerText=String(z.length),fe=z[z.length-1],b("handleMultipleImg createObjectURL"),!fe.preview){Le.next=11;break}Le.next=18;break;case 11:return Le.next=13,ao(fe.oriBlob);case 13:return be=Le.sent,Le.next=16,uu(de,null,be,!1,!1);case 16:fe.preview=Le.sent.preview;case 18:return Le.next=20,new Promise(function(je,Qe){var tt=ae.querySelector(".previewImg"),qe=tt.src;tt.src=Yn.createURL(fe.preview),tt.onload=function(){tt.onload=null,qe&&Yn.revokeObjectURL(qe),je(!0)},tt.onerror=function(at){Qe(at)}});case 20:We=document.querySelector(".dcs-btn-continuousMode"),ae.classList.remove("dcs-hidden"),We?.classList.add("dcs-selected");case 23:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}function Bs(Ge,de,z){return oc.apply(this,arguments)}function oc(){return(oc=u()(a.a.mark(function Ge(de,z,X){var ae,fe,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt,yt;return a.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(ae=de.imageWidth,fe=de.imageHeight,Le=(We=void 0===(Pe=(X.config.scannerViewer||{}).autoDetect)?{}:Pe).acceptedPolygonConfidence,je=void 0===Le?80:Le,tt=void 0===(Qe=We.acceptedBlurryScore)?80:Qe,X.areaDetectFn){gt.next=6;break}return P({message:"The detect function is not bind.",code:-4290}),gt.abrupt("return",{cornerPoints:[],detectedArea:!1});case 6:return gt.next=8,X.areaDetectFn(de,je,tt,void 0,void 0,z);case 8:return de.imageData=(qe=gt.sent).src,it=void 0===(at=qe.confidence)?[0]:at,mt=void 0===(dt=qe.blurryScore)?0:dt,yt=qe.cornerPoints,c.emit("documentDetected",qe),it[0]<je/100||mt<tt||yt.every(function(xt){return 0===xt})?(qe.detectedArea=!1,qe.cornerPoints=[0,0,ae,0,ae,fe,0,fe]):qe.detectedArea=!0,gt.abrupt("return",qe);case 14:case"end":return gt.stop()}},Ge)}))).apply(this,arguments)}function Vi(Ge,de,z,X,ae){return Bo.apply(this,arguments)}function Bo(){return(Bo=u()(a.a.mark(function Ge(de,z,X,ae,fe){var be,Pe,We;return a.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if("original"!==fe){je.next=2;break}return je.abrupt("return",z);case 2:if(be=X.find(function(Qe){return Qe.label===fe}),Pe=ae.find(function(Qe){return Qe.value===fe}),be&&be.handler&&Pe){je.next=6;break}return je.abrupt("return",z);case 6:return je.next=8,ao(z);case 8:return We=je.sent,je.next=11,be.handler(We,Pe.option);case 11:return je.abrupt("return",je.sent.result);case 13:case"end":return je.stop()}},Ge)}))).apply(this,arguments)}function ko(Ge,de,z,X,ae){return sc.apply(this,arguments)}function sc(){return(sc=u()(a.a.mark(function Ge(de,z,X,ae,fe){var be,Pe,We;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if("original"!==fe){Le.next=2;break}return Le.abrupt("return",z);case 2:if(be=X.find(function(je){return je.label===fe}),Pe=ae.find(function(je){return je.value===fe}),be&&be.handler&&Pe){Le.next=6;break}return Le.abrupt("return",z);case 6:return Le.next=8,be.handler(de,Pe.option);case 8:return de.imageData=(We=Le.sent).src,Le.abrupt("return",We.result);case 11:case"end":return Le.stop()}},Ge)}))).apply(this,arguments)}function uo(Ge){var de=Ge||{},z=de.iconCss,X=de.visibility,ae={};return z&&(ae.icon=z),!1===X&&(ae.visibility=!1),ae}function ou(Ge,de,z,X){return yi.apply(this,arguments)}function yi(){return(yi=u()(a.a.mark(function Ge(de,z,X,ae){var fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!X){be.next=8;break}return fe=te()(ae,At),be.next=4,Promise.resolve(X([{iImageData:z,file:s()({},fe)}]));case 4:!1!==be.sent&&de.redirectToHome(),be.next=9;break;case 8:de.redirectToHome();case 9:case"end":return be.stop()}},Ge)}))).apply(this,arguments)}function oi(Ge,de){return jr.apply(this,arguments)}function jr(){return(jr=u()(a.a.mark(function Ge(de,z){var X,ae,fe,be,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt;return a.a.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(X=de.getCurrentPage(),fe=(ae=X.options).continuous,be=ae.file,0!=z.length){yt.next=4;break}return yt.abrupt("return");case 4:if(fe||1!=z.length){yt.next=13;break}return Pe=z[0],yt.next=8,ao(Pe);case 8:return We=yt.sent,yt.next=11,su(de,We,!1,null,Pe);case 11:yt.next=24;break;case 13:if(be.blobList=be.blobList||[],ae.continuous=!0,Qe=void 0===(je=(Le=de.config.scannerViewer||{}).maxDocuments)?20:je,at=!0,(be.blobList.length+z.length>(qe=void 0===(tt=Le.maxImagesInBuffer)?Qe:tt)||be.blobList.length+z.length>Qe)&&(c.emit("video-error",le),at=!1),it=[],at)it=z.map(function(gt){return new St({oriBlob:gt})});else for(dt=0;dt<qe-be.blobList.length;dt++)it.push(new St({oriBlob:z[dt]}));if(!(it.length>0)){yt.next=24;break}return(mt=be.blobList).push.apply(mt,it),yt.next=24,ru(de,be.blobList,!0);case 24:case"end":return yt.stop()}},Ge)}))).apply(this,arguments)}function su(Ge,de,z,X,ae){return au.apply(this,arguments)}function au(){return(au=u()(a.a.mark(function Ge(de,z,X,ae,fe){var be,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt,yt,gt,xt,Lt,Nt,_t,Yt,xn,ji,_r,bi,hc,Pw,hp,Rw,pp,gp,mp,_p,Ow;return a.a.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(be=de.getCurrentPage(),We=(Pe=be.options).continuous,Le=Pe.onSave,je=R(de,"config.cropViewer"),Qe=je.rotateLeft,tt=je.rotateRight,at=void 0===(qe=je.autoDetectBorder)?{}:qe,it=je.apply,mt=void 0===(dt=je.visibility)||dt,yt=z,gt=Pe.file,Nt=void 0===(Lt=(void 0===(xt=de.config)?{}:xt).filterViewer)?{}:Lt,We){Wn.next=52;break}return on.log("not continuous mode."),Wn.next=11,de.stop();case 11:if(!mt){Wn.next=27;break}return on.log("get BlobItem no filter+noPerspective+no preview"),Wn.next=15,nu(yt,de,!1,!1,!1,fe);case 15:return Yt=(_t=Wn.sent).detectArea,xn=_t.oriBlob,X&&de.setImageDataBack(yt.imageData),gt.bAdd=!0,gt.oriBlob=xn,gt.detectArea=Yt,gt.angle=0,on.log("show edit page"),ji="dcs-font dcs-i-next",Nt.visibility||(ji="dcs-font dcs-i-save"),de.showEditPage({blob:xn,detectArea:Yt,angle:0,continuous:We,onSave:Le,footerButtons:{rotateLeft:uo(Qe),rotateRight:uo(tt),toggleFullArea:uo(at),save:s()({icon:ji},uo(it))},file:gt}),Wn.abrupt("return");case 27:return on.log("get BlobItem filter+Perspective+no preview"),Wn.next=30,nu(yt,de,!0,!0,!1,fe);case 30:if(_r=Wn.sent,X&&(de.setImageDataBack(yt.imageData),delete yt.imageData),bi=_r.filterBlob,hc=_r.resBlob,Pw=_r.detectArea,hp=_r.oriBlob,(Rw=_r.resImage)&&delete _r.resImage,hp&&delete _r.oriBlob,bi&&delete _r.filterBlob,hc&&delete _r.resBlob,gt.bAdd=!0,gt.oriBlob=hp,gt.detectArea=Pw,gt.angle=0,!1!==Nt.visibility){Wn.next=48;break}return Wn.next=45,ou(de,bi||hc,Pe.onSave,gt);case 45:return de.captureLoop&&de.captureLoop.setIsLooping(!1),de.emit("focusPage"),Wn.abrupt("return");case 48:on.log("show filter page"),de.showFilterPage({angle:0,blob:bi||hc,iImageData:Rw,file:gt,onSave:Pe.onSave}),Wn.next=68;break;case 52:if(gt.blobList=gt.blobList||[],on.log("continuous mode."),Pe.continuous=!0,mp=void 0===(gp=(pp=de.config.scannerViewer||{}).maxDocuments)?20:gp,!(gt.blobList.length+1>(void 0===(_p=pp.maxImagesInBuffer)?mp:_p)||gt.blobList.length+1>mp)){Wn.next=61;break}return on.log("maxImagesInBuffer."),c.emit("video-error",le),(de.config.scannerViewer.autoScan.enableAutoScan||de.config.scannerViewer.autoDetect.enableAutoDetect)&&(Ow=de.captureLoop.getLoopType(),de.captureLoop.stopCaptureLoop(),de.captureLoop.changeStyle(),de.captureLoop._setLoopType(Ow),de.captureLoop.setDisable()),Wn.abrupt("return");case 61:return Wn.next=63,uu(de,ae,yt,X,!0);case 63:return gt.blobList.push(Wn.sent),on.log("start multiple image viewer."),Wn.next=68,ru(de,gt.blobList,!1);case 68:case"end":return Wn.stop()}},Ge)}))).apply(this,arguments)}function uu(Ge,de,z,X,ae){return lu.apply(this,arguments)}function lu(){return(lu=u()(a.a.mark(function Ge(de,z,X,ae,fe){var be,Pe,We,Le,je,Qe;return a.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(on.log("package to BlobItem"),de.config.scannerViewer.enableBorderDetection){tt.next=5;break}be={},tt.next=12;break;case 5:if(!z){tt.next=9;break}be=z,tt.next=12;break;case 9:return tt.next=11,Bs(X,!0,de);case 11:be=tt.sent;case 12:return Pe=be.cornerPoints,We=R(de,"config.scannerViewer"),je=void 0===(Le=We.polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:Le,on.log("get detected preview"),tt.next=18,fp(X,Pe,je,fe);case 18:return Qe=tt.sent,on.log("get detected preview ok"),ae&&(de.setImageDataBack(X.imageData),delete X.imageData),tt.abrupt("return",new St({oriBlob:Qe.result,preview:Qe.preview,detectArea:Pe}));case 22:case"end":return tt.stop()}},Ge)}))).apply(this,arguments)}function cu(Ge){if(!Ge)return[];for(var de=0;de<Ge.length;de++)Ge[de]=Math.fround(Ge[de]);return Ge}function Ui(Ge){var de={value:Number.MAX_VALUE,idx:-1},z={value:Number.MAX_VALUE,idx:-1};if(!Ge)return[];for(var X=0;X<Ge.length;X+=2){var ae=Ge[X];ae<=de.value?(z=de,de={value:ae,idx:X}):ae<=z.value&&(z={value:ae,idx:X})}var fe=Ge[de.idx+1]<Ge[z.idx+1]?de.idx:z.idx;return Ge.slice(fe).concat(Ge.slice(0,fe))}function ac(Ge,de,z){return Ge.map(function(X,ae){if(ae%2==0){var fe=X;return fe=Math.max(0,fe),Math.min(fe,de)}var be=X;return be=Math.max(0,be),Math.min(be,z)})}function fp(Ge,de,z,X){var ae,fe="fe8e14";return z&&v(z.stroke)&&0==z.stroke.indexOf("#")&&(fe=z.stroke.substr(1)),de&&(ae={points:Ui(de),lineWidth:5,strokeColor:fe}),si(Ge,void 0,ae,!1,X,!0).then(function(be){return Ge.imageData=be.src,be})}function si(Ge,de,z,X,ae,fe){var be=void 0,Pe={polygon:be,doPerspective:be,source:{angle:be},output:{orgImage:be,previewImage:be}};return D(Ge,Pe.source),Pe.source.angle=de,z&&(Pe.polygon=z),X&&z&&z.points&&(Pe.doPerspective=!0),!1!==ae&&(Pe.output.orgImage=ae instanceof Object?ae:{quality:85,returnType:g.Enum_ImageType.IT_JPG,returnBlob:!0}),!1!==fe&&(Pe.output.previewImage=fe instanceof Object?fe:{quality:85,width:200,height:200,returnType:g.Enum_ImageType.IT_JPG,returnBlob:!0,nInterplationMethod:5}),g.ImageProcWrapper.createImage(Pe)}function Gi(Ge){var de=Ge%360;return de<0&&(de+=360),de}function ks(Ge){var de=document.querySelectorAll(".preFilter");if(de)for(var z=0;z<de.length;z++){var X=de[z];X&&"IMG"==X.tagName&&X.src&&(Yn.revokeObjectURL(X.src),X.onload=null,X.parentNode.remove())}var ae=document.querySelector(".dcs-filterDropDown");ae&&(Ge.removeGlobalClickEvent(ae),ae.remove())}var on={log:function(Ge,de,z,X){}},Yn={windowURL:window.URL||window.webkitURL,createURL:function(Ge){return v(Ge)?Ge:function(de){if(v(de)||void 0===de)return{type:"string",data:de};if(de instanceof Blob)return{type:"object",data:Yn.createObjectURL(de)};if(de.imageData&&de.imageData instanceof Blob)return{type:"object",data:Yn.createObjectURL(de.imageData)};if(de.imageData){var z=Object.prototype.toString.call(de.imageData);if(/\[object \w+Array\]/.test(z))return{type:"object",data:Yn.createObjectURL(new Blob([de.imageData]))}}else{var X=Object.prototype.toString.call(de);if(/\[object \w+Array\]/.test(X))return{type:"object",data:Yn.createObjectURL(new Blob([de]))}}return/data:image\/\w+;base64/.test(de)?{type:"string",data:de}:(on.log("createURLWithType object:"+de),{type:"object",data:de})}(Ge).data},createObjectURL:function(Ge){if(!Ge)return"";var de=Yn.windowURL.createObjectURL(Ge);return b("createObjectURL:"+de),de},revokeObjectURL:function(Ge){b("revokeObjectURL:"+Ge),v(Ge)&&0==Ge.indexOf("blob:http")&&Yn.windowURL.revokeObjectURL(Ge)}},Ws=function(){function Ge(z,X){this.element=null,this.closeButton=null,this.headerButtons=[],this.footerButtons=[],this.className="",this.pageName="",this.container=null,this.template="",this.lastPage=null,this.nextPage=null,this.isDestroyed=!1,this._dcs=null,this._pagepubsub=new o,this.options=z,this._dcs=X,X.config=X.config||{},X.config.scannerViewer=X.config.scannerViewer||{},X.config.scannerViewer.autoDetect=X.config.scannerViewer.autoDetect||{enableAutoDetect:!1},X.config.scannerViewer.autoScan=X.config.scannerViewer.autoScan||{enableAutoScan:!1},null==X.config.scannerViewer.autoDetect.enableAutoDetect&&(X.config.scannerViewer.autoDetect.enableAutoDetect=!1),null==X.config.scannerViewer.autoScan.enableAutoScan&&(X.config.scannerViewer.autoScan.enableAutoScan=!1)}var de=Ge.prototype;return de.createEl=function(z){if(z.customEl)this.element=z.customEl;else{var X={dcs:this._dcs,page:this};if(this.headerButtons=uc(z.headerButtons,X),this.footerButtons=uc(z.footerButtons,X),!z.customEl){var ae=this.template,fe=document.createElement("div");fe.innerHTML=ae,fe.className=this.className,this.element=fe;var be=this.element,Pe=this.headerButtons,We=this.footerButtons,Le=be.querySelector("header");this.insertButtons(Le,Pe);var je=be.querySelector("footer");this.insertButtons(je,We)}}},de.insertButtons=function(z,X){var ae,fe;z.appendChild((ae=X,fe=document.createDocumentFragment(),ae.forEach(function(be){fe.appendChild(be.element)}),fe))},de.destroy=function(){re(this.headerButtons),re(this.footerButtons),this.headerButtons=[],this.footerButtons=[],this.element&&(this.element.remove(),this.element=null),this.isDestroyed=!0,"homePage"==this.pageName&&(ks(this._dcs),c.emit("video-closed")),this._dcs=null},de.updateButton=function(z,X){for(var ae=[].concat(this.headerButtons,this.footerButtons),fe=0;fe<ae.length;fe++){var be=ae[fe];if(be.name===z)return D(X,be.options),void be.update()}},de.on=function(z,X){this._pagepubsub.on(z,X)},de.once=function(z,X){this._pagepubsub.once(z,X)},de.off=function(z,X){this._pagepubsub.off(z,X)},de.emit=function(z){for(var X,ae=arguments.length,fe=new Array(ae>1?ae-1:0),be=1;be<ae;be++)fe[be-1]=arguments[be];(X=this._pagepubsub).emit.apply(X,[z].concat(fe))},de.emitEx=function(z){for(var X,ae=arguments.length,fe=new Array(ae>1?ae-1:0),be=1;be<ae;be++)fe[be-1]=arguments[be];return(X=this._pagepubsub).emitEx.apply(X,[z].concat(fe))},Ge}();function uc(Ge,de){var z=[];for(var X in Ge)Ge[X]&&z.push(new ie(s()({},Ge[X],{name:X}),de));return z}function re(Ge){Ge.forEach(function(de,z){de.destroy(),Ge[z]=null})}var L=h(2),y=h.n(L),S=h(6),x=(y()(S.a,{insert:"head",singleton:!1}),function(Ge){function de(X,ae){var fe;if((fe=Ge.call(this,X,ae)||this).cropMng=null,fe._resizeMng=null,fe._oldDetectAreaInfo={area:[],w:0,h:0,angle:0},fe._firstRender=!0,fe.pageName="edit",fe._angle=Gi(fe.options.angle),fe._initElement(X),X.isFilterPage&&(fe.options.file.filterValue=Fs(ae)),!fe.cropMng)return m()(fe);var be=ae.config.cropViewer,Pe=(void 0===be?{}:be).polygonStyle;return Pe&&fe.cropMng.setCropStyle({lineColor:Pe.stroke,lineWidth:parseInt(Pe.strokeWidth,10),cornerColor:Pe.stroke,lineDash:Pe.dash}),fe}p()(de,Ge);var z=de.prototype;return z.getOriBlob=function(){return this.options.file.oriBlob},z._initElement=function(X){this.template='\n        <header class="headerButtons"></header>\n        <div class="resultContainer">\n            <div class="dcs-cvsContainer">\n                <img class="cameraEditImage">\n                </div>\n            '+(X.detectArea?"<canvas class='dcs-detectCvs'></canvas>":"")+'\n        </div>\n        <footer class="footerButtons"></footer>\n        ',this.className="dcs-cameraEditPage",this.createEl(X),X.customEl||(this._listenResize(),this._initCanvas(),X.detectArea&&(this.detectArea=[].concat(X.detectArea)),X.isFilterPage||this._initCropManage())},z._initCanvas=function(){var X=this.element,ae=X.querySelector(".dcs-cvsContainer");this.imageElContainer=ae,this.imageEl=ae.children[0],this.detectCvsEl=X.querySelector(".dcs-detectCvs")},z._listenResize=function(){var X=this;this._resizeMng=new he(this.element,function(){setTimeout(function(){X._updateImgCvs(),X.renderForRotate(0)},0)})},z.rotateLeft=function(){this._rotate(-90)},z.rotateRight=function(){this._rotate(90)},z._rotate=function(X){this._angle+=X,this.renderForRotate(X)},z.getAngle=function(){return T(this._angle)?Gi(this._angle):(this._angle=0,0)},z.renderImage=function(){this._drawImage();var X=document.querySelectorAll(".preFilter");if(X)for(var ae=0;ae<X.length;ae++){var fe=X[ae];fe&&"IMG"==fe.tagName&&fe.src&&(fe.style.transform="rotate("+this._angle+"deg)")}},z.render=function(){this._firstRender?this.updateImage(this.options.blob):(this.renderImage(),this._drawDetectArea())},z.renderForRotate=function(X){this.renderImage(),this._drawDetectAreaForRotate(X)},z.destroy=function(){var X,ae,fe,be;ks(this._dcs),Ge.prototype.destroy.call(this),this._resizeMng.dispose(),this._resizeMng=null,null===(X=this.cropMng)||void 0===X||X.dispose(),null===(ae=this.detectCvsEl)||void 0===ae||ae.remove(),this.cropMng=null,this.detectCvsEl=null,null!==(fe=this.imageEl)&&void 0!==fe&&fe.src&&Yn.revokeObjectURL(this.imageEl.src),null===(be=this.imageEl)||void 0===be||be.removeEventListener("load",null),this.imageElContainer=null,this.imageEl=null;var Pe=this.options;if(Pe){var We=Pe.file;We&&(delete We.resBlob,delete We.blob,delete We.preview),delete Pe.blob,delete Pe.iImageData}this.options=null},z.updateImage=function(X){if(X){var ae=Yn.createURL(X),fe=this.imageEl,be=fe;if(be.setAttribute("crossOrigin","anonymous"),be.src!==ae){fe&&fe.src&&fe.src.indexOf("blob")>-1&&Yn.revokeObjectURL(fe.src),be.src=ae;var Pe=this;be.onload=function(){Pe._firstRender=!1,be.onload=null,Pe.render()}}}},z._updateImgCvs=function(){var X=this.detectCvsEl;if(X){var ae=X.getBoundingClientRect(),be=ae.height;X.width=ae.width,X.height=be}},z._calImageArea=function(){var X=this.imageEl,ae=this.imageElContainer.getBoundingClientRect(),Pe=function(We,Le,je,Qe,tt){var qe,at;tt%180==0?(qe=je,at=Qe):(qe=Qe,at=je);var it=Math.min(qe/We,at/Le),dt=Math.fround(it*We),mt=Math.fround(it*Le),yt=Math.floor((qe-dt)/2),gt=Math.floor((at-mt)/2),xt=tt%180==0;return{left:yt,top:gt,width:dt,height:mt,relLeft:xt?yt:gt,relTop:xt?gt:yt,relWidth:xt?dt:mt,relHeight:xt?mt:dt}}(X.naturalWidth,X.naturalHeight,ae.width,ae.height,this.getAngle());return this._imageArea=Pe,Pe},z._drawImage=function(){var X=this.imageEl;if(X){var ae=this._calImageArea();X.width=ae.width,X.height=ae.height,X.style.position="absolute",this.getAngle()%180!=0&&(ae.relLeft+=ae.height/2-ae.width/2,ae.relTop+=ae.width/2-ae.height/2),X.style.left=ae.relLeft+"px",X.style.top=ae.relTop+"px";var fe=this.getAngle();X.style.transform="rotate("+fe+"deg)"}},z._initCropManage=function(){if(!this.cropMng){var X=this.detectCvsEl;X&&(this.cropMng=new q(X),this.cropMng.setCropMode(!0))}},z._drawDetectArea=function(){if(this._setDetectCanvasSize(),this.cropMng&&(this.cropMng.resize(this._imageArea),this.detectArea)){var X=this.cropMng._zoom,ae=W(this.detectArea.slice(),this._angle,Math.fround(this._imageArea.relWidth*X),Math.fround(this._imageArea.relHeight*X));this.cropMng.setCropArea(ae,this._imageArea)}},z._drawDetectAreaForRotate=function(X){var ae;if(this.cropMng&&(ae=this.cropMng.getCropArea()),this._setDetectCanvasSize(),this.cropMng){this.cropMng.resize(this._imageArea);var fe=this.cropMng._zoom,be=W(ae,X,Math.fround(this._imageArea.relWidth*fe),Math.fround(this._imageArea.relHeight*fe));this.cropMng.setCropArea(be,this._imageArea)}},z._setDetectCanvasSize=function(){var X=this.imageEl;if(X){var fe=this._calImageArea().relWidth,be=X.naturalWidth,Pe=X.naturalHeight,We=this._angle%180==0,Le=this.imageElContainer.parentElement.getBoundingClientRect();this._updateDetectCvsSize(0,0,Le.width,Le.height);var tt=(We?be:Pe)/fe;tt<=0&&(tt=1),this.cropMng&&this.cropMng.setZoom(tt)}},z._updateDetectCvsSize=function(X,ae,fe,be){var Pe=this.detectCvsEl;Pe&&(Pe.width=fe,Pe.height=be,Pe.style.cssText="left:"+X+"px;top:"+ae+"px;width:"+fe+"px;height:"+be+"px")},z.getCropManage=function(){return this.cropMng},z.getDetectAreaForNotRotate=function(){if(!this.cropMng)return null;var X=this.cropMng.getCropArea();X=Ui(X=cu(X));var ae=this.cropMng._zoom;return Ui(X=function(fe,be,Pe,We){for(var Le=[],je=Gi(be),Qe=0;Qe<fe.length;Qe+=2){var tt=void 0,qe=void 0,at=fe[Qe],it=fe[Qe+1];90==je?(tt=it,qe=Pe-at):180==je?(tt=Pe-at,qe=We-it):270==je?(tt=We-it,qe=at):(tt=at,qe=it),Le.push(tt,qe)}return Le}(X,this.getAngle(),Math.fround(this._imageArea.relWidth*ae),Math.fround(this._imageArea.relHeight*ae)))},z.isAreaFulfilled=function(X){var ae=this.cropMng;if(!ae)return!1;var fe=this._calImageArea(),Pe=fe.relHeight,We=ae._zoom;return M(X,Math.fround(fe.relWidth*We),Math.fround(Pe*We))},z.toggleFullAreaButton=function(){var X=this.cropMng;if(!X)return!1;var ae=this._calImageArea(),fe=X.getCropArea();fe=Ui(fe=cu(fe));var be,Pe=this.getAngle(),We=Pe,Le=X._zoom,je=Math.fround(ae.relWidth*Le),Qe=Math.fround(ae.relHeight*Le),tt=M(fe,je,Qe);return tt?0===this._oldDetectAreaInfo.area.length?(this._oldDetectAreaInfo={area:[0,0,je-2,0,je-2,Qe-2,0,Qe-2],angle:Pe,w:je,h:Qe},be=this._oldDetectAreaInfo.area):(be=this._oldDetectAreaInfo.area,We=this._oldDetectAreaInfo.angle):(this._oldDetectAreaInfo={area:fe,angle:Pe,w:je,h:Qe},be=[0,0,je,0,je,Qe,0,Qe]),X.setCropArea(be.slice(),ae),We!=Pe&&(on.log("must rotate: "+(Pe-We)),this.renderForRotate(Pe-We)),this.options.file.isFull=!tt,tt},de}(Ws));function W(Ge,de,z,X){for(var ae=[],fe=Gi(de),be=0;be<Ge.length;be+=2){var Pe=void 0,We=void 0,Le=Ge[be],je=Ge[be+1];90==fe?(Pe=z-je,We=Le):180==fe?(Pe=z-Le,We=X-je):270==fe?(Pe=je,We=X-Le):(Pe=Le,We=je),ae.push(Pe,We)}return ae}var j=h(7),ue=(y()(j.a,{insert:"head",singleton:!1}),function(Ge){function de(X,ae){var fe;return(fe=Ge.call(this,X,ae)||this)._initElement(X),fe.pageName=X.pageName?X.pageName:"homePage",fe.attachDefaultEvent(X),fe}p()(de,Ge);var z=de.prototype;return z.attachDefaultEvent=function(X){this.on("onSaveCapture",function(ae,fe,be,Pe,We){return su(fe.dcs,be,Pe,We)})},z._initElement=function(X){this.template='\n        <header></header>\n        <div class="videoContainer"></div>\n        <footer class="buttonList">\n            '+(X.title?'<div class="modeTitle">'+X.title+"</div>":"")+"\n        </footer>\n        ",this.className="dcs-cameraHomePage",this.createEl(X)},de}(Ws)),Se=h(8),De=(y()(Se.a,{insert:"head",singleton:!1}),function(Ge){function de(z,X){var ae;return(ae=Ge.call(this,z,X)||this).pageName="insert",ae}return p()(de,Ge),de.prototype.attachDefaultEvent=function(z){z.onSaveCapture&&this.on("onSaveCapture",z.onSaveCapture)},de}(ue)),K=h(9),ke=(y()(K.a,{insert:"head",singleton:!1}),document.createElement("div"));ke.className="dcs-loading-wrapper",ke.innerHTML='<div class="dcs-loading-content">\n<div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div>\n</div>';var Xe=ke,et=h(14),$e=h.n(et),nt=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],ct={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}};function ut(Ge,de){var z=typeof Symbol<"u"&&Ge[Symbol.iterator]||Ge["@@iterator"];if(z)return(z=z.call(Ge)).next.bind(z);if(Array.isArray(Ge)||(z=function(ae,fe){if(ae){if("string"==typeof ae)return lt(ae,void 0);var be=Object.prototype.toString.call(ae).slice(8,-1);return"Object"===be&&ae.constructor&&(be=ae.constructor.name),"Map"===be||"Set"===be?Array.from(ae):"Arguments"===be||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(be)?lt(ae,void 0):void 0}}(Ge))||de&&Ge&&"number"==typeof Ge.length){z&&(Ge=z);var X=0;return function(){return X>=Ge.length?{done:!0}:{done:!1,value:Ge[X++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lt(Ge,de){(null==de||de>Ge.length)&&(de=Ge.length);for(var z=0,X=new Array(de);z<de;z++)X[z]=Ge[z];return X}function It(){void 0===navigator.mediaDevices&&(location.origin.startsWith("https://")?P(Ee):P(oe)),void 0===navigator.mediaDevices.getUserMedia&&P(ge)}function bt(){return Dt.apply(this,arguments)}function Dt(){return(Dt=u()(a.a.mark(function Ge(){var de,z,X,ae,fe,be,Pe,We,Le;return a.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=3,navigator.mediaDevices.enumerateDevices();case 3:de=je.sent,z=[],X=0,ae=0;case 7:if(!(ae<de.length)){je.next=24;break}if("videoinput"===(fe=de[ae]).kind){je.next=11;break}return je.abrupt("continue",21);case 11:be=!1,Pe=ut(z);case 13:if((We=Pe()).done){je.next=20;break}if(We.value.deviceId!==fe.deviceId){je.next=18;break}return be=!0,je.abrupt("break",20);case 18:je.next=13;break;case 20:be||((Le={}).deviceId=fe.deviceId,Le.label=!fe.label||/^camera\s[0-9]+$/.test(fe.label)?"camera "+X++:fe.label,z.push(Le));case 21:ae++,je.next=7;break;case 24:return je.abrupt("return",z);case 25:case"end":return je.stop()}},Ge)}))).apply(this,arguments)}function wt(Ge,de,z,X,ae,fe,be,Pe){void 0===Pe&&(Pe=!1);var We,Le,je=JSON.parse(JSON.stringify({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:Pe?"user":"environment"}}})),Qe="exact"===X&&!ae;if(de&&(je.video.width=((We={})[Qe?"exact":"ideal"]=de,We)),z&&(je.video.height=((Le={})[Qe?"exact":"ideal"]=z,Le)),fe&&fe.bMobile&&fe.bSafari&&ae){var tt,qe=Math.max(de||1280,z||720);je.video.width=((tt={})[Qe?"exact":"ideal"]=qe,tt),delete je.video.height}if(Ge)delete je.video.facingMode,je.video.deviceId={exact:Ge};else if(be&&!Pe){for(var at,it=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"],dt=function(){var gt=at.value,xt=gt.label.toLowerCase();if(xt&&it.some(function(Lt){return-1!=xt.indexOf(Lt)})&&/\b0(\b)?/.test(xt))return delete je.video.facingMode,je.video.deviceId={ideal:gt.deviceId},"break"},mt=ut(be);!(at=mt()).done&&"break"!==dt(););!je.video.deviceId&&fe.bAndroid&&fe.bHarmonyOS&&(delete je.video.facingMode,je.video.deviceId={ideal:be[be.length-1].deviceId})}if(je.video.facingMode){var yt=je.video.facingMode;yt instanceof Array&&yt.length&&(yt=yt[0]),"environment"===(yt=yt.exact||yt.ideal||yt)&&(je.bFmEnvironment=!!je.video.facingMode)}return je}function Mt(Ge,de,z,X,ae,fe){return Ut.apply(this,arguments)}function Ut(){return(Ut=u()(a.a.mark(function Ge(de,z,X,ae,fe,be){var Pe,We,Le,je,Qe,tt,qe,at;return a.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return Pe={},We=null,Le=null,it.prev=3,je=wt(de,z,X,ae,!1,fe,be),it.next=7,Pt(je,!1,fe,be);case 7:if(We=it.sent){it.next=10;break}return it.abrupt("return",Pe);case 10:if(document&&document.createElement?Le=document.createElement("video"):P(G),Qe="exact"===ae,!fe.bFirefox&&Qe){it.next=16;break}return Le.srcObject=We,it.next=16,Le.play();case 16:Pe.type=ae,Qe?(tt=We.getVideoTracks()[0],(qe=tt.getConstraints())&&qe.width?(Pe.height=qe.height.exact||qe.height,Pe.width=qe.width.exact||qe.width):(at=tt.getSettings(),Pe.height=at.height.exact||at.height,Pe.width=at.width.exact||at.width)):(Pe.height=Le.videoHeight,Pe.width=Le.videoWidth),it.next=23;break;case 20:it.prev=20,it.t0=it.catch(3),this._fireLog("_getResolution exception:"+(it.t0.message||it.t0));case 23:if(!We){it.next=29;break}return fe.bFirefox&&(Le.srcObject=null),it.next=27,We.getTracks().forEach(function(dt){dt.stop()});case 27:We=null,Le=null;case 29:return it.abrupt("return",Pe);case 30:case"end":return it.stop()}},Ge,this,[[3,20]])}))).apply(this,arguments)}function Pt(Ge,de,z,X){return Zt.apply(this,arguments)}function Zt(){return(Zt=u()(a.a.mark(function Ge(de,z,X,ae){return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return"boolean"==typeof de.video&&(de.video={}),fe.prev=1,fe.next=4,navigator.mediaDevices.getUserMedia(de);case 4:return fe.abrupt("return",fe.sent);case 7:if(fe.prev=7,fe.t0=fe.catch(1),!fe.t0.name||"OverconstrainedError"!==fe.t0.name){fe.next=13;break}if(!z){fe.next=12;break}throw fe.t0;case 12:return fe.abrupt("return",null);case 13:return X&&X.bMobile&&X.bSafari?(delete de.video.width,delete de.video.height):de.bFmEnvironment?(delete de.video.facingMode,ae&&ae.length&&(de.video.deviceId={ideal:ae[ae.length-1].deviceId})):de.video=!0,fe.abrupt("return",navigator.mediaDevices.getUserMedia(de));case 15:case"end":return fe.stop()}},Ge,null,[[1,7]])}))).apply(this,arguments)}function _n(Ge,de){for(var z,X=Ge.width,ae=Ge.height,fe=ut(de);!(z=fe()).done;){var be=z.value;if(be.height===ae&&be.width===X)return!0}return!1}function wn(Ge,de){for(var z,X=Ge.width,ae=Ge.height,fe=ut(de);!(z=fe()).done;){var be=z.value;if(be.height===ae&&be.width===X)return be.type}return"ideal"}var fn=function(){function Ge(z,X,ae,fe){this.videoSettings=ct,this._browserInfo=null,this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._isFill=!1,this._isUser=!1,this._useWebgl=!0,this.videoGlCvs=null,this.videoGl=null,this.glImgData=null,this.glCropImgData=null,this._cameraManager=null,this._browserInfo=g.navInfo,!this._browserInfo.bMobile&&this._browserInfo.bSafari?parseInt(this._browserInfo.strBrowserVersion)>=15&&(this._useWebgl=!1):this._browserInfo.bHuaWeiBrowser&&(this._useWebgl=!1),this._cameraInfo=z||{deviceId:"",label:""},this._videoEle=X,this._allCameras=ae}var z,de=Ge.prototype;return de.getFrame=function(){Date.now();var z=this._videoEle.videoWidth,X=this._videoEle.videoHeight;this.videoGlCvs||(this.videoGlCvs=globalThis.OffscreenCanvas?new globalThis.OffscreenCanvas(z,X):document.createElement("canvas"));var ae=this.videoGlCvs,fe=this._useWebgl,be=null;if(fe&&(be=this.videoGl||ae.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})||ae.getContext("experimental-webgl",{alpha:!1,antialias:!1,depth:!1,stencil:!1,preserveDrawingBuffer:!0})),be&&fe||(fe=!1,this.videoGlCvs=document.createElement("canvas"),ae=this.videoGlCvs),ae.width==z&&ae.height==X||(ae.height=X,ae.width=z,be&&be.viewport(0,0,z,X)),fe){if(!this.videoGl){this.videoGl=be;var Pe=be.createShader(be.VERTEX_SHADER);be.shaderSource(Pe,"\nattribute vec4 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nvoid main() {\ngl_Position = a_position;\nv_uv = a_uv;\n}\n"),be.compileShader(Pe),be.getShaderParameter(Pe,be.COMPILE_STATUS);var We=be.createShader(be.FRAGMENT_SHADER);be.shaderSource(We,"\nprecision lowp float;\n\nvarying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main() {\nvec4 sample =  texture2D(u_texture, v_uv);\ngl_FragColor = vec4(sample.b, sample.g, sample.r, 1.0);\n}\n"),be.compileShader(We),be.getShaderParameter(We,be.COMPILE_STATUS);var Le=be.createProgram();be.attachShader(Le,Pe),be.attachShader(Le,We),be.linkProgram(Le),be.getProgramParameter(Le,be.LINK_STATUS),be.useProgram(Le),be.bindBuffer(be.ARRAY_BUFFER,be.createBuffer()),be.bufferData(be.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,1,1,1,-1,-1,0,0,1,-1,1,0]),be.STATIC_DRAW);var je=be.getAttribLocation(Le,"a_position");be.enableVertexAttribArray(je),be.vertexAttribPointer(je,2,be.FLOAT,!1,16,0);var Qe=be.getAttribLocation(Le,"a_uv");be.enableVertexAttribArray(Qe),be.vertexAttribPointer(Qe,2,be.FLOAT,!1,16,8),be.activeTexture(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,be.createTexture()),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_MIN_FILTER,be.NEAREST),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_MAG_FILTER,be.NEAREST),be.uniform1i(be.getUniformLocation(Le,"u_texture"),0)}return(!this.glImgData||this.glImgData.length<z*X*4)&&(this.glImgData=new Uint8Array(z*X*4)),be.texImage2D(be.TEXTURE_2D,0,be.RGBA,be.RGBA,be.UNSIGNED_BYTE,this._videoEle),be.drawArrays(be.TRIANGLE_STRIP,0,4),be.readPixels(0,0,be.drawingBufferWidth,be.drawingBufferHeight,be.RGBA,be.UNSIGNED_BYTE,this.glImgData),this.glImgData}var qe=ae.getContext("2d");return qe.drawImage(this._videoEle,0,0),0===ae.width||0===ae.height?null:((!this.glImgData||this.glImgData.length<ae.width*ae.height*4)&&(this.glImgData=new Uint8Array(ae.width*ae.height*4)),this.glImgData.set(qe.getImageData(0,0,ae.width,ae.height).data),this.glImgData)},de.capture=(z=u()(a.a.mark(function X(ae){var be,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt,yt,gt,xt,Lt;return a.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(void 0===ae&&(ae=!1),on.log("capture"),be=this._videoEle.videoWidth,Pe=this.getVideoSizeInfo(),We=Pe.width,Le=Pe.height,je=Pe.offsetX,Qe=Pe.offsetY,tt=this.getFrame(),qe=!1,at=!1,this.videoGl?at=!0:qe=!0,it={imageData:null,imageWidth:We,imageHeight:Le,rgba:qe,bgra:at},this._isFill){for((!this.glCropImgData||this.glCropImgData.length<We*Le*4)&&(this.glCropImgData=new Uint8Array(We*Le*4)),dt=this.glCropImgData,mt=0,yt=Qe+Le,gt=Qe;gt<yt;gt++)Lt=mt*We*4,dt.set(tt.subarray(xt=4*(gt*be+je),xt+4*We),Lt),mt++;it.imageData=dt.buffer}else it.imageData=tt.buffer;if(ae){Nt.next=14;break}return Nt.next=13,No(it);case 13:return Nt.abrupt("return",Nt.sent);case 14:return Nt.abrupt("return",it);case 15:case"end":return Nt.stop()}},X,this)})),function(X){return z.apply(this,arguments)}),de.setImageDataBack=function(z){on.log("setImageDataBack"),this._isFill?this.glCropImgData=new Uint8Array(z):this.glImgData=new Uint8Array(z)},de.getVideoSizeInfo=function(){var z,X=this._videoEle;if("none"==(null==X||null===(z=X.style)||void 0===z?void 0:z.display))return{width:X.videoWidth,height:X.videoHeight,offsetX:0,offsetY:0};"playing"!==this.getStatus()&&P(ye);var fe=X.getBoundingClientRect(),be=fe.width,Pe=fe.height;0!==be&&0!==Pe||P(pe);var We,Le,je=0,Qe=0,tt=X.videoHeight,qe=X.videoWidth;if(this._isFill){var at=Math.max(be/qe,Pe/tt),it=be/(qe*at),dt=Pe/(tt*at);We=Math.floor(qe*it),Le=Math.floor(tt*dt),je=Math.floor((1-it)/2*qe),Qe=Math.floor((1-dt)/2*tt)}else We=qe,Le=tt;return{width:We,height:Le,offsetX:je,offsetY:Qe}},de.setFillMode=function(z){this._isFill=z,this._videoEle&&(this._videoEle.style.objectFit=z?"cover":"contain")},de.setPlugOut=function(){this._isPlugOut=!0},de._checkPlugOut=function(){this._isPlugOut&&c.emit("video-error",k)},de.getResolutions=function(){var z=u()(a.a.mark(function X(ae){var fe,be,Pe,We,Le,je,Qe,tt,qe,at,it,mt,yt;return a.a.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(void 0===ae&&(ae=!1),!(this._allResolutions.length>0)||ae){gt.next=3;break}return gt.abrupt("return",this._allResolutions);case 3:if(this._cameraInfo){gt.next=5;break}return gt.abrupt("return",null);case 5:fe=[],this._allResolutions=[],be=!1,Pe=!1,gt.prev=9,Le=$e()(nt);case 11:return gt.next=13,Le.next();case 13:if(!(be=!(je=gt.sent).done)){gt.next=32;break}return tt=(Qe=je.value).width,qe=Qe.height,at=Qe.type,gt.next=18,Mt(this._cameraInfo.deviceId,tt,qe,at,this._browserInfo,this._allCameras);case 18:if(mt=(it=gt.sent).height===qe&&it.width===tt||it.height===tt&&it.width===qe,it&&it.height&&mt){gt.next=27;break}return gt.next=24,Mt(this._cameraInfo.deviceId,tt,qe,"ideal",this._browserInfo,this._allCameras);case 24:return(yt=gt.sent)&&yt.height&&!_n({width:yt.width,height:yt.height},fe)&&(delete yt.type,fe.push(yt)),gt.abrupt("continue",29);case 27:delete it.type,fe.push(it);case 29:be=!1,gt.next=11;break;case 32:gt.next=38;break;case 34:gt.prev=34,gt.t0=gt.catch(9),Pe=!0,We=gt.t0;case 38:if(gt.prev=38,gt.prev=39,!be||null==Le.return){gt.next=43;break}return gt.next=43,Le.return();case 43:if(gt.prev=43,!Pe){gt.next=46;break}throw We;case 46:return gt.finish(43);case 47:return gt.finish(38);case 48:return this._allResolutions=fe,gt.abrupt("return",fe);case 50:case"end":return gt.stop()}},X,this,[[9,34,38,48],[39,,43,47]])}));return function(X){return z.apply(this,arguments)}}(),de.setResolution=function(){var z=u()(a.a.mark(function X(ae,fe){return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!this.playing()){be.next=2;break}return be.abrupt("return",this.play(ae,fe,this._cameraManager));case 2:return this._curResolution={width:ae,height:fe},be.abrupt("return",this._curResolution);case 4:case"end":return be.stop()}},X,this)}));return function(X,ae){return z.apply(this,arguments)}}(),de.getCurrentResolution=function(){return this._curResolution},de.getCameraInfo=function(){return this._cameraInfo},de.destroy=function(){this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null,this._browserInfo=null,this.videoGlCvs=null},de.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._videoEle.srcObject.getTracks().forEach(function(z){z.stop()}),this._videoEle.srcObject=null,this._videoTrack=null)},de.getDeviceId=function(z){if(z){var X=z.getVideoTracks();if(X.length)return this._videoTrack=X[0],this._videoTrack.getSettings().deviceId}return""},de.updateCameraInfo=function(z){var X={};if(z){var ae=z.getVideoTracks();if(ae.length){this._videoTrack=ae[0];var fe={deviceId:(X=this._videoTrack.getSettings()).deviceId,label:this._videoTrack.label};this._cameraInfo=fe}}return X},de.getBestMediaStream=function(){var z=u()(a.a.mark(function X(ae,fe,be){var Pe,We,Le,je,Qe;return a.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return this.videoSettings=wt(this._cameraInfo.deviceId,ae,fe,be,!0,this._browserInfo,this._allCameras,this._isUser),Pe=this.videoSettings,tt.prev=2,tt.next=5,Pt(Pe,!0,this._browserInfo,this._allCameras);case 5:if(Le=this.getDeviceId(We=tt.sent),!this._cameraManager||!Pe.bFmEnvironment||this._isUser){tt.next=21;break}return tt.next=10,this._cameraManager.getAllCamerasInfo();case 10:if(this._allCameras=tt.sent,this.videoSettings=wt(this._cameraInfo.deviceId,ae,fe,be,!0,this._browserInfo,this._allCameras,this._isUser),"boolean"==typeof(Pe=this.videoSettings).video&&(Pe.video={}),(je=Pe.video.deviceId)&&(je=je.exact||je.ideal||je),!(je&&Le.length>0&&Le!=je)){tt.next=21;break}return We.getTracks().forEach(function(qe){qe.stop()}),tt.next=20,Pt(Pe,!0,this._browserInfo,this._allCameras);case 20:We=tt.sent;case 21:return Qe=this.updateCameraInfo(We),tt.abrupt("return",{settings:Qe,stream:We});case 25:tt.prev=25,tt.t0=tt.catch(2),P("NotAllowedError"===tt.t0.name||"Permission denied"===tt.t0.message?U:H);case 28:case"end":return tt.stop()}},X,this,[[2,25]])}));return function(X,ae,fe){return z.apply(this,arguments)}}(),de.play=function(){var z=u()(a.a.mark(function X(ae,fe,be){var Pe,We,je,Qe,tt,at;return a.a.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return(Pe=this._videoEle)||P(G),this._cameraManager=be,this._checkPlugOut(),We=this._curResolution,"number"==typeof ae&&ae>0&&"number"==typeof fe&&fe>0||(ae=We?We.width:1280,fe=We?We.height:720),je=wn({width:ae,height:fe},this._allResolutions),this.stop(),it.next=10,this.getBestMediaStream(ae,fe,je);case 10:return tt=(Qe=it.sent).settings,Pe.srcObject=Qe.stream,it.next=16,new Promise(function(dt){Pe.onloadedmetadata=function(mt){dt(mt)}});case 16:return it.prev=16,it.next=19,Pe.play();case 19:it.next=27;break;case 21:return it.prev=21,it.t0=it.catch(16),it.next=25,new Promise(function(dt){setTimeout(dt,1e3)});case 25:return it.next=27,Pe.play();case 27:return at={width:Pe.videoWidth,height:Pe.videoHeight},tt.width&&tt.height&&(tt.width===ae&&tt.height===fe||tt.width===fe&&tt.height===ae)&&(at.width=ae,at.height=fe),this._curResolution=at,c.emit("onPlayed",Pe),it.abrupt("return",at);case 32:case"end":return it.stop()}},X,this,[[16,21]])}));return function(X,ae,fe){return z.apply(this,arguments)}}(),de.pause=function(){this._videoEle&&this._videoEle.pause()},de.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},de.paused=function(){return!!this._videoEle&&this._videoEle.paused},de.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var z=this._videoEle.srcObject;if(z){var X=z.getVideoTracks();if(X&&0!==X.length)return!0}}catch(ae){P(ae)}return!1},de.getStatus=function(){return this.playing()?this.paused()?"paused":"playing":"stopped"},de.getVideoSetting=function(){return this.videoSettings},de.toggleCamera=function(z,X,ae){return this._isUser=!this._isUser,this._cameraInfo.deviceId="",this.play(z,X,ae)},Ge}(),Sn=h(10),qn=(y()(Sn.a,{insert:"head",singleton:!1}),function(){function Ge(z){this._cameraPermission=!1,this._allCamerasInfo=[],this.selectedCamera=null,this.videoEl=null,this._trackCameraDeviceChanged(),this._initEl(z),c.on("onPlayed",function(X){wr(X)})}var z,de=Ge.prototype;return de.selectCamera=(z=u()(a.a.mark(function X(ae){var fe,be,Pe,We,Le;return a.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(this._allCamerasInfo.length){je.next=3;break}return je.next=3,this.getAllCamerasInfo();case 3:if(fe=this._allCamerasInfo,ae||(ae=new fn(null,this.videoEl,fe)),be=null,!v(ae)){je.next=21;break}Pe={deviceId:"",label:""},We=0;case 9:if(!(We<fe.length)){je.next=19;break}if(ae!==(Le=fe[We]).deviceId){je.next=16;break}return Pe.deviceId=Le.deviceId,Pe.label=Le.label,be=new fn(Pe,this.videoEl,fe),je.abrupt("break",19);case 16:We++,je.next=9;break;case 19:je.next=22;break;case 21:ae instanceof fn&&(be=ae);case 22:return this.selectedCamera&&this.selectedCamera.destroy(),this.selectedCamera=be,je.abrupt("return",be);case 25:case"end":return je.stop()}},X,this)})),function(X){return z.apply(this,arguments)}),de.closeCamera=function(){this.selectedCamera&&(this.selectedCamera.destroy(),this.selectedCamera=null)},de.getCurrentCamera=function(){return this.selectedCamera},de.destroy=function(){c.off("onCameraChanged")},de.getAllCamerasInfo=function(){var z=u()(a.a.mark(function X(){return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return It(),fe.next=3,bt();case 3:return this._allCamerasInfo=fe.sent,fe.abrupt("return",this._allCamerasInfo);case 6:case"end":return fe.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de._trackCameraDeviceChanged=function(){var z=this;void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(X){z._cameraChangedHandler(X)})},de._initEl=function(z){if(z)this.videoEl=z;else{var X=document.createElement("video");X.className="dcs-cameraVideo",X.playsInline=!0,X.muted=!0,this.videoEl=X}},de._cameraChangedHandler=function(z){},de._requestCamera=function(){var z=u()(a.a.mark(function X(){return a.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return It(),0===this._allCamerasInfo.length&&c.emit("onThrowError",Q),ae.next=4,this._checkAllowCamera();case 4:case"end":return ae.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de._checkAllowCamera=function(){var z=u()(a.a.mark(function X(){return a.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:case"end":return ae.stop()}},X)}));return function(){return z.apply(this,arguments)}}(),de.requestCamera=function(){var z=u()(a.a.mark(function X(){return a.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:case"end":return ae.stop()}},X)}));return function(){return z.apply(this,arguments)}}(),Ge.cameraExist=function(z,X){return!0},Ge}());function wr(Ge,de,z){if(Ge){var X,ae,fe=Ge.style.objectFit;de&&z?(X=de,ae=z):(X=Ge.videoWidth,ae=Ge.videoHeight);var be=Ge.getBoundingClientRect(),Pe=be.width,We=be.height,Le={zoom:1,left:0,top:0};if("cover"===fe){var je=Math.max(Pe/X,We/ae);Le.zoom=je}else{var Qe=Math.min(Pe/X,We/ae),tt=(Pe-X*Qe)/2,qe=(We-ae*Qe)/2;Le.zoom=Qe,Le.left=tt,Le.top=qe}Ge.videoLayout=Le}}var jt,Ge,mr=function(){function Ge(z){this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null,this._srcVideoInfo=null,this._observer=null,this._videoEl=z,this._showCanvas=this.createCameraCanvas()}var de=Ge.prototype;return de.createCameraCanvas=function(){var z=document.createElement("canvas");return z.className="dcs-cameraCvs",z},de.getCameraDvs=function(){return this._showCanvas},de.resetVideoInfo=function(){if(g.navInfo.bMobile&&(g.navInfo.biPhone||g.navInfo.biPad)){var z=window.orientation;this._srcVideoInfo={videoWidth:this._videoEl.videoWidth,videoHeight:this._videoEl.videoHeight,orientation:z=0==z||180==z?0:90}}},de.bindView=function(z){var X;if(!(X=v(z)?document.getElementById(z):z))return!1;var ae=this._showCanvas,fe=this._videoEl;fe.parentElement?.remove();var Pe=document.createElement("div");Pe.className="dcs-cameraContainer",Pe.appendChild(fe),Pe.appendChild(ae),this._containerEl=Pe,X.appendChild(Pe),this.updateCanvasRect();var We=this;return this._obEl=new he(Pe,function(Le){var je,Qe;if(g.navInfo.bMobile&&(g.navInfo.biPhone||g.navInfo.biPad)&&We._videoEl.videoWidth>0&&We._videoEl.videoHeight>0){var tt=window.orientation;tt=0==tt||180==tt?0:90,We._srcVideoInfo?tt==We._srcVideoInfo.orientation?(je=We._srcVideoInfo.videoWidth,Qe=We._srcVideoInfo.videoHeight):(Qe=We._srcVideoInfo.videoHeight,je=We._srcVideoInfo.videoWidth):(We._srcVideoInfo={videoWidth:We._videoEl.videoWidth,videoHeight:We._videoEl.videoHeight,orientation:tt},je=We._srcVideoInfo.videoWidth,Qe=We._srcVideoInfo.videoHeight)}wr(We._videoEl,je,Qe),We.updateCanvasRect(),c.emit("uiResize",Le)}),!0},de.updateCanvasRect=function(){this._showCanvas&&(this._showCanvas.width=this._showCanvas.getBoundingClientRect().width,this._showCanvas.height=this._showCanvas.getBoundingClientRect().height)},de.unbindView=function(){this._obEl&&(this._obEl.dispose(),this._obEl=null);var z=this._containerEl;return!!z&&(z.remove(),!0)},de.dispose=function(){var z;this.unbindView(),this._showCanvas.width=1,this._showCanvas.height=1,null===(z=this._showCanvas)||void 0===z||z.remove(),this._showCanvas=null,this._containerEl=null,this._videoEl=null,this._obEl=null},Ge}(),Kn=h(15),er=h.n(Kn),Cn=function(){function Ge(){this.path=[],this._currentPage=null}var de=Ge.prototype;return de.navigateTo=function(z){this.path.push(z),this.currentPage=z},de.redirectTo=function(z){this.closeAll(),this.navigateTo(z)},de.redirectToHome=function(){this.navigateBack(this.path.length-1)},de.navigateBack=function(z){void 0===z&&(z=1);for(var X=this.path;z>0;)En(X.pop()),z--;return this.currentPage=X[X.length-1],this.currentPage},de.closeAll=function(){this.path.forEach(function(z){En(z)}),this.path=[],this.currentPage=null},de.hideAllPages=function(){this.path.forEach(function(z){var X;null===(X=z.element)||void 0===X||X.classList.add("dcs-display-none")})},de.showAllPages=function(){this.path.forEach(function(z){var X;null===(X=z.element)||void 0===X||X.classList.remove("dcs-display-none")})},de.showHomePage=function(z,X){var ae,fe=(ae={load:Be(),toggleCamera:{icon:"dcs-font dcs-i-switch",onclick:function(Le,je){var Qe=je.dcs;Qe.emit("blurPage"),Qe.showLoading("switch camera button click");var tt=Qe.config.scannerViewer.resolution.defaultValue;Qe.toggleCamera(tt.width,tt.height).finally(function(){Qe.hideLoading("switch camera button click"),Qe.emit("focusPage")})},className:"dcs-btn-toggleCamera",text:"Switch Camera"},capture:{icon:"dcs-font dcs-i-capture",className:"dcs-btn-captureBtn",onclick:function(Le,je){je.dcs.captureLoop.startManualCapture(je)}},autoCapture:{icon:"dcs-font dcs-i-autoCapture",className:"dcs-btn-autoCapture",onmount:function(Le,je){var Qe=je.dcs,tt=je.page;Qe.captureLoop&&(Qe.captureLoop.setEnable(),Qe.once("onPlayed",function(){Qe.captureLoop&&Qe.captureLoop.startLoop(je)}),Qe.once("video-closed",function(){Qe.captureLoop&&Qe.captureLoop.stopCaptureLoop()}),"homePage"==tt.pageName?(Qe.config.scannerViewer.autoScan&&(Qe.captureLoop.loadLoopTypeFromConfig(),Qe.captureLoop.clearCaptureTimer()),Qe.on("blurPage",function(){Qe.captureLoop&&Qe.captureLoop.isEnable()&&(Qe.captureLoop.saveLoopTypeToConfig(),Qe.captureLoop.stopCaptureLoop(),Qe.captureLoop.setDisable())}),Qe.on("focusPage",function(){Qe.captureLoop&&(Qe.captureLoop.setEnable(),Qe.config.scannerViewer.autoScan.enableAutoScan?Qe.captureLoop.setAutoScan():Qe.captureLoop.changeStyle())})):Qe.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Le,je){Le?(je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0,je.dcs.config.scannerViewer.autoScan.enableAutoScan=!0):je.dcs.config.scannerViewer.autoScan.enableAutoScan=!1,je.dcs.captureLoop.loadLoopTypeFromConfig(),je.dcs.captureLoop.startLoop(je)}},multipleBtn:{onclick:Ve,onmount:function(Le){Le.innerHTML='<img class="previewImg">\n         <div class="imgCount">0</div>\n         <div class="nextArr dcs-font dcs-i-back"></div>\n        ',on.log(Le)},className:"dcs-btn-multipleImg dcs-hidden",text:"Continuous"},continuous:{icon:"dcs-font dcs-i-continuous",onclick:ze,onmount:function(Le,je){je.page.options.continuous&&Le.classList.add("dcs-selected")},className:"dcs-btn-continuousMode",text:"Continuous"}},{continuous:!1,resolution:{width:1280,height:720},file:{},deviceId:"",headerButtons:{changeResBtn:ve(),autoDetect:{icon:"dcs-font dcs-i-autoDetect",onmount:function(Le,je){var Qe=je.dcs,tt=je.page;Qe.captureLoop&&(Qe.captureLoop.setEnable(),Qe.once("onPlayed",function(){Qe.captureLoop&&Qe.captureLoop.startLoop(je)}),Qe.once("video-closed",function(){Qe.captureLoop&&Qe.captureLoop.stopCaptureLoop()}),"homePage"==tt.pageName?(Qe.config.scannerViewer.autoDetect&&(Qe.captureLoop.loadLoopTypeFromConfig(),Qe.captureLoop.clearCaptureTimer()),Qe.on("blurPage",function(){Qe.captureLoop&&Qe.captureLoop.isEnable()&&(Qe.captureLoop.saveLoopTypeToConfig(),Qe.captureLoop.stopCaptureLoop(),Qe.captureLoop.setDisable())}),Qe.on("focusPage",function(){Qe.captureLoop&&(Qe.captureLoop.setEnable(),Qe.config.scannerViewer.autoDetect.enableAutoDetect&&!Qe.config.scannerViewer.autoScan.enableAutoScan?Qe.captureLoop.setAutoDetect():Qe.captureLoop.changeStyle())})):Qe.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Le,je){Le?je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0:(je.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,je.dcs.config.scannerViewer.autoScan.enableAutoScan=!1),je.dcs.captureLoop.loadLoopTypeFromConfig(),je.dcs.captureLoop.startLoop(je)},className:"dcs-btn-detectCamera"},closeBtn:ot()},footerButtons:ae,fill:!1});D(z,fe);var be=new ue(fe,X);this.navigateTo(be);var Pe=document.querySelector(".dcs-btn-multipleImg");if(Pe)if(X.config.scannerViewer.continuousScan.visibility)Pe.style.top="-67px",Pe.style.right="18px",Pe.style.position="absolute";else{Pe.style.top="0",Pe.style.right="0",Pe.style.position="relative";var We=document.querySelector(".dcs-btn-continuousMode");We&&(We.className="",We.appendChild(Pe))}return be},de.showInsertPage=function(z,X){var ae,fe=(ae={load:Be(),toggleCamera:{icon:"dcs-font dcs-i-switch",onclick:function(Pe,We){var Le=We.dcs;Le.emit("blurPage"),Le.showLoading("switch camera button click");var je=Le.config.scannerViewer.resolution.defaultValue;Le.toggleCamera(je.width,je.height).finally(function(){Le.hideLoading("switch camera button click"),Le.emit("focusPage")})},className:"dcs-btn-toggleCamera",text:"Switch Camera"},capture:{icon:"dcs-font dcs-i-capture",className:"dcs-btn-captureBtn",onclick:function(Pe,We){We.dcs.captureLoop.startManualCapture(We)}},autoCapture:{icon:"dcs-font dcs-i-autoCapture",className:"dcs-btn-autoCapture",onmount:function(Pe,We){var Le=We.dcs,je=We.page;Le.captureLoop&&(Le.captureLoop.setEnable(),Le.once("onPlayed",function(){Le.captureLoop&&Le.captureLoop.startLoop(We)}),Le.once("video-closed",function(){Le.captureLoop&&Le.captureLoop.stopCaptureLoop()}),"homePage"==je.pageName?(Le.config.scannerViewer.autoScan&&(Le.captureLoop.loadLoopTypeFromConfig(),Le.captureLoop.clearCaptureTimer()),Le.on("blurPage",function(){Le.captureLoop&&Le.captureLoop.isEnable()&&(Le.captureLoop.saveLoopTypeToConfig(),Le.captureLoop.stopCaptureLoop(),Le.captureLoop.setDisable())}),Le.on("focusPage",function(){Le.captureLoop&&(Le.captureLoop.setEnable(),Le.config.scannerViewer.autoScan.enableAutoScan?Le.captureLoop.setAutoScan():Le.captureLoop.changeStyle())})):Le.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Pe,We){Pe?(We.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0,We.dcs.config.scannerViewer.autoScan.enableAutoScan=!0):We.dcs.config.scannerViewer.autoScan.enableAutoScan=!1,We.dcs.captureLoop.loadLoopTypeFromConfig(),We.dcs.captureLoop.startLoop(We)}}},{continuous:!1,resolution:{width:1280,height:720},file:{},deviceId:"",headerButtons:{changeResBtn:ve(),autoDetect:{icon:"dcs-font dcs-i-autoDetect",onmount:function(Pe,We){var Le=We.dcs,je=We.page;Le.captureLoop&&(Le.captureLoop.setEnable(),Le.once("onPlayed",function(){Le.captureLoop&&Le.captureLoop.startLoop(We)}),Le.once("video-closed",function(){Le.captureLoop&&Le.captureLoop.stopCaptureLoop()}),"homePage"==je.pageName?(Le.config.scannerViewer.autoDetect&&(Le.captureLoop.loadLoopTypeFromConfig(),Le.captureLoop.clearCaptureTimer()),Le.on("blurPage",function(){Le.captureLoop&&Le.captureLoop.isEnable()&&(Le.captureLoop.saveLoopTypeToConfig(),Le.captureLoop.stopCaptureLoop(),Le.captureLoop.setDisable())}),Le.on("focusPage",function(){Le.captureLoop&&(Le.captureLoop.setEnable(),Le.config.scannerViewer.autoDetect.enableAutoDetect&&!Le.config.scannerViewer.autoScan.enableAutoScan?Le.captureLoop.setAutoDetect():Le.captureLoop.changeStyle())})):Le.captureLoop.loadLoopTypeFromConfig())},onSelected:function(Pe,We){Pe?We.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0:(We.dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,We.dcs.config.scannerViewer.autoScan.enableAutoScan=!1),We.dcs.captureLoop.loadLoopTypeFromConfig(),We.dcs.captureLoop.startLoop(We)},className:"dcs-btn-detectCamera"},closeBtn:ot()},footerButtons:ae,fill:!1});D(z,fe);var be=new De(fe,X);return this.navigateTo(be),be},de.showEditPage=function(z,X){var Pe,ae={blob:null,footerButtons:{rotateLeft:{icon:"dcs-font dcs-i-rotateLeft",className:"dcs-btn-rotateLeft",onclick:function(We,Le){Le.page.rotateLeft()}},rotateRight:{icon:"dcs-font dcs-i-rotateRight",className:"dcs-btn-rotateRight",onclick:function(We,Le){Le.page.rotateRight()}},toggleFullArea:Ae(X),save:{icon:"dcs-font dcs-i-save",className:"dcs-btn-save",onclick:function(We,Le){!function(je,Qe){Ne.apply(this,arguments)}(Le.page,Le.dcs)}}},headerButtons:{backBtn:{icon:"dcs-font dcs-i-back",className:"dcs-btn-backBtn",onclick:(Pe=u()(a.a.mark(function We(Le,je){var Qe,tt;return a.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if((Qe=je.dcs).navigateBack(),Qe.multipleView){qe.next=18;break}if(Qe.showLoading("play camera"),"playing"!=(tt=Qe.getStatus())){qe.next=8;break}qe.next=15;break;case 8:if("paused"!=tt){qe.next=12;break}Qe.hidden()||Qe.resume(),qe.next=15;break;case 12:if(Qe.hidden()){qe.next=15;break}return qe.next=15,Qe.play();case 15:Qe.hidden()||Qe.emit("resetResolution"),Qe.hideLoading("play camera"),Qe.emit("focusPage");case 18:case"end":return qe.stop()}},We)})),function(We,Le){return Pe.apply(this,arguments)})}},file:{},continuous:!1};D(z,ae),ae.detectArea||(ae.footerButtons.toggleFullArea=null);var fe=new x(ae,X);return this.navigateTo(fe),fe},er()(Ge,[{key:"currentPage",get:function(){return this._currentPage},set:function(z){var X=this._currentPage;this._currentPage=z,X&&X instanceof ue?X._dcs&&X._dcs.emit("blurPage"):z&&z instanceof ue&&z._dcs&&z._dcs.isHome()&&z._dcs.emit("focusPage"),function(ae){mn.apply(this,arguments)}(z),X&&!z&&X._dcs&&(X._dcs.off("blurPage"),X._dcs.off("focusPage"))}}]),Ge}(),Fr=function(){function Ge(){this.err=null,this._init()}var de=Ge.prototype;return de._init=function(){var z=this;c.on("error",function(X){var ae=new Error(X.message);ae.code=X.code,z._throwErr(ae)}),c.on("typeError",function(X,ae){var fe=new Error("Argument of type '"+X+"' is not assignable to parameter of type '"+ae+"'.");fe.code=-4212,z._throwErr(fe)}),c.on("valueError",function(X,ae){var fe=new Error("The argument '"+X+"' is not valid for the parameter '"+ae+"'");fe.code=-4213,z._throwErr(fe)})},de._throwErr=function(z){throw this.err=z,z},Ge}();(Ge=jt||(jt={}))[Ge.None=0]="None",Ge[Ge.AutoScan=1]="AutoScan",Ge[Ge.AutoDetect=2]="AutoDetect";var Ii=function(){function Ge(z){this.isLooping=!1,this._dcs=null,this._cameraCvs=null,this._enabled=!1,this._loopType=jt.None,this.loopTimer=null,this.lastConfirmTime=0,this.lastDetectTime=(new Date).getTime(),this._captureLoopSub=new o,this._oldLoopType=[],this._dcs=z}var z,de=Ge.prototype;return de.dispose=function(){this._loopType=jt.None,this.clearCaptureTimer(),this._dcs=null,this._captureLoopSub=null,this._cameraCvs=null},de.resetLastConfirmTime=function(){this.lastConfirmTime=0},de.setAutoScan=function(){this.innerSetNextLoopType(jt.AutoScan)},de.setAutoDetect=function(){this.innerSetNextLoopType(jt.AutoDetect)},de.innerSetNextLoopType=function(z){this._loopType==Ge.EnumLoopType_ManualScan?0==this._oldLoopType.length?this._oldLoopType.push(z):this._oldLoopType[0]=z:(this._loopType=z,this.changeStyle(),this.clearCaptureTimer(),this.startLoop({dcs:this._dcs,page:this._dcs.getCurrentPage()}))},de.saveLoopTypeToConfig=function(){this._loopType==jt.AutoScan?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!0,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this._loopType==jt.AutoDetect?(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):(this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1)},de.loadLoopTypeFromConfig=function(){this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoScan.enableAutoScan?(this._loopType=jt.AutoScan,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!0):this.isAutoButtonEnabled()&&this._dcs.config.scannerViewer.autoDetect.enableAutoDetect?this._loopType=jt.AutoDetect:(this._loopType=jt.None,this._dcs.config.scannerViewer.autoDetect.enableAutoDetect=!1,this._dcs.config.scannerViewer.autoScan.enableAutoScan=!1),this.changeStyle()},de.getLoopType=function(){return this._loopType},de._setLoopType=function(z){this._loopType=z},de.setIsLooping=function(z){this.isLooping=z},de.getIsLooping=function(){return this.isLooping},de.setEnable=function(){this.isAutoButtonEnabled()&&(this._enabled=!0)},de.setDisable=function(){this._enabled=!1},de.isEnable=function(){return this._enabled},de.isAutoButtonDisabled=function(){return 1!=this._dcs.config.scannerViewer.enableBorderDetection},de.isAutoButtonEnabled=function(){return 1==this._dcs.config.scannerViewer.enableBorderDetection},de.startManualCapture=function(z){var ae,X=this;on.log("startManualCapture"),this._oldLoopType.push(this._loopType),this._captureLoopSub.once("onCapturedImage",(ae=u()(a.a.mark(function fe(be,Pe,We){var Le,je;return a.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Le={dcs:be,page:be.getCurrentPage()},Qe.prev=1,0==Le.page.options.continuous&&X.loadLoopTypeFromConfig(),Qe.next=5,Le.page.emitEx("onSaveCapture",!1,Le,Pe,!0,We);case 5:Qe.next=12;break;case 7:Qe.prev=7,Qe.t0=Qe.catch(1),on.log("manual capture error."),on.log(Qe.t0),702==Qe.t0.code&&(be.hideLoading("startManualCapture 1"),P(Qe.t0));case 12:if(!be.captureLoop){Qe.next=28;break}if(!((je=be.captureLoop._oldLoopType).length<=0)){Qe.next=19;break}return on.log("manual capture stack error."),be.captureLoop._loopType=jt.None,be.hideLoading("startManualCapture 2"),Qe.abrupt("return");case 19:if(be.captureLoop._loopType=je.pop(),be.captureLoop.resetLastConfirmTime(),!be.captureLoop.loopTypeIsManualScan()){Qe.next=25;break}return be.captureLoop.innerLoop(Le),be.hideLoading("startManualCapture 3"),Qe.abrupt("return");case 25:be.hideLoading("startManualCapture 4"),be.captureLoop.innerLoop(Le),be.captureLoop.changeStyle();case 28:case"end":return Qe.stop()}},fe,null,[[1,7]])})),function(fe,be,Pe){return ae.apply(this,arguments)})),this.lastConfirmTime=(new Date).getTime(),this.loopTypeIsManualScan()||(this._loopType=Ge.EnumLoopType_ManualScan,this._dcs.showLoading("startManualCapture start loop"),this.isLooping||(this.clearCaptureTimer(),this.innerLoop(z)))},de.startLoop=function(z){on.log("startLoop"),this.isAutoButtonDisabled()&&(this._loopType=jt.None),this._loopType==jt.AutoScan||this._loopType==jt.AutoDetect?null==this.loopTimer&&(this.lastConfirmTime=0,this.isLooping||(this.clearCaptureTimer(),this.innerLoop(z))):(this.stopCaptureLoop(),this._dcs.hideLoading("startLoop")),this.changeStyle()},de.changeStyle=function(){var z,X,ae=null===(z=this._dcs)||void 0===z||null===(X=z.getCurrentPage())||void 0===X?void 0:X.element;if(ae){var fe=ae.querySelector(".dcs-btn-autoCapture"),be=ae.querySelector(".dcs-btn-captureBtn"),Pe=ae.querySelector(".dcs-btn-detectCamera");if(this.isAutoButtonDisabled())return fe&&(fe.classList.remove("dcs-selected"),fe.classList.add("dcs-disable"),fe.bSelected=!1),Pe&&be.classList.remove("dcs-capturing"),void(Pe&&(Pe.classList.remove("dcs-selected"),Pe.classList.add("dcs-disable"),Pe.bSelected=!1));this._loopType==jt.AutoScan?(fe&&(fe.classList.add("dcs-selected"),fe.bSelected=!0),Pe&&be.classList.add("dcs-capturing"),Pe&&(Pe.classList.add("dcs-selected"),Pe.bSelected=!0)):this._loopType==jt.AutoDetect?(fe&&(fe.classList.remove("dcs-selected"),fe.bSelected=!1),Pe&&be.classList.remove("dcs-capturing"),Pe&&(Pe.classList.add("dcs-selected"),Pe.bSelected=!0)):(fe&&(fe.classList.remove("dcs-selected"),fe.classList.remove("dcs-disable"),fe.bSelected=!1),Pe&&be.classList.remove("dcs-capturing"),Pe&&(Pe.classList.remove("dcs-selected"),Pe.classList.remove("dcs-disable"),Pe.bSelected=!1))}},de.getDetectRemainTime=function(){var z=(new Date).getTime(),X=R(this._dcs,"config.scannerViewer.autoDetect").fpsLimit;return Math.max(0,1e3/(void 0===X?3:X)-(z-this.lastDetectTime))},de.loopTypeIsNone=function(){return this._loopType==jt.None},de.loopTypeIsManualScan=function(){return this._loopType==Ge.EnumLoopType_ManualScan},de.innerLoop=function(z){var X=this,ae=z.dcs,fe=ae.areaDetectFn,be=this.getDetectRemainTime();if(fe)return this.loopTypeIsNone()?this.exitAutoCaptureFromInner(0):void((this._loopType!=jt.AutoScan&&this._loopType!=jt.AutoDetect||this.isEnable())&&(clearTimeout(this.loopTimer),this.loopTimer=setTimeout(u()(a.a.mark(function Pe(){var We;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!X.loopTypeIsNone()){Le.next=2;break}return Le.abrupt("return",X.exitAutoCaptureFromInner(1));case 2:if(!X.isLooping){Le.next=4;break}return Le.abrupt("return");case 4:return X.isLooping=!0,Le.next=7,X.innerLoopTimeout(z);case 7:We=Le.sent,X.isLooping=!1,We&&(X._loopType==jt.AutoScan||X._loopType==jt.AutoDetect)&&X.isEnable()?setTimeout(function(){ae.captureLoop&&(ae.captureLoop._loopType!=jt.AutoScan&&ae.captureLoop._loopType!=jt.AutoDetect||!ae.captureLoop.isEnable()||ae.captureLoop.innerLoop(z))},10):X.clearCaptureTimer();case 10:case"end":return Le.stop()}},Pe)})),be)))},de.innerLoopTimeout=(z=u()(a.a.mark(function X(ae){var fe,be,Pe,We,Le,je,Qe,tt,qe,at,it,dt,mt,yt,Lt,Nt;return a.a.wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(fe=ae.dcs,this.lastDetectTime=(new Date).getTime(),We=void 0===(Pe=(be=fe.config.scannerViewer).polygonStyle)?{stroke:"#fe8e14",strokeWidth:"2px",dashed:"solid"}:Pe,je=void 0===(Le=be.autoDetect)?{}:Le,Qe=!0,_t.prev=4,"playing"==fe.getStatus()){_t.next=7;break}return _t.abrupt("return",!0);case 7:return _t.next=9,fe.capture(Qe);case 9:if(tt=_t.sent,!this.loopTypeIsNone()){_t.next=14;break}return _t.abrupt("return",this.exitAutoCaptureFromInner(2));case 14:if(!this.loopTypeIsManualScan()){_t.next=17;break}return this._captureLoopSub.emit("onCapturedImage",fe,tt),_t.abrupt("return",!1);case 17:return _t.prev=17,_t.next=20,Bs(tt,!1,fe);case 20:if(qe=_t.sent,this._loopType!=jt.AutoScan){_t.next=67;break}if(at=qe.cornerPoints,!this.loopTypeIsNone()){_t.next=27;break}return on.log("loop setImageDataBack"),fe.setImageDataBack(tt.imageData),_t.abrupt("return",this.exitAutoCaptureFromInner(3));case 27:if(!qe.detectedArea){_t.next=56;break}if(this.drawArea(at,We,fe.getVideoElement()),!this.loopTypeIsNone()){_t.next=35;break}return on.log("loop setImageDataBack"),fe.setImageDataBack(tt.imageData),_t.abrupt("return",this.exitAutoCaptureFromInner(5));case 35:if(!this.loopTypeIsManualScan()){_t.next=38;break}return this._captureLoopSub.emit("onCapturedImage",fe,tt,qe),_t.abrupt("return",!1);case 38:if(dt=void 0===(it=je.autoCaptureDelay)?2e3:it,mt=(new Date).getTime(),!(this._loopType==jt.AutoScan&&this.lastConfirmTime>0&&mt-this.lastConfirmTime>dt)){_t.next=53;break}return fe.showLoading("auto capture"),_t.prev=43,_t.next=46,ae.page.emitEx("onSaveCapture",!0,ae,tt,!0,qe);case 46:return _t.prev=46,fe.hideLoading("auto capture"),_t.finish(46);case 49:return fe.captureLoop.resetLastConfirmTime(),_t.abrupt("return",!0);case 53:0==this.lastConfirmTime&&(this.lastConfirmTime=mt);case 54:_t.next=60;break;case 56:on.log("[capture loop] detect result:"),on.log(qe),this.lastConfirmTime=0,this.clearCanvas();case 60:if(!this.loopTypeIsManualScan()){_t.next=63;break}return this._captureLoopSub.emit("onCapturedImage",fe,tt,qe),_t.abrupt("return",!1);case 63:on.log("loop setImageDataBack"),fe.setImageDataBack(tt.imageData),_t.next=83;break;case 67:if(this._loopType!=jt.AutoDetect){_t.next=80;break}if(yt=qe.cornerPoints,on.log("loop setImageDataBack"),fe.setImageDataBack(tt.imageData),!this.loopTypeIsNone()){_t.next=73;break}return _t.abrupt("return",this.exitAutoCaptureFromInner(3));case 73:if(Lt=M(yt,tt.imageWidth,tt.imageHeight),!this.loopTypeIsNone()){_t.next=77;break}return _t.abrupt("return",this.exitAutoCaptureFromInner(4));case 77:Lt?this.clearCanvas():(Nt=fe.getVideoElement(),fe.captureLoop.drawArea(yt,We,Nt)),_t.next=83;break;case 80:if(!this.loopTypeIsManualScan()){_t.next=83;break}return this._captureLoopSub.emit("onCapturedImage",fe,tt,qe),_t.abrupt("return",!1);case 83:_t.next=88;break;case 85:_t.prev=85,_t.t0=_t.catch(17),on.log(_t.t0);case 88:_t.next=93;break;case 90:_t.prev=90,_t.t1=_t.catch(4),on.log(_t.t1);case 93:return _t.abrupt("return",!0);case 95:case"end":return _t.stop()}},X,this,[[4,90],[17,85],[43,,46,49]])})),function(X){return z.apply(this,arguments)}),de.exitAutoCaptureFromInner=function(z){return this.clearCaptureTimer(),this._dcs.hideLoading("innerLoop exitAutoCaptureFromInner"),on.log("auto capture loop: loopType is None "+z),!1},de.clearCaptureTimer=function(){clearTimeout(this.loopTimer),this.loopTimer=null,this.lastConfirmTime=0},de.stopCaptureLoop=function(){this._loopType=jt.None,this.clearCaptureTimer(),this.clearCanvas()},de.getCameraCvs=function(){return this._cameraCvs||(this._cameraCvs=this._dcs.getCameraView().getCameraDvs()),this._cameraCvs},de.clearCanvas=function(){var z=this.getCameraCvs();z&&z.getContext("2d").clearRect(0,0,z.width,z.height)},de.drawArea=function(z,X,ae){var fe=this.getCameraCvs(),be=fe.getContext("2d");be.save(),be.clearRect(0,0,fe.width,fe.height);var Pe=ae.videoLayout,We=Pe.zoom;be.translate(Pe.left,Pe.top),be.scale(We,We),be.beginPath(),be.moveTo(z[0],z[1]);for(var Qe=2;Qe<z.length;Qe+=2)be.lineTo(z[Qe],z[Qe+1]);be.closePath();var at=parseInt(X.strokeWidth,10)/We;be.strokeStyle=X.stroke,be.lineCap="round",be.lineWidth=at,"dashed"===X.dash&&be.setLineDash([Math.max(2,at),Math.max(4,2*at)]),be.stroke(),be.restore()},Ge}();Ii.EnumLoopType_ManualScan=3,Ii._defaultConfig={autoScan:{enableAutoScan:!1},autoDetect:{enableAutoDetect:!1},enableBorderDetection:!0};var tr=new Map,lo=new Map,Hr=new Map,lc=function(){function Ge(){this._cameraMng=null,this._cameraView=null,this._errorMng=null,this._uiRouters=null,this.captureLoop=null,this.areaDetectFn=null,this.perspectiveFn=null,this.licenseFn=null,this.multipleHandleFn=null,this.multipleCloseHandleFn=null,this.loadFn=null,this.filterHandleList=[],this.imageDataToBlobHandleFn=null,this.file={},this._runPlaying=!1,this._loadingConfig={element:Xe,background:"rgba(0, 0, 0, 0.2)",container:null},this._loadingNumber=0,this.multipleView=!1,this.config={scannerViewer:{maxDocuments:20,maxImagesInBuffer:20,fullScreen:!0,enableBorderDetection:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},resolution:{visibility:!0,valueList:[{label:"720P",value:{width:1280,height:720}},{label:"1080P",value:{width:1920,height:1080}},{label:"2K",value:{width:2560,height:1440}},{label:"4K",value:{width:3840,height:2160}}],defaultValue:{width:1280,height:720}},autoDetect:{visibility:!0,acceptedPolygonConfidence:0,acceptedBlurryScore:0},autoScan:{visibility:!0},continuousScan:{visibility:!0,enableContinuousScan:!0},switchCamera:{visibility:!0},loadLocalFile:{visibility:!0}},filterViewer:{visibility:!0,insert:{visibility:!0,position:"before"},delete:{visibility:!0},rotateLeft:{visibility:!0},filter:{visibility:!0,valueList:[{label:"Original",value:"original",option:{level:1}},{label:"B&W",value:"blackAndWhite",option:{level:1}},{label:"Grayscale",value:"grayscale",option:{level:1}},{label:"Clean",value:"clean",option:{level:1}},{label:"Brightening",value:"brightening",option:{level:1}},{label:"Save Toner",value:"saveToner",option:{level:1}}],defaultValue:"original"}},cropViewer:{visibility:!0,polygonStyle:{stroke:"#fe8e14",strokeWidth:"2px",dash:"solid"},rotateLeft:{visibility:!0},rotateRight:{visibility:!0},autoDetectBorder:{visibility:!0},apply:{visibility:!0}}},this._container=null,this._cameraMng=new qn,this._cameraView=new mr(this._cameraMng.videoEl),this._uiRouters=new Cn,this._errorMng=new Fr,this.captureLoop=new Ii(this),document.addEventListener("click",cc),window.addEventListener("focus",Vs),window.addEventListener("blur",dc)}var z,de=Ge.prototype;return de.bindView=function(z){var X;return void 0===z&&(z=this._container),(X=v(z)?document.getElementById(z):z)?(this._cameraView||(this._cameraView=new mr(this._cameraMng.videoEl)),this.captureLoop||(this.captureLoop=new Ii(this)),this._cameraView.bindView(X),this._container=X,!0):(c.emit("error"),!1)},de.unbindView=function(){var z,X;return this._container=null,null===(z=this._cameraView)||void 0===z||z.dispose(),this._cameraView=null,null===(X=this.captureLoop)||void 0===X||X.dispose(),this.captureLoop=null,!0},de.getVideoElement=function(){return this._cameraMng.videoEl},de.getCameraView=function(){return this._cameraView},de.play=(z=u()(a.a.mark(function X(ae,fe,be,Pe,We){var Le,je;return a.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(void 0===Pe&&(Pe=this.config.scannerViewer.fullScreen),void 0===We&&(We=!1),this._checkLicense(),We||!this._runPlaying){Qe.next=5;break}return Qe.abrupt("return",Promise.reject(Z));case 5:if(ae&&(ae instanceof HTMLElement||E(typeof ae,"HTMLElement"),this.bindView(ae)),this._container){Qe.next=8;break}return Qe.abrupt("return",Promise.reject(G));case 8:if(void 0===fe||T(fe)||E(typeof fe,"number"),void 0===be||T(be)||E(typeof be,"number"),this._runPlaying=!0,Le=this._cameraMng.getCurrentCamera()){Qe.next=16;break}return Qe.next=15,this._cameraMng.selectCamera();case 15:Le=Qe.sent;case 16:return Le.setFillMode(Pe),Qe.prev=17,Qe.next=20,Le.play(fe,be,this._cameraMng);case 20:je=Qe.sent,Qe.next=27;break;case 23:return Qe.prev=23,Qe.t0=Qe.catch(17),this._runPlaying=!1,Qe.abrupt("return",Promise.reject(Qe.t0));case 27:return Qe.abrupt("return",je);case 28:case"end":return Qe.stop()}},X,this,[[17,23]])})),function(X,ae,fe,be,Pe){return z.apply(this,arguments)}),de.pause=function(){var z=this._cameraMng.getCurrentCamera();z&&z.pause()},de.stop=function(){var z=this._cameraMng.getCurrentCamera();if(z)return z.stop(),void(this._runPlaying=!1)},de.resume=function(){var z=this._cameraMng.getCurrentCamera();z&&z.resume()},de.getStatus=function(){var z=this._cameraMng.getCurrentCamera();return z?z.getStatus():""},de.capture=function(z){var X=this._cameraMng.getCurrentCamera();return X?X.capture(z):Promise.reject(Re)},de.setImageDataBack=function(z){var X=this._cameraMng.getCurrentCamera();return X?X.setImageDataBack(z):(P(Re),null)},de.getSourceList=function(){return this._checkLicense(),this._cameraMng.getAllCamerasInfo()},de.selectSource=function(){var z=u()(a.a.mark(function X(ae){var fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return this._checkLicense(),be.next=3,this._cameraMng.selectCamera(ae);case 3:if(fe=be.sent,this._runPlaying=!1,fe){be.next=7;break}return be.abrupt("return",Promise.reject(ee));case 7:return be.abrupt("return",fe?.getCameraInfo());case 8:case"end":return be.stop()}},X,this)}));return function(X){return z.apply(this,arguments)}}(),de.closeSource=function(){var z=u()(a.a.mark(function X(){var ae,fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(this._runPlaying=!1,!(ae=this._cameraMng.getCurrentCamera())){be.next=6;break}return fe=ae.getCameraInfo(),this._cameraMng.closeCamera(),be.abrupt("return",fe);case 6:return be.abrupt("return",Promise.reject(Re));case 7:case"end":return be.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de.getCurrentSource=function(){var z=u()(a.a.mark(function X(){var ae;return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(ae=this._cameraMng.getCurrentCamera())){fe.next=3;break}return fe.abrupt("return",ae.getCameraInfo());case 3:return fe.abrupt("return",null);case 4:case"end":return fe.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de.getCurrentResolution=function(){var z=u()(a.a.mark(function X(){var ae;return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(ae=this._cameraMng.getCurrentCamera())){fe.next=3;break}return fe.abrupt("return",ae.getCurrentResolution());case 3:return fe.abrupt("return",Promise.reject(Re));case 4:case"end":return fe.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de.getResolution=function(){var z=u()(a.a.mark(function X(){var ae;return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(ae=this._cameraMng.getCurrentCamera())){fe.next=3;break}return fe.abrupt("return",ae.getResolutions());case 3:return fe.abrupt("return",Promise.reject(Re));case 4:case"end":return fe.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de.setResolution=function(){var z=u()(a.a.mark(function X(ae){var fe;return a.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(!(fe=this._cameraMng.getCurrentCamera())){be.next=5;break}return C(ae),be.abrupt("return",fe.setResolution(ae.width,ae.height));case 5:return be.abrupt("return",Promise.reject(Re));case 6:case"end":return be.stop()}},X,this)}));return function(X){return z.apply(this,arguments)}}(),de.getVideoSetting=function(){var z=this._cameraMng.getCurrentCamera();return z?z.getVideoSetting():(P(Re),null)},de.toggleCamera=function(){var z=u()(a.a.mark(function X(ae,fe){var be;return a.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(!(be=this._cameraMng.getCurrentCamera())){Pe.next=3;break}return Pe.abrupt("return",be.toggleCamera(ae,fe,this._cameraMng));case 3:return Pe.abrupt("return",Promise.reject(Re));case 4:case"end":return Pe.stop()}},X,this)}));return function(X,ae){return z.apply(this,arguments)}}(),de.show=function(){return!!this._container&&this.bindView()},de.hidden=function(){return!this._container},de.hide=function(){this.unbindView()},de.bindAreaDetectFunction=function(z){return!!_(z)&&(this.areaDetectFn=z,!0)},de.bindPerspectiveFunction=function(z){return this.perspectiveFn=z,!0},de.bindLicenseCallback=function(z){return this.licenseFn=z,!0},de.bindMultipleHandle=function(z){return this.multipleHandleFn=z,!0},de.bindMultipleCloseHandle=function(z){return this.multipleCloseHandleFn=z,!0},de.bindImageDataToBlobHandle=function(z){return this.imageDataToBlobHandleFn=z,!0},de.bindLoadHandle=function(z){return this.loadFn=z,!0},de.bindFilterHandleList=function(z){return this.filterHandleList=z,!0},de.showEditPage=function(){var z=u()(a.a.mark(function X(ae){return a.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return void 0===ae&&(ae={}),this._checkLicense(),fe.abrupt("return",this._uiRouters.showEditPage(ae,this));case 3:case"end":return fe.stop()}},X,this)}));return function(X){return z.apply(this,arguments)}}(),de.showHomePage=function(){var z=u()(a.a.mark(function X(ae){var fe,Pe,We,Le,je,Qe,tt,qe,at,it,dt;return a.a.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(void 0===ae&&(ae={}),this._checkLicense(),fe=this._uiRouters.showHomePage(ae,this),Pe=fe.element.children[1],this.showLoading("showHomePage"),mt.prev=6,Le=(We=this.config.scannerViewer.resolution).valueList,(je=We.defaultValue)||Le&&Le.length>0&&(je=Le[Le.length-1].value),!this._runPlaying){mt.next=13;break}if(!this._cameraMng.getCurrentCamera()){mt.next=13;break}return mt.next=13,this.closeSource();case 13:if(tt=(Qe=fe.options).fill,!(qe=Qe.deviceId)){mt.next=17;break}return mt.next=17,this.selectSource(qe);case 17:return it=(at={width:void 0,height:void 0}).width,dt=at.height,je&&(it=je.width?je.width:void 0,dt=je.height?je.height:void 0),mt.next=21,this.play(Pe,it,dt,tt);case 21:mt.next=27;break;case 23:mt.prev=23,mt.t0=mt.catch(6),this.navigateBack(),P(mt.t0);case 27:return mt.prev=27,this.hideLoading("showHomePage"),mt.finish(27);case 30:return mt.abrupt("return",fe);case 31:case"end":return mt.stop()}},X,this,[[6,23,27,30]])}));return function(X){return z.apply(this,arguments)}}(),de.showInsertPage=function(){var z=u()(a.a.mark(function X(ae){var fe,Pe,We,Le,je,Qe,tt,qe,at,it,dt;return a.a.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(void 0===ae&&(ae={}),this._checkLicense(),fe=this._uiRouters.showInsertPage(ae,this),Pe=fe.element.children[1],this.showLoading("showInsertPage"),mt.prev=6,Le=(We=this.config.scannerViewer.resolution).valueList,(je=We.defaultValue)||Le&&Le.length>0&&(je=Le[Le.length-1].value),tt=(Qe=fe.options).fill,!(qe=Qe.deviceId)){mt.next=13;break}return mt.next=13,this.selectSource(qe);case 13:return it=(at={width:void 0,height:void 0}).width,dt=at.height,je&&(it=je.width?je.width:void 0,dt=je.height?je.height:void 0),mt.next=17,this.play(Pe,it,dt,tt,!0);case 17:mt.next=23;break;case 19:mt.prev=19,mt.t0=mt.catch(6),this.navigateBack(),P(mt.t0);case 23:return mt.prev=23,this.hideLoading("showInsertPage"),mt.finish(23);case 26:return mt.abrupt("return",fe);case 27:case"end":return mt.stop()}},X,this,[[6,19,23,26]])}));return function(X){return z.apply(this,arguments)}}(),de.showFilterPage=function(z){this._checkLicense();var X=this.config.filterViewer,ae=void 0===X?{}:X;ae.visibility||(ae.insert.visibility=!1,ae.remove.visibility=!1,ae.rotateLeft.visibility=!1,ae.filter.visibility=!1);var be=ae.filter;return z.footerButtons={rotateRight:null,rotateLeft:uo(ae.rotateLeft),filter:s()({},Ue(this),uo(be)),save:{order:1},empty:{}},z.isFilterPage=!0,this._uiRouters.showEditPage(z,this)},de.navigateBack=function(z){void 0===z&&(z=1);var X=this._uiRouters.navigateBack(z);(!X||X instanceof ue)&&this._cameraMng.getCurrentCamera()&&this.closeSource(),X instanceof ue&&(this.bindView(X.element.children[1]),X._dcs.isHome()&&X._dcs.emit("focusPage")),X||this.unbindView()},de.redirectToHome=function(){this._uiRouters.redirectToHome()},de.isHome=function(){return 0==this.multipleView&&1==this._uiRouters.path.length},de.closeAll=function(){var z;this._uiRouters.closeAll(),this.file={},null===(z=this._container)||void 0===z||z.classList.remove("dcs-relative"),this._cameraMng.getCurrentCamera()&&this.closeSource()},de.hideAllPages=function(){this._uiRouters.hideAllPages()},de.showAllPages=function(){var z=u()(a.a.mark(function X(){var ae,fe,be,We,Le,je;return a.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:(ae=document.querySelector(".dcs-btn-multipleImg"))&&(fe=ae.querySelector(".previewImg"))&&(be=this.getCurrentPage(),0==(Le=void 0===(We=be.options.file.blobList)?[]:We).length?ae.classList.add("dcs-hidden"):(je=Le[Le.length-1],fe.src==A&&je.preview&&(fe.src=Yn.createURL(je.preview)))),this._uiRouters.showAllPages();case 3:case"end":return Qe.stop()}},X,this)}));return function(){return z.apply(this,arguments)}}(),de._checkLicense=function(){return!this.licenseFn||(0!==this.licenseFn().errorCode&&P(se),!0)},de.createBlobItem=function(z){return new St(z)},de.showLoading=function(z){this._loadingNumber++,z&&on.log(["show loading: ",z,", num: ",this._loadingNumber].join(""));var X=this._loadingConfig,ae=X.element,fe=X.background,be=this._loadingConfig.container;if(!be){var Pe=document.createElement("div");Pe.style.background=fe,this._loadingConfig.container=Pe,be=Pe}var We,Le=this.config.element;be.innerHTML="",be.appendChild(ae),be.className="dcs-loadingContainer",(We=v(Le)?document.getElementById(Le):Le)?We.appendChild(be):(document.body.appendChild(be),be.classList.add("dcs-fixed-full"))},de.hideLoading=function(z){this._loadingNumber--,z&&on.log(["hide loading: ",z,", num: ",this._loadingNumber].join("")),this._loadingNumber<1&&(this._loadingConfig.container?.remove(),this._loadingNumber=0)},de.getDetectArea=function(z){return Bs(z,!0,this)},de.filterHandler=function(){var z=u()(a.a.mark(function X(ae,fe){var be;return a.a.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return be=R(this.config,"filterViewer.filter"),Le.abrupt("return",Vi(this,ae,this.filterHandleList,be.valueList,fe));case 4:case"end":return Le.stop()}},X,this)}));return function(X,ae){return z.apply(this,arguments)}}(),de.filterHandlerByIImageData=function(){var z=u()(a.a.mark(function X(ae,fe,be){var Pe;return a.a.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return Pe=R(this.config,"filterViewer.filter"),je.abrupt("return",ko(ae,fe,this.filterHandleList,Pe.valueList,be));case 4:case"end":return je.stop()}},X,this)}));return function(X,ae,fe){return z.apply(this,arguments)}}(),de.packageBlobItemFromIImageData=function(z,X,ae,fe){return void 0===X&&(X=!1),void 0===ae&&(ae=!1),void 0===fe&&(fe=!1),nu(z,this,X,ae,fe)},de.on=function(z,X){c.on(z,X)},de.once=function(z,X){c.once(z,X)},de.off=function(z,X){c.off(z,X)},de.emit=function(z){for(var X=arguments.length,ae=new Array(X>1?X-1:0),fe=1;fe<X;fe++)ae[fe-1]=arguments[fe];c.emit.apply(c,[z].concat(ae))},de.getCurrentPage=function(){return this._uiRouters.currentPage},de.dispose=function(){var z,X,ae,fe;this.config&&(this.config.element=null),document.removeEventListener("click",cc),window.removeEventListener("focus",Vs),window.removeEventListener("blur",dc),tr.clear(),lo.clear(),this._container=null,null===(z=this._cameraView)||void 0===z||z.dispose(),this._cameraView=null,null===(X=this._cameraMng)||void 0===X||X.destroy(),this._cameraMng=null,null===(ae=this._uiRouters)||void 0===ae||ae.closeAll(),this._uiRouters=null,this._errorMng=null,null===(fe=this.captureLoop)||void 0===fe||fe.dispose(),this.captureLoop=null},de.addGlobalClickEvent=function(z,X){if(_(X)){var ae=this;tr.set(z,function(fe){X(fe,ae)&&ae.removeGlobalClickEvent(fe)})}},de.removeGlobalClickEvent=function(z){tr.delete(z)},de.addGlobalBlurEvent=function(z,X){if(_(X)){var ae=this;lo.set(z,function(fe){X(fe,ae)&&ae.removeGlobalBlurEvent(fe)})}},de.removeGlobalBlurEvent=function(z){lo.delete(z)},de.addGlobalFocusEvent=function(z,X){if(_(X)){var ae=this;Hr.set(z,function(fe){X(fe,ae)&&ae.removeGlobalBlurEvent(fe)})}},de.removeGlobalFocusEvent=function(z){Hr.delete(z)},Ge}();function cc(Ge){tr.forEach(function(de,z){_(de)&&de(z)})}function dc(Ge){lo.forEach(function(de,z){_(de)&&de(z)})}function Vs(Ge){Hr.forEach(function(de,z){_(de)&&de(z)})}var fc=h(11);y()(fc.a,{insert:"head",singleton:!1}),window.Dynamsoft||(window.Dynamsoft={}),window.Dynamsoft.CameraViewer=lc}])}),w.AddonReady(function(e,t){e.product.bHTML5Edition&&!w.navInfoSync.bIE&&e.DynamicLoadAddonFuns&&e.DynamicLoadAddonFuns.push(function(r){var s=function(){this._stwain=r,this._viewer=null};s.prototype._getCameraViewer=function(){return null==this._viewer&&(e.log("camera addon: bind viewer."),this._viewer=new w.CameraViewer,this._stwain._ImgManager.getWebViewer().bindCamera()),this._viewer},s.prototype._checkLic=function(){var i=!0;return e.License.checkProductKey(this._stwain,{Webcam:!0},!0)||(e.log("camera addon: check camera license failed."),i=!1),i&&!e.License.checkProductKey(this._stwain,{Webcam:!0,Wasm:!0},!0)&&(e.log("camera addon: check camera wasm license failed."),i=!1),!i&&{code:this._stwain._errorCode,message:this._stwain._errorString}},s.prototype.getSourceList=function(){var i=this._checkLic();return i?e.Promise.reject(i):this._getCameraViewer().getSourceList()},s.prototype.selectSource=function(i){var u=this._checkLic();return u?e.Promise.reject(u):(this._getCameraViewer().hide(),this._getCameraViewer().selectSource(i))},s.prototype.closeSource=function(){var i=this._checkLic();if(i)return e.Promise.reject(i);this._getCameraViewer().hide();var u=this._getCameraViewer().closeSource();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),u},s.prototype.play=function(i,u,f){var o,c,a=this._checkLic();if(a)return e.Promise.reject(a);if(this._stwain._ImgManager.getWebViewer()._imageEditorInner&&this._stwain._ImgManager.getWebViewer()._imageEditorInner.bShowImageEditForFullScreen)return e.Errors.ImageEditorOpenCannotPlayVideo(this._stwain),e.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString});var l=i;if(!l)if(this._stwain._ImgManager.getWebViewer().myViewer.bOnlyShowThumbnailsView||!this._stwain._ImgManager.getWebViewer().myViewer.showMain){var m=e.one(["#showImageArea",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));m&&m.length>0&&m[0].className.indexOf("DVS_disabled")<0&&(l=m[0])}else{var I=e.one(["#container",this._stwain._ImgManager.getWebViewer().GetIdPostfix()].join(""));I&&I.length>0&&I[0].className.indexOf("DVS_disabled")<0&&(l=I[0])}if(l)"object"==typeof u&&(o=u.width,c=u.height),l&&"DIV"==l.nodeName||(l=document.getElementById(l)),!l.offsetHeight&&!l.scrollHeight&&!l.clientHeight&&(l.style.height="200px"),!l.offsetWidth&&!l.scrollWidth&&!l.clientWidth&&(l.style.width="200px"),this._getCameraViewer().show();else{var p=this._getCameraViewer();p&&p.hide(),this._stwain._ImgManager.getWebViewer().render()}return e.log("camera addon: play."),this._getCameraViewer().play(l,o,c,f)},s.prototype.pause=function(){return e.log("camera addon: pause."),this._getCameraViewer().pause()},s.prototype.resume=function(){return e.log("camera addon: resume."),this._getCameraViewer().resume()},s.prototype.getStatus=function(){return e.log("camera addon: get status."),this._getCameraViewer().getStatus()},s.prototype.capture=function(){var i=this._checkLic(),u=this._stwain,f=u.GetCurrentFileName();return i?e.Promise.reject(i):(""==f&&(f=u._ImgManager.getWebViewer().GetDefaultFileName()),e.log("camera addon: start capture."),this._getCameraViewer().capture().then(function(a){return e.log("camera addon: captured."),new e.Promise(function(o,c){var l=a.imageData||a.blob,m=-1,I=w.DWT.EnumDWT_ImageType;u._bLocalService?(e.isString(l.type)&&("application/pdf"==l.type?m=I.IT_PDF:"image/png"==l.type?m=I.IT_PNG:"image/jpeg"==l.type||"image/jpg"==l.type?m=I.IT_JPG:"image/bmp"==l.type?m=I.IT_BMP:"image/tiff"==l.type||"image/tif"==l.type?m=I.IT_TIF:"image/jp2"==l.type&&(m=I.IT_J2K)),u.__captureImage(l,m,function(){e.log("camera addon: loaded image from capture."),o(l)},function(p,g){e.log("camera addon: failed to load image from capture."),c({code:p,message:g})})):u._innerSendToMobile("LoadImageFromBinary",[l,!0,null,f],0,function(){e.log("camera addon: loaded image from capture."),o(l)},function(p,g){e.log("camera addon: failed to load image from capture."),c({code:p,message:g})})})}))},s.prototype.stop=function(){this._getCameraViewer().hide(),e.log("camera addon: stop.");var i=this._getCameraViewer().stop();return this._stwain._ImgManager.getWebViewer().SetWidth(this._stwain._ImgManager.getWebViewer().GetWidth()),this._stwain._ImgManager.getWebViewer().render(),i},s.prototype.show=function(){return e.log("camera addon: show."),this._getCameraViewer().show()},s.prototype.hide=function(){return e.log("camera addon: hide."),this._getCameraViewer().hide()},s.prototype.getCurrentResolution=function(){return e.log("camera addon: get current resolution."),this._getCameraViewer().getCurrentResolution()},s.prototype.getCurrentSource=function(){return e.log("camera addon: get current source."),this._getCameraViewer().getCurrentSource()},s.prototype.getResolution=function(){var i=this._checkLic();return i?e.Promise.reject(i):(e.log("camera addon: get resolution."),this._getCameraViewer().getResolution())},s.prototype.setResolution=function(i){var u=this._checkLic();return u?e.Promise.reject(u):(e.log("camera addon: set resolution."),this._getCameraViewer().setResolution(i))},s.prototype.showVideo=function(i,u,f,a){var o=this._checkLic();return o?e.Promise.reject(o):(this._getCameraViewer(),e.log("camera addon: show video."),this._stwain._ImgManager.getWebViewer().showVideo(i,u,f,a))},s.prototype.scanDocument=function(i){var u=this._checkLic();return u?e.Promise.reject(u):(this._getCameraViewer(),e.log("camera addon: scan document."),this._stwain._ImgManager.getWebViewer().showVideoEx(i))},s.prototype.closeVideo=function(){var i=this._checkLic();return i?e.Promise.reject(i):(e.log("camera addon: close video."),this._stwain._ImgManager.getWebViewer().closeVideo())},s.prototype.on=function(i,u){"video-closed"==i||"video-error"==i?e.isFunction(u)?(e.log("camera addon: add event "+i),this._stwain._ImgManager.getWebViewer().camera_on(i,u)):e.Errors.CallbackNotAFunction(this._stwain):e.Errors.EventNotExist(this._stwain)},s.prototype.off=function(i,u){if("video-closed"==i&&"video-error"==i)if(e.isUndefined(u))this._stwain._ImgManager.getWebViewer().off(i);else{if(!e.isFunction(u))return void e.Errors.CallbackNotAFunction(this._stwain);e.log("camera addon: remove event "+i),this._stwain._ImgManager.getWebViewer().off(i,u)}else e.Errors.EventNotExist(this._stwain)},r.__addon=r.__addon||{},r.__addon.Camera=new s})}),function(e){var t=e.DWT||(e.DWT={});t.initQueue=[],t.inited=!1,e.initOrder=e.initOrder||[]}(w=window.Dynamsoft||{Lib:{}}),w=w||{},function(e,t,n){var r=20211014;if(!(t._preDefine_ver&&t._preDefine_ver>=r)){t._preDefine_ver=r;var h=function(f,a){for(var o in a)a.hasOwnProperty(o)&&(f[o]=a[o]);return f},d=function(f){if(null==f||"object"!=typeof f)return f;var a,o,c;if(f instanceof Date)return(a=new Date).setTime(f.getTime()),a;if(f instanceof Array){for(a=[],c=f.length,o=0;o<c;o++)a[o]=d(f[o]);return a}if(f instanceof Object){for(o in a={},f)f.hasOwnProperty(o)&&(a[o]=d(f[o]));return a}return 0};if(t.Lib||(t.Lib={}),h(t.Lib,{win:e,doc:e.document,debug:!1,nil:void 0,mix:h,clone:d,guid:function(f){var c,l,a=[],o="0123456789abcdef";for(c=0;c<8;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),c=0;c<4;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-4"),c=0;c<3;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),l=o.substr(Math.floor(16*Math.random()),1),l=o.substr(3&l|8,1),a.push(l),c=0;c<3;c++)a.push(o.substr(Math.floor(16*Math.random()),1));for(a.push("-"),c=0;c<8;c++)a.push(o.substr(Math.floor(16*Math.random()),1));return a.unshift(f),a.join("")},now:Date.now||function(){return+new Date},noop:function(){}}),Object.keys)t.Lib.keys=Object.keys;else{var u,s=["propertyIsEnumerable","isPrototypeOf","hasOwnProperty","toLocaleString","toString","valueOf","constructor"],i={}.hasOwnProperty;for(u in{toString:1})s=!1;t.Lib.keys=function(f){var o,c,a=[];for(o in f)i.call(f,o)&&a.push(o);if(s&&f)for(c=0;o=s[c++];)i.call(f,o)&&a.push(o);return a}}}}(typeof window<"u"?window:void 0,w),function(e){var t=!{toString:1}.propertyIsEnumerable("toString"),n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function r(h,d){return{}.hasOwnProperty.call(h,d)}e.keys=Object.keys||function(h){var s,i,d=[];for(s in h)r(h,s)&&d.push(s);if(t)for(i=n.length-1;i>=0;i--)r(h,s=n[i])&&d.push(s);return d}}(w.Lib),function(e,t){var n=20200716;if(!(e._isXXX_ver&&e._isXXX_ver>=n)){e._isXXX_ver=n;var h,d,s=!1,f={}.hasOwnProperty,a={},o="object"==typeof HTMLElement;(0,e.mix)(e,{isDef:function l(I){return I!==t},isUndef:c,isUndefined:c,isNull:function(I){return null===I},isNaN:function(I){return isNaN(I)},type:function(I){return null===I||I===t?String(I):a[{}.toString.call(I)]||"object"},isPlainObject:function(I){if(!I||"object"!==e.type(I)||I.nodeType||I.window==I)return s;var p,g;try{if((g=I.constructor)&&!f(I,"constructor")&&!f(g.prototype,"isPrototypeOf"))return s}catch{return s}for(p in I);return c(p)||f(I,p)},isDOM:function(I){return o?I instanceof HTMLElement:I&&"object"==typeof I&&(1===I.nodeType||9===I.nodeType)&&"string"==typeof I.nodeName},isDOMInBody:function(I){var p=I;if(e.isDOM(I))for(;!p&&p!=document.body;)p=p.parentNode;else p=0;return!!p}}),m("Function"),e.each=h=function(I,p,g){if(I){var C,_,v,T=0,D=I.length;if(g=g||null,c(D)||e.isFunction(I))for(v=e.keys(I);T<v.length&&p.call(g,I[C=v[T]],C,I)!==s;T++);else for(_=I[0];T<D&&p.call(g,_,T,I)!==s;_=I[++T]);}return I},d=["String","Object","Boolean","Number"],Array.isArray?e.isArray=Array.isArray:d.push("Array"),h(d,m)}function c(I){return I===t}function m(I,p){a["[object "+I+"]"]=p=I.toLowerCase(),e["is"+I]=function(g){return e.type(g)===p}}}(w.Lib),function(e){var r,t=e.mix,n=e.win,h=20211122;e._log_ver&&e.isNumber(e._log_ver)&&e._log_ver>=h||(e._log_ver=h,e.isDef(n.console)&&(!e.isFunction((r=n.console).log)||!e.isFunction(r.error))&&(r=!1),e.getFormatedNow=function(d){var s=d?new Date(d):new Date,i="yyyy-MM-dd HH:mm:ss.SSSZ",u={"M+":s.getUTCMonth()+1,"d+":s.getUTCDate(),"H+":s.getUTCHours(),"h+":s.getUTCHours()%12||12,"m+":s.getUTCMinutes(),"s+":s.getUTCSeconds(),"q+":Math.floor((s.getUTCMonth()+3)/3),"S+":s.getUTCMilliseconds()};for(var f in/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(s.getUTCFullYear()+"").substr(4-RegExp.$1.length))),u)new RegExp("("+f+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?u[f]:("000"+u[f]).substr(("000"+u[f]).length-RegExp.$1.length)));return i},t(e,{log:function(d){if(e.debug&&r&&e.isFunction(r.log)){var s=e.getFormatedNow((new Date).getTime());r.log(["[",s,"] ",d].join(""))}},error:function(d){if(e.debug&&r&&e.isFunction(r.error)){var s=e.getFormatedNow((new Date).getTime());r.error(["[",s,"] ",d].join(""))}},warn:function(d){if(e.debug&&r&&e.isFunction(r.warn)){var s=e.getFormatedNow((new Date).getTime());r.warn(["[",s,"] ",d].join(""))}},info:function(d){if(e.debug&&r&&e.isFunction(r.info)){var s=e.getFormatedNow((new Date).getTime());r.info(["[",s,"] ",d].join(""))}},getLogger:function(){return r},setLogger:function(d){r=d}}))}(w.Lib),function(e){var t=20200521;e._random_ver&&e._random_ver>=t||(e._random_ver=t,e.getRandom=function(){for(var h,n=e.now()%1e4,r=[],d=0;d<5;d++)h=Math.floor(10*Math.random()),0!=d||0!=h?r.push(h):d=-1;return n<10?r.push("000"):n<100?r.push("00"):n<1e3&&r.push("0"),r.push(n),r.join("")})}(w.Lib),function(e){var t=20201013;e._strUtil_ver&&e.isNumber(e._strUtil_ver)&&e._strUtil_ver>=t||(e._strUtil_ver=t,e.mix(e,{startsWith:function(n,r){return 0===n.lastIndexOf(r,0)},endsWith:function(n,r){var h=n.length-r.length;return h>=0&&n.indexOf(r,h)===h},replaceAll:function(n,r,h){return n.replace(new RegExp(r,"gi"),h)},upperCaseFirst:function(n){return n.charAt(0).toUpperCase()+n.substr(1)},removeNonPrintableChar:function(n){return e.isString(n)?n.replace(/[^\x20-\x7E]/g,""):n},makeArray:function(n){if(null==n)return[];if(e.isArray(n))return n;var r=typeof n.length,h=typeof n;if("number"!==r||n.alert||"string"===h||"function"===h&&(!("item"in n)||"number"!==r))return[n];for(var d=[],s=0,i=n.length;s<i;s++)d[s]=n[s];return d}}))}(w.Lib),function(e){var t=20200521;e._extend_ver&&e.isNumber(e._extend_ver)&&e._extend_ver>=t||(e._extend_ver=t,e.extend=function(n,r){var h=function(){n.apply(this,arguments),r&&r.apply(this,arguments)};return e.each(n.prototype,function(d,s){h.prototype[s]=d}),h.prototype.constructor=h,h})}(w.Lib),function(e){var t=20200521;function n(r){var h=this,d=h.constructor;for(h.__attrs={},h.__attrVals={},h.userConfig=r;d;)h.addAttrs(d.ATTRS),d=d.superclass?d.superclass.constructor:null;e.mix(h.__attrs,r)}e._attribute_ver&&e.isNumber(e._attribute_ver)&&e._attribute_ver>=t||(e._attribute_ver=t,e.mix(n.prototype,{get:function(r){return r in this.__attrs?this.__attrs[r]:""},set:function(r,h){r in this.__attrs&&(this.__attrs[r]=h)},addAttrs:function(r){e.mix(this.__attrs,r)}}),n.extend=function(r){var d,s;return(r=r||{}).constructor&&(d=r.constructor),s=e.extend(this,d),e.mix(s,r),s},e.Attributes=n)}(w.Lib),function(e){var t=20200521;if(!(e._json_ver&&e._json_ver>=t)){e._json_ver=t;var n=e.win.JSON;if(n&&n.parse&&n.stringify)return e.parse=n.parse,void(e.stringify=n.stringify);var h,l,m,I,p,r=(m={},I=/["\b\f\n\r\t\x00-\x1f]/g,p=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g,e.each(l={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},function(g,C){m[g]=C}),m["\\/"]="/",m["\\\\"]="\\",{quote:function(g){return'"'+g.replace(I,function(C){var _;return(_=l[C])||(_="\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)),_})+'"'},unQuote:function(g){return g.slice(1,g.length-1).replace(p,function(C){var _;return(_=m[C])||(_=String.fromCharCode(parseInt(C.slice(2),16))),_})}});h=function(l,m,I,p,g,C,_){var v=m[l];switch(v&&"object"==typeof v&&("function"==typeof v.toJSON?v=v.toJSON(l):v instanceof Date?v=isFinite(v.valueOf())?v.getUTCFullYear()+"-"+d(v.getUTCMonth()+1)+"-"+d(v.getUTCDate())+"T"+d(v.getUTCHours())+":"+d(v.getUTCMinutes())+":"+d(v.getUTCSeconds())+"Z":null:(v instanceof String||v instanceof Number||v instanceof Boolean)&&(v=v.valueOf())),void 0!==I&&(v=I.call(m,l,v)),typeof v){case"number":return isFinite(v)?String(v):"null";case"string":return r.quote(v);case"boolean":return String(v);case"object":return v?e.isArray(v)?function i(l,m,I,p,g,C){var _=C;C+=p;for(var v=[],T=l.length,D=0;D<T;){var P=h(String(D),l,m,I,p,g,C);v[v.length]=void 0===P?"null":P,++D}return v.length?p?"[\n"+C+v.join("\n,"+C)+"\n"+_+"]":"["+v.join(",")+"]":"[]"}(v,I,p,g,C,_):function s(l,m,I,p,g,C){var _=C;C+=p;var v,T,P,D=0,E=[];for(T=(v=void 0!==I?I:e.keys(l)).length;D<T;D++){var M=h(P=v[D],l,m,I,p,g,C);if(void 0!==M){var O=r.quote(P);O+=":",p&&(O+=" "),E[E.length]=O+=M}}return E.length?p?"{\n"+C+E.join(",\n"+C)+"\n"+_+"}":"{"+E.join(",")+"}":"{}"}(v,I,p,g,C,_):"null"}},e.stringify=function(l,m,I){var g,C,p="";return m&&("function"==typeof m?C=m:e.isArray(m)&&(g=m)),"number"==typeof I?(I=Math.min(10,I),p=new Array(I+1).join(" ")):"string"==typeof I&&(p=I.slice(0,10)),h("",{"":l},C,g,p,[],"")};var a,u={};u.yy={unQuote:r.unQuote},a=function(l){var m=this;m.rules=[],e.mix(m,l),m.resetInput(m.input)},a.prototype={constructor:function(l){var m=this;m.rules=[],e.mix(m,l),m.resetInput(m.input)},resetInput:function(l){e.mix(this,{input:l,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var l=this,m=l.stateStack[l.stateStack.length-1],I=[];return m=l.mapState(m),e.each(l.rules,function(p){var g=p.state||p[3];g?e.inArray(m,g)&&I.push(p):m==a.STATIC.INITIAL&&I.push(p)}),I},pushState:function(l){this.stateStack.push(l)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var l=this,m=a.STATIC.DEBUG_CONTEXT_LIMIT,I=l.matched,p=l.match,g=l.input,C=((I=I.slice(0,I.length-p.length)).length>m?"...":"")+I.slice(-m).replace(/\n/," "),_=p+g;return C+(_=_.slice(0,m)+(_.length>m?"...":""))+"\n"+new Array(C.length+1).join("-")+"^"},mapSymbol:function(l){var I=this.symbolMap;return I?I[l]||(I[l]=++this.symbolId):l},mapReverseSymbol:function(l){var m=this,I=m.symbolMap,g=m.reverseSymbolMap;return!g&&I&&(g=m.reverseSymbolMap={},e.each(I,function(C,_){g[C]=_})),g?g[l]:l},mapState:function(l){var I=this.stateMap;return I?I[l]||(I[l]=++this.stateId):l},lex:function(){var I,p,g,C,_,l=this,m=l.input,v=l.getCurrentRules();if(l.match=l.text="",!m)return l.mapSymbol(a.STATIC.END_TAG);for(I=0;I<v.length;I++){var E,D=(p=v[I]).token||p[0],P=p.action||p[2]||void 0;if(g=m.match(p.regexp||p[1]))return(_=g[0].match(/\n.*/g))&&(l.lineNumber+=_.length),e.mix(l,{firstLine:l.lastLine,lastLine:l.lineNumber+1,firstColumn:l.lastColumn,lastColumn:_?_[_.length-1].length-1:l.lastColumn+g[0].length}),E=l.match=g[0],l.matches=g,l.text=E,l.matched+=E,C=void 0===(C=P&&P.call(l))?D:l.mapSymbol(C),m=m.slice(E.length),l.input=m,C||l.lex()}e.error("lex error at line "+l.lineNumber+":\n"+l.showDebugInfo())}},a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var o=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});u.lexer=o,o.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},u.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var l={};return l[this.$1.key]=this.$1.value,l}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],u.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},u.parse=function(m){var g,C,_,I=this,p=I.lexer,v=I.table,T=v.gotos,D=v.action,P=I.productions,E=[null],M=[0];for(p.resetInput(m);;){if(g=M[M.length-1],C||(C=p.lex()),!C)return e.log("it is not a valid input: "+m,"error"),!1;if(!(_=D[g]&&D[g][C])){var R,O=[];return D[g]&&e.each(D[g],function(ce,q){O.push(I.lexer.mapReverseSymbol(q))}),R="Syntax error at line "+p.lineNumber+":\n"+p.showDebugInfo()+"\nexpect "+O.join(", "),e.log(R),!1}switch(_[0]){case 1:M.push(C),E.push(p.text),M.push(_[2]),C=null;break;case 2:var ne,F=P[_[1]],B=F.symbol||F[0],b=F.action||F[2],N=(F.rhs||F[1]).length,Y=0,Ie=E[E.length-N];for(I.$$=Ie,ne=void 0;Y<N;Y++)I["$"+(N-Y)]=E[E.length-1-Y];b&&(ne=b.call(I)),Ie=void 0!==ne?ne:I.$$,N&&(M=M.slice(0,-1*N*2),E=E.slice(0,-1*N)),M.push(B),E.push(Ie),M.push(T[M[M.length-2]][M[M.length-1]]);break;case 0:return Ie}}},e.parse=function(l,m){var I=u.parse(String(l));return m?c({"":I},"",m):I}}function d(l){return l<10?"0"+l:l}function c(l,m,I){var g,C,_,p=l[m];if("object"==typeof p)if(e.isArray(p)){g=0,C=p.length;for(var v=[];g<C;)void 0!==(_=c(p,String(g),I))&&(v[v.length]=_);p=v}else{var T=e.keys(p);for(g=0,C=T.length;g<C;g++){var D=T[g];void 0===(_=c(p,D,I))?delete p[D]:p[D]=_}}return I.call(l,m,p)}}(w.Lib),function(e){var t=20210305;if(!(e._array_ver&&e._array_ver>=t)){e._array_ver=t;var n=Array.prototype,r=n.indexOf,h=n.filter,d=n.forEach;e.isFunction(r)||(r=function(s,i){var u;if(null==this)return-1;var f=Object(this),a=f.length>>>0;if(0===a)return-1;var o=+i||0;if(Math.abs(o)===1/0&&(o=0),o>=a)return-1;for(u=Math.max(o>=0?o:a-Math.abs(o),0);u<a;){if(u in f&&f[u]===s)return u;u++}return-1}),e.isFunction(d)||(Array.prototype.forEach=function(i,u){var f,a;if(null!=this&&e.isFunction(i)){var o=Object(this),c=o.length>>>0;for(arguments.length>1&&(f=u),a=0;a<c;)a in o&&i.call(f,o[a],a,o),a++}}),e.mix(e,{filter:h?function(s,i,u){return h.call(s,i,u||this)}:function(s,i,u){var f=[];return e.each(s,function(a,o,c){i.call(u||this,a,o,c)&&f.push(a)}),f},indexOf:function(s,i){return r.call(i,s)},uniq:function(s){for(var i=[],u=s.length,f=0;f<u;f++){for(var a=f+1;a<u;a++)s[f]===s[a]&&(a=++f);i.push(s[f])}return i}})}}(w.Lib),function(e){var t=20200521;if(!(e._function_ver&&e._function_ver>=t)){e._function_ver=t;var n=Array.prototype,r=Function.prototype;e.isFunction(r.bind)||(r.bind=function(h){var d=this;if(1<arguments.length){var s=n.slice.call(arguments,1);return function(){return d.apply(h,arguments.length?s.concat(n.slice.call(arguments)):s)}}return function(){return arguments.length?d.apply(h,arguments):d.call(h)}})}}(w.Lib),function(e){var t=20200521;if(!(e._string_ver&&e._string_ver>=t)){e._string_ver=t;var n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,r=String.prototype,d=r.trim;d||(d=r.trim=function(){return this.replace(n,"")}),e.trim=function(s){return null==s?"":d.call(s)}}}(w.Lib),function(e){var t=20220220;e._navInfobase_ver&&e.isNumber(e._navInfobase_ver)&&e._navInfobase_ver>=t||(e._navInfobase_ver=t,e.getNavInfoByUserAgent=function(n,r){var a,d=!1,s=!0,u=e.doc,o=n.toLowerCase(),c=r.toLowerCase(),l=/harmonyos/g.test(o),m=!l&&/cros/.test(o),I=!l&&/android/g.test(o),p=/iphone/g.test(o)||/iphone/g.test(c),g=/macintosh/.test(o),C=navigator.maxTouchPoints||0,_=/ipad/g.test(o)||(g||"macintel"==c)&&C>1,v=/ucweb|ucbrowser/g.test(o),T=!v&&/nexus/g.test(o)&&/version\/[\d.]+.*safari\//g.test(o),D=/playbook/g.test(o),P=/hp-tablet/g.test(o),E=/blackberry|bb10/g.test(o),M=/symbian/g.test(o),O=/windows phone/g.test(o),R=/mobile/g.test(o),F=/arm64|aarch64/g.test(o),B=/mips64/g.test(o),b=/huaweibrowser/g.test(o),A=F||B;"linux"==c&&o.indexOf("windows nt")>=0&&(c="harmonyos",l=!0);var N=D||_||P,Y=!N&&(p||T||E||M||O||I||l||R),ne=!Y&&!N&&!m,Ie=ne&&/win32|win64|windows/.test(c),_e=Ie&&/win64|x64/.test(o),ce=ne&&/mac68k|macppc|macintosh|macintel/.test(o),q=ne&&/linux/.test(c),he="win64"==c||/wow64|x86_64|win64|x64/.test(o)||A,ie=/wow64/g.test(o),V=o.indexOf("msie "),J=o.indexOf("trident"),te=o.indexOf("rv:"),oe=d,Ee=/opera|opr/g.test(o),ge=/360se/g.test(o),Re=/maxthon/g.test(o),G=/tencenttraveler|qqbrowser/g.test(o),k=/the world/g.test(o),U=/metasr/g.test(o),H=/avant/g.test(o),ee=/firefox|fxios/g.test(o),ye=!(ee||b)&&/edge\/|edga\/|edgios\/|edg\//g.test(o),Z=!(E||D||v||Ee||ye||b)&&/chrome|crios/g.test(o),Q=Ie&&!ee&&!ye&&!Z&&(-1!=V||-1!=J||-1!=te),se="",le=0,pe=/gecko/g.test(o),Ce=Y||N,Te="";if((ce||p||_||Ie||E||D||T)&&!v&&!Ee&&!ye&&!Q&&!ee&&(a=o.match(/version\/([\d.]+).*safari\//))&&(E||D||T||(oe=s,Z=d),Te=a[1]),ye){var Be=o.indexOf("edge/");Be>-1?Be+=5:(Be=o.indexOf("edg/"))>-1?Be+=4:(Be=o.indexOf("edga/"))>-1?Be+=5:(Be=o.indexOf("edgios/"))>-1&&(Be+=7),Be>-1&&(a=(Te=o.slice(Be)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s}else if(ee)if(Ce=s,(a=o.indexOf("firefox/"))>-1){var xe=(a=o.slice(a+8)).indexOf(" ");xe>-1&&(a=a.slice(0,xe)),Te=a,(xe=a.indexOf("."))>-1&&(a=Te.slice(0,xe)),a<27&&(Ce=d)}else(p||_)&&(a=o.indexOf("fxios/"))>-1&&(Te=a=(a=o.slice(a+6)).slice(0,a.indexOf(" ")));else if(Q)-1!=V?se=a=(a=o.slice(V+5)).slice(0,a.indexOf(";")):-1!=te?se=a=(a=(a=o.slice(te+3)).slice(0,a.indexOf(";"))).slice(0,a.indexOf(")")):-1!=J&&(se=a=(a=o.slice(J+7)).slice(0,a.indexOf(";"))),(""===se||se>=10)&&(Ce=s),Te=a;else if(oe)Ce=s,(a=Te.indexOf("."))>-1&&(a=Te.slice(0,a))<7&&(Ce=d);else if(v)(a=o.indexOf("ucweb"))>-1?Te=o.slice(a+5):(a=o.indexOf("ucbrowser/"))>-1&&(a=(Te=o.slice(a+10)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s;else if(Ee)(a=o.indexOf("version/"))>-1?Te=o.slice(a+8):(a=o.indexOf("opr/"))>-1&&(Te=o.slice(a+4)),Ce=s;else if(M)(a=o.indexOf("browserng/"))>-1&&(Te=o.slice(a+10)),Ce=s;else if(O)(a=o.indexOf("iemobile/"))>-1&&(Te=o.slice(a+9)),Ce=s;else if(Z){var me=o.indexOf("chrome/");me>-1?(a=(Te=o.slice(me+7)).indexOf(" "))>-1&&(Te=Te.slice(0,a)):(me=o.indexOf("crios/"))>-1&&(a=(Te=o.slice(me+6)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s,(a=Te.indexOf("."))>-1&&(a=Te.slice(0,a))<27&&(Ce=d)}else if(b){var Me=o.indexOf("huaweibrowser");Me>-1&&(a=(Te=o.slice(Me+14)).indexOf(" "))>-1&&(Te=Te.slice(0,a)),Ce=s}return(ye||Q)&&(u.documentMode?le=u.documentMode:(le=5,u.compatMode&&"CSS1Compat"==u.compatMode&&(le=7))),(ce||q)&&(he=!0,ce&&(a=o.match(/mac os x (\d+)(_|\.)(\d+)/))&&a.length>3&&(10==a[1]&&a[3]<14||a[1]<10)&&(he=!1)),{bWin:Ie,bMac:ce,bLinux:q,bMobile:Y,bPad:N,bChromeOS:m,bHarmonyOS:l,bArm64:F,bMips64:B,bEmbed:A,bAndroid:I,biPhone:p,biPad:_,bWin64:_e,bWOW64:ie,bOSx64:he,bIE:Q,bEdge:ye,bChrome:Z,bFirefox:ee,bSafari:oe,bOpera:Ee,bNexus:T,bUC:v,b360SE:ge,bMaxthon:Re,bTencentTraveler:G,bTheWorld:k,bMetaSr:U,bAvant:H,bHuaWeiBrowser:b,bGecko:pe,bHTML5Edition:Ce,strBrowserVersion:Te,IEMode:le}})}(w.Lib),function(e){var t=20210305;if(!(e._defineProperty_ver&&e._defineProperty_ver>=t)){e._defineProperty_ver=t;var n=!1;if(!("userAgentData"in navigator)){var h,r=navigator;h=e.getNavInfoByUserAgent(r.userAgent,r.platform),w.navInfo=h,h.bIE&&(n=8==h.strBrowserVersion)}n?Object.defineProperty=function(d,s,i){d[s]=i.value||i.get&&i.get()}:Object.defineProperty||(Object.defineProperty=function(d,s,i){var u=d[s],f=function(){return i.get.apply(d,[u])},a=function(c){return u=i.set.apply(d,[c])};if(d.__defineGetter__)d.__defineGetter__(s,f),d.__defineSetter__(s,a);else{var o=function(c){event.propertyName==s&&(d.detachEvent("onpropertychange",o),a(d[s]),d[s]=f,d[s].toString=f,d.attachEvent("onpropertychange",o))};d[s]=f,d[s].toString=f,d.attachEvent("onpropertychange",o)}}),Object.create||(Object.create=function(d,s){if("object"!=typeof d&&"function"!=typeof d)return{};if(null===d)return{};if(typeof s<"u")return{};function i(){}return i.prototype=d,new i})}}(w.Lib),function(e,t){var l,m,n="",d=e.getLogger(),s=e.isDef,i=e.each,o={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},c={},I=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;function p(v){var T=typeof v;return null==v||"object"!==T&&"function"!==T}function _(v){return encodeURIComponent(String(v))}i(o,function(v,T){c[v]=T}),e.mix(e,{urlEncode:_,urlDecode:function(v){return decodeURIComponent(v.replace(/\+/g," "))},fromUnicode:function(v){return v.replace(/\\u([a-f\d]{4})/gi,function(T,D){return String.fromCharCode(parseInt(D,16))})},escapeHtml:function(v){return(v+"").replace(function g(){if(l)return l;var v=n;return i(o,function(T){v+=T+"|"}),v=v.slice(0,-1),l=new RegExp(v,"g")}(),function(T){return c[T]})},escapeRegExp:function(v){return v.replace(I,"\\$&")},unEscapeHtml:function(v){return v.replace(function C(){if(m)return m;var v=n;return i(c,function(T){v+=T+"|"}),v+="&#(\\d{1,5});",m=new RegExp(v,"g")}(),function(T,D){return o[T]||String.fromCharCode(+D)})},param:function(v,T,D,P){T=T||"&",D=D||"=",e.isUndef(P)&&(P=!0);var E=[];return i(v,function(M,O){var R=_(O);p(M)?(E.push(R),s(M)&&E.push(D,_(M+n)),E.push(T)):e.isArray(M)&&M.length&&i(M,function(F){p(F)&&(E.push(R,P?_("[]"):n),s(F)&&E.push(D,_(F+n)),E.push(T))})}),E.pop(),E.join(n)},unparam:function(v,T,D){if(!e.isString(v)||!(v=e.trim(v)))return{};D=D||"=";for(var E,R,F,P={},M=e.urlDecode,O=v.split(T=T||"&"),B=0,b=O.length;B<b;++B){if(-1===(E=e.indexOf(D,O[B])))R=M(O[B]),F=void 0;else{R=M(O[B].substring(0,E)),F=O[B].substring(E+1);try{F=M(F)}catch(A){d.error("decodeURIComponent error : "+F),d.error(A)}e.endsWith(R,"[]")&&(R=R.substring(0,R.length-2))}R in P?e.isArray(P[R])?P[R].push(F):P[R]=[P[R],F]:P[R]=F}return P}})}(w.Lib),function(e){var t=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function n(h,d){for(var s=[],i=0;i<h.length;i++){var u=h[i];!u||"."===u||(".."===u?s.length&&".."!==s[s.length-1]?s.pop():d&&s.push(".."):s.push(u))}return s}var r=e.Path={resolve:function(){var s,u,h="",i=arguments,f=0;for(s=i.length-1;s>=0&&!f;s--)e.isString(u=i[s])&&u&&(h=u+"/"+h,f="/"===u.charAt(0));return(f?"/":"")+n(e.filter(h.split("/"),function(a){return!!a}),!f).join("/")||"."},normalize:function(h){var d="/"===h.charAt(0),s="/"===h.slice(-1);return!(h=n(e.filter(h.split("/"),function(i){return!!i}),!d).join("/"))&&!d&&(h="."),h&&s&&(h+="/"),(d?"/":"")+h},join:function(){var h=e.makeArray(arguments);return r.normalize(e.filter(h,function(d){return d&&e.isString(d)}).join("/"))},relative:function(h,d){h=r.normalize(h),d=r.normalize(d);var u,f,s=e.filter(h.split("/"),function(c){return!!c}),i=[],a=e.filter(d.split("/"),function(c){return!!c}),o=Math.min(s.length,a.length);for(u=0;u<o&&s[u]===a[u];u++);for(f=u;u<s.length;)i.push(".."),u++;return(i=i.concat(a.slice(f))).join("/")},basename:function(h,d){var i;return i=(h.match(t)||[])[3]||"",d&&i&&i.slice(-1*d.length)===d&&(i=i.slice(0,-1*d.length)),i},dirname:function(h){var d=h.match(t)||[],s=d[1]||"",i=d[2]||"";return s||i?(i&&(i=i.substring(0,i.length-1)),s+i):"."},extname:function(h){return(h.match(t)||[])[4]||""}}}(w.Lib),function(e,t){function n(h){h._queryMap||(h._queryMap=e.unparam(h._query))}function r(h){this._query=h||""}r.prototype={constructor:r,clone:function(){return new r(this.toString())},reset:function(h){var d=this;return d._query=h||"",d._queryMap=null,d},count:function(){var d=0;return n(this),e.each(this._queryMap,function(s){e.isArray(s)?d+=s.length:d++}),d},has:function(h){var s;return n(this),s=this._queryMap,h?h in s:!e.isEmptyObject(s)},get:function(h){var s;return n(this),s=this._queryMap,h?s[h]:s},keys:function(){return n(this),e.keys(this._queryMap)},set:function(h,d){var i,s=this;return n(s),i=s._queryMap,e.isString(h)?s._queryMap[h]=d:(h instanceof r&&(h=h.get()),e.each(h,function(u,f){i[f]=u})),s},remove:function(h){var d=this;return n(d),h?delete d._queryMap[h]:d._queryMap={},d},add:function(h,d){var i,u,s=this;return e.isString(h)?(n(s),u=e.isUndef(u=(i=s._queryMap)[h])?d:[].concat(u).concat(d),i[h]=u):(h instanceof r&&(h=h.get()),e.each(h,function(f,a){s.add(a,f)})),s},toString:function(h){return n(this),e.param(this._queryMap,t,t,h)}},e.uriQuery=r}(w.Lib),function(e){var t=e.uriQuery,n=e.each,r=e.Path,h=e.getLogger(),d=/[#\/\?@]/g,s=/[#\?]/g,i=/[#@]/g,u=/#/g,f={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},a=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function c(I,p){return I.toLowerCase()===p.toLowerCase()}function l(I,p){return encodeURI(I).replace(p,function(g){return"%"+function o(I){return 1===I.length?"0"+I:I}(g.charCodeAt(0).toString(16))})}function m(I){if(I instanceof m)return I.clone();var p,g=this;return e.mix(g,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""}),p=m.getComponents(I),n(p,function(C,_){if(C=C||"","query"===_)g.query=new t(C);else{try{C=e.urlDecode(C)}catch(v){h.error(v+"urlDecode error : "+C)}g[_]=C}}),g}m.prototype={constructor:m,clone:function(){var I=new m,p=this;return n(f,function(g,C){I[C]=p[C]}),I.query=I.query.clone(),I},resolve:function(I){e.isString(I)&&(I=new m(I));var C,g=0,v=this.clone();return n(["scheme","userInfo","hostname","port","path","query","fragment"],function(T){if("path"===T)if(g)v[T]=I[T];else{var D=I.path;D&&(g=1,e.startsWith(D,"/")||(v.hostname&&!v.path?D="/"+D:v.path&&-1!==(C=v.path.lastIndexOf("/"))&&(D=v.path.slice(0,C+1)+D)),v.path=r.normalize(D))}else"query"===T?(g||I.query.toString())&&(v.query=I.query.clone(),g=1):(g||I[T])&&(v[T]=I[T],g=1)}),v},getScheme:function(){return this.scheme},setScheme:function(I){return this.scheme=I,this},getHostname:function(){return this.hostname},setHostname:function(I){return this.hostname=I,this},setUserInfo:function(I){return this.userInfo=I,this},getUserInfo:function(){return this.userInfo},setPort:function(I){return this.port=I,this},getPort:function(){return this.port},setPath:function(I){return this.path=I,this},getPath:function(){return this.path},setQuery:function(I){return e.isString(I)&&(e.startsWith(I,"?")&&(I=I.slice(1)),I=new t(l(I,i))),this.query=I,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(I){return e.startsWith(I,"#")&&(I=I.slice(1)),this.fragment=I,this},isSameOriginAs:function(I){var p=this;return c(p.hostname,I.hostname)&&c(p.scheme,I.scheme)&&c(p.port,I.port)},toString:function(I){var C,_,v,T,D,P,E,p=[],g=this;return(C=g.scheme)&&(p.push(l(C,d)),p.push(":")),(_=g.hostname)&&(p.push("//"),(E=g.userInfo)&&(p.push(l(E,d)),p.push("@")),p.push(encodeURIComponent(_)),(T=g.port)&&(p.push(":"),p.push(T))),(v=g.path)&&(_&&!e.startsWith(v,"/")&&(v="/"+v),v=r.normalize(v),p.push(l(v,s))),(P=g.query.toString.call(g.query,I))&&(p.push("?"),p.push(P)),(D=g.fragment)&&(p.push("#"),p.push(l(D,u))),p.join("")}},m.getComponents=function(I){var g=(I=I||"").match(a)||[],C={};return n(f,function(_,v){C[v]=g[_]}),C},e.Uri=m}(w.Lib),function(e,t){var n=e.Lib,r=n.win,h=20200622;if(!(n._promise_ver&&n.isNumber(n._promise_ver)&&n._promise_ver>=h)){if(n._promise_ver=h,n.isFunction(r.__zone_symbol__Promise)&&(n.nativePromise=r.__zone_symbol__Promise),Rt&&Rt.Promise)return n.Promise=Rt.Promise,void(n.nativePromise||(n.nativePromise=n.Promise));if(r&&r.Promise)return n.Promise=r.Promise,void(n.nativePromise||(n.nativePromise=n.Promise));r.Map||(r.Map=function(){this.keys=[],this.data={},this.set=function(d,s){null==this.data[d]&&-1==this.keys.indexOf(d)&&this.keys.push(d),this.data[d]=s},this.get=function(d){return this.data[d]}}),function(d){if("object"==typeof exports&&typeof module<"u")module.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var s;typeof window<"u"?s=window:typeof global<"u"?s=global:typeof Rt<"u"&&(s=Rt),s.Promise=d()}}(function(){return function u(f,a,o){function c(I,p){if(!a[I]){if(!f[I]){var g="function"==typeof _dereq_&&_dereq_;if(!p&&g)return g(I,!0);if(l)return l(I,!0);var C=new Error("Cannot find module '"+I+"'");throw C.code="MODULE_NOT_FOUND",C}var _=a[I]={exports:{}};f[I][0].call(_.exports,function(v){return c(f[I][1][v]||v)},_,_.exports,u,f,a,o)}return a[I].exports}for(var l="function"==typeof _dereq_&&_dereq_,m=0;m<o.length;m++)c(o[m]);return c}({1:[function(u,f,a){f.exports=function(o){function c(m){var I=new l(m),p=I.promise();return I.setHowMany(1),I.setUnwrap(),I.init(),p}var l=o._SomePromiseArray;o.any=function(m){return c(m)},o.prototype.any=function(){return c(this)}}},{}],2:[function(u,f,a){function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new _(16),this._normalQueue=new _(16),this._haveDrainedQueues=!1;var v=this;this.drainQueues=function(){v._drainQueues()},this._schedule=C}function I(v){for(;v.length()>0;)p(v)}function p(v){var T=v.shift();if("function"!=typeof T)T._settlePromises();else{var D=v.shift(),P=v.shift();T.call(D,P)}}var g;try{throw new Error}catch(v){g=v}var C=u("./schedule"),_=u("./queue");o.prototype.setScheduler=function(v){var T=this._schedule;return this._schedule=v,this._customScheduler=!0,T},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(v,T){T?(process.stderr.write("Fatal "+(v instanceof Error?v.stack:v)+"\n"),process.exit(2)):this.throwLater(v)},o.prototype.throwLater=function(v,T){if(1===arguments.length&&(T=v,v=function(){throw T}),typeof setTimeout<"u")setTimeout(function(){v(T)},0);else try{this._schedule(function(){v(T)})}catch{throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},o.prototype.invokeLater=function c(v,T,D){this._lateQueue.push(v,T,D),this._queueTick()},o.prototype.invoke=function l(v,T,D){this._normalQueue.push(v,T,D),this._queueTick()},o.prototype.settlePromises=function m(v){this._normalQueue._pushOne(v),this._queueTick()},o.prototype._drainQueues=function(){I(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,I(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},f.exports=o,f.exports.firstLineError=g},{"./queue":26,"./schedule":29}],3:[function(u,f,a){f.exports=function(o,c,l,m){var I=!1,p=function(v,T){this._reject(T)},g=function(v,T){T.promiseRejectionQueued=!0,T.bindingPromise._then(p,p,null,this,v)},C=function(v,T){0==(50397184&this._bitField)&&this._resolveCallback(T.target)},_=function(v,T){T.promiseRejectionQueued||this._reject(v)};o.prototype.bind=function(v){I||(I=!0,o.prototype._propagateFrom=m.propagateFromFunction(),o.prototype._boundValue=m.boundValueFunction());var T=l(v),D=new o(c);D._propagateFrom(this,1);var P=this._target();if(D._setBoundTo(T),T instanceof o){var E={promiseRejectionQueued:!1,promise:D,target:P,bindingPromise:T};P._then(c,g,void 0,D,E),T._then(C,_,void 0,D,E),D._setOnCancel(T)}else D._resolveCallback(P);return D},o.prototype._setBoundTo=function(v){void 0!==v?(this._bitField=2097152|this._bitField,this._boundTo=v):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(v,T){return o.resolve(T).bind(v)}}},{}],4:[function(u,f,a){var c;typeof Promise<"u"&&(c=Promise);var l=u("./promise")();l.noConflict=function o(){try{Promise===l&&(Promise=c)}catch{}return l},f.exports=l},{"./promise":22}],5:[function(u,f,a){var o=Object.create;if(o){var c=o(null),l=o(null);c[" size"]=l[" size"]=0}f.exports=function(m){function p(D){var E=function I(D,P){var E;if(null!=D&&(E=D[P]),"function"!=typeof E){var M="Object "+v.classString(D)+" has no method '"+v.toString(P)+"'";throw new m.TypeError(M)}return E}(D,this.pop());return E.apply(D,this)}function g(D){return D[this]}function C(D){var P=+this;return 0>P&&(P=Math.max(0,P+D.length)),D[P]}var v=u("./util"),T=v.canEvaluate;m.prototype.call=function(D){var P=[].slice.call(arguments,1);return P.push(D),this._then(p,void 0,void 0,P,void 0)},m.prototype.get=function(D){var P;if("number"==typeof D)P=C;else if(T){var M=(void 0)(D);P=null!==M?M:g}else P=g;return this._then(P,void 0,void 0,D,void 0)}}},{"./util":36}],6:[function(u,f,a){f.exports=function(o,c,l,m){var I=u("./util"),p=I.tryCatch,g=I.errorObj,C=o._async;o.prototype.break=o.prototype.cancel=function(){if(!m.cancellation())return this._warn("cancellation is disabled");for(var _=this,v=_;_._isCancellable();){if(!_._cancelBy(v)){v._isFollowing()?v._followee().cancel():v._cancelBranched();break}var T=_._cancellationParent;if(null==T||!T._isCancellable()){_._isFollowing()?_._followee().cancel():_._cancelBranched();break}_._isFollowing()&&_._followee().cancel(),_._setWillBeCancelled(),v=_,_=T}},o.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},o.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},o.prototype._cancelBy=function(_){return _===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},o.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},o.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),C.invoke(this._cancelPromises,this,void 0))},o.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},o.prototype._unsetOnCancel=function(){this._onCancelField=void 0},o.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},o.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},o.prototype._doInvokeOnCancel=function(_,v){if(I.isArray(_))for(var T=0;T<_.length;++T)this._doInvokeOnCancel(_[T],v);else if(void 0!==_)if("function"==typeof _){if(!v){var D=p(_).call(this._boundValue());D===g&&(this._attachExtraTrace(D.e),C.throwLater(D.e))}}else _._resultCancelled(this)},o.prototype._invokeOnCancel=function(){var _=this._onCancel();this._unsetOnCancel(),C.invoke(this._doInvokeOnCancel,this,_)},o.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},o.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(u,f,a){f.exports=function(o){var l=u("./util"),m=u("./es5").keys,I=l.tryCatch,p=l.errorObj;return function c(g,C,_){return function(v){var T=_._boundValue();e:for(var D=0;D<g.length;++D){var P=g[D];if(P===Error||null!=P&&P.prototype instanceof Error){if(v instanceof P)return I(C).call(T,v)}else if("function"==typeof P){var E=I(P).call(T,v);if(E===p)return E;if(E)return I(C).call(T,v)}else if(l.isObject(v)){for(var M=m(P),O=0;O<M.length;++O){var R=M[O];if(P[R]!=v[R])continue e}return I(C).call(T,v)}}return o}}}},{"./es5":13,"./util":36}],8:[function(u,f,a){f.exports=function(o){function c(){this._trace=new c.CapturedTrace(m())}function m(){var g=p.length-1;return g>=0?p[g]:void 0}var I=!1,p=[];return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},c.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,p.push(this._trace))},c.prototype._popContext=function(){if(void 0!==this._trace){var g=p.pop(),C=g._promiseCreated;return g._promiseCreated=null,C}return null},c.CapturedTrace=null,c.create=function l(){return I?new c:void 0},c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var g=o.prototype._pushContext,C=o.prototype._popContext,_=o._peekContext,v=o.prototype._peekContext,T=o.prototype._promiseCreated;c.deactivateLongStackTraces=function(){o.prototype._pushContext=g,o.prototype._popContext=C,o._peekContext=_,o.prototype._peekContext=v,o.prototype._promiseCreated=T,I=!1},I=!0,o.prototype._pushContext=c.prototype._pushContext,o.prototype._popContext=c.prototype._popContext,o._peekContext=o.prototype._peekContext=m,o.prototype._promiseCreated=function(){var D=this._peekContext();D&&null==D._promiseCreated&&(D._promiseCreated=this)}},c}},{}],9:[function(u,f,a){f.exports=function(o,c,l,m){function I(we,Ae){return{promise:Ae}}function p(){return!1}function g(we,Ae,Ue){var He=this;try{we(Ae,Ue,function(Ke){if("function"!=typeof Ke)throw new TypeError("onCancel must be a function, got: "+H.toString(Ke));He._attachCancellationCallback(Ke)})}catch(Ke){return Ke}}function C(we){if(!this._isCancellable())return this;var Ae=this._onCancel();void 0!==Ae?H.isArray(Ae)?Ae.push(we):this._setOnCancel([Ae,we]):this._setOnCancel(we)}function _(){return this._onCancelField}function v(we){this._onCancelField=we}function T(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(we,Ae){if(0!=(1&Ae)){this._cancellationParent=we;var Ue=we._branchesRemainingToCancel;void 0===Ue&&(Ue=0),we._branchesRemainingToCancel=Ue+1}0!=(2&Ae)&&we._isBound()&&this._setBoundTo(we._boundTo)}function E(){var we=this._boundTo;return void 0!==we&&we instanceof o?we.isFulfilled()?we.value():void 0:we}function M(){this._trace=new oe(this._peekContext())}function O(we,Ae){if(ye(we)){var Ue=this._trace;if(void 0!==Ue&&Ae&&(Ue=Ue._parent),void 0!==Ue)Ue.attachExtraTrace(we);else if(!we.__stackCleaned__){var He=_e(we);H.notEnumerableProp(we,"stack",He.message+"\n"+He.stack.join("\n")),H.notEnumerableProp(we,"__stackCleaned__",!0)}}}function R(){this._trace=void 0}function b(we,Ae,Ue){if(Je.warnings){var He,Ke=new U(we);if(Ae)Ue._attachExtraTrace(Ke);else if(Je.longStackTraces&&(He=o._peekContext()))He.attachExtraTrace(Ke);else{var rt=_e(Ke);Ke.stack=rt.message+"\n"+rt.stack.join("\n")}ve("warning",Ke)||ce(Ke,"",!0)}}function ne(we){for(var Ae=[],Ue=0;Ue<we.length;++Ue){var He=we[Ue],Ke="    (No stack trace)"===He||le.test(He),rt=Ke&&Ve(He);Ke&&!rt&&(Ce&&" "!==He.charAt(0)&&(He="    "+He),Ae.push(He))}return Ae}function _e(we){var Ae=we.stack,Ue=we.toString();return Ae="string"==typeof Ae&&Ae.length>0?function Ie(we){for(var Ae=we.stack.replace(/\s+$/g,"").split("\n"),Ue=0;Ue<Ae.length;++Ue){var He=Ae[Ue];if("    (No stack trace)"===He||le.test(He))break}return Ue>0&&"SyntaxError"!=we.name&&(Ae=Ae.slice(Ue)),Ae}(we):["    (No stack trace)"],{message:Ue,stack:"SyntaxError"==we.name?Ae:ne(Ae)}}function ce(we,Ae,Ue){var He;typeof console<"u"&&(He=H.isObject(we)?Ae+pe(we.stack,we):Ae+String(we),"function"==typeof Re?Re(He,Ue):("function"==typeof console.log||"object"==typeof console.log)&&console.log(He))}function q(we,Ae,Ue,He){var Ke=!1;try{"function"==typeof Ae&&(Ke=!0,"rejectionHandled"===we?Ae(He):Ae(Ue,He))}catch(rt){k.throwLater(rt)}"unhandledRejection"===we?ve(we,Ue,He)||Ke||ce(Ue,"Unhandled rejection "):ve(we,He)}function he(we){var Ae;if("function"==typeof we)Ae="[function "+(we.name||"anonymous")+"]";else{if(Ae=we&&"function"==typeof we.toString?we.toString():H.toString(we),/\[object [a-zA-Z0-9$_]+\]/.test(Ae))try{Ae=JSON.stringify(we)}catch{}0===Ae.length&&(Ae="(empty array)")}return"(<"+function ie(we){return we.length<41?we:we.substr(0,38)+"..."}(Ae)+">, no stack trace)"}function V(){return"function"==typeof Ne}function J(we){var Ae=we.match(Ye);return Ae?{fileName:Ae[1],line:parseInt(Ae[2],10)}:void 0}function oe(we){this._parent=we,this._promisesCreated=0;var Ae=this._length=1+(void 0===we?0:we._length);Ne(this,oe),Ae>32&&this.uncycle()}var Ee,ge,Re,G,k=o._async,U=u("./errors").Warning,H=u("./util"),ee=u("./es5"),ye=H.canAttachTrace,Z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,se=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,le=null,pe=null,Ce=!1,Te=!(0==H.env("BLUEBIRD_DEBUG")||!H.env("BLUEBIRD_DEBUG")&&"development"!==H.env("NODE_ENV")),Be=!(0==H.env("BLUEBIRD_WARNINGS")||!Te&&!H.env("BLUEBIRD_WARNINGS")),xe=!(0==H.env("BLUEBIRD_LONG_STACK_TRACES")||!Te&&!H.env("BLUEBIRD_LONG_STACK_TRACES")),me=0!=H.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Be||!!H.env("BLUEBIRD_W_FORGOTTEN_RETURN"));(function(){function we(){for(var He=0;He<Ue.length;++He)Ue[He]._notifyUnhandledRejection();Ae()}function Ae(){Ue.length=0}var Ue=[];G=function(He){Ue.push(He),setTimeout(we,1)},ee.defineProperty(o,"_unhandledRejectionCheck",{value:we}),ee.defineProperty(o,"_unhandledRejectionClear",{value:Ae})})(),o.prototype.suppressUnhandledRejections=function(){var we=this._target();we._bitField=-1048577&we._bitField|524288},o.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),G(this))},o.prototype._notifyUnhandledRejectionIsHandled=function(){q("rejectionHandled",Ee,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},o.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var we=this._settledValue();this._setUnhandledRejectionIsNotified(),q("unhandledRejection",ge,we,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},o.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},o.prototype._warn=function(we,Ae,Ue){return b(we,Ae,Ue||this)},o.onPossiblyUnhandledRejection=function(we){var Ae=o._getContext();ge=H.contextBind(Ae,we)},o.onUnhandledRejectionHandled=function(we){var Ae=o._getContext();Ee=H.contextBind(Ae,we)};var Me=function(){};o.longStackTraces=function(){if(k.haveItemsQueued()&&!Je.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Je.longStackTraces&&V()){var we=o.prototype._captureStackTrace,Ae=o.prototype._attachExtraTrace,Ue=o.prototype._dereferenceTrace;Je.longStackTraces=!0,Me=function(){if(k.haveItemsQueued()&&!Je.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");o.prototype._captureStackTrace=we,o.prototype._attachExtraTrace=Ae,o.prototype._dereferenceTrace=Ue,c.deactivateLongStackTraces(),Je.longStackTraces=!1},o.prototype._captureStackTrace=M,o.prototype._attachExtraTrace=O,o.prototype._dereferenceTrace=R,c.activateLongStackTraces()}},o.hasLongStackTraces=function(){return Je.longStackTraces&&V()};var Oe={unhandledrejection:{before:function(){var we=H.global.onunhandledrejection;return H.global.onunhandledrejection=null,we},after:function(we){H.global.onunhandledrejection=we}},rejectionhandled:{before:function(){var we=H.global.onrejectionhandled;return H.global.onrejectionhandled=null,we},after:function(we){H.global.onrejectionhandled=we}}},ze=function(){var we=function(Ue,He){if(!Ue)return!H.global.dispatchEvent(He);var Ke;try{return Ke=Ue.before(),!H.global.dispatchEvent(He)}finally{Ue.after(Ke)}};try{if("function"==typeof CustomEvent){var Ae=new CustomEvent("CustomEvent");return H.global.dispatchEvent(Ae),function(He,Ke){He=He.toLowerCase();var st=new CustomEvent(He,{detail:Ke,cancelable:!0});return ee.defineProperty(st,"promise",{value:Ke.promise}),ee.defineProperty(st,"reason",{value:Ke.reason}),we(Oe[He],st)}}return"function"==typeof Event?(Ae=new Event("CustomEvent"),H.global.dispatchEvent(Ae),function(He,Ke){He=He.toLowerCase();var rt=new Event(He,{cancelable:!0});return rt.detail=Ke,ee.defineProperty(rt,"promise",{value:Ke.promise}),ee.defineProperty(rt,"reason",{value:Ke.reason}),we(Oe[He],rt)}):((Ae=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),H.global.dispatchEvent(Ae),function(Ue,He){Ue=Ue.toLowerCase();var Ke=document.createEvent("CustomEvent");return Ke.initCustomEvent(Ue,!1,!0,He),we(Oe[Ue],Ke)})}catch{}return function(){return!1}}(),Ze=H.isNode?function(){return process.emit.apply(process,arguments)}:H.global?function(we){var Ae="on"+we.toLowerCase(),Ue=H.global[Ae];return!!Ue&&(Ue.apply(H.global,[].slice.call(arguments,1)),!0)}:function(){return!1},ot={promiseCreated:I,promiseFulfilled:I,promiseRejected:I,promiseResolved:I,promiseCancelled:I,promiseChained:function(we,Ae,Ue){return{promise:Ae,child:Ue}},warning:function(we,Ae){return{warning:Ae}},unhandledRejection:function(we,Ae,Ue){return{reason:Ae,promise:Ue}},rejectionHandled:I},ve=function(we){var Ae=!1;try{Ae=Ze.apply(null,arguments)}catch(He){k.throwLater(He),Ae=!0}var Ue=!1;try{Ue=ze(we,ot[we].apply(null,arguments))}catch(He){k.throwLater(He),Ue=!0}return Ue||Ae};o.config=function(we){if("longStackTraces"in(we=Object(we))&&(we.longStackTraces?o.longStackTraces():!we.longStackTraces&&o.hasLongStackTraces()&&Me()),"warnings"in we){var Ae=we.warnings;Je.warnings=!!Ae,me=Je.warnings,H.isObject(Ae)&&"wForgottenReturn"in Ae&&(me=!!Ae.wForgottenReturn)}if("cancellation"in we&&we.cancellation&&!Je.cancellation){if(k.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=T,o.prototype._propagateFrom=D,o.prototype._onCancel=_,o.prototype._setOnCancel=v,o.prototype._attachCancellationCallback=C,o.prototype._execute=g,Fe=D,Je.cancellation=!0}if("monitoring"in we&&(we.monitoring&&!Je.monitoring?(Je.monitoring=!0,o.prototype._fireEvent=ve):!we.monitoring&&Je.monitoring&&(Je.monitoring=!1,o.prototype._fireEvent=p)),"asyncHooks"in we&&H.nodeSupportsAsyncResource){var He=!!we.asyncHooks;Je.asyncHooks!==He&&(Je.asyncHooks=He,He?l():m())}return o},o.prototype._fireEvent=p,o.prototype._execute=function(we,Ae,Ue){try{we(Ae,Ue)}catch(He){return He}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(we){},o.prototype._attachCancellationCallback=function(we){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._dereferenceTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(we,Ae){};var Fe=function P(we,Ae){0!=(2&Ae)&&we._isBound()&&this._setBoundTo(we._boundTo)},Ve=function(){return!1},Ye=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;H.inherits(oe,Error),c.CapturedTrace=oe,oe.prototype.uncycle=function(){var we=this._length;if(!(2>we)){for(var Ae=[],Ue={},He=0,Ke=this;void 0!==Ke;++He)Ae.push(Ke),Ke=Ke._parent;for(He=(we=this._length=He)-1;He>=0;--He){var rt=Ae[He].stack;void 0===Ue[rt]&&(Ue[rt]=He)}for(He=0;we>He;++He){var ht=Ue[Ae[He].stack];if(void 0!==ht&&ht!==He){ht>0&&(Ae[ht-1]._parent=void 0,Ae[ht-1]._length=1),Ae[He]._parent=void 0,Ae[He]._length=1;var ft=He>0?Ae[He-1]:this;we-1>ht?(ft._parent=Ae[ht+1],ft._parent.uncycle(),ft._length=ft._parent._length+1):(ft._parent=void 0,ft._length=1);for(var pt=ft._length+1,Ct=He-2;Ct>=0;--Ct)Ae[Ct]._length=pt,pt++;return}}}},oe.prototype.attachExtraTrace=function(we){if(!we.__stackCleaned__){this.uncycle();for(var Ae=_e(we),Ue=Ae.message,He=[Ae.stack],Ke=this;void 0!==Ke;)He.push(ne(Ke.stack.split("\n"))),Ke=Ke._parent;(function Y(we){for(var Ae=we[0],Ue=1;Ue<we.length;++Ue){for(var He=we[Ue],Ke=Ae.length-1,rt=Ae[Ke],st=-1,ht=He.length-1;ht>=0;--ht)if(He[ht]===rt){st=ht;break}for(ht=st;ht>=0&&Ae[Ke]===He[ht];--ht)Ae.pop(),Ke--;Ae=He}})(He),function N(we){for(var Ae=0;Ae<we.length;++Ae)(0===we[Ae].length||Ae+1<we.length&&we[Ae][0]===we[Ae+1][0])&&(we.splice(Ae,1),Ae--)}(He),H.notEnumerableProp(we,"stack",function A(we,Ae){for(var Ue=0;Ue<Ae.length-1;++Ue)Ae[Ue].push("From previous event:"),Ae[Ue]=Ae[Ue].join("\n");return Ue<Ae.length&&(Ae[Ue]=Ae[Ue].join("\n")),we+"\n"+Ae.join("\n")}(Ue,He)),H.notEnumerableProp(we,"__stackCleaned__",!0)}};var Ne=function(){var we=/^\s*at\s*/,Ae=function(rt,st){return"string"==typeof rt?rt:void 0!==st.name&&void 0!==st.message?st.toString():he(st)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,le=we,pe=Ae;var Ue=Error.captureStackTrace;return Ve=function(rt){return Z.test(rt)},function(rt,st){Error.stackTraceLimit+=6,Ue(rt,st),Error.stackTraceLimit-=6}}var Ke,He=new Error;if("string"==typeof He.stack&&He.stack.split("\n")[0].indexOf("stackDetection@")>=0)return le=/@/,pe=Ae,Ce=!0,function(rt){rt.stack=(new Error).stack};try{throw new Error}catch(rt){Ke="stack"in rt}return"stack"in He||!Ke||"number"!=typeof Error.stackTraceLimit?(pe=function(rt,st){return"string"==typeof rt?rt:"object"!=typeof st&&"function"!=typeof st||void 0===st.name||void 0===st.message?he(st):st.toString()},null):(le=we,pe=Ae,function(rt){Error.stackTraceLimit+=6;try{throw new Error}catch(st){rt.stack=st.stack}Error.stackTraceLimit-=6})}();typeof console<"u"&&typeof console.warn<"u"&&(Re=function(we){console&&console.warn&&console.warn(we)},H.isNode&&process.stderr.isTTY?Re=function(we,Ae){console&&console.warn&&console.warn((Ae?"\x1b[33m":"\x1b[31m")+we+"\x1b[0m\n")}:H.isNode||"string"!=typeof(new Error).stack||(Re=function(we,Ae){console&&console.warn&&console.warn("%c"+we,Ae?"color: darkorange":"color: red")}));var Je={warnings:Be,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return xe&&o.longStackTraces(),{asyncHooks:function(){return Je.asyncHooks},longStackTraces:function(){return Je.longStackTraces},warnings:function(){return Je.warnings},cancellation:function(){return Je.cancellation},monitoring:function(){return Je.monitoring},propagateFromFunction:function(){return Fe},boundValueFunction:function(){return E},checkForgottenReturns:function F(we,Ae,Ue,He,Ke){if(void 0===we&&null!==Ae&&me){if(void 0!==Ke&&Ke._returnedNonUndefined()||0==(65535&He._bitField))return;Ue&&(Ue+=" ");var rt="",st="";if(Ae._trace){for(var ht=Ae._trace.stack.split("\n"),ft=ne(ht),pt=ft.length-1;pt>=0;--pt){var Ct=ft[pt];if(!Q.test(Ct)){var St=Ct.match(se);St&&(rt="at "+St[1]+":"+St[2]+":"+St[3]+" ");break}}if(ft.length>0){var At=ft[0];for(pt=0;pt<ht.length;++pt)if(ht[pt]===At){pt>0&&(st="\n"+ht[pt-1]);break}}}He._warn("a promise was created in a "+Ue+"handler "+rt+"but was not returned from it, see http://goo.gl/rRqMUw"+st,!0,Ae)}},setBounds:function te(we,Ae){if(V()){for(var Ue,He,Ke=(we.stack||"").split("\n"),rt=(Ae.stack||"").split("\n"),st=-1,ht=-1,ft=0;ft<Ke.length;++ft)if(pt=J(Ke[ft])){Ue=pt.fileName,st=pt.line;break}for(ft=0;ft<rt.length;++ft){var pt;if(pt=J(rt[ft])){He=pt.fileName,ht=pt.line;break}}0>st||0>ht||!Ue||!He||Ue!==He||st>=ht||(Ve=function(Ct){if(Z.test(Ct))return!0;var St=J(Ct);return!!(St&&St.fileName===Ue&&st<=St.line&&St.line<=ht)})}},warn:b,deprecated:function B(we,Ae){var Ue=we+" is deprecated and will be removed in a future version.";return Ae&&(Ue+=" Use "+Ae+" instead."),b(Ue)},CapturedTrace:oe,fireDomEvent:ze,fireGlobalEvent:Ze}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(u,f,a){f.exports=function(o){function c(){return this.value}function l(){throw this.reason}o.prototype.return=o.prototype.thenReturn=function(m){return m instanceof o&&m.suppressUnhandledRejections(),this._then(c,void 0,void 0,{value:m},void 0)},o.prototype.throw=o.prototype.thenThrow=function(m){return this._then(l,void 0,void 0,{reason:m},void 0)},o.prototype.catchThrow=function(m){if(arguments.length<=1)return this._then(void 0,l,void 0,{reason:m},void 0);var I=arguments[1],p=function(){throw I};return this.caught(m,p)},o.prototype.catchReturn=function(m){if(arguments.length<=1)return m instanceof o&&m.suppressUnhandledRejections(),this._then(void 0,c,void 0,{value:m},void 0);var I=arguments[1];I instanceof o&&I.suppressUnhandledRejections();var p=function(){return I};return this.caught(m,p)}}},{}],11:[function(u,f,a){f.exports=function(o,c){function l(){return p(this)}var I=o.reduce,p=o.all;o.prototype.each=function(g){return I(this,g,c,0)._then(l,void 0,void 0,this,void 0)},o.prototype.mapSeries=function(g){return I(this,g,c,c)},o.each=function(g,C){return I(g,C,c,0)._then(l,void 0,void 0,g,void 0)},o.mapSeries=function m(g,C){return I(g,C,c,c)}}},{}],12:[function(u,f,a){function o(F,B){function b(A){return this instanceof b?(_(this,"message","string"==typeof A?A:B),_(this,"name",F),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new b(A)}return C(b,Error),b}function c(F){return this instanceof c?(_(this,"name","OperationalError"),_(this,"message",F),this.cause=F,this.isOperational=!0,void(F instanceof Error?(_(this,"message",F.message),_(this,"stack",F.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new c(F)}var l,m,I=u("./es5"),p=I.freeze,g=u("./util"),C=g.inherits,_=g.notEnumerableProp,v=o("Warning","warning"),T=o("CancellationError","cancellation error"),D=o("TimeoutError","timeout error"),P=o("AggregateError","aggregate error");try{l=TypeError,m=RangeError}catch{l=o("TypeError","type error"),m=o("RangeError","range error")}for(var E="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),M=0;M<E.length;++M)"function"==typeof Array.prototype[E[M]]&&(P.prototype[E[M]]=Array.prototype[E[M]]);I.defineProperty(P.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),P.prototype.isOperational=!0;var O=0;P.prototype.toString=function(){var F=Array(4*O+1).join(" "),B="\n"+F+"AggregateError of:\n";O++,F=Array(4*O+1).join(" ");for(var b=0;b<this.length;++b){for(var A=this[b]===this?"[Circular AggregateError]":this[b]+"",N=A.split("\n"),Y=0;Y<N.length;++Y)N[Y]=F+N[Y];B+=(A=N.join("\n"))+"\n"}return O--,B},C(c,Error);var R=Error.__BluebirdErrorTypes__;R||(R=p({CancellationError:T,TimeoutError:D,OperationalError:c,RejectionError:c,AggregateError:P}),I.defineProperty(Error,"__BluebirdErrorTypes__",{value:R,writable:!1,enumerable:!1,configurable:!1})),f.exports={Error,TypeError:l,RangeError:m,CancellationError:R.CancellationError,OperationalError:R.OperationalError,TimeoutError:R.TimeoutError,AggregateError:R.AggregateError,Warning:v}},{"./es5":13,"./util":36}],13:[function(u,f,a){var o=function(){return void 0===this}();if(o)f.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:o,propertyIsWritable:function(T,D){var P=Object.getOwnPropertyDescriptor(T,D);return!(P&&!P.writable&&!P.set)}};else{var c={}.hasOwnProperty,l={}.toString,m={}.constructor.prototype,I=function(T){var D=[];for(var P in T)c.call(T,P)&&D.push(P);return D};f.exports={isArray:function(T){try{return"[object Array]"===l.call(T)}catch{return!1}},keys:I,names:I,defineProperty:function(T,D,P){return T[D]=P.value,T},getDescriptor:function(T,D){return{value:T[D]}},freeze:function(T){return T},getPrototypeOf:function(T){try{return Object(T).constructor.prototype}catch{return m}},isES5:o,propertyIsWritable:function(){return!0}}}},{}],14:[function(u,f,a){f.exports=function(o,c){var l=o.map;o.prototype.filter=function(m,I){return l(this,m,I,c)},o.filter=function(m,I,p){return l(m,I,p,c)}}},{}],15:[function(u,f,a){f.exports=function(o,c,l){function m(E,M,O){this.promise=E,this.type=M,this.handler=O,this.called=!1,this.cancelPromise=null}function I(E){this.finallyHandler=E}function p(E,M){return null!=E.cancelPromise&&(arguments.length>1?E.cancelPromise._reject(M):E.cancelPromise._cancel(),E.cancelPromise=null,!0)}function g(){return _.call(this,this.promise._target()._settledValue())}function C(E){return p(this,E)?void 0:(D.e=E,D)}function _(E){var M=this.promise,O=this.handler;if(!this.called){this.called=!0;var R=this.isFinallyHandler()?O.call(M._boundValue()):O.call(M._boundValue(),E);if(R===l)return R;if(void 0!==R){M._setReturnedNonUndefined();var F=c(R,M);if(F instanceof o){if(null!=this.cancelPromise){if(F._isCancelled()){var B=new T("late cancellation observer");return M._attachExtraTrace(B),D.e=B,D}F.isPending()&&F._attachCancellationCallback(new I(this))}return F._then(g,C,void 0,this,void 0)}}}return M.isRejected()?(p(this),D.e=E,D):(p(this),E)}var v=u("./util"),T=o.CancellationError,D=v.errorObj,P=u("./catch_filter")(l);return m.prototype.isFinallyHandler=function(){return 0===this.type},I.prototype._resultCancelled=function(){p(this.finallyHandler)},o.prototype._passThrough=function(E,M,O,R){return"function"!=typeof E?this.then():this._then(O,R,void 0,new m(this,M,E),void 0)},o.prototype.lastly=o.prototype.finally=function(E){return this._passThrough(E,0,_,_)},o.prototype.tap=function(E){return this._passThrough(E,1,_)},o.prototype.tapCatch=function(E){var M=arguments.length;if(1===M)return this._passThrough(E,1,void 0,_);var O,R=new Array(M-1),F=0;for(O=0;M-1>O;++O){var B=arguments[O];if(!v.isObject(B))return o.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+v.classString(B)));R[F++]=B}R.length=F;var b=arguments[O];return this._passThrough(P(R,b,this),1,void 0,_)},m}},{"./catch_filter":7,"./util":36}],16:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function C(M,O,R,F){if(p.cancellation()){var B=new o(l),b=this._finallyPromise=new o(l);this._promise=B.lastly(function(){return b}),B._captureStackTrace(),B._setOnCancel(this)}else(this._promise=new o(l))._captureStackTrace();this._stack=F,this._generatorFunction=M,this._receiver=O,this._generator=void 0,this._yieldHandlers="function"==typeof R?[R].concat(E):E,this._yieldedPromise=null,this._cancellationPhase=!1}var v=u("./errors").TypeError,T=u("./util"),D=T.errorObj,P=T.tryCatch,E=[];T.inherits(C,I),C.prototype._isResolved=function(){return null===this._promise},C.prototype._cleanup=function(){this._promise=this._generator=null,p.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},C.prototype._promiseCancelled=function(){if(!this._isResolved()){var M;if(typeof this._generator.return<"u")this._promise._pushContext(),M=P(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var R=new o.CancellationError("generator .return() sentinel");o.coroutine.returnSentinel=R,this._promise._attachExtraTrace(R),this._promise._pushContext(),M=P(this._generator.throw).call(this._generator,R),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(M)}},C.prototype._promiseFulfilled=function(M){this._yieldedPromise=null,this._promise._pushContext();var O=P(this._generator.next).call(this._generator,M);this._promise._popContext(),this._continue(O)},C.prototype._promiseRejected=function(M){this._yieldedPromise=null,this._promise._attachExtraTrace(M),this._promise._pushContext();var O=P(this._generator.throw).call(this._generator,M);this._promise._popContext(),this._continue(O)},C.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof o){var M=this._yieldedPromise;this._yieldedPromise=null,M.cancel()}},C.prototype.promise=function(){return this._promise},C.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},C.prototype._continue=function(M){var O=this._promise;if(M===D)return this._cleanup(),this._cancellationPhase?O.cancel():O._rejectCallback(M.e,!1);var R=M.value;if(!0===M.done)return this._cleanup(),this._cancellationPhase?O.cancel():O._resolveCallback(R);var F=m(R,this._promise);if(F instanceof o||(F=function g(M,O,R){for(var F=0;F<O.length;++F){R._pushContext();var B=P(O[F])(M);if(R._popContext(),B===D){R._pushContext();var b=o.reject(D.e);return R._popContext(),b}var A=m(B,R);if(A instanceof o)return A}return null}(F,this._yieldHandlers,this._promise),null!==F)){var B=(F=F._target())._bitField;0==(50397184&B)?(this._yieldedPromise=F,F._proxy(this,null)):0!=(33554432&B)?o._async.invoke(this._promiseFulfilled,this,F._value()):0!=(16777216&B)?o._async.invoke(this._promiseRejected,this,F._reason()):this._promiseCancelled()}else this._promiseRejected(new v("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(R))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},o.coroutine=function(M,O){if("function"!=typeof M)throw new v("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var R=Object(O).yieldHandler,F=C,B=(new Error).stack;return function(){var b=M.apply(this,arguments),A=new F(void 0,void 0,R,B),N=A.promise();return A._generator=b,A._promiseFulfilled(void 0),N}},o.coroutine.addYieldHandler=function(M){if("function"!=typeof M)throw new v("expecting a function but got "+T.classString(M));E.push(M)},o.spawn=function(M){if(p.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof M)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var O=new C(M,this),R=O.promise();return O._run(o.spawn),R}}},{"./errors":12,"./util":36}],17:[function(u,f,a){f.exports=function(o,c,l,m,I){u("./util"),o.join=function(){var g,C=arguments.length-1;C>0&&"function"==typeof arguments[C]&&(g=arguments[C]);var _=[].slice.call(arguments);g&&_.pop();var v=new c(_).promise();return void 0!==g?v.spread(g):v}}},{"./util":36}],18:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(P,E,M,O){this.constructor$(P),this._promise._captureStackTrace();var R=o._getContext();if(this._callback=_.contextBind(R,E),this._preservedValues=O===I?new Array(this.length()):null,this._limit=M,this._inFlight=0,this._queue=[],D.invoke(this._asyncInit,this,void 0),_.isArray(P))for(var F=0;F<P.length;++F){var B=P[F];B instanceof o&&B.suppressUnhandledRejections()}}function C(P,E,M,O){if("function"!=typeof E)return l("expecting a function but got "+_.classString(E));var R=0;if(void 0!==M){if("object"!=typeof M||null===M)return o.reject(new TypeError("options argument must be an object but it is "+_.classString(M)));if("number"!=typeof M.concurrency)return o.reject(new TypeError("'concurrency' must be a number but it is "+_.classString(M.concurrency)));R=M.concurrency}return new g(P,E,R="number"==typeof R&&isFinite(R)&&R>=1?R:0,O).promise()}var _=u("./util"),v=_.tryCatch,T=_.errorObj,D=o._async;_.inherits(g,c),g.prototype._asyncInit=function(){this._init$(void 0,-2)},g.prototype._init=function(){},g.prototype._promiseFulfilled=function(P,E){var M=this._values,O=this.length(),R=this._preservedValues,F=this._limit;if(0>E){if(M[E=-1*E-1]=P,F>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(F>=1&&this._inFlight>=F)return M[E]=P,this._queue.push(E),!1;null!==R&&(R[E]=P);var B=this._promise,b=this._callback,A=B._boundValue();B._pushContext();var N=v(b).call(A,P,E,O),Y=B._popContext();if(p.checkForgottenReturns(N,Y,null!==R?"Promise.filter":"Promise.map",B),N===T)return this._reject(N.e),!0;var ne=m(N,this._promise);if(ne instanceof o){var Ie=(ne=ne._target())._bitField;if(0==(50397184&Ie))return F>=1&&this._inFlight++,M[E]=ne,ne._proxy(this,-1*(E+1)),!1;if(0==(33554432&Ie))return 0!=(16777216&Ie)?(this._reject(ne._reason()),!0):(this._cancel(),!0);N=ne._value()}M[E]=N}return++this._totalResolved>=O&&(null!==R?this._filter(M,R):this._resolve(M),!0)},g.prototype._drainQueue=function(){for(var P=this._queue,E=this._limit,M=this._values;P.length>0&&this._inFlight<E;){if(this._isResolved())return;var O=P.pop();this._promiseFulfilled(M[O],O)}},g.prototype._filter=function(P,E){for(var M=E.length,O=new Array(M),R=0,F=0;M>F;++F)P[F]&&(O[R++]=E[F]);O.length=R,this._resolve(O)},g.prototype.preservedValues=function(){return this._preservedValues},o.prototype.map=function(P,E){return C(this,P,E,null)},o.map=function(P,E,M,O){return C(P,E,M,O)}}},{"./util":36}],19:[function(u,f,a){f.exports=function(o,c,l,m,I){var p=u("./util"),g=p.tryCatch;o.method=function(C){if("function"!=typeof C)throw new o.TypeError("expecting a function but got "+p.classString(C));return function(){var _=new o(c);_._captureStackTrace(),_._pushContext();var v=g(C).apply(this,arguments),T=_._popContext();return I.checkForgottenReturns(v,T,"Promise.method",_),_._resolveFromSyncValue(v),_}},o.attempt=o.try=function(C){if("function"!=typeof C)return m("expecting a function but got "+p.classString(C));var v,_=new o(c);if(_._captureStackTrace(),_._pushContext(),arguments.length>1){I.deprecated("calling Promise.try with more than 1 argument");var T=arguments[1],D=arguments[2];v=p.isArray(T)?g(C).apply(D,T):g(C).call(D,T)}else v=g(C)();var P=_._popContext();return I.checkForgottenReturns(v,P,"Promise.try",_),_._resolveFromSyncValue(v),_},o.prototype._resolveFromSyncValue=function(C){C===p.errorObj?this._rejectCallback(C.e,!1):this._resolveCallback(C,!0)}}},{"./util":36}],20:[function(u,f,a){function c(v){var T;if(function o(v){return v instanceof Error&&C.getPrototypeOf(v)===Error.prototype}(v)){(T=new g(v)).name=v.name,T.message=v.message,T.stack=v.stack;for(var D=C.keys(v),P=0;P<D.length;++P){var E=D[P];_.test(E)||(T[E]=v[E])}return T}return m.markAsOriginatingFromRejection(v),v}var m=u("./util"),I=m.maybeWrapAsError,g=u("./errors").OperationalError,C=u("./es5"),_=/^(?:name|message|stack|cause)$/;f.exports=function l(v,T){return function(D,P){if(null!==v){if(D){var E=c(I(D));v._attachExtraTrace(E),v._reject(E)}else if(T){var M=[].slice.call(arguments,1);v._fulfill(M)}else v._fulfill(P);v=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(u,f,a){f.exports=function(o){function c(_,v){if(!I.isArray(_))return l.call(this,_,v);var D=g(v).apply(this._boundValue(),[null].concat(_));D===C&&p.throwLater(D.e)}function l(_,v){var D=this._boundValue(),P=void 0===_?g(v).call(D,null):g(v).call(D,null,_);P===C&&p.throwLater(P.e)}function m(_,v){if(!_){var D=new Error(_+"");D.cause=_,_=D}var P=g(v).call(this._boundValue(),_);P===C&&p.throwLater(P.e)}var I=u("./util"),p=o._async,g=I.tryCatch,C=I.errorObj;o.prototype.asCallback=o.prototype.nodeify=function(_,v){if("function"==typeof _){var T=l;void 0!==v&&Object(v).spread&&(T=c),this._then(T,m,void 0,this,_)}return this}}},{"./util":36}],22:[function(u,f,a){f.exports=function(){function o(){}function l(k){k!==_e&&function c(k,U){if(null==k||k.constructor!==l)throw new ne("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof U)throw new ne("expecting a function but got "+T.classString(U))}(this,k),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(k),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function m(k){this.promise._resolveCallback(k)}function I(k){this.promise._rejectCallback(k,!1)}function p(k){var U=new l(_e);U._fulfillmentHandler0=k,U._rejectionHandler0=k,U._promise0=k,U._receiver0=k}var g=function(){return new ne("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},C=function(){return new l.PromiseInspection(this._target())},_=function(k){return l.reject(new ne(k))},v={},T=u("./util");T.setReflectHandler(C);var D=function(){var k=process.domain;return void 0===k?null:k},E=function(){return{domain:D(),async:null}},M=T.isNode&&T.nodeSupportsAsyncResource?u("async_hooks").AsyncResource:null,O=function(){return{domain:D(),async:new M("Bluebird::Promise")}},R=T.isNode?E:function(){return null};T.notEnumerableProp(l,"_getContext",R);var b=u("./es5"),A=u("./async"),N=new A;b.defineProperty(l,"_async",{value:N});var Y=u("./errors"),ne=l.TypeError=Y.TypeError;l.RangeError=Y.RangeError;var Ie=l.CancellationError=Y.CancellationError;l.TimeoutError=Y.TimeoutError,l.OperationalError=Y.OperationalError,l.RejectionError=Y.OperationalError,l.AggregateError=Y.AggregateError;var _e=function(){},ce={},q={},he=u("./thenables")(l,_e),ie=u("./promise_array")(l,_e,he,_,o),V=u("./context")(l),J=V.create,te=u("./debuggability")(l,V,function(){R=O,T.notEnumerableProp(l,"_getContext",O)},function(){R=E,T.notEnumerableProp(l,"_getContext",E)}),oe=u("./finally")(l,he,q),Ee=u("./catch_filter")(q),ge=u("./nodeback"),Re=T.errorObj,G=T.tryCatch;return l.prototype.toString=function(){return"[object Promise]"},l.prototype.caught=l.prototype.catch=function(k){var U=arguments.length;if(U>1){var H,ee=new Array(U-1),ye=0;for(H=0;U-1>H;++H){var Z=arguments[H];if(!T.isObject(Z))return _("Catch statement predicate: expecting an object but got "+T.classString(Z));ee[ye++]=Z}if(ee.length=ye,"function"!=typeof(k=arguments[H]))throw new ne("The last argument to .catch() must be a function, got "+T.toString(k));return this.then(void 0,Ee(ee,k,this))}return this.then(void 0,k)},l.prototype.reflect=function(){return this._then(C,C,void 0,this,void 0)},l.prototype.then=function(k,U){if(te.warnings()&&arguments.length>0&&"function"!=typeof k&&"function"!=typeof U){var H=".then() only accepts functions but was passed: "+T.classString(k);arguments.length>1&&(H+=", "+T.classString(U)),this._warn(H)}return this._then(k,U,void 0,void 0,void 0)},l.prototype.done=function(k,U){this._then(k,U,void 0,void 0,void 0)._setIsFinal()},l.prototype.spread=function(k){return"function"!=typeof k?_("expecting a function but got "+T.classString(k)):this.all()._then(k,void 0,void 0,ce,void 0)},l.prototype.toJSON=function(){var k={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(k.fulfillmentValue=this.value(),k.isFulfilled=!0):this.isRejected()&&(k.rejectionReason=this.reason(),k.isRejected=!0),k},l.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new ie(this).promise()},l.prototype.error=function(k){return this.caught(T.originatesFromRejection,k)},l.getNewLibraryCopy=f.exports,l.is=function(k){return k instanceof l},l.fromNode=l.fromCallback=function(k){var U=new l(_e);U._captureStackTrace();var H=arguments.length>1&&!!Object(arguments[1]).multiArgs,ee=G(k)(ge(U,H));return ee===Re&&U._rejectCallback(ee.e,!0),U._isFateSealed()||U._setAsyncGuaranteed(),U},l.all=function(k){return new ie(k).promise()},l.cast=function(k){var U=he(k);return U instanceof l||((U=new l(_e))._captureStackTrace(),U._setFulfilled(),U._rejectionHandler0=k),U},l.resolve=l.fulfilled=l.cast,l.reject=l.rejected=function(k){var U=new l(_e);return U._captureStackTrace(),U._rejectCallback(k,!0),U},l.setScheduler=function(k){if("function"!=typeof k)throw new ne("expecting a function but got "+T.classString(k));return N.setScheduler(k)},l.prototype._then=function(k,U,H,ee,ye){var Z=void 0!==ye,Q=Z?ye:new l(_e),se=this._target(),le=se._bitField;Z||(Q._propagateFrom(this,3),Q._captureStackTrace(),void 0===ee&&0!=(2097152&this._bitField)&&(ee=0!=(50397184&le)?this._boundValue():se===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,Q));var pe=R();if(0!=(50397184&le)){var Ce,Te,Be=se._settlePromiseCtx;0!=(33554432&le)?(Te=se._rejectionHandler0,Ce=k):0!=(16777216&le)?(Te=se._fulfillmentHandler0,Ce=U,se._unsetRejectionIsUnhandled()):(Be=se._settlePromiseLateCancellationObserver,Te=new Ie("late cancellation observer"),se._attachExtraTrace(Te),Ce=U),N.invoke(Be,se,{handler:T.contextBind(pe,Ce),promise:Q,receiver:ee,value:Te})}else se._addCallbacks(k,U,Q,ee,pe);return Q},l.prototype._length=function(){return 65535&this._bitField},l.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},l.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},l.prototype._setLength=function(k){this._bitField=-65536&this._bitField|65535&k},l.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},l.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},l.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},l.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},l.prototype._isFinal=function(){return(4194304&this._bitField)>0},l.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},l.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},l.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},l.prototype._setAsyncGuaranteed=function(){if(!N.hasCustomScheduler()){var k=this._bitField;this._bitField=k|(536870912&k)>>2^134217728}},l.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},l.prototype._receiverAt=function(k){var U=0===k?this._receiver0:this[4*k-4+3];return U===v?void 0:void 0===U&&this._isBound()?this._boundValue():U},l.prototype._promiseAt=function(k){return this[4*k-4+2]},l.prototype._fulfillmentHandlerAt=function(k){return this[4*k-4+0]},l.prototype._rejectionHandlerAt=function(k){return this[4*k-4+1]},l.prototype._boundValue=function(){},l.prototype._migrateCallback0=function(k){var U=k._fulfillmentHandler0,H=k._rejectionHandler0,ee=k._promise0,ye=k._receiverAt(0);void 0===ye&&(ye=v),this._addCallbacks(U,H,ee,ye,null)},l.prototype._migrateCallbackAt=function(k,U){var H=k._fulfillmentHandlerAt(U),ee=k._rejectionHandlerAt(U),ye=k._promiseAt(U),Z=k._receiverAt(U);void 0===Z&&(Z=v),this._addCallbacks(H,ee,ye,Z,null)},l.prototype._addCallbacks=function(k,U,H,ee,ye){var Z=this._length();if(Z>=65531&&(Z=0,this._setLength(0)),0===Z)this._promise0=H,this._receiver0=ee,"function"==typeof k&&(this._fulfillmentHandler0=T.contextBind(ye,k)),"function"==typeof U&&(this._rejectionHandler0=T.contextBind(ye,U));else{var Q=4*Z-4;this[Q+2]=H,this[Q+3]=ee,"function"==typeof k&&(this[Q+0]=T.contextBind(ye,k)),"function"==typeof U&&(this[Q+1]=T.contextBind(ye,U))}return this._setLength(Z+1),Z},l.prototype._proxy=function(k,U){this._addCallbacks(void 0,void 0,U,k,null)},l.prototype._resolveCallback=function(k,U){if(0==(117506048&this._bitField)){if(k===this)return this._rejectCallback(g(),!1);var H=he(k,this);if(!(H instanceof l))return this._fulfill(k);U&&this._propagateFrom(H,2);var ee=H._target();if(ee===this)return void this._reject(g());var ye=ee._bitField;if(0==(50397184&ye)){var Z=this._length();Z>0&&ee._migrateCallback0(this);for(var Q=1;Z>Q;++Q)ee._migrateCallbackAt(this,Q);this._setFollowing(),this._setLength(0),this._setFollowee(H)}else if(0!=(33554432&ye))this._fulfill(ee._value());else if(0!=(16777216&ye))this._reject(ee._reason());else{var se=new Ie("late cancellation observer");ee._attachExtraTrace(se),this._reject(se)}}},l.prototype._rejectCallback=function(k,U,H){var ee=T.ensureErrorObject(k),ye=ee===k;if(!ye&&!H&&te.warnings()){var Z="a promise was rejected with a non-error: "+T.classString(k);this._warn(Z,!0)}this._attachExtraTrace(ee,!!U&&ye),this._reject(k)},l.prototype._resolveFromExecutor=function(k){if(k!==_e){var U=this;this._captureStackTrace(),this._pushContext();var H=!0,ee=this._execute(k,function(ye){U._resolveCallback(ye)},function(ye){U._rejectCallback(ye,H)});H=!1,this._popContext(),void 0!==ee&&U._rejectCallback(ee,!0)}},l.prototype._settlePromiseFromHandler=function(k,U,H,ee){var ye=ee._bitField;if(0==(65536&ye)){var Z;ee._pushContext(),U===ce?H&&"number"==typeof H.length?Z=G(k).apply(this._boundValue(),H):(Z=Re).e=new ne("cannot .spread() a non-array: "+T.classString(H)):Z=G(k).call(U,H);var Q=ee._popContext();0==(65536&(ye=ee._bitField))&&(Z===q?ee._reject(H):Z===Re?ee._rejectCallback(Z.e,!1):(te.checkForgottenReturns(Z,Q,"",ee,this),ee._resolveCallback(Z)))}},l.prototype._target=function(){for(var k=this;k._isFollowing();)k=k._followee();return k},l.prototype._followee=function(){return this._rejectionHandler0},l.prototype._setFollowee=function(k){this._rejectionHandler0=k},l.prototype._settlePromise=function(k,U,H,ee){var ye=k instanceof l,Z=this._bitField,Q=0!=(134217728&Z);0!=(65536&Z)?(ye&&k._invokeInternalOnCancel(),H instanceof oe&&H.isFinallyHandler()?(H.cancelPromise=k,G(U).call(H,ee)===Re&&k._reject(Re.e)):U===C?k._fulfill(C.call(H)):H instanceof o?H._promiseCancelled(k):ye||k instanceof ie?k._cancel():H.cancel()):"function"==typeof U?ye?(Q&&k._setAsyncGuaranteed(),this._settlePromiseFromHandler(U,H,ee,k)):U.call(H,ee,k):H instanceof o?H._isResolved()||(0!=(33554432&Z)?H._promiseFulfilled(ee,k):H._promiseRejected(ee,k)):ye&&(Q&&k._setAsyncGuaranteed(),0!=(33554432&Z)?k._fulfill(ee):k._reject(ee))},l.prototype._settlePromiseLateCancellationObserver=function(k){var U=k.handler,H=k.promise,ee=k.receiver,ye=k.value;"function"==typeof U?H instanceof l?this._settlePromiseFromHandler(U,ee,ye,H):U.call(ee,ye,H):H instanceof l&&H._reject(ye)},l.prototype._settlePromiseCtx=function(k){this._settlePromise(k.promise,k.handler,k.receiver,k.value)},l.prototype._settlePromise0=function(k,U,H){var ee=this._promise0,ye=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(ee,k,ye,U)},l.prototype._clearCallbackDataAtIndex=function(k){var U=4*k-4;this[U+2]=this[U+3]=this[U+0]=this[U+1]=void 0},l.prototype._fulfill=function(k){var U=this._bitField;if(!((117506048&U)>>>16)){if(k===this){var H=g();return this._attachExtraTrace(H),this._reject(H)}this._setFulfilled(),this._rejectionHandler0=k,(65535&U)>0&&(0!=(134217728&U)?this._settlePromises():N.settlePromises(this),this._dereferenceTrace())}},l.prototype._reject=function(k){var U=this._bitField;if(!((117506048&U)>>>16))return this._setRejected(),this._fulfillmentHandler0=k,this._isFinal()?N.fatalError(k,T.isNode):void((65535&U)>0?N.settlePromises(this):this._ensurePossibleRejectionHandled())},l.prototype._fulfillPromises=function(k,U){for(var H=1;k>H;H++){var ee=this._fulfillmentHandlerAt(H),ye=this._promiseAt(H),Z=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(ye,ee,Z,U)}},l.prototype._rejectPromises=function(k,U){for(var H=1;k>H;H++){var ee=this._rejectionHandlerAt(H),ye=this._promiseAt(H),Z=this._receiverAt(H);this._clearCallbackDataAtIndex(H),this._settlePromise(ye,ee,Z,U)}},l.prototype._settlePromises=function(){var k=this._bitField,U=65535&k;if(U>0){if(0!=(16842752&k)){var H=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,H,k),this._rejectPromises(U,H)}else{var ee=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,ee,k),this._fulfillPromises(U,ee)}this._setLength(0)}this._clearCancellationData()},l.prototype._settledValue=function(){var k=this._bitField;return 0!=(33554432&k)?this._rejectionHandler0:0!=(16777216&k)?this._fulfillmentHandler0:void 0},typeof Symbol<"u"&&Symbol.toStringTag&&b.defineProperty(l.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),l.defer=l.pending=function(){return te.deprecated("Promise.defer","new Promise"),{promise:new l(_e),resolve:m,reject:I}},T.notEnumerableProp(l,"_makeSelfResolutionError",g),u("./method")(l,_e,he,_,te),u("./bind")(l,_e,he,te),u("./cancel")(l,ie,_,te),u("./direct_resolve")(l),u("./synchronous_inspection")(l),u("./join")(l,ie,he,_e,N),l.Promise=l,l.version="3.7.2",u("./call_get.js")(l),u("./generators.js")(l,_,_e,he,o,te),u("./map.js")(l,ie,_,he,_e,te),u("./nodeify.js")(l),u("./promisify.js")(l,_e),u("./props.js")(l,ie,he,_),u("./race.js")(l,_e,he,_),u("./reduce.js")(l,ie,_,he,_e,te),u("./settle.js")(l,ie,te),u("./some.js")(l,ie,_),u("./timers.js")(l,_e,te),u("./using.js")(l,_,he,J,_e,te),u("./any.js")(l),u("./each.js")(l,_e),u("./filter.js")(l,_e),T.toFastProperties(l),T.toFastProperties(l.prototype),p({a:1}),p({b:2}),p({c:3}),p(1),p(function(){}),p(void 0),p(!1),p(new l(_e)),te.setBounds(A.firstLineError,T.lastLineError),l}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(u,f,a){f.exports=function(o,c,l,m,I){function g(_){var v=this._promise=new o(c);_ instanceof o&&(v._propagateFrom(_,3),_.suppressUnhandledRejections()),v._setOnCancel(this),this._values=_,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var C=u("./util");return C.inherits(g,I),g.prototype.length=function(){return this._length},g.prototype.promise=function(){return this._promise},g.prototype._init=function _(v,T){var D=l(this._values,this._promise);if(D instanceof o){var P=(D=D._target())._bitField;if(this._values=D,0==(50397184&P))return this._promise._setAsyncGuaranteed(),D._then(_,this._reject,void 0,this,T);if(0==(33554432&P))return 0!=(16777216&P)?this._reject(D._reason()):this._cancel();D=D._value()}if(null!==(D=C.asArray(D)))return 0===D.length?void(-5===T?this._resolveEmptyArray():this._resolve(function p(_){switch(_){case-2:return[];case-3:return{};case-6:return new Map}}(T))):void this._iterate(D);var E=m("expecting an array or an iterable object but got "+C.classString(D)).reason();this._promise._rejectCallback(E,!1)},g.prototype._iterate=function(_){var v=this.getActualLength(_.length);this._length=v,this._values=this.shouldCopyValues()?new Array(v):this._values;for(var T=this._promise,D=!1,P=null,E=0;v>E;++E){var M=l(_[E],T);P=M instanceof o?(M=M._target())._bitField:null,D?null!==P&&M.suppressUnhandledRejections():null!==P?0==(50397184&P)?(M._proxy(this,E),this._values[E]=M):D=0!=(33554432&P)?this._promiseFulfilled(M._value(),E):0!=(16777216&P)?this._promiseRejected(M._reason(),E):this._promiseCancelled(E):D=this._promiseFulfilled(M,E)}D||T._setAsyncGuaranteed()},g.prototype._isResolved=function(){return null===this._values},g.prototype._resolve=function(_){this._values=null,this._promise._fulfill(_)},g.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},g.prototype._reject=function(_){this._values=null,this._promise._rejectCallback(_,!1)},g.prototype._promiseFulfilled=function(_,v){return this._values[v]=_,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseCancelled=function(){return this._cancel(),!0},g.prototype._promiseRejected=function(_){return this._totalResolved++,this._reject(_),!0},g.prototype._resultCancelled=function(){if(!this._isResolved()){var _=this._values;if(this._cancel(),_ instanceof o)_.cancel();else for(var v=0;v<_.length;++v)_[v]instanceof o&&_[v].cancel()}},g.prototype.shouldCopyValues=function(){return!0},g.prototype.getActualLength=function(_){return _},g}},{"./util":36}],24:[function(u,f,a){f.exports=function(o,c){function l(_e){return!N.test(_e)}function m(_e){try{return!0===_e.__isPromisified__}catch{return!1}}function I(_e,ce,q){var he=P.getDataPropertyOrDefault(_e,ce+q,b);return!!he&&m(he)}function _(_e,ce,q,he,ie){for(var V=new RegExp(ne(ce)+"$"),J=function g(_e,ce,q,he){for(var ie=P.inheritedDataKeys(_e),V=[],J=0;J<ie.length;++J){var te=ie[J],oe=_e[te],Ee=he===Y||Y(te,oe,_e);"function"!=typeof oe||m(oe)||I(_e,te,ce)||!he(te,oe,_e,Ee)||V.push(te,oe)}return function p(_e,ce,q){for(var he=0;he<_e.length;he+=2){var ie=_e[he];if(q.test(ie))for(var V=ie.replace(q,""),J=0;J<_e.length;J+=2)if(_e[J]===V)throw new F("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",ce))}}(V,ce,q),V}(_e,ce,V,q),te=0,oe=J.length;oe>te;te+=2){var Ee=J[te],ge=J[te+1],Re=Ee+ce;if(he===Ie)_e[Re]=Ie(Ee,D,Ee,ge,ce,ie);else{var G=he(ge,function(){return Ie(Ee,D,Ee,ge,ce,ie)});P.notEnumerableProp(G,"__isPromisified__",!0),_e[Re]=G}}return P.toFastProperties(_e),_e}var D={},P=u("./util"),E=u("./nodeback"),M=P.withAppended,O=P.maybeWrapAsError,R=P.canEvaluate,F=u("./errors").TypeError,b={__isPromisified__:!0},N=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),Y=function(_e){return P.isIdentifier(_e)&&"_"!==_e.charAt(0)&&"constructor"!==_e},ne=function(_e){return _e.replace(/([$])/,"\\$")},Ie=R?void 0:function C(_e,ce,q,he,ie,V){function J(){var Ee=ce;ce===D&&(Ee=this);var ge=new o(c);ge._captureStackTrace();var Re="string"==typeof oe&&this!==te?this[oe]:_e,G=E(ge,V);try{Re.apply(Ee,M(arguments,G))}catch(k){ge._rejectCallback(O(k),!0,!0)}return ge._isFateSealed()||ge._setAsyncGuaranteed(),ge}var te=function(){return this}(),oe=_e;return"string"==typeof oe&&(_e=he),P.notEnumerableProp(J,"__isPromisified__",!0),J};o.promisify=function(_e,ce){if("function"!=typeof _e)throw new F("expecting a function but got "+P.classString(_e));if(m(_e))return _e;var ie=function v(_e,ce,q){return Ie(_e,ce,void 0,_e,null,q)}(_e,void 0===(ce=Object(ce)).context?D:ce.context,!!ce.multiArgs);return P.copyDescriptors(_e,ie,l),ie},o.promisifyAll=function(_e,ce){if("function"!=typeof _e&&"object"!=typeof _e)throw new F("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var q=!!(ce=Object(ce)).multiArgs,he=ce.suffix;"string"!=typeof he&&(he="Async");var ie=ce.filter;"function"!=typeof ie&&(ie=Y);var V=ce.promisifier;if("function"!=typeof V&&(V=Ie),!P.isIdentifier(he))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var J=P.inheritedDataKeys(_e),te=0;te<J.length;++te){var oe=_e[J[te]];"constructor"!==J[te]&&P.isClass(oe)&&(_(oe.prototype,he,ie,V,q),_(oe,he,ie,V,q))}return _(_e,he,ie,V,q)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(u,f,a){f.exports=function(o,c,l,m){function I(P){var E,M=!1;if(void 0!==g&&P instanceof g)E=T(P),M=!0;else{var O=v.keys(P),R=O.length;E=new Array(2*R);for(var F=0;R>F;++F){var B=O[F];E[F]=P[B],E[F+R]=B}}this.constructor$(E),this._isMap=M,this._init$(void 0,M?-6:-3)}function p(P){var E,M=l(P);return _(M)?(E=M instanceof o?M._then(o.props,void 0,void 0,void 0,void 0):new I(M).promise(),M instanceof o&&E._propagateFrom(M,2),E):m("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var g,C=u("./util"),_=C.isObject,v=u("./es5");"function"==typeof Map&&(g=Map);var T=function(){function P(O,R){this[E]=O,this[E+M]=R,E++}var E=0,M=0;return function(O){M=O.size,E=0;var R=new Array(2*O.size);return O.forEach(P,R),R}}();C.inherits(I,c),I.prototype._init=function(){},I.prototype._promiseFulfilled=function(P,E){if(this._values[E]=P,++this._totalResolved>=this._length){var O;if(this._isMap)O=function(P){for(var E=new g,M=P.length/2|0,O=0;M>O;++O)E.set(P[M+O],P[O]);return E}(this._values);else{O={};for(var R=this.length(),F=0,B=this.length();B>F;++F)O[this._values[F+R]]=this._values[F]}return this._resolve(O),!0}return!1},I.prototype.shouldCopyValues=function(){return!1},I.prototype.getActualLength=function(P){return P>>1},o.prototype.props=function(){return p(this)},o.props=function(P){return p(P)}}},{"./es5":13,"./util":36}],26:[function(u,f,a){function c(l){this._capacity=l,this._length=0,this._front=0}c.prototype._willBeOverCapacity=function(l){return this._capacity<l},c.prototype._pushOne=function(l){var m=this.length();this._checkCapacity(m+1),this[this._front+m&this._capacity-1]=l,this._length=m+1},c.prototype.push=function(l,m,I){var p=this.length()+3;if(this._willBeOverCapacity(p))return this._pushOne(l),this._pushOne(m),void this._pushOne(I);var g=this._front+p-3;this._checkCapacity(p);var C=this._capacity-1;this[g+0&C]=l,this[g+1&C]=m,this[g+2&C]=I,this._length=p},c.prototype.shift=function(){var l=this._front,m=this[l];return this[l]=void 0,this._front=l+1&this._capacity-1,this._length--,m},c.prototype.length=function(){return this._length},c.prototype._checkCapacity=function(l){this._capacity<l&&this._resizeTo(this._capacity<<1)},c.prototype._resizeTo=function(l){var m=this._capacity;this._capacity=l,function o(l,m,I,p,g){for(var C=0;g>C;++C)I[C+p]=l[C+m],l[C+m]=void 0}(this,0,this,m,this._front+this._length&m-1)},f.exports=c},{}],27:[function(u,f,a){f.exports=function(o,c,l,m){function I(C,_){var v=l(C);if(v instanceof o)return g(v);if(null===(C=p.asArray(C)))return m("expecting an array or an iterable object but got "+p.classString(C));var T=new o(c);void 0!==_&&T._propagateFrom(_,3);for(var D=T._fulfill,P=T._reject,E=0,M=C.length;M>E;++E){var O=C[E];(void 0!==O||E in C)&&o.cast(O)._then(D,P,void 0,T,null)}return T}var p=u("./util"),g=function(C){return C.then(function(_){return I(_,C)})};o.race=function(C){return I(C,void 0)},o.prototype.race=function(){return I(this,void 0)}}},{"./util":36}],28:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(E,M,O,R){this.constructor$(E);var F=o._getContext();this._fn=D.contextBind(F,M),void 0!==O&&(O=o.resolve(O))._attachCancellationCallback(this),this._initialValue=O,this._currentCancellable=null,this._eachValues=R===I?Array(this._length):0===R?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function C(E,M){this.isFulfilled()?M._resolve(E):M._reject(E)}function _(E,M,O,R){return"function"!=typeof M?l("expecting a function but got "+D.classString(M)):new g(E,M,O,R).promise()}function v(E){this.accum=E,this.array._gotAccum(E);var M=m(this.value,this.array._promise);return M instanceof o?(this.array._currentCancellable=M,M._then(T,void 0,void 0,this,void 0)):T.call(this,M)}function T(E){var F,M=this.array,O=M._promise,R=P(M._fn);O._pushContext(),(F=void 0!==M._eachValues?R.call(O._boundValue(),E,this.index,this.length):R.call(O._boundValue(),this.accum,E,this.index,this.length))instanceof o&&(M._currentCancellable=F);var B=O._popContext();return p.checkForgottenReturns(F,B,void 0!==M._eachValues?"Promise.each":"Promise.reduce",O),F}var D=u("./util"),P=D.tryCatch;D.inherits(g,c),g.prototype._gotAccum=function(E){null!=this._eachValues&&E!==I&&this._eachValues.push(E)},g.prototype._eachComplete=function(E){return null!==this._eachValues&&this._eachValues.push(E),this._eachValues},g.prototype._init=function(){},g.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},g.prototype.shouldCopyValues=function(){return!1},g.prototype._resolve=function(E){this._promise._resolveCallback(E),this._values=null},g.prototype._resultCancelled=function(E){return E===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof o&&this._currentCancellable.cancel(),this._initialValue instanceof o&&this._initialValue.cancel()))},g.prototype._iterate=function(E){this._values=E;var M,O,R=E.length;void 0!==this._initialValue?(M=this._initialValue,O=0):(M=o.resolve(E[0]),O=1),this._currentCancellable=M;for(var F=O;R>F;++F){var B=E[F];B instanceof o&&B.suppressUnhandledRejections()}if(!M.isRejected())for(;R>O;++O)M=M._then(v,void 0,void 0,{accum:null,value:E[O],index:O,length:R,array:this},void 0),0==(127&O)&&M._setNoAsyncGuarantee();void 0!==this._eachValues&&(M=M._then(this._eachComplete,void 0,void 0,this,void 0)),M._then(C,C,void 0,M,this)},o.prototype.reduce=function(E,M){return _(this,E,M,null)},o.reduce=function(E,M,O,R){return _(E,M,O,R)}}},{"./util":36}],29:[function(u,f,a){var o,C,_,v,T,c=u("./util"),m=c.getNativePromise();if(c.isNode&&typeof MutationObserver>"u"){var I=global.setImmediate,p=process.nextTick;o=c.isRecentNode?function(C){I.call(global,C)}:function(C){p.call(process,C)}}else if("function"==typeof m&&"function"==typeof m.resolve){var g=m.resolve();o=function(C){g.then(C)}}else o=typeof MutationObserver<"u"&&(typeof window>"u"||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(C=document.createElement("div"),_={attributes:!0},v=!1,T=document.createElement("div"),new MutationObserver(function(){C.classList.toggle("foo"),v=!1}).observe(T,_),function(E){var M=new MutationObserver(function(){M.disconnect(),E()});M.observe(C,_),v||(v=!0,T.classList.toggle("foo"))}):typeof setImmediate<"u"?function(C){setImmediate(C)}:typeof setTimeout<"u"?function(C){setTimeout(C,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};f.exports=o},{"./util":36}],30:[function(u,f,a){f.exports=function(o,c,l){function m(g){this.constructor$(g)}var I=o.PromiseInspection;u("./util").inherits(m,c),m.prototype._promiseResolved=function(g,C){return this._values[g]=C,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},m.prototype._promiseFulfilled=function(g,C){var _=new I;return _._bitField=33554432,_._settledValueField=g,this._promiseResolved(C,_)},m.prototype._promiseRejected=function(g,C){var _=new I;return _._bitField=16777216,_._settledValueField=g,this._promiseResolved(C,_)},o.settle=function(g){return l.deprecated(".settle()",".reflect()"),new m(g).promise()},o.allSettled=function(g){return new m(g).promise()},o.prototype.settle=function(){return o.settle(this)}}},{"./util":36}],31:[function(u,f,a){f.exports=function(o,c,l){function m(T){this.constructor$(T),this._howMany=0,this._unwrap=!1,this._initialized=!1}function I(T,D){if((0|D)!==D||0>D)return l("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var P=new m(T),E=P.promise();return P.setHowMany(D),P.init(),E}var p=u("./util"),g=u("./errors").RangeError,C=u("./errors").AggregateError,_=p.isArray,v={};p.inherits(m,c),m.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var T=_(this._values);!this._isResolved()&&T&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},m.prototype.init=function(){this._initialized=!0,this._init()},m.prototype.setUnwrap=function(){this._unwrap=!0},m.prototype.howMany=function(){return this._howMany},m.prototype.setHowMany=function(T){this._howMany=T},m.prototype._promiseFulfilled=function(T){return this._addFulfilled(T),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},m.prototype._promiseRejected=function(T){return this._addRejected(T),this._checkOutcome()},m.prototype._promiseCancelled=function(){return this._values instanceof o||null==this._values?this._cancel():(this._addRejected(v),this._checkOutcome())},m.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var T=new C,D=this.length();D<this._values.length;++D)this._values[D]!==v&&T.push(this._values[D]);return T.length>0?this._reject(T):this._cancel(),!0}return!1},m.prototype._fulfilled=function(){return this._totalResolved},m.prototype._rejected=function(){return this._values.length-this.length()},m.prototype._addRejected=function(T){this._values.push(T)},m.prototype._addFulfilled=function(T){this._values[this._totalResolved++]=T},m.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},m.prototype._getRangeError=function(T){return new g("Input array must contain at least "+this._howMany+" items but contains only "+T+" items")},m.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},o.some=function(T,D){return I(T,D)},o.prototype.some=function(T){return I(this,T)},o._SomePromiseArray=m}},{"./errors":12,"./util":36}],32:[function(u,f,a){f.exports=function(o){function c(_){void 0!==_?(_=_._target(),this._bitField=_._bitField,this._settledValueField=_._isFateSealed()?_._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}c.prototype._settledValue=function(){return this._settledValueField};var l=c.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},m=c.prototype.error=c.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},I=c.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},p=c.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=c.prototype.isPending=function(){return 0==(50397184&this._bitField)},C=c.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};c.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},o.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},o.prototype._isCancelled=function(){return this._target().__isCancelled()},o.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},o.prototype.isPending=function(){return g.call(this._target())},o.prototype.isRejected=function(){return p.call(this._target())},o.prototype.isFulfilled=function(){return I.call(this._target())},o.prototype.isResolved=function(){return C.call(this._target())},o.prototype.value=function(){return l.call(this._target())},o.prototype.reason=function(){var _=this._target();return _._unsetRejectionIsUnhandled(),m.call(_)},o.prototype._value=function(){return this._settledValue()},o.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},o.PromiseInspection=c}},{}],33:[function(u,f,a){f.exports=function(o,c){var C=u("./util"),_=C.errorObj,v=C.isObject,T={}.hasOwnProperty;return function l(D,P){if(v(D)){if(D instanceof o)return D;var E=function I(D){try{return function m(D){return D.then}(D)}catch(P){return _.e=P,_}}(D);if(E===_){P&&P._pushContext();var M=o.reject(E.e);return P&&P._popContext(),M}if("function"==typeof E)return function p(D){try{return T.call(D,"_promise0")}catch{return!1}}(D)?(M=new o(c),D._then(M._fulfill,M._reject,void 0,M,null),M):function g(D,P,E){var R=new o(c),F=R;E&&E._pushContext(),R._captureStackTrace(),E&&E._popContext();var B=!0,b=C.tryCatch(P).call(D,function M(A){R&&(R._resolveCallback(A),R=null)},function O(A){R&&(R._rejectCallback(A,B,!0),R=null)});return B=!1,R&&b===_&&(R._rejectCallback(b.e,!0,!0),R=null),F}(D,E,P)}return D}}},{"./util":36}],34:[function(u,f,a){f.exports=function(o,c,l){function m(D){this.handle=D}function I(D){return clearTimeout(this.handle),D}function p(D){throw clearTimeout(this.handle),D}var g=u("./util"),C=o.TimeoutError;m.prototype._resultCancelled=function(){clearTimeout(this.handle)};var _=function(D){return v(+this).thenReturn(D)},v=o.delay=function(D,P){var E,M;return void 0!==P?(E=o.resolve(P)._then(_,null,null,D,void 0),l.cancellation()&&P instanceof o&&E._setOnCancel(P)):(E=new o(c),M=setTimeout(function(){E._fulfill()},+D),l.cancellation()&&E._setOnCancel(new m(M)),E._captureStackTrace()),E._setAsyncGuaranteed(),E};o.prototype.delay=function(D){return v(D,this)},o.prototype.timeout=function(D,P){D=+D;var E,M,O=new m(setTimeout(function(){E.isPending()&&function(D,P,E){var M;M="string"!=typeof P?P instanceof Error?P:new C("operation timed out"):new C(P),g.markAsOriginatingFromRejection(M),D._attachExtraTrace(M),D._reject(M),E?.cancel()}(E,P,M)},D));return l.cancellation()?(M=this.then(),(E=M._then(I,p,void 0,O,void 0))._setOnCancel(O)):E=this._then(I,p,void 0,O,void 0),E}}},{"./util":36}],35:[function(u,f,a){f.exports=function(o,c,l,m,I,p){function g(b){setTimeout(function(){throw b},0)}function _(b,A){var Y=0,ne=b.length,Ie=new o(I);return function N(){if(Y>=ne)return Ie._fulfill();var _e=function C(b){var A=l(b);return A!==b&&"function"==typeof b._isDisposable&&"function"==typeof b._getDisposer&&b._isDisposable()&&A._setDisposable(b._getDisposer()),A}(b[Y++]);if(_e instanceof o&&_e._isDisposable()){try{_e=l(_e._getDisposer().tryDispose(A),b.promise)}catch(ce){return g(ce)}if(_e instanceof o)return _e._then(N,g,null,null,null)}N()}(),Ie}function v(b,A,N){this._data=b,this._promise=A,this._context=N}function T(b,A,N){this.constructor$(b,A,N)}function D(b){return v.isDisposer(b)?(this.resources[this.index]._setDisposable(b),b.promise()):b}function P(b){this.length=b,this.promise=null,this[b-1]=null}var E=u("./util"),M=u("./errors").TypeError,O=u("./util").inherits,R=E.errorObj,F=E.tryCatch,B={};v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():B},v.prototype.tryDispose=function(b){var A=this.resource(),N=this._context;void 0!==N&&N._pushContext();var Y=A!==B?this.doDispose(A,b):null;return void 0!==N&&N._popContext(),this._promise._unsetDisposable(),this._data=null,Y},v.isDisposer=function(b){return null!=b&&"function"==typeof b.resource&&"function"==typeof b.tryDispose},O(T,v),T.prototype.doDispose=function(b,A){return this.data().call(b,b,A)},P.prototype._resultCancelled=function(){for(var b=this.length,A=0;b>A;++A){var N=this[A];N instanceof o&&N.cancel()}},o.using=function(){var b=arguments.length;if(2>b)return c("you must pass at least 2 arguments to Promise.using");var A=arguments[b-1];if("function"!=typeof A)return c("expecting a function but got "+E.classString(A));var N,Y=!0;2===b&&Array.isArray(arguments[0])?(b=(N=arguments[0]).length,Y=!1):(N=arguments,b--);for(var ne=new P(b),Ie=0;b>Ie;++Ie){var _e=N[Ie];if(v.isDisposer(_e)){var ce=_e;(_e=_e.promise())._setDisposable(ce)}else{var q=l(_e);q instanceof o&&(_e=q._then(D,null,null,{resources:ne,index:Ie},void 0))}ne[Ie]=_e}var he=new Array(ne.length);for(Ie=0;Ie<he.length;++Ie)he[Ie]=o.resolve(ne[Ie]).reflect();var ie=o.all(he).then(function(J){for(var te=0;te<J.length;++te){var oe=J[te];if(oe.isRejected())return R.e=oe.error(),R;if(!oe.isFulfilled())return void ie.cancel();J[te]=oe.value()}V._pushContext(),A=F(A);var Ee=Y?A.apply(void 0,J):A(J),ge=V._popContext();return p.checkForgottenReturns(Ee,ge,"Promise.using",V),Ee}),V=ie.lastly(function(){var J=new o.PromiseInspection(ie);return _(ne,J)});return ne.promise=V,V._setOnCancel(ne),V},o.prototype._setDisposable=function(b){this._bitField=131072|this._bitField,this._disposer=b},o.prototype._isDisposable=function(){return(131072&this._bitField)>0},o.prototype._getDisposer=function(){return this._disposer},o.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},o.prototype.disposer=function(b){if("function"==typeof b)return new T(b,this,m());throw new M}}},{"./errors":12,"./util":36}],36:[function(u,f,a){function o(){try{var U=ce;return ce=null,U.apply(this,arguments)}catch(H){return _e.e=H,_e}}function l(U){return null==U||!0===U||!1===U||"string"==typeof U||"number"==typeof U}function C(U,H,ee){return l(U)||ne.defineProperty(U,H,{value:ee,configurable:!0,enumerable:!1,writable:!0}),U}function E(U){try{return U+""}catch{return"[no string representation]"}}function M(U){return U instanceof Error||null!==U&&"object"==typeof U&&"string"==typeof U.message&&"string"==typeof U.name}function F(U){return M(U)&&ne.propertyIsWritable(U,"stack")}function B(U){return{}.toString.call(U)}var ce,ne=u("./es5"),Ie=typeof navigator>"u",_e={e:{}},q=typeof Rt<"u"?Rt:typeof window<"u"?window:typeof global<"u"?global:void 0!==this?this:null,ie=function(){var U=[Array.prototype,Object.prototype,Function.prototype],H=function(Z){for(var Q=0;Q<U.length;++Q)if(U[Q]===Z)return!0;return!1};if(ne.isES5){var ee=Object.getOwnPropertyNames;return function(Z){for(var Q=[],se=Object.create(null);null!=Z&&!H(Z);){var le;try{le=ee(Z)}catch{return Q}for(var pe=0;pe<le.length;++pe){var Ce=le[pe];if(!se[Ce]){se[Ce]=!0;var Te=Object.getOwnPropertyDescriptor(Z,Ce);null!=Te&&null==Te.get&&null==Te.set&&Q.push(Ce)}}Z=ne.getPrototypeOf(Z)}return Q}}var ye={}.hasOwnProperty;return function(Z){if(H(Z))return[];var Q=[];e:for(var se in Z)if(ye.call(Z,se))Q.push(se);else{for(var le=0;le<U.length;++le)if(ye.call(U[le],se))continue e;Q.push(se)}return Q}}(),V=/this\s*\.\s*\S+\s*=/,J=/^[a-z$_][a-z$_0-9]*$/i,te="stack"in new Error?function(U){return F(U)?U:new Error(E(U))}:function(U){if(F(U))return U;try{throw new Error(E(U))}catch(H){return H}},oe=function(U){return ne.isArray(U)?U:null};if(typeof Symbol<"u"&&Symbol.iterator){var Ee="function"==typeof Array.from?function(U){return Array.from(U)}:function(U){for(var H,ee=[],ye=U[Symbol.iterator]();!(H=ye.next()).done;)ee.push(H.value);return ee};oe=function(U){return ne.isArray(U)?U:null!=U&&"function"==typeof U[Symbol.iterator]?Ee(U):null}}var G,U,ge=typeof process<"u"&&"[object process]"===B(process).toLowerCase(),Re=typeof process<"u"&&typeof process.env<"u",k={setReflectHandler:function(U){G=U},isClass:function v(U){try{if("function"==typeof U){var H=ne.names(U.prototype),ee=ne.isES5&&H.length>1,ye=H.length>0&&!(1===H.length&&"constructor"===H[0]),Z=V.test(U+"")&&ne.names(U).length>0;if(ee||ye||Z)return!0}return!1}catch{return!1}},isIdentifier:function D(U){return J.test(U)},inheritedDataKeys:ie,getDataPropertyOrDefault:function g(U,H,ee){if(!ne.isES5)return{}.hasOwnProperty.call(U,H)?U[H]:void 0;var ye=Object.getOwnPropertyDescriptor(U,H);return null!=ye?null==ye.get&&null==ye.set?ye.value:ee:void 0},thrower:function _(U){throw U},isArray:ne.isArray,asArray:oe,notEnumerableProp:C,isPrimitive:l,isObject:function m(U){return"function"==typeof U||"object"==typeof U&&null!==U},isError:M,canEvaluate:Ie,errorObj:_e,tryCatch:function c(U){return ce=U,o},inherits:function(U,H){function ee(){for(var Z in this.constructor=U,this.constructor$=H,H.prototype)ye.call(H.prototype,Z)&&"$"!==Z.charAt(Z.length-1)&&(this[Z+"$"]=H.prototype[Z])}var ye={}.hasOwnProperty;return ee.prototype=H.prototype,U.prototype=new ee,U.prototype},withAppended:function p(U,H){var ee,ye=U.length,Z=new Array(ye+1);for(ee=0;ye>ee;++ee)Z[ee]=U[ee];return Z[ee]=H,Z},maybeWrapAsError:function I(U){return l(U)?new Error(E(U)):U},toFastProperties:function T(U){function H(){}function ee(){return typeof ye.foo}H.prototype=U;var ye=new H;return ee(),ee(),U},filledRange:function P(U,H,ee){for(var ye=new Array(U),Z=0;U>Z;++Z)ye[Z]=H+Z+ee;return ye},toString:E,canAttachTrace:F,ensureErrorObject:te,originatesFromRejection:function R(U){return null!=U&&(U instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===U.isOperational)},markAsOriginatingFromRejection:function O(U){try{C(U,"isOperational",!0)}catch{}},classString:B,copyDescriptors:function b(U,H,ee){for(var ye=ne.names(U),Z=0;Z<ye.length;++Z){var Q=ye[Z];if(ee(Q))try{ne.defineProperty(H,Q,ne.getDescriptor(U,Q))}catch{}}},isNode:ge,hasEnvVariables:Re,env:function A(U){return Re?process.env[U]:void 0},global:q,getNativePromise:function N(){if("function"==typeof Promise)try{if("[object Promise]"===B(new Promise(function(){})))return Promise}catch{}},contextBind:function Y(U,H){if(null===U||"function"!=typeof H||H===G)return H;null!==U.domain&&(H=U.domain.bind(H));var ee=U.async;if(null!==ee){var ye=H;H=function(){var Z=new Array(2).concat([].slice.call(arguments));return Z[0]=ye,Z[1]=this,ee.runInAsyncScope.apply(ee,Z)}}return H}};k.isRecentNode=k.isNode&&(process.versions&&process.versions.node?U=process.versions.node.split(".").map(Number):process.version&&(U=process.version.split(".").map(Number)),0===U[0]&&U[1]>10||U[0]>0),k.nodeSupportsAsyncResource=k.isNode&&function(){var U=!1;try{U="function"==typeof u("async_hooks").AsyncResource.prototype.runInAsyncScope}catch{U=!1}return U}(),k.isNode&&k.toFastProperties(process);try{throw new Error}catch(U){k.lastLineError=U}f.exports=k},{"./es5":13,async_hooks:void 0}]},{},[4])(4)}),typeof window<"u"&&null!==window?window.P=window.Promise:typeof Rt<"u"&&null!==Rt&&(Rt.P=Rt.Promise),n.Promise=Promise,n.nativePromise||(n.nativePromise=n.Promise)}}(w),function(e){var t=20220220;e._defaultAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",e._defaultPlatform="Win64",!(e._navInfo_ver&&e.isNumber(e._navInfo_ver)&&e._navInfo_ver>=t)&&(e._navInfo_ver=t,e.getNavInfoSync=function(){var O,h=e.win,s=h.location.protocol,i="https:"===s,u="https:"!==s&&"http:"!==s,f=!1,a=!0,o=!0,c=0,l=0,m=!1,I=!1,p=!1,g=!1,C=!1,_=!1,v=!1,T=!1,D=!1,P=!1,E=!1,M=!1,R=!1;if("userAgentData"in navigator){var A,F=[],B=navigator.userAgentData,b="",N=0;if(B.platform&&""!=B.platform&&(b=B.platform.toLowerCase(),v=B.mobile,"brands"in B&&e.isArray(B.brands)&&B.brands.length>0?F=B.brands:"uaList"in B&&e.isArray(B.uaList)&&B.uaList.length>0&&(F=B.uaList),N=F.length),0==N)R=!0;else{for(A=0;A<N;A++){var Y=F[A].brand.toLowerCase();if(Y.indexOf("chrome")>=0){T=!0,O=F[A].version;break}if(Y.indexOf("edge")>=0){D=!0,O=F[A].version;break}if(Y.indexOf("opera")>=0){P=!0,O=F[A].version;break}}!T&&!D&&!P&&(T=!0,O="100"),I=b.indexOf("mac")>=0,g=b.indexOf("chrome os")>=0,m="windows"==b,p="linux"==b,C="android"==b,_=b.indexOf("harmony")>=0}}else R=!0;if(R){var ne;if(w.navInfo)ne=w.navInfo;else{var Ie=navigator;ne=e.getNavInfoByUserAgent(Ie.userAgent,Ie.platform),w.navInfo=ne}o=ne.bGecko,m=ne.bWin,I=ne.bMac,p=ne.bLinux,C=ne.bAndroid,g=ne.bChromeOS,_=ne.bHarmonyOS,v=ne.bMobile,T=ne.bChrome,D=ne.bEdge,P=ne.bOpera,E=ne.bFirefox,M=ne.bSafari,O=ne.strBrowserVersion,(f=ne.bIE)&&(c=parseInt(1*ne.strBrowserVersion),l=ne.IEMode),a=ne.bHTML5Edition}return{host:h,bSSL:i,bFileSystem:u,bIE:f,bGecko:o,IEVersion:c,IEMode:l,bHTML5Edition:a,bWin:m,bMac:I,bLinux:p,bAndroid:C,bChromeOS:g,bHarmonyOS:_,bMobile:v,bChrome:T,bEdge:D,bOpera:P,bFirefox:E,bSafari:M,strBrowserVersion:O}},e.getNavInfoByUAData=function(n){var r=function(h){var d=w.navInfoSync,s=h.architecture.toLowerCase(),u="64"==h.bitness,f=s.indexOf("arm")>-1,a=s.indexOf("mips")>-1;return{bWin:d.bWin,bMac:d.bMac,bLinux:d.bLinux,bAndroid:d.bAndroid,bMobile:d.bMobile,bPad:!1,bChromeOS:d.bChromeOS,bHarmonyOS:d.bHarmonyOS,bArm64:f,bMips64:a,bEmbed:!1,bOSx64:u,bIE:!1,bEdge:d.bEdge,bChrome:d.bChrome,bFirefox:d.bFirefox,bSafari:d.bSafari,bOpera:d.bOpera,bGecko:!0,bHuaWeiBrowser:!1,bHTML5Edition:!0,strBrowserVersion:d.strBrowserVersion,IEMode:0}};return n?Promise.resolve(function(){return r(n)}):navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","bitness"]).then(r)},e.asyncGetNavInfo=function(){if(w.navInfo)return Promise.resolve(w.navInfo);var n=navigator;if("userAgentData"in n){var r=navigator.userAgentData;if(r.platform&&""!=r.platform){var h=[];if("brands"in r&&e.isArray(r.brands)&&r.brands.length>0?h=r.brands:"uaList"in r&&e.isArray(r.uaList)&&r.uaList.length>0&&(h=r.uaList),h.length>0)return e.getNavInfoByUAData().then(function(s){return w.navInfo=s,s})}}return"userAgent"in n?(w.navInfo=e.getNavInfoByUserAgent(n.userAgent,n.platform),Promise.resolve(w.navInfo)):(w.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),Promise.resolve(w.navInfo))},e.getNavInfo=function(){if(w.navInfo)return w.navInfo;var n=navigator;if("userAgentData"in n){var r=navigator.userAgentData;if(r.platform&&""!=r.platform){var h=[];if("brands"in r&&e.isArray(r.brands)&&r.brands.length>0?h=r.brands:"uaList"in r&&e.isArray(r.uaList)&&r.uaList.length>0&&(h=r.uaList),h.length>0)return e.getNavInfoByUAData().then(function(s){w.navInfo=s}),!1}}return"userAgent"in n?(w.navInfo=e.getNavInfoByUserAgent(n.userAgent,n.platform),w.navInfo):(w.navInfo=e.getNavInfoByUserAgent(e._defaultAgent,e._defaultPlatform),w.navInfo)},w.navInfoSync=e.getNavInfoSync())}(w.Lib),function(e,t){var n=e.Lib,r=e.navInfoSync,h=20200521;if(!(n._ls_ver&&n.isNumber(n._ls_ver)&&n._ls_ver>=h)){n._ls_ver=h;var d=!1,s=!1;if(!(r.bEdge&&r.bFileSystem||r.bIE&&r.IEVersion<8))try{s=window.localStorage,d=!!s}catch{s=!1}n.LS={isSupportLS:function(){return d},item:function(u,f,a){var o=null;return this.isSupportLS()?(f?(s.setItem(u,f),o=f):o=s.getItem(u),null===o?a:o):a},removeItem:function(u){return!!this.isSupportLS()&&(s.removeItem(u),!0)}}}}(w),function(e,t){var n=20200708;if(!(e._utilities_ver&&e._utilities_ver>=n)){e._utilities_ver=n;var h=e.win,d=e.doc,s=w.navInfoSync,v=(e.getLogger(),0),T=[],M=/\S/,O=!(!d||!d.addEventListener),R="DOMContentLoaded",F="readystatechange",B="load",b="complete",A=O?function(Ie,_e,ce){Ie.addEventListener(_e,ce,!1)}:function(Ie,_e,ce){Ie.attachEvent("on"+_e,ce)},N=O?function(Ie,_e,ce){Ie.removeEventListener(_e,ce,!1)}:function(Ie,_e,ce){Ie.detachEvent("on"+_e,ce)};if(e.mix(e,{isWindow:function(Ie){return null!=Ie&&Ie==Ie.window},globalEval:function(Ie){Ie&&M.test(Ie)&&(h.execScript?h.execScript(Ie):h.eval.call(h,Ie))},domReady:function(Ie){if(v)try{Ie(e)}catch(_e){e.log(_e.stack||_e,"error"),setTimeout(function(){throw _e},0)}else T.push(Ie);return this}}),e.ready=e.domReady,e.checkDomReady=function(){v||(v=1,e.asyncGetNavInfo().then(function(Ie){d&&!s.nodejs&&N(h,B,e.checkDomReady),function Y(){for(var Ie=0;Ie<T.length;Ie++)try{T[Ie](e)}catch(_e){e.log(_e.stack||_e,"error"),setTimeout(function(){throw _e},0)}}()}))},function ne(){if(d&&d.readyState!==b)if(A(h,B,e.checkDomReady),O){var Ie=function(){N(d,R,Ie),e.checkDomReady()};A(d,R,Ie)}else{var _e=function(){d.readyState===b&&(N(d,F,_e),e.checkDomReady())};A(d,F,_e);var ce,q=d&&d.documentElement,he=q&&q.doScroll;try{ce=null===h.frameElement}catch{ce=!1}if(he&&ce){var ie=function(){try{he("left"),setTimeout(e.checkDomReady,30)}catch{setTimeout(ie,40)}};ie()}}else e.checkDomReady()}(),w.navInfoSync.bIE)try{d.execCommand("BackgroundImageCache",!1,!0)}catch{}}}(w.Lib),function(e){var t=20200521;if(!(e._domUtil_ver&&e._domUtil_ver>=t)){e._domUtil_ver=t;var r="none";e.mix(e,{get:function(h){return e.doc.getElementById(h)},hide:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display=r)},show:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display="")},toggle:function(h){var d=e.isString(h)?e.get(h):h;d&&(d.style.display=d.style.display===r?"":r)},empty:function(h){if(h)for(;h.firstChild;)h.removeChild(h.firstChild)}})}}(w.Lib),function(e){var t=e.Lib,n=20200521;t._color_ver&&t.isNumber(t._color_ver)&&t._color_ver>=n||(t._color_ver=n,t.colorStrToInt=function(r){var d,s,h="0x";if(/^(rgb|RGB)/.test(r)){var i=r.replace(/[^\d,.]/g,"").split(",");for(s=0;s<3;++s)1==(d=Number(i[s]).toString(16)).length&&(d="0"+d),h+=d;4==i.length?(1==(d=Math.round(255*Number(i[s])).toString(16)).length&&(d="0"+d),h+=d):h+="ff"}else if("transparent"==r)h+="00000000";else if(/^#[0-9a-fA-f]{6}$/.test(r))h+=r.replace(/#/,"")+"ff";else if(/^#[0-9a-fA-f]{3}$/.test(r)){for(s=0;s<3;++s)h+=r[s]+r[s];h+="ff"}else h="-1";return Number(h)},t.IntToColorStr=function(r){if(r>4294967295||r<0)return null;var h;if(w.navInfoSync.bHTML5Edition)h="rgba("+Math.floor(r/16777216)+","+Math.floor(r/65536)%256+","+Math.floor(r/256)%256+","+r%256/255+")";else if(r%256==0)h="transparent";else{for(h=Math.floor(r/256).toString(16);6!=h.length;)h="0"+h;h="#"+h}return h})}(w),function(e){var t=20210107;if(!(e._loadjs_ver&&e._loadjs_ver>=t)){e._loadjs_ver=t;var h=e.doc,d=h&&h.documentElement,s=h.getElementsByTagName("head")[0]||d,i=h.createElement("script").readyState?function(u,f){var a=u.onreadystatechange;u.onreadystatechange=function(){var o=u.readyState;"loaded"===o||"complete"===o?(u.onreadystatechange=null,a&&a(),f.call(this,!0)):"loading"===o||f.call(this,!1)}}:function(u,f){u.addEventListener("load",f,!1),u.addEventListener("error",f,!1)};e.scriptOnload=i,e.getScript=function(u,f,a){var o,c;if(e.isFunction(a)||(a=function(){}),e.isString(u)&&""!=u)return o=h.createElement("script"),c=["",u].join(""),o.src=c,f&&(o.async=!0),o.charset="utf-8",i(o,a),s.insertBefore(o,s.firstChild),o;a()},e.getScripts=function(u,f,a){if(e.isArray(u)){var o=u.length,c=function(l){l?o--:a(),o<=0&&a("ok")};o<=0?a("ok"):e.each(u,function(l){e.getScript(l,f,c)})}else a()},e.getCss=function(u,f){var a,o=f;if(e.isFunction(o)||(o=!1),e.isString(u)&&""!=u)return(a=h.createElement("link")).href=u,a.rel="stylesheet",a.async=!0,o&&i(a,o),s.insertBefore(a,s.firstChild),a;o&&o()},e.getAllCss=function(u,f){if(e.isArray(u)){var a=u.length,o=function(c){c?a--:f(),a<=0&&f("ok")};e.each(u,function(c){e.getCss(c,o)})}else f()},e.addScript=function(u){var f,a;e.isString(a=u.body)&&""!=a&&((f=h.createElement("script")).charset="utf-8",w.navInfoSync.bIE?f.text=a:f.appendChild(h.createTextNode(a)),f.language=u.language?u.language:"javascript",f.type=u.type?u.type:"text/javascript",s.insertBefore(f,s.firstChild))},e.addJS=function(u){e.addScript({body:u})},e.addVBS=function(u){e.addScript({body:u,language:"vbscript",type:"text/vbscript"})}}}(w.Lib),function(e,t){var n=e.Lib,r=20220215;if(!(n._ajax_ver&&n.isNumber(n._ajax_ver)&&n._ajax_ver>=r)){n._ajax_ver=r;var ne,ce,h=w.navInfoSync,d=h.bIE&&h.IEVersion<=9,s=h.bIE&&h.IEVersion<=10,i=n.win,u=n.each,l=200,D=new n.Uri(location.href),P=D&&/^(?:about|app|app\-storage|.+\-extension|file|widget)$/.test(D.getScheme()),M=function(){try{return new i.XMLHttpRequest}catch{}},O=function(){try{var q=!1;return u(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(he){try{return q=new i.ActiveXObject(he)}catch(ie){n.error("new xhr error: "+ie.message)}}),q}catch{}},R=!(P||!i.XMLHttpRequest)&&"withCredentials"in(M()||[]),F=i.ActiveXObject?function(q){return d?O():!P&&M()||O()}:M,b=/^(?:GET|HEAD)$/,A=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,N={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},Y=void 0;ne=Rt&&Rt.fetch?Rt.fetch:i.fetch,s&&(Y=n.noop),n.mix(Ie.prototype,{url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:"GET",async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:"text",headers:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:!1,afterSend:!1,timeout:0,cache:!0,crossDomain:!1,retry:0,setRequestHeader:function(q,he){return this.headers[q]=he,this},getAllResponseHeaders:function(){return 2===this.state?this.responseHeadersString:null},getNativeXhr:function(){return this.nativeXhr},getResponseHeader:function(q){var he,V;if(q=q.toLowerCase(),2===this.state){if(!(V=this.responseHeaders))for(V=this.responseHeaders={};he=A.exec(this.responseHeadersString);)V[he[1].toLowerCase()]=he[2];he=V[q]}return void 0===he?null:he},overrideMimeType:function(q){return this.state||(this.mimeType=q),this},abort:function(q){var he=this;return q=q||"abort",he.state=3,he.status=0,he.statusText=q,he.nativeXhr&&he.nativeXhr.abort(),he._callback(),he},_ioReady:function(q,he){var ie=this,V=!1;if(2!==ie.state&&3!==ie.state){1===ie.state&&(ie.state=2),ie.readyState=4,q>=l&&q<300||304===q?304===q?(he="not modified",V=!0):(he="success",V=!0):q<0&&(q=0);try{q>=l&&ie.handleResponseData()}catch(J){n.error(J.stack||J,"error"),he=J.message||"parser error"}if((q<l||!V)&&ie.retry>0)return ie.retry=ie.retry-1,void setTimeout(function(){ie.sendInternal()},200);ie.status=q,ie.statusText=he,ie._callback(V)}},_callback:function(q){var he=this,ie=he.timeoutTimer;ie&&(clearTimeout(ie),he.timeoutTimer=0),u([q?he.onSuccess:he.onError,he.onComplete],function(V){n.isFunction(V)&&V.apply(he.context,[he.responseData,he.statusText,he])}),he.responseData=null},handleResponseData:function(){var he,q=this,ie=q.dataType,V=q.nativeXhr;if("blob"===ie||"arraybuffer"===ie)if(d){var J,te,oe;if("responseBody"in V)J=V.responseBody,te=dsVbsBinGetLength(J),he=new VBArray(dsVbsBinGetBytes(J,0,te)).toArray();else for(he=[],te=(J=V.responseText).length,oe=0;oe<te;++oe)he.push(255&J.charCodeAt(oe));J=null}else he=i.Blob?V.response:"responseBody"in V?V.responseBody:V.responseText;else if("json"==ie)he=V.responseType&&"json"==V.responseType.toLowerCase()?V.response:V.responseText?(i.JSON&&i.JSON.parse?i.JSON.parse:n.parse)(V.responseText):{};else if("user-defined"===ie)he=void 0!==V.response?V.response:V.responseText;else{q.responseText=he=V.responseText||"";try{var Ee=V.responseXML;Ee&&Ee.documentElement&&(q.responseXML=Ee)}catch{}}q.responseData=he},sendInternal:function(q){var ie,J,te,oe,Ee,ge,Re,G,k,U,H,he=this;if(ie=he._setup(q),n.isString(J=ie.method)&&(J=J.toUpperCase()),Ee=ie.contentType,oe=ie.dataType,G=ie.mimeType,n.isString(te=ie.url)&&(he.nativeXhr=ge=F(ie.crossDomain),ge)){try{if(he.state=1,ie.username?ge.open(J,te,ie.async,ie.username,ie.password):ge.open(J,te,ie.async),(ie.async||h.bIE)&&oe&&"user-defined"!=oe&&"responseType"in ge)try{ge.responseType=oe}catch{}}catch(Z){return void(he.state<2?(n.error(Z.stack||Z,"error"),he._ioReady(-1,"open error: "+(n.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))):n.error(Z))}"withCredentials"in(Re=ie.xhrFields||{})&&(R||delete Re.withCredentials),u(Re,function(Z,Q){try{ge[Q]=Z}catch(se){n.error(se)}}),G&&ge.overrideMimeType&&ge.overrideMimeType(G),!1===(k=ie.headers||{})["X-Requested-With"]&&delete k["X-Requested-With"],"setRequestHeader"in ge&&(Ee&&ge.setRequestHeader("Content-Type",ie.contentType),ge.setRequestHeader("Accept",oe&&N[oe]?N[oe]+("*"===oe?"":", */*; q=0.01"):N["*"]),u(k,function(Z,Q){ge.setRequestHeader(Q,Z)})),ie.cache||(ge.setRequestHeader("If-Modified-Since","0"),ge.setRequestHeader("Cache-Control","no-cache")),H=(U=!b.test(ie.method))&&ie.data||null,U&&d&&(H=ie.data),ie.async&&ie.timeout>0&&(ie.timeout<300&&(ie.timeout=300),he.timeoutTimer=setTimeout(function(){he.abort("timeout")},ie.timeout));try{if(he.state=1,n.isFunction(he.beforeSend)&&!1===he.beforeSend(ge,he))return void he.abort("cancel");ge.send(H),H=null,ie.data=null,n.isFunction(he.afterSend)&&he.afterSend(he)}catch(Z){he.state<2?(n.error(Z.stack||Z,"error"),he._ioReady(-1,"send error: "+(Z.message||""))):n.error(Z)}ie.async&&4!==ge.readyState?ge.onreadystatechange=function(){he._xhrCallback()}:he._xhrCallback()}},_xhrCallback:function(q,he){var V=this.nativeXhr;try{if(4===V.readyState||he)if(V.onreadystatechange=Y,he)4!==V.readyState&&V.abort();else{this.responseHeadersString=V.getAllResponseHeaders();var te,J=V.status;try{te=V.statusText}catch(oe){n.error("xhr statusText error: "),n.error(oe),te=""}this._ioReady(J,te)}}catch(oe){n.error(oe.stack||oe,"error"),V.onreadystatechange=Y,he||this._ioReady(-1,oe.message||"process error")}},_setup:function(q){var ie,V,J,te,oe,he=this;if(q){for(V in he.context=q.context,delete q.context,q instanceof Ie&&(q=q.config),he.config=q,n.startsWith(te=q.url,"http://")||n.startsWith(te,"https://")?oe=new n.Uri(te):(n.startsWith(te,"//")&&(q.url=te="http:"+te),oe=D.resolve(te)),ie=q.dataType?q.dataType.toLowerCase():"text",q.dataType=ie,q.method=q.method?q.method.toUpperCase():"GET","crossDomain"in q||(q.crossDomain=!oe.isSameOriginAs(D)),J=q.headers)n.isUndefined(J[V])&&delete J[V];n.mix(he,q)}return he.state=1,he}}),n.mix(n,{ajax:_e,io:{get:function(q,he,ie,V){return _e({method:"GET",url:q,onSuccess:he,onError:ie,dataType:V})},post:function(q,he,ie,V,J){return _e({method:"POST",data:he,url:q,onSuccess:ie,onError:V,dataType:J})},put:function(q,he,ie,V,J){return _e({method:"PUT",data:he,url:q,onSuccess:ie,onError:V,dataType:J})}}}),ne?n.fetch=function(q,he){var J,te,ie="text",V=!1;return he&&(he.dataType&&(ie=he.dataType),he.fetchRaw&&(V=!0)),J=ne(q,he),Promise!=n.nativePromise?(te=Promise,Promise=n.nativePromise,J=J.then(function(oe){if(Promise=te,oe.ok)return oe;throw{httpCode:oe.status,errorString:["HTTP process error: ",oe.statusText," (",oe.status,")."].join("")}})):J=J.then(function(oe){if(oe.ok)return oe;throw{httpCode:oe.status,errorString:["HTTP process error: ",oe.statusText," (",oe.status,")."].join("")}}),V||(J=J.then("blob"==ie?function(oe){return oe.blob()}:"json"==ie?function(oe){return oe.json()}:"arraybuffer"==ie?function(oe){return oe.arrayBuffer()}:function(oe){return oe.text()})),J}:(d&&n.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join("")),Promise!=n.nativePromise&&(ce=Promise,Promise=n.nativePromise),n.fetch=function(q,he){return new Promise(function(ie,V){var oe={url:q,onSuccess:function(ge,Re,G){ce&&(Promise=ce),ie(ge)},onError:function(ge,Re,G){ce&&(Promise=ce),V({httpCode:G.status,errorString:Re})},dataType:"text"},Ee=!1;he&&(he.method&&(oe.method=he.method),he.body&&(oe.data=he.body),he.headers&&(oe.headers||(oe.headers={}),u(he.headers,function(ge,Re){"content-type"==Re.toLowerCase()&&(Ee=!0),oe.headers[Re]=ge})),he.dataType&&(oe.dataType=he.dataType),he.contentType&&(oe.contentType=he.contentType)),Ee&&(oe.contentType=!1),"blob"==oe.dataType&&d&&(oe.mimeType="text/plain; charset=x-user-defined"),n.ajax(oe)})})}function Ie(){}function _e(q){if(q&&n.isString(q.url)){var he=new Ie;return he.sendInternal(q),he}n.log("the url is error.")}}(w),function(e){var t=20200521;if(!(e._customEvt_ver&&e.isNumber(e._customEvt_ver)&&e._customEvt_ver>=t)){e._customEvt_ver=t;var n={fire:function(r){var d,h=this;h.exec=h.exec||{},r=r.toLowerCase(),d=Array.prototype.slice.call(arguments,1),e.each(h.exec[r]||[],function(s){var i=s.f,u=s.c||h;try{i.apply(u,d)}catch(f){e.log(f)}})},on:function(r,h,d){var s=this;s.exec=s.exec||{},r=r.toLowerCase(),s.exec[r]=s.exec[r]||[],s.exec[r].push({f:h,c:d})},off:function(r,h,d){var i=this.exec;if(i){if(!r)return void(this.exec=null);if(r=r.toLowerCase(),!h)return void(i[r]=null);for(var u=i[r]||[],f=u.length-1;f>=0;f--)u[f]===h&&u.splice(f,1)}}};e.obj={customEvent:n}}}(w.Lib),function(e){var d,t=e.Lib,r=!0,h=t.win.document,s=20200521;t._evtBase_ver&&t.isNumber(t._evtBase_ver)&&t._evtBase_ver>=s||(t._evtBase_ver=s,d=function(i){return w.navInfoSync.bGecko&&"mousewheel"===i?"DOMMouseScroll":i},t.mix(t,{addEventListener:h.addEventListener?function(i,u,f){var a=d(u);i&&i.addEventListener(a,f,!1)}:function(i,u,f){var a=d(u);i&&i.attachEvent("on"+a,f)},removeEventListener:h.removeEventListener?function(i,u,f){var a=d(u);i&&i.removeEventListener(a,f,!1)}:function(i,u,f){var a=d(u);i&&i.detachEvent("on"+a,f)},stopPropagation:function(i){var u=i||window.event;u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation(),u.returnValue=!1,u.cancelBubble=!0},fireEvent:function(i,u){var f;h.createEvent?((f=h.createEvent("HTMLEvents")).initEvent(i,r,r),u.dispatchEvent&&u.dispatchEvent(f)):h.createEventObject?((f=h.createEventObject()).bubbles=r,f.cancelable=r,u.fireEvent(i,f)):(f=new Event(i),u.dispatchEvent&&u.dispatchEvent(f))}}))}(w),function(e,t){var n=20200716;if(!(e._loadbase64_ver&&e._loadbase64_ver>=n)){e._loadbase64_ver=n;var r={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};e.base64={UTF16ToUTF8:function(s){for(var f,a,i=[],u=s.length,o=0;o<u;o++){var c=s.charCodeAt(o);if(c>0&&c<=127)i.push(s.charAt(o));else if(c>=128&&c<=2047)f=192|c>>6&31,a=128|63&c,i.push(String.fromCharCode(f),String.fromCharCode(a));else if(c>=2048&&c<=65535){f=224|c>>12&15,a=128|c>>6&63;var l=128|63&c;i.push(String.fromCharCode(f),String.fromCharCode(a),String.fromCharCode(l))}}return i.join("")},UTF8ToUTF16:function(s){var f,c,l,I,i=[],u=s.length;for(f=0;f<u;f++)0==((c=s.charCodeAt(f))>>7&255)?i.push(s.charAt(f)):6==(c>>5&255)?(I=(31&c)<<6|63&(l=s.charCodeAt(++f)),i.push(String.fromCharCode(I))):14==(c>>4&255)&&(I=(255&(c<<4|(l=s.charCodeAt(++f))>>2&15))<<8|(3&l)<<6|63&s.charCodeAt(++f),i.push(String.fromCharCode(I)));return i.join("")},encode:function(s){for(var o,c,l,i=this.UTF16ToUTF8(s),u=[],f=0,a=i.length;f<a;){if(o=255&i.charCodeAt(f++),f==a){u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4)),u.push("==");break}if(c=i.charCodeAt(f++),f==a){u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4|(240&c)>>4)),u.push(r.encodeChars.charAt((15&c)<<2)),u.push("=");break}l=i.charCodeAt(f++),u.push(r.encodeChars.charAt(o>>2)),u.push(r.encodeChars.charAt((3&o)<<4|(240&c)>>4)),u.push(r.encodeChars.charAt((15&c)<<2|(192&l)>>6)),u.push(r.encodeChars.charAt(63&l))}return u.join("")},encodeArray:function(s){for(var a,o,c,i=[],u=0,f=s.length;u<f;){if(a=255&s[u++],u==f){i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4)),i.push("==");break}if(o=255&s[u++],u==f){i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4|(240&o)>>4)),i.push(r.encodeChars.charAt((15&o)<<2)),i.push("=");break}c=255&s[u++],i.push(r.encodeChars.charAt(a>>2)),i.push(r.encodeChars.charAt((3&a)<<4|(240&o)>>4)),i.push(r.encodeChars.charAt((15&o)<<2|(192&c)>>6)),i.push(r.encodeChars.charAt(63&c))}return i.join("")},decode:function(s,i){for(var c,l,m,I,u=this,f=[],a=0,o=s.length;a<o;){do{c=r.decodeChars[255&s.charCodeAt(a++)]}while(a<o&&-1==c);if(-1==c)break;do{l=r.decodeChars[255&s.charCodeAt(a++)]}while(a<o&&-1==l);if(-1==l)break;f.push(i?c<<2|(48&l)>>4:String.fromCharCode(c<<2|(48&l)>>4));do{if(61==(m=255&s.charCodeAt(a++)))return i?f:u.UTF8ToUTF16(f.join(""));m=r.decodeChars[m]}while(a<o&&-1==m);if(-1==m)break;f.push(i?(15&l)<<4|(60&m)>>2:String.fromCharCode((15&l)<<4|(60&m)>>2));do{if(61==(I=255&s.charCodeAt(a++)))return i?f:u.UTF8ToUTF16(f.join(""));I=r.decodeChars[I]}while(a<o&&-1==I);if(-1==I)break;f.push(i?(3&m)<<6|I:String.fromCharCode((3&m)<<6|I))}return i?f:u.UTF8ToUTF16(f.join(""))}},e.utf8={fromUTF16:function(s){for(var a,i=[],u=0,f=s.length;u<f;)(a=s.charCodeAt(u))>=1&&a<=127?i.push(s.charAt(u)):a>2047?(i.push(String.fromCharCode(224|a>>12&15)),i.push(String.fromCharCode(128|a>>6&63)),i.push(String.fromCharCode(128|a>>0&63))):(i.push(String.fromCharCode(192|a>>6&31)),i.push(String.fromCharCode(128|a>>0&63))),u++;return i.join("")},toUTF16:function(s){for(var a,o,c,i=[],u=0,f=s.length;u<f;)switch(a=s.charCodeAt(u++),a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i.push(s.charAt(u-1));break;case 12:case 13:o=s.charCodeAt(u++),i.push(String.fromCharCode((31&a)<<6|63&o));break;case 14:o=s.charCodeAt(u++),c=s.charCodeAt(u++),i.push(String.fromCharCode((15&a)<<12|(63&o)<<6|(63&c)<<0))}return i.join("")}};var h=typeof exports<"u"?exports:typeof Rt<"u"?Rt:$.global;(d.prototype=new Error).name="InvalidCharacterError",e.btoa=h.btoa?function(s){return h.btoa(s)}:function(s){for(var u,f,i=String(s),a=0,o=r.encodeChars,c="";i.charAt(0|a)||(o="=",a%1);c+=o.charAt(63&u>>8-a%1*8)){if((f=i.charCodeAt(a+=3/4))>255)throw new d("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return c},e.atob=h.atob?function(s){return h.atob(s)}:function(s){var i=String(s).replace(/[=]+$/,"");if(i.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var f,a,u=0,o=0,c="";a=i.charAt(o++);~a&&(f=u%4?64*f+a:a,u++%4)?c+=String.fromCharCode(255&f>>(-2*u&6)):0)a=r.encodeChars.indexOf(a);return c}}function d(s){this.message=s}}(w.Lib),function(e){var t=e.Lib,n=20210601;if(!(t._asyncQueue_ver&&t.isNumber(t._asyncQueue_ver)&&t._asyncQueue_ver>=n)){t._asyncQueue_ver=n;var r={queue:[],doNextStarted:!1,timer:!1,pushToDo:function(h,d,s){r.queue.push({obj:h,method:d,args:s})},doNext:function(){if(!r.doNextStarted)return clearTimeout(r.timer),void(r.timer=!1);if(0!=r.queue.length){var h=r.queue[0],d=h.obj,s=h.method,i=h.args;if(r.queue.splice(0,1),d&&t.isFunction(d[s])){var u=!1;if(i.length>2){var f=i[i.length-2],a=i[i.length-1];t.isFunction(f)&&t.isFunction(a)&&(i[i.length-2]=function(){try{f.apply(d,arguments)}catch{}r.timer=setTimeout(r.doNext,0)},i[i.length-1]=function(){try{a.apply(d,arguments)}catch{}r.timer=setTimeout(r.doNext,0)},u=!0)}try{d[s].apply(d,i)}catch{}u||(r.timer=setTimeout(r.doNext,0))}else if(null===d&&t.isFunction(s)){try{s.apply(null,i)}catch{}r.timer=setTimeout(r.doNext,0)}else t.log("not invoke a function: "+s),r.timer=setTimeout(r.doNext,0)}else r.timer=setTimeout(r.doNext,500)},start:function(){r.doNextStarted||(r.doNextStarted=!0,r.timer=setTimeout(r.doNext,0))},stop:function(){clearTimeout(r.timer),r.doNextStarted=!1,r.queue=[]}};t.asyncQueue=r}}(w),function(e){var t=20200521;if(!(e._sprintf_ver&&e._sprintf_ver>=t)){e._sprintf_ver=t;var n,r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},s=Object.create?Object.create(null):{};n=function(f){return d(i(f),arguments)},e.sprintf=n,e.vsprintf=function u(f,a){return n.apply(null,[f].concat(a||[]))}}function h(f,a){if("_".repeat)return f.repeat(a);for(var o=0,c=[];o<a;o++)c.push(f);return c.join("")}function d(f,a){var l,I,p,g,C,_,v,T,D,o=1,c=f.length,m="";for(I=0;I<c;I++)if("string"==typeof f[I])m+=f[I];else if("object"==typeof f[I]){if((g=f[I]).keys)for(l=a[o],p=0;p<g.keys.length;p++){if(null==l)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[p],g.keys[p-1]));l=l[g.keys[p]]}else l=g.param_no?a[g.param_no]:a[o++];if(r.not_type.test(g.type)&&r.not_primitive.test(g.type)&&l instanceof Function&&(l=l()),r.numeric_arg.test(g.type)&&"number"!=typeof l&&isNaN(l))throw new TypeError(n("[sprintf] expecting number but found %T",l));switch(r.number.test(g.type)&&(T=l>=0),g.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,g.width?parseInt(g.width):0);break;case"e":l=g.precision?parseFloat(l).toExponential(g.precision):parseFloat(l).toExponential();break;case"f":l=g.precision?parseFloat(l).toFixed(g.precision):parseFloat(l);break;case"g":l=g.precision?String(Number(l.toPrecision(g.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=g.precision?l.substring(0,g.precision):l;break;case"t":l=String(!!l),l=g.precision?l.substring(0,g.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=g.precision?l.substring(0,g.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=g.precision?l.substring(0,g.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}r.json.test(g.type)?m+=l:(!r.number.test(g.type)||T&&!g.sign?D="":(D=T?"+":"-",l=l.toString().replace(r.sign,"")),_=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",v=g.width-(D+l).length,C=g.width&&v>0?h(_,v):"",m+=g.align?D+l+C:"0"===_?D+C+l:C+D+l)}return m}function i(f){if(s[f])return s[f];for(var o,a=f,c=[],l=0;a;){if(null!==(o=r.text.exec(a)))c.push(o[0]);else if(null!==(o=r.modulo.exec(a)))c.push("%");else{if(null===(o=r.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(o[2]){l|=1;var m=[],I=o[2],p=[];if(null===(p=r.key.exec(I)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(p[1]);""!==(I=I.substring(p[0].length));)if(null!==(p=r.key_access.exec(I)))m.push(p[1]);else{if(null===(p=r.index_access.exec(I)))throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(p[1])}o[2]=m}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}a=a.substring(o[0].length)}return s[f]=c,c}}(w.Lib),function(e){var t=e.Lib,n=t.doc,r=20200521;if(!(t._evt_ver&&t.isNumber(t._evt_ver)&&t._evt_ver>=r)){t._evt_ver=r,t.Events={registedClass:[],registedObjs:[]};var h=function(s){var i=s||window.event,u=!0;return t.each(t.Events.registedObjs,function(f){t.each(t.Events.registedClass,function(a){if(f instanceof a&&f.bFocus&&f.handlerKeyDown&&!(u=f.handlerKeyDown(i)))return!1})}),u};t.ready(function(){t.addEventListener(n.documentElement,"keydown",h)}),t.mix(t,{getWheelDelta:function(s){var i,u=(s=s||window.event).wheelDelta,f=s.detail;return u&&(i=u/120),f&&(i=-(f%3==0?f/3:f)),i}});var d={LEFT:0,MIDDLE:1,RIGHT:2};t.EnumMouseButton=d,t.detectButton=function(s){var i=s||window.event;return null==i.which?i.button<2?d.LEFT:4==i.button?d.MIDDLE:d.RIGHT:i.which<2?d.LEFT:2==i.which?d.MIDDLE:d.RIGHT}}}(w),function(e){var t=20200521;e._ui_eventWhich_ver&&e.isNumber(e._ui_eventWhich_ver)&&e._ui_eventWhich_ver>=t||(e._ui_eventWhich_ver=t,e.switchEvent=function(n){return(n=n||window.event).which=null==n.which?n.button<2?1:4==n.button?2:3:n.which<2?1:2==n.which?2:3,n})}(w.Lib),function(e){var t=20200521;e._ui_style_ver&&e.isNumber(e._ui_style_ver)&&e._ui_style_ver>=t||(e._ui_style_ver=t,e.currentStyle=function(n,r){var h=e.win,d=h.doc;return n.currentStyle?n.currentStyle[r]:h.getComputedStyle?(r.replace(/([A-Z])/g,"-$1"),r.toLowerCase(),d.defaultView.getComputedStyle(n,null)[r]):null})}(w.Lib),function(e,t){var d=e.Lib,s=e.navInfoSync,i=d.isString,u=d.each,f=Array.prototype.slice,a=" ",o=s.bIE&&s.IEMode<10,c=/[\n\t\r\.]/g,l=20200521;function m(P,E,M){var O=this;return O instanceof m?P?"string"==typeof P?(d.error("Err 4001."),O):d.isArray(P)||P.isNodeList?(Array.prototype.push.apply(O,d.makeArray(P)),O):(O[0]=P,O.length=1,O):O:new m(P,E,M)}function I(P){return i(P)&&(P=d.trim(P))&&P.length>=3&&d.startsWith(P,"<")&&d.endsWith(P,">")}function p(P){return(a+P+a).replace(c,a)}function g(P){return P.replace(c,"")}function D(P,E){var M=E;return M&&M.isNodeList&&(M=M.getEL()),i(P)?(I(P)&&d.err("Err 4002."),new m(d.sizzle(P,M))):P.isNodeList?P:new m(P)}d._ui_nodelist_ver&&d.isNumber(d._ui_nodelist_ver)&&d._ui_nodelist_ver>=l||(d._ui_nodelist_ver=l,m.prototype={isNodeList:!0,length:0,item:function(P){return d.isNumber(P)?P>=this.length?null:new m(this[P]):new m(P)},slice:function(){return new m(f.apply(this,arguments))},getDOMNodes:function(){return f.call(this)},each:function(P,E){var M=this;return u(M,function(O,R){return O=new m(O),P.call(E||O,O,R,M)}),M},getEL:function(){return this.length>0?this[0]:void 0},all:function(P){return this.length>0?d.all(P,this):new m},one:function(P){var M=this.all(P);return M.length?M.slice(0,1):M}},d.mix(m.prototype,{before:function(P){var E=this.getEL(),M=[P];E&&(I(P)&&(M=d.parseHTML(P)),u(M,function(O){E.insertBefore(O,E.childNodes[0])}))},append:function(P){var E=this.getEL(),M=[P];E&&(I(P)&&(M=d.parseHTML(P)),u(M,function(O){E.appendChild(O)}))},html:function(P){var E=this.getEL();if(E){if(d.isUndef(P))return function C(P){var E=P.innerHTML;return document.all?(E=E.replace(/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/gi,'$1="$2"').replace(/"'([^'"]*)'"/gi,'"$1"')).replace(/<(\/?)(\w+)([^>]*)>/g,function(F,B,b,A){return B?"</"+b.toLowerCase()+">":("<"+b.toLowerCase()+A+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(N,Y,ne,Ie,_e,ce,q,he){return _e?'="'+_e+'"'+ce:N})}).replace(/<\/?([^>]+)>/g,function(F){return F}):E}(E);E.innerHTML="",u(d.parseHTML(P),function(M){E.appendChild(M)})}},attr:function(P,E){var M=this.getEL();if(M){if(d.isUndef(E))return"readonly"===P?M.readOnly?"readonly":"":("style"!==P&&o?M=M[P]:(M=M.attributes[P])&&(M=M.value),M);"class"==P?M.className=E:M[P]=E}},style:function(P,E){var M=this.getEL();if(M)return d.style(M,P,E)},css:function(P){u(this,function(E){u(P,function(M,O){d.style(E,O,M)})})},addClass:function(P){var E=this.getEL();E&&function(P,E){var O,F,B,b,M=P.className,R=E.length;if(M){for(O=p(M),F=M,B=0;B<R;B++)b=g(E[B]),O.indexOf(a+b+a)<0&&(F+=a+b);F=d.trim(F)}else F=E.join(" ");P.className=F}(E,P.split(a))},removeClass:function(P){var E=this.getEL();E&&function(P,E){var O,F,B,M=P.className,R=E.length;if(M&&R){for(O=p(M),F=0;F<R;F++)for(B=a+g(E[F])+a;O.indexOf(B)>=0;)O=O.replace(B,a);P.className=d.trim(O)}}(E,P.split(a))},hasClass:function(P){var E=this.getEL();if(E)return function(P,E){var O,F,B,M=P.className,R=E.length;if(M&&R){for(O=p(M),F=0;F<R;F++)if(B=a+g(E[F])+a,O.indexOf(B)<0)return!1;return!0}return!1}(E,P.split(a))},parent:function(){var P=this.getEL();return P&&(P=P.parentNode),new m(P)},remove:function(){var P=this.getEL();P&&P.parentNode.removeChild(P)},offset:function(){var P=this.getEL();return d.DOM.getElDimensions(P,!0)}}),d.mix(d,{all:D,one:function(P,E){var M=D(P,E);return M.length?M.slice(0,1):M},isNodeList:function(P){return P instanceof m}}),d.ready(function(){d.all=D}))}(w),function(e){var t=e.win,n=e.doc,r=isNaN,h=20200521;e._dom_ver&&e.isNumber(e._dom_ver)&&e._dom_ver>=h||(e._dom_ver=h,e.DOM={getOffset:function(d,s,i){d=d||t.event;for(var l,m,u=i||d.target,f=0,a=0,o=0,c=0,I=!1;u&&!r(u.offsetLeft)&&!r(u.offsetTop);)m=u.scrollLeft,l=u.scrollTop,"BODY"===u.tagName?I?(m=0,l=0):(m|=n.documentElement.scrollLeft,l|=n.documentElement.scrollTop):"fixed"===u.style.position&&(I=!0),f+=u.offsetLeft-m,a+=u.offsetTop-l,u=u.offsetParent;return s&&(o=s.Left,c=s.Top),{x:f=d.clientX-f-o,y:a=d.clientY-a-c}},getElDimensions:function(d,s){var i,u;return d?(i=d.style.display,d.style.display="",u=s?{offsetTop:d.offsetTop,offsetLeft:d.offsetLeft,offsetWidth:d.offsetWidth,offsetHeight:d.offsetHeight}:{clientTop:d.clientTop,clientLeft:d.clientLeft,clientWidth:d.clientWidth?d.clientWidth:parseInt(d.style.width)?parseInt(d.style.width):0,clientHeight:d.clientHeight?d.clientHeight:parseInt(d.style.height)?parseInt(d.style.height):0},d.style.display=i,u):{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}},e.getElDimensions=e.DOM.getElDimensions)}(w.Lib),function(e,t){var n=20220215,r=e.Lib;if(!(r._dialog_ver&&r.isNumber(r._dialog_ver)&&r._dialog_ver>=n)){r._dialog_ver=n,r.loaderBarClassName="ds-dwt-loaderBar",r.loaderBarWidth="230px",r.loaderBarHeight="240px",r.loaderBarBackgroundColor="",r.loaderBarSource="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjAiIHdpZHRoPSIxMDBweCIgaGVpZ2h0PSIxMDBweCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjE2IiBmaWxsPSIjZmU4ZTE0Ii8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTQuMzQ0IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSIxMi41MzEiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDkwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjEwLjc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxMzUgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iMTAuMDYzIiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgxODAgNjQgNjQpIi8+PGNpcmNsZSBjeD0iMTYiIGN5PSI2NCIgcj0iOC4wNjMiIGZpbGw9IiNmZThlMTQiIHRyYW5zZm9ybT0icm90YXRlKDIyNSA2NCA2NCkiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjY0IiByPSI2LjQzOCIgZmlsbD0iI2ZlOGUxNCIgdHJhbnNmb3JtPSJyb3RhdGUoMjcwIDY0IDY0KSIvPjxjaXJjbGUgY3g9IjE2IiBjeT0iNjQiIHI9IjUuMzc1IiBmaWxsPSIjZmU4ZTE0IiB0cmFuc2Zvcm09InJvdGF0ZSgzMTUgNjQgNjQpIi8+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIHZhbHVlcz0iNDUgNjQgNjQ7OTAgNjQgNjQ7MTM1IDY0IDY0OzE4MCA2NCA2NDsyMjUgNjQgNjQ7MjcwIDY0IDY0OzMxNSA2NCA2NDswIDY0IDY0IiBjYWxjTW9kZT0iZGlzY3JldGUiIGR1cj0iNzIwbXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9nPjwvc3ZnPg==",r.loaderBarSourceIE="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=",r.createShowMaskContent=function(){var M,O,E="";return w.DWT&&w.DWT.CustomizableDisplayInfo&&(O=w.DWT.CustomizableDisplayInfo),M=O&&r.isString(O.loaderBarSource)&&""!=O.loaderBarSource?O.loaderBarSource:w.navInfoSync.bIE?r.loaderBarSourceIE:r.loaderBarSource,""!=r.loaderBarBackgroundColor&&(E=";background:"+r.loaderBarBackgroundColor),['<div align="center" ','class="',r.loaderBarClassName,'" ','style="margin:0 auto;width:',r.loaderBarWidth,";height:",r.loaderBarHeight,";line-height:",r.loaderBarHeight,E,'"><img src="',M,'" /></div>'].join("")};var u,f,h=r.win,d=r.doc,s=!0,i=!1,a=5e5,T={pendingDialogStack:[],_updateStacking:function(E){var R,B;0!=(R=this.pendingDialogStack).length?(1!=E&&function _(){u===t&&function C(){u=d.createElement("div"),(f=u.style).position="fixed",f.display="block",f.left=f.top=f.margin=f.padding=0,f.backgroundColor="rgba(128, 128, 128, 0.1)",f.filter="alpha(opacity=10)",f.opacity=f.MozOpacity=.1,f.zIndex=a,f.width=f.height="100%",w.navInfoSync.bIE&&(u.innerHTML='<iframe src="javascript:\'\'" style="background:none;margin:0px auto;border:0;width:100%;height:100%;position:relative;z-index:9999;"></iframe>'),d.createEvent&&r.addEventListener(u,"click",g)}(),d.body.contains(u)||d.body.appendChild(u)}(),B=a,r.each(R,function(b){B++,b._dlgInfo.mask.style.zIndex=B++,b.style.zIndex=B})):function v(){u!==t&&(r.removeEventListener(u,"click",g),d.body.removeChild(u),u=t)}()},pushDialog:function(E,M){var R,O=this,F=E.getBoundingClientRect();O.pendingDialogStack.length>=1e3?r.error("Too many modal dialogs."):((R=d.createElement("div")).className="dynamsoft-backdrop",1==M&&(R.style.left=(F.x|F.left)+"px",R.style.top=(F.y|F.top)+"px",R.style.width=F.width+"px",R.style.height=F.height+"px"),d.createEvent&&r.addEventListener(R,"click",function(B){if(E.dispatchEvent){var b=p(B);E.dispatchEvent(b)}}),E.parentNode.insertBefore(R,E.nextSibling),E._dlgInfo.mask=R,O.pendingDialogStack.push(E),O._updateStacking(M))},removeDialog:function(E){var O,R,M=this;-1!=(O=r.isArray(M.pendingDialogStack)?r.indexOf(E,M.pendingDialogStack):-1)&&(M.pendingDialogStack.splice(O,1),(R=E._dlgInfo.mask).parentNode.removeChild(R),E._dlgInfo.mask=null,M._updateStacking())}};r.dialog={setup:function(E,M,O){E.show=D.bind(E,i,M),E.showModal=D.bind(E,s,M),E.close=P.bind(E),O&&(E._dlgcfg=O),E._dlgInfo={}},setcfg:function(E,M){E._dlgcfg=M}},r.mask={container:!1,bConfined:!1,dlgMask:!1,preOnresize:!1,preOnscroll:!1},r.showMask=function(){if(!r.mask.dlgMask&&!r.dlgLoadingShowStatus){var O,E=r.mask.bConfined,M=r.mask.container;if(M){O=M.getBoundingClientRect();for(var R=M.firstChild;R;){if(r.isFunction(R.getBoundingClientRect)){O=R.getBoundingClientRect();break}R=R.nextSibling}}var F=document.createElement("div");F.className="dynamsoft-dialog-wrap",r.mask.preOnresize=!!window.onresize&&window.onresize,r.mask.preOnscroll=!!window.onscroll&&window.onscroll,E&&O&&(window.onresize=window.onscroll=function(){O=M.getBoundingClientRect();for(var B=M.firstChild;B;){if(r.isFunction(B.getBoundingClientRect)){O=B.getBoundingClientRect();break}B=B.nextSibling}F.style.left=(O.x|O.left)+"px",F.style.top=(O.y|O.top)+"px",F.style.width=O.width+"px",O.width<470&&(r.loaderBarWidth=O.width-10+"px"),F.style.height=r.loaderBarHeight=O.height+"px",r.mask.dlgMask&&(r.mask.dlgMask.close(),r.mask.dlgMask.showModal())},window.onscroll()),F.innerHTML=r.createShowMaskContent(),document.body.appendChild(F),r.mask.dlgMask=F,r.dialog.setup(r.mask.dlgMask,E),r.mask.dlgMask.showModal()}},r.hideMask=function(){var E=r.mask.dlgMask;E&&(E.close(),document.body.removeChild(E),r.mask.dlgMask=!1),window.onresize=r.mask.preOnresize?r.mask.preOnresize:null,r.mask.preOnresize=!1,window.onscroll=r.mask.preOnscroll?r.mask.preOnscroll:null,r.mask.preOnscroll=!1}}function l(E,M){for(var O=0;O<E.length;++O)if(E[O]==M)return s;return i}function p(E){var M=d.createEvent("MouseEvents");return M.initMouseEvent(E.type,E.bubbles,E.cancelable,h,E.detail,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget),M}function g(E){d.body.dispatchEvent(p(E))}function D(E,M){var O=this,R="absolute",B=O._dlgcfg;B&&r.isString(B.style_position)&&(R=B.style_position),O.open?r.error("showDialog called on open dialog."):(O.open=s,O.removeAttribute("closed"),O.setAttribute("open","open"),O.setAttribute("style","DIALOG"==O.tagName?"position:"+R+";left:0;right:0;top:30%;margin:auto;border-radius:6px;box-shadow:2px 2px 0 0 rgba(0,0,0,.05);width:-moz-fit-content;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;":"position:"+R+";display:block;left:0;right:0;border:0;top:30%;margin:auto;width:-moz-fit-content;-webkit-box-sizing:border-box;box-sizing:border-box;"),function I(E){var M=i;return h.getComputedStyle?M=h.getComputedStyle(E):E.currentStyle&&(M=E.currentStyle),M&&"absolute"!=M.position||"auto"!=E.style.top&&""!=E.style.top||"auto"!=E.style.bottom&&""!=E.style.bottom?i:!function m(E){for(var M=0;M<d.styleSheets.length;++M){var B,b,O=d.styleSheets[M],R=i,F=i;try{R=O.cssRules,F=d.querySelectorAll}catch{}if(R&&F)for(var A=0;A<R.length;++A){B=R[A],b=i;try{b=F(B.selectorText)}catch{}if(b&&l(b,E)){var N=B.style.getPropertyValue("top"),Y=B.style.getPropertyValue("bottom");if(N&&"auto"!=N||Y&&"auto"!=Y)return s}}}return i}(E)}(O)&&function c(E){E.style.top=(d.body.scrollTop||d.documentElement.scrollTop)+((h.innerHeight?h.innerHeight:d.documentElement.clientHeight)-E.offsetHeight)/2+"px",E._dlgInfo.isTopOverridden=s}(O),E&&(O._dlgInfo.modal=s,T.pushDialog(O,M)))}function P(E){var M=this;return M.open||r.error("closeDialog called on closed dialog."),M.open=i,M.removeAttribute("open"),M.setAttribute("closed","closed"),M.style.display="none",typeof E<"u"&&(M.returnValue=E),M._dlgInfo.isTopOverridden&&(M.style.top="auto"),M._dlgInfo.modal&&T.removeDialog(M),M.returnValue}}(w),function(e){var t=20200521;if(!(e._sizzle_ver&&e.isNumber(e._sizzle_ver)&&e._sizzle_ver>=t)){e._sizzle_ver=t;var h,d,s,i,u,f,a,o,c,l,m,I,g,C,_,v,M,O,R,F,r=RegExp,T="dws_"+1*new Date,D=window.document,P=0,E=0,B=function(ve,Fe){return ve===Fe&&(c=!0),0},b=[],A=b.pop,N=b.push,Y=b.push,ne=b.slice,Ie=function(ve,Fe){for(var Ve=0,Ye=ve.length;Ve<Ye;Ve++)if(ve[Ve]===Fe)return Ve;return-1},ce="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",he=["\\[",ce,"*(",q,")(?:",ce,"*([*^$|!~]?=)",ce,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",q,"))|)",ce,"*\\]"].join(""),ie=new r(ce+"+","g"),V=new r(["^",ce,"+|((?:^|[^\\\\])(?:\\\\.)*)",ce,"+$"].join(""),"g"),J=new r(["^",ce,"*,",ce,"*"].join("")),te=new r(["^",ce,"*([>+~]|",ce,")",ce,"*"].join("")),Ee=(new r("^"+q+"$"),{ID:new r("^#("+q+")"),CLASS:new r("^\\.("+q+")"),TAG:new r("^("+q+"|[*])"),ATTR:new r("^"+he),needsContext:new r(["^",ce,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",ce,"*((?:-\\d)?\\d*)",ce,"*\\)|)(?=[^-]|$)"].join(""),"i")}),ge=/^[^{]+\{\s*\[native \w/,Re=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,k=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,U=function(ve,Fe){return Fe?"\0"===ve?"\ufffd":ve.slice(0,-1)+"\\"+ve.charCodeAt(ve.length-1).toString(16)+" ":"\\"+ve},H=function(){l()};M=ee(),O=ee(),R=ee(),F=ee();try{Y.apply(b=ne.call(D.childNodes),D.childNodes)}catch{Y={apply:b.length?function(Fe,Ve){N.apply(Fe,ne.call(Ve))}:function(Fe,Ve){for(var Ye=Fe.length,Ne=0;Fe[Ye++]=Ve[Ne++];);Fe.length=Ye-1}}}h=Q.support={},l=Q.setDocument=function(ve){var Fe,Ve,Ye=ve?ve.ownerDocument||ve:D;return Ye===m||9!==Ye.nodeType||!Ye.documentElement||(I=(m=Ye).documentElement,D!==m&&(Ve=m.defaultView)&&Ve.top!==Ve&&(Ve.addEventListener?Ve.addEventListener("unload",H,!1):Ve.attachEvent&&Ve.attachEvent("onunload",H)),h.attributes=le(function(Ne){return Ne.className="i",!Ne.getAttribute("className")}),h.getElementsByTagName=le(function(Ne){return Ne.appendChild(m.createComment("")),!Ne.getElementsByTagName("*").length}),h.getElementsByClassName=ge.test(m.getElementsByClassName),h.getById=le(function(Ne){return I.appendChild(Ne).id=T,!m.getElementsByName||!m.getElementsByName(T).length}),d.filter.ID=h.getById?function(Ne){var Je=Ne;return function(we){return we.getAttribute("id")===Je}}:function(Ne){var Je=new r(["^",Ne,"$"].join(""),"g");return function(we){var Ae=typeof we.getAttributeNode<"u"&&we.getAttributeNode("id");return Ae&&Je.test(Ae.value)}},d.find.TAG=h.getElementsByTagName?function(Ne,Je){return typeof Je.getElementsByTagName<"u"?Je.getElementsByTagName(Ne):h.qsa?Je.querySelectorAll(Ne):void 0}:function(Ne,Je){var we,Ae=[],Ue=0,He=Je.getElementsByTagName(Ne);if("*"===Ne){for(;we=He[Ue++];)1===we.nodeType&&Ae.push(we);return Ae}return He},d.find.CLASS=h.getElementsByClassName&&function(Ne,Je){if(typeof Je.getElementsByClassName<"u")return Je.getElementsByClassName(Ne)},C=[],g=[],(h.qsa=ge.test(m.querySelectorAll))&&(le(function(Ne){I.appendChild(Ne).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ne.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+ce+"*(?:''|\"\")"),Ne.querySelectorAll("[selected]").length||g.push("\\["+ce+"*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),Ne.querySelectorAll("[id~="+T+"-]").length||g.push("~="),Ne.querySelectorAll(":checked").length||g.push(":checked"),Ne.querySelectorAll("a#"+T+"+*").length||g.push(".#.+[+~]")}),le(function(Ne){Ne.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Je=m.createElement("input");Je.setAttribute("type","hidden"),Ne.appendChild(Je).setAttribute("name","D"),Ne.querySelectorAll("[name=d]").length&&g.push("name"+ce+"*[*^$|!~]?="),2!==Ne.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),I.appendChild(Ne).disabled=!0,2!==Ne.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),Ne.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=ge.test(_=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&le(function(Ne){h.disconnectedMatch=_.call(Ne,"*"),_.call(Ne,"[s!='']:x")}),g=g.length&&new r(g.join("|")),C=C.length&&new r(C.join("|")),Fe=ge.test(I.compareDocumentPosition),v=Fe||ge.test(I.contains)?function(Ne,Je){var we=9===Ne.nodeType?Ne.documentElement:Ne,Ae=Je&&Je.parentNode;return Ne===Ae||!(!Ae||1!==Ae.nodeType||!(we.contains?we.contains(Ae):Ne.compareDocumentPosition&&16&Ne.compareDocumentPosition(Ae)))}:function(Ne,Je){if(Je)for(;Je=Je.parentNode;)if(Je===Ne)return!0;return!1},B=Fe?function(Ne,Je){if(Ne===Je)return c=!0,0;var we=!Ne.compareDocumentPosition-!Je.compareDocumentPosition;return we||(1&(we=(Ne.ownerDocument||Ne)===(Je.ownerDocument||Je)?Ne.compareDocumentPosition(Je):1)||!h.sortDetached&&Je.compareDocumentPosition(Ne)===we?Ne===m||Ne.ownerDocument===D&&v(D,Ne)?-1:Je===m||Je.ownerDocument===D&&v(D,Je)?1:o?Ie(o,Ne)-Ie(o,Je):0:4&we?-1:1)}:function(Ne,Je){if(Ne===Je)return c=!0,0;var we,Ae=0,Ue=Ne.parentNode,He=Je.parentNode,Ke=[Ne],rt=[Je];if(!Ue||!He)return Ne===m?-1:Je===m?1:Ue?-1:He?1:o?Ie(o,Ne)-Ie(o,Je):0;if(Ue===He)return Ce(Ne,Je);for(we=Ne;we=we.parentNode;)Ke.unshift(we);for(we=Je;we=we.parentNode;)rt.unshift(we);for(;Ke[Ae]===rt[Ae];)Ae++;return Ae?Ce(Ke[Ae],rt[Ae]):Ke[Ae]===D?-1:rt[Ae]===D?1:0}),m},Q.matches=function(ve,Fe){return Q(ve,null,null,Fe)},Q.matchesSelector=function(ve,Fe){if((ve.ownerDocument||ve)!==m&&l(ve),h.matchesSelector&&!F[Fe+" "]&&(!C||!C.test(Fe))&&(!g||!g.test(Fe)))try{var Ve=_.call(ve,Fe);if(Ve||h.disconnectedMatch||ve.document&&11!==ve.document.nodeType)return Ve}catch{F(Fe,!0)}return Q(Fe,m,null,[ve]).length>0},Q.contains=function(ve,Fe){return(ve.ownerDocument||ve)!==m&&l(ve),v(ve,Fe)},Q.escape=function(ve){return(ve+"").replace(k,U)},Q.error=function(ve){throw new Error("Syntax error: "+ve)},Q.uniqueSort=function(ve){var Fe,Ve=[],Ye=0,Ne=0;if(c=!h.detectDuplicates,o=!h.sortStable&&ve.slice(0),ve.sort(B),c){for(;Fe=ve[Ne++];)Fe===ve[Ne]&&(Ye=Ve.push(Ne));for(;Ye--;)ve.splice(Ve[Ye],1)}return o=null,ve},s=Q.getText=function(ve){var Fe,Ve="",Ye=0,Ne=ve.nodeType;if(Ne){if(1===Ne||9===Ne||11===Ne){if("string"==typeof ve.textContent)return ve.textContent;for(ve=ve.firstChild;ve;ve=ve.nextSibling)Ve+=s(ve)}else if(3===Ne||4===Ne)return ve.nodeValue}else for(;Fe=ve[Ye++];)Ve+=s(Fe);return Ve},d=Q.selectors={cacheLength:50,match:Ee,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ve){return ve[3]=ve[3]||ve[4]||ve[5]||"","~="===ve[2]&&(ve[3]=" "+ve[3]+" "),ve.slice(0,4)}},filter:{TAG:function(ve){var Fe=ve.toLowerCase();return"*"===ve?function(){return!0}:function(Ve){return Ve.nodeName&&Ve.nodeName.toLowerCase()===Fe}},CLASS:function(ve){var Fe=M[ve+" "];return Fe||(Fe=new r("(^|"+ce+")"+ve+"("+ce+"|$)"))&&M(ve,function(Ve){return Fe.test("string"==typeof Ve.className&&Ve.className||typeof Ve.getAttribute<"u"&&Ve.getAttribute("class")||"")})},ATTR:function(ve,Fe,Ve){return function(Ye){var Ne=Q.attr(Ye,ve);return null==Ne?"!="===Fe:!Fe||(Ne+="","="===Fe?Ne===Ve:"!="===Fe?Ne!==Ve:"^="===Fe?Ve&&0===Ne.indexOf(Ve):"*="===Fe?Ve&&Ne.indexOf(Ve)>-1:"$="===Fe?Ve&&Ne.slice(-Ve.length)===Ve:"~="===Fe?(" "+Ne.replace(ie," ")+" ").indexOf(Ve)>-1:"|="===Fe&&(Ne===Ve||Ne.slice(0,Ve.length+1)===Ve+"-"))}}}},Be.prototype=d.filters=d.pseudos,d.setFilters=new Be,i=Q.tokenize=function(ve,Fe){var Ve,Ye,Je,we,Ae,Ue,Ne=[],He=O[ve+" "];if(He)return Fe?0:He.slice(0);for(we=ve,Ae=[],Ue=d.preFilter;we;){for(Je in(!Ve||(Ye=J.exec(we)))&&(Ye&&(we=we.slice(Ye[0].length)||we),Ae.push(Ne=[])),Ve=!1,(Ye=te.exec(we))&&(Ve=Ye.shift(),Ne.push({value:Ve,type:Ye[0].replace(V," ")}),we=we.slice(Ve.length)),d.filter)(Ye=Ee[Je].exec(we))&&(!Ue[Je]||(Ye=Ue[Je](Ye)))&&(Ve=Ye.shift(),Ne.push({value:Ve,type:Je,matches:Ye}),we=we.slice(Ve.length));if(!Ve)break}return Fe?we.length:we?Q.error(ve):O(ve,Ae).slice(0)},u=Q.compile=function(ve,Fe){var Ve,Ye=[],Ne=[],Je=R[ve+" "];if(!Je){for(Fe||(Fe=i(ve)),Ve=Fe.length;Ve--;)(Je=Ze(Fe[Ve]))[T]?Ye.push(Je):Ne.push(Je);Je=R(ve,function ot(ve,Fe){var Ve=Fe.length>0,Ye=ve.length>0,Ne=function(Je,we,Ae,Ue,He){var Ke,rt,st,ht=0,ft="0",pt=Je&&[],Ct=[],St=a,At=Je||Ye&&d.find.TAG("*",He),En=P+=null==St?1:Math.random()||.1,mn=At.length;for(He&&(a=we===m||we||He);ft!==mn&&null!=(Ke=At[ft]);ft++){if(Ye&&Ke){for(rt=0,!we&&Ke.ownerDocument!==m&&(l(Ke),Ae=!1);st=ve[rt++];)if(st(Ke,we||m,Ae)){Ue.push(Ke);break}He&&(P=En)}Ve&&((Ke=!st&&Ke)&&ht--,Je&&pt.push(Ke))}if(ht+=ft,Ve&&ft!==ht){for(rt=0;st=Fe[rt++];)st(pt,Ct,we,Ae);if(Je){if(ht>0)for(;ft--;)pt[ft]||Ct[ft]||(Ct[ft]=A.call(Ue));Ct=Oe(Ct)}Y.apply(Ue,Ct),He&&!Je&&Ct.length>0&&ht+Fe.length>1&&Q.uniqueSort(Ue)}return He&&(P=En,a=St),pt};return Ve?se(Ne):Ne}(Ne,Ye)),Je.selector=ve}return Je},f=Q.select=function(ve,Fe,Ve,Ye){var Je="function"==typeof ve&&ve,we=!Ye&&i(ve=Je.selector||ve);return Ve=Ve||[],(Je||u(ve,we))(Ye,Fe,!1,Ve,!Fe||Fe),Ve},h.sortStable=T.split("").sort(B).join("")===T,h.detectDuplicates=!!c,l(),h.sortDetached=le(function(ve){return 1&ve.compareDocumentPosition(m.createElement("fieldset"))}),le(function(ve){return ve.innerHTML="<a href='#'></a>","#"===ve.firstChild.getAttribute("href")}),!h.attributes||le(function(ve){return ve.innerHTML="<input/>",ve.firstChild.setAttribute("value",""),""===ve.firstChild.getAttribute("value")}),le(function(ve){return null==ve.getAttribute("disabled")}),e.support=h,e.sizzle=Q}function ee(){var ve=[];return function Fe(Ve,Ye){return ve.push(Ve+" ")>d.cacheLength&&delete Fe[ve.shift()],Fe[Ve+" "]=Ye}}function ye(ve){for(var Fe=0,Ve=ve.length,Ye="";Fe<Ve;Fe++)Ye+=ve[Fe].value;return Ye}function Q(ve,Fe,Ve,Ye){var Ne,Je,we,Ae,Ue,He,Ke,rt=Fe&&Fe.ownerDocument,st=Fe?Fe.nodeType:9;if(Ve=Ve||[],"string"!=typeof ve||!ve||1!==st&&9!==st&&11!==st)return Ve;if(!Ye){if((Fe?Fe.ownerDocument||Fe:D)!==m&&l(Fe),Fe=Fe||m,11!==st)if(Ue=Re.exec(ve))if(Ne=Ue[1]){if(9===st){if(!(we=Fe.getElementById(Ne)))return Ve;if(we.id===Ne)return Ve.push(we),Ve}else if(rt&&(we=rt.getElementById(Ne))&&v(Fe,we)&&we.id===Ne)return Ve.push(we),Ve}else{if(Ue[2])return Y.apply(Ve,Fe.getElementsByTagName(ve)),Ve;if((Ne=Ue[3])&&h.getElementsByClassName&&Fe.getElementsByClassName)return Y.apply(Ve,Fe.getElementsByClassName(Ne)),Ve}else(Ue=G.exec(ve))&&((Ne=Ue[1])?(9===st?(we=Fe.getElementById(Ne))&&we.id===Ne&&(Fe=we):rt&&(we=rt.getElementById(Ne))&&v(Fe,we)&&we.id===Ne&&(Fe=we),Ne="#"+Ne+" "):(Ne=Ue[2])?(Y.apply(Ve,Fe.getElementsByTagName(ve)),Fe=Ve[0],Ne+=" "):(Ne=Ue[3])&&h.getElementsByClassName&&Fe.getElementsByClassName&&(Y.apply(Ve,Fe.getElementsByClassName(Ne)),Fe=Ve[0],Ne+=" "),ve=ve.replace(Ne,""));if(h.qsa&&!F[ve+" "]&&(!g||!g.test(ve))){if(1!==st)rt=Fe,Ke=ve;else if("object"!==Fe.nodeName.toLowerCase()){for((Ae=Fe.getAttribute("id"))?Ae=Ae.replace(k,U):Fe.setAttribute("id",Ae=T),Je=(He=i(ve)).length;Je--;)He[Je]="#"+Ae+" "+ye(He[Je]);Ke=He.join(","),rt=Fe}if(Ke)try{return Y.apply(Ve,rt.querySelectorAll(Ke)),Ve}catch{F(ve,!0)}finally{Ae===T&&Fe.removeAttribute("id")}}}return f(ve.replace(V,"$1"),Fe,Ve,Ye)}function se(ve){return ve[T]=!0,ve}function le(ve){var Fe=m.createElement("fieldset");try{return!!ve(Fe)}catch{return!1}finally{Fe.parentNode&&Fe.parentNode.removeChild(Fe),Fe=null}}function Ce(ve,Fe){var Ve=Fe&&ve,Ye=Ve&&1===ve.nodeType&&1===Fe.nodeType&&ve.sourceIndex-Fe.sourceIndex;if(Ye)return Ye;if(Ve)for(;Ve=Ve.nextSibling;)if(Ve===Fe)return-1;return ve?1:-1}function Be(){}function xe(ve,Fe,Ve){var Ye=Fe.dir,Ne=Fe.next,Je=Ne||Ye,we=Ve&&"parentNode"===Je,Ae=E++;return Fe.first?function(Ue,He,Ke){for(;Ue=Ue[Ye];)if(1===Ue.nodeType||we)return ve(Ue,He,Ke);return!1}:function(Ue,He,Ke){var rt,st,ht,ft=[P,Ae];if(Ke){for(;Ue=Ue[Ye];)if((1===Ue.nodeType||we)&&ve(Ue,He,Ke))return!0}else for(;Ue=Ue[Ye];)if(1===Ue.nodeType||we)if(st=(ht=Ue[T]||(Ue[T]={}))[Ue.uniqueID]||(ht[Ue.uniqueID]={}),Ne&&Ne===Ue.nodeName.toLowerCase())Ue=Ue[Ye]||Ue;else{if((rt=st[Je])&&rt[0]===P&&rt[1]===Ae)return ft[2]=rt[2];if(st[Je]=ft,ft[2]=ve(Ue,He,Ke))return!0}return!1}}function me(ve){return ve.length>1?function(Fe,Ve,Ye){for(var Ne=ve.length;Ne--;)if(!ve[Ne](Fe,Ve,Ye))return!1;return!0}:ve[0]}function Oe(ve,Fe,Ve,Ye,Ne){for(var Je,we=[],Ae=0,Ue=ve.length,He=null!=Fe;Ae<Ue;Ae++)(Je=ve[Ae])&&(!Ve||Ve(Je,Ye,Ne))&&(we.push(Je),He&&Fe.push(Ae));return we}function ze(ve,Fe,Ve,Ye,Ne,Je){return Ye&&!Ye[T]&&(Ye=ze(Ye)),Ne&&!Ne[T]&&(Ne=ze(Ne,Je)),se(function(we,Ae,Ue,He){var Ke,rt,st,ht=[],ft=[],pt=Ae.length,Ct=we||function Me(ve,Fe,Ve){for(var Ye=0,Ne=Fe.length;Ye<Ne;Ye++)Q(ve,Fe[Ye],Ve);return Ve}(Fe||"*",Ue.nodeType?[Ue]:Ue,[]),St=!ve||!we&&Fe?Ct:Oe(Ct,ht,ve,Ue,He),At=Ve?Ne||(we?ve:pt||Ye)?[]:Ae:St;if(Ve&&Ve(St,At,Ue,He),Ye)for(Ke=Oe(At,ft),Ye(Ke,[],Ue,He),rt=Ke.length;rt--;)(st=Ke[rt])&&(At[ft[rt]]=!(St[ft[rt]]=st));if(we){if(Ne||ve){if(Ne){for(Ke=[],rt=At.length;rt--;)(st=At[rt])&&Ke.push(St[rt]=st);Ne(null,At=[],Ke,He)}for(rt=At.length;rt--;)(st=At[rt])&&(Ke=Ne?Ie(we,st):ht[rt])>-1&&(we[Ke]=!(Ae[Ke]=st))}}else At=Oe(At===Ae?At.splice(pt,At.length):At),Ne?Ne(null,Ae,At,He):Y.apply(Ae,At)})}function Ze(ve){for(var Fe,Ve,Ye,Ne=ve.length,Je=d.relative[ve[0].type],we=Je||d.relative[" "],Ae=Je?1:0,Ue=xe(function(rt){return rt===Fe},we,!0),He=xe(function(rt){return Ie(Fe,rt)>-1},we,!0),Ke=[function(rt,st,ht){var ft=!Je&&(ht||st!==a)||((Fe=st).nodeType?Ue(rt,st,ht):He(rt,st,ht));return Fe=null,ft}];Ae<Ne;Ae++)if(Ve=d.relative[ve[Ae].type])Ke=[xe(me(Ke),Ve)];else{if((Ve=d.filter[ve[Ae].type].apply(null,ve[Ae].matches))[T]){for(Ye=++Ae;Ye<Ne&&!d.relative[ve[Ye].type];Ye++);return ze(Ae>1&&me(Ke),Ae>1&&ye(ve.slice(0,Ae-1).concat({value:" "===ve[Ae-2].type?"*":""})).replace(V,"$1"),Ve,Ae<Ye&&Ze(ve.slice(Ae,Ye)),Ye<Ne&&Ze(ve=ve.slice(Ye)),Ye<Ne&&ye(ve))}Ke.push(Ve)}return me(Ke)}}(w.Lib),function(e){var r=e.doc,h=e.each,d=r.documentElement,s=20200521;if(!(e._ui_nodelistExt_ver&&e.isNumber(e._ui_nodelistExt_ver)&&e._ui_nodelistExt_ver>=s)){e._ui_nodelistExt_ver=s;var f,a,o,c,l,m,i=e.support,u=e.sizzle,I=r.createElement("div"),p=r.createElement("div");if(p.style){p.style.cssText="float:left;opacity:.5",i.opacity="0.5"===p.style.opacity,i.cssFloat=!!p.style.cssFloat,p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",i.clearCloneStyle="content-box"===p.style.backgroundClip,(I=document.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",p.innerHTML="",I.appendChild(p),i.boxSizing=""===p.style.boxSizing||""===p.style.MozBoxSizing||""===p.style.WebkitBoxSizing,e.mix(i,{reliableHiddenOffsets:function(){return null==f&&g(),c},boxSizingReliable:function(){return null==f&&g(),o},pixelMarginRight:function(){return null==f&&g(),a},pixelPosition:function(){return null==f&&g(),f},reliableMarginRight:function(){return null==f&&g(),l},reliableMarginLeft:function(){return null==f&&g(),m}});var C,_,v=/^margin/,T=/^(top|right|bottom|left)$/,D=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,P=new RegExp("^("+D+")(?!px)[a-z%]+$","i"),E=new RegExp("^("+D+")(.*)$","i");window.getComputedStyle?(C=function(Z){var Q,se;return(!(se=(Q=e.isFunction(Z.getEL)?Z.getEL():Z).ownerDocument.defaultView)||!se.opener)&&(se=window),se.getComputedStyle(Q)},_=function(Z,Q,se){var le,pe,Ce,Te,Be=Z.style;return(""===(Te=(se=se||C(Z))?se.getPropertyValue(Q)||se[Q]:void 0)||void 0===Te)&&!u.contains(Z.ownerDocument,Z)&&(Te=e.style(Z,Q)),se&&!i.pixelMarginRight()&&P.test(Te)&&v.test(Q)&&(le=Be.width,pe=Be.minWidth,Ce=Be.maxWidth,Be.minWidth=Be.maxWidth=Be.width=Te,Te=se.width,Be.width=le,Be.minWidth=pe,Be.maxWidth=Ce),void 0===Te?Te:Te+""}):d.currentStyle&&(C=function(Z){return Z.currentStyle},_=function(Z,Q,se){var le,pe,Ce,Te,Be=Z.style;return null==(Te=(se=se||C(Z))?se[Q]:void 0)&&Be&&Be[Q]&&(Te=Be[Q]),P.test(Te)&&!T.test(Q)&&(le=Be.left,(Ce=(pe=Z.runtimeStyle)&&pe.left)&&(pe.left=Z.currentStyle.left),Be.left="fontSize"===Q?"1em":Te,Te=Be.pixelLeft+"px",Be.left=le,Ce&&(pe.left=Ce)),void 0===Te?Te:Te+""||"auto"});var q,M=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,O=/<([\w:-]+)/,R=/^\s+/,F=/<|&#?\w+;/,B=/<tbody/i,b=/^-ms-/,A=/-([\da-z])/gi,N=/^(none|table(?!-c[ea]).+)/,Y=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ne={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"},_e=["Top","Right","Bottom","Left"],ce={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:i.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},he=["Webkit","O","Moz","ms"],V=document.createElement("div");if(V.style){q=V.style,i.cssFloat=!!V.style.cssFloat;var J=function(Z,Q){return Q.toUpperCase()},te={type:e.type,cssHooks:{},htmlPrefilter:function(Z){return Z.replace(M,"<$1></$2>")},nodeName:function(Z,Q){return Z.nodeName&&Z.nodeName.toLowerCase()===Q.toLowerCase()},merge:function(Z,Q){for(var se=+Q.length,le=0,pe=Z.length;le<se;)Z[pe++]=Q[le++];if(se!=se)for(;void 0!==Q[le];)Z[pe++]=Q[le++];return Z.length=pe,Z},camelCase:function(Z){return Z.replace(b,"ms-").replace(A,J)},cssProps:{float:i.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}};h(["height","width"],function(Z,Q){te.cssHooks[Z]={get:function(se,le,pe){if(le)return N.test(e.css(se,"display"))&&0===se.offsetWidth?function(Z,Q,se,le){var pe,Te={};return h(Q,function(Be,xe){Te[xe]=Z.style[xe],Z.style[xe]=Q[xe]}),pe=se.apply(Z,[]),h(Q,function(Be,xe){Z.style[xe]=Te[xe]}),pe}(se,ne,function(){return U(se,Z,pe)}):U(se,Z,pe)},set:function(se,le,pe){var Ce=pe&&C(se);return function ee(Z,Q,se){var le=E.exec(Q);return le?Math.max(0,le[1]-(se||0))+(le[2]||"px"):Q}(0,le,pe?k(se,Z,pe,i.boxSizing&&"border-box"===e.css(se,"boxSizing",!1,Ce),Ce):0)}}}),e.style=function(Z,Q,se,le){if(Z&&3!==Z.nodeType&&8!==Z.nodeType&&Z.style){var pe,Ce,Te,Be=te.camelCase(Q),xe=Z.style;if(Q=te.cssProps[Be]||(te.cssProps[Be]=oe(Be)||Be),Te=te.cssHooks[Q]||te.cssHooks[Be],void 0===se)return Te&&"get"in Te&&void 0!==(pe=Te.get(Z,!1,le))?pe:xe[Q]+"";if("string"==(Ce=typeof se)&&(pe=H(se))&&pe[1]&&(se=function ye(Z,Q,se,le){var pe,Ce=1,Te=20,Be=le?function(){return le.cur()}:function(){return e.css(Z,Q,"")},xe=Be(),me=se&&se[3]||(te.cssNumber[Q]?"":"px"),Me=(te.cssNumber[Q]||"px"!==me&&+xe)&&H(e.css(Z,Q));if(Me&&Me[3]!==me){me=me||Me[3],se=se||[],Me=+xe||1;do{e.style(Z,Q,(Me/=Ce=Ce||".5")+me)}while(Ce!==(Ce=Be()/xe)&&1!==Ce&&--Te)}return se&&(Me=+Me||+xe||0,pe=se[1]?Me+(se[1]+1)*se[2]:+se[2],le&&(le.unit=me,le.start=Me,le.end=pe)),pe}(Z,Q,pe),Ce="number"),null==se||se!=se)return;"number"===Ce&&(se+=pe&&pe[3]||(te.cssNumber[Be]?"":"px")),!i.clearCloneStyle&&""===se&&0===Q.indexOf("background")&&(xe[Q]="inherit"),(!Te||!("set"in Te)||void 0!==(se=Te.set(Z,se,le)))&&(xe[Q]=se)}},e.css=function(Z,Q,se,le){var pe,Ce,Te,Be=te.camelCase(Q);return Q=te.cssProps[Be]||(te.cssProps[Be]=oe(Be)||Be),(Te=te.cssHooks[Q]||te.cssHooks[Be])&&"get"in Te&&(Ce=Te.get(Z,!0,se)),void 0===Ce&&(Ce=_(Z,Q,le)),"normal"===Ce&&Q in Ie&&(Ce=Ie[Q]),""===se||se?(pe=parseFloat(Ce),!0===se||isFinite(pe)?pe||0:Ce):Ce},e.parseHTML=function(Z,Q){if(!Z||"string"!=typeof Z)return[];"boolean"==typeof Q&&(Q=!1),Q=Q||document;var se=Y.exec(Z);return se?[Q.createElement(se[1])]:(se=function Re(Z,Q){for(var se,le,Ce,Te,Be,xe,me=Z.length,Me=function ge(Z){var Q="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video".split("|"),se=Z.createDocumentFragment();if(se.createElement)for(;Q.length;)se.createElement(Q.pop());return se}(Q),Oe=[],ze=0;ze<me;ze++)if((le=Z[ze])||0===le)if("object"===e.type(le))te.merge(Oe,le.nodeType?[le]:le);else if(F.test(le)){for(Ce=Ce||Me.appendChild(Q.createElement("div")),Te=(O.exec(le)||["",""])[1].toLowerCase(),Ce.innerHTML=(xe=ce[Te]||ce._default)[1]+te.htmlPrefilter(le)+xe[2],se=xe[0];se--;)Ce=Ce.lastChild;if(!i.leadingWhitespace&&R.test(le)&&Oe.push(Q.createTextNode(R.exec(le)[0])),!i.tbody)for(se=(le="table"!==Te||B.test(le)?"<table>"!==xe[1]||B.test(le)?0:Ce:Ce.firstChild)&&le.childNodes.length;se--;)te.nodeName(Be=le.childNodes[se],"tbody")&&!Be.childNodes.length&&le.removeChild(Be);for(te.merge(Oe,Ce.childNodes),Ce.textContent="";Ce.firstChild;)Ce.removeChild(Ce.firstChild);Ce=Me.lastChild}else Oe.push(Q.createTextNode(le));for(Ce&&Me.removeChild(Ce),ze=0;le=Oe[ze++];)"SCRIPT"!==le.tagName&&(u.contains(le.ownerDocument,le),Me.appendChild(le));return Ce=null,Me}([Z],Q),te.merge([],se.childNodes))}}}}function g(){var Z,Q;d.appendChild(I),p.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",f=o=m=!1,a=l=!0,window.getComputedStyle&&(Q=window.getComputedStyle(p),f="1%"!==(Q||{}).top,m="2px"===(Q||{}).marginLeft,o="4px"===(Q||{width:"4px"}).width,p.style.marginRight="50%",a="4px"===(Q||{marginRight:"4px"}).marginRight,(Z=p.appendChild(document.createElement("div"))).style.cssText=p.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",Z.style.marginRight=Z.style.width="0",p.style.width="1px",l=!parseFloat((window.getComputedStyle(Z)||{}).marginRight),p.removeChild(Z)),p.style.display="none",(c=0===p.getClientRects().length)&&(p.style.display="",p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",p.childNodes[0].style.borderCollapse="separate",(Z=p.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(c=0===Z[0].offsetHeight)&&(Z[0].style.display="",Z[1].style.display="none",c=0===Z[0].offsetHeight)),d.removeChild(I)}function oe(Z){if(Z in q)return Z;for(var Q=Z.charAt(0).toUpperCase()+Z.slice(1),se=he.length;se--;)if((Z=he[se]+Q)in q)return Z}function k(Z,Q,se,le,pe){for(var Ce=se===(le?"border":"content")?4:"width"===Q?1:0,Te=0;Ce<4;Ce+=2)"margin"===se&&(Te+=e.css(Z,se+_e[Ce],!0,pe)),le?("content"===se&&(Te-=e.css(Z,"padding"+_e[Ce],!0,pe)),"margin"!==se&&(Te-=e.css(Z,"border"+_e[Ce]+"Width",!0,pe))):(Te+=e.css(Z,"padding"+_e[Ce],!0,pe),"padding"!==se&&(Te+=e.css(Z,"border"+_e[Ce]+"Width",!0,pe)));return Te}function U(Z,Q,se){var le=!0,pe="width"===Q?Z.offsetWidth:Z.offsetHeight,Ce=C(Z),Te=i.boxSizing&&"border-box"===e.css(Z,"boxSizing",!1,Ce);if(pe<=0||null==pe){if(((pe=_(Z,Q,Ce))<0||null==pe)&&(pe=Z.style[Q]),P.test(pe))return pe;le=Te&&(i.boxSizingReliable()||pe===Z.style[Q]),pe=parseFloat(pe)||0}return pe+k(Z,Q,se||(Te?"border":"content"),le,Ce)}function H(Z){return new RegExp("^(?:([+-])=|)("+D+")([a-z%]*)$","i").exec(Z)}}(w.Lib),function(e,t){var d,s,n=w.managerEnv,r=e.LS,h=w.navInfoSync.host,i=20220216,u=function(){if(w.dcp){var o=w.dcp.dcpJSVer;if(e.isNumber(o))return o>=i}return!1};if(n||(w.managerEnv={},n=w.managerEnv),n.resourcesPath=n.resourcesPath||"Resources",n.IfUpdateService=!!n.IfUpdateService,u())return u=t,void(i=t);var f=[];w.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],dcpJSVer:i,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],managerVersion:[17,2,1,"0228"],managerVersionMac:[17,2,1,"0228"],managerVersionLinux:[17,2,1,"0228"],serviceVersion:[1,7,2,"0228"],serviceVersionMac:[1,7,2,"0228"],serviceVersionLinux:[1,7,2,"0228"],detect:s={dcpStatus:0,bConnected:!1,connectedResult:"",curPortIndex:0,bConnectNumLimited:!0,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}},strSID:"",bEnhancedMode:!1,b64bit:!1,wsProtocol:"dwt_command",dwtPort:0,onReadys:[],getManagerVersion:function(){var o=w.Lib.getNavInfo();if(!o.bWin&&!o.bWin64){if(o.bMac)return d.managerVersionMac;if(o.bLinux)return d.managerVersionLinux}return d.managerVersion},getServiceVersion:function(){var o=w.Lib.getNavInfo();if(!o.bWin&&!o.bWin64){if(o.bMac)return d.serviceVersionMac;if(o.bLinux)return d.serviceVersionLinux}return d.serviceVersion},versionInfo:function(o,c){var l=0;s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,c,function(p){if(e.isArray(p)&&p.length>0&&p[0]){s.curPort=d.ports[l%d.ports.length];var g=p[0];if(e.isString(g)&&d._compareVersion(g.split(","),d.oldDWASMVer))return d._setDefaultValuesFromServer(p),s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.Connected,d._sendStatusEvent(!1,g),e.isFunction(o)&&setTimeout(function(){o(d.strSID,d.bEnhancedMode)},0),!0}return!1},function(p,g,C){return++l,s.curPortIndex=l%d.ports.length,s.bConnected=!1,!!(s.bConnectNumLimited&&l>=s.IMAXCONNECTCOUNT)&&(setTimeout(function(){o(p,g,C)},0),!0)})},_checkOldManagerVersion:function(o,c){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!0,t,o,c)},_checkManagerVersion:function(o,c,l){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingManagerVer,this._postBase("VersionInfo",!1,o,c,l)},_checkService:function(o,c){s.dcpStatus=s.EnumDCP_DetectStatus.CheckingServiceVer,this._postBase("DSVersion",!1,t,o,c)},_checkUpdateFile:function(o,c){this._postBase("CheckUpdateFile",!1,t,o,c)},_updateService:function(o,c){this._postBase("UpdateService",!1,t,o,c)},_postBase:function(o,c,l,m,I){var p,g;return p=c?d.oldDWASMVerStr:"dwasm2_"+d._getModuleVer(),g={id:(new Date).getTime().toString(),method:o,version:p,parameter:[]},l&&(g.productKey=l),this._postBaseV2(o,c,g,500,m,I),!0},_postBaseV2:function(o,c,l,m,I,p){var C,_,v=e.stringify(l);if(e.isFunction(I)&&e.isFunction(p)){if(d.detect.bConnected&&"VersionInfo"==o&&""!=d.detect.connectedResult)return void I(d.detect.connectedResult);C=function(B,b,A){0==--D&&p(B,b,A)},_=function(B,b,A){var N=d._getJSON(B);N&&"result"in N&&(D=-1,d.detect.bConnected||(d.detect.bConnected=!0,d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected,d.detect.curPort=d.ports[A.index],d.ports=[d.detect.curPort],d.detect.curPortIndex=0,r.isSupportLS()&&r.item("DCP_port",d.detect.curPort[1]),I(N.result)))||C(B,b,A)};var T,D=d.ports.length;if(D>1&&r.isSupportLS()){var P=r.item("DCP_port");if(e.isString(P)&&""!==P)for(T=1;T<D;T++){var M,O,E=d.ports[T];M=E[0],(O=E[1])==P&&(d.ports[T][0]=d.ports[0][0],d.ports[T][1]=d.ports[0][1],d.ports[0][0]=M,d.ports[0][1]=O);break}}for(d.detect.bConnected&&(D=1),f=[],d.detect.bConnected=!1,T=0;T<D;T++){var R=[d._getPreUrl(T),c?"dcp/":d._getModuleName(),c?d.oldDWASMVerStr:d._getModuleVer(),"/",o,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");f.push({method:"POST",url:R,timeout:m,data:v,onSuccess:_,onError:C})}for(T=0;T<D;T++)e.ajax(f[T]).index=T}},loadZip:function(o,c,l,m){var I,p=c,g=l;100===p&&(p=0,g=function(C){e.isString(C)&&(C=C.replace('"result" : [ 0,','"result" : [ 100,')),l(C)}),I=w.managerEnv.IfUpdateService?[d._getPreUrl(s.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",p,"&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join(""):[d._getPreUrl(s.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join(""),e.ajax({method:"POST",url:I,async:!0,data:o,onSuccess:g,onError:m})},oldLoadZip:function(o,c,l,m){var I=[d._getPreUrl(s.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:I,async:!0,data:o,onSuccess:l,onError:m})},_getPreUrl:function(o){var c,l;return w.navInfoSync.bSSL?(l="https://",c=d.ports[o][1]):(l="http://",c=d.ports[o][0]),[l,d.host,":",c,"/"].join("")},_getHttpPreUrl:function(o){return["http://",d.host,":",d.ports[o][0],"/"].join("")},_getDcpWsPreUrl:function(o){return d.getWsUrl(d.host,w.navInfoSync.bSSL?d.ports[o][1]:d.ports[o][0])},_getJSON:function(o){return!!o&&e.parse(o)},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(o,c){return!e.isLocalIP(d.host)||(e.isArray(o)&&4==o.length&&e.isArray(c)&&c.length>=4?o[0]>c[0]||o[0]==c[0]&&o[1]>c[1]||o[0]==c[0]&&o[1]==c[1]&&o[2]>c[2]||o[0]==c[0]&&o[1]==c[1]&&o[2]==c[2]&&parseInt(o[3])>=parseInt(c[3]):!!(e.isArray(o)&&1==o.length&&e.isArray(c)&&c.length>=1)&&parseInt(o[0])>=parseInt(c[0]))},_getDSUpdateZipUrl:function(){var c,l,o=w.Lib.getNavInfo(),m="";return c="Win",o.bMac?c="Mac":o.bLinux&&(c="Linux"),l=w.navInfoSync.bFileSystem?"":"?t="+e.now(),o.bWin&&d.b64bit&&(m="_x64"),[w.managerEnv.resourcesPath,"/dist/serviceupdate/",c,"DSUpdate_",d.getManagerVersion().join("."),m,".zip",l].join("")},getPorts:function(o,c,l){var m="GetPorts",I="dwasm2_"+d._getModuleVer();this._postBaseV2(m,!1,{id:"1",method:m,version:I,parameter:[o]},700,c,l)},_setDefaultValuesFromServer:function(o){var c="",l=!1,m=!1,I={};if(o.length>4&&(c=e.isString(o[2])?o[2]:"",l=e.isString(o[3])&&"true"===o[3],m=e.isString(o[4])&&"64"===o[4]),o.length>5&&(I=o[5]),d.detect.connectedResult=o,d.strSID=c,d.bEnhancedMode=l,d.b64bit=m,d.objEnhancedPorts=I,l&&I&&I.dcp){var p=I.dcp;s.curPort=[p.port,p.sslPort]}else s.curPort=d.ports[s.curPortIndex];if(l&&I&&I.dwt){var g=I.dwt;s.dwtPort=g?w.navInfoSync.bSSL?g.sslPort:g.port:0}},checkDcpForUpdate:function(o,c,l,m,I,p,g,C){var _=!1,v=!0,T=3,D=0,P=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0].split(","),ne=!1;if(N.length>4&&(ne=e.isString(N[4])&&"64"===N[4]),d.b64bit=ne,w.managerEnv.IfUpdateService)if(d._compareVersion(Y,d.oldDWASMVer)){var Ie=d._getDSUpdateZipUrl();_=!0;var ce=function(he,ie,V){d._funUpdateFailed(I,p,he,V.status),setTimeout(g,0)};l&&l(),m&&m(),s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,d._sendStatusEvent(),e.fetch(Ie,{mode:"cors",dataType:"arraybuffer"}).then(function(he){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadedZip,d._sendStatusEvent(),d.oldLoadZip(he,0,function(){setTimeout(function(){d._checkManagerVersion(C,M,O)},5e3)},ce),he=null},function(he){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,I&&I();var ie="The update package can't be downloaded. The error code is "+he.httpCode+".";p&&p(!0,ie),d._sendStatusEvent(!0,ie),setTimeout(g,0)})}else v&&(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,l&&l(),o&&o(),d._sendStatusEvent(),v=!1);else s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0);return!0},E=function(N,Y){return++D,s.curPortIndex=D%d.ports.length,s.bConnected=!1,s.bConnectNumLimited&&D>=s.IMAXCONNECTCOUNT?(s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,d._sendStatusEvent()):setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3),!0},M=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0].split(",");return!!d._compareVersion(Y,d.getManagerVersion())&&(d.detect.connectedResult=N,w.managerEnv.IfUpdateService?setTimeout(_?function(){d._checkUpdateZip(m,I,p,g)}:function(){d._checkService(R,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0)),!0)},O=function(N,Y,ne){var Ie=1e3;return T<3&&(Ie=500),--T<0?(d._funShowUpgradeDialogWhenUpdateFailed(I,p),setTimeout(g,0)):setTimeout(function(){d._checkManagerVersion(C,M,O)},Ie),!0},R=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return l&&l(),!1;var Y=N[0].split(",");return d._compareVersion(Y,d.getServiceVersion())?(s.bConnected=!0,I&&I(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,d._sendStatusEvent(!1,N[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,d._sendStatusEvent(),setTimeout(g,0)):setTimeout(function(){d._checkUpdateZip(m,I,p,g)},0),!0},F=function(N,Y,ne){return d._funUpdateFailed(I,p,N,ne.status),setTimeout(g,0),!0},b=function(N){if(!(e.isArray(N)&&N.length>0&&N[0]))return!1;var Y=N[0];return e.isString(Y)&&d._compareVersion(Y.split(","),d.oldDWASMVer)?(d._setDefaultValuesFromServer(N),s.curPort=d.ports[D%d.ports.length],w.managerEnv.IfUpdateService?setTimeout(function(){d._checkService(R,F)},0):(s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(g,0))):(D=0,s.curPortIndex=0,v&&(l&&l(),o&&o(),v=!1),setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3)),!0},A=function(N,Y){return++D,s.curPortIndex=D%d.ports.length,s.bConnected=!1,v&&(l&&l(),o&&o(N,Y),v=!1),s.bConnectNumLimited&&D>=s.IMAXCONNECTCOUNT?(D=0,s.curPortIndex=0,setTimeout(function(){d._checkOldManagerVersion(P,E)},1e3)):setTimeout(function(){d._checkManagerVersion(C,b,A)},1e3),!0};c&&c(),d._checkManagerVersion(C,b,A)},_checkUpdateZip:function(o,c,l,m,I){var p=function(M,O,R){var F=-1;if(R&&(F=R.status),0==F)return setTimeout(function(){d._checkService(P,E)},5e3),!0;var B=d._getDSUpdateZipUrl();return s.dcpStatus=s.EnumDCP_DetectStatus.DownloadingZip,d._sendStatusEvent(),e.fetch(B,{mode:"cors",dataType:"arraybuffer"}).then(_,g),!0},g=function(M){s.dcpStatus=s.EnumDCP_DetectStatus.DownloadFailed,c&&c();var O="The update package can't be downloaded. The error code is "+M.httpCode+".";return l&&l(!0,O),d._sendStatusEvent(!0,O),setTimeout(m,0),!0},_=function(M){w.dcp.loadZip(M,1,function(R){var F,B;try{e.isString(R)&&"result"in(B=e.parse(R.replace(/\0/g,"")))&&(F=B.result)}catch{}e.isArray(F)&&F.length>2&&1==F[2]?setTimeout(function(){d._checkService(P,E)},5e3):(d._funUpdateFailed(c,l,R,200),setTimeout(m,0))},v),M=null},v=function(M,O,R){var F=-1;return R&&(F=R.status),0==F?setTimeout(function(){d._checkService(P,E)},5e3):(d._funUpdateFailed(c,l,M,R.status),setTimeout(m,0)),!0},D=3,P=function(M){if(!(e.isArray(M)&&M.length>0&&M[0]))return!1;var O=M[0].split(",");return!!d._compareVersion(O,d.getServiceVersion())&&(s.bConnected=!0,c&&c(),s.dcpStatus=s.EnumDCP_DetectStatus.CheckedService,d._sendStatusEvent(!1,M[0]),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSucceed,d._sendStatusEvent(),setTimeout(m,0),!0)},E=function(M,O){var R=1e3;return D<3&&(R=500),--D<0?(d._funShowUpgradeDialogWhenUpdateFailed(c,l),setTimeout(m,0),!0):(setTimeout(function(){d._checkService(P,E)},R),!0)};o&&o(),s.dcpStatus=s.EnumDCP_DetectStatus.VerifyingZip,d._sendStatusEvent(),d._checkUpdateFile(function(M){if(!(e.isArray(M)&&M.length>1))return!1;if(1==M[1])s.dcpStatus=s.EnumDCP_DetectStatus.VerifiedZip,d._sendStatusEvent(),s.dcpStatus=s.EnumDCP_DetectStatus.UpdatingService,d._sendStatusEvent(),setTimeout(function(){d._checkService(P,E)},5e3);else{var O=0;if("exception"in M&&(O=M.exception),-2373==O)return d._funUpdateFailed(c,l,M,200),setTimeout(m,0),!0;setTimeout(p,0)}return!0},p)},_getStatusString:function(o,c){var l,m,I="";return o==s.EnumDCP_DetectStatus.Init?"Getting manager version":o==s.EnumDCP_DetectStatus.Connected?(c&&(I=c),"Getting manager version succeeded and the version is "+I):o==s.EnumDCP_DetectStatus.DownloadingZip?"Downloading the update package":o==s.EnumDCP_DetectStatus.DownloadedZip?"Update package downloaded":o==s.EnumDCP_DetectStatus.DownloadFailed?(m=".",c&&c.length>0?("."==c.slice(c.length-1)&&(m=""),l=" with the error: "+c):l="","Update package failed to download"+l+m):o==s.EnumDCP_DetectStatus.CheckingManagerVer?"Getting manager version":o==s.EnumDCP_DetectStatus.CheckingServiceVer?"Getting service version":o==s.EnumDCP_DetectStatus.NotInstalled?"Dynamsoft Service Not Installed":o==s.EnumDCP_DetectStatus.UpdateSkipped?"Update skipped":o==s.EnumDCP_DetectStatus.CheckedService?(c&&(I=c),"Getting service version succeeded and the version is "+I):o==s.EnumDCP_DetectStatus.VerifyingZip?"Verifying the update package":o==s.EnumDCP_DetectStatus.VerifiedZip?"Update package verified":o==s.EnumDCP_DetectStatus.UpdatingService?"Updating the service":o==s.EnumDCP_DetectStatus.UpdateSucceed?"Update succeeded":o==s.EnumDCP_DetectStatus.UpdateFailed?(m=".",c&&c.length>0?("."==c.slice(c.length-1)&&(m=""),l=" with the error: "+c):l="","The update failed"+l+m):""},_sendStatusEvent:function(o,c){var l=!!o;e.isFunction(h.OnGetServiceUpdateStatus)&&h.OnGetServiceUpdateStatus(l,s.dcpStatus,d._getStatusString(s.dcpStatus,c))},_getErr:function(o){var c,l="";try{e.isString(o)?(c=o.replace(/\0/g,""),c=e.parse(c)):o&&(c=o),"description"in c&&(l=c.description)}catch{}return l},_funShowUpgradeDialogWhenUpdateFailed:function(o,c){return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,o&&o(),c&&c(),d._sendStatusEvent(!0),!0},_funUpdateFailed:function(o,c,l,m){var I,p;return s.bConnected=!0,s.dcpStatus=s.EnumDCP_DetectStatus.UpdateFailed,o&&o(),200==m?(I="The update failed.",p=d._getStatusString(s.dcpStatus,d._getErr(l))):p=I="The update failed. The error code is "+m,c&&c(!0,I),d._sendStatusEvent(!0,p),!0},getDSPath:function(o,c){var l=w.managerEnv.resourcesPath,m=c;if(w.Lib.isString(l)&&l.length>0?"/"!=l[l.length-1]&&(l+="/"):l="Resources/",!m){var I=w.Lib.getNavInfo();m=I.bMac?".pkg":I.bArm64?"-arm64.deb":I.bMips64?"-mips64el.deb":I.bLinux||I.bChromeOS||I.bHarmonyOS?".deb":".msi"}return[l,"dist/DynamsoftServiceSetup",m].join("")},getLinuxHTML5DebPath:function(){return w.dcp.getDSPath(!1,".deb")},getLinuxHTML5RpmPath:function(){return w.dcp.getDSPath(!1,".rpm")},newWebsocket:function(o){var c,l=d.wsProtocol,m=window.MozWebSocket;if(typeof m<"u")c=l?new m(o,l):new m(o);else{var I=window.WebSocket;if(w.navInfo.bEdge){var p=window,g=parent;try{for(;p!=g&&g.WebSocket;)I=g.WebSocket,p=g.window,g=g.parent}catch{I=window.WebSocket}}c=l?new I(o,l):new I(o)}return c},_checkManagerVersionWS:function(o,c,l){var m=d._getDcpWsPreUrl(0),I={id:(new Date).getTime().toString(),method:"VersionInfo",version:"dwasm2_"+d._getModuleVer(),parameter:[]};return o&&(I.productKey=o),d.postStringDataByWS(m,e.stringify(I),function(g){var C=e.parse(g);C&&"result"in C?c(C.result):l()},l)},getWsUrl:function(o,c){return[w.navInfoSync.bSSL?"wss://":"ws://",o,":",c,"/"].join("")},postStringDataByWS:function(o,c,l,m){var I=d.newWebsocket(o);I.onopen=function(){1==I.readyState?(I.onopen=null,I.send(c)):0==I.readyState&&setTimeout(I.onopen,100)},I.onmessage=function(p){var g=p.data;if("object"==typeof g)return g=null,p=null,m(),void I.close();var C=g.replace(/\0/g,"");try{l(C),I.close()}catch{e.log(g),m(),I.close()}g=null,p=null},I.onerror=function(p){p&&e.log("websocket error: "+p),m(),I.close()},I.onclose=function(p){I.onclose=null,I.onerror=null,I.onmessage=null}},getBinaryFileInfo:function(o,c){var l="GetBinaryFileInfo",m={id:(new Date).getTime().toString(),method:l,version:"dwasm2_"+d._getModuleVer(),parameter:[]},I=e.stringify(m),p=function(_,v,T){var D=d._getJSON(_);D?o(D):c(_,v,T)};if(w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition){var g=d._getDcpWsPreUrl(0);return d.postStringDataByWS(g,I,p,c)}var C=[d._getPreUrl(0),d._getModuleName(),d._getModuleVer(),"/",l,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",e.now()].join("");e.ajax({method:"POST",url:C,timeout:500,data:I,onSuccess:p,onError:c})},checkDcpV3:function(o,c,l){var m=!0,I=0,p=function(C){return!!(e.isArray(C)&&C.length>0&&C[0])&&(d._setDefaultValuesFromServer(C),s.dcpStatus=s.EnumDCP_DetectStatus.UpdateSkipped,d._sendStatusEvent(),setTimeout(l,0),!0)},g=function(C,_){return++I,s.bConnectNumLimited&&I>=s.IMAXCONNECTCOUNT?(s.bConnected=!1,s.dcpStatus=s.EnumDCP_DetectStatus.NotInstalled,d._sendStatusEvent()):setTimeout(function(){w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition?d._checkManagerVersionWS(o,p,g):d._checkManagerVersion(o,p,g)},1e3),m&&(c&&c(C,_),m=!1),!0};s.curPortIndex=0,s.bConnected=!1,w.DWT.ConnectWithSocket&&w.navInfoSync.bHTML5Edition?d._checkManagerVersionWS(o,p,g):d._checkManagerVersion(o,p,g)}},u=t,i=t,n=t,e.domReady(function(){d.onReadys.length>0&&e.each(d.onReadys,function(o){e.isFunction(o)&&o()})}),w.Ready=function(o){return e.asyncGetNavInfo().then(function(){try{o(e)}catch(c){throw e.log(c.stack||c,"error"),c}})}}(w.Lib),(w=Rt.Dynamsoft||{}).DWT=w.DWT||{},w.aryAddonReadyFun=w.aryAddonReadyFun||[],w.AddonReady=w.AddonReady||function(e){w.aryAddonReadyFun.push(e)},w.AddonReady(function(e,t){w.DWT.EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var n=w,s=w.dcp,f=[1,7,2,"1026"],a="upload_"+f.join(""),o={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:!1,VERIFYHOST:!1,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(D,P){},OnRunSuccess:function(D){},OnRunFailure:function(D,P,E){}},c=0,l="",m_ServerUrlError=function(){c=-2,l="Upload failed because the url to upload to is invalid."},m_HttpUploadError=function(D,P,E){c=-3,D?l="Upload cancelled.":(l=P&&""!=P?"Upload failed with error: "+P:"Upload failed.",P&&""!=P&&(l=l+"("+E+")"))},m_HttpFilenameError=function(){c=-7,l="The file name is incorrect in the upload job."},m_MobileNotSupport=function(){c=-2400,l="File uploader addon doesn't work under current settings."},m__resetErr=function(){c=0,l=""},I=function(){var D=!1,P=w.navInfoSync.bMobile;if(w.DWT&&(D=!1===w.DWT.UseLocalService),w.navInfo){var E=w.navInfo;P=P||E.bPad||E.biPhone||E.biPad}return D||P};function p(){}function g(D){this.job=D}function C(D){this.job=D}p.prototype={runWaiting:0,CreateJob:function(){var D={HttpHeader:{},documents:[],formFields:[],bEvent:!1};return e.mix(D,o),D.SourceValue=new g(D),D.FormField=new C(D),D},Run:function(D){var E,P=this,M='""',O=D.ServerUrl,R="";if((!D.ar||!D.cu)&&n.DWT&&(n.DWT.ProductKey&&(M='"'+n.DWT.ProductKey+'"'),n.DWT.handshakeCode||n.DWT.organizationID))return w.DWT.lglic().then(function(_e){D.ar=_e.ar,D.cu=_e.cu,P.Run(D)}),!0;if(!e.isString(O)||""==O)return D.id=-1,m_ServerUrlError(),!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1),!1;if(!D.documents||!e.isArray(D.documents)||D.documents.length<=0)return D.id=-1,c=-4,l="Upload failed because the file to upload has invalid content.",!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1),!1;for(D.Url=O,delete D.ServerUrl,E=0;E<D.documents;E++){var F=D.documents[E];if(!e.isString(F.files)||""==F.files)return D.id=-1,m_HttpFilenameError(),!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1),!1;(!e.isString(F.remoteName)||""==F.remoteName)&&(F.remoteName="RemoteFile")}var B=D.SourceValue;delete D.SourceValue;var b=D.FormField;delete D.FormField;var N,Y,A=e.stringify(D);return A=e.replaceAll(A,'"',"'"),D.ServerUrl=O,delete D.Url,D.SourceValue=B,D.FormField=b,Y=['{"id":"',1,'","method":"RunUploadFile","version":"',a,'","parameter":[',M,',"',A,'"'],D.ar&&D.cu?(R=[',"',D.ar,'","',D.cu,'",0]}'].join(""),delete D.ar,delete D.cu,Y.push(R)):Y.push("]}"),N=Y.join(""),P.runWaiting++,w.FileUploader._sendCmd("RunUploadFile",N,function(_e){if(P.runWaiting--,_e){var ce=_e.UploadId;if(ce&&ce>0)D.id=ce,n.FileUploader.map[D.id]=D,n.FileUploader.ids.push(_e.UploadId),D.OnUploadTransferPercentage&&D.OnUploadTransferPercentage(D,0);else{var q=_e.errorcode,he=_e.errorstring;q&&he?(c=q,l=he):(c=-6,l="Cannot create an upload job."),!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1)}}},function(_e,ce,q){P.runWaiting--,n.FileUploader.parseHttpErrors(_e,ce,q),!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1)}),!0},Cancel:function(D){return!D.id||D.id<0?(c=-5,l="Invalid upload job id.",!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1),!1):(w.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+D.id+'"]}',function(O){n.FileUploader.deleteJobById(D.id)},function(O,R,F){n.FileUploader.parseHttpErrors(O,R,F),!D.bEvent&&e.isFunction(D.OnRunFailure)&&(D.bEvent=!0,D.OnRunFailure(D,c,l),D.bEvent=!1)}),!0)},CancelAllUpload:function(){var D=this,P=n.FileUploader.ids,E='{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+P.join(",")+'"]}';return D.runWaiting>0?(c=-8,l="Can not cancel all jobs when at least one job is still being created.",!1):(D.runWaiting<0&&(D.runWaiting=0),P.length<=0||w.FileUploader._sendCmd("DeleteUploadTask",E,function(R){for(var F=0;F<P.length;F++)n.FileUploader.deleteJobById(P[F]);n.FileUploader.ids=[],n.FileUploader.map=[]},function(R,F,B){n.FileUploader.parseHttpErrors(R,F,B)}),!0)},OnUploadTransferPercentage:function(D,P){},OnRunSuccess:function(D){},OnRunFailure:function(D,P,E){}},n.SourceValue=g,g.prototype.Add=function(D,P,E){var M=this.job,O=E,R=D;if(!e.isString(R)||""==R)return m_HttpFilenameError(),void(!M.bEvent&&e.isFunction(M.OnRunFailure)&&(M.bEvent=!0,M.OnRunFailure(M,c,l),M.bEvent=!1));O||(O="RemoteFile"),R=w.Lib.replaceAll(R,"\\\\","\\\\"),M.documents.push({files:[R],fileName:P,remoteName:O})},n.FormField=C,C.prototype.Add=function(D,P){var E,M,O=P,R=D;if(null==O&&(O=""),!e.isString(R)||""==R||!e.isString(O)||(O=encodeURI(O),(R=encodeURI(R)).indexOf("'")>-1||O.indexOf("'")>-1))return!1;for(E=0;E<this.job.formFields.length;E++)if((M=this.job.formFields[E]).name==R)return M.value=O,!0;return this.job.formFields.push({name:R,value:O}),!0},n.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",wsUrl:"",running:!1,ws:null,nextLoopTime:600,deleteJobById:function(D){if(m__resetErr(),I())return m_MobileNotSupport(),!1;var P;if(D){for(P=0;P<n.FileUploader.ids.length;P++)if(D==n.FileUploader.ids[P]){n.FileUploader.ids.splice(P,1);break}var E=n.FileUploader.map[D];for(E.SourceValue.job=null,delete E.SourceValue,E.FormField.job=null,delete E.FormField,delete n.FileUploader.map[D],P=E.documents.length-1;P>=0;P--)E.documents.splice(P,1);for(P=E.formFields.length-1;P>=0;P--)E.formFields.splice(P,1);w.FileUploader._sendCmd("DeleteUploadTask",'{"id":"1","method":"DeleteUploadTask","version":"'+a+'","parameter":["'+D+'"]}')}},_sendCmdByWS:function(D,P,E){var M;return n.FileUploader.ws?M=n.FileUploader.ws:(M=s.newWebsocket(n.FileUploader.wsUrl),n.FileUploader.ws=M),M.onopen=function(){1==M.readyState?(M.onopen=null,M.send(D)):0==M.readyState&&setTimeout(M.onopen,100)},M.onmessage=function(O){var R=O.data;if("object"==typeof R)return R=null,O=null,void E();var F=R.replace(/\0/g,"");try{(F=e.parse(F))&&"result"in F?P(F.result):E()}catch{e.log(R),E()}R=null,O=null},M.onerror=function(O){O&&e.log("websocket error: "+O),E()},M.onclose=function(O){M.onclose=null,M.onerror=null,M.onmessage=null,n.FileUploader.ws=null},!0},_sendCmd:function(D,P,E,M){if(w.DWT.ConnectWithSocket)return _sendCmdByWS(P,E,M);var O=[n.FileUploader.protocol,n.FileUploader.ip,":",n.FileUploader.port,"/dcp/",a,"/",D,"?type=1&dsver=",f.join(""),"&ts=",e.now()].join("");return e.ajax({url:O,method:"post",dataType:"json",processData:!1,data:P,onSuccess:E,onError:M})},parseHttpErrors:function(D,P,E){var M,O;D&&e.isArray(D)&&D.length>2?(M=D[1],O=D[2]):(M=P,O=E),2==O.state&&0==O.status?"abort"===O.statusText?m_HttpUploadError(!0):m_ServerUrlError():m_HttpUploadError(false,M,O.status)},loadHttpBlob:function(D,P,E,M,O,R,F){var b={method:D,url:P,dataType:"blob",async:E,onSuccess:M,onError:function(A,N,Y){n.FileUploader.parseHttpErrors(A,N,Y),e.isFunction(O)&&O()}};e.isFunction(R)&&(b.beforeSend=function(A){A.addEventListener("progress",function(N){delete N.totalSize,delete N.position,R(N)},false)}),e.ajax(b)},_OnPercentDone:function(){},Download:function(D,P,E){if(!e.isString(D))return c=-1,l="The zip file that contains the upload library (.dll) is invalid.",e.isFunction(E)&&E(c,l),!1;var M=function(){return c=-9,l="The zip file that contains the upload library (.dll) download failed.",e.isFunction(E)&&E(c,l),!1};return n.FileUploader.loadHttpBlob("get",D,!0,function(R){s.loadZip(R,100,P,M)},M,!1)},Init:function(D,P,E){if(m__resetErr(),I())return m_MobileNotSupport(),e.isFunction(E)&&E(c,l),!1;var M=function(){var O,R,F;O=w.dcp.ports[0],w.navInfoSync.bSSL?(F="https://",R=O[1]):(F="http://",R=O[0]),n.FileUploader.port=R,n.FileUploader.protocol=F,n.FileUploader.ip=s.host,n.FileUploader.wsUrl=s._getDcpWsPreUrl(0),n.FileUploader.running=!0,P(new p),setTimeout(n.FileUploader.StatusLoop,500)};w.dcp.detect.bConnected?M():w.dcp.checkDcpV3(w.DWT.ProductKey,E,M)},Close:function(){w.DWT.ConnectWithSocket&&n.FileUploader.ws&&(n.FileUploader.ws.close(),n.FileUploader.ws=null),n.FileUploader.running=!1},VersionInfo:function(D,P){return m__resetErr(),I()?(m_MobileNotSupport(),e.isFunction(P)&&P(c,l),!1):(w.FileUploader._sendCmd("VersionInfo",'{"id":"1","method":"VersionInfo","version":"'+a+'","parameter":[]}',D,function(O,R,F){n.FileUploader.parseHttpErrors(O,R,F),e.isFunction(P)&&P(c,l)}),!0)},StatusLoop:function(){return m__resetErr(),I()?(m_MobileNotSupport(),!1):(n.FileUploader.GetUploadStatus(),n.FileUploader.running&&setTimeout(n.FileUploader.StatusLoop,n.FileUploader.nextLoopTime),!0)},GetUploadStatus:function(){if(m__resetErr(),n.FileUploader.ids.length<=0)return!0;if(I())return m_MobileNotSupport(),!1;var D='{"id":"1","method":"GetUploadStatus","version":"'+a+'","parameter":["'+n.FileUploader.ids.join(",")+'"]}';return w.FileUploader._sendCmd("GetUploadStatus",D,function(M){if(e.isArray(M))for(var R,O=0;O<M.length;O++){var F=(R=M[O]).id,B=n.FileUploader.map[F],b=R.percentage,A=R.errorcode,N=R.response,Y=R.errorstring;!B||(A==w.DWT.EnumTransferErrorCode.TRANS_FINISHED?(B.OnUploadTransferPercentage(B,100,T(N)),!B.bEvent&&e.isFunction(B.OnRunSuccess)&&(B.bEvent=!0,B.OnRunSuccess(B,T(N)),B.bEvent=!1),n.FileUploader.deleteJobById(F)):A==w.DWT.EnumTransferErrorCode.TRANS_OK||A==w.DWT.EnumTransferErrorCode.TRANS_NOT_SEND||A==w.DWT.EnumTransferErrorCode.TRANS_WAITFOR_SEND||A==w.DWT.EnumTransferErrorCode.TRANS_SENDING||A==w.DWT.EnumTransferErrorCode.TRANS_PAUSE||A==w.DWT.EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||A==w.DWT.EnumTransferErrorCode.TRANS_TASK_INIT?B.OnUploadTransferPercentage(B,b,T(N)):(!B.bEvent&&e.isFunction(B.OnRunFailure)&&(B.bEvent=!0,B.OnRunFailure(B,A,Y,T(N)),B.bEvent=!1),n.FileUploader.deleteJobById(F)))}},function(M,O,R){}),!0}};var v=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function T(D){var P,E,M,O,R,F,B;for(F=D.length,R=0,B="";R<F;){do{P=v[255&D.charCodeAt(R++)]}while(R<F&&-1==P);if(-1==P)break;do{E=v[255&D.charCodeAt(R++)]}while(R<F&&-1==E);if(-1==E)break;B+=String.fromCharCode(P<<2|(48&E)>>4);do{if(61==(M=255&D.charCodeAt(R++)))return B;M=v[M]}while(R<F&&-1==M);if(-1==M)break;B+=String.fromCharCode((15&E)<<4|(60&M)>>2);do{if(61==(O=255&D.charCodeAt(R++)))return B;O=v[O]}while(R<F&&-1==O);if(-1==O)break;B+=String.fromCharCode((3&M)<<6|O)}return B}}),function(){var e=screen.width,t=e>550?550:e-10,n=e>680?680:e-10,r=0;w.OnWebTwainNotFoundOnWindowsCallback=function(d,s,i,u,f,a,o){w._show_install_dialog(d,{default:s},i,w.DWT.EnumDWT_PlatformType.enumWindow,u,f,a,o,!0)},w.OnWebTwainNotFoundOnLinuxCallback=function(d,s,i,u,f,a,o,c,l){l||(l=w.DWT.EnumDWT_PlatformType.enumLinux),w._show_install_dialog(d,{default:s,deb:s,rpm:i},u,l,f,a,o,c,!0)},w.OnWebTwainNotFoundOnMacCallback=function(d,s,i,u,f,a,o){w._show_install_dialog(d,{default:s},i,w.DWT.EnumDWT_PlatformType.enumMac,u,f,a,o,!0)},w.dwt_change_install_url=function(d){var s=document.getElementById("dwt-btn-install");s&&(s.href=d)},w.DWT_Reconnect=function(){var d=w;if((new Date-r)/1e3>30){var s=document.getElementById("dwt-btn-install");s&&(s.innerHTML='Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.')}else d.DWT?d.DWT.CheckConnectToTheService(function(){w.DWT.ConnectToTheService()},function(){w._isInsecurePrivateNetwork()&&w._isChrome94plus()?w._checkDWTByWebSocket(function(){w.OnHTTPCorsError()},function(){setTimeout(w.DWT_Reconnect,500)}):setTimeout(w.DWT_Reconnect,500)}):console.log("The Dynamsoft namespace is missing")},w.DCP_DWT_onclickInstallButton=function(){return document.getElementById("dwt-btn-install")&&setTimeout(function(){var s=document.getElementById("dwt-install-url-div");s&&(s.style.display="none");var i=document.getElementById("dwt-btn-install");if(i&&"1"==i.getAttribute("html5")){var u=i.parentNode,f=document.createElement("div");f.id="dwt-btn-install",f.style.textAlign="center",f.style.paddingBottom="15px",f.innerHTML="Connecting to the service...",f.setAttribute("html5","1"),u.removeChild(i),u.appendChild(f),r=new Date,setTimeout(w.DWT_Reconnect,10)}else(u=i.parentNode).removeChild(i)},10),!0},w._isChrome94plus=function(){var u,d=navigator.userAgent.toLocaleLowerCase(),s=d.indexOf("chrome/"),i=0;return s>-1?(u=(i=d.slice(s+7)).indexOf(" "))>-1&&(i=parseInt(i.slice(0,u))):(s=d.indexOf("crios/"))>-1&&(u=(i=d.slice(s+6)).indexOf(" "))>-1&&(i=parseInt(i.slice(0,u))),i>=94},w._isInsecurePrivateNetwork=function(){var d=location.hostname;return"localhost"!=d&&"127.0.0.1"!=d&&0!=d.indexOf("192.168.")&&0!=d.indexOf("172.16.")&&0!=d.indexOf("10.")&&!w.navInfoSync.bSSL},w._checkDWTByWebSocket=function(d,s){var u,i=w.Lib.detect.urls;if(i&&i.length>0){var f=i[0];u=w.Lib.getWS(f.host,f.port,f.ssl)}else u=w.Lib.getWS(w.Lib.product.host,18622,!1);u.onopen=function(){if(1==u.readyState){u.onopen=null;var a=['{"id":"',(new Date).getTime(),'","method":"VersionInfo","version":"',w.Lib.product.getDWTPrefix(),w.Lib.product.getServerVersionInfo(),'"}'].join("");u.send(a)}else 0==u.readyState&&setTimeout(u.onopen,100)},u.onmessage=function(a){try{u.close(),a.data.indexOf("Version not found")>=0?s():d()}catch{s(),u.close()}a=null},u.onerror=function(){s()}},w._show_install_dialog=function(d,s,i,u,f,a,o,c,l){var I,g,m=w,C=w.DWT.EnumDWT_PlatformType,_=u==C.enumLinux||u==C.enumEmbed||u==C.enumChromeOS||u==C.enumHarmonyOS;if(w.DWT.bNpm&&w.navInfoSync.bFileSystem)return w._show_online_download_dialog(s,i,u);if(I=['<div class="dynamsoft-dwt-dlg-title">',"Please complete one-time setup","</div>"],m.DWT){if(l&&w._isInsecurePrivateNetwork()&&w._isChrome94plus())return void w._checkDWTByWebSocket(function(){w.OnHTTPCorsError()},function(){w._show_install_dialog(d,s,i,u,f,a,o,c,!1)});g=_||w.navInfoSync.bFirefox?"RESTART":"REFRESH",I.push('<div class="dynamsoft-dwt-installdlg-iconholder"> '),I.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>'),I.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>'),I.push('<img style="margin: 0px 134px 0px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII= alt="download">'),I.push('<img style="margin: 2px 132px 2px 0px" src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg== alt="install">'),I.push('<img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII= alt="scan">'),I.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>'),I.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>'),I.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>'),I.push("</div>"),I.push("</div>"),i&&_&&(I.push('<div style="margin:10px 0 0 60px;">'),I.push('<div id="dwt-install-url-div">'),w.navInfo.bArm64||w.navInfo.bMips64||w.navInfoSync.bChromeOS||w.navInfoSync.bHarmonyOS||(I.push('<div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+s.deb+'\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>'),I.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\''+s.rpm+'\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div>')),I.push("</div></div>")),I.push('<div><a id="dwt-btn-install" target="_blank" href="'),I.push(s.default),I.push('"'),I.push(i?' html5="1"':' html5="0"'),I.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>'),i?f?(I.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),I.push("If you still see the dialog after installing the scan service, please<br />"),I.push("1. Add the website to the zone of trusted sites.<br />"),I.push("IE | Tools | Internet Options | Security | Trusted Sites.<br />"),I.push("2. Refresh your browser."),I.push("</div>")):_&&(I.push('<div class="dynamsoft-dwt-dlg-tail">'),I.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>'+g+"</strong>  your browser.</div>"),I.push("</div>")):(I.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">'),f?(I.push("After the installation, please<br />"),I.push("1. Restart the browser<br />"),I.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.')):I.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>'),I.push("</div>")),m.DWT.ShowMessage(I.join(""),{width:t,headerStyle:1,closeButton:!1})}else console.log("The Dynamsoft namespace is missing")},w.OnWebTwainNeedUpgradeCallback=function(d,s,i,u,f,a,o,c,l,m,I){w._show_install_dialog(d,s,i,u,f,a,o,c,!1)},w.OnWebTwainPreExecuteCallback=function(){w.DWT?w.DWT.OnWebTwainPreExecute():console.log("The Dynamsoft namespace is missing")},w.OnWebTwainPostExecuteCallback=function(){w.DWT?w.DWT.OnWebTwainPostExecute():console.log("The Dynamsoft namespace is missing")},w.OnRemoteWebTwainNotFoundCallback=function(d,s,i,u,f){w.DWT?w.DWT.ShowMessage((f?['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left;font-size:1.4em">',"Failed to connect to the Dynamsoft Service, please make sure that the certificate is valid.<br /><br />","</div>"]:['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',"Failed to connect to the Dynamsoft Service.<br />","Please make sure that the certificate is valid OR ","If you change the Dynamsoft.DWT.Host to your own IP/domain, do not forget to update the certificate accordingly.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>']).join(""),{width:t,headerStyle:1,closeButton:!1}):console.log("The Dynamsoft namespace is missing")},w.OnRemoteWebTwainNeedUpgradeCallback=function(d,s,i,u){w.DWT?w.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',"Dynamsoft Service is outdated on the PC with IP/domain <br />",'"',s,'".<br />',"Please open the page on that PC to download and install it.","</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'].join(""),{width:t,headerStyle:1,closeButton:!1}):console.log("The Dynamsoft namespace is missing")},w.OnWebTWAINDllDownloadSuccessful=function(){console.log("The Web TWAIN Module was downloaded successfully!")},w.OnWebTWAINDllDownloadFailure=function(d,s,i){if(w.DWT)return-2371==s&&w.DWT.ShowMessage(['<div class="dynamsoft-dwt-dlg-tips">',i,"</div>",'<div class="dynamsoft-dwt-dlg-tail">','<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'].join(""),{width:t,headerStyle:1,closeButton:!1}),!0;console.log("The Dynamsoft namespace is missing")},w.OnGetServiceUpdateStatus=function(d,s,i){"Update skipped"!=i&&console.log(i)},w.OnWebTWAINModuleDownloadManually=function(d,s,i,u,f,a){return w._show_install_dialog("",d,!0,s,i,u,f,a,!1)},w.OnLTSLicenseError=function(d){var s="",u=w.DWT.licenseException,f=0;u&&(f=u.code),(-2440==f||-2441==f||-2443==f||-2446==f||d.indexOf("Internet connection")>-1||d.indexOf("Storage")>-1)&&(s='<div>You can register for a free 30-day trial <a href="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&deploymenttype=js" target="_blank" class="dynamsoft-major-color">here</a>. Make sure to select the product Dynamic Web TWAIN.</div>'),w.DWT.ShowMessage([d,s].join(""),{width:n,headerStyle:2})},w.OnLTSConnectionFailure=w.OnLTSLicenseError,w.OnLTSReturnedAnError=w.OnLTSLicenseError,w.OnLTSUUIDError=w.OnLTSLicenseError,w.OnLTSConnectionWarning=function(){var d=["Warning: You are seeing this dialog because Dynamic Web TWAIN has failed to connect to the License Tracking Server. ","A cached authorization is being used, and you can continue to use the software as usual. ","Please get connected to the network as soon as possible. ",w.DWT.isPublicLicense()?'<a class="dynamsoft-major-color" href="https://www.dynamsoft.com/company/contact/">Contact Dynamsoft</a> ':"Contact the site administrator ","for more information."].join("");w.DWT.ShowMessage(d,{width:n,caption:"Warning",headerStyle:2})},w.OnLTSPublicLicenseMessage=function(d){w.DWT.ShowMessage(d,{width:n,caption:"Warning",headerStyle:2})},w.OnHTTPCorsError=function(){var d=["<div>The Connection from the insecure (HTTP) web page to the local 'Dynamsoft Service' failed!</div>",'<div style="margin-top:10px">To fix the issue, please update your website to HTTPS or refer to <br /><a target="_blank" href="https://www.dynamsoft.com/web-twain/docs/faq/http-insecure-websites-in-chromium-browser.html?ver=latest">this article</a> for other workarounds.</div>'].join("");w.DWT.ShowMessage(d,{width:n,headerStyle:2})},w.OnLicenseExpiredMessage=function(d,s){var i,u='<a target="_blank" href="https://www.dynamsoft.com/company/contact/">contact us</a>',f='<a target="_blank" href="https://www.dynamsoft.com/store/dynamic-web-twain/#DynamicWebTWAIN">online store</a>',a="https://www.dynamsoft.com/customer/license/trialLicense?product=dwt&utm_source=in-product";s>5||(i=s>0?['<div style="padding:0 0 10px 0">Kindly note your trial key is expiring in ',s<=1?"1 day":parseInt(s)+" days",". Two quick steps to extend your trial:</div>",'<div style="margin:0 0 0 10px">1. <a target="_blank" href="',a,'">Request a new trial key</a> and follow the instructions to set the new key</div>','<div style="margin:0 0 0 10px">2. Refresh your scan page and try again</div>','<div style="padding:10px 0 0 0">If you run into any issues, please ',u,".</div>",'<div style="padding:0">If you are ready to purchase a full license, please go to the ',f," or ",u,".</div>"].join(""):['<div style="padding:0">Sorry. Your trial key has expired on ',d,". You can purchase a full license at the ",f,".</div>",'<div style="padding:0">Or, you can try requesting a new trial key at <a target="_blank" href="',a,'">this page</a>.</div>','<div style="padding:0">If you need any help, please ',u,".</div>"].join("")),i&&w.DWT.ShowMessage(i,{width:n,caption:"Warning",headerStyle:2})},w.OnLicenseError=function(d,s){w.DWT.ShowMessage(d,{width:n,headerStyle:2})},w.OnSSLCertInfo=function(d){},w._show_online_download_dialog=function(d,s,i){var c,l,m,f=w.DWT.JSVersion.split(","),a=f[0]+"."+f[1],o=location.pathname;o=o.substring(0,o.lastIndexOf("/")+1),i==w.DWT.EnumDWT_PlatformType.enumLinux&&(arm64||mips64)&&(arm64?d.default=getDebPath("arm64"):mips64&&(d.default=getDebPath("mips64el"))),c=["https://www.dynamsoft.com/web-twain/install-dynamsoft-service/?productId=1000001","&downloadLink=https://demo.dynamsoft.com/DWT/Resources/dist/DynamsoftServiceSetup_",a,".",m=d.default.substr(d.default.length-3)].join(""),l=w.Lib.Path.normalize([o,d.default].join("")),i==w.DWT.EnumDWT_PlatformType.enumWindow&&0==l.indexOf("/")&&(l=l.substr(1)),w.DWT.ShowMessage(['<div class="dynamsoft-dwt-ltsdlg-body" style="padding:0 20px 20px 20px">',"<div>To support document scanning, please complete one-time installation of the DynamsoftServiceSetup.",m," on this machine.</div>","<div>You can download the file via this trust site:</div>",'<div><a id="dwt-btn-install" target="_blank" href="',c,'"><div class="dynamsoft-dwt-dlg-button">Open Site</div></a></div>','<div style="word-break: break-word;">Or, go to <br />',l," if the file exists.</div>","<div>After the installation, please <strong>REFRESH</strong>  your browser.<br /></div>","</div>"].join(""),{width:t,headerStyle:1,closeButton:!1})}}(),w.DWT.AutoLoad=!1,w.DWT.IfAddMD5InUploadHeader=!1,w.DWT.IfConfineMaskWithinTheViewer=!1;const Lo=w,ZF=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){Lo.DWT.ProductKey="t0153KQMAAFzm97BAzFmaAN4P0OR9yW5t3IVDsP3gB0b4t/AA8J6ag3Erbn93uHLYhLObvZuJHuLXdkfKbHa33K+nlM8z7sMb0tgwHIPNhB6V6pQ6w6d5mZFmcFPnb+ytO/PGeTGo0xmeMBIb68/YuJl/PWQ/c294wkhs3Myd8fusuf7jR0B7y0wjwxNGYtMyX826Fkoq+AIDc56i",Lo.DWT.ResourcesPath="assets/dynamic-web-twain",Lo.DWT.Containers=[{ContainerId:"dwtcontrolContainer",Width:270,Height:350}],Lo.DWT.UseLocalService=!1,Lo.DWT.Load(),Lo.DWT.RegisterEvent("OnWebTwainReady",()=>{this.onReady()})}scanDocument(){this.dwtObject&&(this.dwtObject.UseLocalService||this.dwtObject.Addon.Camera.scanDocument({scannerViewer:{autoDetect:{enableAutoDetect:!0}},filterViewer:{exitDocumentScanAfterSave:!0}}).then(function(){console.log("Successful!")},function(r){alert(r.message)}))}onReady(){this.dwtObject=Lo.DWT.GetWebTwain("dwtcontrolContainer")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Qs({type:e,selectors:[["app-document-scanner"]],decls:5,vars:0,consts:[["id","scanButton",3,"click"],["id","dwtcontrolContainer"]],template:function(n,r){1&n&&(ba(0,"p"),Sf(1,"document-scanner works!"),wa(),ba(2,"button",0),Ta("click",function(){return r.scanDocument()}),Sf(3,"Scan Document"),wa(),Ca(4,"div",1))}}),e})()}];let $F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=go({type:e}),e.\u0275inj=Hi({imports:[Aw.forRoot(ZF),Aw]}),e})(),qF=(()=>{class e{constructor(){this.title="angular-document-scanner"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Qs({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Ca(0,"router-outlet")},dependencies:[qh]}),e})(),eL=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=go({type:e,bootstrap:[qF]}),e.\u0275inj=Hi({imports:[lx,$F]}),e})();(function GP(){AI=!1})(),ux().bootstrapModule(eL).catch(e=>console.error(e))}},vn=>{vn(vn.s=676)}]);